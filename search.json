[{"title":"æ—¥å¿—æ–‡ä»¶åˆ†å‰²","url":"/2023/09/01/æ—¥å¿—æ–‡ä»¶åˆ†å‰²/","content":"\n## splitæ–¹æ³•åˆ†å‰²\n\nsplitå‘½ä»¤ä¸“é—¨ç”¨æ¥å°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ†å‰²æˆå¾ˆå¤šä¸ªå°æ–‡ä»¶ï¼Œæˆ‘æŠŠsplitå‘½ä»¤çš„é€‰é¡¹åšä¸€ä¸ªç®€è¦è¯´æ˜\n\n| é€‰é¡¹ | å«ä¹‰                                            |\n| :--- | :---------------------------------------------- |\n| -b   | åˆ†å‰²åçš„æ–‡æ¡£å¤§å°ï¼Œå•ä½æ˜¯byte                    |\n| -C   | åˆ†å‰²åçš„æ–‡æ¡£ï¼Œå•è¡Œæœ€å¤§byteæ•°                    |\n| -d   | ä½¿ç”¨æ•°å­—ä½œä¸ºåç¼€ï¼ŒåŒæ—¶ä½¿ç”¨-a lengthæŒ‡å®šåç¼€é•¿åº¦ |\n| -l   | åˆ†å‰²åæ–‡æ¡£çš„è¡Œæ•°                                |\n\nä¸ºäº†å°½é‡ä¿è¯æ—¥å¿—çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬æŒ‰è¡Œåˆ†å‰²å¤§æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸”æŒ‡å®šåˆ†å‰²åçš„æ–‡ä»¶çš„å‰ç¼€å’Œåç¼€\n\n```bash\n#åç¼€æ˜¯æ•°å­—ï¼Œå ä¸¤ä½ï¼Œå‰ç¼€æ˜¯test.log\nsplit -l 1000000 test.log -d -a 2 test.log\n#åˆ†å‰²ä¹‹åçš„ç»“æœ\nls -lrth\næ€»ç”¨é‡ 1.3G\n-rw-r--r-- 1 root root 645M 5æœˆ  30 20:42 test.log\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log00\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log01\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log02\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log03\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log04\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log05\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log06\n-rw-r--r-- 1 root root  73M 5æœˆ  30 20:55 test.log07\n-rw-r--r-- 1 root root  64M 5æœˆ  30 20:55 test.log08\n```\n\n## ddåˆ†å‰²\n\n```bash\ndd bs=1M count=300 if=test.log of=newlog.1\ndd bs=1M count=300 if=test.log of=newlog.2 skip=300\ndd bs=1M count=300 if=test.log of=newlog.3 skip=600\n```\n\nåˆ†å‰²åçš„æ•ˆæœ\n\n```cobol\nls -lrth\næ€»ç”¨é‡ 1.3G\n-rw-r--r-- 1 root root 645M 5æœˆ  30 20:42 test.log\n-rw-r--r-- 1 root root 300M 5æœˆ  30 21:07 newlog.1\n-rw-r--r-- 1 root root 300M 5æœˆ  30 21:07 newlog.2\n-rw-r--r-- 1 root root  45M 5æœˆ  30 21:07 newlog.3\n```\n\nåœ¨ä¸Šé¢ä½¿ç”¨çš„å‘½ä»¤ä¸­ï¼Œbsä»£è¡¨æ•°æ®å—çš„å¤§å°ï¼Œcountè¡¨ç¤ºå¤åˆ¶çš„å—æ•°ï¼Œifè¡¨ç¤ºè¾“å…¥æ–‡ä»¶ï¼Œofè¡¨ç¤ºè¾“å‡ºæ–‡ä»¶ã€‚ \nè¿™ä¸ªå‘½ä»¤ä¸èƒ½ä¸€ä¸‹å°±æŠŠæ–‡ä»¶åˆ†å‰²åˆ°æˆ‘ä»¬æƒ³è¦çš„çŠ¶æ€ï¼Œè€Œä¸”å¾ˆæœ‰å¯èƒ½ä¸€è¡Œæ—¥å¿—è¢«åˆ†åˆ°ä¸¤ä¸ªæ–‡ä»¶ä¸­ã€‚\n\n## head+tailåˆ†å‰²\n\nç”¨è¿™ä¸¤ä¸ªå‘½ä»¤è·å–æ–‡ä»¶éƒ¨åˆ†å†…å®¹ï¼Œç„¶åé‡å®šå‘å°±èƒ½å®ç°æ–‡ä»¶åˆ†å‰²ï¼Œä½†æ˜¯é™åˆ¶ä¹ŸæŒºå¤šï¼Œåªèƒ½æŠŠæ–‡ä»¶åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¦‚æœæ–‡ä»¶ç‰¹åˆ«å¤§ï¼Œæƒ³è¦è¾¾åˆ°é¢„æœŸçš„æ•ˆæœï¼Œå°±è¦ä¸€ç›´åˆ†å‰²ä¸‹å»ã€‚ \n`head/tail -n $è¡Œæ•° test.log > newlog` \nå› ä¸ºè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¸å†å¤šè®²ã€‚\n\n## sedå®ç°åˆ†å‰²\n\nå®ç°åŸç†å°±æ˜¯ç”¨sedæˆªå–ç‰¹å®šè¡Œä¹‹é—´çš„å†…å®¹ï¼Œç„¶åè¿›è¡Œé‡å®šå‘ã€‚\n\n```bash\nsed -n '1,2000000p' test.log > test.log.1\nsed -n '2000001,4000000p' test.log > test.log.2\nsed -n '4000001,6000000p' test.log > test.log.3\nsed -n '6000001,8000000p' test.log > test.log.4\nsed -n '8000001,$p' test.log > test.log.5\n```\n\n$è¡¨ç¤ºæœ€åä¸€è¡Œï¼Œè¿™ä¸ªå¦‚æœåˆ†å‰²è¿‡å¤šï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªå¾ªç¯ã€‚\n\n## awkå®ç°åˆ†å‰²\n\nå®ç°åŸç†å’Œsedå·®ä¸å¤šï¼Œå› ä¸ºä½¿ç”¨awkä¸å¤šï¼Œè¿™é‡Œåªä¸¾ä¸€ä¸ªå°ä¾‹å­ï¼š\n\n```bash\nawk â€˜{if (NR<120000) print $0}â€™ test.log > a.txt\nawk â€˜{if (NR>=120000) print $0}â€™ test.log > b.txt\n```\n\n\n\n## ä½¿ç”¨ logrotate+crontabå®šæ—¶åˆ‡å‰²æ¸…é™¤\n\n**logrotate** ç¨‹åºæ˜¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ç®¡ç†å·¥å…·ï¼ˆä¸€èˆ¬centoséƒ½è‡ªå¸¦ï¼‰ã€‚ç”¨æ¥æŠŠæ—§çš„æ—¥å¿—æ–‡ä»¶åˆ é™¤ï¼Œå¹¶åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšâ€œè½¬å‚¨â€ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å…¶å¤©æ•°æ¥è½¬ å‚¨ï¼Œè¿™ä¸ªè¿‡ ç¨‹ä¸€èˆ¬é€šè¿‡ `cron` ç¨‹åºæ¥æ‰§è¡Œã€‚`logrotate` ç¨‹åºè¿˜å¯ä»¥ç”¨äºå‹ç¼©æ—¥å¿—æ–‡ä»¶ï¼Œä»¥åŠå‘é€æ—¥å¿—åˆ°æŒ‡å®šçš„E-mail ã€‚ç³»ç»Ÿè‡ªå¸¦çš„æ—¥å¿—åˆ‡å‰²çš„é…ç½®æ–‡ä»¶åœ¨`/etc/logrotate.conf` å’Œ `/etc/logrotate.d/syslog` é‡Œé¢ã€‚\n\né…ç½®æ–‡ä»¶\n\n```shell\nvim  test-logsplit\n/opt/my/test.log{\n\tdaily\n\t#é…ç½®èƒ½æœ‰å¤šå°‘ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œè¶…è¿‡äº†å°±ä¼šå°†ä»¥å‰çš„åˆ é™¤\n\trotate 10\n\tmissingok\n\tnotifempty\n\tminsize=1M\n    maxsize=10M\n    #ç­‰test.log åˆ°è¿™ä¸ªå¤§å°å°±ä¼šè¿›è¡Œæ—¥å¿—åˆ‡å‰²,è€Œä¸æ˜¯åˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶\n    size=1M\n\tsharedscripts\n\tpostrotate\n\t\tcat /dev/null > /opt/my/test.log\n\tendscript\n}\n```\n\nè¯¦ç»†ç‰ˆï¼š\n\n```shell\n/path/to/springboot.log {\n    daily                   # æŒ‰å¤©è¿›è¡Œæ—¥å¿—åˆ‡å‰²\n    missingok               # å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç»§ç»­æ‰§è¡Œè€Œä¸æŠ¥é”™\n    rotate 7                # ä¿ç•™æœ€è¿‘çš„7ä¸ªåˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶\n    compress                # å‹ç¼©è¢«åˆ‡å‰²çš„æ—§æ—¥å¿—æ–‡ä»¶\n    delaycompress           # ä¸‹æ¬¡åˆ‡å‰²æ—¶æ‰å‹ç¼©ï¼Œä¿ç•™å½“å‰æ—¥å¿—æ–‡ä»¶çš„åŸå§‹æ ¼å¼\n    notifempty              # å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸ºç©ºï¼Œä¸è¿›è¡Œåˆ‡å‰²\n    create 0644 <username> <groupname>   # åˆ›å»ºæ–°çš„åˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶è®¾ç½®æƒé™å’Œæ‰€æœ‰è€…\n    dateext                 # åœ¨åˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶ä¸­æ·»åŠ æ—¥æœŸåç¼€\n    dateformat -%Y%m%d-%s   # åˆ‡å‰²åçš„æ—¥å¿—æ–‡ä»¶æ—¥æœŸæ ¼å¼\n    postrotate              # åœ¨åˆ‡å‰²å®Œæˆåæ‰§è¡Œçš„æ“ä½œ\n        systemctl restart springboot   # é‡å¯Spring BootæœåŠ¡\n    endscript               # ç»“æŸpostrotateæ“ä½œå—\n}\n\n```\n\næ¥ä¸‹æ¥ï¼Œä½¿ç”¨crontabè®¾ç½®å®šæ—¶ä»»åŠ¡æ¥è¿è¡Œlogrotateå·¥å…·ï¼š\n\n```bash\ncrontab -e\n```\n\nåœ¨æ‰“å¼€çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n\n```bash\n0 0 * * * /usr/sbin/logrotate -f /etc/logrotate.d/springboot\n```\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"PGP","url":"/2023/08/31/PGP/","content":"\n## PGPç®€ä»‹\n\nPGP å…¨ç§°æ˜¯ Pretty Good Privacyï¼Œæ˜¯ä¸€ä¸ªè¢«è®¾è®¡ç”¨æ¥åŠ å¯†ä¿¡æ¯ï¼Œä¿æŠ¤éšç§çš„**è½¯ä»¶**ã€‚ç°åœ¨æåˆ°â€œPGPâ€ï¼Œ åŸºæœ¬ä¸Šæ˜¯è¯´ [OpenPGP æ ‡å‡†](https://juejin.cn/post/6920108852570488845?searchId=2023083109400217ECAC1BC23740D6C5C1#PGPã€OpenPGPã€GnuPG å’Œ gpg)ã€‚\n\nPGPç›®å‰æ”¯æŒçš„ç®—æ³•\n\n- éå¯¹ç§°ç®—æ³•: RSA, ELG, DSA, ECDH, ECDSA, EDDSA\n- å¯¹ç§°ç®—æ³•: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128, CAMELLIA192, CAMELLIA256\n- å“ˆå¸Œç®—æ³•: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224\n- å‹ç¼©ç®—æ³•: Uncompressed, ZIP, ZLIB, BZIP2\n\né™¤éé‡å­è®¡ç®—æœºè½åœ°ï¼Œç›®å‰æ¥è¯´2048ä½çš„RSAåŠ å¯†æ˜¯ä¸å¯ç ´è§£çš„ã€‚\n\n\n\næˆ‘ä»¬éœ€è¦çŸ¥é“PGPã€OpenPGPã€GnuPG å’Œ gpg ä¹‹é—´çš„ä¸åŒï¼š\n\n- PGP ï¼ˆâ€œPretty Good Privacyâ€ï¼‰ æ˜¯æœ€åˆå•†ä¸šè½¯ä»¶çš„åå­—\n- OpenPGP æ˜¯ä¸æœ€åˆ PGP å·¥å…·å…¼å®¹çš„ IETF æ ‡å‡†\n- GnuPG ï¼ˆâ€œGnu Privacy Guardâ€ï¼‰æ˜¯å®ç°äº† OpenPGP æ ‡å‡†çš„è‡ªç”±è½¯ä»¶\n- GnuPG çš„å‘½ä»¤è¡Œå·¥å…·ç§°ä¸º â€œgpgâ€\n\nOpenPGP æ˜¯åœ¨ PGP åŸºç¡€ä¸Šå®šä¹‰çš„å¼€æ”¾æ ‡å‡†ï¼Œä½¿å¾— PGP æŠ€æœ¯å¯ä»¥ç”±ä»»ä½•å…¬å¸å’Œä¸ªäººå®ç°ï¼Œè€Œä¸éœ€è¦ç¼´çº³è®¸å¯è´¹ç”¨ã€‚[æ ‡å‡†è‰æ¡ˆ](https://link.juejin.cn/?target=http%3A%2F%2Fwww.ietf.org%2Frfc%2Frfc4880.txt)æŒ‡å‡º OpenPGP æä¾›çš„æ˜¯æ•°æ®å®Œæ•´æ€§æœåŠ¡ï¼Œèµ‹äºˆç”¨æˆ·æŸ¥çœ‹ã€æ£€éªŒã€ç”Ÿæˆå’Œå†™å…¥åŠ å¯†ä¿¡æ¯ã€ç§˜é’¥å’Œç­¾åçš„èƒ½åŠ›ã€‚ OpenPGP é€šè¿‡åŠ å¯†ã€æ•°å­—ç­¾åã€å‹ç¼©å’Œ Radix-64 è½¬æ¢æ¥å®ç°è¿™äº›åŠŸèƒ½ã€‚\n\nGnuPG æ˜¯ OpenPGP åè®®çš„ä¸€ç§å®Œå¤‡çš„å®ç°ï¼Œé™¤äº†æŒ‰ç…§ OpenPGP åè®®æä¾›æ•°æ®åŠ è§£å¯†å’Œç­¾åæœåŠ¡ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†å®Œæ•´çš„ç§˜é’¥ç®¡ç†åŠŸèƒ½ï¼Œå¹¶å®ç°äº†åè®®ä¸­è®¸å¤šå¯é€‰çš„åŠ å¯†æˆ–å‹ç¼©ç®—æ³•ã€‚\n\nä»Šå¤©ï¼Œâ€œPGPâ€è¿™ä¸ªè¯å‡ ä¹è¢«æ™®éç”¨æ¥è¡¨ç¤ºå¼€æ”¾çš„ OpenPGP æ ‡å‡†ï¼Œè€Œä¸æ˜¯æœ€åˆçš„å•†ä¸šè½¯ä»¶ï¼Œå› æ­¤â€œPGPâ€å’Œâ€œOpenPGPâ€æ˜¯å¯ä»¥äº’æ¢çš„ã€‚\n\nâ€œGnuPGâ€å’Œâ€œgpgâ€è¿™ä¸¤ä¸ªè¯åº”è¯¥ä»…åœ¨æåŠå·¥å…·æ—¶ä½¿ç”¨ï¼Œè€Œä¸ç”¨äºå®ƒä»¬äº§ç”Ÿçš„è¾“å‡ºæˆ–å®ƒä»¬å®ç°çš„ OpenPGP åŠŸèƒ½ã€‚ä¸¾ä¾‹ï¼š\n\n- PGPï¼ˆè€Œé GnuPG æˆ– GPGï¼‰å¯†é’¥\n- PGPï¼ˆè€Œé GnuPG æˆ– GPGï¼‰ç­¾å\n- PGPï¼ˆè€Œé GnuPG æˆ– GPGï¼‰å…¬é’¥æœåŠ¡å™¨\n\n## gpgå¿«é€Ÿå¼€å§‹\n\n### ç”Ÿæˆä¸»å¯†é’¥\n\n```bash\n# step 0 \ngpg --full-gen-key\n# è¿™é‡Œä¸æ¨èä½¿ç”¨çš„ `gpg --gen-key`\n\n\n# step 1\ngpg (GnuPG) 2.2.20; Copyright (C) 2020 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nPlease select what kind of key you want:\n   (1) RSA and RSA (default)\n   (2) DSA and Elgamal\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n  (14) Existing key from card\nYour selection?\n#  é»˜è®¤å°±å¯ä»¥\n\n\n# step 2\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (3072)\n\n# æ­¤å¤„è¾“å…¥ä½ å¸Œæœ›çš„å¯†é’¥é•¿åº¦ï¼Œ RSAçš„ä¸åº”ä½äº2048 bitsï¼Œå½“ç„¶è¾“å…¥çš„æ•°å­—è¶Šå¤§è¶Šå®‰å…¨ï¼Œç›¸åº”çš„ï¼ŒåŠ è§£å¯†çš„é€Ÿåº¦ä¹Ÿä¼šæ›´æ…¢\n\n# step 3\nPlease specify how long the key should be valid.\n         0 = key does not expire\n      <n>  = key expires in n days\n      <n>w = key expires in n weeks\n      <n>m = key expires in n months\n      <n>y = key expires in n years\nKey is valid for? (0)  2y\n\n# é»˜è®¤å¯ä»¥é€‰0 ï¼Œå³æ°¸ä¸è¿‡æœŸï¼Œ è¿™é‡Œæˆ‘é€‰äº†2yï¼Œ  å› ä¸ºåˆ°æœŸä¹‹å‰éšæ—¶å¯ä»¥æ›´æ”¹ä½ çš„è¿‡æœŸæ—¶é—´ï¼Œä»¥ç¡®ä¿ä½ å¯¹æ­¤å¯†é’¥ä»æ‹¥æœ‰æ§åˆ¶æƒ\n\n# step 4\nKey expires at Wed 11 Jan 2023 05:50:53 PM CST\nIs this correct? (y/N) y\n\n#ç¡®å®š\n\n# step 5\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name:  linus   # è¿™é‡Œåå­—å¯ä»¥æ˜¯ç½‘åï¼Œå¯ä»¥æ˜¯ä»»æ„åå­—ï¼Œå¦‚æœä½ æ³¨é‡éšç§å°±ä¸è¦è¾“å…¥è‡ªå·±çœŸåäº† \nEmail address: linus@outlook.com  \nComment:     # å¤‡æ³¨å¯ä»¥ç•™ç©º\n\n# æ³¨æ„äº†ï¼š è¿™é‡Œçš„é‚®ç®±ï¼Œ å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨PGPä¸ºä½ çš„Gitè®°å½•è®¤è¯ï¼Œ è¿™é‡Œå…¶å®æ˜¯å¯ä»¥éšä¾¿è¾“å…¥çš„ï¼Œä¸éœ€è¦æ˜¯ä½ çš„é‚®ç®±ï¼Œ ç”šè‡³ä¸éœ€è¦æ˜¯ä¸€ä¸ªçœŸå®å­˜åœ¨çš„é‚®ç®±ï¼Œåªè¦æ¥å—ä½ ä¿¡æ¯çš„äººçŸ¥é“å°±è¡Œã€‚éšç§æ³„æ¼é—®é¢˜å¾ˆä¸¥é‡ï¼Œä½ ä¸€æ—¦è®¾ç½®äº†ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°å…¬é’¥æœåŠ¡å™¨ï¼Œå°±æ°¸è¿œåˆ ä¸æ‰äº† ğŸ˜…\n\n\n# step 6\nYou selected this USER-ID:\n    \"linus <linust@outlook.com>\"\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o\n\n# ç¡®è®¤æ— è¯¯åè¾“å…¥ o\n\n# step 7\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Please enter the passphrase to                       \t\t\t\t\t\t\t\t\t\t\t  â”‚\nâ”‚ protect your new key                                                           â”‚ \nâ”‚                                                      â”‚\nâ”‚ Passphrase: ________________________________________ \t\t\t\t\t\t\t\t\t\t\t\t\t\t â”‚\nâ”‚                                                      â”‚\nâ”‚       <OK>                              <Cancel>     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n# è¾“å…¥ä¸€ä¸ªå¤æ‚çš„å¯†ç  å¹¶ç¡®è®¤\n\n# step 8\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\n\n# éšæœºç§»åŠ¨ä½ çš„é¼ æ ‡ï¼Œè¶Šéšæœºä½ çš„å¯†é’¥è¶Šå®‰å…¨\n\n# step 9 å¤§åŠŸå‘Šæˆ\n                 \ngpg: key 99F583599B7E31F1 marked as ultimately trusted\ngpg: revocation certificate stored as '/root/.gnupg/openpgp-revocs.d/705358AB85366CAB05C0220F99F583599B7E31F1.rev'\npublic and secret key created and signed.\n\npub   rsa3072 2021-01-11 [SC]\n      705358AB85366CAB05C0220F99F583599B7E31F1\t\t\t # ä½ çš„ key id\nuid                      linus <linus@outlook.com>\nsub   rsa3072 2021-01-11 [E] \t\t # è¿™ä¸ªæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ç”¨äºåŠ å¯†çš„å­å¯†é’¥ï¼ŒEä»£è¡¨Encrypt åŠ å¯†\n```\n\nä»¥ä¸‹æ˜¯å¸¸è§ç¼©å†™é‡Šä¹‰ï¼š\n\n```ini\nA    =>    Authentication\nC    =>    Certify\nE    =>    Encrypt\nS    =>    Sign\n?    =>    Unknown capability\nsec  =>    Secret Key\nssb  =>    Secret SuBkey\npub  =>    Public Key\nsub  =>    Public Subkey\n```\n\n### ç”Ÿæˆå­å¯†é’¥\n\nä½ æ—¥å¸¸ä½¿ç”¨åº”è¯¥ä½¿ç”¨å­å¯†é’¥ï¼Œä¸»å¯†é’¥é™¤äº†ç­¾å‘æ–°çš„å­å¯†é’¥ä¸è¦ä½¿ç”¨ã€‚\n\nå»ºè®®ä¸ºä¸åŒç¯å¢ƒï¼Œä¸åŒç”¨é€”éƒ½å•ç‹¬ç”Ÿæˆå­å¯†é’¥ï¼Œäº’ä¸å¹²æ‰°ã€‚\n\n```bash\n# step 0\ngpg --edit-key linus # æˆ–è€…key id  \n\n# step 1  è¿›å…¥gpgäº¤äº’ç•Œé¢\t\ngpg (GnuPG) 2.2.20; Copyright (C) 2020 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nSecret key is available.\n\nsec  rsa3072/99F583599B7E31F1\n     created: 2021-01-11  expires: never       usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa3072/6FE9C71CFED44076\n     created: 2021-01-11  expires: never       usage: E\n[ultimate] (1). linus <linus@outlook.com>C\n\n# step 2  \ngpg>   addkey\nPlease select what kind of key you want:\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n   (5) Elgamal (encrypt only)\n   (6) RSA (encrypt only)\n  (14) Existing key from card\nYour selection? 4   \n# æ ¹æ®ä½ çš„ç”¨é€”é€‰æ‹©ï¼Œ è¿™é‡Œç”Ÿæˆä¸€ä¸ªåªç”¨äºç­¾åçš„å­å¯†é’¥ï¼ˆsign onlyï¼‰\n\n#  åé¢çš„é€‰æ‹©å’Œä¸»å¯†é’¥ç”Ÿæˆçš„å¤§åŒå°å¼‚ï¼ŒæŒ‰æç¤ºæ“ä½œå³å¯\n\n# ç”Ÿæˆå®Œæ¯•å\nsec  rsa3072/99F583599B7E31F1\n     created: 2021-01-11  expires: never       usage: SC\n     trust: ultimate      validity: ultimate\nssb  rsa3072/6FE9C71CFED44076\n     created: 2021-01-11  expires: never       usage: E\nssb  rsa3072/FDB960B857D397F6\n     created: 2021-01-11  expires: never       usage: S\n[ultimate] (1). linus <linus@outlook.com>\n\n#  last step\ngpg>  save  #  è®°å¾—saveï¼Œ ç›´æ¥é€€å‡ºçš„è¯ä»€ä¹ˆä¹Ÿæ²¡æœ‰\n```\n\n### ç”Ÿæˆæ’¤é”€è¯ä¹¦\n\nå‡å¦‚ä½ å¿˜äº†ä¸»å¯†é’¥çš„å¯†ç ï¼Œæˆ–è€…ä¸¢å¤±äº†å¯¹ä¸»å¯†é’¥çš„æ§åˆ¶æƒï¼ˆä¸¢å¤±ï¼Œè¢«å¤ºå–ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ’¤é”€å‡­è¯çš„è¯ï¼Œ é™¤äº†ä¸€ä¸ªä¸ªé€šçŸ¥ä½ çš„æœ‹å‹ä»¬æ²¡æœ‰ä»»ä½•åŠæ³• è¯æ˜ä½ ä¸å†ä½¿ç”¨è¿™ä¸ªå¯†é’¥ï¼Œè¿™ç®€ç›´æ˜¯ç¾éš¾ã€‚\n\n```bash\n# step 0\ngpg --gen-revoke -ao   revoke.pgp   linus # uid æˆ–è€…key id\n\n# step 1\nsec  rsa3072/99F583599B7E31F1 2021-01-11 linus <linus@outlook.com>\n\nCreate a revocation certificate for this key? (y/N) y\nPlease select the reason for the revocation:\n  0 = No reason specified\n  1 = Key has been compromised\n  2 = Key is superseded\n  3 = Key is no longer used\n  Q = Cancel\n(Probably you want to select 1 here) 3\n\n# æŒ‰æç¤ºèµ°å®Œæµç¨‹å°±å¯ä»¥\n```\n\nç”Ÿæˆçš„`revoke.pgp`å°±æ˜¯æ’¤é”€å‡­è¯ï¼Œ æœ‰äº†è¿™ä¸ªæ’¤é”€å‡­è¯ï¼Œä½ å¯ä»¥åœ¨æ²¡æœ‰å¯†ç çš„æƒ…å†µä¸‹ä½¿ä¸€ä¸ªå…¬é’¥å¤±æ•ˆï¼Œæ‰€ä»¥ä¸€å®šè¦å¦¥å–„ä¿å­˜ï¼Œè€Œä¸”æœ€å¥½æ¯”ä¸»å¯†é’¥å¤šä¸€ä»½ã€‚\n\n### åˆ—å‡ºå¯†é’¥\n\n```bash\n# åˆ—å‡ºæ‰€æœ‰å…¬é’¥ã€å­å…¬é’¥\ngpg --list-keys \n# åˆ—å‡ºæ‰€æœ‰å¯†é’¥ã€å­å¯†é’¥\ngpg --list-secret-keys \n\n# ç®€åŒ–å‘½ä»¤\ngpg -k \ngpg -K  \n\n\n# è¾“å‡º \nsec   rsa3072 2021-01-11 [SC]\n      705358AB85366CAB05C0220F99F583599B7E31F1\nuid           [ultimate] linus <linus@outlook.com>\nssb   rsa3072 2021-01-11 [E]\nssb   rsa3072 2021-01-11 [S]\n```\n\nè¿™æ ·å¹¶æ²¡æœ‰åˆ—å‡ºå­å¯†é’¥çš„id, è€Œä¸”æ²¡æœ‰æ‰“å°å‡ºæŒ‡çº¹ä¿¡æ¯ï¼Œ æ˜¯ä¸å®‰å…¨çš„ã€‚æ‰€ä»¥åœ¨ä½ æŸ¥çœ‹å¯†é’¥æ—¶åº”è¯¥\n\n- åŠ ä¸Š `--keyid-format long`è¾“å‡ºé•¿ID\n- åŠ ä¸Š `--fingerprint` è¾“å‡ºæŒ‡çº¹ä¿¡æ¯\n\næ¯”å¦‚\n\n```bash\ngpg --fingerprint -K --keyid-format long\n \n # è¾“å‡º\nsec   rsa3072/0x99F583599B7E31F1 2021-01-11 [SC]\t\t# é•¿ID\n      Key fingerprint = 7053 58AB 8536 6CAB 05C0  220F 99F5 8359 9B7E 31F1 #æŒ‡çº¹ä¿¡æ¯\nuid                   [ultimate] linus <linus@outlook.com>\nssb   rsa3072/0x6FE9C71CFED44076 2021-01-11 [E]            # æ–œæ åé¢çš„å°±æ˜¯å­å¯†é’¥ID\nssb   rsa3072/0xFDB960B857D397F6 2021-01-11 [S]\n```\n\n\n\n### å®‰å…¨è®¾ç½®\n\næ¯æ¬¡éƒ½æ‰“ `--keyid-format long`å’Œ`--fingerprint` å¾ˆçƒ¦å¯¹ä¸å¯¹ï¼Œ ç¼–è¾‘é…ç½®gpgæ–‡ä»¶, `vim ~/.gnupg/gpg.conf`\n\n```bash\n# ~/.gnupg/gpg.conf\n\nkeyid-format 0xlong\nwith-fingerprint\n```\n\n### å¤‡ä»½\n\n```bash\ngpg -ao public-key.txt --export linus   # å¯¼å‡ºå…¬é’¥\n\n# æ³¨æ„è¿™é‡Œæœ€å è¦å¸¦ä¸Šâ€œ!â€ï¼Œ ä¸ç„¶ä¼šå¯¼å‡ºå…¨éƒ¨å­å¯†é’¥\ngpg  -ao secret-key --export-secret-key 99F583599B7E31F1!                         # å¯¼å‡ºä¸»ç§é’¥ï¼Œå»ºè®®secret-key æ›¿æ¢ä¸ºä½ çš„åŠ å¯†è®¾å¤‡å¤‡ä»½æ–‡ä»¶çš„è·¯å¾„ï¼Œç›´æ¥å¯¼å…¥åˆ°è®¾å¤‡ä¸­\ngpg  -ao sign-subkey --export-secret-subkeys FDB960B857D397F6!            #å¯¼å‡ºæœ‰[S]æ ‡è¯†ã€ç­¾åç”¨å­ç§é’¥\ngpg  -ao encrypt-subkey --export-secret-subkeys 6FE9C71CFED44076!    #å¯¼å‡ºæœ‰[E]æ ‡è¯†ã€åŠ å¯†ç”¨å­ç§é’¥ ,è¿™é‡Œçš„IDæ›¿æ¢ä¸ºä½ çš„å­å¯†é’¥ID\n\n\n# åˆ«å¿˜äº†åŒæ—¶å°†ä½ åˆšåˆšç”Ÿæˆçš„æ’¤é”€å‡­è¯ä¹Ÿå¤‡ä»½èµ·æ¥\n```\n\n### åˆ é™¤\n\nå¤‡ä»½å®Œåï¼Œè¦å°†æœ¬æœºçš„å¯†é’¥æ¸…é™¤å¹²å‡€ï¼Œé¦–å…ˆåˆ é™¤ï¼š\n\n```bash\n\ngpg --delete-secret-keys linus  # åˆ é™¤ç§é’¥ï¼Œ  UID ä¹Ÿå¯ä»¥æ›¿æ¢æˆå­å¯†é’¥ID, ä¸»å¯†é’¥Key ID\ngpg --delete-keys linus\t\t # åˆ é™¤å…¬é’¥\n\n# å¦‚æœæƒ³å…¨éƒ¨åˆ é™¤æ¨èç›´æ¥åˆ æ–‡ä»¶å¤¹,å³åˆ é™¤ $HOME/.gnupg\n```\n\nç”±äºgpgç”Ÿæˆçš„ç§é’¥ä¼šåœ¨ä½ çš„ç£ç›˜ä¸Šä½¿ç”¨æ˜æ–‡å‚¨å­˜ï¼Œæ‰€ä»¥ä¸€ä¸ªå•ç‹¬çš„ `rm` æˆ–è€…å³é”®åˆ é™¤ å¹¶ä¸èƒ½å½»åº•åˆ é™¤æ‰ï¼Œå¯ä»¥ä½¿ç”¨ wipe å·¥å…·ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ SSD ä¸”æ²¡æœ‰ å¯ç”¨å…¨ç›˜åŠ å¯†ï¼Œæ˜¯æ²¡æ³•å½»åº•åˆ é™¤çš„ã€‚\n\nç‰¹åˆ«æ¨èä½¿ç”¨ [Tails (boum.org)](https://link.juejin.cn/?target=https%3A%2F%2Ftails.boum.org%2F)å‘è¡Œç‰ˆæ¥ç”Ÿæˆä¸»è¦ä½¿ç”¨çš„å¯†é’¥ï¼Œ ç³»ç»Ÿè‡ªå¸¦pgpå’Œpaper key ç­‰å·¥å…·, å¯ä»¥ç¡®ä¿å…¨ç¨‹æ–­ç½‘æ“ä½œ, åŒæ—¶æ­¤ç³»ç»Ÿé‡å¯ä¼šæ“¦é™¤æ‰€æœ‰å†…å®¹ï¼Œè¿˜å…å»äº†æ“¦é™¤å¯†é’¥çš„éº»çƒ¦ã€‚\n\n### å¯¼å…¥\n\n```bash\n#ä»æ–‡ä»¶å¯¼å…¥\ngpg --import [å¯†é’¥æ–‡ä»¶]   # åˆšåˆšå¤‡ä»½çš„å­å¯†é’¥æ–‡ä»¶ï¼Œ æˆ–è€…å…¶ä»–äººçš„å…¬é’¥\n\n# æš‚ä¸æ¨èä»å…¬é’¥æœåŠ¡å™¨å¯¼å…¥ï¼Œå…·ä½“ç”¨æ³•ä¼šåœ¨å…¬é’¥æœåŠ¡å™¨ä¸€ç« ä»‹ç»\n# è¿™é‡Œå…ˆæ¨è ç»ƒä¹ å¯¼å…¥è‡ªå·±çš„å­å¯†é’¥\n\n\n # è¾“å‡º\nsec#   rsa3072/0x99F583599B7E31F1 2021-01-11 [SC]\t\t # sec åé¢å¸¦æœ‰ # å·è¯´æ˜ä¸»å¯†é’¥æœªå¯¼å…¥ï¼Œæ˜¯å®‰å…¨çš„\n      Key fingerprint = 7053 58AB 8536 6CAB 05C0  220F 99F5 8359 9B7E 31F1 #æŒ‡çº¹ä¿¡æ¯\nuid                   [unknown] linus <linus@outlook.com>\nssb #    rsa3072/0x6FE9C71CFED44076 2021-01-11 [E]           # å¸¦æœ‰ # å·è¯´æ˜è¯¥å­å¯†é’¥å·²å¯¼å…¥\n```\n\n### ç­¾åå’ŒéªŒè¯\n\nè¿™é‡Œåªè®² å¦‚ä½•ç­¾åå’ŒéªŒè¯ ä»–äººæ–‡ä»¶ï¼Œ ä¸ºä»–äººå…¬é’¥ç­¾åå’ŒéªŒè¯ æ”¾åœ¨å…¬é’¥çš„å‘å¸ƒå’Œäº¤æ¢ä¸€ç« è®²è§£ã€‚\n\n```bash\n# ç¬¬ä¸€ç§æ–¹å¼ï¼Œç”ŸæˆäºŒè¿›åˆ¶ç­¾åæ–‡ä»¶\n\ngpg --sign input.txt  # å½“ç„¶ä¹Ÿå¯ä»¥åŠ ä¸Š--outputå‚æ•°\n\n# ç¬¬äºŒç§æ–¹å¼ï¼Œç”ŸæˆASCIIæ ¼å¼ç­¾å\ngpg --clearsign input.txt\n\n# ç¬¬ä¸‰ç§ï¼Œç­¾åå’ŒåŸæ–‡æœ¬åˆ†å¼€ï¼ˆå‰ä¸¤ç§çš„ç­¾åæ–‡ä»¶ä¸­åŒ…å«äº†æ‰€æœ‰åŸæ–‡æœ¬ï¼Œæ‰€ä»¥ä½“ç§¯ä¼šæ¯”è¾ƒå¤§ï¼‰\ngpg --armor --detach-sign input.txt  #ä¸åŠ armorç”Ÿæˆä¼šäºŒè¿›åˆ¶\n\n#  éªŒè¯ç­¾åæ–‡ä»¶\ngpg --verify demo.txt.asc demo.txt\n```\n\n### åŠ è§£å¯†\n\n```bash\n# åŠ å¯†ï¼š\n\n# recipientæŒ‡å®šæ¥æ”¶è€…çš„å…¬é’¥ID\ngpg --recipient {keyid/uid} --output encrypt.txt --encrypt input.txt\n# ä¹Ÿå¯ä»¥æŒ‰å–œå¥½åŠ ä¸Š--armoré€‰é¡¹ç­‰\n\n# æˆ‘æ›´å–œæ¬¢ç”¨ \ngpg  -se  -o  encrypt.txt  -r  {keyid/uid}   input.txt  \n# sä»£è¡¨ç­¾å  eä»£è¡¨åŠ å¯†\n# oæ˜¯ å°†ç»“æœ è¾“å‡ºåˆ°æ–‡ä»¶  encrypt.txt\n# råé¢è·Ÿ æ¥æ”¶è€…çš„ uidæˆ–è€… key idï¼Œ æ¥æ”¶è€…çš„å…¬é’¥å¿…é¡»å·²ç»å¯¼å…¥è¿‡\n# input.txt æ˜¯ä½ è¦åŠ å¯†çš„æ–‡ä»¶\n\n\n# è§£å¯†ï¼š\ngpg --decrypt encrypt.txt --output decrypt.txt\n# ä¹Ÿå¯ä»¥\ngpg -d encrypt.txt   # è¾“å‡ºåˆ°ç»ˆç«¯ ç›´æ¥æŸ¥çœ‹\n```\n\n### å‘å¸ƒ ä¸ äº¤æ¢\n\nå…¬é’¥çš„äº¤æ¢æ˜¯æ‰€æœ‰éå¯¹ç§°åŠ å¯†ç®—æ³•çš„è„†å¼±ç‚¹ï¼Œæ‰€è°“ç°ä»£çš„ä½¿ç”¨æ–¹å¼ï¼Œä¸»è¦ä½“ç°åœ¨å¯†é’¥çš„äº¤æ¢å’Œå‘å¸ƒä¸Šé¢ï¼Œ ä¹‹åä¼šå•ç‹¬æ¥æ¢è®¨ã€‚\n\n**é˜…è¯»å¹¶ç†è§£æœ¬ç³»åˆ—ä¹‹å‰è¯·ä¸è¦å‘å¸ƒä½ çš„å…¬é’¥åˆ°å…¬é’¥æœåŠ¡å™¨**ã€‚\n\n### æ’¤é”€\n\nç”±äºPGPæ²¡æœ‰æä¾›ä»»ä½•å°†åŠé”€ä¿¡æ¯é€šçŸ¥å…¶ä»–ç”¨æˆ·çš„æ–¹å¼ï¼Œä»–ä¸èƒ½ä¿è¯æ²¡äººä¼šä½¿ç”¨æ’¤é”€äº†çš„å·²ç»å˜å¾—ä¸å®‰å…¨çš„å¯†é’¥ã€‚\n\nä½ ä¸¢å¤±çš„ç§é’¥ä»ç„¶å¯ä»¥è¢«æ”»å‡»è€…ä½¿ç”¨ï¼Œå¹¶ç”¨æ¥è§£å¯†é‚£äº›æ²¡æœ‰æ›´æ–°ä½ çš„å…¬é’¥çš„äººå‘é€çš„åŠ å¯†æ¶ˆæ¯ã€‚ revoke å­å¯†é’¥å¹¶æ›´æ–°å…¬é’¥åï¼Œè‹¥æœ‰äººç”¨è€çš„å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼Œè™½ç„¶ä½ ä»ç„¶å¯ä»¥è§£å¯†ï¼Œä½†æ˜¯æ”»å‡»è€…åŒæ ·å¯ä»¥ï¼Œè¿™æ—¶å€™æ˜¯æåº¦ä¸å®‰å…¨çš„ã€‚\n\nä¾‹å¦‚ï¼šå¦‚æœAçš„ç§äººå¯†é’¥è¢«ç›—ï¼Œå¥¹å°†å‘å‡ºä¸€ä¸ªå¯†é’¥æ’¤é”€è¯ä¹¦ï¼ˆkey revocation certificateï¼‰ï¼Œä½†æ˜¯ç”±äºè¿™ä¸ªå¯†é’¥çš„åˆ†å‘æ˜¯éæ­£å¼çš„ä¸”å°†è´¹å¤§é‡çš„æ—¶é—´å’Œå£èˆŒï¼Œæ•…ä¸èƒ½ä¿è¯å¯†é’¥ç¯ä¸­æ¯ä¸€ä¸ªæœ‰Aå…¬å¼€å¯†é’¥çš„ç”¨æˆ·éƒ½èƒ½æ”¶åˆ°ã€‚ç”±äºAå¿…é¡»ç”¨å¥¹çš„ç§äººå¯†é’¥ç­¾åæ’¤æ¶ˆçš„è¯ä¹¦ï¼Œæ‰€ä»¥å¦‚æœAåŒæ—¶ä¸¢å¤±äº†ç§äººå¯†é’¥ï¼Œå¥¹å°±ä¸èƒ½æ’¤é”€å¯†é’¥ã€‚å¯†é’¥çš„æ’¤é”€é—®é¢˜è¢«è®¤ä¸ºæ˜¯æ•´ä¸ªç³»ç»Ÿæœ€è–„å¼±çš„ç¯èŠ‚ã€‚\n\næ‰€ä»¥åœ¨ä½ å°†å¯†é’¥æ’¤é”€åï¼Œè¯·å°†æ’¤é”€åçš„å…¬é’¥å‘å¸ƒåˆ°ä½ ä¸€è´¯å…¬å¸ƒå…¬é’¥çš„åœ°æ–¹ï¼Œ å¹¶å°½å¯èƒ½é€šçŸ¥å…¶ä»–äººã€‚\n\n### æ’¤é”€ä¸»å¯†é’¥\n\n```bash\ngpg --import gpg-linus.asc                                               # åœ¨ä¸€å°æ–°çš„ç”µè„‘ä¸Šå¯¼å…¥ä½ çš„å…¬é’¥\ngpg: key 99F583599B7E31F1: \"linus <linus@outlook.com>\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1\n\n\n\ngpg --import revoke                                                       # å¯¼å…¥ä½ å¤‡ä»½çš„æ’¤é”€å‡­è¯ï¼Œç›´æ¥ä¼šå¯¼è‡´å¯†é’¥ä¸å¯ç”¨\n\n\n\ngpg: key 99F583599B7E31F1: \"linus <linus@outlook.com>\" revocation certificate imported\ngpg: Total number processed: 1\ngpg:    new key revocations: 1\ngpg: marginals needed: 3  completes needed: 1  trust model: pgp\ngpg: depth: 0  valid:   1  signed:   1  trust: 0-, 0q, 0n, 0m, 0f, 1u\ngpg: depth: 1  valid:   1  signed:   0  trust: 1-, 0q, 0n, 0m, 0f, 0u\ngpg: next trustdb check due at 2021-09-29\n\ngpg -k\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t# æŸ¥çœ‹å¯†é’¥ï¼Œå·²ç»revoke\n\npub   rsa3072 2021-01-11 [SC] [revoked: 2021-01-11]\n      705358AB85366CAB05C0220F99F583599B7E31F1\nuid           [ revoked] linus <linus@outlook.com>\n```\n\n#### æ’¤é”€å­å¯†é’¥\n\n```bash\ngpg --edit-key linus  \n  \ngpg >   list  # åˆ—å‡ºä½ æ‰€æœ‰çš„å­å¯†é’¥\ngpg >   key  {n}  # é€‰æ‹©ä½ è¦é”€æ¯çš„å­å¯†é’¥çš„ åºå·\ngpg >   revkey\ngpg >   save    # é€€å‡ºå‰ä¸€å®šè¦save, ä¸ç„¶æ‰€æœ‰æ›´æ”¹ä¸ä¼šç”Ÿæ•ˆ\n```\n\n\n\n\n\n## å¼•ç”¨\n\n[2021å¹´ï¼Œç”¨æ›´ç°ä»£çš„æ–¹æ³•ä½¿ç”¨PGPï¼ˆä¸Šï¼‰ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6920108852570488845?searchId=2023083109400217ECAC1BC23740D6C5C1)\n","tags":["åŠ å¯†"],"categories":["è¿ç»´"]},{"title":"jvmæ€§èƒ½è°ƒä¼˜ä¹‹jcmd","url":"/2023/08/30/jvmæ€§èƒ½è°ƒä¼˜ä¹‹jcmd/","content":"\n## æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦æ­£ç¡®å®‰è£…jdk\n\næœ‰äº›äººå®‰è£…çš„æ˜¯openjdkï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå‘ç°jpsï¼Œjcmdç­‰ç­‰å‘½ä»¤éƒ½æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‹é¢çš„æ–¹å¼å°†ä»–ä»¬å®‰è£…ä¸Šå°±å¯ä»¥äº†ï¼š\n\n```bash\n# æŸ¥çœ‹ç‰ˆæœ¬\n[root@hecs-402944 nicstat-1.95]# java -version\nopenjdk version \"1.8.0_322\"\nOpenJDK Runtime Environment (build 1.8.0_322-b06)\nOpenJDK 64-Bit Server VM (build 25.322-b06, mixed mode)\n# å®‰è£…\n[root@hecs-402944 nicstat-1.95]# yum install java-1.8.0-openjdk-devel -y\n```\n\n## JDKè‡ªå¸¦å·¥å…·\n\nä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹JDKä¸ºæˆ‘ä»¬æä¾›äº†å“ªäº›ç›‘æ§å·¥å…·ã€‚\n\n### jcmd\n\né€šè¿‡åå­—å°±çŸ¥é“ï¼Œç±»ä¼¼äºwindowsçš„cmdï¼Œè¿™æ˜¯jvmçš„cmdã€‚\n\né¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å¸®åŠ©æ–‡æ¡£ï¼š\n\n```bash\n[root@hecs-402944 nicstat-1.95]# jcmd -h\nUsage: jcmd <pid | main class> <command ...|PerfCounter.print|-f file>\n   or: jcmd -l                                                    \n   or: jcmd -h                                                    \n                                                                  \n  command must be a valid jcmd command for the selected jvm.      \n  Use the command \"help\" to see which commands are available.   \n  If the pid is 0, commands will be sent to all Java processes.   \n  The main class argument will be used to match (either partially \n  or fully) the class used to start Java.                         \n  If no options are given, lists Java processes (same as -p).     \n                                                                  \n  PerfCounter.print display the counters exposed by this process  \n  -f  read and execute commands from the file                     \n  -l  list JVM processes on the local machine                     \n  -h  this help    \n```\n\næˆ‘ä»¬å¾—çŸ¥æœ‰ä¸‰ä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ï¼š\n\n- `-f` ä»æ–‡ä»¶è¯»å–å’Œæ‰§è¡Œå‘½ä»¤\n- `-l` è·å–å½“å‰æœºå™¨çš„æ‰€æœ‰jvmè¿›ç¨‹\n- `-h` å¸®åŠ©\n\n`jcmd -l`ç»“æœå¦‚ä¸‹ï¼š\n\n```bash\n[root@hecs-402944 nicstat-1.95]# jcmd -l\n24336 sun.tools.jcmd.JCmd -l\n10435 weather-forecast-0.0.1-SNAPSHOT.jar\n731 org.tanukisoftware.wrapper.WrapperSimpleApp CloudResetPwdUpdateAgent\n```\n\nå¸¦å‘½ä»¤çš„å®ç°æ–¹å¼æ ¼å¼å¦‚ä¸‹ï¼š\n\n```java\njcmd <pid | main class> <command ...|PerfCounter.print|-f file>\n```\n\n- `pid` æ˜¯javaè¿›ç¨‹id\n- `main class` è¿›ç¨‹åç§°ï¼ˆå¦‚ä¸Š -l æŸ¥è¯¢å‡ºæ¥çš„ weather-forecast-0.0.1-SNAPSHOT.jarï¼‰\n- `command` ç›´æ¥ä½¿ç”¨å‘½ä»¤\n  - å¯ä»¥é€šè¿‡ `java <pid | main class> help` æŸ¥çœ‹å¯ä½¿ç”¨çš„å‘½ä»¤\n\n```java\n[root@hecs-402944 ~]# jcmd 10435 help\n10435:\nThe following commands are available:\nVM.unlock_commercial_features\nJFR.configure\nJFR.stop\nJFR.start\nJFR.dump\nJFR.check\nVM.native_memory\nManagementAgent.stop\nManagementAgent.start_local\nManagementAgent.start\nVM.classloader_stats\nGC.rotate_log\nThread.print\nGC.class_stats\nGC.class_histogram\nGC.heap_dump\nGC.finalizer_info\nGC.heap_info\nGC.run_finalization\nGC.run\nVM.uptime\nVM.dynlibs\nVM.flags\nVM.system_properties\nVM.command_line\nVM.version\nhelp\n```\n\nå¦‚æœè¿˜ä¸æ˜ç™½æ¯ä¸ªå‘½ä»¤çš„å«ä¹‰ï¼Œå¯ä»¥ä½¿ç”¨`java <pid | main class> help <command>`çš„æ–¹å¼æŸ¥çœ‹å‘½ä»¤çš„æ˜ç»†ï¼Œå¦‚ä¸‹æŸ¥çœ‹`GC.run`çš„å«ä¹‰ï¼š\n\n```bash\n [root@hecs-402944 ~]# jcmd 10435 help GC.run\n  10435:\n  GC.run\n  Call java.lang.System.gc().\n\n  Impact: Medium: Depends on Java heap size and content.\n\n  Syntax: GC.run\n```\n\n- `PerfCounter.print` æ‰“å°æ€§èƒ½è®¡æ•°å™¨ï¼Œé€šå¸¸ç”¨äºæŸ¥çœ‹è¿›ç¨‹çš„æ€§èƒ½ã€‚\n\n![image-20230830100620806](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230830100620806.png)\n\n- `-f file` æ‰§è¡Œæ–‡ä»¶å†…çš„å‘½ä»¤\n\næˆ‘ä»¬ç¼–è¾‘ä¸€ä¸ªæµ‹è¯•è„šæœ¬æ–‡ä»¶ï¼š\n\n```bash\nvi test_script\n```\n\nå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\nVM.version\nVM.uptime\n```\n\næ‰§è¡Œï¼š\n\n```bash\n[root@hecs-402944 opt]# jcmd 10435 -f test_script \n10435:\nOpenJDK 64-Bit Server VM version 25.322-b06\nJDK 8.0_322\n509103.971 s\n```\n\nå¦‚ä¸Šæ‰€ç¤ºè¾“å‡ºäº†JDKç‰ˆæœ¬å’Œæ›´æ–°æ—¶é—´ã€‚\n\n\n\n## æ”¯æŒçš„å‘½ä»¤\n\n#### 1.help [options] [arguments]\n\n- ä½œç”¨ï¼šæŸ¥çœ‹æŒ‡å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯\n- argumentsï¼šæƒ³æŸ¥çœ‹å¸®åŠ©çš„å‘½ä»¤ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -allï¼šï¼ˆå¯é€‰ï¼‰æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼ˆBOOLEANï¼Œfalseï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```\n# è·å¾—æŒ‡å®šè¿›ç¨‹å¯ç”¨çš„å‘½ä»¤åˆ—è¡¨\njcmd <pid> help\n# è·å–æŒ‡å®šè¿›ç¨‹ã€æŒ‡å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚æœå‚æ•°åŒ…å«ç©ºæ ¼ï¼Œéœ€è¦ç”¨ ' æˆ–è€… \" å¼•èµ·æ¥\njcmd <pid> help <command>\n1234\n```\n\n#### 2.Compiler.codecache\n\n- ä½œç”¨ï¼šæ‰“å°code cacheï¼ˆä»£ç ç¼“å­˜ï¼‰çš„å¸ƒå±€å’Œè¾¹ç•Œ\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 3.Complier.codelist\n\n- ä½œç”¨ï¼šæ‰“å°ä»£ç ç¼“å­˜ä¸­æ‰€æœ‰äººåœ¨è¿è¡Œçš„å·²ç¼–è¯‘æ–¹æ³•\n- å½±å“ï¼šä¸­\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 4.Compiler.queue\n\n- ä½œç”¨ï¼šæ‰“å°æ’é˜Ÿç­‰å¾…ç¼–è¯‘çš„æ–¹æ³•\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 5.Compiler.directives_add filename arguments\n\n- ä½œç”¨ï¼šä»æ–‡ä»¶æ·»åŠ ç¼–è¯‘å™¨æŒ‡ä»¤\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- filenameï¼šæŒ‡ä»¤æ–‡ä»¶çš„åç§°ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n\n#### 6.Compiler.directives_clear\n\n- ä½œç”¨ï¼šåˆ é™¤æ‰€æœ‰ç¼–è¯‘å™¨æŒ‡ä»¤\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 7.Compiler.directives_print\n\n- ä½œç”¨ï¼šæ‰“å°æ‰€æœ‰æ´»åŠ¨çš„ç¼–è¯‘å™¨æŒ‡ä»¤\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 8.Compiler.directives_remove\n\n- ä½œç”¨ï¼šåˆ é™¤æœ€æ–°æ·»åŠ çš„ç¼–è¯‘å™¨æŒ‡ä»¤ã€‚\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 9.GC.class_histogram [options]\n\n- ä½œç”¨ï¼šæä¾›æœ‰å…³Javaå †ä½¿ç”¨æƒ…å†µçš„ç»Ÿè®¡ä¿¡æ¯\n- å½±å“ï¼šé«˜ ï¼ˆå–å†³äºJavaå †çš„å¤§å°å’Œå†…å®¹ï¼‰\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -allï¼šï¼ˆå¯é€‰ï¼‰æ£€æŸ¥æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸å¯è¾¾çš„å¯¹è±¡ï¼ˆBOOLEANï¼Œfalseï¼‰\n\n#### 10.GC.class_stats [options] [arguments]\n\n- ä½œç”¨ï¼šå±•ç¤ºæœ‰å…³Javaç±»å…ƒæ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯\n- å½±å“ï¼šé«˜ï¼ˆå–å†³äºJavaå †çš„å¤§å°å’Œå†…å®¹ï¼‰\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -allï¼šï¼ˆå¯é€‰ï¼‰æ˜¾ç¤ºæ‰€æœ‰åˆ—ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - -csvï¼šï¼ˆå¯é€‰ï¼‰ä»¥CSVæ ¼å¼æ‰“å°ç”µå­è¡¨æ ¼ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - helpï¼šï¼ˆå¯é€‰ï¼‰æ˜¾ç¤ºæ‰€æœ‰åˆ—çš„å«ä¹‰ï¼ˆBOOLEANï¼Œfalseï¼‰\n- argumentsï¼šå‚æ•°ï¼Œå¯é€‰å‚æ•°å¦‚ä¸‹ï¼š\n  - columnsï¼šï¼ˆå¯é€‰ï¼‰è¦æ˜¾ç¤ºçš„åˆ—ï¼Œä»¥é€—å·åˆ†éš”ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™æ˜¾ç¤ºä»¥ä¸‹åˆ—ï¼š\n    - InstBytes\n    - KlassBytes\n    - CpAll\n    - annotations\n    - MethodCount\n    - Bytecodes\n    - MethodAll\n    - ROAll\n    - RWAll\n    - Total\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\n# å±•ç¤ºæŒ‡å®šè¿›ç¨‹ç±»çš„å…ƒæ•°æ®çš„æ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯\njcmd 12737 GC.class_stats -all\n\n# InstBytesã€KlassBytesç­‰åˆ—çš„å«ä¹‰\njcmd 12737 GC.class_stats -help\n\n# æ˜¾ç¤ºInstBytes,KlassBytesè¿™ä¸¤åˆ—ï¼Œå¹¶ç”Ÿæˆcsv\njcmd 12737 GC.class_stats -cvs InstBytes,KlassBytes > t.csv\n12345678\n```\n\n#### 11. GC.finalizer_info\n\n- ä½œç”¨ï¼šå±•ç¤ºæœ‰å…³Java finalization queueçš„ä¿¡æ¯\n- å½±å“ï¼šä¸­\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 12. GC.heap_dump [options][arguments]\n\n- ä½œç”¨ï¼šç”ŸæˆJavaå †Dumpæ–‡ä»¶ï¼ˆHPROFæ ¼å¼ï¼‰\n- å½±å“ï¼šé«˜ï¼ˆå–å†³äºJavaå †å¤§å°å’Œå†…å®¹ã€‚é™¤éæŒ‡å®šäº†`-all`é€‰é¡¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´Full GC\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -allï¼šï¼ˆå¯é€‰ï¼‰è½¬å‚¨æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸å¯è¾¾å¯¹è±¡ï¼ˆBOOLEANï¼Œfalseï¼‰\n- argumentsï¼šå‚æ•°ï¼Œå¯ç”¨çš„å‚æ•°å¦‚ä¸‹ï¼š\n  - filenameï¼šDumpæ–‡ä»¶çš„åç§°ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```\njcmd 12737 GC.heap_dump -all 1.hprof\n1\n```\n\n#### 13. GC.heap_info\n\n- ä½œç”¨ï¼šå±•ç¤ºJavaå †ä¿¡æ¯\n- å½±å“ï¼šä¸­\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 14. GC.run\n\n- ä½œç”¨ï¼šè°ƒç”¨`java.lang.System.gc()`\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºJavaå †çš„å¤§å°å’Œå†…å®¹ï¼‰\n\n#### 15.GC.run_finalization\n\n- ä½œç”¨ï¼š`java.lang.System.runFianlization()`\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºJavaå†…å®¹ï¼‰\n\n#### 16.JFR.check [options]\n\nè¯·å‚è€ƒ[ã€ŠJava Flight Recorderå‘½ä»¤å‚è€ƒã€‹](https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/comline.htm#JFRUH188)ä¸­çš„JFR.check\n\n#### 17.JFR.configure [options]\n\nè¯·å‚è€ƒ[ã€ŠJava Flight Recorderå‘½ä»¤å‚è€ƒã€‹](https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/comline.htm#JFRUH188)ä¸­çš„JFR.configure\n\n#### 18.JFR.dump [options]\n\nè¯·å‚è€ƒ[ã€ŠJava Flight Recorderå‘½ä»¤å‚è€ƒã€‹](https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/comline.htm#JFRUH188)ä¸­çš„JFR.dump\n\n#### 19.JFR.start [options]\n\nè¯·å‚è€ƒ[ã€ŠJava Flight Recorderå‘½ä»¤å‚è€ƒã€‹](https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/comline.htm#JFRUH188)ä¸­çš„JFR.start\n\n#### 20.JFR.stop [options]\n\nè¯·å‚è€ƒ[ã€ŠJava Flight Recorderå‘½ä»¤å‚è€ƒã€‹](https://docs.oracle.com/javacomponents/jmc-5-4/jfr-runtime-guide/comline.htm#JFRUH188)ä¸­çš„JFR.stop\n\n#### 21.JVMTI.agent_load [arguments]\n\n- ä½œç”¨ï¼šåŠ è½½JVMTIæœ¬æœºä»£ç†ã€‚\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(control)\n- argumentsï¼š\n  - library pathï¼šè¦åŠ è½½çš„JVMTIä»£ç†çš„ç»å¯¹è·¯å¾„ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - agent optionï¼šï¼ˆå¯é€‰ï¼‰ç”¨äºä¼ é€’ä»£ç†çš„é€‰é¡¹å­—ç¬¦ä¸²ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n\n#### 22. JVMMTI.data_dump\n\n- ä½œç”¨ï¼šé€šçŸ¥JVMå †JVMTIè¿›è¡Œæ•°æ®è½¬å‚¨\n- å½±å“ï¼šé«˜\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 23. ManagentAgent.start [options]\n\n- ä½œç”¨ï¼šå¯åŠ¨è¿œç¨‹ç®¡ç†ä»£ç†\n- å½±å“ï¼šä½\n- optionï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - config.fileï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.config.file`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.hostï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.host`(STRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.portï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.port`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.rmi.portï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.rmi.port`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.sslï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.ssl`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.registry.sslï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.registry.ssl`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.authenticateï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®com.sun.management.jmxremote.authenticateï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.password.fileï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½® `com.sun.management.password.file`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.acccess.fileï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.access.file` ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.login.configï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.login.config`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.ssl.enabled.cipher.suitesï¼šï¼ˆå¯é€‰ï¼‰é›†`com.sun.management`ã€‚\n  - jmxremote.ssl.enabled.cipher.suiteï¼šï¼ˆSTIRNGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.ssl.enabled.protocolsï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.ssl.enabled.protocols`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.ssl.need.client.authï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.need.client.auth`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.ssl.config.fileï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.ssl_config_file`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jmxremote.autodiscoveryï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jmxremote.autodiscoery`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jdp.portï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jdp.port`ï¼ˆINTï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jdp.addressï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jpdaddress`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jdp.source_addrï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jdp.sourcce_addr`ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jdp.pauseï¼šè®¾ç½®`com.sun.management.jdp.pause`ï¼ˆINTï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - jdp.nameï¼šï¼ˆå¯é€‰ï¼‰è®¾ç½®`com.sun.management.jdp.name`ï¼ˆSTRINGï¼Œé»˜è®¤å€¼ï¼‰\n\n#### 24. ManagementAgent.start_local\n\n- ä½œç”¨ï¼šå¯åŠ¨æœ¬åœ°ç®¡ç†ä»£ç†\n- å½±å“ï¼šä½\n\n#### 25.ManagementAgent.status\n\n- ä½œç”¨ï¼šå±•ç¤ºç®¡ç†ä»£ç†çš„çŠ¶æ€\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.mangement.ManagementPermission(monitor)\n\n#### 26.Management.Agent.stop\n\n- ä½œç”¨ï¼šåœæ­¢è¿œç¨‹ç®¡ç†ä»£ç†\n- å½±å“ï¼šä½\n\n#### 27.Thread.print [options]\n\n- ä½œç”¨ï¼šæ‰“å°æ‰€æœ‰å¸¦æœ‰å †æ ˆè·Ÿè¸ªçš„çº¿ç¨‹\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºçº¿ç¨‹æ•°ï¼‰\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -lï¼šï¼ˆå¯é€‰ï¼‰æ‰“å°java.util.concurrenté”ï¼ˆBOLEANï¼Œfalseï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 Thread.print -l\n```\n\n#### 28.VM.check_commercial_features\n\n- ä½œç”¨ï¼šæ˜¾ç¤ºå•†ä¸šç‰¹æ€§çš„çŠ¶æ€\n- å½±å“ï¼šä½\n\n#### 29. VM.unlock_commercial_features\n\n- ä½œç”¨ï¼šè§£é”å•†ä¸šåŠŸèƒ½\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(control)\n\n#### 30. VM.classloader_stats\n\n- ä½œç”¨ï¼šæ‰“å°æ‰€æœ‰ClassLoaderçš„ç»Ÿè®¡ä¿¡æ¯ã€‚\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 31. VM.class_hierarchy [options] [arguments]\n\n- ä½œç”¨ï¼šæ‰“å°æ‰€æœ‰å·²åŠ è½½çš„åˆ—è¡¨ï¼Œç¼©è¿›ä»¥æ˜¾ç¤ºç±»å±‚æ¬¡ç»“æ„ã€‚æ¯ä¸ªç±»çš„åç§°åè·Ÿå…¶ClassLoaderçš„ClassLoaderData*ï¼Œå¦‚æœæœ‰bootstrap class loaderåŠ è½½ï¼Œåˆ™ä¸ºnull\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºå·²åŠ è½½ç±»çš„æ•°é‡ï¼‰\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -iï¼šï¼ˆå¯é€‰ï¼‰æ‰“å°ç»§æ‰¿çš„æ¥å£ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - -sï¼šï¼ˆå¯é€‰ï¼‰å¦‚æœæŒ‡å®šäº†ç±»åï¼Œåˆ™å°†æ‰“å°å­ç±»ã€‚å¦‚æœæœªæŒ‡å®šç±»ååˆ™æ‰“å°è¶…ç±»ï¼ˆBOOLEANï¼Œfalseï¼‰\n- argumentsï¼šå‚æ•°ï¼Œå¯ç”¨é€‰é¡¹å¦‚ä¸‹ï¼š\n  - classnameï¼šï¼ˆå¯é€‰ï¼‰æ‰“å°æŒ‡å®šç±»çš„å±‚æ¬¡ç»“æ„ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™å°†æ‰“å°æ‰€æœ‰ç±»å±‚æ¬¡ç»“æ„ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 VM.class_hierarchy -i -s javax.servlet.GenericFilter\n```\n\n#### 32.VM.command_line\n\n- ä½œç”¨ï¼šæ‰“å°ç”¨äºå¯åŠ¨æ­¤VMå®ä¾‹çš„å‘½ä»¤è¡Œ\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 33.VM.dynlibs\n\n- ä½œç”¨ï¼šæ‰“å°åŠ è½½çš„åŠ¨æ€åº“\n- å½±å“ï¼šä½\n- å…è®¸ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 34.VM.info\n\n- ä½œç”¨ï¼šæ‰“å°æœ‰å…³JVMç¯å¢ƒå’ŒçŠ¶æ€çš„ä¿¡æ¯\n- å½±å“ï¼šä½\n- å…è®¸ï¼šjava.lang.management.ManagementPermission(monitor)\n\n#### 35.VM.log [options]\n\n- ä½œç”¨ï¼šåˆ—å‡ºå½“å‰æ—¥å¿—é…ç½®ï¼Œå¯ç”¨/ç¦ç”¨/é…ç½®æ—¥å¿—è¾“å‡ºï¼Œæˆ–è½®æ¢æ‰€æœ‰æ—¥å¿—\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(control)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - outputï¼šï¼ˆå¯é€‰ï¼‰è¦é…ç½®çš„è¾“å‡ºçš„åç§°æˆ–ç´¢å¼•ã€‚ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - output_optionsï¼šï¼ˆå¯é€‰ï¼‰è¾“å‡ºçš„é€‰é¡¹ã€‚ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - whatï¼šï¼ˆå¯é€‰ï¼‰é…ç½®è¦è®°å½•çš„æ ‡ç­¾ã€‚ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - disableï¼šï¼ˆå¯é€‰ï¼‰å…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•å¹¶æ¸…é™¤æ—¥å¿—é…ç½®ã€‚\n  - listï¼šï¼ˆå¯é€‰ï¼‰åˆ—å‡ºå½“å‰çš„æ—¥å¿—é…ç½®ã€‚ï¼ˆBOOLEANï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - rotateï¼šï¼ˆå¯é€‰ï¼‰è½®æ¢æ‰€æœ‰æ—¥å¿—ã€‚ï¼ˆå¸ƒå°”å€¼ï¼Œæ— é»˜è®¤å€¼ï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 VM.log output what\n```\n\n#### 36. VM.flags [options]\n\n- ä½œç”¨ï¼šæ‰“å°VMæ ‡å¿—åŠå…¶å½“å‰å€¼\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -allï¼šï¼ˆå¯é€‰ï¼‰æ‰“å°VMæ”¯æŒçš„æ‰€æœ‰æ ‡å¿—ï¼ˆBOOLEANï¼Œfalseï¼‰\n\n#### 37.VM.native_memory [options]\n\n> è¯¥åŠŸèƒ½å«åšâ€œ[Native](https://so.csdn.net/so/search?q=Native&spm=1001.2101.3001.7020) Memory Tracking(NMT)â€éœ€å¼€å¯å¦‚ä¸‹å‚æ•°ï¼Œæ‰å¯æ‰“å¼€ã€‚\n> -XX:NativeMemoryTracking=[off | summary | detail |\n> æ‰“å¼€åä¼šå¸¦æ¥5~10%çš„æ€§èƒ½æŸè€—ã€‚\n> ä¹Ÿå¯ç”¨```-XX:+UnlockDiagnosticVMOptions -XX:+PrintNMTStatistics``ï¼Œè®©JVMåœ¨é€€å‡ºæ—¶æ‰“å°NMTæŠ¥å‘Šã€‚\n> å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/varyall/article/details/86514888\n\n- ä½œç”¨ï¼šæ‰“å°nativeå†…å­˜ä½¿ç”¨æƒ…å†µã€‚\n- å½±å“ï¼šä¸­\n- å…è®¸ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - summaryï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶æŠ¥å‘Šå½“å‰å†…å­˜æ‘˜è¦ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¿ç•™å’Œæäº¤çš„å†…å­˜ä»¥åŠæ¯ä¸ªå­ç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æƒ…å†µæ‘˜è¦ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - detailï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶æŠ¥å‘Šæ¯ä¸ªè°ƒç”¨ç«™ç‚¹ï¼ˆcallsiteï¼‰>= 1Kçš„å†…å­˜åˆ†é…ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - baselineï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶ä»¥å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µä¸ºåŸºå‡†ï¼Œä»¥ä¾¿ä»¥åè¿›è¡Œæ¯”è¾ƒï¼ˆBOOLEANï¼Œfalseï¼‰\n  - summary.diffï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶æŠ¥å‘Šä¸å…ˆå‰åŸºå‡†çš„å†…å­˜æ‘˜è¦æ¯”è¾ƒï¼ˆBOOLEANï¼Œfalseï¼‰\n  - detail.diffï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶æŠ¥å‘Šä¸å…ˆå‰åŸºå‡†çš„å†…å­˜è¯¦æƒ…æ¯”è¾ƒï¼Œè¯¥åŸºå‡†æ˜¾ç¤ºäº†åœ¨ä¸åŒè°ƒç”¨ç«™ç‚¹ï¼ˆcallsiteï¼‰çš„å†…å­˜åˆ†é…æ´»åŠ¨ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - shutdownï¼šï¼ˆå¯é€‰ï¼‰è¯·æ±‚è¿è¡Œæ—¶å…³é—­è‡ªèº«å¹¶é‡Šæ”¾è¿è¡Œæ—¶ä½¿ç”¨çš„å†…å­˜ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - statisticsï¼šï¼ˆå¯é€‰ï¼‰æ‰“å°è·Ÿè¸ªå™¨ç»Ÿè®¡ä¿¡æ¯ä»¥è¿›è¡Œè°ƒæ•´ï¼ˆBOOLEANï¼Œfalseï¼‰\n  - scaleï¼šï¼ˆå¯é€‰ï¼‰ä»¥MBï¼ŒMBæˆ–è€…GBä¸ºå•ä½çš„å†…å­˜ä½¿ç”¨é‡ï¼ˆSTRINGï¼ŒKBï¼‰\n\n#### 38. VM.print_touched_methods\n\n- ä½œç”¨ï¼šæ‰“å°æ¬¡JVMç”Ÿå‘½å‘¨æœŸä¸­æ›¾ç»æ¥è§¦è¿‡çš„æ‰€æœ‰æ–¹æ³•ã€‚\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºJavaå†…å®¹ï¼‰\n\n#### 39. VM.set_flag [arguments]\n\n- ä½œç”¨ï¼šè®¾ç½®VMæ ‡å¿—\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(control)\n- arguments:\n  - æ ‡å¿—åç§°ï¼šæ‚¨è¦è®¾ç½®çš„æ ‡å¿—åç§°ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n  - å­—ç¬¦ä¸²å€¼ï¼šï¼ˆå¯é€‰ï¼‰è¦è®¾ç½®çš„å€¼ï¼ˆSTRINGï¼Œæ— é»˜è®¤å€¼ï¼‰\n\n#### VM.stringable [options]\n\n- ä½œç”¨ï¼šè½¬å‚¨å­—ç¬¦ä¸²è¡¨(string table)\n- å½±å“ï¼šä¸­ ï¼ˆå–å†³äºJavaå†…å®¹ï¼‰\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -verboseï¼šï¼ˆå¯é€‰ï¼‰è½¬å‚¨è¡¨ä¸­æ¯ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ï¼ˆBOOLEANï¼Œfalseï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 VM.stringable -verbose\n```\n\n#### 41. VM.symboltable [options]\n\n- ä½œç”¨ï¼šè½¬å‚¨ç¬¦å·è¡¨\n- å½±å“ï¼šä¸­ï¼ˆå–å†³äºJavaå†…å®¹ï¼‰\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -verboseï¼šï¼ˆå¯é€‰ï¼‰è½¬å‚¨è¡¨ä¸­æ¯ä¸ªç¬¦å·çš„å†…å®¹ï¼ˆBOOLEANï¼Œfalseï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 VM.symboltable -verbose\n```\n\n#### 42 VM.systemdictionary\n\n- ä½œç”¨ï¼šæ‰“å°å­—å…¸å“ˆå¸Œè¡¨å¤§å°å’Œå­˜å‚¨æ¡¶é•¿åº¦çš„ç»Ÿè®¡ä¿¡æ¯\n- å½±å“ï¼šä¸­\n- æ‰€éœ€æƒé™ï¼šjava.lang.management.ManagementPermission(monitor)\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - verboseï¼šï¼ˆå¯é€‰ï¼‰ä¸ºæ‰€æœ‰class loaderè½¬å‚¨æ¯ä¸ªè¯å…¸æ¡ç›®çš„å†…å®¹ï¼ˆBOOLEANï¼Œfalseï¼‰\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```bash\njcmd 12737 VM.systemdictionary -verbose\n```\n\n#### 43.VM.system_properties\n\n- ä½œç”¨ï¼šæ‰“å°ç³»ç»Ÿå±æ€§\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.util.PropertyPermission(*, read)\n\n#### 44.VM.uptime [options]\n\n- ä½œç”¨ï¼šæ‰“å°è™šæ‹Ÿæœºçš„è¿è¡Œæ—¶é—´\n- å½±å“ï¼šä½\n- optionsï¼šé€‰é¡¹ï¼Œå¿…é¡»ä½¿ç”¨keyæˆ–è€…key=valueçš„è¯­æ³•æŒ‡å®šï¼Œå¯ç”¨çš„optionså¦‚ä¸‹ï¼š\n  - -dateï¼šï¼ˆå¯é€‰ï¼‰æ·»åŠ å¸¦æœ‰å½“å‰æ—¥æœŸçš„å‰ç¼€ï¼ˆBOOLEANï¼Œfalseï¼‰\n\n#### 45. VM.version\n\n- ä½œç”¨ï¼šæ‰“å°JVMç‰ˆæœ¬ä¿¡æ¯\n- å½±å“ï¼šä½\n- æ‰€éœ€æƒé™ï¼šjava.util.PropertyPermission(java.vm.version, read)\n\n## å¼•ç”¨\n\n[javaæ€§èƒ½åˆ†æ--JDKè‡ªå¸¦ç›‘æ§å·¥å…·ä¹‹jcmd - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7104441940921286686?searchId=20230830095610A3105E3D9F1D8D22D9FD)\n\n[JVMæ€§èƒ½è°ƒä¼˜å·¥å…·2ä¹‹jcmdè¯¦è§£ï¼ˆè¦†ç›–å…¨ç½‘æœ€å…¨çš„jcmdå‘½ä»¤ä¸è¯´æ˜æ–‡æ¡£ï¼‰_æ€èƒ½æ­¢æ­¥äºæ­¤çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_45455361/article/details/120938015)\n","tags":["jvm"],"categories":["javaå…¨æ ˆ"]},{"title":"redisäº‹åŠ¡","url":"/2023/08/25/redisäº‹åŠ¡/","content":"\n## Redisäº‹åŠ¡ç›¸å…³å‘½ä»¤\n\n>  **æ‘˜è¦ï¼š**Redisäº‹åŠ¡åŒ…å«ä¸¤ç§æ¨¡å¼ï¼šäº‹åŠ¡æ¨¡å¼å’ŒLuaè„šæœ¬ã€‚\n\n- **MULTI ï¼š**å¼€å¯äº‹åŠ¡ï¼Œredisä¼šå°†åç»­çš„å‘½ä»¤é€ä¸ªæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åä½¿ç”¨**EXECå‘½ä»¤æ¥åŸå­åŒ–**æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ç³»åˆ—ã€‚\n- **EXECï¼š**æ‰§è¡Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œå‘½ä»¤ã€‚\n- **DISCARDï¼š**å–æ¶ˆäº‹åŠ¡ï¼Œæ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡å—ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚\n- **WATCHï¼š**ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªkey,å¦‚æœäº‹åŠ¡åœ¨æ‰§è¡Œå‰ï¼Œè¿™ä¸ªkey(æˆ–å¤šä¸ªkey)è¢«å…¶ä»–å‘½ä»¤ä¿®æ”¹ï¼Œåˆ™äº‹åŠ¡è¢«ä¸­æ–­ï¼Œä¸ä¼šæ‰§è¡Œäº‹åŠ¡ä¸­çš„ä»»ä½•å‘½ä»¤ã€‚\n- **UNWATCHï¼š**å–æ¶ˆWATCHå¯¹æ‰€æœ‰keyçš„ç›‘è§†ã€‚\n\nä¾‹å­ï¼š\n\n### MULTIå¼€å§‹ä¸€ä¸ªäº‹åŠ¡\n\nï¼ˆ1ï¼‰ ç»™k1ã€k2åˆ†åˆ«èµ‹å€¼ï¼Œåœ¨äº‹åŠ¡ä¸­ä¿®æ”¹k1ã€k2ï¼Œæ‰§è¡Œäº‹åŠ¡åï¼ŒæŸ¥çœ‹k1ã€k2å€¼éƒ½è¢«ä¿®æ”¹ã€‚\n\n```bash\n127.0.0.1:6379> set k1 v1\nOK\n127.0.0.1:6379> set k2 v2\nOK\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 11\nQUEUED\n127.0.0.1:6379> set k2 22\nQUEUED\n127.0.0.1:6379> EXEC\n1) OK\n2) OK\n127.0.0.1:6379> get k1\n\"11\"\n127.0.0.1:6379> get k2\n\"22\"\n127.0.0.1:6379>\n```\n\n### äº‹åŠ¡å¤±è´¥å¤„ç†\n\n- è¯­æ³•é”™è¯¯ï¼ˆç¼–è¯‘å™¨é”™è¯¯ï¼‰ï¼Œåœ¨å¼€å¯äº‹åŠ¡åï¼Œä¿®æ”¹k1å€¼ä¸º11ï¼Œk2å€¼ä¸º22ï¼Œä½†k2è¯­æ³•é”™è¯¯ï¼Œæœ€ç»ˆå¯¼è‡´äº‹åŠ¡æäº¤å¤±è´¥ï¼Œk1ã€k2ä¿ç•™åŸå€¼ã€‚\n\n```bash\n127.0.0.1:6379> set k1 v1\nOK\n127.0.0.1:6379> set k2 v2\nOK\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 11\nQUEUED\n127.0.0.1:6379> sets k2 22\n(error) ERR unknown command `sets`, with args beginning with: `k2`, `22`, \n127.0.0.1:6379> exec\n(error) EXECABORT Transaction discarded because of previous errors.\n127.0.0.1:6379> get k1\n\"v1\"\n127.0.0.1:6379> get k2\n\"v2\"\n127.0.0.1:6379>\n```\n\nRedisç±»å‹é”™è¯¯ï¼ˆè¿è¡Œæ—¶é”™è¯¯ï¼‰ï¼Œåœ¨å¼€å¯äº‹åŠ¡åï¼Œä¿®æ”¹k1å€¼ä¸º11ï¼Œk2å€¼ä¸º22ï¼Œä½†å°†k2çš„ç±»å‹ä½œä¸ºListï¼Œåœ¨è¿è¡Œæ—¶æ£€æµ‹ç±»å‹é”™è¯¯ï¼Œæœ€ç»ˆå¯¼è‡´äº‹åŠ¡æäº¤å¤±è´¥ï¼Œæ­¤æ—¶äº‹åŠ¡å¹¶æ²¡æœ‰å›æ»šï¼Œè€Œæ˜¯è·³è¿‡é”™è¯¯å‘½ä»¤ç»§ç»­æ‰§è¡Œï¼Œ ç»“æœk1å€¼æ”¹å˜ã€k2ä¿ç•™åŸå€¼ã€‚\n\n```bash\n127.0.0.1:6379> set k1 v1\nOK\n127.0.0.1:6379> set k2 v2\nOK\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 11\nQUEUED\n127.0.0.1:6379> lpush k2 22\nQUEUED\n127.0.0.1:6379> EXEC\n1) OK\n2) (error) WRONGTYPE Operation against a key holding the wrong kind of value\n127.0.0.1:6379> get k1\n\"11\"\n127.0.0.1:6379> get k2\n\"v2\"\n127.0.0.1:6379>\n```\n\n### DISCARDå–æ¶ˆäº‹åŠ¡\n\n```bash\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 33\nQUEUED\n127.0.0.1:6379> set k2 34\nQUEUED\n127.0.0.1:6379> DISCARD\nOK\n```\n\n### WATCHç›‘è§†key\n\nä¸¥æ ¼çš„è¯´Redisçš„å‘½ä»¤æ˜¯åŸå­æ€§çš„ï¼Œè€Œäº‹åŠ¡æ˜¯éåŸå­æ€§çš„ï¼Œæˆ‘ä»¬è¦è®©Redisäº‹åŠ¡å®Œå…¨å…·æœ‰äº‹åŠ¡å›æ»šçš„èƒ½åŠ›ï¼Œéœ€è¦å€ŸåŠ©äºå‘½ä»¤WATCHæ¥å®ç°ã€‚\n\nRedisä½¿ç”¨WATCHå‘½ä»¤æ¥å†³å®šäº‹åŠ¡æ˜¯ç»§ç»­æ‰§è¡Œè¿˜æ˜¯å›æ»šï¼Œé‚£å°±éœ€è¦åœ¨MULTIä¹‹å‰ä½¿ç”¨WATCHæ¥ç›‘æ§æŸäº›é”®å€¼å¯¹ï¼Œç„¶åä½¿ç”¨MULTIå‘½ä»¤æ¥å¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œå¯¹æ•°æ®ç»“æ„æ“ä½œçš„å„ç§å‘½ä»¤ï¼Œæ­¤æ—¶è¿™äº›å‘½ä»¤å…¥é˜Ÿåˆ—ã€‚\n\nå½“ä½¿ç”¨EXECæ‰§è¡Œäº‹åŠ¡æ—¶ï¼Œé¦–å…ˆä¼šæ¯”å¯¹WATCHæ‰€ç›‘æ§çš„é”®å€¼å¯¹ï¼Œå¦‚æœæ²¡å‘ç”Ÿæ”¹å˜ï¼Œå®ƒä¼šæ‰§è¡Œäº‹åŠ¡é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ï¼Œæäº¤äº‹åŠ¡ï¼›å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œå°†ä¸ä¼šæ‰§è¡Œäº‹åŠ¡ä¸­çš„ä»»ä½•å‘½ä»¤ï¼ŒåŒæ—¶äº‹åŠ¡å›æ»šã€‚å½“ç„¶æ— è®ºæ˜¯å¦å›æ»šï¼ŒRediséƒ½ä¼šå–æ¶ˆæ‰§è¡Œäº‹åŠ¡å‰çš„WATCHå‘½ä»¤ã€‚\n\n![image-20230825095324200](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230825095324200.png)\n\nRedisæ‰§è¡Œäº‹åŠ¡è¿‡ç¨‹\n\nåœ¨äº‹åŠ¡å¼€å§‹å‰ç”¨WATCHç›‘æ§k1ï¼Œä¹‹åä¿®æ”¹k1ä¸º11ï¼Œè¯´æ˜äº‹åŠ¡å¼€å§‹å‰k1å€¼è¢«æ”¹å˜ï¼ŒMULTIå¼€å§‹äº‹åŠ¡ï¼Œä¿®æ”¹k1å€¼ä¸º12ï¼Œk2ä¸º22ï¼Œæ‰§è¡ŒEXECï¼Œå‘å›nilï¼Œè¯´æ˜äº‹åŠ¡å›æ»šï¼›æŸ¥çœ‹ä¸‹k1ã€k2çš„å€¼éƒ½æ²¡æœ‰è¢«äº‹åŠ¡ä¸­çš„å‘½ä»¤æ‰€æ”¹å˜ã€‚\n\n```bash\n127.0.0.1:6379> set k1 v1\nOK\n127.0.0.1:6379> set k2 v2\nOK\n127.0.0.1:6379> WATCH k1\nOK\n127.0.0.1:6379> set k1 11\nOK\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 12\nQUEUED\n127.0.0.1:6379> set k2 22\nQUEUED\n127.0.0.1:6379> EXEC\n(nil)\n127.0.0.1:6379> get k1\n\"11\"\n127.0.0.1:6379> get k2\n\"v2\"\n127.0.0.1:6379>\n```\n\n### UNWATCHå–æ¶ˆç›‘è§†æ‰€æœ‰key\n\n```bash\n127.0.0.1:6379> set k1 v1\nOK\n127.0.0.1:6379> set k2 v2\nOK\n127.0.0.1:6379> WATCH k1\nOK\n127.0.0.1:6379> set k1 11\nOK\n127.0.0.1:6379> UNWATCH\nOK\n127.0.0.1:6379> MULTI\nOK\n127.0.0.1:6379> set k1 12\nQUEUED\n127.0.0.1:6379> set k2 22\nQUEUED\n127.0.0.1:6379> exec\n1) OK\n2) OK\n127.0.0.1:6379> get k1\n\"12\"\n127.0.0.1:6379> get k2\n\"22\"\n127.0.0.1:6379>\n```\n\n\n\n##  Lua è„šæœ¬\n\nLua ç”±æ ‡å‡† C ç¼–å†™è€Œæˆï¼Œä»£ç ç®€æ´ä¼˜ç¾ï¼Œå‡ ä¹åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥ç¼–è¯‘ï¼Œè¿è¡Œã€‚Lua è„šæœ¬å¯ä»¥å¾ˆå®¹æ˜“çš„è¢« C/C ++ ä»£ç è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥è°ƒç”¨ C/C++ çš„å‡½æ•°ï¼Œè¿™ä½¿å¾— Lua åœ¨åº”ç”¨ç¨‹åºä¸­å¯ä»¥è¢«å¹¿æ³›åº”ç”¨ã€‚\n\nLua è„šæœ¬åœ¨æ¸¸æˆé¢†åŸŸå¤§æ”¾å¼‚å½©ï¼Œå¤§å®¶è€³ç†Ÿèƒ½è¯¦çš„ã€Šå¤§è¯è¥¿æ¸¸IIã€‹ï¼Œã€Šé­”å…½ä¸–ç•Œã€‹éƒ½å¤§é‡ä½¿ç”¨ Lua è„šæœ¬ã€‚Java åç«¯å·¥ç¨‹å¸ˆæ¥è§¦è¿‡çš„ api ç½‘å…³ï¼Œæ¯”å¦‚ **Openresty** ï¼Œ**Kong** éƒ½å¯ä»¥çœ‹åˆ° Lua è„šæœ¬çš„èº«å½±ã€‚\n\nä» Redis 2.6.0 ç‰ˆæœ¬å¼€å§‹ï¼Œ Rediså†…ç½®çš„ Lua è§£é‡Šå™¨ï¼Œå¯ä»¥å®ç°åœ¨ Redis ä¸­è¿è¡Œ Lua è„šæœ¬ã€‚\n\nä½¿ç”¨ Lua è„šæœ¬çš„å¥½å¤„ ï¼š\n\n- å‡å°‘ç½‘ç»œå¼€é”€ã€‚å°†å¤šä¸ªè¯·æ±‚é€šè¿‡è„šæœ¬çš„å½¢å¼ä¸€æ¬¡å‘é€ï¼Œå‡å°‘ç½‘ç»œæ—¶å»¶ã€‚\n- åŸå­æ“ä½œã€‚Redisä¼šå°†æ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ’å…¥ã€‚\n- å¤ç”¨ã€‚å®¢æˆ·ç«¯å‘é€çš„è„šæœ¬ä¼šæ°¸ä¹…å­˜åœ¨ Redis ä¸­ï¼Œå…¶ä»–å®¢æˆ·ç«¯å¯ä»¥å¤ç”¨è¿™ä¸€è„šæœ¬è€Œä¸éœ€è¦ä½¿ç”¨ä»£ç å®Œæˆç›¸åŒçš„é€»è¾‘ã€‚\n\nRedis Lua è„šæœ¬å¸¸ç”¨å‘½ä»¤ï¼š\n\n![image-20230825095842408](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230825095842408.png)\n\n### EVAL å‘½ä»¤\n\nå‘½ä»¤æ ¼å¼ï¼š\n\n```lua\n EVAL script numkeys key [key ...] arg [arg ...]\n```\n\nè¯´æ˜ï¼š\n\n- scriptæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸º Lua 5.1è„šæœ¬ï¼›\n- ç¬¬äºŒä¸ªå‚æ•°numkeysæŒ‡å®šåç»­å‚æ•°æœ‰å‡ ä¸ª keyï¼›\n- key [key ...]ï¼Œæ˜¯è¦æ“ä½œçš„é”®ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œåœ¨ Lua è„šæœ¬ä¸­é€šè¿‡KEYS[1], KEYS[2]è·å–ï¼›\n- arg [arg ...]ï¼Œå‚æ•°ï¼Œåœ¨ Lua è„šæœ¬ä¸­é€šè¿‡ARGV[1], ARGV[2]è·å–ã€‚\n\nç®€å•å®ä¾‹ï¼š\n\n```lua\n redis> eval \"return ARGV[1]\" 0 100 \n \"100\"\n redis> eval \"return {ARGV[1],ARGV[2]}\" 0 100 101\n 1) \"100\"\n 2) \"101\"\n redis> eval \"return {KEYS[1],KEYS[2],ARGV[1]}\" 2 key1 key2 first second\n 1) \"key1\"\n 2) \"key2\"\n 3) \"first\"\n 4) \"second\"\n```\n\nä¸‹é¢æ¼”ç¤ºä¸‹ Lua å¦‚ä½•è°ƒç”¨ Redis å‘½ä»¤ ï¼Œé€šè¿‡redis.call()æ¥æ‰§è¡Œäº† Redis å‘½ä»¤ ã€‚\n\n```lua\n redis> set mystring 'hello world'\n OK\n redis> get mystring\n \"hello world\"\n redis> EVAL \"return redis.call('GET',KEYS[1])\" 1 mystring\n \"hello world\"\n redis> EVAL \"return redis.call('GET','mystring')\" 0\n \"hello world\"\n```\n\n### EVALSHA å‘½ä»¤\n\nä½¿ç”¨ EVAL å‘½ä»¤æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¼ è¾“ Lua è„šæœ¬ ï¼Œè‹¥ Lua è„šæœ¬è¿‡é•¿ï¼Œä¸ä»…ä¼šæ¶ˆè€—ç½‘ç»œå¸¦å®½ï¼Œè€Œä¸”ä¹Ÿä¼šå¯¹ Redis çš„æ€§èƒ½é€ æˆä¸€å®šçš„å½±å“ã€‚\n\næ€è·¯æ˜¯å…ˆå°† Lua è„šæœ¬å…ˆç¼“å­˜èµ·æ¥ , è¿”å›ç»™å®¢æˆ·ç«¯ Lua è„šæœ¬çš„ sha1 æ‘˜è¦ã€‚ å®¢æˆ·ç«¯å­˜å‚¨è„šæœ¬çš„ sha1 æ‘˜è¦ ï¼Œæ¯æ¬¡è¯·æ±‚æ‰§è¡Œ EVALSHA å‘½ä»¤å³å¯ã€‚\n\n![image-20230825100321238](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230825100321238.png)\n\nEVALSHA å‘½ä»¤åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\n\n```lua\n redis> EVALSHA sha1 numkeys key [key ...] arg [arg ...] \n```\n\nå®ä¾‹å¦‚ä¸‹ï¼š\n\n```lua\n redis> SCRIPT LOAD \"return 'hello world'\"\n \"5332031c6b470dc5a0dd9b4bf2030dea6d65de91\"\n redis> EVALSHA 5332031c6b470dc5a0dd9b4bf2030dea6d65de91 0\n \"hello world\"\n```\n\n\n\n## äº‹åŠ¡ VS Lua è„šæœ¬\n\nä»å®šä¹‰ä¸Šæ¥è¯´ï¼Œ **Redis ä¸­çš„è„šæœ¬æœ¬èº«å°±æ˜¯ä¸€ç§äº‹åŠ¡**ï¼Œ æ‰€ä»¥ä»»ä½•åœ¨äº‹åŠ¡é‡Œå¯ä»¥å®Œæˆçš„äº‹ï¼Œ åœ¨è„šæœ¬é‡Œé¢ä¹Ÿèƒ½å®Œæˆã€‚ å¹¶ä¸”ä¸€èˆ¬æ¥è¯´ï¼Œ ä½¿ç”¨**è„šæœ¬è¦æ¥å¾—æ›´ç®€å•ï¼Œå¹¶ä¸”é€Ÿåº¦æ›´å¿«**ã€‚\n\nå› ä¸ºè„šæœ¬åŠŸèƒ½æ˜¯ Redis 2.6 æ‰å¼•å…¥çš„ï¼Œ è€Œäº‹åŠ¡åŠŸèƒ½åˆ™æ›´æ—©ä¹‹å‰å°±å­˜åœ¨äº†ï¼Œ æ‰€ä»¥ Redis æ‰ä¼šåŒæ—¶å­˜åœ¨ä¸¤ç§å¤„ç†äº‹åŠ¡çš„æ–¹æ³•ã€‚\n\n> ä¸è¿‡**æˆ‘ä»¬å¹¶ä¸æ‰“ç®—åœ¨çŸ­æ—¶é—´å†…å°±ç§»é™¤äº‹åŠ¡åŠŸèƒ½**ï¼Œ å› ä¸ºäº‹åŠ¡æä¾›äº†ä¸€ç§å³ä½¿ä¸ä½¿ç”¨è„šæœ¬ï¼Œ ä¹Ÿå¯ä»¥é¿å…ç«äº‰æ¡ä»¶çš„æ–¹æ³•ï¼Œ è€Œä¸”äº‹åŠ¡æœ¬èº«çš„å®ç°å¹¶ä¸å¤æ‚ã€‚-- [https://redis.io/](https://link.zhihu.com/?target=https%3A//redis.io/)\n\nLua è„šæœ¬æ˜¯å¦ä¸€ç§å½¢å¼çš„äº‹åŠ¡ï¼Œä»–å…·å¤‡ä¸€å®šçš„åŸå­æ€§ï¼Œä½†è„šæœ¬æŠ¥é”™çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡å¹¶ä¸ä¼šå›æ»šã€‚Lua è„šæœ¬å¯ä»¥ä¿è¯éš”ç¦»æ€§ï¼Œè€Œä¸”å¯ä»¥å®Œç¾çš„æ”¯æŒ**åé¢çš„æ­¥éª¤ä¾èµ–å‰é¢æ­¥éª¤çš„ç»“æœ**ã€‚\n\n**Lua è„šæœ¬æ¨¡å¼çš„èº«å½±å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼é”ã€å»¶è¿Ÿé˜Ÿåˆ—ã€æŠ¢çº¢åŒ…ç­‰åœºæ™¯ã€‚**\n\nä¸è¿‡åœ¨ç¼–å†™ Lua è„šæœ¬æ—¶ï¼Œè¦æ³¨æ„å¦‚ä¸‹ä¸¤ç‚¹ï¼š\n\n1. ä¸ºäº†é¿å… Redis é˜»å¡ï¼ŒLua è„šæœ¬ä¸šåŠ¡é€»è¾‘ä¸èƒ½è¿‡äºå¤æ‚å’Œè€—æ—¶ï¼›\n2. ä»”ç»†æ£€æŸ¥å’Œæµ‹è¯• Lua è„šæœ¬ ï¼Œå› ä¸ºæ‰§è¡Œ Lua è„šæœ¬å…·å¤‡ä¸€å®šçš„åŸå­æ€§ï¼Œä¸æ”¯æŒå›æ»šã€‚\n\n## SpringBootä¸­ä½¿ç”¨redisäº‹åŠ¡\n\n### æ–¹å¼ä¸€\n\n```java\n@Autowired\n    private RedisTemplate redisTemplate;\n    /**\n    * äº‹åŠ¡æ–¹å¼ä¸€\n    */\n    @Test\n    void testTransaction(){\n        //å¼€å¯äº‹åŠ¡æ”¯æŒ   \n        //è®°å¾—å¼€å¯äº‹åŠ¡æ”¯æŒï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä½•ï¼Œæˆ‘å·²ç»å¼€å¯äº†ï¼Œç»“æœè¿˜æ˜¯å‡ºç°â€œ ERR EXEC without MULTIâ€,æ‰¾ä¸åˆ°åŸå› ï¼Œå¯èƒ½æ˜¯redisç‰ˆæœ¬é—®é¢˜\n        redisTemplate.setEnableTransactionSupport(true);\n        //å¼€å¯äº‹åŠ¡\n        redisTemplate.multi();\n        ValueOperations<String, String> stringops = redisTemplate.opsForValue();\n        String key=\"test:transaction\";\n        stringops.set(key,\"1\");\n        ListOperations<String, String> listOps = redisTemplate.opsForList();\n        String key1=\"test:transaction2\";\n        listOps.leftPush(key1,\"1111\");\n        System.out.println(stringops.get(key));\n        System.out.println(listOps.range(key1, 0, 10));\n        //æ‰§è¡Œäº‹åŠ¡\n        redisTemplate.exec();\n        System.out.println(stringops.get(key));\n        System.out.println(listOps.range(key1, 0, 10));\n\n    }\n```\n\n### æ–¹å¼äºŒï¼šä½¿ç”¨SessionCallback\n\n```java\n/**\n    * æ‰§è¡Œäº‹åŠ¡æ–¹å¼äºŒ\n     * è¿™ç§æ–¹å¼ç½‘å‹ä»¬æ¯”è¾ƒæ¨è\n    */\n    @Test\n    public void testTransaction2(){\n        redisTemplate.execute(new SessionCallback<List<Object>>(){\n            @Override\n            public List<Object> execute(RedisOperations operations) throws DataAccessException {\n                operations.multi();\n                operations.opsForValue().set(\"name:1\",\"walker11\");\n                operations.opsForValue().set(\"name:2\",\"walker22\");\n                operations.opsForValue().set(\"name:3\",\"walker33\");\n                return redisTemplate.exec();\n            }\n        });\n    }\n```\n\n## ä½¿ç”¨discardå–æ¶ˆäº‹åŠ¡\n\n```java\n /**\n    * æµ‹è¯•å–æ¶ˆäº‹åŠ¡\n    */\n    @Test\n    public void testDiscard(){\n        Integer flag=1;\n        redisTemplate.execute(new SessionCallback<List<Object>>(){\n            @Override\n            public List<Object> execute(RedisOperations operations) throws DataAccessException {\n                operations.multi();\n                operations.opsForValue().set(\"name:1\",\"walker11\");\n                operations.opsForValue().set(\"name:2\",\"walker22\");\n                operations.opsForValue().set(\"name:3\",\"walker33\");\n                if(flag.equals(1)){\n                    //å–æ¶ˆäº‹åŠ¡ï¼Œç»æµ‹è¯•ï¼Œåœ¨ä½¿ç”¨discardä¹‹åï¼Œä¸èƒ½å†æ¬¡æ‰§è¡Œexec()ï¼Œå¦åˆ™ä¼šå‡ºç° ERR EXEC without MULTIé”™è¯¯\n                    redisTemplate.discard();\n                    return null;\n                }\n                return redisTemplate.exec();\n            }\n        });\n    }\n```\n\n## SpringBootæ‰§è¡Œluaè„šæœ¬\n\n```java\nDefaultRedisScript<String> rs = new DefaultRedisScript<>(\"return 'Hello Redis' \", String.class);\n//æŒ‡å®šä¼ é€’å‚æ•°åºåˆ—åŒ–æ–¹å¼\nRedisSerializer argsSerializer = redisTemplate.getDefaultSerializer();\n//æŒ‡å®šè¿”å›ç»“æœåºåˆ—åŒ–æ–¹å¼\nRedisSerializer<String> resultSerializer = redisTemplate.getStringSerializer();\n//æ‰§è¡ŒLuaè„šæœ¬\nString res = (String) redisTemplate.execute(rs, argsSerializer, resultSerializer, null);\n```\n\n\n\n```java \n//æ³¨æ„è„šæœ¬ä¸­KYS[l]å’ŒKYS[2] çš„å†™æ³•ï¼Œå®ƒä»¬ä»£è¡¨å®¢æˆ·ç«¯ä¼ é€’çš„ç¬¬ä¸€ä¸ªé”®å’Œç¬¬äºŒä¸ªé”®ï¼Œ\n//è€ŒARGV[lï¼½å’ŒARGV[2ï¼½åˆ™è¡¨ç¤ºå®¢æˆ·ç«¯ä¼ é€’çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°\nString lua = \"redis.call ('set', KEYS[1], ARGV[1]) \\n\"\n       + \"redis.call ('set', KEYS[2], ARGV[2]) \\n \"\n       + \" local str1 = redis.call ('get', KEYS [1]) \\n \"\n       + \" local str2 = redis.call ('get', KEYS [2]) \\n \"\n       + \" if str1 == str2 then \\n \"\n       + \" return 1 \\n \"\n       + \" end \\n \"\n       + \" return 0 \\n \";\n```\n\nluaä¸­`KEYS`å’Œ`ARGV`å€¼ä»`redisTemplate.execute`ä¼ é€’`List<K> keys, Object... args`å‚æ•°ä¸­è·å¾—ã€‚\n\nä¸Šé¢è„šæœ¬éœ€è¦ä¸¤ä¸ªKEYSå’Œä¸¤ä¸ªARGVï¼š\n\n```java\nredisTemplate.execute(rs, argsSerializer, resultSerializer, Arrays.asList(KYS[l], KYS[2]), ARGV[1], ARGV[1])\n1\n```\n\n### æ‰§è¡Œå¼‚å¸¸å¤„ç†\n\næœ‰å°ä¼™ä¼´æœ‰è°ƒç”¨æ—¶å€™æ²¡æœ‰æŒ‡å®šåºåˆ—åŒ–æ–¹å¼ç›´æ¥ï¼š\n\n```java\nredisTemplate.execute(rs, Arrays.asList(KYS[l], KYS[2]), ARGV[1], ARGV[1])\n```\n\næ²¡æœ‰æŒ‡å®šå……åˆ—åŒ–æ–¹å¼ï¼Œè¿”å›å­—ç¬¦ä¸²ä¼šæç¤ºï¼š\n\n`com.fasterxml.jackson.core.JsonParseException: Unrecognized token â€˜Helloâ€™: was expecting (JSON String, Number, Array, Object or token â€˜nullâ€™, â€˜trueâ€™ or â€˜falseâ€™)`\n\nå› ä¸ºredisä¸­ä¸æ˜¯ç›´æ¥å­˜å‚¨stringï¼Œæ˜¯æ•°ç»„å½¢å¼ï¼Œâ€”â€”[redisåŸç†](https://blog.csdn.net/h273979586/article/details/110845962)\n\nå®ƒæ— æ³•ç›´æ¥åºåˆ—åŒ–ï¼Œæ‰€ä»¥å¾—æŒ‡å®šåºåˆ—åŒ–æ–¹å¼ã€‚\n\n## å¼•ç”¨\n\n[å½»åº•ææ‡‚ Redis äº‹åŠ¡ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/135241403)\n\n[SpringBootæ‰§è¡ŒLuaè„šæœ¬_LailaiMonkeyçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/h273979586/article/details/112710452)\n\n[ã€redisç³»åˆ—ã€‘springbootä½¿ç”¨redisäº‹åŠ¡_springboot redis äº‹åŠ¡_WalkerShençš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/Think_and_work/article/details/123219093)\n","tags":["redis"],"categories":["javaå…¨æ ˆ"]},{"title":"ä½¿ç”¨xrdpè¿œç¨‹è¿æ¥ubuntu","url":"/2023/08/21/ä½¿ç”¨xrdpè¿œç¨‹è¿æ¥ubuntu/","content":"\n## åœ¨è¿œç¨‹è®¡ç®—æœºä¸Šå®‰è£… XRDP\n\nå®‰è£… XRDP åªéœ€å‡ ä¸ªæ­¥éª¤ï¼Œè€Œä¸”æ˜¯ç›¸å½“ç›´æ¥çš„æ“ä½œã€‚\n\n> å¤‡æ³¨ï¼šåœ¨è®¿é—®ä»»ä½•åœ°æ–¹ä¹‹å‰ï¼Œè¯·æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„ â€œè¿œç¨‹æœºå™¨â€ æ˜¯å…¶ä»–äººè¿æ¥åˆ°çš„æœºå™¨ã€‚\n\nXRDP åŒ…å«åœ¨å¤§å¤šæ•°å‘è¡Œç‰ˆçš„è½¯ä»¶åº“ä¸­ã€‚åœ¨ Ubuntu ä¸Šï¼Œä½ å¯ä»¥åœ¨ universe åº“ä¸­æ‰¾åˆ°å®ƒã€‚\n\nä½ å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…å®ƒï¼š\n\n```text\nsudo apt update\nsudo apt install xrdp\n```\n\n## é…ç½®\n\n**å°†xrdpç”¨æˆ·åŠ å…¥åˆ°å¦‚ä¸‹ç”¨æˆ·ç»„**\n\n  ```bash\n  sudo adduser xrdp ssl-cert\n  ```\n\n**é‡å¯xrdp**\n\n```bash\n sudo service xrdp restart\n```\n\n**åœ¨ubuntuè®¾ç½®ä¸­å¼€å¯å¯ä»¥è¿œç¨‹è¿æ¥**\n\n## è¿æ¥\n\næ‰“å¼€windowsçš„è¿œç¨‹è¿æ¥\n\nè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å¯\n\n## é—®é¢˜\n\n### å‡ºç°é»‘å±\n\nè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\n sudo -s\n sudo vim /etc/xrdp/startwm.sh\n```\n\n![image-20230821115519991](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230821115519991.png)\n\n **åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š**\n\n```bash\nunset DBUS_SESSION_BUS_ADDRESS\nunset XDG_RUNTIME_DIR\n.$ HOME/.profile\n```\n\n## ä¼˜åŒ–\n\n### è°ƒæ•´ Xrdp é…ç½®å‚æ•°\n\nç¼–è¾‘ `/etc/xrdp/xrdp.ini`\n\n```\ntcp_send_buffer_bytes=4194304\ntcp_recv_buffer_bytes=6291456\n```\n\n`tcp_send_buffer_bytes`, `tcp_recv_buffer_bytes` ä¸¤ä¸ªå‚æ•°é»˜è®¤è¢«æ³¨é‡Šäº†ï¼Œæ³¨é‡Šé»˜è®¤å€¼ï¼ˆ32768ï¼‰ï¼Œæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚\n\n### è°ƒæ•´ç³»ç»Ÿå‚æ•°\n\nä¸´æ—¶ç”Ÿæ•ˆ\n\n```bash\nsudo sysctl -w net.core.rmem_max=12582912\nsudo sysctl -w net.core.wmem_max=8388608\n```\n\né‡å¯åä¿ç•™\nå°†ä»¥ä¸‹å†…å®¹å†™å…¥é…ç½®æ–‡ä»¶ `/etc/sysctl.conf`\n\n```bash\nnet.core.rmem_max = 12582912\nnet.core.wmem_max = 8388608\n```\n\nç„¶åæ‰§è¡Œ\n\n```bash\nsudo sysctl -p\n```\n\n### é‡å¯ xrdp æœåŠ¡ç”Ÿæ•ˆ\n\n```bash\nsudo systemctl restart xrdp\n```\n\n## æ¡Œé¢ä¼˜åŒ–\n\nå¦‚æœä¸åšä»»ä½•é…ç½®ï¼Œå¯åŠ¨ä¹‹åçš„æ¡Œé¢æ˜¯éå¸¸åˆ«æ‰­çš„ï¼Œå› ä¸ºæ˜¯Gnomeçš„åŸå§‹æ¡Œé¢ï¼Œæ²¡æœ‰å·¦ä¾§çš„ä»»åŠ¡æ ï¼Œçª—å£ä¹Ÿæ²¡æœ‰æœ€å°åŒ–æŒ‰é’®ï¼Œç­‰ç­‰ä¸€äº›åˆ—é—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼š\n\n### 1. æ·»åŠ é…ç½®æ–‡ä»¶\n\n```bash\nvim ~/.xsessionrc\n\næ·»åŠ ï¼š\n\nexport GNOME_SHELL_SESSION_MODE=ubuntu\nexport XDG_CURRENT_DESKTOP=ubuntu:GNOME\nexport XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg\n```\n\n### 2. é‡å¯xrdpæœåŠ¡\n\n```bash\nsudo systemctl restart xrdp.service\n```\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"æ¸…é™¤buff/cacheç¼“å­˜","url":"/2023/08/17/æ¸…é™¤buff-cacheç¼“å­˜/","content":"\n## è¡¨ç°ç°è±¡\n\nåœ¨Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨`free`å‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨çŠ¶æ€ã€‚åœ¨ä¸€ä¸ª `CoreOS` çš„ç³»ç»Ÿä¸Šï¼Œ`free`å‘½ä»¤çš„æ˜¾ç¤ºå†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·ä¸€ä¸ªçŠ¶æ€ï¼š\n\n```\ncore@localhost ~ $ free\n              total        used        free      shared  buff/cache   available\nMem:        8145320      391200     333888      204616      7420232     311660\nSwap:             0           0           0\n1234\n```\n\nè¿™é‡Œçš„é»˜è®¤æ˜¾ç¤ºå•ä½æ˜¯kbï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ `-h`å‚æ•°ï¼Œæ¥è®©`free` å‘½ä»¤æ˜¾ç¤ºçš„æ›´ä¸ºå‹å¥½ä¸€äº›ã€‚\n\n```\ncore@localhost ~ $ free -h\n              total        used        free      shared  buff/cache   available\nMem:          7.8Gi       381Mi       0.3Gi       199Mi       7.4Gi       0.3Gi\nSwap:            0B          0B          0B\n1234\n```\n\næ–°ç‰ˆlinuxç›¸å¯¹æ¥è¯´å·²ç»å¥½å¾ˆå¤šäº†ï¼Œåœ¨è€ç‰ˆçš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰`available`å­—æ®µçš„ã€‚\n\næ‰€ä»¥æ”¾å½“æ—¶æ¥è¯´ï¼Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸‹é¢å‡ ç§ååº”ï¼š\n\n1. å¯¹äºä¸å¤ªäº†è§£linuxç³»ç»Ÿçš„äººæ¥è¯´ï¼Œçœ‹åˆ° `free` ä¹‹åï¼Œä¼šè§‰å¾—å†…å­˜ç”¨äº†å¥½å¤šï¼Œæˆ‘éƒ½æ²¡è·‘ä»€ä¹ˆç¨‹åºï¼Œå†…å­˜å°±ç”¨å®Œäº†ï¼Linuxå¥½å å†…å­˜ï¼\n2. ç¨å¾®äº†è§£linuxï¼Œå¹¶åœ¨ç™¾åº¦æœç´¢è¿‡ç›¸å…³çŸ¥è¯†çš„äººä¹Ÿè®¸ä¼šè¯´ï¼Œå—¯ï¼Œçœ‹èµ·æ¥`free`æ˜¯æ²¡æœ‰å¤šå°‘äº†ï¼Œä½†æ˜¯çœŸå®å†…å­˜æ‰ç”¨äº† 400Mi ä¸åˆ°ï¼Œè¿˜æœ‰å¾ˆå¤šå‰©ä½™å†…å­˜å¯ç”¨ã€‚buff/cache å ç”¨æ¯”è¾ƒå¤šï¼Œè¯´æ˜ç³»ç»Ÿä¸­æœ‰è¿›ç¨‹æ›¾ç»è¯»å†™è¿‡æ–‡ä»¶ï¼Œä½†æ˜¯ä¸è¦ç´§ï¼Œè¿™éƒ¨åˆ†å†…å­˜åœ¨ç³»ç»Ÿå†…å­˜åƒç´§çš„æ—¶å€™ä¼šé‡Šæ”¾å‡ºæ¥çš„ã€‚\n\n## ä»€ä¹ˆæ˜¯ buff/cache\n\nåœ¨`Linux 2.4`çš„å†…å­˜ç®¡ç†ä¸­ï¼Œ`buffer`æŒ‡Linuxå†…å­˜çš„ï¼š`Buffer cache`ã€‚`cache`æŒ‡Linuxå†…å­˜ä¸­çš„ï¼š`Page cache`ã€‚ä¸€èˆ¬å‘¢ï¼Œæ˜¯è¿™ä¹ˆè§£é‡Šä¸¤è€…çš„ã€‚\n\n- A buffer is someting that has yet to be â€˜writtenâ€™ to disk.\n  ç¼“å†²åŒºæ˜¯ä¸€äº›è¿˜æ²¡æœ‰è¢«â€œå†™å…¥â€åˆ°ç£ç›˜çš„ä¸œè¥¿ã€‚\n- A cache is someting that has been â€˜readâ€™ from the disk and stored for later use.\n\nç¿»è¯‘è¿‡æ¥å°±æ˜¯è¯´ï¼š\n\n1. buffer(buff) æ˜¯ç”¨æ¥ç¼“å­˜å°šæœªâ€œå†™å…¥â€ç£ç›˜çš„å†…å®¹ã€‚\n2. cache æ˜¯ç”¨æ¥ç¼“å­˜ä»ç£ç›˜â€œè¯»å–â€å‡ºæ¥çš„ä¸œè¥¿ã€‚\n\næ‰€ä»¥ `buffer` è¢«ç”¨æ¥å½“æˆå¯¹ioè®¾å¤‡å†™çš„ç¼“å­˜ã€‚è€Œ `cache` è¢«ç”¨æ¥å½“ä½œå¯¹ioè®¾å¤‡çš„è¯»ç¼“å­˜ã€‚è¿™é‡Œçš„ioè®¾å¤‡ï¼Œä¸»è¦æŒ‡çš„æ˜¯å—è®¾å¤‡æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ™®é€šæ–‡ä»¶ã€‚\n\n**ä½†æ˜¯åœ¨ `Linux 2.6` ä»¥åï¼Œå®ƒä»¬çš„æ„ä¹‰ä¸ä¸€æ ·äº†ã€‚**\n\nåœ¨`Linux 2.6`ä¹‹åLinuxå°†ä»–ä»¬ç»Ÿä¸€åˆå¹¶åˆ°äº†`Page cache`ä½œä¸ºæ–‡ä»¶å±‚çš„ç¼“å­˜ã€‚è€Œ`buffer`åˆ™è¢«ç”¨ä½œ`block`å±‚çš„ç¼“å­˜ã€‚\n`block`å±‚çš„ç¼“å­˜æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œä½ å¯ä»¥è®¤ä¸ºä¸€ä¸ª`buffer`æ˜¯ä¸€ä¸ª`physical disk block`åœ¨å†…å­˜çš„ä»£è¡¨ï¼Œç”¨æ¥å°†å†…å­˜ä¸­çš„`pages`æ˜ å°„ä¸º`disk blocks`ï¼Œè¿™éƒ¨åˆ†è¢«ä½¿ç”¨çš„å†…å­˜è¢«å«åš`buffer`ã€‚\n\n> `buffer`é‡Œé¢çš„`pages`ï¼ŒæŒ‡çš„æ˜¯`Page cache`ä¸­çš„`pages`ï¼Œæ‰€ä»¥ï¼Œ`buffer`ä¹Ÿå¯ä»¥è¢«è®¤ä¸º`Page cache`çš„ä¸€éƒ¨åˆ†ã€‚\n\n**æˆ–è€…ç®€å•æ¥è¯´ï¼Œ`buffer`è´Ÿè´£è£¸è®¾å¤‡ç›¸å…³çš„ç¼“å­˜ï¼Œ`cache`è´Ÿè´£æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜ã€‚**\n\n### Buffer çš„å…·ä½“èŒè´£\n\nåœ¨å½“å‰çš„ç³»ç»Ÿå®ç°é‡Œï¼Œ`buffer`ä¸»è¦æ˜¯è®¾è®¡ç”¨æ¥åœ¨ç³»ç»Ÿå¯¹å—è®¾å¤‡è¿›è¡Œè¯»å†™æ—¶ä½œä¸ºç¼“å­˜æ¥ä½¿ç”¨ã€‚è¿™æ„å‘³ç€å¯¹å—çš„æ“ä½œä¼šä½¿ç”¨`buffer`è¿›è¡Œç¼“å­˜ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿçš„æ—¶å€™ã€‚\n\nä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªç¼“å­˜ç³»ç»Ÿæ˜¯ä¸€èµ·é…åˆä½¿ç”¨çš„ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œ`cache`çš„å†…å®¹ä¼šè¢«æ”¹å˜ï¼Œè€Œ`buffer`åˆ™ç”¨æ¥å°†`cache`çš„`page`æ ‡è®°ä¸ºä¸åŒçš„ç¼“å†²åŒºï¼Œå¹¶è®°å½•æ˜¯å“ªä¸€ä¸ªç¼“å†²åŒºè¢«ä¿®æ”¹äº†ã€‚\n\nè¿™æ ·ï¼Œå†…æ ¸åœ¨åç»­æ‰§è¡Œè„æ•°æ®çš„å›å†™ï¼ˆ`writeback`ï¼‰æ—¶ï¼Œå°±ä¸ç”¨å°†æ•´ä¸ª`page`å†™å›ï¼Œè€Œåªéœ€è¦å†™å›ä¿®æ”¹çš„éƒ¨åˆ†å³å¯ã€‚\n\n### Cache çš„å…·ä½“èŒè´£\n\n`cache`ä¸»è¦ç”¨æ¥ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æ•°æ®çš„ç¼“å­˜æ¥ç”¨ï¼Œå½“è¿›ç¨‹å¯¹æ–‡ä»¶æœ‰`read/write`æ“ä½œçš„æ—¶å€™ã€‚åŒ…æ‹¬å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜çš„ç³»ç»Ÿè°ƒç”¨`mmap`ï¼Œå°±ä¼šç”¨åˆ°`cache`ã€‚\n\nå› ä¸º`cache`è¢«ä½œä¸ºæ–‡ä»¶ç±»å‹çš„ç¼“å­˜æ¥ç”¨ï¼Œæ‰€ä»¥äº‹å®ä¸Šä¹Ÿè´Ÿè´£äº†å¤§éƒ¨åˆ†çš„å—è®¾å¤‡æ–‡ä»¶çš„ç¼“å­˜å·¥ä½œã€‚\n\n## æ€ä¹ˆå›æ”¶ buff/cache\n\nLinuxå†…æ ¸ä¼šåœ¨å†…å­˜å°†è¦è€—å°½çš„æ—¶å€™ï¼Œè‡ªåŠ¨è§¦å‘å†…å­˜å›æ”¶çš„å·¥ä½œï¼Œä»¥ä¾¿é‡Šæ”¾å‡ºå†…å­˜ç»™æ€¥éœ€å†…å­˜çš„è¿›ç¨‹ä½¿ç”¨ã€‚\n\n***ä½†æ˜¯è¿™ç§å›æ”¶çš„å·¥ä½œä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰æˆæœ¬ã€‚***\n\nç†è§£`cache`æ˜¯å¹²ä»€ä¹ˆçš„å°±çŸ¥é“ï¼Œ`cache`ä¸­å­˜åœ¨ç€ä¸€éƒ¨åˆ†`write`æ“ä½œçš„æ•°æ®ã€‚æ‰€ä»¥å¿…é¡»ä¿è¯`cache`ä¸­çš„æ•°æ®è·Ÿå¯¹åº”æ–‡ä»¶ä¸­çš„æ•°æ®ä¸€è‡´ï¼Œæ‰èƒ½å¯¹`cache`è¿›è¡Œé‡Šæ”¾ã€‚\n\näºæ˜¯ä¼´éšç€`cache`æ¸…é™¤çš„è¡Œä¸ºçš„ï¼Œä¸€èˆ¬éƒ½æ˜¯ç³»ç»Ÿ`IO`é£™é«˜ã€‚è¿™æ˜¯å› ä¸ºå†…æ ¸è¦å°†`cache`ä¸­ç¼“å­˜çš„`write`æ•°æ®è¿›è¡Œå›å†™ã€‚\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–‡ä»¶æ¥äººå·¥è§¦å‘ç¼“å­˜æ¸…é™¤çš„æ“ä½œï¼ŒLinux æä¾›äº†ä¸‰ç§æ¸…ç©ºæ–¹å¼ï¼š\n\n1. `echo 1 > /proc/sys/vm/drop_caches` # ä»…æ¸…é™¤é¡µé¢ç¼“å­˜\n2. `echo 2 > /proc/sys/vm/drop_caches` # æ¸…é™¤ç›®å½•é¡¹å’Œinode\n3. `echo 3 > /proc/sys/vm/drop_caches` # æ¸…é™¤é¡µé¢ç¼“å­˜ã€ç›®å½•é¡¹ä»¥åŠinode\n\n***ä½†æ˜¯è¿™ç§æ”¾æ—¶åªèƒ½åœ¨æ‰§è¡Œçš„å½“æ—¶èµ·ä½œç”¨ï¼Œè¿‡ä¸€æ®µæ—¶é—´ä¹‹ååˆä¼šå‘ç°å†…å­˜è¢«å æ»¡ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ***\n\nå®é™…ä¸Šå†…æ ¸æä¾›äº†`vm.vfs_cache_pressure`å‚æ•°ç”¨æ¥æ§åˆ¶ç¼“å†²åŒºçš„å›æ”¶é¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´å®ƒã€‚\n\nè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶å†…æ ¸å›æ”¶VFSç¼“å­˜çš„é¢‘ç‡ã€‚ä¿®æ”¹è¿™ä¸ªå€¼ä¼šæé«˜æˆ–è€…é™ä½å›æ”¶VFSç¼“å­˜çš„é¢‘ç‡ã€‚å€¼å¯ä»¥è®¾ç½®ä¸º`0-200`ä¸­çš„ä»»æ„å€¼ã€‚è¶Šå¤§å›æ”¶é¢‘ç‡è¶Šå¿«ï¼Œå¯ä»¥æŠŠ`vm.vfs_cache_pressure`èµ‹å€¼ä¸º`200`æ¥è·å¾—æœ€å¿«çš„å›æ”¶é¢‘ç‡ã€‚è¿™ä¸ªå€¼é»˜è®¤å€¼ä¸€èˆ¬ä¸º`100`ã€‚\n\nå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨`slabtop`åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ`dentry`å’Œ`*_inode_cache`å€¼è¶Šé«˜å›æ”¶çš„æ•ˆæœè¶Šå¥½ã€‚\n\n\n\nè½¬è½½ï¼š[Linux buffer/cache å†…å­˜å ç”¨è¿‡é«˜çš„åŸå› ä»¥åŠè§£å†³åŠæ³•_kunyusçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/kunyus/article/details/104617426)\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"rabbitMqåŸºç¡€","url":"/2023/08/17/rabbitMqåŸºç¡€/","content":"\n## å®‰è£…\n\n### linuxæœ¬æœºå®‰è£…\n\nä¸‹è½½ï¼š[Downloading and Installing RabbitMQ â€” RabbitMQ](https://www.rabbitmq.com/download.html)\n\n![image-20230817140928416](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230817140928416.png)\n\né€‰æ‹©è‡ªå·±æœºå™¨å¯¹åº”çš„ç‰ˆæœ¬\n\n**ä¸‹è½½Erlang**\n\n> RabbitMQæ˜¯é‡‡ç”¨ Erlangè¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥ç³»ç»Ÿç¯å¢ƒå¿…é¡»æä¾› Erlangç¯å¢ƒï¼Œéœ€è¦æ˜¯å®‰è£… Erlang\n\n> `Erlang`å’Œ`RabbitMQ`ç‰ˆæœ¬å¯¹ç…§ï¼šhttps://www.rabbitmq.com/which-erlang.html\n\nå°†ä¸‹è½½å¥½çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨\n\n```bash\n# è§£å‹\nrpm -Uvh erlang-23.2.7-2.el7.x86_64.rpm\n# å®‰è£…\nyum install -y erlang\n```\n\nå®‰è£…å®Œæˆåè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹ç‰ˆæœ¬å·\n\n```shell\nerl -v\n```\n\n**å®‰è£…RabbitMQ**\n\nåœ¨`RabiitMQ`å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦ä¾èµ–`socat`æ’ä»¶ï¼Œé¦–å…ˆå®‰è£…è¯¥æ’ä»¶\n\n```shell\nyum install -y socat\n```\n\nç„¶åè§£å‹å®‰è£…`RabbitMQ`çš„å®‰è£…åŒ…\n\n```shell\n# è§£å‹\nrpm -Uvh rabbitmq-server-3.8.14-1.el7.noarch.rpm\n# å®‰è£…\nyum install -y rabbitmq-server\n```\n\n**å¯åŠ¨RabbitMQæœåŠ¡**\n\n```shell\n# å¯åŠ¨rabbitmq\nsystemctl start rabbitmq-server\n# æŸ¥çœ‹rabbitmqçŠ¶æ€\nsystemctl status rabbitmq-server\n# è®¾ç½®rabbitmqæœåŠ¡å¼€æœºè‡ªå¯åŠ¨\nsystemctl enable rabbitmq-server\n# å…³é—­rabbitmqæœåŠ¡\nsystemctl stop rabbitmq-server\n# é‡å¯rabbitmqæœåŠ¡\nsystemctl restart rabbitmq-server\n```\n\n**å®‰è£…å¯åŠ¨RabbitMQWebç®¡ç†ç•Œé¢**\n\n> é»˜è®¤æƒ…å†µä¸‹ï¼Œrabbitmqæ²¡æœ‰å®‰è£…webç«¯çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œéœ€è¦å®‰è£…æ‰å¯ä»¥ç”Ÿæ•ˆ\n\n```shell\n# æ‰“å¼€RabbitMQWebç®¡ç†ç•Œé¢æ’ä»¶\nrabbitmq-plugins enable rabbitmq_management\n```\n\n`rabbitmq`æœ‰ä¸€ä¸ªé»˜è®¤çš„è´¦å·å¯†ç `guest`ï¼Œä½†è¯¥æƒ…å†µä»…é™äºæœ¬æœºlocalhostè¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ªè¿œç¨‹ç™»å½•çš„ç”¨æˆ·\n\n**æ·»åŠ è¿œç¨‹ç”¨æˆ·**\n\n```shell\n# æ·»åŠ ç”¨æˆ·\nrabbitmqctl add_user ç”¨æˆ·å å¯†ç \n\n# è®¾ç½®ç”¨æˆ·è§’è‰²,åˆ†é…æ“ä½œæƒé™\nrabbitmqctl set_user_tags ç”¨æˆ·å è§’è‰²\n\n# ä¸ºç”¨æˆ·æ·»åŠ èµ„æºæƒé™(æˆäºˆè®¿é—®è™šæ‹Ÿæœºæ ¹èŠ‚ç‚¹çš„æ‰€æœ‰æƒé™)\nrabbitmqctl set_permissions -p / ç”¨æˆ·å \".*\" \".*\" \".*\"\n```\n\n**è§’è‰²æœ‰å››ç§**ï¼š\n\n- `administrator`ï¼šå¯ä»¥ç™»å½•æ§åˆ¶å°ã€æŸ¥çœ‹æ‰€æœ‰ä¿¡æ¯ã€å¹¶å¯¹rabbitmqè¿›è¡Œç®¡ç†\n- `monToring`ï¼šç›‘æ§è€…ï¼›ç™»å½•æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ‰€æœ‰ä¿¡æ¯\n- `policymaker`ï¼šç­–ç•¥åˆ¶å®šè€…ï¼›ç™»å½•æ§åˆ¶å°æŒ‡å®šç­–ç•¥\n- `managment`ï¼šæ™®é€šç®¡ç†å‘˜ï¼›ç™»å½•æ§åˆ¶\n\nåˆ›å»ºå®Œæˆåï¼Œè®¿é—®`æœåŠ¡å™¨ip:15672`è¿›è¡Œç™»å½•ï¼Œç„¶åä¾¿å¯è¿›å…¥åˆ°åå°\n\nå…¶ä»–æŒ‡ä»¤ï¼š\n\n```shell\n# ä¿®æ”¹å¯†ç \nrabbitmqctl change_ password ç”¨æˆ·å æ–°å¯†ç \n# åˆ é™¤ç”¨æˆ·\nrabbitmqctl delete_user ç”¨æˆ·å\n# æŸ¥çœ‹ç”¨æˆ·æ¸…å•\nrabbitmqctl list_users\n```\n\n### dockerå®‰è£…\n\n```bash\n# å®‰è£…å¯åŠ¨rabbitmqå®¹å™¨\ndocker run -d --name myRabbitMQ -e RABBITMQ_DEFAULT_USER=zsr -e RABBITMQ_DEFAULT_PASS=123456 -p 15672:15672 -p 5672:5672 rabbitmq:3.8.14-management\n```\n\n","tags":["rabbitmq"],"categories":["javaå…¨æ ˆ"]},{"title":"eventStream-chatgpt","url":"/2023/08/15/eventStream-chatgpt/","content":"\n## å…³äº\n\n`EventSource` æ¥å£æ˜¯ web å†…å®¹ä¸æœåŠ¡å™¨å‘é€äº‹ä»¶ ä¸€ä¸ª `EventSource` å®ä¾‹ä¼šå¯¹HTTPæœåŠ¡å™¨å¼€å¯ä¸€ä¸ªæŒä¹…åŒ–çš„è¿æ¥ï¼Œä»¥ `text/event-stream` æ ¼å¼å‘é€äº‹ä»¶ï¼Œæ­¤è¿æ¥ä¼šä¸€ç›´ä¿æŒå¼€å¯ç›´åˆ°é€šè¿‡è°ƒç”¨ `EventSource.close()` å…³é—­ã€‚\n\n`eventSourc`åˆç§°`SSE(Server-Sent-Events)`,ä¸€ç§æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯(æµè§ˆå™¨)çš„å•é¡¹æ¶ˆæ¯æ¨é€æ–¹æ¡ˆï¼Œå®ƒå’Œè½®è¯¢ä¸€æ ·ï¼Œä¹Ÿæ˜¯åŸºäºhttpè¯·æ±‚æ¥å®Œæˆçš„ã€‚ä½†æ˜¯å’Œè½®è¯¢ä¸ä¸€æ ·çš„æ˜¯å®ƒæ˜¯æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥åï¼ŒæœåŠ¡å™¨ä¸»åŠ¨çš„å‘å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®æ¨é€ã€‚\n\nä¸€æ—¦è¿æ¥å¼€å¯ï¼Œæ¥è‡ªæœåŠ¡ç«¯ä¼ å…¥çš„æ¶ˆæ¯ä¼šä»¥äº‹ä»¶çš„å½¢å¼åˆ†å‘è‡³ä½ ä»£ç ä¸­ã€‚å¦‚æœæ¥æ”¶æ¶ˆæ¯ä¸­æœ‰ä¸€ä¸ª event å­—æ®µï¼Œè§¦å‘çš„äº‹ä»¶ä¸ event å­—æ®µçš„å€¼ç›¸åŒã€‚å¦‚æœä¸å­˜åœ¨ event å­—æ®µï¼Œåˆ™å°†è§¦å‘é€šç”¨çš„ [`message`](https://developer.mozilla.org/zh-CN/docs/Web/API/EventSource/message_event) äº‹ä»¶ã€‚\n\nä¸ [WebSocket](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API) ä¸åŒçš„æ˜¯ï¼ŒæœåŠ¡å™¨å‘é€äº‹ä»¶æ˜¯å•å‘çš„ã€‚æ•°æ®æ¶ˆæ¯åªèƒ½ä»æœåŠ¡ç«¯åˆ°å‘é€åˆ°å®¢æˆ·ç«¯ï¼ˆå¦‚ç”¨æˆ·çš„æµè§ˆå™¨ï¼‰ã€‚è¿™ä½¿å…¶æˆä¸ºä¸éœ€è¦ä»å®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€æ¶ˆæ¯çš„æƒ…å†µä¸‹çš„æœ€ä½³é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¤„ç†å¦‚ç¤¾äº¤åª’ä½“çŠ¶æ€æ›´æ–°ã€æ¶ˆæ¯æ¥æºï¼ˆnews feedï¼‰æˆ–å°†æ•°æ®ä¼ é€’åˆ°[å®¢æˆ·ç«¯å­˜å‚¨](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage)æœºåˆ¶ï¼ˆå¦‚ [IndexedDB](https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API) æˆ– [web å­˜å‚¨](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API)ï¼‰ä¹‹ç±»çš„ï¼Œ`EventSource` æ— ç–‘æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ–¹æ¡ˆã€‚\n\n>  **è­¦å‘Šï¼š** å½“**ä¸ä½¿ç”¨ HTTP/2** æ—¶ï¼ŒæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰å—åˆ°æ‰“å¼€è¿æ¥æ•°çš„é™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯*å¯¹äºæµè§ˆå™¨*çš„ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºéå¸¸ä½çš„æ•°å­—ï¼ˆ6ï¼‰ï¼Œæ‰“å¼€å¤šä¸ªé€‰é¡¹å¡æ—¶å¯èƒ½ä¼šç‰¹åˆ«ç—›è‹¦ã€‚åœ¨ [Chrome](https://crbug.com/275955) å’Œ [Firefox](https://bugzil.la/906896) ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å·²è¢«æ ‡è®°ä¸ºâ€œä¸ä¼šä¿®å¤â€ã€‚è¿™ä¸ªé™åˆ¶æ˜¯æ¯ä¸ªæµè§ˆå™¨å’ŒåŸŸåçš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨æ‰€æœ‰æ ‡ç­¾é¡µä¸­æ‰“å¼€ 6 ä¸ª SSE è¿æ¥åˆ° `www.example1.com`ï¼Œä»¥åŠå¦å¤– 6 ä¸ª SSE è¿æ¥åˆ° `www.example2.com`ï¼ˆæ¥æºï¼š[Stackoverflow](https://stackoverflow.com/questions/5195452/websockets-vs-server-sent-events-eventsource/5326159)ï¼‰ã€‚å½“ä½¿ç”¨ HTTP/2 æ—¶ï¼Œæœ€å¤§å¹¶å‘ *HTTP æµ*çš„æ•°é‡æ˜¯ç”±æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åå•†çš„ï¼ˆé»˜è®¤ä¸º 100ï¼‰ã€‚\n\n## æ¯”è¾ƒwebsocket\n\n**EventSource**:\n\n- ä¼˜åŠ¿ï¼š\n  - ç®€å•æ˜“ç”¨ï¼š`EventSource API`éå¸¸ç®€å•ï¼Œæ˜“äºä½¿ç”¨å’Œç†è§£ã€‚\n  - æœåŠ¡å™¨æ¨é€ï¼š`EventSource`é€‚ç”¨äºæœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œå®¢æˆ·ç«¯åªèƒ½æ¥æ”¶æœåŠ¡å™¨å‘é€çš„äº‹ä»¶ã€‚\n  - è‡ªåŠ¨é‡è¿ï¼š`EventSource`ä¼šè‡ªåŠ¨å¤„ç†è¿æ¥æ–­å¼€å’Œé‡æ–°è¿æ¥çš„æƒ…å†µï¼Œé€‚ç”¨äºé•¿æœŸä¿æŒè¿æ¥å¹¶æ¥æ”¶äº‹ä»¶æµçš„åœºæ™¯ã€‚\n  - å…¼å®¹æ€§ï¼š`EventSource`åœ¨å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨ä¸­å¾—åˆ°æ”¯æŒã€‚\n- åŠ£åŠ¿ï¼š\n  - å•å‘é€šä¿¡ï¼š`EventSource`åªæ”¯æŒä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å•å‘é€šä¿¡ï¼Œå®¢æˆ·ç«¯æ— æ³•å‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚\n  - è¾ƒå°‘çš„åŠŸèƒ½ï¼šç›¸æ¯”äº`WebSocket`ï¼Œ`EventSource`æä¾›çš„åŠŸèƒ½è¾ƒä¸ºæœ‰é™ï¼Œä»…é™äºæ¥æ”¶æœåŠ¡å™¨å‘é€çš„äº‹ä»¶ã€‚\n\n**WebSocket**:\n\n- ä¼˜åŠ¿ï¼š\n  - åŒå‘é€šä¿¡ï¼šWebSocketæ”¯æŒåŒå‘é€šä¿¡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥å½¼æ­¤å‘é€æ•°æ®ã€‚\n  - å®æ—¶æ€§ï¼šWebSocketæä¾›äº†æ›´ä½çš„å»¶è¿Ÿå’Œæ›´å¿«çš„æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œé€‚ç”¨äºå®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨åœºæ™¯ã€‚\n  - ä¸°å¯Œçš„åŠŸèƒ½ï¼šWebSocketæä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°æ®å¸§çš„è‡ªå®šä¹‰å’ŒäºŒè¿›åˆ¶æ•°æ®çš„ä¼ è¾“ç­‰ã€‚\n- åŠ£åŠ¿ï¼š\n  - å¤æ‚æ€§ï¼š`WebSocket API`ç›¸å¯¹äº`EventSource`æ›´ä¸ºå¤æ‚ï¼Œä½¿ç”¨èµ·æ¥å¯èƒ½éœ€è¦æ›´å¤šçš„ä»£ç å’Œç†è§£ã€‚\n  - éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼šä½¿ç”¨`WebSocket`éœ€è¦æœåŠ¡å™¨ç«¯å®ç°å¯¹åº”çš„WebSocketåè®®ï¼Œè€Œ`EventSource`åªéœ€è¦æœåŠ¡å™¨ç«¯æ”¯æŒå‘é€äº‹ä»¶å³å¯ã€‚\n  - å…¼å®¹æ€§ï¼šç›¸å¯¹äº`EventSource`ï¼Œ`WebSocket`åœ¨æŸäº›è¾ƒæ—§çš„æµè§ˆå™¨æˆ–ç½‘ç»œç¯å¢ƒä¸­çš„æ”¯æŒå¯èƒ½ä¸å¤Ÿå¹¿æ³›ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œ`EventSource` é€‚ç”¨äºæœåŠ¡å™¨ä¸»åŠ¨æ¨é€äº‹ä»¶ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åœ¨ä¿æŒé•¿æœŸè¿æ¥å’Œæ¥æ”¶äº‹ä»¶æµæ—¶è¡¨ç°è‰¯å¥½ã€‚ `WebSocket` é€‚ç”¨äºéœ€è¦å®æ—¶åŒå‘é€šä¿¡å’Œæ›´ä¸°å¯ŒåŠŸèƒ½çš„åœºæ™¯ï¼Œä½†éœ€è¦æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¯æŒ `WebSocket` åè®®ï¼Œé€‰æ‹©ä½¿ç”¨å“ªç§æŠ€æœ¯åº”åŸºäºå…·ä½“éœ€æ±‚å’Œåº”ç”¨åœºæ™¯è¿›è¡Œè¯„ä¼°ã€‚\n\n## ä½¿ç”¨\n\næœåŠ¡ç«¯ï¼š\n\n```js\nconst http = require('http');\nconst cors = require('cors');  // å¼•å…¥ cors åº“\n\nconst server = http.createServer((req, res) => {\n  if (req.url === '/events') {\n    res.writeHead(200, {\n      'Content-Type': 'text/event-stream',\n      'Cache-Control': 'no-cache',\n      'Connection': 'keep-alive',\n      'Access-Control-Allow-Origin': '*',  // å…è®¸æ¥è‡ªä»»ä½•åŸŸçš„è¯·æ±‚\n    });\n\n    let count = 0;\n\n    const interval = setInterval(() => {\n      const data = `data: ${JSON.stringify({ message: `Hello, EventSource! ${count}` })}\\n\\n`;\n      res.write(data);\n      count++;\n\n      // if (0) {\n      //   clearInterval(interval);\n      //   res.end();\n      // }\n    }, 10);\n  } else {\n    res.writeHead(404);\n    res.end();\n  }\n});\n\nserver.listen(3000, () => {\n  console.log('Server is running on http://localhost:3000');\n});\n```\n\nå®¢æˆ·ç«¯ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>EventSource Example</title>\n</head>\n<body>\n<div id=\"output\"></div>\n\n<script>\n  const outputElement = document.getElementById('output');\n\n  const eventSource = new EventSource('http://127.0.0.1:3000/events');\n\n  eventSource.onmessage = (event) => {\n    const data = JSON.parse(event.data);\n    outputElement.innerHTML = `Received: ${data.message}`;\n  };\n\n  eventSource.onerror = (error) => {\n    console.error('EventSource failed:', error);\n    eventSource.close();\n  };\n</script>\n</body>\n</html>\n```\n\n","tags":["å‰ç«¯","eventStream"],"categories":["javaå…¨æ ˆ"]},{"title":"20230814å·¥ä½œè®°å½•","url":"/2023/08/14/20230814å·¥ä½œè®°å½•/","content":"\n## é—®é¢˜\n\nåœ¨å¯¹nginxè¿›è¡Œhttpsé…ç½®æ—¶ï¼Œåœ¨æˆ‘è®¤ä¸ºä¸€åˆ‡é…ç½®éƒ½æˆåŠŸäº†ï¼Œä½†æ˜¯åœ¨æµè§ˆå™¨è®¿é—®åŸŸåå‡ºç°ç™½å±ï¼Œåˆ·æ–°å’Œæ¸…ç©ºç¼“å­˜éƒ½æ²¡æœ‰æ•ˆæœï¼Œç„¶ååœ¨æœåŠ¡å™¨ä¸­æŸ¥çœ‹nginxçš„æ—¥å¿—ï¼Œå‘ç°æŠ¥é”™æç¤º`failed (28: No space left on device)`ï¼Œçœ‹æ„æ€æ˜¯æœåŠ¡å™¨ç£ç›˜å æ»¡äº†ã€‚ç„¶åä½¿ç”¨`df`è¿›è¡ŒæŸ¥çœ‹ï¼Œå‘ç°ç£ç›˜è¢«ä½¿ç”¨`100%`ï¼Œæˆ‘æƒ³ç€æœåŠ¡å™¨ä¸Šä¹Ÿæ²¡è·‘å•¥ï¼Œæ€ä¹ˆçªç„¶å°±æ»¡äº†ã€‚ç„¶åä½¿ç”¨`du`æŸ¥çœ‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå ç”¨é‚£ä¹ˆé«˜ï¼Œå‘ç°æ˜¯ä¹‹å‰ä¸€ä¸ªjavaç¨‹åºï¼Œå¼€ç€`debug`åœ¨è¿è¡Œï¼Œè¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶200å¤šä¸ªgï¼Œç„¶ååˆ æ‰æ—¥å¿—é‡å¯æœåŠ¡ã€‚åç»­å¯¹æ—¥å¿—è¿›è¡Œåˆ†ç‰‡ï¼Œæ–¹ä¾¿å¤„ç†ã€‚\n\n","tags":["å·¥ä½œè®°å½•"],"categories":["å·¥ä½œè®°å½•"]},{"title":"netty","url":"/2023/08/13/netty/","content":"\n## nettyä»‹ç»\n\n`netty`æ˜¯ä¸€ä¸ªä¼˜ç§€çš„NIOæ¡†æ¶ï¼Œå¤§å®¶å¯¹IOçš„ç¬¬ä¸€å°åƒåº”è¯¥æ˜¯æ¯”è¾ƒå¤æ‚ï¼Œå°¤å…¶æ˜¯è·Ÿå„ç§HTTPã€TCPã€UDPåè®®æ‰“äº¤é“ï¼Œä½¿ç”¨èµ·æ¥éå¸¸å¤æ‚ã€‚ä½†æ˜¯`netty`æä¾›äº†å¯¹è¿™äº›åè®®çš„å‹å¥½å°è£…ï¼Œé€šè¿‡`netty`å¯ä»¥å¿«é€Ÿè€Œä¸”ç®€æ´çš„è¿›è¡ŒIOç¼–ç¨‹ã€‚`netty`æ˜“äºå¼€å‘ã€æ€§èƒ½ä¼˜ç§€ï¼ŒåŒæ—¶å…¼å…·ç¨³å®šæ€§å’Œçµæ´»æ€§ã€‚å¦‚æœä½ å¸Œæœ›å¼€å‘é«˜æ€§èƒ½çš„æœåŠ¡ï¼Œé‚£ä¹ˆä½¿ç”¨`netty`æ€»æ˜¯æ²¡é”™çš„ã€‚\n\n`netty`çš„æœ€æ–°ç‰ˆæœ¬æ˜¯4.1.66.Final,äº‹å®ä¸Šè¿™ä¸ªç‰ˆæœ¬æ˜¯å®˜æ–¹æ¨èçš„æœ€ç¨³å®šçš„ç‰ˆæœ¬ï¼Œ`netty`è¿˜æœ‰5.xçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯å®˜æ–¹å¹¶ä¸æ¨èã€‚\n\nå¦‚æœè¦åœ¨mavené¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¯ä»¥å¼•å…¥ä¸‹é¢çš„ä¾èµ–åæ ‡ï¼š\n\n```xml\n<dependency>\n    <groupId>io.netty</groupId>\n    <artifactId>netty-all</artifactId>\n    <version>4.1.66.Final</version>\n</dependency>\n```\n\n**JDK åŸç”Ÿä¹Ÿæœ‰ä¸€å¥—ç½‘ç»œåº”ç”¨ç¨‹åº APIï¼Œä½†æ˜¯å­˜åœ¨ä¸€ç³»åˆ—é—®é¢˜ï¼Œä¸»è¦å¦‚ä¸‹ï¼š**\n\n1ï¼‰NIO çš„ç±»åº“å’Œ API ç¹æ‚ï¼Œä½¿ç”¨éº»çƒ¦ï¼šä½ éœ€è¦ç†Ÿç»ƒæŒæ¡ `Selector`ã€`ServerSocketChannel`ã€`SocketChannel`ã€`ByteBuffer` ç­‰ã€‚\n\n2ï¼‰éœ€è¦å…·å¤‡å…¶ä»–çš„é¢å¤–æŠ€èƒ½åšé“ºå«ï¼šä¾‹å¦‚ç†Ÿæ‚‰ Java å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå› ä¸º NIO ç¼–ç¨‹æ¶‰åŠåˆ° Reactor æ¨¡å¼ï¼Œä½ å¿…é¡»å¯¹å¤šçº¿ç¨‹å’Œç½‘è·¯ç¼–ç¨‹éå¸¸ç†Ÿæ‚‰ï¼Œæ‰èƒ½ç¼–å†™å‡ºé«˜è´¨é‡çš„ NIO ç¨‹åºã€‚\n\n3ï¼‰å¯é æ€§èƒ½åŠ›è¡¥é½ï¼Œå¼€å‘å·¥ä½œé‡å’Œéš¾åº¦éƒ½éå¸¸å¤§ï¼šä¾‹å¦‚å®¢æˆ·ç«¯é¢ä¸´æ–­è¿é‡è¿ã€ç½‘ç»œé—ªæ–­ã€åŠåŒ…è¯»å†™ã€å¤±è´¥ç¼“å­˜ã€ç½‘ç»œæ‹¥å¡å’Œå¼‚å¸¸ç æµçš„å¤„ç†ç­‰ç­‰ã€‚NIO ç¼–ç¨‹çš„ç‰¹ç‚¹æ˜¯åŠŸèƒ½å¼€å‘ç›¸å¯¹å®¹æ˜“ï¼Œä½†æ˜¯å¯é æ€§èƒ½åŠ›è¡¥é½å·¥ä½œé‡å’Œéš¾åº¦éƒ½éå¸¸å¤§ã€‚\n\n4ï¼‰JDK NIO çš„ Bugï¼šä¾‹å¦‚è‡­åæ˜­è‘—çš„ Epoll Bugï¼Œå®ƒä¼šå¯¼è‡´ Selector ç©ºè½®è¯¢ï¼Œæœ€ç»ˆå¯¼è‡´ CPU 100%ã€‚\n\n**Nettyçš„ä¸»è¦ç‰¹ç‚¹æœ‰ï¼š**\n\n1ï¼‰è®¾è®¡ä¼˜é›…ï¼šé€‚ç”¨äºå„ç§ä¼ è¾“ç±»å‹çš„ç»Ÿä¸€ API é˜»å¡å’Œéé˜»å¡ Socketï¼›åŸºäºçµæ´»ä¸”å¯æ‰©å±•çš„äº‹ä»¶æ¨¡å‹ï¼Œå¯ä»¥æ¸…æ™°åœ°åˆ†ç¦»å…³æ³¨ç‚¹ï¼›é«˜åº¦å¯å®šåˆ¶çš„çº¿ç¨‹æ¨¡å‹ - å•çº¿ç¨‹ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹æ± ï¼›çœŸæ­£çš„æ— è¿æ¥æ•°æ®æŠ¥å¥—æ¥å­—æ”¯æŒï¼ˆè‡ª 3.1 èµ·ï¼‰ã€‚\n\n2ï¼‰ä½¿ç”¨æ–¹ä¾¿ï¼šè¯¦ç»†è®°å½•çš„ Javadocï¼Œç”¨æˆ·æŒ‡å—å’Œç¤ºä¾‹ï¼›æ²¡æœ‰å…¶ä»–ä¾èµ–é¡¹ï¼ŒJDK 5ï¼ˆNetty 3.xï¼‰æˆ– 6ï¼ˆNetty 4.xï¼‰å°±è¶³å¤Ÿäº†ã€‚\n\n3ï¼‰é«˜æ€§èƒ½ã€ååé‡æ›´é«˜ï¼šå»¶è¿Ÿæ›´ä½ï¼›å‡å°‘èµ„æºæ¶ˆè€—ï¼›æœ€å°åŒ–ä¸å¿…è¦çš„å†…å­˜å¤åˆ¶ã€‚\n\n4ï¼‰å®‰å…¨ï¼šå®Œæ•´çš„ SSL/TLS å’Œ `StartTLS` æ”¯æŒã€‚\n\n5ï¼‰ç¤¾åŒºæ´»è·ƒã€ä¸æ–­æ›´æ–°ï¼šç¤¾åŒºæ´»è·ƒï¼Œç‰ˆæœ¬è¿­ä»£å‘¨æœŸçŸ­ï¼Œå‘ç°çš„ Bug å¯ä»¥è¢«åŠæ—¶ä¿®å¤ï¼ŒåŒæ—¶ï¼Œæ›´å¤šçš„æ–°åŠŸèƒ½ä¼šè¢«åŠ å…¥ã€‚\n\n`Netty` å¯¹ JDK è‡ªå¸¦çš„ NIO çš„ API è¿›è¡Œäº†å°è£…ï¼Œè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚\n\n## nettyæœåŠ¡å™¨\n\nä»€ä¹ˆå«åšæœåŠ¡å™¨ï¼Ÿèƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡çš„ç¨‹åºå°±å¯ä»¥è¢«ç§°ä½œæ˜¯æœåŠ¡å™¨ã€‚å»ºç«‹æœåŠ¡å™¨æ˜¯æ‰€æœ‰å¯¹å¤–æœåŠ¡çš„ç¬¬ä¸€æ­¥ï¼Œæ€ä¹ˆä½¿ç”¨`netty`å»ºç«‹ä¸€ä¸ªæœåŠ¡å™¨å‘¢ï¼ŸæœåŠ¡å™¨ä¸»è¦è´Ÿè´£å¤„ç†å„ç§æœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œ`netty`æä¾›äº†ä¸€ä¸ª`ChannelInboundHandlerAdapter`çš„ç±»æ¥å¤„ç†è¿™ç±»è¯·æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦ç»§æ‰¿è¿™ä¸ªç±»å³å¯ã€‚\n\nåœ¨NIOä¸­æ¯ä¸ªchanneléƒ½æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ²Ÿé€šçš„é€šé“ã€‚`ChannelInboundHandlerAdapter`å®šä¹‰äº†åœ¨è¿™ä¸ªchannelä¸Šå¯èƒ½å‡ºç°ä¸€äº›äº‹ä»¶å’Œæƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image-20230813213939798](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230813213939798.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œchannelä¸Šå¯ä»¥å‡ºç°å¾ˆå¤šäº‹ä»¶ï¼Œæ¯”å¦‚å»ºç«‹è¿æ¥ï¼Œå…³é—­è¿æ¥ï¼Œè¯»å–æ•°æ®ï¼Œè¯»å–å®Œæˆï¼Œæ³¨å†Œï¼Œå–æ¶ˆæ³¨å†Œç­‰ã€‚è¿™äº›æ–¹æ³•éƒ½æ˜¯å¯ä»¥è¢«é‡å†™çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿`ChannelInboundHandlerAdapter`å³å¯ã€‚\n\nè¿™é‡Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª`ServerHandler`ç±»ï¼Œå¹¶é‡å†™`channelRead`å’Œ`exceptionCaught`ä¸¤ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ä»channelä¸­è¯»å–æ¶ˆæ¯ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ˜¯å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚\n\n```java\n@Slf4j\npublic class ServerHandler extends ChannelInboundHandlerAdapter {\n\n    /**\n     * è¯»å–æ¶ˆæ¯\n     */\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n        ByteBuf in = (ByteBuf) msg;\n        try {\n            log.info(\"æ”¶åˆ°æ¶ˆæ¯:{}\",in.toString(CharsetUtil.US_ASCII));\n        }finally {\n            ReferenceCountUtil.release(msg);\n        }\n    }\n\n    /**\n     * å¼‚å¸¸å¤„ç†\n     * @param ctx\n     * @param cause\n     * @throws Exception\n     */\n    @Override\n    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {\n        log.error(\"å‡ºç°å¼‚å¸¸ï¼š\",cause);\n        ctx.close();\n    }\n}\n```\n\nä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ”¶åˆ°æ¶ˆæ¯åè°ƒç”¨`release()`æ–¹æ³•å°†å…¶é‡Šæ”¾ï¼Œå¹¶ä¸è¿›è¡Œå®é™…çš„å¤„ç†ã€‚è°ƒç”¨releaseæ–¹æ³•æ˜¯åœ¨æ¶ˆæ¯ä½¿ç”¨å®Œæˆä¹‹åå¸¸ç”¨çš„åšæ³•ã€‚ä¸Šé¢ä»£ç å°†msgè¿›è¡Œäº†`ByteBuf`çš„å¼ºåˆ¶è½¬æ¢ï¼Œå¦‚æœå¹¶ä¸æƒ³è¿›è¡Œè½¬æ¢çš„è¯ï¼Œå¯ä»¥ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼š\n\n```java\ntry {\n    // æ¶ˆæ¯å¤„ç†\n} finally {\n    ReferenceCountUtil.release(msg);\n}\n```\n\nåœ¨å¼‚å¸¸å¤„ç†æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯ï¼Œå¹¶å…³é—­å¼‚å¸¸çš„ä¸Šä¸‹æ–‡ã€‚\n\næœ‰äº†Handler,æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªServerç±»ç”¨æ¥ä½¿ç”¨Handleråˆ›å»ºchannelå’Œæ¥æ”¶æ¶ˆæ¯ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹`netty`çš„æ¶ˆæ¯å¤„ç†æµç¨‹ã€‚\n\nåœ¨`netty`ä¸­ï¼Œå¯¹IOè¿›è¡Œå¤„ç†æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹çš„event loopæ¥å®ç°çš„ã€‚`netty`ä¸­çš„`EventLoopGroup`å°±æ˜¯è¿™äº›event loopçš„æŠ½è±¡ç±»ã€‚\n\næˆ‘ä»¬æ¥è§‚å¯Ÿä¸€ä¸‹`EventLoopGroup`çš„ç±»ç»“æ„ã€‚\n\n![image-20230813214925412](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230813214925412.png)\n\nå®ƒç»§æ‰¿è‡ª`EventExecutorGroup`\n\n![image-20230813215134770](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230813215134770.png)\n\nå…¶ä¸­`EventExecutorGroup`ç»§æ‰¿è‡ªJDKè‡ªå¸¦çš„`ScheduledExecutorService`ã€‚\n\næ‰€ä»¥`EventLoopGroup`æœ¬è´¨æ˜¯æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± æœåŠ¡ï¼Œä¹‹æ‰€ä»¥å«åšGroupï¼Œæ˜¯å› ä¸ºå®ƒé‡Œé¢åŒ…å«äº†å¾ˆå¤šä¸ª`EventLoop`,å¯ä»¥é€šè¿‡è°ƒç”¨nextæ–¹æ³•å¯¹`EventLoop`è¿›è¡Œéå†ã€‚\n\n`EventLoop`æ˜¯ç”¨æ¥å¤„ç†æ³¨å†Œåˆ°è¯¥`EventLoop`çš„channelä¸­çš„IOä¿¡æ¯ï¼Œä¸€ä¸ª`EventLoop`å°±æ˜¯ä¸€ä¸ªExecutor,é€šè¿‡ä¸æ–­çš„æäº¤ä»»åŠ¡è¿›è¡Œæ‰§è¡Œã€‚å½“ç„¶ï¼Œä¸€ä¸ª`EventLoop`å¯ä»¥æ³¨å†Œå¤šä¸ªchannelï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸è¿™æ ·å¤„ç†ã€‚\n\n`EventLoopGroup`å°†å¤šä¸ª`EventLoop`ç»„æˆäº†ä¸€ä¸ªGroupï¼Œé€šè¿‡å…¶ä¸­çš„nextæ–¹æ³•ï¼Œå¯ä»¥å¯¹Groupä¸­çš„`EventLoop`è¿›è¡Œéå†ã€‚å¦å¤–`EventLoopGroup`æä¾›äº†ä¸€äº›registeræ–¹æ³•ï¼Œå°†Channelæ³¨å†Œåˆ°å½“å‰çš„`EventLoop`ä¸­ã€‚\n\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œ`register`çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ª`ChannelFuture`ï¼Œ`Future`å¤§å®¶éƒ½å¾ˆæ¸…æ¥šï¼Œå¯ä»¥ç”¨æ¥è·å¾—å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼ŒåŒæ ·çš„`ChannelFuture`ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ç»“æœæ‰¿è½½å™¨ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨`sync`æ–¹æ³•æ¥é˜»å¡`Future`ç›´åˆ°è·å¾—æ‰§è¡Œç»“æœã€‚\n\nå¯ä»¥çœ‹åˆ°ï¼Œ`register`æ–¹æ³•è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ª`ChannelPromise`å¯¹è±¡ï¼Œ`ChannelPromise`å®ƒåŒæ—¶æ˜¯`ChannelFuture`å’Œ`Promise`çš„å­ç±»ï¼Œ`Promise`åˆæ˜¯`Future`çš„å­ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯ä»¥æ§åˆ¶`Future`çŠ¶æ€çš„`Future`ã€‚\n\n`EventLoopGroup`æœ‰å¾ˆå¤šå­ç±»çš„å®ç°ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨`NioEventLoopGroup`ï¼Œ`Nio`ä½¿ç”¨`Selector`å¯¹`channel`è¿›è¡Œé€‰æ‹©ã€‚è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§æ˜¯`NioEventLoopGroup`å¯ä»¥æ·»åŠ å­`EventLoopGroup`ã€‚\n\nå¯¹äºNIOæœåŠ¡å™¨ç¨‹åºæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ª`Group`ï¼Œä¸€ä¸ª`group`å«åš`bossGroup`ï¼Œä¸»è¦ç”¨æ¥ç›‘æ§è¿æ¥ï¼Œä¸€ä¸ª`group`å«åš`worker group`ï¼Œç”¨æ¥å¤„ç†è¢«`boss accept`çš„è¿æ¥ï¼Œè¿™äº›è¿æ¥éœ€è¦è¢«æ³¨å†Œåˆ°`worker group`ä¸­æ‰èƒ½è¿›è¡Œå¤„ç†ã€‚\n\nå°†è¿™ä¸¤ä¸ª`group`ä¼ ç»™`ServerBootstrap`ï¼Œå°±å¯ä»¥ä»`ServerBootstrap`å¯åŠ¨æœåŠ¡äº†ï¼Œç›¸åº”çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic static void main(String[] args) {\n        //å»ºç«‹ä¸¤ä¸ªEventloopGroupç”¨æ¥å¤„ç†è¿æ¥å’Œæ¶ˆæ¯\n        EventLoopGroup bossGroup = new NioEventLoopGroup();\n        EventLoopGroup workerGroup = new NioEventLoopGroup();\n        try {\n            ServerBootstrap b = new ServerBootstrap();\n            b.group(bossGroup, workerGroup)\n                    .channel(NioServerSocketChannel.class)\n                    .childHandler(new ChannelInitializer<SocketChannel>() {\n                        @Override\n                        public void initChannel(SocketChannel ch) throws Exception {\n                            ch.pipeline().addLast(new ServerHandler());\n                        }\n                    })\n                    .option(ChannelOption.SO_BACKLOG, 128)\n                    .childOption(ChannelOption.SO_KEEPALIVE, true);\n\n            // ç»‘å®šç«¯å£å¹¶å¼€å§‹æ¥æ”¶è¿æ¥\n            ChannelFuture f = b.bind(9900).sync();\n\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n```\n\næˆ‘ä»¬æœ€å¼€å§‹åˆ›å»ºçš„`FirstServerHandler`æœ€ä½œä¸º`childHandler`çš„å¤„ç†å™¨åœ¨åˆå§‹åŒ–Channelçš„æ—¶å€™å°±è¢«æ·»åŠ è¿›å»äº†ã€‚\n\nè¿™æ ·ï¼Œå½“æœ‰æ–°å»ºç«‹çš„channelæ—¶ï¼Œ`FirstServerHandler`å°±ä¼šè¢«ç”¨æ¥å¤„ç†è¯¥channelçš„æ•°æ®ã€‚\n\nä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†ä¸€äº›`ChannelOption`ï¼Œç”¨äºå¯¹channelçš„ä¸€äº›å±æ€§è¿›è¡Œè®¾å®šã€‚\n\næœ€åï¼Œæˆ‘ä»¬ç»‘å®šäº†å¯¹åº”çš„ç«¯å£ï¼Œå¹¶å¯åŠ¨æœåŠ¡å™¨ã€‚\n\n## nettyå®¢æˆ·ç«¯\n\nä¸Šé¢æˆ‘ä»¬å·²ç»å†™å¥½äº†æœåŠ¡å™¨ï¼Œå¹¶å°†å…¶å¯åŠ¨ï¼Œç°åœ¨è¿˜éœ€è¦ä¸€ä¸ªå®¢æˆ·ç«¯å’Œå…¶è¿›è¡Œäº¤äº’ã€‚\n\nå¦‚æœä¸æƒ³å†™ä»£ç çš„è¯ï¼Œå¯ä»¥ç›´æ¥telnet localhost 8000å’Œserverç«¯è¿›è¡Œäº¤äº’å³å¯ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨nettyçš„APIæ¥æ„å»ºä¸€ä¸ªclientå’ŒServerè¿›è¡Œäº¤äº’ã€‚\n\næ„å»ºnettyå®¢æˆ·ç«¯çš„æµç¨‹å’Œæ„å»ºnetty serverç«¯çš„æµç¨‹åŸºæœ¬ä¸€è‡´ã€‚é¦–å…ˆä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªHandlerç”¨æ¥å¤„ç†å…·ä½“çš„æ¶ˆæ¯ï¼ŒåŒæ ·ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿç»§æ‰¿`ChannelInboundHandlerAdapter`ã€‚\n\nä¸Šä¸€èŠ‚è®²åˆ°äº†`ChannelInboundHandlerAdapter`é‡Œé¢æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ä¸šåŠ¡çš„éœ€è¦è¿›è¡Œé‡å†™ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›å½“Channel activeçš„æ—¶å€™å‘serverå‘é€ä¸€ä¸ªæ¶ˆæ¯ã€‚é‚£ä¹ˆå°±éœ€è¦é‡å†™`channelActive`æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å¯¹å¼‚å¸¸è¿›è¡Œä¸€äº›å¤„ç†ï¼Œæ‰€ä»¥è¿˜éœ€è¦é‡å†™`exceptionCaught`æ–¹æ³•ã€‚å¦‚æœä½ æƒ³åœ¨channelè¯»å–æ¶ˆæ¯çš„æ—¶å€™è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥é‡å†™`channelRead`æ–¹æ³•ã€‚\n\nåˆ›å»ºçš„`FirstClientHandler`ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n@Slf4j\npublic class FirstClientHandler extends ChannelInboundHandlerAdapter {\n\n    private ByteBuf content;\n    private ChannelHandlerContext ctx;\n\n    @Override\n    public void channelActive(ChannelHandlerContext ctx) {\n        this.ctx = ctx;\n        content = ctx.alloc().directBuffer(256).writeBytes(\"Hello World\".getBytes(StandardCharsets.UTF_8));\n        // å‘é€æ¶ˆæ¯\n        sayHello();\n    }\n\n    @Override\n    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n        // å¼‚å¸¸å¤„ç†\n        log.error(\"å‡ºç°å¼‚å¸¸\",cause);\n        ctx.close();\n    }\n\n    private void sayHello() {\n        // å‘æœåŠ¡å™¨è¾“å‡ºæ¶ˆæ¯\n        ctx.writeAndFlush(content.retain());\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä»`ChannelHandlerContext`ç”³è¯·äº†ä¸€ä¸ª`ByteBuff`ï¼Œç„¶åè°ƒç”¨å®ƒçš„`writeBytes`æ–¹æ³•ï¼Œå†™å…¥è¦ä¼ è¾“çš„æ•°æ®ã€‚æœ€åè°ƒç”¨`ctx`çš„`writeAndFlush`æ–¹æ³•ï¼Œå‘æœåŠ¡å™¨è¾“å‡ºæ¶ˆæ¯ã€‚\n\næ¥ä¸‹æ¥å°±æ˜¯å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡äº†ï¼Œåœ¨æœåŠ¡ç«¯æˆ‘ä»¬å»ºäº†ä¸¤ä¸ª`NioEventLoopGroup`ï¼Œæ˜¯å…¼é¡¾äº†channelçš„é€‰æ‹©å’Œchannelä¸­æ¶ˆæ¯çš„è¯»å–ä¸¤éƒ¨åˆ†ã€‚å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå¹¶ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œåªéœ€è¦ä¸€ä¸ª`NioEventLoopGroup`å³å¯ã€‚\n\næœåŠ¡å™¨ç«¯ä½¿ç”¨`ServerBootstrap`æ¥å¯åŠ¨æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯Bootstrapï¼Œå…¶å¯åŠ¨çš„ä¸šåŠ¡é€»è¾‘åŸºæœ¬å’ŒæœåŠ¡å™¨å¯åŠ¨ä¸€è‡´ï¼š\n\n```java\nEventLoopGroup group = new NioEventLoopGroup();\ntry {\n    Bootstrap b = new Bootstrap();\n    b.group(group)\n     .channel(NioSocketChannel.class)\n     .handler(new ChannelInitializer<SocketChannel>() {\n         @Override\n         protected void initChannel(SocketChannel ch) throws Exception {\n             ChannelPipeline p = ch.pipeline();\n             p.addLast(new FirstClientHandler());\n         }\n     });\n\n    // è¿æ¥æœåŠ¡å™¨\n    ChannelFuture f = b.connect(HOST, PORT).sync();\n```\n\n## æ€»ç»“\n\nä¸€ä¸ªå®Œæ•´çš„æœåŠ¡å™¨ã€å®¢æˆ·ç«¯çš„ä¾‹å­å°±å®Œæˆäº†ã€‚æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹nettyçš„å·¥ä½œæµç¨‹ï¼Œå¯¹äºæœåŠ¡å™¨ç«¯ï¼Œé¦–å…ˆå»ºç«‹handlerç”¨äºå¯¹æ¶ˆæ¯çš„å®é™…å¤„ç†ï¼Œç„¶åä½¿ç”¨`ServerBootstrap`å¯¹`EventLoop`è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»‘å®šç«¯å£å¯åŠ¨ã€‚å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼ŒåŒæ ·éœ€è¦å»ºç«‹handlerå¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œç„¶åè°ƒç”¨`Bootstrap`å¯¹`EventLoop`è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»‘å®šç«¯å£å¯åŠ¨ã€‚\n","tags":["netty"],"categories":["javaå…¨æ ˆ"]},{"title":"esçš„ä½¿ç”¨","url":"/2023/08/12/esçš„ä½¿ç”¨/","content":"\n## æ–°å»ºç´¢å¼•index\n\n```json\nPUT /movies\n{\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"ik_max_word\",\n        \"search_analyzer\": \"ik_smart\"\n      },\n      \"year\": {\n        \"type\": \"date\",\n        \"format\": \"yyyy\"\n      },\n      \"type\": {\n        \"type\": \"text\",\n        \"index\": false\n      },\n      \"star\": {\n        \"type\": \"float\",\n        \"fields\": {\n          \"keyword\": {\n            \"type\": \"keyword\"\n          }\n        }\n      },\n      \"director\": {\n        \"type\": \"keyword\"\n      }\n    }\n  },\n  \"settings\": {\n    \"index\": {\n      \"number_of_shards\": 5,\n      \"number_of_replicas\": 1\n    }\n  }\n}\n```\n\n- å…¶ä¸­typeå­—æ®µçš„indexä¸ºfalseï¼Œé‚£ä¹ˆtypeè¿™ä¸ªå­—æ®µæ˜¯ä¸ä¼šè¢«åˆ†è¯è¢«ç´¢å¼•çš„ï¼Œä¸èƒ½ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ã€‚\n- number_of_shardsï¼šæ¯ä¸ªç´¢å¼•çš„ä¸»åˆ†ç‰‡æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 5 ã€‚è¿™ä¸ªé…ç½®åœ¨ç´¢å¼•åˆ›å»ºåä¸èƒ½ä¿®æ”¹ã€‚\n- number_of_replicasï¼šæ¯ä¸ªä¸»åˆ†ç‰‡çš„å‰¯æœ¬æ•°ï¼Œé»˜è®¤å€¼æ˜¯ 1 ã€‚å¯¹äºæ´»åŠ¨çš„ç´¢å¼•åº“ï¼Œè¿™ä¸ªé…ç½®å¯ä»¥éšæ—¶ä¿®æ”¹ã€‚\n- analyzerã€search_analyzerESå†…ç½®çš„åˆ†è¯æ–¹å¼æœ‰ï¼šik_max_wordæœ€ç»†ç²’åº¦çš„åˆ†è¯ï¼Œik_smartæœ€ç²—ç²’åº¦çš„åˆ†è¯\n\n## æ’å…¥æ•°æ®\n\n```json\nPOST /movies/_doc/\n{\n  \"title\": \"AAAAAAAAAAAAAAAAAAAA\",\n  \"year\": \"2020\",\n  \"type\": \"å‰§æƒ…\",\n  \"star\": 5.2,\n  \"director\": \"BBBBB\"\n}\n```\n\nå½“ç„¶ï¼Œæ·»åŠ æ–‡æ¡£æ—¶ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®š idï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šé»˜è®¤ç»™å‡ºä¸€ä¸ª idï¼Œå¦‚æœä¸æŒ‡å®š idï¼Œåˆ™éœ€è¦ä½¿ç”¨ POST è¯·æ±‚ï¼Œè€Œä¸èƒ½ä½¿ç”¨ PUT è¯·æ±‚ã€‚\n\n### ä½¿ç”¨ curl å‘½ä»¤åˆ›å»º\n\nåˆ›å»ºæ–‡æ¡£ï¼ŒæŒ‡å®šIdï¼Œå¦‚æœidå·²ç»å­˜åœ¨ï¼ŒæŠ¥é”™ï¼š\n\n```rust\ncurl -H \"Content-Type:application/json\" -XPUT 'http://10.135.73.73:9201/index_name/_doc/1?pretty' -d \\\n'{ \n    \"name\": \"xuwl\", \n    \"age\": 18, \n    \"job\": \"Linux\" \n }'\n```\n\n##### å‘½ä»¤ä»‹ç»:\n\n```bash\n-Hï¼šæŒ‡å®šå†…å®¹ç±»å‹\n-Xï¼šæŒ‡å®šhttpè¯·æ±‚æ–¹å¼ï¼Œè¿™é‡Œä¸ºPUTä¸Šä¼ æ–¹å¼\nhttp://10.135.73.73:9201ï¼šæŒ‡å®šä¸€å°esæœåŠ¡å™¨å¯¹å¤–çš„httpç«¯å£\n/index_nameï¼šæ–‡æ¡£çš„ç´¢å¼•åç§°,å¿…é¡»å°å†™\n/type_nameï¼šæ–‡æ¡£çš„ç±»å‹åç§°,7.0å¼€å§‹ä¸€ä¸ªç´¢å¼•åªèƒ½åˆ›å»ºä¸€ä¸ªType ï¼Œå³ï¼Œâ€œ_docâ€\n/1ï¼šæ–‡æ¡£çš„IDç¼–å·\n?prettyï¼šäººæ€§åŒ–åˆ›å»ºç´¢å¼•\n-dï¼šæŒ‡å®šä½¿ç”¨JSONæ–¹å¼æ¥æ’°å†™ä¸Šä¼ æ–‡æ¡£\n{ \"name\": \"xuwl\", \"age\": 18, \"job\": \"Linux\" }'ï¼šä½¿ç”¨JSONæ ¼å¼æ¥æ’°å†™ä¸Šä¼ æ–‡æ¡£å†…å®¹\n```\n\n#### ç´¢å¼•åˆå§‹åŒ–ï¼Œåˆ›å»ºç´¢å¼•ä¹‹å‰å¯ä»¥å¯¹ç´¢å¼•åšåˆå§‹åŒ–æ“ä½œ\n\n```rust\ncurl -XPUT 'http://master:9200/test/' -d \\\n'{\n    \"settings\":{\n        \"index\":{\n            \"number_of_shards\":5\n            \"number_of_replicas\":1\n        }\n    }\n}'\n```\n\né€‚å½“çš„æå‡åˆ†ç‰‡æ•°é‡å¯ä»¥æå‡å»ºç«‹ç´¢å¼•çš„é€Ÿåº¦ï¼›\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼šä¸€ä¸ªç´¢å¼•åº“å»ºç«‹5-20ä¸ªåˆ†ç‰‡æ˜¯æœ€åˆé€‚çš„ï¼›\n\næ³¨æ„ï¼šå¦‚æœåˆ†ç‰‡è¿‡å°‘æˆ–è€…è¿‡å¤šï¼Œéƒ½ä¼šé™ä½æ£€ç´¢çš„é€Ÿåº¦\n\nåˆ†ç‰‡æ•°è¿‡å¤šä¼šå¯¼è‡´ï¼š\n\n- ä¼šå¯¼è‡´æ‰“å¼€æ¯”è¾ƒå¤šçš„æ–‡ä»¶\n- åˆ†ç‰‡æ˜¯å­˜å‚¨åœ¨ä¸åŒæœºå™¨ä¸Šçš„ï¼Œåˆ†ç‰‡æ•°è¶Šå¤šï¼Œæœºå™¨ä¹‹é—´çš„äº¤äº’ä¹Ÿå°±è¶Šå¤šï¼›\n\nåˆ†ç‰‡æ•°å¤ªå°‘å¯¼è‡´ï¼š\n\n- å•ä¸ªåˆ†ç‰‡ç´¢å¼•è¿‡å¤§ï¼Œé™ä½æ•´ä½“çš„æ£€ç´¢é€Ÿç‡\n\nå»ºè®®ï¼š\n\n- å°†å•ä¸ªåˆ†ç‰‡å­˜å‚¨å­˜å‚¨ç´¢å¼•æ•°æ®çš„å¤§å°æ§åˆ¶åœ¨20Gå·¦å³ï¼›ç»å¯¹ä¸è¦è¶…è¿‡50G ï¼Œ å¦åˆ™æ€§èƒ½å¾ˆå·®\n\n**æœ€ç»ˆåˆ†ç‰‡æ•°é‡ = æ•°æ®æ€»é‡/20G**\n\n#### æŸ¥çœ‹ç´¢å¼•\n\n```rust\ncurl -XGET 'http://10.135.73.73:9201/_cat/indices?v'\n```\n\n#### æŸ¥çœ‹åˆ†ç‰‡\n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ†ç‰‡å­˜å‚¨çš„å¯¹åº”çš„åœ°å€ï¼Œæ²¡æœ‰å‡ºç°æˆ‘ä»¬çš„masterèŠ‚ç‚¹åœ°å€ï¼Œä¹Ÿæ²¡æœ‰å‡ºç°æˆ‘ä»¬çš„clientèŠ‚ç‚¹ï¼Œä»…ä»…åªæœ‰æˆ‘ä»¬æ‰€è®¾ç½®çš„æ•°æ®å­˜å‚¨èŠ‚ç‚¹ï¼Œ\né¢ï¼Œä¸‹é¢è¿˜æœ‰10.150.55.95æ˜¯æˆ‘ä»¬çš„masterèŠ‚ç‚¹çš„åŸå› ï¼Œæ˜¯å› ä¸ºæˆ‘æŠŠnode.dataè®¾ç½®ä¸ºäº†true..... æˆ‘é”™äº†ï¼Œ\nå¤§å®¶è¦ç›¸ä¿¡æˆ‘ï¼Œåªè¦æŠŠnode.dataè®¾ç½®ä¸ºfalseå®ƒè‚¯å®šæ˜¯ä¸ä¼šå­˜å‚¨æ•°æ®çš„ã€‚ã€‚ã€‚\n\n```rust\ncurl -XGET 'http://10.135.73.73:9201/_cat/shards?v'\n```\n\n#### PUTå’ŒPOSTçš„ç”¨æ³•åŒºåˆ«\n\n- PUTï¼Œ DELETEæ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚ æ‰€è°“å¹‚ç­‰æ˜¯æŒ‡ä¸ç®¡è¿›è¡Œå¤šå°‘æ¬¡æ“ä½œï¼Œç»“æœéƒ½ä¸€æ ·ã€‚ æ¯”å¦‚æˆ‘ç”¨PUTä¿®æ”¹ä¸€ç¯‡æ–‡ç« ï¼Œ ç„¶ååœ¨åšåŒæ ·çš„æ“ä½œï¼Œæ¯æ¬¡æ“ä½œåçš„ç»“æœå¹¶æ²¡æœ‰ä¸åŒï¼Œ DELETEä¹Ÿæ˜¯ä¸€æ ·ã€‚\n- POSTæ“ä½œä¸æ˜¯å¹‚ç­‰çš„ï¼Œ æ¯”å¦‚å¸¸è§çš„POSTé‡å¤åŠ è½½é—®é¢˜ï¼š å½“æˆ‘ä»¬å¤šæ¬¡å‘å‡ºåŒæ ·çš„POSTè¯·æ±‚åï¼Œ å…¶ç»“æœæ˜¯åˆ›å»ºå‡ºäº†è‹¥å¹²çš„èµ„æºã€‚\n- è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œ åˆ›å»ºæ“ä½œå¯ä»¥ä½¿ç”¨POSTï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨PUTï¼Œ åŒºåˆ«åœ¨äºPOSTæ˜¯ä½œç”¨åœ¨ä¸€ä¸ªé›†åˆèµ„æºä¹‹ä¸Šçš„ï¼ˆ`/articles`ï¼‰ ï¼Œè€ŒPUTæ“ä½œæ˜¯ä½œç”¨åœ¨ä¸€ä¸ªå…·ä½“èµ„æºä¹‹ä¸Šçš„ï¼ˆ/articles/123ï¼‰ ï¼Œ æ¯”å¦‚è¯´å¾ˆå¤šèµ„æºä½¿ç”¨æ•°æ®åº“è‡ªå¢ä¸»é”®ä½œä¸ºæ ‡è¯†ä¿¡æ¯ï¼Œ è€Œåˆ›å»ºçš„èµ„æºçš„æ ‡è¯†ä¿¡æ¯åˆ°åº•æ˜¯ä»€ä¹ˆåªèƒ½ç”±æœåŠ¡ç«¯æä¾›ï¼Œ è¿™ä¸ªæ—¶å€™å°±å¿…é¡»ä½¿ç”¨POSTã€‚\n\n## åˆ é™¤æ•°æ®\n\n```json\n# DELETE /åº“å/_doc/æ–‡æ¡£id , æ ¹æ®æ–‡æ¡£idè¿›è¡Œåˆ é™¤\nDELETE /movies/_doc/1\n\n# æ ¹æ®æŸ¥è¯¢è¯­å¥åˆ é™¤\nPOST /my-index/_delete_by_query\n{\n  \"query\": {\n    \"match\": {\n      \"user.id\": \"elkbee\"\n    }\n  }\n}\n#åˆ é™¤æ‰€æœ‰æ•°æ®\nPOST /my-index/_delete_by_query\n{\n  \"query\": {\n    \"match_all\": {}\n  }\n}\n```\n\n## æ›´æ–°æ•°æ®\n\n### ä½¿ç”¨putæ›´æ–°\n\nPUT åœ¨ restFull é‡Œé¢ä»£è¡¨ä¸¤ä¸ªæ„æ€: add å’Œ update, å½“æ²¡æœ‰idæ—¶, æ–°å¢, å½“æœ‰idæ—¶ä¿®æ”¹ã€‚åœ¨è¿™é‡Œ, ä¹Ÿæ˜¯ä¸€æ ·çš„. å½“æœ‰æŒ‡å®šçš„idæ—¶, ä¿®æ”¹, å½“æ²¡æœ‰æŒ‡å®šçš„idæ—¶, æ–°å¢\n\n```json\nput user/_doc/1\n{\n    \"name\":\"å¤§ä½¬\",\n    \"age\":55\n}\n```\n\n### ä½¿ç”¨postæ›´æ–°\n\nPOST /åº“å/_doc/æ–‡æ¡£idï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§è¦†ç›–å¼æ–¹å¼, ç»“æœå’Œ PUT æ˜¯ä¸€æ ·çš„. åŒæ ·çš„, postä¹Ÿå¯ä»¥æ–°å¢æ•°æ®.\n\nPOST /åº“å/_update/æ–‡æ¡£idï¼Œéè¦†ç›–å¼æ–¹å¼, ä»–åªæœ‰ä¿®æ”¹çš„åŠŸèƒ½, æ²¡æœ‰æ–°å¢æ–‡æ¡£çš„åŠŸèƒ½\n\nä¸”**æºå¸¦_updateå‚æ•°**ä¹‹å**ä¼šæ¯”è¾ƒæ–°æ•°æ®å’ŒåŸæ•°æ®**ï¼Œå¦‚æœæ–°æ•°æ®å’ŒåŸæ•°æ®å®Œå…¨ç›¸åŒï¼Œåˆ™ä¸ä¼šè¿›è¡Œæ›´æ–°ï¼Œä¸ä¼šå½±å“åºåˆ—å·ï¼Œç‰ˆæœ¬å·ç­‰ä¿¡æ¯ã€‚\nä¸”æºå¸¦_updateå‚æ•°åï¼Œæ›´æ–°å†…å®¹å¿…é¡»æ”¾åœ¨docä¸­ï¼Œå¦‚\n\n```java\n\"doc\":{\n\t\"name\":\"dzWatching\",\n\t\"age\":21\n}\n```\n\n\n\n## æŸ¥è¯¢æ•°æ®\n\n### æŸ¥è¯¢æ‰€æœ‰æ•°æ®\n\n```text\nGET /movies/_search\n{\n    \"query\":{\n        \"match_all\":{\n        }\n    }\n}\n```\n\n### åŒ¹é…æŸ¥è¯¢(match)\n\n```text\n# æŸ¥çœ‹title å­—æ®µæœ‰\"å¿«ä¹\"çš„\nGET /movies/_search\n{\n    \"query\":{\n        \"match\": {\n          \"title\": \"å¿«ä¹\"\n        }\n    }\n}\n# æŸ¥çœ‹æ‰€æœ‰å­—æ®µæœ‰\"å¿«ä¹\"\nbody = {\n    \"query\": {\n        \"multi_match\": {\n            \"query\": \"å¿«ä¹\",\n        }\n    }\n}\n# æŸ¥çœ‹titleå­—æ®µæœ‰\"å¿«\"or\"ä¹\"çš„\nGET /movies/_search\n{\n  \"query\": {\n    \"match\": {\n      \"title\": {\n        \"query\": \"å¿«ä¹\",\n        \"analyzer\": \"standard\"\n      }\n    }\n  }\n}\n```\n\n### å¤šå­—æ®µæŸ¥è¯¢\n\n```text\n# æŸ¥è¯¢ title or type å«æœ‰æ‚¬çš„\nGET /movies/_search/\n{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"æ‚¬\",\n      \"fields\": [\n        \"title\",\n        \"type\"\n      ]\n    }\n  }\n}\n```\n\n### è¯æ¡åŒ¹é…(term)\n\n```text\n# term æŸ¥è¯¢è¢«ç”¨äºç²¾ç¡®å€¼ åŒ¹é…ï¼Œ\n# è¿™äº›ç²¾ç¡®å€¼å¯èƒ½æ˜¯æ•°å­—ã€æ—¶é—´ã€å¸ƒå°”æˆ–è€…é‚£äº›æœªåˆ†è¯çš„å­—ç¬¦ä¸²(keyword)\nGET /movies/_search/\n{\n    \"query\":{\n        \"term\":{\n            \"director\":\"å¼ è‰ºè°‹\"\n        }\n    }\n}\n\n# termåªèƒ½å®Œæ•´å€¼åŒ¹é…ï¼Œè¿™æ ·å°±æŸ¥è¯¢ä¸å‡ºæ¥\nGET /movies/_search/\n{\n    \"query\":{\n        \"term\":{\n            \"director\":\"è‰ºè°‹\"\n        }\n    }\n}\nå¯¹äºæœªåˆ†è¯çš„å­—ç¬¦ä¸²æŸ¥æ‰¾\nGET /movies/_search/\n{\n    \"query\":{\n        \"term\":{\n            \"director.keyword\":\"è‰ºè°‹\"\n        }\n    }\n}\n```\n\n### å¤šè¯æ¡ç²¾ç¡®åŒ¹é…(terms)\n\n```text\nGET /movies/_search\n{\n    \"query\":{\n        \"terms\":{\n            \"director\":[\"å¼ è‰ºè°‹\",\"Keith Parmer\"]\n        }\n    }\n}\n#termsé‡Œçš„[ ] å¤šä¸ªæ˜¯æˆ–è€…çš„å…³ç³»ï¼Œåªè¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªè¯å°±å¯ä»¥ã€‚æƒ³è¦é€šçŸ¥æ»¡è¶³ä¸¤ä¸ªè¯çš„è¯ï¼Œå°±å¾—ä½¿ç”¨boolçš„mustæ¥åšï¼Œå¦‚ä¸‹ï¼š\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"term\": {\n            \"director\": \"å¼ è‰ºè°‹\"\n          }\n        },\n        {\n          \"term\": {\n            \"director\": \"Keith Parmer\"\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\n### èŒƒå›´\n\n```text\nGET movies/_doc/_search\n{\n  \"query\": {\n  \"range\": {\n    \"star\": {\n      \"gte\": 9.5,\n      \"lte\": 10\n    }\n  }\n  }\n}\n```\n\n### å¤æ‚æŸ¥è¯¢\n\n```text\n# boolæœ‰4ç±»æŸ¥è¯¢å…³ç³»ï¼Œmust(éƒ½æ»¡è¶³,å‚ä¸è®¡ç®—åˆ†å€¼),filter(éƒ½æ»¡è¶³,ä¸å‚ä¸è®¡ç®—åˆ†å€¼),should(å…¶ä¸­ä¸€ä¸ªæ»¡è¶³),must_not(éƒ½ä¸æ»¡è¶³)\nGET movies/_doc/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"match\": {\n            \"type\": \"å–œå‰§\"\n          }\n        },\n        {\n          \"range\": {\n            \"star\": {\n              \"gte\": 9.5,\n              \"lte\": 10\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\n### é€šé…ç¬¦\n\n```text\n# è¯¸å¦‚æˆ‘çš„ä¸§å¤±å¥³å‹ï¼Œé€†æˆ‘è€…äº¡ç­‰ç­‰\nGET movies/_doc/_search\n{\n    \"query\":{\n        \"wildcard\":{\n            \"title\":\"*æˆ‘*\"\n        }\n    }\n}\n```\n\n### å¤šå­—æ®µæœç´¢\n\n```text\nGET /my_index/_search\n{\n  \"query\": {\n    \"match\": {\n      \"title\": {\n        \"query\": \"è…¾è®¯ æ”¶å…¥\",\n        \"operator\": \"and\"\n      }\n    }\n  }\n} \n#æŒ‰ç…§esç´¢å¼•ä¼šè¢«åˆ†è¯ä¸ºè…¾è®¯å’Œæ”¶å…¥ï¼ŒæŸ¥æ‰¾åŒ…å«è…¾è®¯å’Œæ”¶å…¥çš„documentï¼Œoperatorç”¨and\n```\n","tags":["elasticsearch"],"categories":["javaå…¨æ ˆ"]},{"title":"shellåŸºç¡€","url":"/2023/08/10/shellåŸºç¡€/","content":"\n## shell è„šæœ¬åŸºç¡€æ¦‚å¿µ\n\n### ä»€ä¹ˆæ˜¯ shell\n\nå‘½ä»¤è§£é‡Šå™¨ï¼Œç”¨äºè§£é‡Šç”¨æˆ·å¯¹æ“ä½œç³»ç»Ÿçš„æ“ä½œï¼Œå‘½ä»¤è§£é‡Šå™¨æœ‰å¾ˆå¤šç§ï¼Œå…·ä½“å¯è§ï¼šï¼ˆé»˜è®¤çš„æ˜¯ bashï¼Œå…¶ä¸­çš„ a æ˜¯æŒ‡ againï¼Œæ„æ€æ˜¯æ±‡æ€»å…¶ä»– shell è§£é‡Šå™¨çš„ä¼˜ç‚¹ï¼Œé‡å†™å®ç°ï¼‰\n\n```bash\ncat /etc/shells\n```\n\n![image-20230810112748528](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230810112748528.png)\n\n### linux çš„å¯åŠ¨è¿‡ç¨‹\n\nBIOS - MBR - BootLoader(grub) - kernel - systemd - ç³»ç»Ÿåˆå§‹åŒ– - shell\n\n```markdown\nå…­æ­¥éª¤\n1. BIOS å¼•å¯¼ï¼ŒBIOS ç³»ç»Ÿæ˜¯åŸºæœ¬çš„è¾“å…¥è¾“å‡ºç³»ç»Ÿï¼ŒåŠŸèƒ½åµŒåœ¨ä¸»æ¿ä¸Šï¼Œç”¨äºé€‰æ‹©ä½¿ç”¨å“ªä¸ªä»‹è´¨ï¼ˆç¡¬ç›˜ã€å…‰ç›˜ã€ç½‘ç»œï¼‰\n2. MBRï¼ˆä¸»å¼•å¯¼è®°å½•ï¼‰ï¼šç”¨äºç¡®å®šç¡¬ç›˜æ˜¯å¦å¯ä»¥è¢«å¼•å¯¼\n3. BootLoaderï¼ˆgrubï¼‰ï¼šç”¨äºå¯åŠ¨å’Œå¼•å¯¼å†…æ ¸ï¼ˆç§ç±»å’Œç‰ˆæœ¬ï¼‰\n4. kernelï¼š\n5. systemdï¼š1 å·è¿›ç¨‹\n```\n\n### shell è„šæœ¬çš„åˆ›å»ºä¸æ‰§è¡Œ\n\n##### æ€ä¹ˆç¼–å†™ä¸€ä¸ª shell è„šæœ¬\n\nunix çš„å“²å­¦ï¼šä¸€æ¡å‘½ä»¤åªåšä¸€ä»¶äº‹æƒ…ï¼›\n\nä¸ºäº†ç»„åˆå‘½ä»¤å’Œå¤šæ¬¡æ‰§è¡Œï¼Œäºæ˜¯å‡ºç°äº† shell è„šæœ¬æ–‡ä»¶ï¼Œç”¨æ¥ä¿å­˜éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚\n\n1. æŒ‡å®šè§£é‡Šå™¨ï¼š`#!/bin/xxx`ï¼Œé»˜è®¤æ˜¯`#!/bin/bash`ï¼›è¿™å…¶å®æ˜¯åç¼€ï¼Œå› ä¸ºåœ¨ Linux ä¸­ï¼Œæ–‡ä»¶åç¼€æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿè¦çŸ¥é“è¿™ä¸ªè„šæœ¬æ–‡ä»¶è¯¥ç”¨ä»€ä¹ˆåº”ç”¨æ¥æ‰§è¡Œï¼Œå°±éœ€è¦è¿™ä¸ªæ³¨é‡Šæ¥æŒ‡æ˜ï¼Œæ¯”å¦‚ node å°±æ˜¯`#!/usr/bin/node`\n2. ä¸ºæ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå³`chmod u+x [filename]`\n\n##### æ¡ˆä¾‹ï¼šå®ç° sh è„šæœ¬æ–‡ä»¶ï¼ŒæŸ¥çœ‹/var ä¸‹æ‰€æœ‰å­ç›®å½•ç©ºé—´\n\n- æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•æ‰€å ç©ºé—´ï¼šdu -sh *\n\n```sh\ncat >> memo.sh << EOF\n#!/bin/bash\ncd /var\ndu -sh *\nEOF\n# èµ‹äºˆæƒé™ chmod u+x memo.sh\n# æ‰§è¡Œ ./memo.sh\n```\n\n##### æ€ä¹ˆæ‰§è¡Œä¸€ä¸ª shell è„šæœ¬\n\nå­˜åœ¨å››ç§æ‰§è¡Œæ–¹å¼\n\n- `[è§£é‡Šå™¨] [æ–‡ä»¶å]ï¼šbash ./filename.sh`ï¼Œä¸éœ€è¦èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œæ–°åˆ›å»ºè¿›ç¨‹ï¼Œé‡‡ç”¨è§£é‡Šå™¨è¿›è¡Œæ‰§è¡Œ\n- `[./æ–‡ä»¶å]ï¼š./filename.sh`ï¼Œæ–°åˆ›å»ºè¿›ç¨‹ï¼Œéœ€è¦èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œé‡‡ç”¨#!æŒ‡å®šè§£é‡Šå™¨è¿›è¡Œæ‰§è¡Œ\n- `source [./æ–‡ä»¶å]: source ./filename.sh`ï¼Œåœ¨å½“å‰è¿›ç¨‹è¿›è¡Œæ‰§è¡Œ\n- `.[æ–‡ä»¶å]`ï¼šåœ¨å½“å‰è¿›ç¨‹è¿›è¡Œæ‰§è¡Œ\n\n| æ‰§è¡Œæ–¹å¼          | æ¡ˆä¾‹                 | æ˜¯å¦éœ€è¦å¯æ‰§è¡Œæƒé™ | æ˜¯å¦ä¼šåˆ›å»ºæ–°è¿›ç¨‹ | è¡¥å……                       |\n| ----------------- | -------------------- | ------------------ | ---------------- | -------------------------- |\n| [è§£é‡Šå™¨] [æ–‡ä»¶å] | bash ./filename.sh   | ä¸éœ€è¦             | ä¼š               | å†…éƒ¨å’Œå½“å‰çš„ç»ˆç«¯å˜é‡ä¸äº’é€š |\n| [./æ–‡ä»¶å]        | ./filename.sh        | éœ€è¦               | ä¼š               | å½“ä½¿ç”¨é»˜è®¤è§£é‡Šå™¨æ—¶çš„ç¼©å†™   |\n| source [./æ–‡ä»¶å] | source ./filename.sh | ä¸éœ€è¦             | ä¸ä¼š             | å†…éƒ¨å’Œå½“å‰çš„ç»ˆç«¯å˜é‡äº’é€š   |\n| .[æ–‡ä»¶å]         | .filename.sh         | ä¸éœ€è¦             | ä¸ä¼š             | å…¶å®å°±æ˜¯ source çš„ç¼©å†™     |\n\n- å†…å»ºå‘½ä»¤ä¸éœ€è¦åˆ›å»ºå­è¿›ç¨‹\n- å†…å»ºå‘½ä»¤åªå¯¹å½“å‰ shell ç”Ÿæ•ˆ\n\n## shell ä¹‹å˜é‡\n\n### å¢åˆ æ”¹æŸ¥ï¼šå®šä¹‰ã€èµ‹å€¼ã€å¼•ç”¨ã€åˆ é™¤ã€ç±»å‹å¤„ç†\n\n#### å®šä¹‰\n\nå³å˜åŒ–çš„é‡ï¼Œå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿çš„ç»„åˆï¼Œä¸”ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼ˆshell å˜é‡æ˜¯å¼±ç±»å‹ï¼Œä¸åŒºåˆ†å˜é‡ç±»å‹ï¼‰ï¼›\n\n- å˜é‡å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåå­—ä¸­é—´åªèƒ½ç”±å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆ\n\n- å˜é‡åçš„é•¿åº¦ä¸å¾—è¶…è¿‡ 255 ä¸ªå­—ç¬¦\n\n- å˜é‡ååœ¨æœ‰æ•ˆèŒƒå›´å†…å¿…é¡»å”¯ä¸€\n\n- å˜é‡é»˜è®¤ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆå­˜åœ¨ç±»å‹ã€å­—ç¬¦ä¸²ã€æ•´å‹ã€æµ®ç‚¹å‹ã€æ—¥æœŸå‹ã€‘ï¼‰\n\n  ```shell\n  $ x=1\n  $ y=2\n  $ z=3\n  $ k=$x+$y+$z\n  $ echo $k\n  1+2+3\n  ```\n\n#### èµ‹å€¼\n\néäº¤äº’å¼èµ‹å€¼å­˜åœ¨å››ç§èµ‹å€¼æ–¹å¼\n\n- å˜é‡å=å˜é‡å€¼ï¼ˆç­‰å·å·¦å³ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰ï¼š a=20\n- let è¿›è¡Œèµ‹å€¼ï¼šlet a=20\n- å°†å‘½ä»¤èµ‹å€¼ç»™å˜é‡ï¼šl=ls\n- å°†å‘½ä»¤çš„ç»“æœå¤åˆ¶ç»™å˜é‡ï¼ˆå¸¸ç”¨ï¼‰ï¼šä½¿ç”¨()æˆ–è€…ï¼š`letc=(ls -l /etc)`\n- å˜é‡é—´çš„èµ‹å€¼å¯ä»¥è®¾å®šé»˜è®¤å€¼ï¼š`a=${[å˜é‡ b]-[é»˜è®¤å€¼]}`ï¼Œå‡è®¾é»˜è®¤å€¼æ˜¯*ï¼Œ`a=${b-*}`\n\næ³¨æ„ï¼šå˜é‡å€¼å¦‚æœæœ‰ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥åŒ…å«åœ¨\"\"æˆ–''ä¸­\n\n#### å¼•ç”¨+æŸ¥è¯¢\n\nåœ¨ shell ä¸­å­˜åœ¨å››ç§å¼•ç”¨ï¼šå•å¼•å·ã€åŒå¼•å·ã€${}ã€``\n\n- åŒå¼•å·ï¼šéƒ¨åˆ†å¼•ç”¨ï¼Œä½¿ç”¨è¿™ç§å¼•ç”¨æ—¶ï¼Œ$ã€`(åå¼•å·)ã€(è½¬ä¹‰ç¬¦) è¿™ 3 ä¸ªè¿˜æ˜¯ä¼šè§£ææˆç‰¹æ®Šçš„æ„ä¹‰\n- å•å¼•å·ï¼šå®Œå…¨å¼•ç”¨ï¼ŒåªåŸæ ·è¾“å‡º\n- åå¼•å·`ï¼šå‘½ä»¤æ›¿æ¢\n\nå˜é‡åå³å¯¹å˜é‡çš„å¼•ç”¨ï¼Œåœ¨éƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥ç¼©å†™ä¸ºå˜é‡åå³å¯¹å˜é‡çš„å¼•ç”¨ï¼Œåœ¨éƒ¨åˆ†æƒ…å†µä¸‹å¯ä»¥ç¼©å†™ä¸ºå˜é‡åï¼ˆä¸äº§ç”Ÿæ­§ä¹‰ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ‹¼æ¥å°±ä¸èƒ½ç¼©å†™ï¼‰ï¼›\n\nè€ŒæŸ¥è¯¢åˆ™å¯ä»¥ä½¿ç”¨`set`å‘½ä»¤ï¼Œå…¶ä¼šé»˜è®¤æŸ¥è¯¢ç³»ç»Ÿä¸­é»˜è®¤æ‰€æœ‰å·²ç»ç”Ÿæ•ˆçš„å˜é‡ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå˜é‡,ä¹ŸåŒ…æ‹¬è‡ªå®šä¹‰å˜é‡ï¼Œç»“åˆç®¡é“è¿ç®—ç¬¦å¯ä»¥ç²¾å‡†æŸ¥è¯¢\n\n```shell\nwww=999\nset | grep www\n```\n\n#### åˆ é™¤\n\nåˆ é™¤åˆ™æ˜¯`unset`å‘½ä»¤ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹\n\n```bash\nunset [å˜é‡å]\n```\n\n#### ç‰¹æ®Šæ•°æ®ç»“æ„ä¹‹æ•°ç»„\n\n- å®šä¹‰ï¼š[å˜é‡å]=(a b c)\n- æ˜¾ç¤ºæ‰€æœ‰å…ƒç´ ï¼šecho ${å˜é‡å[@]}\n- **æ˜¾ç¤ºæ•°ç»„å…ƒç´ ä¸ªæ•°ï¼šecho ${#å˜é‡å[@]}**\n- æ˜¾ç¤ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼šecho å˜é‡å[0]ï¼ˆå¦‚æœç›´æ¥è®¿é—®æ—¶ä¹Ÿä¼šåªæ˜¾ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ echoå˜é‡å)\n\n```shell\ncolors=( yellow red blue )\necho ${colors[@]}\necho ${#colors[@]}\necho ${colors[0]}\necho $colors\n```\n\n#### ç±»å‹å¤„ç†\n\nshell å˜é‡ä¸ºå¼±ç±»å‹å¹¶ä¸”é»˜è®¤æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¦æƒ³è®¾ç½®å˜é‡çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨`declare`å‘½ä»¤ã€‚\n\ndeclare å‘½ä»¤ç”¨æ¥å£°æ˜å˜é‡ç±»å‹\n\n```bash\ndeclare [+/-] [é€‰é¡¹] å˜é‡\n```\n\n### å˜é‡çš„ä½œç”¨èŒƒå›´\n\n1. é»˜è®¤èŒƒå›´ï¼šåªé’ˆå¯¹å½“å‰çš„ç»ˆç«¯ï¼ˆshellï¼‰ç”Ÿæ•ˆ\n2. æ”¯æŒå­è¿›ç¨‹è®¿é—®çˆ¶è¿›ç¨‹çš„å˜é‡ï¼š`export [å˜é‡å]=[å˜é‡å€¼]`ï¼›ï¼ˆå–æ¶ˆå˜é‡å¯ä»¥ä½¿ç”¨`unset [å˜é‡å]`ï¼‰\n3. ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼šæ¯ä¸ª shell æ‰“å¼€éƒ½èƒ½è·å–åˆ°çš„å˜é‡\n\nå…¶ä¸­ç¬¬ä¸€æ¡å¯ä»¥ä½¿ç”¨`bash`å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ shell è¿›è¡Œæµ‹è¯•ï¼›ç¬¬äºŒæ¡å°±æ˜¯ export å’Œ unset å…³é”®å­—ï¼›å…³é”®æ˜¯ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œé‡ç‚¹åˆ†æï¼š\n\n#### ç³»ç»Ÿç¯å¢ƒå˜é‡\n\nç¯å¢ƒå˜é‡ä¸»è¦æ ¹æ®ä¸¤ä¸ªè§’åº¦è¿›è¡Œåˆ’åˆ†ï¼šç”¨æˆ·çº§åˆ«æ˜¯å±äºç³»ç»Ÿè¿˜æ˜¯å±äºç”¨æˆ·ï¼›shell çº§åˆ«æ˜¯å±äºå½“å‰çš„ shell è¿˜æ˜¯æ‰€æœ‰ shellã€‚è€Œè¿™äº›æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡ŒåŒºåˆ†å’Œè®°å½•çš„ï¼Œä¸åŒä½œç”¨èŒƒå›´å’ŒåŠŸèƒ½çš„å˜é‡åˆ†å±ä¸åŒçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸»è¦æœ‰å››ä¸ªæ–‡ä»¶`/etc/profile`ã€`~/.bash_profile`ã€`~/.bashrc`ã€`/etc/bashrc`ã€‚ç³»ç»Ÿç¯å¢ƒå˜é‡çš„æŸ¥è¯¢ï¼šenv å’Œ set\n\n##### å¸¸è§å˜é‡\n\n\n\n| å˜é‡å                    | å«ä¹‰                                                         | å¸¸è§æ“ä½œ                        | æ³¨æ„                                                         |\n| ------------------------- | ------------------------------------------------------------ | ------------------------------- | ------------------------------------------------------------ |\n| $PATH                     | æœç´¢è·¯å¾„ï¼›å½“æ‰§è¡Œå…¨å±€å‘½ä»¤ï¼ˆå³ç›´æ¥æ‰§è¡Œå‘½ä»¤åï¼‰æ—¶ï¼Œä¼šåœ¨ PATH å€¼å†…æ‰€æœ‰è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾å¹¶æ‰§è¡Œ | PATH=$PATH:[æ–°å¢çš„å…¨å±€è·¯å¾„]     | å½“å‰å®šä¹‰çš„å˜é‡ï¼Œåªä¼šä¼šå½“å‰ç»ˆç«¯å’Œå…¶å­ shell ç”Ÿæ•ˆï¼ˆå› ä¸ºæ‰€æœ‰çš„ç¯å¢ƒå˜é‡éƒ½è¢« export å¯¼å‡ºè¿‡äº†ï¼‰ |\n| $PS1                      | å½“å‰æç¤ºçš„ç»ˆç«¯ä¿¡æ¯                                           | æ·»åŠ å®Œæ•´è·¯å¾„ä¿¡æ¯ã€æ—¶é—´ç­‰ç­‰ä¿¡æ¯  |                                                              |\n| $?                        | ä¸Šæ¡å‘½ä»¤æ˜¯å¦æ­£ç¡®æ‰§è¡Œ                                         | 0ï¼ˆæ­£ç¡®ï¼‰ \\| 1ï¼ˆé”™è¯¯ï¼Œé 0 å€¼ï¼‰ | é¢„å®šä¹‰å˜é‡                                                   |\n| $$                        | å½“å‰è¿›ç¨‹çš„ PID                                               |                                 | é¢„å®šä¹‰å˜é‡                                                   |\n| $0                        | å½“å‰è¿›ç¨‹ï¼ˆæˆ–æ‰§è¡Œæ–‡ä»¶ï¼‰çš„åç§°                                 |                                 | é¢„å®šä¹‰å˜é‡ï¼›bash xx.sh æ—¶æ˜¯ bashï¼›.xx.sh æ—¶æ˜¯ xx.sh          |\n| $#                        | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°çš„ä¸ªæ•°                                       |                                 |                                                              |\n| $*                        | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°                       |                                 |                                                              |\n| $1-9ï¼ˆ10 ä¹‹åè¦ç”¨{}åŒ…è£¹ï¼‰ | ç”¨äºè·å–å‘½ä»¤æ‰§è¡Œå‚æ•°                                         |                                 | ä½ç½®å˜é‡                                                     |\n\n### ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶\n\n- /etc/profileï¼š\n- /etc/profile.dï¼šç›®å½•\n- ~/.bash_profile\n- ~/.bashrc\n- /etc/bashrc\n\néœ€è¦æ³¨æ„çš„æ˜¯\n\n- etc ä¸‹çš„æ˜¯æ‰€æœ‰ç”¨æˆ·é€šç”¨ï¼Œè€Œ~åˆ™æ˜¯ç”¨æˆ·ç”¨æˆ·å®¶ç›®å½•ï¼Œåªå¯¹æŒ‡å®šç”¨æˆ·ç”Ÿæ•ˆï¼›\n\n- profile æ–‡ä»¶å’Œ bashrc æ–‡ä»¶çš„åŠ è½½å–å†³äº shell çš„ç§ç±»æ˜¯ loginShell è¿˜æ˜¯ noLoginShellï¼ˆåœ¨ç™»é™†æ—¶é‡‡ç”¨çš„æ˜¯\n\n  ```\n  su - [ç”¨æˆ·å]\n  ```\n\n  ï¼Œè¿™æ—¶å¦‚æœæœ‰è¿™ä¸ª-å·å°±æ˜¯ loginShellï¼Œä¸åŠ åˆ™æ˜¯ noLoginShellï¼‰\n\n  - noLoginShell åªä¼šåŠ è½½æ‰§è¡Œ bashrc\n  - loginShell åˆ™ä¼šå…¨éƒ¨åŠ è½½æ‰§è¡Œ\n\nåŠ è½½é¡ºåºä¸º\n\n```bash\n/etc/profile - ~/.bash_profile - ~/.bashrc - /etc/bashrc\n```\n\nå¦‚æœä¿®æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œæ˜¯ä¸ä¼šç«‹å³é‡æ–°åŠ è½½çš„ï¼Œéœ€è¦æˆ‘ä»¬é‡å¯ç»ˆç«¯æˆ–è€…æ‰§è¡Œ source å‘½ä»¤\n\n```bash\nsource [ä¿®æ”¹çš„é…ç½®æ–‡ä»¶åœ°å€]\n```\n\nä½œç”¨èŒƒå›´ï¼š\n\n![image-20230810114749997](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230810114749997.png)\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"linuxä¸­çš„å¤‡ä»½ä¸æ¢å¤","url":"/2023/08/10/linuxä¸­çš„å¤‡ä»½ä¸æ¢å¤/","content":"\nå®ä½“æœºæ— æ³•åšå¿«ç…§ï¼Œå¦‚æœç³»ç»Ÿå‡ºç°å¼‚å¸¸æˆ–è€…æ•°æ®æŸåï¼Œåæœä¸¥é‡ï¼Œè¦é‡åšç³»ç»Ÿï¼Œè¿˜ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨**å¤‡ä»½**å’Œ**æ¢å¤**æŠ€æœ¯ã€‚\n\nLinux å¤‡ä»½å’Œæ¢å¤æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n- **tar** æ‰“åŒ…ï¼šæŠŠéœ€è¦çš„æ–‡ä»¶(æˆ–è€…åˆ†åŒº)ç”¨ tar æ‰“åŒ…å°±è¡Œï¼Œä¸‹æ¬¡éœ€è¦æ¢å¤æ—¶ï¼Œå†è§£å‹è¦†ç›–å³å¯ã€‚\n- â­ä½¿ç”¨æŒ‡ä»¤ `dump` ä¸ `resotre`\n\nè‹¥ Linux ä¸Šæ²¡æœ‰ `dump` ä¸ `restore` æŒ‡ä»¤ï¼Œéœ€è¦å…ˆå®‰è£…ï¼š\n\n- `yum -y install dump`\n- `yum -y install resotre`\n\n## `dump` å¤‡ä»½\n\n`dump` æ”¯æŒåˆ†å·ä¸å¢é‡å¤‡ä»½ï¼ˆæ‰€è°“å¢é‡å¤‡ä»½æ˜¯æŒ‡å¤‡ä»½ä¸Šæ¬¡å¤‡ä»½åä¿®æ”¹/å¢åŠ è¿‡çš„æ–‡ä»¶ï¼Œä¹Ÿç§°å·®å¼‚å¤‡ä»½ï¼‰\n\n### åŸºæœ¬è¯­æ³•\n\nâ­`dump [-cu] [-123456789] [-f <å¤‡ä»½åæ–‡ä»¶å>] [-T <æ—¥æœŸ>] <åˆ†åŒº>`\n\nâ­`dump [-wW]`\n\nå‚æ•°è¯´æ˜ï¼š\n\n- `-c`ï¼šåˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶ï¼Œå¹¶å°†ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å‚æ•°æ‰€æŒ‡å®šçš„å†…å®¹å†™å…¥å½’æ¡£æ–‡ä»¶çš„å¼€å¤´\n- `-0123456789`ï¼šå¤‡ä»½å±‚çº§ï¼Œ0 ä¸ºæœ€å®Œæ•´å¤‡ä»½(å¤‡ä»½æ‰€æœ‰æ–‡ä»¶)ï¼›è‹¥æŒ‡å®š 0 ä»¥ä¸Šçš„å±‚çº§ï¼Œåˆ™å¤‡ä»½è‡³ä¸Šä¸€æ¬¡å¤‡ä»½ä»¥æ¥ä¿®æ”¹æˆ–æ–°å¢çš„æ–‡ä»¶ï¼Œåˆ° 9 åå†æ¬¡è½®æ›¿\n- `-f <å¤‡ä»½åæ–‡ä»¶å>`ï¼šæŒ‡å®šå¤‡ä»½åçš„æ–‡ä»¶å\n- `-j`ï¼šè°ƒç”¨ bzlib åº“å‹ç¼©å¤‡ä»½æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å°†å¤‡ä»½åçš„æ–‡ä»¶å‹ç¼©æˆ bz2 æ ¼å¼ï¼Œè®©æ–‡ä»¶æ›´å°\n- `-T <æ—¥æœŸ>`ï¼šæŒ‡å®šå¼€å§‹å¤‡ä»½çš„æ—¶é—´ä¸æ—¥æœŸ\n- `-u`ï¼šå¤‡ä»½å®Œæ¯•åï¼Œåœ¨ `/etc/dumpdares` ä¸­è®°å½•å¤‡ä»½çš„æ–‡ä»¶ç³»ç»Ÿã€å±‚çº§ã€æ—¥æœŸä¸æ—¶é—´ç­‰\n- `-t`ï¼šæŒ‡å®šæ–‡ä»¶åï¼Œè‹¥è¯¥æ–‡ä»¶å·²å­˜åœ¨å¤‡ä»½æ–‡ä»¶ï¼Œåˆ™åˆ—å‡ºåç§°\n- `-W`ï¼šæ˜¾ç¤ºéœ€è¦å¤‡ä»½çš„æ–‡ä»¶åŠå…¶æœ€åä¸€æ¬¡å¤‡ä»½çš„å±‚çº§ã€æ—¶é—´ã€æ—¥æœŸ\n- `-w`ï¼šä¸ `-W` ç±»ä¼¼ï¼Œä½†ä»…æ˜¾ç¤ºéœ€è¦å¤‡ä»½çš„æ–‡ä»¶\n\n### åº”ç”¨æ¡ˆä¾‹\n\n- â‘  å°† /boot åˆ†åŒºæ‰€æœ‰å†…å®¹å¤‡ä»½åˆ° /opt/book.bak0.bz2 æ–‡ä»¶ï¼Œå¤‡ä»½å±‚çº§ä¸º \"0\"\n\n  - `dump -0uj -f /opt/boot.bak0.bz2 /boot`\n\n- â‘¡ ä¿®æ”¹æ–‡ä»¶ï¼Œç„¶åå¢é‡å¤‡ä»½ /boot åˆ†åŒº\n\n  - `dump -1uj -f /opt/boot.bak1.bz2 /boot`\n\n- â‘¢ æ˜¾ç¤ºæœ€åä¸€æ¬¡å¤‡ä»½çš„å±‚çº§ã€æ—¶é—´...\n\n  - `dump -W`\n\n- â‘£ æŸ¥çœ‹å¤‡ä»½æ—¶é—´æ–‡ä»¶\n\n  - `cat /etc/dumpdates`\n\n- æ³¨ï¼šå¢é‡å¤‡ä»½\n\n  ä»…æ”¯æŒåˆ†åŒºï¼Œå¦‚æœå¤‡ä»½æ–‡ä»¶/ç›®å½•ï¼Œä¸å†æ”¯æŒå¢é‡å¤‡ä»½ï¼Œå³åªèƒ½ä½¿ç”¨ 0 çº§åˆ«å¤‡ä»½ï¼\n\n  - å…ˆ `dump -0j -f /opt/etc.bak0.ba2 /etc/` : `dump` å¤‡ä»½ `/etc` æ•´ä¸ªç›®å½•\n  - å `dump -1j -f /opt/etc.bak1.ba2 /etc/` : `dump` å¢é‡å¤‡ä»½ `/etc` ç›®å½•ä¼šå‡ºé”™\n\nâ­`dump` + `crontab`: æ— äººå€¼å®ˆå¤‡ä»½ï¼\n\n## `restore` æ¢å¤\n\nâ­`restore` æŒ‡ä»¤ç”¨æ¥æ¢å¤å·²å¤‡ä»½çš„æ–‡ä»¶ï¼Œå¯ä»¥ä» `dump` ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤æˆåŸæ–‡ä»¶ã€‚\n\n### åŸºæœ¬è¯­æ³•\n\n- â­ `restore [æ¨¡å¼é€‰é¡¹] [é€‰é¡¹]`\n\n- å››ä¸ªæ¨¡å¼é€‰é¡¹ï¼ˆ\n\n  ä¸€æ¬¡å‘½ä»¤ä¸­åªèƒ½æŒ‡å®šä¸€ä¸ªå‚æ•°\n\n  ï¼‰\n\n  -  `-C` : ä½¿ç”¨å¯¹æ¯”æ¨¡å¼ï¼Œå°†å¤‡ä»½çš„æ–‡ä»¶ä¸å·²å­˜åœ¨çš„æ–‡ä»¶ç›¸äº’å¯¹æ¯”\n  \n    - `restore -C -f /opt/boot.bak1.bz2` : å°† boot.bak1.bz2 å¤‡ä»½æ–‡ä»¶ä¸æœ€æ–°å·²å­˜åœ¨çš„æ–‡ä»¶æ¯”è¾ƒ\n  \n  - `-i` : ä½¿ç”¨äº¤äº’æ¨¡å¼ï¼Œåœ¨è¿›è¡Œè¿˜åŸæ“ä½œæ—¶ï¼Œrestore æŒ‡ä»¤å°†ä¾åºè¯¢é—®ç”¨æˆ·\n  \n  - `-r` :è¿›è¡Œè¿˜åŸæ¨¡å¼(æ“ä½œ)\n  \n    - `restore -r -f /opt/boot.bak0.bz2` : æ¢å¤åˆ°ç¬¬1æ¬¡å®Œå…¨å¤‡ä»½çŠ¶æ€\n    - `restore -r -f /opt/boot.bak1.bz2` : æ¢å¤åˆ°ç¬¬2æ¬¡å¢é‡å¤‡ä»½çŠ¶æ€\n  \n  - `-t`: æŸ¥çœ‹æ¨¡å¼ï¼Œçœ‹å¤‡ä»½æ–‡ä»¶æœ‰å“ªäº›\n    - `restore -t -f /opt/boot.bak0.bz` : æŸ¥çœ‹ /opt/boot.bak0.bz2 æœ‰ä»€ä¹ˆæ–‡ä»¶\n  \n- é€‰é¡¹\n\n  - `-f <å¤‡ä»½æ–‡ä»¶>` : ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–å¤‡ä»½æ•°æ®ï¼Œè¿›è¡Œè¿˜åŸæ“ä½œ\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"è½¬è½½ï¼šä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†äººåšä¸äº†æ¶æ„å¸ˆï¼Ÿ","url":"/2023/08/07/è½¬è½½ï¼šä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†äººåšä¸äº†æ¶æ„å¸ˆï¼Ÿ/","content":"\n## åŸºæœ¬æ¦‚å¿µä¸è®¾è®¡æ–¹æ³•\n\nåœ¨è®²è§£æ¶æ„æ€æƒ³ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç»Ÿä¸€ä»‹ç»ä¸€ä¸‹åŸºæœ¬æ¦‚å¿µçš„å«ä¹‰ï¼Œé¿å…æ¯ä¸ªäººå¯¹ç³»ç»Ÿã€æ¡†æ¶ã€æ¶æ„è¿™äº›åè¯çš„ç†è§£ä¸ä¸€è‡´å¯¼è‡´çš„è¯¯è§£ã€‚ä¸‹é¢æ˜¯ã€Šä»0å¼€å§‹å­¦æ¶æ„ã€‹ä½œè€…å¯¹æ¯ä¸ªåè¯çš„å®šä¹‰ã€‚å…¶ä½œç”¨åŸŸä»…é™æœ¬æ–‡èŒƒç•´ï¼Œä¸ç”¨çº ç»“å…¶åœ¨å…¶ä»–ä¸Šä¸‹æ–‡ä¸­çš„æ„ä¹‰ã€‚\n\n> ç³»ç»Ÿï¼šç³»ç»Ÿæ³›æŒ‡ç”±ä¸€ç¾¤æœ‰å…³è”çš„ä¸ªä½“ç»„æˆï¼Œæ ¹æ®æŸç§è§„åˆ™è¿ä½œï¼Œèƒ½å®Œæˆä¸ªåˆ«å…ƒä»¶ä¸èƒ½å•ç‹¬å®Œæˆçš„å·¥ä½œçš„ç¾¤ä½“ã€‚ å­ç³»ç»Ÿï¼šå­ç³»ç»Ÿä¹Ÿæ˜¯ç”±ä¸€ç¾¤æœ‰å…³è”çš„ä¸ªä½“æ‰€ç»„æˆçš„ç³»ç»Ÿï¼Œå¤šåŠä¼šæ˜¯æ›´å¤§ç³»ç»Ÿä¸­çš„ä¸€éƒ¨åˆ†ã€‚æ¨¡å—ï¼šä»ä¸šåŠ¡é€»è¾‘çš„è§’åº¦æ¥æ‹†åˆ†ç³»ç»Ÿåï¼Œå¾—åˆ°çš„å•å…ƒå°±æ˜¯â€œæ¨¡å—â€ã€‚åˆ’åˆ†æ¨¡å—çš„ä¸»è¦ç›®çš„æ˜¯èŒè´£åˆ†ç¦»ã€‚ç»„ä»¶ï¼šä»ç‰©ç†éƒ¨ç½²çš„è§’åº¦æ¥æ‹†åˆ†ç³»ç»Ÿåï¼Œå¾—åˆ°çš„å•å…ƒå°±æ˜¯â€œç»„ä»¶â€ã€‚åˆ’åˆ†ç»„ä»¶çš„ä¸»è¦ç›®çš„æ˜¯å•å…ƒå¤ç”¨ã€‚æ¡†æ¶ï¼šæ˜¯ä¸€æ•´å¥—å¼€å‘è§„èŒƒï¼Œæ˜¯æä¾›åŸºç¡€åŠŸèƒ½çš„äº§å“ã€‚æ¶æ„ï¼šå…³æ³¨çš„æ˜¯ç»“æ„ï¼Œæ˜¯æŸä¸€å¥—å¼€å‘è§„èŒƒä¸‹çš„å…·ä½“è½åœ°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å„ä¸ªæ¨¡å—ä¹‹é—´çš„ç»„åˆå…³ç³»ä»¥åŠå®ƒä»¬ååŒèµ·æ¥å®ŒæˆåŠŸèƒ½çš„è¿ä½œè§„åˆ™ã€‚\n\n\n\nç”±ä»¥ä¸Šå®šä¹‰å¯è§ï¼Œæ‰€è°“æ¶æ„ï¼Œæ˜¯ä¸ºäº†è§£å†³è½¯ä»¶ç³»ç»Ÿçš„æŸä¸ªå¤æ‚åº¦å¸¦æ¥çš„å…·ä½“é—®é¢˜ï¼Œå°†æ¨¡å—å’Œç»„ä»¶ä»¥æŸç§æ–¹å¼æœ‰æœºç»„åˆï¼ŒåŸºäºæŸä¸ªå…·ä½“çš„æ¡†æ¶å®ç°åçš„ä¸€ç§è½åœ°æ–¹æ¡ˆã€‚\n\nè€Œè®¨è®ºæ¶æ„æ—¶ï¼Œå¾€å¾€åªè®¨è®ºåˆ°ç³»ç»Ÿä¸å­ç³»ç»Ÿè¿™ä¸ªé¡¶å±‚çš„æ¶æ„ã€‚\n\nå¯è§ï¼Œè¦è¿›è¡Œæ¶æ„é€‰å‹ï¼Œé¦–å…ˆåº”è¯¥çŸ¥é“è‡ªå·±è¦è§£å†³çš„ä¸šåŠ¡å’Œç³»ç»Ÿå¤æ‚ç‚¹åœ¨å“ªé‡Œï¼Œæ˜¯ä½œä¸ºç§’æ€ç³»ç»Ÿæœ‰ç¬é—´é«˜å¹¶å‘ï¼Œè¿˜æ˜¯ä½œä¸ºé‡‘èç§‘æŠ€ç³»ç»Ÿæœ‰æé«˜çš„æ•°æ®ä¸€è‡´æ€§å’Œå¯ç”¨æ€§è¦æ±‚ç­‰ã€‚\n\n**ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿçš„å¤æ‚åº¦æ¥æºæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š**\n\n- **é«˜æ€§èƒ½**\n\nå¦‚æœä¸šåŠ¡çš„è®¿é—®é¢‘ç‡æˆ–å®æ—¶æ€§è¦æ±‚è¾ƒé«˜ï¼Œåˆ™ä¼šå¯¹ç³»ç»Ÿæå‡ºé«˜æ€§èƒ½çš„è¦æ±‚ã€‚\n\nå¦‚æœæ˜¯å•æœºç³»ç»Ÿï¼Œéœ€è¦åˆ©ç”¨å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹æŠ€æœ¯ã€‚\n\nå¦‚æœæ˜¯é›†ç¾¤ç³»ç»Ÿï¼Œåˆ™è¿˜æ¶‰åŠä»»åŠ¡æ‹†åˆ†ã€åˆ†é…ä¸è°ƒåº¦ï¼Œå¤šæœºå™¨çŠ¶æ€ç®¡ç†ï¼Œæœºå™¨é—´é€šä¿¡ï¼Œå½“å•æœºæ€§èƒ½è¾¾åˆ°ç“¶é¢ˆåï¼Œå³ä½¿ç»§ç»­åŠ æœºå™¨ä¹Ÿæ— æ³•ç»§ç»­æå‡æ€§èƒ½ï¼Œè¿˜æ˜¯è¦é’ˆå¯¹å•ä¸ªå­ä»»åŠ¡è¿›è¡Œæ€§èƒ½æå‡ã€‚\n\n- **é«˜å¯ç”¨**\n\nå¦‚æœä¸šåŠ¡çš„å¯ç”¨æ€§è¦æ±‚è¾ƒé«˜ï¼Œä¹Ÿä¼šå¸¦æ¥é«˜å¯ç”¨æ–¹é¢çš„å¤æ‚åº¦ã€‚é«˜å¯ç”¨åˆåˆ†ä¸ºè®¡ç®—é«˜å¯ç”¨å’Œå­˜å‚¨é«˜å¯ç”¨ã€‚\n\né’ˆå¯¹è®¡ç®—é«˜å¯ç”¨ï¼Œå¯ä»¥é‡‡ç”¨ä¸»å¤‡ï¼ˆå†·å¤‡ã€æ¸©å¤‡ã€çƒ­å¤‡ï¼‰ã€å¤šä¸»çš„æ–¹å¼æ¥å†—ä½™è®¡ç®—èƒ½åŠ›ï¼Œä½†ä¼šå¢åŠ æˆæœ¬ã€å¯ç»´æŠ¤æ€§æ–¹é¢çš„å¤æ‚åº¦ã€‚\n\né’ˆå¯¹å­˜å‚¨é«˜å¯ç”¨ï¼ŒåŒæ ·æ˜¯å¢åŠ æœºå™¨æ¥å†—ä½™ï¼Œä½†è¿™ä¹Ÿä¼šå¸¦æ¥å¤šæœºå™¨å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œå¦‚é‡åˆ°å»¶è¿Ÿã€ä¸­æ–­ã€æ•…éšœç­‰æƒ…å†µã€‚éš¾ç‚¹åœ¨äºæ€ä¹ˆå‡å°‘æ•°æ®ä¸ä¸€è‡´å¯¹ä¸šåŠ¡çš„å½±å“ã€‚\n\næ—¢ç„¶ä¸»è¦è§£å†³æ€è·¯æ˜¯å¢åŠ æœºå™¨æ¥åšå†—ä½™ï¼Œé‚£ä¹ˆå°±æ¶‰åŠåˆ°äº†çŠ¶æ€å†³ç­–çš„é—®é¢˜ã€‚å³å¦‚æœåˆ¤æ–­å½“å‰ä¸»æœºçš„çŠ¶æ€æ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸ï¼Œä»¥åŠå¼‚å¸¸äº†è¦å¦‚ä½•é‡‡å–è¡ŒåŠ¨ï¼ˆæ¯”å¦‚åˆ‡æ¢å“ªå°åšä¸»æœºï¼‰ã€‚\n\nå¯¹ä¸»æœºçŠ¶æ€çš„åˆ¤æ–­ï¼Œå¤šé‡‡ç”¨æœºå™¨ä¿¡æ¯é‡‡é›†æˆ–è¯·æ±‚å“åº”æƒ…å†µåˆ†æç­‰æ‰‹æ®µï¼Œä½†åˆä¼šäº§ç”Ÿé‡‡é›†ä¿¡æ¯è¿™ä¸€æ¡é€šä¿¡é“¾è·¯æœ¬èº«æ˜¯å¦æ­£å¸¸çš„é—®é¢˜ï¼Œä¸‹æ–‡ä¼šå…·ä½“å±•å¼€è®¨è®ºã€‚äº‹å®ä¸Šï¼ŒçŠ¶æ€å†³ç­–æœ¬è´¨ä¸Šä¸å¯èƒ½åšåˆ°å®Œå…¨æ­£ç¡®ã€‚\n\n**è€Œå¯¹äºå†³ç­–æ–¹å¼ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š**\n\n> ç‹¬è£å¼ï¼šå­˜åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å†³ç­–ä¸»ä½“æ¥æ”¶é›†ä¿¡æ¯å¹¶å†³å®šä¸»æœºï¼Œè¿™æ ·çš„ç­–ç•¥ä¸ä¼šæ··ä¹±ï¼Œä½†è¿™ä¸ªä¸»ä½“æœ¬èº«å­˜åœ¨å•ç‚¹é—®é¢˜ã€‚ åå•†å¼ï¼šä¸¤å°å¤‡æœºé€šè¿‡äº‹å…ˆæŒ‡å®šçš„è§„åˆ™æ¥åå•†å†³ç­–å‡ºä¸»æœºï¼Œè§„åˆ™è™½ç„¶ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœä¸¤å°å¤‡æœºä¹‹é—´çš„åå•†é“¾è·¯ä¸­æ–­äº†ï¼Œå†³ç­–èµ·æ¥å°±ä¼šå¾ˆå›°éš¾ï¼Œæ¯”å¦‚æœ‰ç½‘ç»œå»¶è¿Ÿä¸”æœºå™¨æœªæ•…éšœã€ç½‘ç»œä¸­æ–­ä¸”æœºå™¨æœªæ•…éšœã€ç½‘ç»œä¸­æ–­å…¶æœºå™¨å·²æ•…éšœï¼Œå¤šç§æƒ…å†µéœ€è¦å¤„ç†ã€‚æ°‘ä¸»å¼ï¼šå¦‚æœæœ‰å¤šå°å¤‡æœºï¼Œå¯ä»¥ä½¿ç”¨é€‰ä¸¾ç®—æ³•æ¥æŠ•ç¥¨å‡ºä¸»æœºï¼Œæ¯”å¦‚ Paxos å°±æ˜¯ä¸€ç§é€‰ä¸¾ç®—æ³•ï¼Œè¿™ç§ç®—æ³•å¤§å¤šæ•°éƒ½é‡‡å–å¤šæ•°å–èƒœçš„ç­–ç•¥ï¼Œç®—æ³•æœ¬èº«è¾ƒä¸ºå¤æ‚ï¼Œä¸”å¦‚æœåƒåå•†å¼ä¸€æ ·å‡ºç°è¿æ¥ä¸­æ–­ï¼Œå°±ä¼šè„‘è£‚ï¼Œä¸åŒéƒ¨åˆ†ä¼šå„è‡ªå†³ç­–å‡ºä¸åŒç»“æœï¼Œéœ€è¦è§„é¿ã€‚\n\n\n\n- **å¯æ‰©å±•æ€§**\n\nä¼—æ‰€å‘¨çŸ¥åœ¨äº’è”ç½‘è¡Œä¸šåªæœ‰å˜åŒ–æ‰æ˜¯æ°¸è¿œä¸å˜çš„ï¼Œè€Œå¼€å‘ä¸€ä¸ªç³»ç»ŸåŸºæœ¬éƒ½ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œé‚£åº”è¯¥å¦‚ä½•ä¸ºç³»ç»Ÿçš„æœªæ¥å¯èƒ½æ€§è¿›è¡Œè®¾è®¡æ¥ä¿æŒå¯æ‰©å±•æ€§å‘¢ï¼Ÿ\n\nè¿™é‡Œé¦–å…ˆè¦æ˜ç¡®çš„ä¸€ä¸ªè§‚ç‚¹å°±æ˜¯ï¼Œåœ¨åšç³»ç»Ÿè®¾è®¡æ—¶ï¼Œæ—¢ä¸å¯èƒ½å®Œå…¨ä¸è€ƒè™‘å¯æ‰©å±•æ€§ï¼Œä¹Ÿä¸å¯èƒ½æ¯ä¸ªè®¾è®¡ç‚¹éƒ½è€ƒè™‘å¯æ‰©å±•æ€§ï¼Œå‰è€…å¾ˆæ˜æ˜¾ï¼Œåè€…åˆ™æ˜¯ä¸ºäº†é¿å…èˆæœ¬é€æœ«ï¼Œä¸ºäº†æ‰©å±•è€Œæ‰©å±•ï¼Œå®é™…ä¸Šå¯èƒ½ä¼šä¸ºä¸å­˜åœ¨çš„é¢„æµ‹èŠ±è´¹è¿‡å¤šçš„ç²¾åŠ›ã€‚\n\né‚£ä¹ˆæ€ä¹ˆè€ƒè™‘ç³»ç»Ÿçš„æœªæ¥å¯èƒ½æ€§ä»è€Œåšå‡ºç›¸åº”çš„å¯æ‰©å±•æ€§è®¾è®¡å‘¢ï¼Ÿè¿™é‡Œä½œè€…ç»™å‡ºäº†ä¸€ä¸ªæ–¹æ³•ï¼šåªé¢„æµ‹ä¸¤å¹´å†…å¯èƒ½çš„å˜åŒ–ï¼Œä¸è¦è¯•å›¾é¢„æµ‹äº”å¹´ä¹ƒè‡³åå¹´çš„å˜åŒ–ã€‚å› ä¸ºå¯¹äºå˜åŒ–å¿«çš„è¡Œä¸šæ¥è¯´ï¼Œé¢„æµ‹ä¸¤å¹´å·²ç»è¶³å¤Ÿè¿œäº†ï¼Œå†å¤šå°±å¯èƒ½è®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–ã€‚è€Œå¯¹å˜åŒ–æ…¢çš„è¡Œä¸šï¼Œåˆ™é¢„æµ‹çš„æ„ä¹‰æ›´æ˜¯ä¸å¤§ã€‚\n\nè¦åº”å¯¹å˜åŒ–ï¼Œä¸»è¦æ˜¯å°†å˜ä¸ä¸å˜åˆ†éš”å¼€æ¥ã€‚\n\nè¿™é‡Œå¯ä»¥é’ˆå¯¹ä¸šåŠ¡ï¼Œæç‚¼å˜åŒ–å±‚å’Œç¨³å®šå±‚ï¼Œé€šè¿‡å˜åŒ–å±‚å°†å˜åŒ–éš”ç¦»ã€‚æ¯”å¦‚é€šè¿‡ä¸€ä¸ª DAO æœåŠ¡æ¥å¯¹æ¥å„ç§å˜åŒ–çš„å­˜å‚¨è½½ä½“ï¼Œä½†æ˜¯ä¸Šå±‚ç¨³å®šçš„é€»è¾‘ä¸ç”¨çŸ¥æ™“å½“å‰é‡‡ç”¨ä½•ç§å­˜å‚¨ï¼Œåªéœ€æŒ‰ç…§å›ºå®šçš„æ¥å£è®¿é—® DAO å³å¯è·å–æ•°æ®ã€‚\n\nä¹Ÿå¯ä»¥å°†ä¸€äº›å®ç°ç»†èŠ‚å‰¥ç¦»å¼€æ¥ï¼Œæç‚¼å‡ºæŠ½è±¡å±‚ï¼Œä»…åœ¨å®ç°å±‚å»å°è£…å˜åŒ–ã€‚æ¯”å¦‚é¢å¯¹è¿è¥ä¸Šç»å¸¸å˜åŒ–çš„ä¸šåŠ¡è§„åˆ™ï¼Œå¯ä»¥æç‚¼å‡ºä¸€ä¸ªè§„åˆ™å¼•æ“æ¥å®ç°æ ¸å¿ƒçš„æŠ½è±¡é€»è¾‘ï¼Œè€Œå…·ä½“çš„è§„åˆ™å®ç°åˆ™å¯ä»¥æŒ‰éœ€å¢åŠ ã€‚\n\nå¦‚æœæ˜¯é¢å¯¹ä¸€ä¸ªæ—§ç³»ç»Ÿçš„ç»´æŠ¤ï¼Œæ¥åˆ°äº†æ–°çš„é‡å¤æ€§éœ€æ±‚ï¼Œè€Œæ—§ç³»ç»Ÿå¹¶ä¸æ”¯æŒè¾ƒå¥½çš„å¯æ‰©å±•æ€§ï¼Œè¿™æ—¶æ˜¯å¦éœ€è¦èŠ±è´¹æ—¶é—´ç²¾åŠ›å»é‡æ„å‘¢ï¼Ÿä½œè€…ä¹Ÿæå‡ºäº†ã€Šé‡æ„ã€‹ä¸€ä¹¦ä¸­æåˆ°çš„åŸåˆ™ï¼šäº‹ä¸è¿‡ä¸‰ï¼Œä¸‰åˆ™é‡æ„ã€‚\n\nç®€è€Œè¨€ä¹‹ï¼Œä¸è¦ä¸€å¼€å§‹å°±è€ƒè™‘å¤æ‚çš„åšæ³•å»æ»¡è¶³å¯æ‰©å±•æ€§ï¼Œè€Œæ˜¯ç­‰åˆ°ç¬¬ä¸‰æ¬¡é‡åˆ°ç±»ä¼¼çš„å®ç°æ—¶å†æ¥é‡æ„ï¼Œé‡æ„çš„æ—¶å€™é‡‡å–ä¸Šè¿°è¯´çš„éš”ç¦»æˆ–è€…å°è£…çš„æ–¹æ¡ˆã€‚\n\nè¿™ä¸€åŸåˆ™å¯¹æ–°ç³»ç»Ÿå¼€å‘ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚æ€»è€Œè¨€ä¹‹å°±æ˜¯ï¼Œä¸è¦ä¸ºéš¾ä»¥é¢„æµ‹çš„æœªæ¥å»è¿‡åº¦è®¾è®¡ï¼Œä¸ºæ˜ç¡®çš„æœªæ¥ä¿ç•™é€‚é‡çš„å¯æ‰©å±•æ€§å³å¯ã€‚\n\n- **ä½æˆæœ¬**\n\nä¸Šé¢è¯´çš„é«˜æ€§èƒ½ã€é«˜å¯ç”¨éƒ½éœ€è¦å¢åŠ æœºå™¨ï¼Œå¸¦æ¥çš„æ˜¯æˆæœ¬çš„å¢åŠ ï¼Œè€Œå¾ˆå¤šæ—¶å€™ç ”å‘çš„é¢„ç®—æ˜¯æœ‰é™çš„ã€‚æ¢å¥è¯è¯´ï¼Œä½æˆæœ¬å¾€å¾€å¹¶ä¸æ˜¯æ¶æ„è®¾è®¡çš„é¦–è¦ç›®æ ‡ï¼Œè€Œæ˜¯è®¾è®¡æ¶æ„æ—¶çš„çº¦æŸé™åˆ¶ã€‚\n\né‚£å¦‚ä½•åœ¨æœ‰é™çš„æˆæœ¬ä¸‹æ»¡è¶³å¤æ‚æ€§è¦æ±‚å‘¢ï¼Ÿå¾€å¾€åªæœ‰â€œåˆ›æ–°â€æ‰èƒ½è¾¾åˆ°ä½æˆæœ¬çš„ç›®æ ‡ã€‚ä¸¾å‡ ä¸ªä¾‹å­ï¼š\n\n> NoSQL çš„å‡ºç°æ˜¯ä¸ºè§£å†³å…³ç³»å‹æ•°æ®åº“åº”å¯¹é«˜å¹¶å‘çš„é—®é¢˜ã€‚ å…¨æ–‡æœç´¢å¼•æ“çš„å‡ºç°æ˜¯ä¸ºè§£å†³æ•°æ®åº“ like æœç´¢æ•ˆç‡çš„é—®é¢˜ã€‚Hadoop çš„å‡ºç°æ˜¯ä¸ºè§£å†³æ–‡ä»¶ç³»ç»Ÿæ— æ³•åº”å¯¹æµ·é‡æ•°æ®å­˜å‚¨ä¸è®¡ç®—çš„é—®é¢˜ã€‚Facebook çš„ HipHop PHP å’Œ HHVM çš„å‡ºç°æ˜¯ä¸ºè§£å†³ PHP è¿è¡Œä½æ•ˆé—®é¢˜ã€‚æ–°æµªå¾®åšå¼•å…¥ SSD Cache åš L2 ç¼“å­˜æ˜¯ä¸ºè§£å†³ Redis é«˜æˆæœ¬ã€å®¹é‡å°ã€ç©¿é€ DB çš„é—®é¢˜ã€‚Linkedin å¼•å…¥ Kafka æ˜¯ä¸ºè§£å†³æµ·é‡äº‹ä»¶é—®é¢˜ã€‚\n\n\n\nä¸Šè¿°æ¡ˆä¾‹éƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ˜¾è‘—å¢åŠ æˆæœ¬çš„å‰æä¸‹ï¼Œå®ç°ç³»ç»Ÿçš„ç›®æ ‡ã€‚\n\nè¿™é‡Œè¿˜è¦è¯´æ˜çš„æ˜¯ï¼Œåˆ›é€ æ–°æŠ€æœ¯çš„å¤æ‚åº¦æœ¬èº«å°±æ˜¯å¾ˆé«˜çš„ï¼Œå› æ­¤ä¸€èˆ¬ä¸­å°å…¬å¸åŸºæœ¬éƒ½æ˜¯é å¼•å…¥ç°æœ‰çš„æˆç†Ÿæ–°æŠ€æœ¯æ¥è¾¾åˆ°ä½æˆæœ¬çš„ç›®æ ‡ï¼›è€Œå¤§å…¬å¸æ‰æ›´æœ‰å¯èƒ½è‡ªå·±å»åˆ›é€ æ–°çš„æŠ€æœ¯æ¥è¾¾åˆ°ä½æˆæœ¬çš„ç›®æ ‡ï¼Œå› ä¸ºå¤§å…¬å¸æ‰æœ‰è¶³å¤Ÿçš„èµ„æºã€æŠ€æœ¯å’Œæ—¶é—´å»åˆ›é€ æ–°æŠ€æœ¯ã€‚\n\n- **å®‰å…¨**\n\nå®‰å…¨æ˜¯ä¸€ä¸ªç ”å‘äººå‘˜å¾ˆç†Ÿæ‚‰çš„ç›®æ ‡ï¼Œä»æ•´ä½“æ¥è¯´ï¼Œå®‰å…¨åŒ…å«ä¸¤æ–¹é¢ï¼šåŠŸèƒ½å®‰å…¨å’Œæ¶æ„å®‰å…¨ã€‚\n\nåŠŸèƒ½å®‰å…¨æ˜¯ä¸ºäº†â€œé˜²å°å·â€ï¼Œå³é¿å…ç³»ç»Ÿå› å®‰å…¨æ¼æ´è€Œè¢«çªƒå–æ•°æ®ï¼Œå¦‚ SQL æ³¨å…¥ã€‚å¸¸è§çš„å®‰å…¨æ¼æ´å·²ç»æœ‰å¾ˆå¤šæ¡†æ¶æ”¯æŒï¼Œæ‰€ä»¥æ›´å»ºè®®åˆ©ç”¨ç°æœ‰æ¡†æ¶çš„å®‰å…¨èƒ½åŠ›ï¼Œæ¥é¿å…é‡å¤å¼€å‘ï¼Œä¹Ÿé¿å…å› è‡ªèº«è€ƒè™‘ä¸å¤Ÿå…¨é¢è€Œé—æ¼ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä»éœ€æŒç»­æ”»é˜²æ¥å®Œå–„è‡ªèº«çš„å®‰å…¨ã€‚\n\næ¶æ„å®‰å…¨æ˜¯ä¸ºäº†â€œé˜²å¼ºç›—â€ï¼Œå³é¿å…ç³»ç»Ÿè¢«æš´åŠ›æ”»å‡»å¯¼è‡´ç³»ç»Ÿæ•…éšœï¼Œæ¯”å¦‚ DDOS æ”»å‡»ã€‚è¿™é‡Œä¸€æ–¹é¢åªèƒ½é€šè¿‡é˜²ç«å¢™é›†è¿è¥å•†æˆ–äº‘æœåŠ¡å•†çš„å¤§å¸¦å®½å’Œæµé‡æ¸…æ´—çš„èƒ½åŠ›è¿›è¡Œé˜²èŒƒï¼Œå¦ä¸€æ–¹é¢ä¹Ÿéœ€è¦åšå¥½æ”»å‡»å‘ç°ä¸å¹²é¢„ã€æ¢å¤çš„èƒ½åŠ›ã€‚\n\n- **è§„æ¨¡**\n\næ¶æ„å¸ˆåœ¨å®£è®²æ—¶å¾€å¾€ä¼šå…ˆè¯´è‡ªå·±ä»»èŒå’Œè®¾è®¡è¿‡çš„å¤§å‹å…¬å¸çš„æ¶æ„ï¼Œè¿™æ˜¯å› ä¸ºå½“ç³»ç»Ÿçš„è§„æ¨¡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œå¤æ‚åº¦ä¼šå‘ç”Ÿè´¨çš„å˜åŒ–ï¼Œå³æ‰€è°“é‡å˜å¼•èµ·è´¨å˜ã€‚\n\nè¿™ä¸ªé‡ï¼Œä½“ç°åœ¨è®¿é—®é‡ã€åŠŸèƒ½æ•°é‡åŠæ•°æ®é‡ä¸Šã€‚\n\nè®¿é—®é‡æ˜ å°„åˆ°å¯¹é«˜æ€§èƒ½çš„è¦æ±‚ã€‚åŠŸèƒ½æ•°é‡éœ€è¦è§†å…·ä½“ä¸šåŠ¡ä¼šå¸¦æ¥ä¸åŒçš„å¤æ‚åº¦ã€‚è€Œæ•°æ®é‡å¸¦æ¥çš„æ”¶é›†ã€åŠ å·¥ã€å­˜å‚¨ã€åˆ†ææ–¹é¢çš„æŒ‘æˆ˜ï¼Œç°æœ‰çš„æ–¹æ¡ˆåŸºæœ¬éƒ½æ˜¯åŸºäº Google çš„ä¸‰ç¯‡å¤§æ•°æ®è®ºæ–‡çš„ç†è®ºï¼š\n\n> Google File System æ˜¯å¤§æ•°æ®æ–‡ä»¶å­˜å‚¨çš„æŠ€æœ¯ç†è®ºã€‚Google Bigtable æ˜¯åˆ—å¼æ•°æ®å­˜å‚¨çš„æŠ€æœ¯ç†è®ºã€‚Google MapReduce æ˜¯å¤§æ•°æ®è¿ç®—çš„æŠ€æœ¯ç†è®ºã€‚\n\nç»è¿‡ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œå¤æ‚åº¦æ¥æºå¾ˆå¤šï¼Œæƒ³è¦ä¸€ä¸€åº”å¯¹ï¼Œä¼¼ä¹ä¼šå¾—åˆ°ä¸€ä¸ªå¤æ‚æ— æ¯”çš„æ¶æ„ï¼Œä½†å¯¹äºæ¶æ„è®¾è®¡æ¥è¯´ï¼Œå…¶å®åˆšå¼€å§‹è®¾è®¡æ—¶è¶Šç®€å•è¶Šå¥½ï¼Œåªè¦èƒ½è§£å†³é—®é¢˜ï¼Œå°±å¯ä»¥ä»ç®€å•å¼€å§‹å†æ…¢æ…¢å»æ¼”åŒ–ï¼Œå¯¹åº”çš„æ˜¯ä¸‹é¢ä¸‰æ¡åŸåˆ™ï¼š\n\n> åˆé€‚åŸåˆ™ï¼šä¸éœ€è¦ä¸€å¼€å§‹å°±æŒ‘é€‰ä¸šç•Œé¢†å…ˆçš„æ¶æ„ï¼Œå®ƒä¹Ÿè®¸ä¼˜ç§€ï¼Œä½†å¯èƒ½ä¸é‚£ä¹ˆé€‚åˆè‡ªå·±ï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šç›®å‰ç”¨ä¸åˆ°çš„èƒ½åŠ›æˆ–è€…å¤§å¤§è¶…å‡ºè¯‰æ±‚ä»è€Œå¢åŠ å¾ˆå¤šæˆæœ¬ã€‚å…¶å®æ›´éœ€è¦è€ƒè™‘çš„æ˜¯åˆç†åœ°å°†èµ„æºæ•´åˆåœ¨ä¸€èµ·å‘æŒ¥å‡ºæœ€å¤§åŠŸæ•ˆï¼Œå¹¶èƒ½å¤Ÿå¿«é€Ÿè½åœ°ã€‚ç®€å•åŸåˆ™ï¼šæœ‰æ—¶å€™ä¸ºäº†æ˜¾ç¤ºå‡ºè‡ªèº«çš„èƒ½åŠ›ï¼Œå¾€å¾€ä¼šåœ¨ä¸€å¼€å§‹å°±å°†ç³»ç»Ÿè®¾è®¡å¾—éå¸¸å¤æ‚ï¼Œå¤æ‚å¯èƒ½ä»£è¡¨ç€å…ˆè¿›ï¼Œä½†æ›´å¯èƒ½ä»£è¡¨ç€â€œé—®é¢˜â€ï¼Œç»„ä»¶è¶Šå¤šï¼Œå°±è¶Šå¯èƒ½å‡ºæ•…éšœï¼Œè¶Šå¯èƒ½å½±å“å…³è”ç€çš„ç»„ä»¶ï¼Œå®šä½é—®é¢˜ä¹Ÿæ›´åŠ å›°éš¾ã€‚å…¶å®åªè¦èƒ½å¤Ÿè§£å†³è¯‰æ±‚å³å¯ã€‚æ¼”åŒ–åŸåˆ™ï¼šä¸è¦å¦„æƒ³ä¸€æ­¥åˆ°ä½ï¼Œæ²¡æœ‰äººå¯ä»¥å‡†ç¡®é¢„æµ‹æœªæ¥æ‰€æœ‰å‘å±•ï¼Œè½¯ä»¶ä¸åƒå»ºç­‘ï¼Œå˜åŒ–æ‰æ˜¯ä¸»é¢˜ã€‚æ¶æ„çš„è®¾è®¡åº”è¯¥å…ˆæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œé€‚å½“çš„é¢„ç•™æ‰©å±•æ€§ï¼Œç„¶ååœ¨æœªæ¥çš„ä¸šåŠ¡å‘å±•ä¸­å†ä¸æ–­åœ°è¿­ä»£ï¼Œä¿ç•™æœ‰é™çš„è®¾è®¡ï¼Œä¿®å¤ç¼ºé™·ï¼Œæ”¹æ­£é”™è¯¯ï¼Œå»é™¤æ— ç”¨éƒ¨åˆ†ã€‚è¿™ä¹Ÿæ˜¯é‡æ„ã€é‡å†™çš„ä»·å€¼æ‰€åœ¨ã€‚\n\nå³ä½¿æ˜¯ QQã€æ·˜å®è¿™ç§å¦‚ä»Šå·²ç»éå¸¸å¤æ‚çš„ç³»ç»Ÿï¼Œåˆšå¼€å§‹æ—¶ä¹Ÿåªæ˜¯ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿï¼Œç”šè‡³æ·˜å®éƒ½æ˜¯ç›´æ¥ä¹°æ¥çš„ç³»ç»Ÿï¼Œéšç€ä¸šåŠ¡å‘å±•ä¹Ÿåªæ˜¯å…ˆåŠ æœåŠ¡å™¨ã€å¼•å…¥ä¸€äº›ç»„ä»¶è§£å†³æ€§èƒ½é—®é¢˜ï¼Œç›´åˆ°è¾¾åˆ°ç“¶é¢ˆæ‰å»é‡æ„é‡å†™ï¼Œé‡æ–°åœ¨æ–°çš„å¤æ‚åº¦è¦æ±‚ä¸‹è®¾è®¡æ–°çš„æ¶æ„ã€‚\n\næ˜ç¡®äº†è®¾è®¡åŸåˆ™åï¼Œå½“é¢å¯¹ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œæ¶æ„è®¾è®¡ï¼š\n\n> è¯†åˆ«å¤æ‚åº¦ï¼šæ— è®ºæ˜¯æ–°è®¾è®¡ä¸€ä¸ªç³»ç»Ÿè¿˜æ˜¯æ¥æ‰‹ä¸€ä¸ªæ··ä¹±çš„ç³»ç»Ÿï¼Œç¬¬ä¸€æ­¥éƒ½æ˜¯å…ˆå°†ä¸»è¦çš„å¤æ‚åº¦é—®é¢˜åˆ—å‡ºæ¥ï¼Œç„¶åæ ¹æ®ä¸šåŠ¡ã€æŠ€æœ¯ã€å›¢é˜Ÿç­‰ç»¼åˆæƒ…å†µè¿›è¡Œæ’åºï¼Œä¼˜å…ˆè§£å†³å½“å‰é¢ä¸´çš„æœ€ä¸»è¦çš„å¤æ‚åº¦é—®é¢˜ã€‚å¤æ‚åº¦çš„ä¸»è¦æ¥æºä¸Šæ–‡å·²ç»è¯´è¿‡ï¼Œå¯ä»¥æŒ‰ç…§ç»éªŒæˆ–è€…æ’æŸ¥æ³•è¿›è¡Œåˆ†æã€‚æ–¹æ¡ˆå¯¹æ¯”ï¼šå…ˆçœ‹çœ‹ä¸šç•Œæ˜¯å¦æœ‰ç±»ä¼¼çš„ä¸šåŠ¡ï¼Œäº†è§£ä»–ä»¬æ˜¯æ€ä¹ˆè§£å†³é—®é¢˜çš„ï¼Œç„¶åæå‡º3~5ä¸ªå¤‡é€‰æ–¹æ¡ˆï¼Œä¸è¦åªè€ƒè™‘åšä¸€ä¸ªæœ€ä¼˜ç§€çš„æ–¹æ¡ˆï¼Œä¸€ä¸ªäººçš„è®¤çŸ¥èŒƒå›´å¸¸å¸¸æ˜¯æœ‰é™çš„ï¼Œé€¼è‡ªå·±å¤šæ€è€ƒå‡ ä¸ªæ–¹æ¡ˆå¯ä»¥æœ‰æ•ˆè§„é¿å› ä¸ºæ€ç»´ç‹­éš˜å¯¼è‡´çš„å±€é™æ€§ï¼Œå½“ç„¶ä¹Ÿä¸è¦è¿‡å¤šï¼Œä¸ç”¨ç»™å‡ºéå¸¸è¯¦ç»†çš„æ–¹æ¡ˆï¼Œå¤ªæ¶ˆè€—ç²¾åŠ›ã€‚å¤‡é€‰æ–¹æ¡ˆçš„å·®å¼‚è¦æ¯”è¾ƒæ˜æ˜¾ï¼Œæ‰æœ‰æ‰©å®½æ€è·¯å’Œå¯¹æ¯”çš„ä»·å€¼ã€‚è®¾è®¡è¯¦ç»†æ–¹æ¡ˆï¼šå½“å¤šä¸ªæ–¹æ¡ˆå¯¹æ¯”å¾—å‡ºæœ€ç»ˆé€‰æ‹©åï¼Œå°±å¯ä»¥å¯¹ç›®æ ‡æ–¹æ¡ˆè¿›è¡Œè¯¦ç»†çš„è®¾è®¡ï¼Œå…³é”®ç»†èŠ‚éœ€è¦æ¯”è¾ƒæ·±å…¥ï¼Œå¦‚æœæ–¹æ¡ˆæœ¬èº«å¾ˆå¤æ‚ï¼Œä¹Ÿå¯ä»¥é‡‡å–åˆ†æ­¥éª¤ã€åˆ†é˜¶æ®µã€åˆ†ç³»ç»Ÿçš„å®ç°æ–¹å¼æ¥é™ä½å®ç°å¤æ‚åº¦ã€‚å½“æ–¹æ¡ˆéå¸¸åºå¤§çš„æ—¶å€™ï¼Œå¯ä»¥æ±‡é›†ä¸€ä¸ªå›¢é˜Ÿçš„æ™ºæ…§å’Œç»éªŒæ¥å…±åŒè®¾è®¡ï¼Œé˜²æ­¢å› æ¶æ„å¸ˆçš„æ€ç»´ç›²åŒºå¯¼è‡´é—®é¢˜ã€‚\n\n## é«˜æ€§èƒ½æ¶æ„æ¨¡å¼\n\n### å­˜å‚¨é«˜æ€§èƒ½\n\näº’è”ç½‘ä¸šåŠ¡å¤§å¤šæ˜¯æ•°æ®å¯†é›†å‹çš„ä¸šåŠ¡ï¼Œå…¶å¯¹æ€§èƒ½çš„å‹åŠ›ä¹Ÿå¸¸å¸¸æ¥è‡ªäºæµ·é‡ç”¨æˆ·å¯¹æ•°æ®çš„é«˜é¢‘è¯»å†™å‹åŠ›ä¸Šã€‚å› æ­¤è§£å†³é«˜æ€§èƒ½é—®é¢˜ï¼Œé¦–å…ˆè¦è§£å†³æ•°æ®è¯»å†™çš„å­˜å‚¨é«˜æ€§èƒ½é—®é¢˜ã€‚\n\n- **è¯»å†™åˆ†ç¦»**\n\nåœ¨å¤§å¤šæ•°ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·æŸ¥è¯¢å’Œä¿®æ”¹æ•°æ®çš„é¢‘ç‡æ˜¯ä¸åŒçš„ï¼Œç”šè‡³æ˜¯å·®åˆ«å¾ˆå¤§çš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯è¯»å¤šå†™å°‘çš„ï¼Œå› æ­¤å¯ä»¥å°†å¯¹æ•°æ®çš„è¯»å’Œå†™æ“ä½œåˆ†å¼€å¯¹å¾…ï¼Œå¯¹å‹åŠ›æ›´å¤§çš„è¯»æ“ä½œæä¾›é¢å¤–çš„æœºå™¨åˆ†æ‹…å‹åŠ›ï¼Œè¿™å°±æ˜¯è¯»å†™åˆ†ç¦»ã€‚\n\nè¯»å†™åˆ†ç¦»çš„åŸºæœ¬å®ç°æ˜¯æ­å»ºæ•°æ®åº“çš„ä¸»ä»é›†ç¾¤ï¼Œæ ¹æ®éœ€è¦æä¾›ä¸€ä¸»ä¸€ä»æˆ–ä¸€ä¸»å¤šä»ã€‚\n\næ³¨æ„æ˜¯ä¸»ä»ä¸æ˜¯ä¸»å¤‡ï¼Œä»å’Œå¤‡çš„å·®åˆ«åœ¨äºä»æœºæ˜¯è¦å¹²æ´»çš„ã€‚\n\né€šå¸¸åœ¨è¯»å¤šå†™å°‘çš„æƒ…å†µä¸‹ï¼Œä¸»æœºè´Ÿè´£è¯»å†™æ“ä½œï¼Œä»æœºåªè´Ÿè´£è¯»æ“ä½œï¼Œè´Ÿè´£å¸®ä¸»æœºåˆ†æ‹…è¯»æ“ä½œçš„å‹åŠ›ã€‚è€Œæ•°æ®ä¼šé€šè¿‡å¤åˆ¶æœºåˆ¶ï¼ˆå¦‚å…¨åŒæ­¥ã€åŠåŒæ­¥ã€å¼‚æ­¥ï¼‰åŒæ­¥åˆ°ä»æœºï¼Œæ¯å°æœåŠ¡å™¨éƒ½æœ‰æ‰€æœ‰ä¸šåŠ¡æ•°æ®ã€‚\n\næ—¢ç„¶æœ‰æ•°æ®çš„åŒæ­¥ï¼Œå°±ä¸€å®šå­˜åœ¨å¤åˆ¶å»¶è¿Ÿå¯¼è‡´çš„ä»æœºæ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜æœ‰å‡ ç§å¸¸è§çš„è§£æ³•ï¼Œå¦‚ï¼š\n\n> å†™æ“ä½œååŒä¸€ç”¨æˆ·ä¸€æ®µæ—¶é—´å†…çš„è¯»æ“ä½œéƒ½å‘ç»™ä¸»æœºï¼Œé¿å…æ•°æ®è¿˜æ²¡åŒæ­¥åˆ°ä»æœºï¼Œä½†è¿™ä¸ªé€»è¾‘å®¹æ˜“é—æ¼ã€‚è¯»ä»æœºå¤±è´¥åå†è¯»ä¸€æ¬¡ä¸»æœºï¼Œè¯¥æ–¹æ³•åªèƒ½è§£å†³æ–°æ•°æ®æœªåŒæ­¥çš„é—®é¢˜ï¼Œæ— æ³•è§£å†³æ—§æ•°æ®ä¿®æ”¹çš„é—®é¢˜ï¼ˆä¸ä¼šè¯»å–å¤±è´¥ï¼‰ï¼Œä¸”äºŒæ¬¡è¯»å–ä¸»æœºä¼šç»™ä¸»æœºå¸¦æ¥è´Ÿæ‹…ï¼Œå®¹æ˜“è¢«é’ˆå¯¹æ€§æ”»å‡»ã€‚å…³é”®è¯»å†™æ“ä½œå…¨éƒ¨èµ°ä¸»æœºï¼Œä»æœºä»…è´Ÿè´£éå…³é”®é“¾è·¯çš„è¯»ï¼Œè¯¥æ–¹æ³•æ˜¯åŸºäºä¿éšœå…³é”®ä¸šåŠ¡çš„æ€è·¯ã€‚\n\né™¤äº†æ•°æ®åŒæ­¥çš„é—®é¢˜ä¹‹å¤–ï¼Œåªè¦æ¶‰åŠä¸»ä»æœºåŒæ—¶æ”¯æŒä¸šåŠ¡è®¿é—®çš„ï¼Œå°±ä¸€å®šéœ€è¦åˆ¶å®šè¯·æ±‚åˆ†é…çš„æœºåˆ¶ã€‚ä¸Šé¢è¯´çš„å‡ ä¸ªé—®é¢˜è§£æ³•ä¹Ÿæ¶‰åŠäº†ä¸€äº›åˆ†é…æœºåˆ¶çš„ç»†èŠ‚ã€‚å…·ä½“åˆ°åˆ†é…æœºåˆ¶çš„å®ç°æ¥è¯´ï¼Œæœ‰ä¸¤ç§æ€è·¯ï¼š\n\n> ç¨‹åºä»£ç å°è£…ï¼šå®ç°ç®€å•ï¼Œå¯å¯¹ä¸šåŠ¡å®šåˆ¶åŒ–ï¼Œä½†æ¯ä¸ªè¯­è¨€éƒ½è¦è‡ªå·±å®ç°ä¸€æ¬¡ï¼Œä¸”å¾ˆéš¾åšåˆ°åŒæ­¥ä¿®æ”¹ï¼Œå› æ­¤é€‚åˆå°å›¢é˜Ÿã€‚ä¸­é—´ä»¶å°è£…ï¼šç‹¬ç«‹å‡ºä¸€å¥—ç³»ç»Ÿç®¡ç†è¯»å†™çš„åˆ†é…ï¼Œå¯¹ä¸šåŠ¡é€æ˜ï¼Œå…¼å®¹ SQL åè®®ï¼Œä¸šåŠ¡æœåŠ¡å™¨å°±æ— éœ€åšé¢å¤–ä¿®æ”¹é€‚é…ã€‚éœ€è¦æ”¯æŒå¤šè¯­è¨€ã€å®Œæ•´çš„ SQL è¯­æ³•ï¼Œæ¶‰åŠå¾ˆå¤šç»†èŠ‚ï¼Œå®¹æ˜“å‡º BUGï¼Œä¸”æœ¬èº«æ˜¯ä¸ªå•ç‚¹ï¼Œéœ€è¦ç‰¹åˆ«ä¿éšœæ€§èƒ½å’Œå¯ç”¨æ€§ï¼Œå› æ­¤é€‚åˆå¤§å…¬å¸ã€‚\n\n- **åˆ†åº“åˆ†è¡¨**\n\né™¤äº†é«˜é¢‘è®¿é—®çš„å‹åŠ›ï¼Œå½“æ•°æ®é‡å¤§äº†ä»¥åï¼Œä¹Ÿä¼šå¸¦æ¥æ•°æ®åº“å­˜å‚¨æ–¹é¢çš„å‹åŠ›ã€‚æ­¤æ—¶å°±éœ€è¦è€ƒè™‘åˆ†åº“åˆ†è¡¨çš„é—®é¢˜ã€‚åˆ†åº“åˆ†è¡¨æ—¢å¯ä»¥ç¼“è§£è®¿é—®çš„å‹åŠ›ï¼Œä¹Ÿå¯ä»¥åˆ†æ•£å­˜å‚¨çš„å‹åŠ›ã€‚\n\nå…ˆè¯´åˆ†åº“ï¼Œæ‰€è°“åˆ†åº“ï¼Œå°±æ˜¯æŒ‡ä¸šåŠ¡æŒ‰ç…§åŠŸèƒ½ã€æ¨¡å—ã€é¢†åŸŸç­‰ä¸åŒï¼Œå°†æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹ä¸­ã€‚\n\næ¯”å¦‚åŸæœ¬æ˜¯ä¸€ä¸ª MySQL æ•°æ®åº“å®ä¾‹ï¼Œåœ¨åº“ä¸­æŒ‰ç…§ä¸åŒä¸šåŠ¡å»ºäº†å¤šå¼ è¡¨ï¼Œå¤§ä½“å¯ä»¥å½’ç±»ä¸º Aã€B ä¸¤ä¸ªé¢†åŸŸçš„æ•°æ®ã€‚ç°åœ¨æ–°å»ºä¸€ä¸ªåº“ï¼Œå°†åŸåº“ä¸­ A é¢†åŸŸçš„æ•°æ®è¿ç§»åˆ°æ–°çš„åº“ä¸­å­˜å‚¨ï¼Œè¿˜æ˜¯æŒ‰éœ€å»ºè¡¨ï¼Œè€Œ B é¢†åŸŸçš„æ•°æ®ç»§ç»­ç•™åœ¨åŸåº“ä¸­ã€‚\n\nåˆ†åº“ä¸€æ–¹é¢å¯ä»¥ç¼“è§£è®¿é—®å’Œå­˜å‚¨çš„å‹åŠ›ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¢åŠ æŠ—é£é™©èƒ½åŠ›ï¼Œå½“ä¸€ä¸ªåº“å‡ºé—®é¢˜åï¼Œå¦ä¸€ä¸ªåº“ä¸­çš„æ•°æ®å¹¶ä¸ä¼šå—åˆ°å½±å“ï¼Œè€Œä¸”è¿˜èƒ½åˆ†å¼€ç®¡ç†æƒé™ã€‚\n\nä½†åˆ†åº“ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼šåŸæœ¬åŒä¸€ä¸ªåº“ä¸­çš„ä¸åŒè¡¨å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œè”è¡¨æŸ¥è¯¢ï¼Œåˆ†åº“ååˆ™ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ç”±äºæ•°æ®åœ¨ä¸åŒçš„åº“ä¸­ï¼Œå½“è¦æ“ä½œä¸¤ä¸ªåº“ä¸­çš„æ•°æ®æ—¶ï¼Œæ— æ³•ä½¿ç”¨äº‹åŠ¡æ“ä½œï¼Œä¸€è‡´æ€§ä¹Ÿå˜å¾—æ›´éš¾ä»¥ä¿éšœã€‚è€Œä¸”å½“å¢åŠ å¤‡åº“æ¥ä¿éšœå¯ç”¨æ€§çš„æ—¶å€™ï¼Œæˆæœ¬æ˜¯æˆå€å¢åŠ çš„ã€‚\n\nåŸºäºä»¥ä¸Šé—®é¢˜ï¼Œåˆåˆ›çš„ä¸šåŠ¡å¹¶ä¸å»ºè®®åœ¨ä¸€å¼€å§‹å°±åšè¿™ç§æ‹†åˆ†ï¼Œä¼šå¢åŠ å¾ˆå¤šå¼€å‘æ—¶çš„æˆæœ¬å’Œå¤æ‚åº¦ï¼Œæ‹–æ…¢ä¸šåŠ¡çš„èŠ‚å¥ã€‚\n\nå†è¯´åˆ†è¡¨ã€‚æ‰€è°“åˆ†è¡¨ï¼Œå°±æ˜¯å°†åŸæœ¬å­˜å‚¨åœ¨ä¸€å¼ è¡¨é‡Œçš„æ•°æ®ï¼ŒæŒ‰ç…§ä¸åŒçš„ç»´åº¦ï¼Œæ‹†åˆ†æˆå¤šå¼ è¡¨æ¥å­˜å‚¨ã€‚\n\næŒ‰ç…§è¯‰æ±‚ä¸ä¸šåŠ¡çš„ç‰¹æ€§ä¸åŒï¼Œå¯ä»¥é‡‡ç”¨å‚ç›´åˆ†è¡¨æˆ–æ°´å¹³åˆ†è¡¨çš„æ–¹å¼ã€‚\n\nå‚ç›´åˆ†è¡¨ç›¸å½“äºå‚ç›´åœ°ç»™åŸè¡¨åˆ‡äº†ä¸€åˆ€ï¼ŒæŠŠä¸åŒçš„å­—æ®µæ‹†åˆ†åˆ°ä¸åŒçš„å­è¡¨ä¸­ï¼Œè¿™æ ·æ‹†åˆ†åï¼ŒåŸæœ¬è®¿é—®ä¸€å¼ è¡¨å¯ä»¥è·å–çš„æ‰€æœ‰å­—æ®µï¼Œç°åœ¨åˆ™éœ€è¦è®¿é—®ä¸åŒçš„è¡¨è·å–ã€‚\n\nå‚ç›´åˆ†è¡¨é€‚åˆå°†è¡¨ä¸­æŸäº›ä¸å¸¸ç”¨åˆå äº†å¤§é‡ç©ºé—´çš„åˆ—ï¼ˆå­—æ®µï¼‰æ‹†åˆ†å‡ºå»ï¼Œå¯ä»¥æå‡è®¿é—®å¸¸ç”¨å­—æ®µçš„æ€§èƒ½ã€‚\n\nä½†ç›¸åº”çš„ï¼Œå½“çœŸçš„éœ€è¦çš„å­—æ®µå¤„äºä¸åŒè¡¨ä¸­æ—¶ï¼Œæˆ–è€…è¦æ–°å¢è®°å½•å­˜å‚¨æ‰€æœ‰å­—æ®µæ•°æ®æ—¶ï¼Œè¦æ“ä½œçš„è¡¨å˜å¤šäº†ã€‚\n\næ°´å¹³åˆ†è¡¨ç›¸å½“äºæ¨ªç€ç»™åŸè¡¨åˆ‡äº†ä¸€åˆ€ï¼Œé‚£ä¹ˆåŸè¡¨ä¸­çš„è®°å½•ä¼šè¢«åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒçš„å­è¡¨ä¸­ï¼Œä½†æ˜¯æ¯å¼ å­è¡¨çš„å­—æ®µéƒ½æ˜¯å…¨éƒ¨å­—æ®µã€‚\n\næ°´å¹³åˆ†è¡¨é€‚åˆè¡¨çš„é‡çº§å¾ˆå¤§ä»¥è‡³å½±å“è®¿é—®æ€§èƒ½çš„åœºæ™¯ï¼Œä½•æ—¶è¯¥æ‹†åˆ†å¹¶æ²¡æœ‰ç»å¯¹çš„æŒ‡æ ‡ï¼Œä¸€èˆ¬è®°å½•æ•°è¶…è¿‡åƒä¸‡æ—¶å°±éœ€è¦è­¦è§‰äº†ã€‚\n\nä¸åŒäºå‚ç›´åˆ†è¡¨ä¾ç„¶èƒ½è®¿é—®åˆ°æ‰€æœ‰è®°å½•ï¼Œæ°´å¹³åˆ†è¡¨åæ— æ³•å†åœ¨ä¸€å¼ è¡¨ä¸­è®¿é—®æ‰€æœ‰æ•°æ®äº†ï¼Œå› æ­¤å¾ˆå¤šæŸ¥è¯¢æ“ä½œä¼šå—åˆ°å½±å“ï¼Œæ¯”å¦‚ join æ“ä½œå°±éœ€è¦å¤šæ¬¡æŸ¥è¯¢ååˆå¹¶ç»“æœï¼Œcount æ“ä½œä¹Ÿéœ€è¦è®¡ç®—å¤šè¡¨çš„ç»“æœåç›¸åŠ ï¼Œå¦‚æœç»å¸¸ç”¨åˆ° count çš„æ€»æ•°ï¼Œå¯ä»¥é¢å¤–ç»´æŠ¤ä¸€ä¸ªæ€»æ•°è¡¨å»æ›´æ–°ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚\n\nå€¼å¾—ç‰¹åˆ«æå‡ºçš„æ˜¯èŒƒå›´æŸ¥è¯¢ï¼ŒåŸæœ¬çš„ä¸€å¼ è¡¨å¯ä»¥é€šè¿‡èŒƒå›´æŸ¥è¯¢åˆ°çš„æ•°æ®ï¼Œåˆ†è¡¨åä¹Ÿéœ€è¦å¤šæ¬¡æŸ¥è¯¢ååˆå¹¶æ•°æ®ï¼Œå¦‚æœæ˜¯ä¸šåŠ¡ç»å¸¸ç”¨åˆ°çš„èŒƒå›´æŸ¥è¯¢ï¼Œé‚£å»ºè®®å¹²è„†å°±æŒ‰ç…§è¿™ç§æ–¹å¼æ¥åˆ†è¡¨ï¼Œè¿™ä¹Ÿæ˜¯åˆ†è¡¨çš„è·¯ç”±æ–¹å¼ä¹‹ä¸€ï¼šèŒƒå›´è·¯ç”±ã€‚\n\næ‰€è°“è·¯ç”±æ–¹å¼æ˜¯æŒ‡ï¼šåˆ†è¡¨åå½“æ–°æ’å…¥è®°å½•æ—¶ï¼Œå¦‚ä½•åˆ¤æ–­è¯¥å¾€å“ªå¼ è¡¨æ’å…¥ã€‚å¸¸ç”¨çš„æ’å…¥æ–¹å¼æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š\n\n> èŒƒå›´è·¯ç”±ï¼šæŒ‰ç…§æ—¶é—´èŒƒå›´ã€ID èŒƒå›´æˆ–è€…å…¶ä»–ä¸šåŠ¡å¸¸ç”¨èŒƒå›´å­—æ®µè·¯ç”±ã€‚è¿™ç§æ–¹å¼åœ¨æ‰©å……æ–°çš„è¡¨æ—¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œç›´æ¥åŠ è¡¨ç»™æ–°èŒƒå›´çš„æ•°æ®æ’å…¥å³å¯ï¼Œä½†æ˜¯æ•°é‡å’Œå†·çƒ­åˆ†å¸ƒå¯èƒ½æ˜¯ä¸å‡åŒ€çš„ã€‚ Hash è·¯ç”±ï¼šæ ¹æ® Hash è¿ç®—æ¥è·¯ç”±æ–°è®°å½•æ’å…¥çš„è¡¨ï¼Œè¿™ç§æ–¹å¼éœ€è¦æå‰å°±è§„åˆ’å¥½åˆ†å¤šå°‘å¼ è¡¨ï¼Œæ‰èƒ½å†³å®š Hash è¿ç®—æ–¹å¼ã€‚ä½†è¡¨æ•°é‡å…¶å®å¾ˆéš¾é¢„ä¼°ï¼Œå¯¼è‡´æœªæ¥éœ€è¦æ‰©å……æ–°è¡¨æ—¶å¾ˆéº»çƒ¦ï¼Œä½†æ•°æ®åœ¨ä¸åŒè¡¨ä¸­çš„åˆ†å¸ƒæ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚é…ç½®è·¯ç”±ï¼šæ–°å¢ä¸€ä¸ªè·¯ç”±è¡¨æ¥è®°å½•æ•°æ® id å’Œè¡¨ id çš„æ˜ å°„ï¼ŒæŒ‰ç…§è‡ªå®šä¹‰çš„æ–¹å¼éšæ—¶ä¿®æ”¹æ˜ å°„è§„åˆ™ï¼Œè®¾è®¡ç®€å•ï¼Œæ‰©å……æ–°è¡¨ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ä½†æ¯æ¬¡æ“ä½œè¡¨éƒ½éœ€è¦é¢å¤–æ“ä½œä¸€æ¬¡è·¯ç”±è¡¨ï¼Œå…¶æœ¬èº«ä¹Ÿæˆä¸ºäº†å•ç‚¹ç“¶é¢ˆã€‚\n\næ— è®ºæ˜¯å‚ç›´åˆ†è¡¨è¿˜æ˜¯æ°´å¹³åˆ†è¡¨ï¼Œå•è¡¨åˆ‡åˆ†ä¸ºå¤šè¡¨åï¼Œæ–°çš„è¡¨å³ä½¿åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥å¯è§‚çš„æ€§èƒ½æå‡ï¼Œå¦‚æœæ€§èƒ½èƒ½å¤Ÿæ»¡è¶³ä¸šåŠ¡è¦æ±‚ï¼Œå¯ä»¥ä¸æ‹†åˆ†åˆ°å¤šå°æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¯•ç«Ÿåˆ†åº“ä¹Ÿä¼šå¼•å…¥å¾ˆå¤šå¤æ‚æ€§çš„é—®é¢˜ï¼›å¦‚æœå•è¡¨æ‹†åˆ†ä¸ºå¤šè¡¨åï¼Œå•å°æœåŠ¡å™¨ä¾ç„¶æ— æ³•æ»¡è¶³æ€§èƒ½è¦æ±‚ï¼Œé‚£å°±ä¸å¾—ä¸å†æ¬¡è¿›è¡Œä¸šåŠ¡åˆ†åº“çš„è®¾è®¡äº†ã€‚\n\n- **NoSQL æ•°æ®åº“**\n\nä¸Šé¢å‘åˆ†åº“åˆ†è¡¨è®¨è®ºçš„éƒ½æ˜¯å…³ç³»å‹æ•°æ®åº“çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä½†å…³ç³»å‹æ•°æ®åº“ä¹Ÿæœ‰å…¶æ— æ³•è§„é¿çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚æ— æ³•ç›´æ¥å­˜å‚¨æŸç§ç»“æ„åŒ–çš„æ•°æ®ã€æ‰©å±•è¡¨ç»“æ„æ—¶ä¼šé”è¡¨å½±å“çº¿ä¸Šæ€§èƒ½ã€å¤§æ•°æ®åœºæ™¯ä¸‹ I/O è¾ƒé«˜ã€å…¨æ–‡æœç´¢çš„åŠŸèƒ½æ¯”è¾ƒå¼±ç­‰ã€‚\n\nåŸºäºè¿™äº›ç¼ºç‚¹ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ–°çš„æ•°æ®åº“æ¡†æ¶è¢«åˆ›é€ å‡ºæ¥ï¼Œè§£å†³å…¶æŸæ–¹é¢çš„é—®é¢˜ã€‚\n\næ¯”å¦‚ä»¥ Redis ä¸ºä»£è¡¨çš„çš„ KV å­˜å‚¨ï¼Œå¯ä»¥è§£å†³æ— æ³•å­˜å‚¨ç»“æ„åŒ–æ•°æ®çš„é—®é¢˜ï¼›ä»¥ MongoDB ä¸ºä»£è¡¨çš„çš„æ–‡æ¡£æ•°æ®åº“å¯ä»¥è§£å†³æ‰©å±•è¡¨ç»“æ„è¢«å¼º Schema çº¦æŸçš„é—®é¢˜ï¼›ä»¥ HBase ä¸ºä»£è¡¨çš„çš„åˆ—å¼æ•°æ®åº“å¯ä»¥è§£å†³å¤§æ•°æ®åœºæ™¯ä¸‹çš„ I/O é—®é¢˜ï¼›ä»¥ ES ä¸ºä»£è¡¨çš„çš„å…¨æ–‡æœç´¢å¼•æ“å¯ä»¥è§£å†³å…¨æ–‡æ£€ç´¢æ•ˆç‡çš„é—®é¢˜ç­‰ã€‚\n\nè¿™äº›æ•°æ®åº“ç»Ÿç§°ä¸º NoSQL æ•°æ®åº“ï¼Œä½† NoSQL å¹¶ä¸æ˜¯å…¨éƒ½ä¸èƒ½å†™ SQLï¼Œè€Œæ˜¯ Not Only SQL çš„æ„æ€ã€‚\n\nNoSQL æ•°æ®åº“é™¤äº†èšç„¦äºè§£å†³æŸæ–¹é¢çš„é—®é¢˜ä»¥å¤–ä¹Ÿä¼šæœ‰å…¶è‡ªèº«çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ Redis æ²¡æœ‰æ”¯æŒå®Œæ•´çš„ ACID äº‹åŠ¡ã€åˆ—å¼å­˜å‚¨åœ¨æ›´æ–°ä¸€æ¡è®°å½•çš„å¤šå­—æ®µæ—¶æ€§èƒ½è¾ƒå·®ç­‰ã€‚å› æ­¤å¹¶ä¸æ˜¯è¯´ä½¿ç”¨äº† NoSQL å°±èƒ½ä¸€åŠ³æ°¸é€¸ï¼Œæ›´å¤šçš„æ˜¯æŒ‰éœ€å–ç”¨ï¼Œè§£å†³ä¸šåŠ¡é¢ä¸´çš„é—®é¢˜ã€‚\n\nå…³äº NoSQL çš„æ›´å¤šäº†è§£ï¼Œæ¨èå¤§å®¶å¯ä»¥çœ‹çœ‹ã€ŠNoSQL ç²¾ç²¹ã€‹è¿™æœ¬ä¹¦ã€‚\n\n- **ç¼“å­˜**\n\nå¦‚æœ NoSQL ä¹Ÿè§£å†³ä¸äº†ä¸šåŠ¡çš„é«˜æ€§èƒ½è¯‰æ±‚ï¼Œé‚£ä¹ˆæˆ–è®¸ä½ éœ€è¦åŠ ç‚¹**ç¼“å­˜**ã€‚\n\nç¼“å­˜æœ€ç›´æ¥çš„æ¦‚å¿µå°±æ˜¯æŠŠå¸¸ç”¨çš„æ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“ä¸šåŠ¡è¯·æ±‚æ¥æŸ¥è¯¢çš„æ—¶å€™ç›´æ¥ä»å†…å­˜ä¸­æ‹¿å‡ºæ¥ï¼Œä¸ç”¨é‡æ–°å»æ•°æ®åº“ä¸­æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼Œä¹Ÿå°±çœå»äº†å¤§é‡çš„ç£ç›˜ IO æ—¶é—´ã€‚\n\nä¸€èˆ¬æ¥è¯´ç¼“å­˜éƒ½æ˜¯é€šè¿‡ Key-Value çš„æ–¹å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ ¹æ®å­˜å‚¨çš„ä½ç½®ï¼Œåˆ†ä¸ºå•æœºç¼“å­˜å’Œé›†ä¸­å¼ç¼“å­˜ã€‚å•æœºç¼“å­˜å°±æ˜¯å­˜åœ¨è‡ªèº«æœåŠ¡å™¨æ‰€åœ¨çš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šæœ‰ä¸åŒæœºå™¨æ•°æ®å¯èƒ½ä¸ä¸€è‡´ï¼Œæˆ–è€…é‡å¤ç¼“å­˜çš„é—®é¢˜ï¼Œè¦è§£å†³å¯ä»¥ä½¿ç”¨æŸ¥è¯¢å†…å®¹åšè·¯ç”±æ¥ä¿éšœåŒä¸€è®°å½•å§‹ç»ˆåˆ°åŒä¸€å°æœºå™¨ä¸ŠæŸ¥è¯¢ç¼“å­˜ã€‚é›†ä¸­å¼ç¼“å­˜åˆ™æ˜¯æ‰€æœ‰æœåŠ¡å™¨éƒ½å»ä¸€ä¸ªåœ°æ–¹æŸ¥ç¼“å­˜ï¼Œä¼šå¢åŠ ä¸€äº›è°ƒç”¨æ—¶é—´ã€‚\n\nç¼“å­˜å¯ä»¥æå‡æ€§èƒ½æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œä½†ç¼“å­˜åŒæ ·æœ‰ç€å®ƒçš„é—®é¢˜éœ€è¦åº”å¯¹æˆ–è§„é¿ã€‚æ•°æ®æ—¶æ•ˆæ€§æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„é—®é¢˜ï¼Œä½†ä¹Ÿå¯ä»¥é åŒæ—¶æ›´æ–°ç¼“å­˜çš„ç­–ç•¥æ¥ä¿éšœæ•°æ®çš„æ—¶æ•ˆæ€§ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¶ä»–å‡ ä¸ªå¸¸è§çš„é—®é¢˜ã€‚\n\nå¦‚æœæŸæ¡æ•°æ®ä¸å­˜åœ¨ï¼Œç¼“å­˜ä¸­åŠ¿å¿…æŸ¥ä¸åˆ°å¯¹åº”çš„ KEYï¼Œä»è€Œå°±ä¼šè¯·æ±‚æ•°æ®åº“ç¡®è®¤æ˜¯å¦æœ‰æ–°å¢åŠ è¿™æ¡æ•°æ®ï¼Œå¦‚æœå§‹ç»ˆæ²¡æœ‰è¿™æ¡æ•°æ®ï¼Œè€Œå®¢æˆ·ç«¯åˆåå¤é¢‘ç¹åœ°æŸ¥è¯¢è¿™æ¡æ•°æ®ï¼Œå°±ä¼šå˜ç›¸åœ°å¯¹æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œæ¢å¥è¯è¯´ï¼Œç¼“å­˜å¤±å»äº†ä¿æŠ¤ä½œç”¨ï¼Œè¯·æ±‚ç©¿é€åˆ°äº†æ•°æ®åº“ï¼Œè¿™ç§°ä¸º**ç¼“å­˜ç©¿é€**ã€‚\n\nåº”å¯¹ç¼“å­˜ç©¿é€ï¼Œæœ€å¥½çš„æ‰‹æ®µå°±æ˜¯æŠŠâ€œç©ºå€¼â€è¿™ä¸€æƒ…å†µä¹Ÿç¼“å­˜ä¸‹æ¥ï¼Œå½“å®¢æˆ·ç«¯ä¸‹æ¬¡å†æŸ¥è¯¢æ—¶ï¼Œå‘ç°ç¼“å­˜ä¸­è¯´æ˜äº†è¯¥æ•°æ®æ˜¯ç©ºå€¼ï¼Œåˆ™ä¸ä¼šå†é—®è¯¢æ•°æ®åº“ã€‚ä½†ä¹Ÿè¦æ³¨æ„å¦‚æœçœŸçš„æœ‰å¯¹åº”æ•°æ®å†™å…¥äº†æ•°æ®åº“ï¼Œåº”å½“èƒ½åŠæ—¶æ¸…é™¤â€ç©ºå€¼â€œç¼“å­˜ã€‚\n\nä¸ºäº†ä¿éšœç¼“å­˜çš„æ•°æ®åŠæ—¶æ›´æ–°ï¼Œå¸¸å¸¸éƒ½ä¼šæ ¹æ®ä¸šåŠ¡ç‰¹æ€§è®¾ç½®ä¸€ä¸ªç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œåœ¨ç¼“å­˜è¿‡æœŸåï¼Œåˆ°å†æ¬¡ç”ŸæˆæœŸé—´ï¼Œå¦‚æœå‡ºç°å¤§é‡çš„æŸ¥è¯¢ï¼Œä¼šå¯¼è‡´è¯·æ±‚éƒ½ä¼ é€’åˆ°æ•°æ®åº“ï¼Œè€Œä¸”ä¼šå¤šæ¬¡é‡å¤ç”Ÿæˆç¼“å­˜ï¼Œç”šè‡³å¯èƒ½æ‹–å®æ•´ä¸ªç³»ç»Ÿï¼Œè¿™å°±å«**ç¼“å­˜é›ªå´©**ï¼Œå’Œç¼“å­˜ç©¿é€çš„åŒºåˆ«åœ¨äºï¼Œç©¿é€æ˜¯é¢å¯¹ç©ºå€¼çš„æƒ…å†µï¼Œè€Œé›ªå´©æ˜¯ç”±äºç¼“å­˜é‡æ–°ç”Ÿæˆçš„é—´éš”æœŸå¤§é‡è¯·æ±‚äº§ç”Ÿçš„è¿é”æ•ˆåº”ã€‚\n\næ—¢ç„¶æ˜¯ç¼“å­˜æ›´æ–°æ—¶é‡å¤ç”Ÿæˆæ‰€å¯¼è‡´çš„é—®é¢˜ï¼Œé‚£ä¹ˆä¸€ç§è§£æ³•å°±æ˜¯åœ¨ç¼“å­˜é‡æ–°ç”Ÿæˆå‰ç»™è¿™ä¸ª KEY åŠ é”ï¼ŒåŠ é”æœŸé—´å‡ºç°çš„è¯·æ±‚éƒ½ç­‰å¾…æˆ–è¿”å›é»˜è®¤å€¼ï¼Œè€Œä¸å»éƒ½å°è¯•é‡æ–°ç”Ÿæˆç¼“å­˜ã€‚\n\nå¦ä¸€ç§æ–¹æ³•æ˜¯å¹²è„†ä¸è¦ç”±å®¢æˆ·ç«¯è¯·æ±‚æ¥è§¦å‘ç¼“å­˜æ›´æ–°ï¼Œè€Œæ˜¯ç”±åå°è„šæœ¬ç»Ÿä¸€æ›´æ–°ï¼ŒåŒæ ·å¯ä»¥è§„é¿é‡å¤è¯·æ±‚å¯¼è‡´çš„é‡å¤ç”Ÿæˆã€‚ä½†æ˜¯è¿™å°±å¤±å»äº†åªç¼“å­˜çƒ­ç‚¹æ•°æ®çš„èƒ½åŠ›ï¼Œå¦‚æœç¼“å­˜å› ç©ºé—´é—®é¢˜è¢«æ¸…é™¤äº†ï¼Œä¹Ÿä¼šå› ä¸ºåå°æ²¡åŠæ—¶æ›´æ–°å¯¼è‡´æŸ¥ä¸åˆ°ç¼“å­˜æ•°æ®ï¼Œè¿™å°±ä¼šè¦æ±‚æ›´å¤æ‚çš„åå°æ›´æ–°ç­–ç•¥ï¼Œæ¯”å¦‚ä¸»åŠ¨æŸ¥è¯¢ç¼“å­˜æœ‰æ•ˆæ€§ã€ç¼“å­˜è¢«åˆ åé€šçŸ¥åå°ä¸»åŠ¨æ›´æ–°ç­‰ã€‚\n\nè™½è¯´åœ¨æœ‰é™çš„å†…å­˜ç©ºé—´å†…æœ€å¥½ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œä½†å¦‚æœæ•°æ®è¿‡çƒ­ï¼Œæ¯”å¦‚å¾®åšçš„è¶…çº§çƒ­æœï¼Œä¹Ÿä¼šå¯¼è‡´ç¼“å­˜æœåŠ¡å™¨å‹åŠ›è¿‡å¤§è€Œå´©æºƒï¼Œç§°ä¹‹ä¸º**ç¼“å­˜çƒ­ç‚¹**é—®é¢˜ã€‚\n\nå¯ä»¥å¤åˆ¶å¤šä»½ç¼“å­˜å‰¯æœ¬ï¼Œæ¥åˆ†æ•£ç¼“å­˜æœåŠ¡å™¨çš„å•æœºå‹åŠ›ï¼Œæ¯•ç«Ÿå †æœºå™¨æ˜¯æœ€ç®€å•æœ‰æ•ˆã€‚æ­¤å¤„ä¹Ÿè¦æ³¨æ„ï¼Œå¤šä¸ªç¼“å­˜å‰¯æœ¬ä¸è¦è®¾ç½®ç›¸åŒçš„ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå¦åˆ™å¤šå¤„ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œå¹¶åŒæ—¶æ›´æ–°ï¼Œä¹Ÿå®¹æ˜“å¼•èµ·ç¼“å­˜é›ªå´©ï¼Œåº”è¯¥è®¾ç½®ä¸€ä¸ªæ—¶é—´èŒƒå›´å†…çš„éšæœºå€¼æ¥æ›´æ–°ç¼“å­˜ã€‚\n\n### è®¡ç®—é«˜æ€§èƒ½\n\nè®²å®Œå­˜å‚¨é«˜æ€§èƒ½ï¼Œå†è®²**è®¡ç®—é«˜æ€§èƒ½**ï¼Œè®¡ç®—æ€§èƒ½çš„ä¼˜åŒ–å¯ä»¥å…ˆä»å•æœºæ€§èƒ½ä¼˜åŒ–å¼€å§‹ï¼Œå¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹ã€IO å¤šè·¯å¤ç”¨ã€å¼‚æ­¥ IO ç­‰éƒ½å­˜åœ¨å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä½†åŸºæœ¬ç³»ç»Ÿæˆ–æ¡†æ¶å·²ç»æä¾›äº†åŸºæœ¬çš„ä¼˜åŒ–èƒ½åŠ›ï¼Œåªéœ€ä½¿ç”¨å³å¯ã€‚\n\n- **è´Ÿè½½å‡è¡¡**\n\nå¦‚æœå•æœºçš„æ€§èƒ½ä¼˜åŒ–å·²ç»åˆ°äº†ç“¶é¢ˆï¼Œæ— æ³•åº”å¯¹ä¸šåŠ¡çš„å¢é•¿ï¼Œå°±ä¼šå¼€å§‹å¢åŠ æœåŠ¡å™¨ï¼Œæ„å»ºé›†ç¾¤ã€‚å¯¹äºè®¡ç®—æ¥è¯´ï¼Œæ¯ä¸€å°æœåŠ¡å™¨æ¥åˆ°åŒæ ·çš„è¾“å…¥ï¼Œéƒ½åº”è¯¥è¿”å›åŒæ ·çš„è¾“å‡ºï¼Œå½“æœåŠ¡å™¨ä»å•å°å˜æˆå¤šå°ä¹‹åï¼Œå°±ä¼šé¢ä¸´è¯·æ±‚æ¥äº†è¦ç”±å“ªä¸€å°æœåŠ¡å™¨å¤„ç†çš„é—®é¢˜ï¼Œæˆ‘ä»¬å½“ç„¶å¸Œæœ›ç”±å½“å‰æ¯”è¾ƒç©ºé—²çš„æœåŠ¡å™¨å»å¤„ç†æ–°çš„è¯·æ±‚ï¼Œè¿™é‡Œå¯¹è¯·æ±‚ä»»åŠ¡çš„å¤„ç†åˆ†é…é—®é¢˜ï¼Œå°±å«**è´Ÿè½½å‡è¡¡**ã€‚\n\nè´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œä»åˆ†ç±»ä¸Šæ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š\n\n> DNS è´Ÿè½½å‡è¡¡ï¼šé€šè¿‡ DNS è§£æï¼Œæ¥å®ç°åœ°ç†çº§åˆ«çš„å‡è¡¡ï¼Œå…¶æˆæœ¬ä½ï¼Œåˆ†é…ç­–ç•¥å¾ˆç®€å•ï¼Œå¯ä»¥å°±è¿‘è®¿é—®æ¥æå‡è®¿é—®é€Ÿåº¦ï¼Œä½† DNS çš„ç¼“å­˜æ—¶é—´é•¿ï¼Œç”±äºæ›´æ–°ä¸åŠæ—¶æ‰€ä»¥æ— æ³•å¿«é€Ÿè°ƒæ•´ï¼Œä¸”æ§åˆ¶æƒåœ¨å„åŸŸåå•†ä¸‹ï¼Œä¸”æ— æ³•æ ¹æ®åç«¯æœåŠ¡å™¨çš„çŠ¶æ€æ¥å†³å®šåˆ†é…ç­–ç•¥ã€‚ ç¡¬ä»¶è´Ÿè½½å‡è¡¡ï¼šç›´æ¥é€šè¿‡ç¡¬ä»¶è®¾å¤‡æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œç±»ä¼¼è·¯ç”±å™¨è·¯ç”±ï¼ŒåŠŸèƒ½å’Œæ€§èƒ½éƒ½å¾ˆå¼ºå¤§ï¼Œå¯ä»¥åšåˆ°ç™¾ä¸‡å¹¶å‘ï¼Œä¹Ÿå¾ˆç¨³å®šï¼Œæ”¯æŒå®‰å…¨é˜²æŠ¤èƒ½åŠ›ï¼Œä½†æ˜¯åŒæ ·æ— æ³•æ ¹æ®åç«¯æœåŠ¡å™¨çŠ¶æ€è¿›è¡Œç­–ç•¥è°ƒæ•´ï¼Œä¸”ä»·æ ¼æ˜‚è´µã€‚è½¯ä»¶è´Ÿè½½å‡è¡¡ï¼šé€šè¿‡è½¯ä»¶é€»è¾‘å®ç°ï¼Œæ¯”å¦‚ nginxï¼Œæ¯”è¾ƒçµæ´»ï¼Œæˆæœ¬ä½ï¼Œä½†æ˜¯æ€§èƒ½ä¸€èˆ¬ï¼ŒåŠŸèƒ½ä¹Ÿä¸å¦‚ç¡¬ä»¶å¼ºå¤§ã€‚\n\n\n\nä¸€èˆ¬æ¥è¯´ï¼ŒDNS è´Ÿè½½å‡è¡¡ç”¨äºå®ç°åœ°ç†çº§åˆ«çš„è´Ÿè½½å‡è¡¡ï¼›ç¡¬ä»¶è´Ÿè½½å‡è¡¡ç”¨äºå®ç°é›†ç¾¤çº§åˆ«çš„è´Ÿè½½å‡è¡¡ï¼›è½¯ä»¶è´Ÿè½½å‡è¡¡ç”¨äºå®ç°æœºå™¨çº§åˆ«çš„è´Ÿè½½å‡è¡¡ã€‚\n\næ‰€ä»¥éƒ¨ç½²èµ·æ¥å¯ä»¥æŒ‰ç…§è¿™ä¸‰å±‚å»éƒ¨ç½²ï¼Œç¬¬ä¸€å±‚é€šè¿‡ DNS å°†è¯·æ±‚åˆ†å‘åˆ°åŒ—äº¬ã€ä¸Šæµ·ã€æ·±åœ³çš„æœºæˆ¿ï¼›ç¬¬äºŒå±‚é€šè¿‡ç¡¬ä»¶è´Ÿè½½å‡è¡¡å°†è¯·æ±‚åˆ†å‘åˆ°å½“åœ°ä¸‰ä¸ªé›†ç¾¤ä¸­çš„ä¸€ä¸ªï¼›ç¬¬ä¸‰å±‚é€šè¿‡è½¯ä»¶ç­–ç•¥å°†è¯·æ±‚åˆ†å‘åˆ°å…·ä½“çš„æŸå°æœåŠ¡å™¨å»å“åº”ä¸šåŠ¡ã€‚\n\nå°±è´Ÿè½½å‡è¡¡ç®—æ³•æ¥è¯´ï¼Œå¤šæ˜¯æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„ç®—æ³•ï¼Œå¦‚è½®è¯¢ã€åŠ æƒè½®è¯¢ã€è´Ÿè½½æœ€ä½ä¼˜å…ˆã€æ€§èƒ½æœ€ä¼˜ä¼˜å…ˆã€Hash åˆ†é…ç­‰ï¼Œå„æœ‰ç‰¹ç‚¹ï¼ŒæŒ‰éœ€é‡‡ç”¨å³å¯ã€‚\n\n## é«˜å¯ç”¨æ¶æ„æ¨¡å¼\n\n### ç†è®ºæ–¹å¼\n\n- **CAP ä¸ BASE**\n\nåœ¨è¯´é«˜å¯ç”¨ä¹‹å‰ï¼Œå…ˆæ¥è¯´è¯´ **CAP ç†è®º**ï¼Œå³ï¼š\n\nåœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆæŒ‡äº’ç›¸è¿æ¥å¹¶å…±äº«æ•°æ®çš„èŠ‚ç‚¹çš„é›†åˆï¼‰ä¸­ï¼Œå½“æ¶‰åŠè¯»å†™æ“ä½œæ—¶ï¼Œåªèƒ½ä¿è¯ä¸€è‡´æ€§ï¼ˆConsistenceï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition Toleranceï¼‰ä¸‰è€…ä¸­çš„ä¸¤ä¸ªï¼Œå¦å¤–ä¸€ä¸ªå¿…é¡»è¢«ç‰ºç‰²ã€‚\n\nå¤§å®¶å¯èƒ½éƒ½çŸ¥é“ CAP å®šç†æ˜¯ä»€ä¹ˆï¼Œä½†å¤§å®¶å¯èƒ½ä¸çŸ¥é“ï¼ŒCAP å®šç†çš„ä½œè€…ï¼ˆSeth Gilbert & Nancy Lynchï¼‰å…¶å®å¹¶æ²¡æœ‰è¯¦ç»†è§£é‡Š CAP ä¸‰ä¸ªå•è¯çš„å…·ä½“å«ä¹‰ï¼Œç›®å‰å¤§å®¶ç†Ÿæ‚‰çš„è§£é‡Šå…¶å®æ˜¯å¦ä¸€ä¸ªäººï¼ˆRobert Greinerï¼‰ç»™å‡ºçš„ã€‚è€Œä¸”ä»–è¿˜ç»™å‡ºäº†ä¸¤ç‰ˆæœ‰æ‰€å·®å¼‚çš„è§£é‡Šã€‚\n\nä¹¦ä¸­ç¬¬äºŒç‰ˆè§£é‡Šç®—æ˜¯å¯¹ç¬¬ä¸€ç‰ˆè§£é‡Šçš„åŠ å¼ºï¼Œä»–è¦åŠ å¼ºçš„ç‚¹ä¸»è¦æ˜¯ï¼š\n\n> CAP æè¿°çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ˜¯äº’ç›¸è¿ç»“å¹¶å…±äº«æ•°æ®çš„èŠ‚ç‚¹çš„é›†åˆã€‚å› ä¸ºå…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰çš„åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½ä¼šäº’è¿å’Œå…±äº«æ•°æ®ã€‚CAP ç†è®ºæ˜¯åœ¨æ¶‰åŠè¯»å†™æ“ä½œçš„åœºæ™¯ä¸‹çš„ç†è®ºï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ã€‚ä¸€è‡´æ€§åªéœ€è¦ä¿éšœå®¢æˆ·ç«¯è¯»æ“ä½œèƒ½è¯»åˆ°æœ€æ–°çš„å†™æ“ä½œç»“æœï¼Œå¹¶ä¸è¦æ±‚æ—¶æ—¶åˆ»åˆ»åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ä¸ç°å®çš„ï¼Œåªè¦ä¿éšœå®¢æˆ·è¯»åˆ°çš„ä¸€è‡´å³å¯ã€‚å¯ç”¨æ€§è¦æ±‚éæ•…éšœçš„èŠ‚ç‚¹åœ¨åˆç†çš„æ—¶é—´å†…èƒ½è¿”å›åˆç†çš„å“åº”ï¼Œæ‰€è°“åˆç†æ˜¯æŒ‡éé”™è¯¯ã€éè¶…æ—¶ï¼Œå³ä½¿æ•°æ®ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œä¹Ÿæ˜¯åˆç†çš„â€œæ—§æ•°æ®â€ï¼Œæ˜¯ç¬¦åˆå¯ç”¨æ€§çš„ã€‚åˆ†åŒºå®¹é”™æ€§è¦æ±‚ç½‘ç»œåˆ†åŒºåç³»ç»Ÿèƒ½ç»§ç»­å±¥è¡ŒèŒè´£ï¼Œä¸ä»…ä»…è¦æ±‚ç³»ç»Ÿä¸å®•æœºï¼Œè¿˜è¦æ±‚èƒ½å‘æŒ¥ä½œç”¨ï¼Œèƒ½å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚æ¯”å¦‚æ¥å£ç›´æ¥è¿”å›é”™è¯¯å…¶å®ä¹Ÿä»£è¡¨ç³»ç»Ÿåœ¨è¿è¡Œï¼Œä½†å´æ²¡æœ‰å±¥è¡ŒèŒè´£ã€‚\n\n\n\nåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ï¼ŒPï¼ˆåˆ†åŒºå®¹å¿ï¼‰æ˜¯å¿…é¡»é€‰æ‹©çš„ï¼Œå¦åˆ™å½“åˆ†åŒºåç³»ç»Ÿæ— æ³•å±¥è¡ŒèŒè´£æ—¶ï¼Œä¸ºäº†ä¿éšœ Cï¼ˆä¸€è‡´æ€§ï¼‰ï¼Œå°±è¦æ‹’ç»å†™å…¥æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸å¯ç”¨äº†ã€‚\n\nåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå…¶å®æˆ‘ä»¬èƒ½é€‰æ‹©çš„åªæœ‰ C+P æˆ–è€… A+Pï¼Œæ ¹æ®ä¸šåŠ¡ç‰¹æ€§æ¥é€‰æ‹©è¦ä¼˜å…ˆä¿éšœä¸€è‡´æ€§è¿˜æ˜¯å¯ç”¨æ€§ã€‚\n\nåœ¨é€‰æ‹©ä¿éšœç­–ç•¥æ—¶ï¼Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\n\n> CAP å…³æ³¨çš„å…¶å®æ˜¯æ•°æ®çš„ç²’åº¦ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç²’åº¦ï¼Œå› æ­¤å¯¹äºç³»ç»Ÿå†…çš„ä¸åŒæ•°æ®ï¼ˆå¯¹åº”ä¸åŒå­ä¸šåŠ¡ï¼‰ï¼Œå…¶å®æ˜¯å¯ä»¥æŒ‰ç…§ä¸šåŠ¡ç‰¹æ€§é‡‡å–ä¸åŒçš„ CAP ç­–ç•¥çš„ã€‚CAP å®é™…å¿½ç•¥äº†ç½‘ç»œå»¶è¿Ÿï¼Œä¹Ÿå°±æ˜¯å…è®¸æ•°æ®å¤åˆ¶è¿‡ç¨‹ä¸­çš„çŸ­æ—¶é—´ä¸ä¸€è‡´ï¼Œå¦‚æœæŸäº›ä¸šåŠ¡æ¯”å¦‚é‡‘èä¸šåŠ¡æ— æ³•å®¹å¿è¿™ä¸€ç‚¹ï¼Œé‚£å°±åªèƒ½å¯¹å•ä¸ªå¯¹è±¡åšå•ç‚¹å†™å…¥ï¼Œå…¶ä»–èŠ‚ç‚¹å¤‡ä»½ï¼Œæ— æ³•åšå¤šç‚¹å†™å…¥ã€‚ä½†å¯¹äºä¸åŒçš„å¯¹è±¡ï¼Œå…¶å®å¯ä»¥åˆ†åº“æ¥å®ç°åˆ†å¸ƒå¼ã€‚å½“æ²¡æœ‰å‘ç”Ÿåˆ†åŒºç°è±¡æ—¶ï¼Œä¹Ÿå°±æ˜¯ä¸ç”¨è€ƒè™‘ P æ—¶ï¼Œä¸Šè¿°é™åˆ¶å°±ä¸å­˜åœ¨ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘å¦‚ä½•ä¿éšœ CAã€‚å½“å‘ç”Ÿåˆ†åŒºåï¼Œç‰ºç‰² CAP çš„å…¶ä¸­ä¸€ä¸ªå¹¶ä¸ä»£è¡¨ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œè€Œæ˜¯åº”è¯¥ä¸ºåˆ†åŒºåçš„æ¢å¤ CA åšå‡†å¤‡ï¼Œæ¯”å¦‚è®°å½•åˆ†åŒºæœŸé—´çš„æ—¥å¿—ä»¥ä¾›æ¢å¤æ—¶ä½¿ç”¨ã€‚\n\nä¼´éš CAP çš„ä¸€ä¸ªé€€è€Œæ±‚å…¶æ¬¡ï¼Œä¹Ÿæ›´ç°å®çš„è¿½æ±‚ï¼Œæ˜¯ BASE ç†è®ºï¼Œå³åŸºæœ¬å¯ç”¨ï¼Œä¿éšœæ ¸å¿ƒä¸šåŠ¡çš„å¯ç”¨æ€§ï¼›è½¯çŠ¶æ€ï¼Œå…è®¸ç³»ç»Ÿå­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„ä¸­é—´çŠ¶æ€ï¼›æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸€æ®µæ—¶é—´åç³»ç»Ÿåº”è¯¥è¾¾åˆ°ä¸€è‡´ã€‚\n\n- **FMEA åˆ†ææ³•**\n\nè¦ä¿éšœé«˜å¯ç”¨ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆä¸‹æ‰‹å‘¢ï¼Ÿä¿—è¯è¯´çŸ¥å·±çŸ¥å½¼æ‰èƒ½æœ‰çš„æ”¾çŸ¢ï¼Œå› æ­¤åšé«˜å¯ç”¨çš„å‰ææ˜¯äº†è§£ç³»ç»Ÿå­˜åœ¨æ€æ ·çš„é£é™©ï¼Œå¹¶ä¸”è¿˜è¦è¯†åˆ«å‡ºé£é™©çš„ä¼˜å…ˆçº§ï¼Œå…ˆæ²»ç†æ›´å¯èƒ½å‘ç”Ÿçš„ã€å½±å“æ›´å¤§çš„é£é™©ã€‚è¯´å¾—ç®€å•ï¼Œåˆ°åº•æ€ä¹ˆåšï¼Ÿä¸šç•Œå…¶å®å·²ç»æä¾›äº†æ’æŸ¥ç³»ç»Ÿé£é™©çš„åŸºæœ¬æ–¹æ³•è®ºï¼Œå³ FMEAï¼ˆFailure mode and effects analysisï¼‰â€”â€”æ•…éšœæ¨¡å¼ä¸å½±å“åˆ†æã€‚\n\nFMEA çš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œé¢å¯¹åˆå§‹çš„æ¶æ„è®¾è®¡å›¾ï¼Œè€ƒè™‘å‡è®¾å…¶ä¸­æŸä¸ªéƒ¨ä»¶å‘ç”Ÿæ•…éšœï¼Œå¯¹ç³»ç»Ÿä¼šé€ æˆä»€ä¹ˆå½±å“ï¼Œè¿›è€Œåˆ¤æ–­æ¶æ„æ˜¯å¦éœ€è¦ä¼˜åŒ–ã€‚\n\nå…·ä½“æ¥è¯´ï¼Œéœ€è¦ç”»ä¸€å¼ è¡¨ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤é€ä¸ªåˆ—å‡ºï¼š\n\n> åŠŸèƒ½ç‚¹ï¼šåˆ—å‡ºä¸šåŠ¡æµç¨‹ä¸­çš„æ¯ä¸ªåŠŸèƒ½ç‚¹ã€‚æ•…éšœæ¨¡å¼ï¼šé‡åŒ–æè¿°è¯¥åŠŸèƒ½å¯èƒ½å‘ç”Ÿæ€æ ·çš„æ•…éšœï¼Œæ¯”å¦‚ MySQL å“åº”æ—¶é—´è¶…è¿‡3ç§’ã€‚æ•…éšœå½±å“ï¼šé‡åŒ–æè¿°è¯¥æ¯ä¸ªæ•…éšœå¯èƒ½å¯¼è‡´çš„å½±å“ï¼Œä½†ä¸ç”¨éå¸¸ç²¾ç¡®ï¼Œæ¯”å¦‚20%ç”¨æˆ·æ— æ³•ç™»å½•ã€‚ä¸¥é‡ç¨‹åº¦ï¼šè®¾å®šæ ‡å‡†ï¼Œç»™æ¯ä¸ªå½±å“çš„ä¸¥é‡ç¨‹åº¦æ‰“åˆ†ã€‚æ•…éšœåŸå› ï¼šå¯¹äºæ¯ä¸ªæ•…éšœï¼Œè€ƒè™‘æœ‰å“ªäº›åŸå› å¯¼è‡´è¯¥æ•…éšœã€‚æ•…éšœæ¦‚ç‡ï¼šå¯¹äºæ¯ä¸ªåŸå› ï¼Œè€ƒè™‘å…¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œä¸ç”¨ç²¾ç¡®ï¼Œåˆ†æ¡£æ‰“åˆ†å³å¯ã€‚é£é™©ç¨‹åº¦ï¼š=ä¸¥é‡ç¨‹åº¦ * æ•…éšœæ¦‚ç‡ï¼Œæ®æ­¤å°±å¯ä»¥ç®—å‡ºé£é™©çš„å¤„ç†ä¼˜å…ˆçº§äº†ï¼Œè‚¯å®šæ˜¯ç¨‹åº¦åˆ†æ•°è¶Šé«˜çš„è¶Šåº”è¯¥ä¼˜å…ˆè§£å†³ã€‚å·²æœ‰æªæ–½ã€è§£å†³æªæ–½ã€åç»­è§„åˆ’ï¼šç”¨äºæ¢³ç†ç°çŠ¶ï¼Œæ€è€ƒæœªæ¥çš„æ”¹è¿›æ–¹æ¡ˆç­‰ã€‚\n\nåŸºäºä¸Šé¢è¿™å¥—æ–¹æ³•è®ºï¼Œæˆ‘ä»¬å¯ä»¥æœ‰æ•ˆåœ°å¯¹ç³»ç»Ÿçš„é£é™©è¿›è¡Œæ¢³ç†ï¼Œæ‰¾å‡ºéœ€è¦ä¼˜å…ˆè§£å†³çš„é£é™©ç‚¹ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚\n\né™¤äº† FMEAï¼Œå…¶å®è¿˜æœ‰ä¸€ç§åº”ç”¨æ›´å¹¿æ³›çš„é£é™©åˆ†æå’Œæ²»ç†çš„ç†è®ºï¼Œå³ BCPâ€”â€”ä¸šåŠ¡è¿ç»­æ€§è®¡åˆ’ï¼Œå®ƒæ˜¯ä¸€å¥—åŸºäºä¸šåŠ¡è§„å¾‹çš„è§„ç« æµç¨‹ï¼Œä¿éšœä¸šåŠ¡æˆ–ç»„ç»‡åœ¨é¢å¯¹çªå‘çŠ¶å†µæ—¶å…¶å…³é”®ä¸šåŠ¡åŠŸèƒ½å¯ä»¥æŒç»­ä¸ä¸­æ–­ã€‚\n\nç›¸æ¯” FMEAï¼ŒBCP é™¤äº†è¯„ä¼°é£é™©åŠé‡è¦ç¨‹åº¦ï¼Œè¿˜è¦æ±‚è¯¦ç»†åœ°æè¿°åº”å¯¹æ–¹æ¡ˆã€æ®‹ä½™é£é™©ã€ç¾å¤‡æ¢å¤æ–¹æ¡ˆï¼Œå¹¶è¦æ±‚è¿›è¡Œç›¸åº”æ•…éšœçš„åŸ¹è®­å’Œæ¼”ä¹ å®‰æ’ï¼Œå°½æœ€å¤§åŠªåŠ›ä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€‚\n\nçŸ¥é“é£é™©åœ¨å“ªã€ä¼˜å…ˆæ²»ç†ä½•ç§é£é™©ä¹‹åï¼Œå°±å¯ä»¥ç€æ‰‹ä¼˜åŒ–æ¶æ„ã€‚å’Œé«˜æ€§èƒ½æ¶æ„æ¨¡å¼ä¸€æ ·ï¼Œé«˜å¯ç”¨æ¶æ„ä¹Ÿå¯ä»¥ä»å­˜å‚¨å’Œè®¡ç®—ä¸¤ä¸ªæ–¹é¢æ¥åˆ†æã€‚\n\n### å­˜å‚¨é«˜å¯ç”¨\n\n**å­˜å‚¨é«˜å¯ç”¨**çš„æœ¬è´¨éƒ½æ˜¯é€šè¿‡å°†æ•°æ®å¤åˆ¶åˆ°å¤šä¸ªå­˜å‚¨è®¾å¤‡ï¼Œé€šè¿‡æ•°æ®å†—ä½™çš„æ–¹å¼æ¥æé«˜å¯ç”¨æ€§ã€‚\n\n- **åŒæœºæ¶æ„**\n\nè®©æˆ‘ä»¬å…ˆä»ç®€å•çš„å¢åŠ ä¸€å°æœºå™¨å¼€å§‹ï¼Œå³**åŒæœºæ¶æ„**ã€‚\n\nå½“æœºå™¨å˜æˆä¸¤å°åï¼Œæ ¹æ®ä¸¤å°æœºå™¨æ‹…ä»»çš„è§’è‰²ä¸åŒï¼Œå°±ä¼šåˆ†æˆä¸åŒçš„ç­–ç•¥ï¼Œæ¯”å¦‚ä¸»å¤‡ã€ä¸»ä»ã€ä¸»ä¸»ã€‚\n\n**ä¸»å¤‡å¤åˆ¶**çš„æ¶æ„æ˜¯æŒ‡ä¸€å°æœºå™¨ä½œä¸ºå®¢æˆ·ç«¯è®¿é—®çš„ä¸»æœºï¼Œå¦ä¸€å°æœºå™¨çº¯ç²¹ä½œä¸ºå†—ä½™å¤‡ä»½ç”¨ï¼Œå½“ä¸»æœºæ²¡æœ‰æ•…éšœæ—¶ï¼Œå¤‡æœºä¸ä¼šè¢«å®¢æˆ·ç«¯è®¿é—®åˆ°ï¼Œä»…ä»…éœ€è¦ä»ä¸»æœºåŒæ­¥æ•°æ®ã€‚è¿™ç§ç­–ç•¥å¾ˆç®€å•ï¼Œå¯ä»¥åº”å¯¹ä¸»æœºæ•…éšœæƒ…å†µä¸‹çš„ä¸šåŠ¡å¯ç”¨æ€§é—®é¢˜ï¼Œä½†åœ¨å¹³å¸¸æ— æ³•åˆ†æ‹…ä¸»æœºçš„è¯»å†™å‹åŠ›ï¼Œæœ‰ç‚¹æµªè´¹ã€‚\n\n**ä¸»ä»å¤åˆ¶**çš„æ¶æ„å’Œä¸»å¤‡å¤åˆ¶çš„å·®åˆ«åœ¨äºï¼Œä»æœºé™¤äº†å¤åˆ¶å¤‡ä»½æ•°æ®ï¼Œè¿˜éœ€è¦å¹²æ´»ï¼Œå³è¿˜éœ€è¦æ‰¿æ‹…ä¸€éƒ¨åˆ†çš„å®¢æˆ·ç«¯è¯·æ±‚ï¼ˆä¸€èˆ¬æ˜¯åˆ†æ‹…è¯»æ“ä½œï¼‰ã€‚å½“ä¸»æœºæ•…éšœæ—¶ï¼Œä»æœºçš„è¯»æ“ä½œä¸ä¼šå—åˆ°å½±å“ï¼Œä½†éœ€è¦å¢åŠ è¯»æ“ä½œçš„è¯·æ±‚åˆ†å‘ç­–ç•¥ï¼Œä¸”å’Œä¸»å¤‡ä¸åŒï¼Œç”±äºä»æœºç›´æ¥æä¾›æ•°æ®è¯»ï¼Œå¦‚æœä¸»ä»å¤åˆ¶å»¶è¿Ÿå¤§ï¼Œæ•°æ®ä¸ä¸€è‡´ä¼šå¯¹ä¸šåŠ¡é€ æˆæ›´æ˜æ˜¾çš„å½±å“ã€‚\n\nå¯¹äºä¸»å¤‡å’Œä¸»ä»ä¸¤ç§ç­–ç•¥ï¼Œå¦‚æœä¸»æœºæ•…éšœï¼Œéƒ½éœ€è¦è®©å¦ä¸€å°æœºå™¨å˜æˆä¸»æœºï¼Œæ‰èƒ½ç»§ç»­å®Œæ•´åœ°æä¾›æœåŠ¡ï¼Œå¦‚æœå…¨é äººå·¥å¹²é¢„æ¥åˆ‡æ¢ï¼Œä¼šæ¯”è¾ƒæ»åå’Œæ˜“é”™ï¼Œæœ€å¥½æ˜¯èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆåˆ‡æ¢ï¼Œè¿™å°±æ¶‰åŠ**åŒæœºåˆ‡æ¢**çš„ç­–ç•¥ã€‚\n\nåœ¨è€ƒè™‘åŒæœºåˆ‡æ¢æ—¶ï¼Œè¦è€ƒè™‘ä»€ä¹ˆï¼Ÿé¦–å…ˆæ˜¯éœ€è¦æ„ŸçŸ¥æœºå™¨çš„çŠ¶æ€ï¼Œæ˜¯ä¸¤å°æœºå™¨ç›´è¿ä¼ é€’äº’ç›¸çš„çŠ¶æ€ï¼Œè¿˜æ˜¯éƒ½ä¼ é€’ç»™ç¬¬ä¸‰æ–¹æ¥ä»²è£ï¼Ÿæ‰€è°“çŠ¶æ€è¦åŒ…å«å“ªäº›å†…å®¹æ‰èƒ½å®šä¹‰ä¸€å°ä¸»æœºæ˜¯æ•…éšœå‘¢ï¼Ÿæ˜¯å‘ç°ä¸€æ¬¡é—®é¢˜å°±åˆ‡æ¢è¿˜æ˜¯å¤šè§‚å¯Ÿä¸€ä¼šå†åˆ‡æ¢ï¼Ÿåˆ‡æ¢åå¦‚æœä¸»æœºæ¢å¤äº†æ˜¯åˆ‡æ¢å›æ¥è¿˜æ˜¯è‡ªåŠ¨å˜å¤‡æœºå‘¢ï¼Ÿéœ€ä¸éœ€è¦äººå·¥äºŒæ¬¡ç¡®è®¤ä¸€ä¸‹ï¼Ÿ\n\nè¿™äº›é—®é¢˜å¯èƒ½éƒ½å¾—æ ¹æ®ä¸šåŠ¡çš„ç‰¹æ€§æ¥å¾—å‡ºç­”æ¡ˆï¼Œæ­¤å¤„ä»…ç»™å‡ºä¸‰ç§å¸¸è§çš„åŒæœºåˆ‡æ¢æ¨¡å¼ï¼š\n\n> äº’è¿å¼ï¼šä¸¤å°æœºå™¨ç›´æ¥è¿æ¥ä¼ é€’ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ä¼ é€’çš„çŠ¶æ€ä¿¡æ¯åˆ¤æ–­æ˜¯å¦è¦åˆ‡æ¢ä¸»æœºï¼Œå¦‚æœé€šé“æœ¬èº«å‘ç”Ÿæ•…éšœåˆ™æ— æ³•åˆ¤æ–­æ˜¯å¦è¦åˆ‡æ¢äº†ï¼Œå¯ä»¥å†å¢åŠ ä¸€ä¸ªé€šé“æ„æˆåŒé€šé“ä¿éšœï¼Œä¸è¿‡ä¹Ÿåªæ˜¯é™ä½åŒæ—¶æ•…éšœçš„æ¦‚ç‡ã€‚ä¸­ä»‹å¼ï¼šé€šè¿‡ç¬¬ä¸‰æ–¹ä¸­ä»‹æ¥æ”¶é›†æœºå™¨çŠ¶æ€å¹¶æ‰§è¡Œç­–ç•¥ï¼Œå¦‚æœé€šé“å‘ç”Ÿæ–­è¿ï¼Œä¸­ä»‹å¯ä»¥ç›´æ¥åˆ‡æ¢å…¶ä»–æœºå™¨ä½œä¸ºä¸»æœºï¼Œä½†è¿™è¦æ±‚ä¸­ä»‹æœ¬èº«æ˜¯é«˜å¯ç”¨çš„ï¼Œå·²ç»æœ‰æ¯”è¾ƒæˆç†Ÿçš„å¼€æºè§£å†³æ–¹æ¡ˆå¦‚ zookeeperã€keepalivedã€‚æ¨¡æ‹Ÿå¼ï¼šå¤‡æœºæ¨¡æ‹Ÿæˆå®¢æˆ·ç«¯ï¼Œå‘ä¸»æœºå‘é€ä¸šåŠ¡ç±»ä¼¼çš„è¯»å†™è¯·æ±‚ï¼Œæ ¹æ®å“åº”æƒ…å†µæ¥åˆ¤æ–­ä¸»æœºçš„çŠ¶æ€å†³å®šæ˜¯å¦è¦åˆ‡æ¢ä¸»æœºï¼Œè¿™æ ·å¯ä»¥æœ€çœŸå®åœ°æ„Ÿå—åˆ°å®¢æˆ·ç«¯è§’åº¦ä¸‹çš„ä¸»æœºæ•…éšœï¼Œä½†å’Œäº’è¿å¼ä¸åŒï¼Œèƒ½è·å–åˆ°çš„å…¶ä»–æœºå™¨ä¿¡æ¯å¾ˆå°‘ï¼Œå®¹æ˜“å‡ºç°åˆ¤æ–­åå·®ã€‚\n\n\n\næœ€åä¸€ç§åŒæœºæ¶æ„æ˜¯**ä¸»ä¸»å¤åˆ¶**ï¼Œå’Œå‰é¢ä¸¤ç§åªæœ‰ä¸€ä¸»çš„ç­–ç•¥ä¸åŒï¼Œè¿™æ¬¡ä¸¤å°éƒ½æ˜¯ä¸»æœºï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚å¯ä»¥è¾¾åˆ°ä»»ä½•ä¸€å°ä¸»æœºï¼Œä¸å­˜åœ¨åˆ‡æ¢ä¸»æœºçš„é—®é¢˜ã€‚ä½†è¿™å¯¹æ•°æ®çš„è®¾è®¡å°±æœ‰äº†ä¸¥æ ¼çš„è¦æ±‚ï¼Œå¦‚æœå­˜åœ¨å”¯ä¸€ IDã€ä¸¥æ ¼çš„åº“å­˜æ•°é‡ç­‰æ•°æ®ï¼Œå°±æ— æ³•é€‚ç”¨ï¼Œè¿™ç§ç­–ç•¥é€‚åˆé‚£äº›åä¸´æ—¶æ€§ã€å¯ä¸¢å¤±ã€å¯è¦†ç›–çš„æ•°æ®åœºæ™¯ã€‚\n\n- **æ•°æ®é›†ç¾¤**\n\né‡‡ç”¨åŒæœºæ¶æ„çš„å‰ææ˜¯ä¸€å°ä¸»æœºèƒ½å¤Ÿå­˜å‚¨æ‰€æœ‰çš„ä¸šåŠ¡æ•°æ®å¹¶å¤„ç†æ‰€æœ‰çš„ä¸šåŠ¡è¯·æ±‚ï¼Œä½†æœºå™¨çš„å­˜å‚¨å’Œå¤„ç†èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œåœ¨å¤§æ•°æ®åœºæ™¯ä¸‹å°±éœ€è¦å¤šå°æœåŠ¡å™¨æ¥æ„æˆ**æ•°æ®é›†ç¾¤**ã€‚\n\nå¦‚æœæ˜¯å› ä¸ºå¤„ç†èƒ½åŠ›è¾¾åˆ°ç“¶é¢ˆï¼Œæ­¤æ—¶å¯ä»¥å¢åŠ ä»æœºå¸®ä¸»æœºåˆ†æ‹…å‹åŠ›ï¼Œå³ä¸€ä¸»å¤šä»ï¼Œç§°ä¸º**æ•°æ®é›†ä¸­é›†ç¾¤**ã€‚è¿™ç§é›†ç¾¤æ–¹å¼éœ€è¦ä»»åŠ¡åˆ†é…ç®—æ³•å°†è¯·æ±‚åˆ†æ•£åˆ°ä¸åŒæœºå™¨ä¸Šå»ï¼Œä¸»è¦çš„é—®é¢˜åœ¨äºæ•°æ®éœ€è¦å¤åˆ¶åˆ°å¤šå°ä»æœºï¼Œæ•°æ®çš„ä¸€è‡´æ€§ä¿éšœä¼šæ¯”ä¸€ä¸»ä¸€ä»æ›´ä¸ºå¤æ‚ã€‚ä¸”å½“ä¸»æœºæ•…éšœæ—¶ï¼Œå¤šå°ä»æœºåå•†æ–°ä¸»æœºçš„ç­–ç•¥ä¹Ÿä¼šå˜å¾—å¤æ‚ã€‚è¿™é‡Œæœ‰å¼€æºçš„ zookeeper ZAB ç®—æ³•å¯ä»¥ç›´æ¥å‚è€ƒã€‚\n\nå¦‚æœæ˜¯å› ä¸ºå­˜å‚¨é‡çº§è¾¾åˆ°ç“¶é¢ˆï¼Œæ­¤æ—¶å¯ä»¥å°†æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒæœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨è´Ÿè´£å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿå¤‡ä»½ä¸€éƒ¨åˆ†æ•°æ®ï¼Œç§°ä¸º**æ•°æ®åˆ†æ•£é›†ç¾¤**ã€‚æ•°æ®åˆ†æ•£é›†ç¾¤åŒæ ·éœ€è¦åšè´Ÿè½½å‡è¡¡ï¼Œåœ¨æ•°æ®åˆ†åŒºçš„åˆ†é…ä¸Šï¼Œhadoop é‡‡ç”¨ç‹¬ç«‹æœåŠ¡å™¨è´Ÿè´£æ•°æ®åˆ†åŒºçš„åˆ†é…ï¼ŒES é›†ç¾¤é€šè¿‡é€‰ä¸¾ä¸€å°æœåŠ¡å™¨æ¥åšæ•°æ®åˆ†åŒºçš„åˆ†é…ã€‚é™¤äº†è´Ÿè½½å‡è¡¡ï¼Œè¿˜éœ€è¦æ”¯æŒæ‰©ç¼©å®¹ï¼Œæ­¤å¤–ç”±äºæ•°æ®æ˜¯åˆ†æ•£å­˜å‚¨çš„ï¼Œå½“éƒ¨åˆ†æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œè¦èƒ½å¤Ÿå°†æ•…éšœæœåŠ¡å™¨çš„æ•°æ®åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šæ¢å¤ï¼Œå¹¶æŠŠåŸæœ¬åˆ†é…åˆ°æ•…éšœæœåŠ¡å™¨çš„æ•°æ®åˆ†é…åˆ°å…¶ä»–æ­£å¸¸çš„æœåŠ¡å™¨ä¸Šï¼Œå³åˆ†åŒºå®¹é”™æ€§ã€‚\n\n- **æ•°æ®åˆ†åŒº**\n\næ•°æ®é›†ç¾¤å¯ä»¥åœ¨å•å°ä¹ƒè‡³å¤šå°æœåŠ¡å™¨æ•…éšœæ—¶ä¾ç„¶ä¿æŒä¸šåŠ¡å¯ç”¨ï¼Œä½†å¦‚æœå› ä¸ºåœ°ç†çº§ç¾éš¾å¯¼è‡´æ•´ä¸ªé›†ç¾¤éƒ½æ•…éšœäº†ï¼ˆæ–­ç½‘ã€ç«ç¾ç­‰ï¼‰ï¼Œé‚£æ•´ä¸ªæœåŠ¡å°±ä¸å¯ç”¨äº†ã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦åŸºäºä¸åŒåœ°ç†ä½ç½®åš**æ•°æ®åˆ†åŒº**ã€‚\n\nåšä¸åŒåœ°ç†ä½ç½®çš„æ•°æ®åˆ†åŒºï¼Œé¦–å…ˆè¦æ ¹æ®ä¸šåŠ¡ç‰¹æ€§åˆ¶å®šåˆ†åŒºè§„åˆ™ï¼Œå¤§å¤šè¿˜æ˜¯æŒ‰ç…§åœ°ç†ä½ç½®æä¾›çš„æœåŠ¡å»åšæ•°æ®åˆ†åŒºï¼Œæ¯”å¦‚ä¸­å›½åŒºä¸»è¦å­˜å‚¨ä¸­å›½ç”¨æˆ·çš„æ•°æ®ã€‚\n\næ—¢ç„¶åˆ†åŒºæ˜¯ä¸ºäº†é˜²ç¾ï¼Œé‚£ä¹ˆä¸€ä¸ªåˆ†åŒºè‚¯å®šä¸æ­¢å­˜å‚¨è‡ªèº«çš„æ•°æ®ï¼Œè¿˜éœ€è¦åšæ•°æ®å¤‡ä»½ã€‚ä»æ•°æ®å¤‡ä»½çš„ç­–ç•¥æ¥è¯´ï¼Œä¸»è¦æœ‰ä¸‰ç§æ¨¡å¼ï¼š\n\n> é›†ä¸­å¼ï¼šå­˜åœ¨ä¸€ä¸ªæ€»å¤‡ä»½ä¸­å¿ƒï¼Œæ‰€æœ‰çš„åˆ†åŒºæ•°æ®éƒ½å¾€è¿™ä¸ªæ€»ä¸­å¿ƒå¤‡ä»½ï¼Œè®¾è®¡èµ·æ¥ç®€å•ï¼Œå„ä¸ªåˆ†åŒºé—´æ²¡æœ‰è”ç³»ï¼Œä¸ä¼šäº’ç›¸å½±å“ï¼Œä¹Ÿå¾ˆå®¹æ˜“æ‰©å±•æ–°çš„åˆ†åŒºã€‚ä½†æ€»ä¸­å¿ƒçš„æˆæœ¬è¾ƒé«˜ï¼Œè€Œä¸”æ€»ä¸­å¿ƒå¦‚æœå‡ºæ•…éšœï¼Œå°±è¦å…¨éƒ¨é‡æ–°å¤‡ä»½ã€‚äº’å¤‡å¼ï¼šæ¯ä¸ªåˆ†åŒºå¤‡ä»½å¦ä¸€ä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œå¯ä»¥å½¢æˆä¸€ä¸ªå¤‡ä»½ç¯ï¼Œæˆ–è€…æŒ‰åœ°ç†ä½ç½®è¿œè¿‘æ¥æ­å¯¹å¤‡ä»½ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åˆ©ç”¨å·²æœ‰çš„è®¾å¤‡åšæ•°æ®å¤‡ä»½ã€‚ä½†è®¾è®¡è¾ƒå¤æ‚ï¼Œå„ä¸ªåˆ†åŒºé—´éœ€è¦è”ç³»ï¼Œå½“æ‰©å±•æ–°åˆ†åŒºæ—¶ï¼Œéœ€è¦ä¿®æ”¹åŸæœ‰çš„å¤‡ä»½çº¿è·¯ã€‚ç‹¬ç«‹å¼ï¼šæ¯ä¸ªåˆ†åŒºé…å¤‡è‡ªå·±çš„å¤‡ä»½ä¸­å¿ƒï¼Œä¸€èˆ¬è®¾ç«‹åœ¨åˆ†åŒºåœ°ç†ä½ç½®é™„è¿‘çš„åŸå¸‚ï¼Œè®¾è®¡ä¹Ÿç®€å•ï¼Œå„ä¸ªåˆ†åŒºé—´ä¸ä¼šå½±å“ï¼Œæ‰©å±•æ–°åˆ†åŒºä¹Ÿå®¹æ˜“ã€‚ä½†æ˜¯æˆæœ¬ä¼šå¾ˆé«˜ï¼Œè€Œä¸”åªèƒ½é˜²èŒƒåŸå¸‚çº§çš„ç¾éš¾ã€‚\n\n### è®¡ç®—é«˜å¯ç”¨\n\nä»å­˜å‚¨é«˜å¯ç”¨çš„æ€è·¯å¯ä»¥çœ‹å‡ºï¼Œé«˜å¯ç”¨ä¸»è¦æ˜¯é€šè¿‡å¢åŠ æœºå™¨å†—ä½™æ¥å®ç°å¤‡ä»½ï¼Œå¯¹**è®¡ç®—é«˜å¯ç”¨**æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é€šè¿‡å¢åŠ æœºå™¨ï¼Œåˆ†æ‹…æœåŠ¡å™¨çš„å‹åŠ›ï¼Œå¹¶åœ¨å•æœºå‘ç”Ÿæ•…éšœçš„æ—¶å€™å°†è¯·æ±‚åˆ†é…åˆ°å…¶ä»–æœºå™¨æ¥ä¿éšœä¸šåŠ¡å¯ç”¨æ€§ã€‚\n\nå› æ­¤è®¡ç®—é«˜å¯ç”¨çš„å¤æ‚æ€§ä¹Ÿä¸»è¦æ˜¯åœ¨å¤šæœºå™¨ä¸‹ä»»åŠ¡åˆ†é…çš„é—®é¢˜ï¼Œæ¯”å¦‚å½“ä»»åŠ¡æ¥ä¸´ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯è¯·æ±‚åˆ°æ¥ï¼‰æ—¶ï¼Œå¦‚ä½•é€‰æ‹©æ‰§è¡Œä»»åŠ¡çš„æœåŠ¡å™¨ï¼Ÿå¦‚æœä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå¦‚ä½•é‡æ–°åˆ†é…å‘¢ï¼Ÿè¿™é‡Œåˆå¯ä»¥å›åˆ°å‰æ–‡è¯´è¿‡çš„è´Ÿè½½å‡è¡¡ç›¸å…³çš„è§£æ³•ä¸Šã€‚\n\nè®¡ç®—æœåŠ¡å™¨å’Œå­˜å‚¨æœåŠ¡å™¨åœ¨å¤šæœºå™¨æƒ…å†µä¸‹çš„æ¶æ„æ˜¯ç±»ä¼¼çš„ï¼Œä¹Ÿåˆ†ä¸ºä¸»å¤‡ã€ä¸»ä»å’Œé›†ç¾¤ã€‚\n\n**ä¸»å¤‡æ¶æ„**ä¸‹ï¼Œå¤‡æœºä»…ä»…ç”¨ä½œå†—ä½™ï¼Œå¹³å¸¸ä¸ä¼šæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå½“ä¸»æœºæ•…éšœæ—¶ï¼Œå¤‡æœºæ‰ä¼šå‡çº§ä¸ºä¸»æœºæä¾›æœåŠ¡ã€‚å¤‡æœºåˆ†ä¸ºå†·å¤‡å’Œæ¸©å¤‡ã€‚å†·å¤‡æ˜¯æŒ‡å¤‡æœºåªå‡†å¤‡å¥½ç¨‹åºåŒ…å’Œé…ç½®æ–‡ä»¶ï¼Œä½†å®é™…å¹³å¸¸å¹¶ä¸ä¼šå¯åŠ¨ç³»ç»Ÿã€‚æ¸©å¤‡æ˜¯æŒ‡å¤‡æœºçš„ç³»ç»Ÿæ˜¯æŒç»­å¯åŠ¨çš„ï¼Œåªæ˜¯ä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œä»è€Œå¯ä»¥éšæ—¶åˆ‡æ¢ä¸»æœºã€‚\n\n**ä¸»ä»æ¶æ„**ä¸‹ï¼Œä»æœºä¹Ÿè¦æ‰§è¡Œä»»åŠ¡ï¼Œç”±ä»»åŠ¡åˆ†é…å™¨æŒ‰ç…§é¢„å…ˆå®šä¹‰çš„è§„åˆ™å°†ä»»åŠ¡åˆ†é…ç»™ä¸»æœºå’Œä»æœºã€‚ç›¸æ¯”èµ·ä¸»å¤‡ï¼Œä¸»ä»å¯ä»¥å‘æŒ¥ä¸€å®šçš„ä»æœºæ€§èƒ½ï¼Œé¿å…æˆæœ¬ç©ºè´¹ï¼Œä½†ä»»åŠ¡çš„åˆ†é…å°±å˜å¾—å¤æ‚ä¸€äº›ã€‚\n\n**é›†ç¾¤æ¶æ„**åˆåˆ†ä¸ºå¯¹ç§°é›†ç¾¤å’Œéå¯¹ç§°é›†ç¾¤ã€‚\n\n**å¯¹ç§°é›†ç¾¤**ä¹Ÿå«è´Ÿè½½å‡è¡¡é›†ç¾¤ï¼Œå…¶ä¸­æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½æ˜¯åŒç­‰å¯¹å¾…çš„ï¼Œä»»åŠ¡ä¼šå‡è¡¡åœ°åˆ†é…åˆ°æ¯å°æœåŠ¡å™¨ã€‚æ­¤æ—¶å¯ä»¥é‡‡ç”¨éšæœºã€è½®è¯¢ã€Hash ç­‰ç®€å•çš„åˆ†é…æœºåˆ¶ï¼Œå¦‚æœæŸå°æœåŠ¡å™¨æ•…éšœï¼Œä¸å†ç»™å®ƒåˆ†é…ä»»åŠ¡å³å¯ã€‚\n\n**éå¯¹ç§°é›†ç¾¤**ä¸‹ä¸åŒçš„æœåŠ¡å™¨æœ‰ä¸åŒçš„è§’è‰²ï¼Œæ¯”å¦‚åˆ†ä¸º master å’Œ slaveã€‚æ­¤æ—¶ä»»åŠ¡åˆ†é…å™¨éœ€è¦æœ‰ä¸€å®šçš„è§„åˆ™å°†ä»»åŠ¡åˆ†é…ç»™ä¸åŒè§’è‰²çš„æœåŠ¡å™¨ï¼Œè¿˜éœ€è¦æœ‰é€‰ä¸¾ç­–ç•¥æ¥åœ¨ master æ•…éšœæ—¶é€‰æ‹©æ–°çš„ masterã€‚è¿™ä¸ªé€‰ä¸¾ç­–ç•¥çš„å¤æ‚åº¦å°±ä¸°ä¿­ç”±äººäº†ã€‚\n\n- **å¼‚åœ°å¤šæ´»**\n\nè®²å­˜å‚¨é«˜å¯ç”¨å·²ç»è¯´è¿‡æ•°æ®åˆ†åŒºï¼Œè®¡ç®—é«˜å¯ç”¨ä¹Ÿæœ‰ç±»ä¼¼çš„é«˜å¯ç”¨ä¿éšœæ€è·¯ï¼Œå½’çº³æ¥è¯´ï¼Œå®ƒä»¬éƒ½å¯ä»¥æ ¹æ®éœ€è¦åš**å¼‚åœ°å¤šæ´»**ï¼Œæ¥æé«˜æ•´ä½“çš„å¤„ç†èƒ½åŠ›ï¼Œå¹¶é˜²èŒƒåœ°åŒºçº§çš„ç¾éš¾ã€‚å¼‚åœ°å¤šæ´»ä¸­çš„â€å¼‚åœ°â€œï¼Œå°±æ˜¯æŒ‡é›†ç¾¤éƒ¨ç½²åˆ°ä¸åŒçš„åœ°ç†ä½ç½®ï¼Œâ€œæ´»â€åˆ™å¼ºè°ƒé›†ç¾¤æ˜¯éšæ—¶èƒ½æä¾›æœåŠ¡çš„ï¼Œä¸åŒäºâ€œå¤‡â€è¿˜éœ€è¦ä¸€ä¸ªåˆ‡æ¢è¿‡ç¨‹ã€‚\n\næŒ‰ç…§è§„æ¨¡ï¼Œå¼‚åœ°å¤šæ´»å¯ä»¥åˆ†ä¸ºåŒåŸå¼‚åŒºã€è·¨åŸå¼‚åœ°å’Œè·¨å›½å¼‚åœ°ã€‚æ˜¾è€Œæ˜“è§ï¼Œä¸åŒæ¨¡å¼ä¸‹èƒ½å¤Ÿåº”å¯¹çš„åœ°åŒºçº§æ•…éšœæ˜¯è¶Šæ¥è¶Šé«˜çš„ï¼Œä½†åŒæ ·çš„ï¼Œè·ç¦»è¶Šè¿œï¼Œé€šä¿¡æˆæœ¬ä¸å»¶è¿Ÿå°±è¶Šé«˜ï¼Œå¯¹é€šä¿¡é€šé“å¯ç”¨æ€§çš„æŒ‘æˆ˜ä¹Ÿè¶Šé«˜ã€‚å› æ­¤è·¨åŸå¼‚åœ°å·²ç»ä¸é€‚åˆå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚éå¸¸é«˜çš„ä¸šåŠ¡ï¼Œè€Œè·¨å›½å¼‚åœ°å¾€å¾€æ˜¯ç”¨æ¥ç»™ä¸åŒå›½å®¶çš„ç”¨æˆ·æä¾›ä¸åŒæœåŠ¡çš„ã€‚\n\nç”±äºå¼‚åœ°å¤šæ´»éœ€è¦èŠ±è´¹å¾ˆé«˜çš„æˆæœ¬ï¼Œæå¤§åœ°å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ï¼Œå› æ­¤åœ¨è®¾è®¡å¼‚åœ°å¤šæ´»æ¶æ„æ—¶ï¼Œå¯ä»¥ä¸ç”¨å¼ºæ±‚ä¸ºæ‰€æœ‰ä¸šåŠ¡éƒ½åšå¼‚åœ°å¤šæ´»ï¼Œå¯ä»¥ä¼˜å…ˆä¸ºæ ¸å¿ƒä¸šåŠ¡å®ç°å¼‚åœ°å¤šæ´»ã€‚å°½é‡ä¿éšœç»å¤§éƒ¨åˆ†ç”¨æˆ·çš„å¼‚åœ°å¤šæ´»ï¼Œå¯¹äºæ²¡èƒ½ä¿éšœçš„ç”¨æˆ·ï¼Œé€šè¿‡æŒ‚å…¬å‘Šã€äº‹åè¡¥å¿ã€å®Œå–„å¤±è´¥æç¤ºç­‰æªæ–½è¿›è¡Œå®‰æŠšã€æå‡ä½“éªŒã€‚æ¯•ç«Ÿè¦åšåˆ°100%å¯ç”¨æ€§æ˜¯ä¸å¯èƒ½çš„ï¼Œåªèƒ½åœ¨èƒ½æ¥å—çš„æˆæœ¬ä¸‹å°½é‡é€¼è¿‘ï¼Œæ‰€ä»¥å½“å¯ç”¨æ€§è¾¾åˆ°ä¸€å®šç“¶é¢ˆåï¼Œè¡¥å¿æ‰‹æ®µçš„æˆæœ¬æˆ–è®¸æ›´ä½ã€‚\n\nåœ¨å¼‚åœ°éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œæ•°æ®ä¸€å®šä¼šå†—ä½™å­˜å‚¨ï¼Œç‰©ç†ä¸Šå°±æ— æ³•å®ç°ç»å¯¹çš„å®æ—¶åŒæ­¥ï¼Œä¸”è·ç¦»è¶Šè¿œå¯¹æ•°æ®ä¸€è‡´æ€§çš„æŒ‘æˆ˜è¶Šå¤§ï¼Œè™½ç„¶å¯ä»¥é å‡å°‘è·ç¦»ã€æ­å»ºé«˜é€Ÿä¸“ç”¨ç½‘ç»œç­‰æ–¹å¼æ¥æé«˜ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿåªæ˜¯æé«˜è€Œå·²ï¼Œå› æ­¤å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ åªéœ€è€ƒè™‘ä¿éšœä¸šåŠ¡èƒ½æ¥å—èŒƒå›´ä¸‹çš„æœ€ç»ˆä¸€è‡´æ€§å³å¯ã€‚\n\nåœ¨åŒæ­¥æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨å¤šç§æ–¹å¼ï¼Œæ¯”å¦‚é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—åŒæ­¥ã€åˆ©ç”¨æ•°æ®åº“è‡ªå¸¦çš„åŒæ­¥æœºåˆ¶åŒæ­¥ã€é€šè¿‡æ¢æœºæˆ¿é‡è¯•æ¥è§£å†³åŒæ­¥å»¶è¿Ÿé—®é¢˜ã€é€šè¿‡ session id è®©åŒä¸€æ•°æ®çš„è¯·æ±‚éƒ½åˆ°åŒä¸€æœºæˆ¿ä»è€Œä¸ç”¨åŒæ­¥ç­‰ã€‚\n\nå¯è§ï¼Œæ•´ä¸ªå¼‚åœ°å¤šæ´»çš„è®¾è®¡æ­¥éª¤é¦–å…ˆæ˜¯å¯¹ä¸šåŠ¡åˆ†çº§ï¼ŒæŒ‘é€‰å‡ºæ ¸å¿ƒä¸šåŠ¡åšå¼‚åœ°å¤šæ´»ï¼Œç„¶åå¯¹éœ€è¦åšå¼‚åœ°å¤šæ´»çš„æ•°æ®è¿›è¡Œç‰¹å¾åˆ†æï¼Œè€ƒè™‘æ•°æ®é‡ã€å”¯ä¸€æ€§ã€å®æ—¶æ€§è¦æ±‚ã€å¯ä¸¢å¤±æ€§ã€å¯æ¢å¤æ€§ç­‰ï¼Œæ ¹æ®æ•°æ®ç‰¹æ€§è®¾è®¡æ•°æ®åŒæ­¥çš„æ–¹æ¡ˆã€‚æœ€åè€ƒè™‘å„ç§å¼‚å¸¸æƒ…å†µä¸‹çš„å¤„ç†æ‰‹æ®µï¼Œæ¯”å¦‚å¤šé€šé“åŒæ­¥ã€æ—¥å¿—è®°å½•æ¢å¤ã€ç”¨æˆ·è¡¥å¿ç­‰ï¼Œæ­¤æ—¶å¯ä»¥å€Ÿç”¨å‰æ–‡æ‰€è¯´çš„ FMEA ç­‰æ–¹æ³•è¿›è¡Œåˆ†æã€‚\n\n- **æ¥å£çº§æ•…éšœ**\n\nå‰é¢è®¨è®ºçš„éƒ½æ˜¯è¾ƒä¸ºå®è§‚çš„æœåŠ¡å™¨ã€åˆ†åŒºçº§çš„æ•…éšœå‘ç”Ÿæ—¶è¯¥æ€ä¹ˆåŠï¼Œå®é™…ä¸Šåœ¨å¹³å¸¸çš„å¼€å‘ä¸­ï¼Œè¿˜åº”è¯¥é˜²å¾®æœæ¸ï¼Œä»æ¥å£ç²’åº¦çš„è§’åº¦ï¼Œæ¥é˜²èŒƒå’Œåº”å¯¹æ¥å£çº§çš„æ•…éšœã€‚åº”å¯¹çš„æ ¸å¿ƒæ€è·¯ä¾ç„¶æ˜¯ä¼˜å…ˆä¿éšœæ ¸å¿ƒä¸šåŠ¡å’Œç»å¤§éƒ¨åˆ†ç”¨æˆ·å¯ç”¨ã€‚\n\nå¯¹äº**æ¥å£çº§æ•…éšœ**ï¼Œæœ‰å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼šé™æµã€æ’é˜Ÿã€é™çº§ã€ç†”æ–­ã€‚å…¶ä¸­é™æµå’Œæ’é˜Ÿå±äºäº‹å‰é˜²èŒƒçš„æªæ–½ï¼Œè€Œé™çº§å’Œç†”æ–­å±äºæ¥å£çœŸçš„æ•…éšœåçš„å¤„ç†æ‰‹æ®µã€‚\n\n**é™æµ**çš„ç›®çš„åœ¨äºæ§åˆ¶æ¥å£çš„è®¿é—®é‡ï¼Œé¿å…è¢«é«˜é¢‘è®¿é—®å†²å®ã€‚\n\nä»é™æµç»´åº¦æ¥è¯´ï¼Œå¯ä»¥åŸºäºè¯·æ±‚é™æµï¼Œå³é™åˆ¶æŸä¸ªæŒ‡æ ‡ä¸‹ã€æŸä¸ªæ—¶é—´æ®µå†…çš„è¯·æ±‚æ•°é‡ï¼Œé˜ˆå€¼çš„å®šä¹‰éœ€è¦åŸºäºå‹æµ‹å’Œçº¿ä¸Šæƒ…å†µæ¥é€æ­¥è°ƒä¼˜ã€‚è¿˜å¯ä»¥åŸºäºèµ„æºé™æµï¼Œæ¯”å¦‚æ ¹æ®è¿æ¥æ•°ã€æ–‡ä»¶å¥æŸ„ã€çº¿ç¨‹æ•°ç­‰ï¼Œè¿™ç§ç»´åº¦æ›´é€‚åˆç‰¹æ®Šçš„ä¸šåŠ¡ã€‚\n\nå®ç°é™æµå¸¸ç”¨çš„æœ‰æ—¶é—´çª—ç®—æ³•å’Œæ¡¶ç®—æ³•ã€‚\n\n**æ—¶é—´çª—ç®—æ³•**åˆ†ä¸ºå›ºå®šæ—¶é—´çª—å’Œæ»‘åŠ¨æ—¶é—´çª—ã€‚\n\n**å›ºå®šæ—¶é—´çª—**é€šè¿‡ç»Ÿè®¡å›ºå®šæ—¶é—´å‘¨æœŸå†…çš„é‡çº§æ¥å†³å®šé™æµï¼Œä½†å­˜åœ¨ä¸€ä¸ªä¸´ç•Œç‚¹çš„é—®é¢˜ï¼Œå¦‚æœåœ¨ä¸¤ä¸ªæ—¶é—´çª—çš„ä¸­é—´å‘ç”Ÿè¶…å¤§æµé‡ï¼Œè€Œåœ¨ä¸¤ä¸ªæ—¶é—´çª—å†…éƒ½å„è‡ªæ²¡æœ‰è¶…å‡ºé™åˆ¶ï¼Œå°±ä¼šå‡ºç°æ— æ³•è¢«é™æµæ‹¦æˆªçš„æ¥å£æ•…éšœã€‚å› æ­¤**æ»‘åŠ¨æ—¶é—´çª—**é‡‡ç”¨äº†éƒ¨åˆ†é‡å çš„æ—¶é—´ç»Ÿè®¡å‘¨æœŸæ¥è§£å†³ä¸´ç•Œç‚¹é—®é¢˜ã€‚\n\næ¡¶ç®—æ³•åˆ†ä¸ºæ¼æ¡¶å’Œä»¤ç‰Œæ¡¶ã€‚\n\n**æ¼æ¡¶ç®—æ³•**æ˜¯å°†è¯·æ±‚æ”¾å…¥æ¡¶ä¸­ï¼Œå¤„ç†å•å…ƒä»æ¡¶é‡Œæ‹¿è¯·æ±‚å»è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ¡¶å †æ»¡äº†å°±ä¸¢å¼ƒæ‰æ–°çš„è¯·æ±‚ï¼Œå¯ä»¥ç†è§£ä¸ºæ¡¶ä¸‹é¢æœ‰ä¸ªæ¼æ–—å°†è¯·æ±‚å¾€å¤„ç†å•å…ƒæµåŠ¨ï¼Œæ•´ä¸ªæ¡¶çš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚è¿™ç§æ¨¡å¼ä¸‹æµå…¥çš„é€Ÿç‡å–å†³äºè¯·æ±‚çš„é¢‘ç‡ï¼Œå½“æ¡¶å†…æœ‰å †ç§¯çš„å¾…å¤„ç†è¯·æ±‚æ—¶ï¼Œæµå‡ºé€Ÿç‡æ˜¯åŒ€é€Ÿçš„ã€‚æ¼æ¡¶ç®—æ³•é€‚ç”¨äºç¬æ—¶é«˜å¹¶å‘çš„åœºæ™¯ï¼ˆå¦‚ç§’æ€ï¼‰ï¼Œå¤„ç†å¯èƒ½æ…¢ä¸€ç‚¹ï¼Œä½†å¯ä»¥ç¼“å­˜éƒ¨åˆ†è¯·æ±‚ä¸ä¸¢å¼ƒã€‚\n\n**ä»¤ç‰Œæ¡¶ç®—æ³•**æ˜¯åœ¨æ¡¶å†…æ”¾ä»¤ç‰Œï¼Œä»¤ç‰Œæ•°æ˜¯æœ‰é™çš„ï¼Œæ–°çš„è¯·æ±‚éœ€è¦å…ˆåˆ°æ¡¶é‡Œæ‹¿åˆ°ä»¤ç‰Œæ‰èƒ½è¢«å¤„ç†ï¼Œæ‹¿ä¸åˆ°å°±ä¼šè¢«ä¸¢å¼ƒã€‚å’Œæ¼æ¡¶åŒ€é€Ÿæµå‡ºå¤„ç†ä¸åŒï¼Œä»¤ç‰Œæ¡¶è¿˜èƒ½é€šè¿‡æ§åˆ¶æ”¾ä»¤ç‰Œçš„é€Ÿç‡æ¥æ§åˆ¶æ¥æ”¶æ–°è¯·æ±‚çš„é¢‘ç‡ï¼Œå¯¹äºçªå‘æµé‡ï¼Œå¯é ç´¯è®¡çš„ä»¤ç‰Œæ¥å¤„ç†ï¼Œä½†æ˜¯ç›¸å¯¹çš„å¤„ç†é€Ÿåº¦ä¹Ÿä¼šçªå¢ã€‚ä»¤ç‰Œæ¡¶ç®—æ³•é€‚ç”¨äºæ§åˆ¶ç¬¬ä¸‰æ–¹æœåŠ¡è®¿é—®é€Ÿåº¦çš„åœºæ™¯ï¼Œé˜²æ­¢å‹å®ä¸‹æ¸¸ã€‚\n\né™¤äº†é™æµï¼Œè¿˜æœ‰ä¸€ç§æ§åˆ¶å¤„ç†é€Ÿåº¦çš„æ–¹æ³•å°±æ˜¯**æ’é˜Ÿ**ã€‚å½“æ–°è¯·æ±‚åˆ°æ¥åå…ˆåŠ å…¥é˜Ÿåˆ—ï¼Œå‡ºé˜Ÿç«¯é€šè¿‡å›ºå®šé€Ÿåº¦å‡ºé˜Ÿå¤„ç†è¯·æ±‚ï¼Œé¿å…å¤„ç†å•å…ƒå‹åŠ›è¿‡å¤§ã€‚é˜Ÿåˆ—ä¹Ÿæœ‰é•¿åº¦é™åˆ¶ï¼Œå…¶æœºåˆ¶å’Œæ¼æ¡¶ç®—æ³•å·®ä¸å¤šã€‚\n\nå¦‚æœçœŸçš„äº‹å‰é˜²èŒƒçœŸçš„è¢«çªç ´äº†ï¼Œæ¥å£å¾ˆå¯èƒ½æˆ–å·²ç»å‘ç”Ÿäº†æ•…éšœï¼Œè¿˜èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿ\n\nä¸€ç§æ‰‹æ®µæ˜¯**ç†”æ–­**ï¼Œå³å½“å¤„ç†é‡è¾¾åˆ°é˜ˆå€¼ï¼Œå°±ä¸»åŠ¨åœæ‰å¤–éƒ¨æ¥å£çš„è®¿é—®èƒ½åŠ›ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯ä¸€ç§é˜²èŒƒæªæ–½ï¼Œå¯¹å¤–çš„è¡¨ç°è™½ç„¶æ˜¯æ¥å£è®¿é—®æ•…éšœï¼Œä½†ç³»ç»Ÿå†…éƒ¨å¾—ä»¥è¢«ä¿æŠ¤ï¼Œä¸ä¼šå¼•èµ·æ›´å¤§çš„é—®é¢˜ï¼Œå¾…å­˜é‡å¤„ç†è¢«æ¶ˆåŒ–å®Œï¼Œæˆ–è€…å¤–éƒ¨è¯·æ±‚å‡å¼±ï¼Œæˆ–å®Œæˆæ‰©å®¹åï¼Œå†å¼€æ”¾æ¥å£ã€‚ç†”æ–­çš„è®¾è®¡ä¸»è¦æ˜¯é˜ˆå€¼ï¼Œéœ€è¦æŒ‰ç…§ä¸šåŠ¡ç‰¹ç‚¹å’Œç»Ÿè®¡æ•°æ®åˆ¶å®šã€‚\n\nå½“æ¥å£æ•…éšœåï¼ˆæ— è®ºæ˜¯è¢«åŠ¨è¿˜æ˜¯ä¸»åŠ¨æ–­å¼€ï¼‰ï¼Œæœ€å¥½èƒ½æä¾›**é™çº§**ç­–ç•¥ã€‚é™çº§æ˜¯ä¸¢è½¦ä¿å¸…ï¼Œæ”¾å¼ƒä¸€ä¸‹éæ ¸å¿ƒä¸šåŠ¡ï¼Œä¿éšœæ ¸å¿ƒä¸šåŠ¡å¯ç”¨ï¼Œæˆ–è€…æœ€ä½ç¨‹åº¦èƒ½æä¾›æ•…éšœå…¬å‘Šï¼Œè®©ç”¨æˆ·ä¸è¦åå¤å°è¯•è¯·æ±‚æ¥åŠ é‡é—®é¢˜äº†ã€‚æ¯”èµ·æ‰‹åŠ¨é™çº§ï¼Œæ›´å¥½çš„åšæ³•ä¹Ÿæ˜¯è‡ªåŠ¨é™çº§ï¼Œéœ€è¦å…·å¤‡æ£€æµ‹å’Œå‘ç°é™çº§æ—¶æœºçš„æœºåˆ¶ã€‚\n\n## å¯æ‰©å±•æ¶æ„æ¨¡å¼\n\nå†å›é¡¾ä¸€éäº’è”ç½‘è¡Œä¸šçš„é‡‘ç§‘ç‰å¾‹ï¼šåªæœ‰å˜åŒ–æ‰æ˜¯ä¸å˜çš„ã€‚åœ¨è®¾è®¡æ¶æ„æ—¶ï¼Œä¸€å¼€å§‹å°±è¦æŠ±ç€ä¸šåŠ¡éšæ—¶å¯èƒ½å˜åŠ¨å¯¼è‡´æ¶æ„ä¹Ÿè¦è·Ÿç€å˜åŠ¨çš„æ€æƒ³å‡†å¤‡å»è®¾è®¡ï¼Œå·®åˆ«åªåœ¨äºå˜åŒ–çš„å¿«æ…¢è€Œå·²ã€‚å› æ­¤åœ¨è®¾è®¡æ¶æ„æ—¶ä¸€å®šæ˜¯è¦è€ƒè™‘å¯æ‰©å±•æ€§çš„ã€‚\n\nåœ¨æ€è€ƒæ€æ ·æ‰æ˜¯å¯æ‰©å±•çš„æ—¶å€™ï¼Œå…ˆæƒ³ä¸€æƒ³å¹³å¸¸å¼€å‘ä¸­ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§‰å¾—æ‰©å±•æ€§ä¸å¥½ï¼Ÿå¤§éƒ½æ˜¯å› ä¸ºç³»ç»Ÿåºå¤§ã€è€¦åˆä¸¥é‡ã€ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚å› æ­¤å¯¹å¯æ‰©å±•æ¶æ„è®¾è®¡æ¥è¯´ï¼ŒåŸºæœ¬çš„æ€æƒ³å°±æ˜¯**æ‹†åˆ†**ã€‚\n\næ‹†åˆ†ä¹Ÿæœ‰å¤šç§æŒ‡å¯¼æ€æƒ³ï¼Œå¦‚æœé¢å‘ä¸šåŠ¡æµç¨‹æ¥è°ˆæ‹†åˆ†ï¼Œå°±æ˜¯åˆ†å±‚æ¶æ„ï¼›å¦‚æœé¢å‘ç³»ç»ŸæœåŠ¡æ¥è°ˆæ‹†åˆ†ï¼Œå°±æ˜¯ SOAã€å¾®æœåŠ¡æ¶æ„ï¼›å¦‚æœé¢å‘ç³»ç»ŸåŠŸèƒ½æ¥æ‹†åˆ†ï¼Œå°±æ˜¯å¾®å†…æ ¸æ¶æ„ã€‚\n\n- **åˆ†å±‚æ¶æ„**\n\n**åˆ†å±‚æ¶æ„**æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ï¼Œå› ä¸ºäº’è”ç½‘ä¸šåŠ¡ä¸‹ï¼Œå·²ç»å¾ˆå°‘æœ‰çº¯å•æœºçš„æœåŠ¡ï¼Œå› æ­¤è‡³å°‘éƒ½æ˜¯ C/S æ¶æ„ã€B/S æ¶æ„ï¼Œä¹Ÿå°±æ˜¯è‡³å°‘ä¹Ÿåˆ†ä¸ºäº†å®¢æˆ·ç«¯/æµè§ˆå™¨å’Œåå°æœåŠ¡å™¨è¿™ä¸¤å±‚ã€‚å¦‚æœè¿›ä¸€æ­¥æ‹†åˆ†ï¼Œå°±ä¼šå°†åå°æœåŠ¡åŸºäºèŒè´£è¿›è¡Œè‡ªé¡¶å‘ä¸‹çš„åˆ’åˆ†ï¼Œæ¯”å¦‚åˆ†ä¸ºæ¥å…¥å±‚ã€åº”ç”¨å±‚ã€é€»è¾‘å±‚ã€é¢†åŸŸå±‚ç­‰ã€‚\n\nåˆ†å±‚çš„ç›®çš„å½“ç„¶æ˜¯ä¸ºäº†è®©å„ä¸ªå±‚æ¬¡é—´çš„æœåŠ¡å‡å°‘è€¦åˆï¼Œæ–¹ä¾¿è¿›è¡Œå„è‡ªèŒƒç•´ä¸‹çš„ä¼˜åŒ–ï¼Œå› æ­¤éœ€è¦ä¿è¯å„å±‚çº§é—´çš„å·®å¼‚æ˜¯è¶³å¤Ÿæ¸…æ™°ã€è¾¹ç•Œè¶³å¤Ÿæ˜æ˜¾çš„ï¼Œå¦åˆ™å½“è¦å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™å°±ä¼šä¸çŸ¥é“è¯¥æ”¾åˆ°å“ªä¸€å±‚ã€‚å„ä¸ªå±‚åªå¤„ç†æœ¬å±‚é€»è¾‘ï¼Œéš”ç¦»å…³æ³¨ç‚¹ã€‚\n\né¢å¤–éœ€æ³¨æ„çš„æ˜¯ä¸€æ—¦ç¡®å®šäº†åˆ†å±‚ï¼Œè¯·æ±‚å°±å¿…é¡»å±‚å±‚ä¼ é€’ï¼Œä¸èƒ½è·³å±‚ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…æ¶æ„æ··ä¹±ï¼Œå¢åŠ ç»´æŠ¤å’Œæ‰©å±•çš„å¤æ‚åº¦ï¼Œæ¯”å¦‚ä¸ºäº†æ–¹ä¾¿ç›´æ¥è·¨å±‚ä»æ¥å…¥å±‚è°ƒç”¨é¢†åŸŸå±‚æŸ¥è¯¢æ•°æ®ï¼Œå½“éœ€è¦è¿›è¡Œç»Ÿä¸€çš„é€»è¾‘å¤„ç†æ—¶ï¼Œå°±æ— æ³•åˆ‡é¢å¤„ç†æ‰€æœ‰è¯·æ±‚äº†ã€‚\n\n- **SOA æ¶æ„**\n\n**SOA æ¶æ„**æ›´å¤šå‡ºç°åœ¨ä¼ ç»Ÿä¼ä¸šä¸­ï¼Œå…¶ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ä¼ä¸šä¸­ IT å»ºè®¾é‡å¤ä¸”æ•ˆç‡ä½ä¸‹ï¼Œå„éƒ¨é—¨è‡ªè¡Œæ¥å…¥ç‹¬ç«‹çš„ IT ç³»ç»Ÿï¼Œå½¼æ­¤ä¹‹é—´æ¶æ„ã€åè®®éƒ½ä¸åŒï¼Œä¸ºäº†è®©å„ä¸ªç³»ç»Ÿçš„æœåŠ¡èƒ½å¤Ÿåè°ƒå·¥ä½œï¼ŒSOA æ¶æ„åº”è¿è€Œç”Ÿã€‚\n\nå…¶æœ‰ä¸‰ä¸ªå…³é”®æ¦‚å¿µï¼šæœåŠ¡ã€ESB å’Œæ¾è€¦åˆã€‚\n\næœåŠ¡æ˜¯æŒ‡å„ä¸ªä¸šåŠ¡åŠŸèƒ½ï¼Œæ¯”å¦‚åŸæœ¬å„éƒ¨é—¨åŸæœ¬çš„ç³»ç»Ÿæä¾›çš„æœåŠ¡ï¼Œå¯å¤§å¯å°ã€‚ç”±äºå„æœåŠ¡ä¹‹é—´æ— æ³•ç›´æ¥é€šä¿¡ï¼Œå› æ­¤éœ€è¦ ESBï¼Œå³ä¼ä¸šæœåŠ¡æ€»çº¿è¿›è¡Œå¯¹æ¥ï¼Œå®ƒå°†ä¸åŒæœåŠ¡è¿æ¥åœ¨ä¸€èµ·ï¼Œå±è”½å„ä¸ªæœåŠ¡çš„ä¸åŒæ¥å£æ ‡å‡†ï¼Œç±»ä¼¼è®¡ç®—æœºä¸­çš„æ€»çº¿ã€‚æ¾è€¦åˆæ˜¯æŒ‡å„ä¸ªæœåŠ¡çš„ä¾èµ–éœ€è¦å°½é‡å°‘ï¼Œå¦åˆ™æŸä¸ªæœåŠ¡å‡çº§åæ•´ä¸ªç³»ç»Ÿæ— æ³•ä½¿ç”¨å°±éº»çƒ¦äº†ã€‚\n\nè¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒESB ä½œä¸ºæ€»çº¿ï¼Œä¸ºäº†å¯¹æ¥å„ä¸ªæœåŠ¡ï¼Œè¦å¤„ç†å„ç§ä¸åŒçš„åè®®ï¼Œå…¶åè®®è½¬æ¢è€—è´¹äº†å¤§é‡çš„æ€§èƒ½ï¼Œä¼šæˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆã€‚\n\n- **å¾®æœåŠ¡**\n\n**å¾®æœåŠ¡**æ˜¯è¿‘å‡ å¹´æœ€è€³ç†Ÿèƒ½è¯¦çš„æ¶æ„ï¼Œå…¶å®å®ƒå’Œ SOA æœ‰ä¸€äº›ç›¸åŒä¹‹å¤„ï¼Œæ¯”å¦‚éƒ½æ˜¯å°†å„ä¸ªæœåŠ¡æ‹†åˆ†å¼€æ¥æä¾›èƒ½åŠ›ã€‚ä½†æ˜¯å’Œ SOA ä¹Ÿæœ‰ä¸€äº›æœ¬è´¨çš„åŒºåˆ«ï¼Œå¾®æœåŠ¡æ˜¯æ²¡æœ‰ ESB çš„ï¼Œå…¶é€šä¿¡åè®®æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤é€šä¿¡ç®¡é“ä»…ä»…åšæ¶ˆæ¯çš„ä¼ é€’ï¼Œä¸ç†è§£å†…å®¹å’Œæ ¼å¼ï¼Œä¹Ÿå°±æ²¡æœ‰ ESB çš„é—®é¢˜ã€‚è€Œä¸”ä¸ºäº†å¿«é€Ÿäº¤ä»˜ã€è¿­ä»£ï¼Œå…¶æœåŠ¡çš„ç²’åº¦ä¼šåˆ’åˆ†åœ°æ›´ç»†ï¼Œå¯¹è‡ªåŠ¨åŒ–éƒ¨ç½²èƒ½åŠ›ä¹Ÿå°±è¦æ±‚æ›´é«˜ï¼Œå¦åˆ™éƒ¨ç½²æˆæœ¬å¤ªå¤§ï¼Œè¾¾ä¸åˆ°è½»é‡å¿«é€Ÿçš„ç›®çš„ã€‚\n\nå½“ç„¶å¾®æœåŠ¡è™½ç„¶å¾ˆç«ï¼Œä½†ä¹Ÿä¸æ˜¯è§£å†³æ‰€æœ‰é—®é¢˜çš„é“¶å¼¹ï¼Œå®ƒä¹Ÿä¼šæœ‰ä¸€äº›é—®é¢˜å­˜åœ¨ã€‚å¦‚æœæœåŠ¡åˆ’åˆ†çš„å¤ªç»†ï¼Œé‚£ä¹ˆäº’ç›¸ä¹‹é—´çš„ä¾èµ–å…³ç³»å°±ä¼šå˜å¾—ç‰¹åˆ«å¤æ‚ï¼ŒæœåŠ¡æ•°é‡ã€æ¥å£é‡ã€éƒ¨ç½²é‡è¿‡å¤šï¼Œå›¢é˜Ÿçš„æ•ˆç‡å¯èƒ½å¤§é™ï¼Œå¦‚æœæ²¡æœ‰è‡ªåŠ¨åŒ–æ”¯æ’‘ï¼Œäº¤ä»˜æ•ˆç‡ä¼šå¾ˆä½ã€‚ç”±äºè°ƒç”¨é“¾å¤ªé•¿ï¼ˆå¤šä¸ªæœåŠ¡ï¼‰ï¼Œå› æ­¤æ€§èƒ½ä¹Ÿä¼šä¸‹é™ï¼Œé—®é¢˜å®šä½ä¼šæ›´å›°éš¾ï¼Œå¦‚æœæ²¡æœ‰æœåŠ¡æ²»ç†çš„èƒ½åŠ›ï¼Œç®¡ç†èµ·æ¥ä¼šå¾ˆæ··ä¹±ï¼Œä¸çŸ¥é“æ¯ä¸ªæœåŠ¡çš„æƒ…å†µå¦‚ä½•ã€‚\n\nå› æ­¤å¦‚ä½•æ‹†åˆ†æœåŠ¡å°±æˆäº†æ¯ä¸ªä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„å›¢é˜Ÿçš„é‡è¦è€ƒé‡ç‚¹ã€‚è¿™é‡Œä¹Ÿæä¾›ä¸€äº›æ‹†åˆ†çš„æ€è·¯ï¼š\n\n> ä¸‰ä¸ªç«æªæ‰‹åŸåˆ™ï¼šè€ƒè™‘æ¯ä¸‰ä¸ªäººè´Ÿè´£ä¸€ä¸ªæœåŠ¡ï¼Œäº’ç›¸å¯ä»¥å½¢æˆç¨³å®šçš„äººå‘˜å¤‡ä»½ï¼Œè®¨è®ºèµ·æ¥ä¹Ÿæ›´å®¹æ˜“å¾—å‡ºç»“è®ºï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè€ƒè™‘èƒ½è´Ÿè´£å¤šå¤§çš„ä¸€ä¸ªæœåŠ¡ã€‚åŸºäºä¸šåŠ¡é€»è¾‘æ‹†åˆ†ï¼šæœ€ç›´è§‚çš„å°±æ˜¯æŒ‰é€»è¾‘æ‹†åˆ†ï¼Œå¦‚æœèŒè´£ä¸æ¸…ï¼Œå°±å‚è€ƒä¸‰ä¸ªç«æªæ‰‹åŸåˆ™ç¡®å®šæœåŠ¡å¤§å°ã€‚åŸºäºç¨³å®šæ€§æ‹†åˆ†ï¼šæŒ‰ç…§æœåŠ¡çš„ç¨³å®šæ€§åˆ†ä¸ºç¨³å®šæœåŠ¡å’Œå˜åŠ¨æœåŠ¡ï¼Œç¨³å®šæœåŠ¡ç²’åº¦å¯ä»¥ç²—ä¸€äº›ï¼Œå˜åŠ¨æœåŠ¡ç²’åº¦å¯ä»¥ç»†ä¸€äº›ï¼Œç›®çš„æ˜¯å‡å°‘å˜åŠ¨æœåŠ¡ä¹‹é—´çš„å½±å“ï¼Œä½†æ€»ä½“æ•°é‡ä¾ç„¶è¦æ§åˆ¶ã€‚åŸºäºå¯é æ€§æ‹†åˆ†ï¼šæŒ‰ç…§å¯é æ€§æ’åºï¼Œè¦æ±‚é«˜çš„å¯ä»¥æ‹†ç»†ä¸€äº›ï¼Œç”±å‰æ–‡å¯çŸ¥ï¼ŒæœåŠ¡è¶Šç®€å•ï¼Œé«˜å¯ç”¨æ–¹æ¡ˆå°±ä¼šè¶Šç®€å•ï¼Œæˆæœ¬ä¹Ÿä¼šè¶Šä½ã€‚ä¼˜å…ˆä¿éšœæ ¸å¿ƒæœåŠ¡çš„é«˜å¯ç”¨ã€‚åŸºäºæ€§èƒ½æ‹†åˆ†ï¼šç±»ä¼¼å¯é æ€§ï¼Œæ€§èƒ½è¦æ±‚è¶Šé«˜çš„ï¼Œæ‹†å‡ºæ¥å•ç‹¬åšé«˜æ€§èƒ½ä¼˜åŒ–ï¼Œå¯æœ‰æ•ˆé™ä½æˆæœ¬ã€‚\n\nå¾®æœåŠ¡æ¶æ„å¦‚æœæ²¡æœ‰å®Œå–„çš„åŸºç¡€è®¾æ–½ä¿éšœæœåŠ¡æ²»ç†ï¼Œé‚£ä¹ˆä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼Œé™ä½æ•ˆç‡ï¼Œå› æ­¤æ ¹æ®å›¢é˜Ÿå’Œä¸šåŠ¡çš„è§„æ¨¡ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§è¿›è¡ŒåŸºç¡€è®¾æ–½çš„æ”¯æŒï¼š\n\n> ä¼˜å…ˆæ”¯æŒæœåŠ¡å‘ç°ã€æœåŠ¡è·¯ç”±ã€æœåŠ¡å®¹é”™ï¼ˆé‡è¯•ã€æµæ§ã€éš”ç¦»ï¼‰ï¼Œè¿™äº›æ˜¯å¾®æœåŠ¡çš„åŸºç¡€ã€‚æ¥ç€æ”¯æŒæ¥å£æ¡†æ¶ï¼ˆç»Ÿä¸€çš„åè®®æ ¼å¼ä¸è§„èŒƒï¼‰ã€API ç½‘å…³ï¼ˆæ¥å…¥é‰´æƒã€æƒé™æ§åˆ¶ã€ä¼ è¾“åŠ å¯†ã€è¯·æ±‚è·¯ç”±ç­‰ï¼‰ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚ç„¶åæ”¯æŒè‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨åŒ–æµ‹è¯•èƒ½åŠ›ï¼Œå¹¶æ­å»ºé…ç½®ä¸­å¿ƒï¼Œå¯ä»¥æå‡æµ‹è¯•å’Œè¿ç»´çš„æ•ˆç‡ã€‚æœ€åæ”¯æŒæœåŠ¡ç›‘æ§ã€æœåŠ¡è·Ÿè¸ªã€æœåŠ¡å®‰å…¨ï¼ˆæ¥å…¥å®‰å…¨ã€æ•°æ®å®‰å…¨ã€ä¼ è¾“å®‰å…¨ã€é…ç½®åŒ–å®‰å…¨ç­–ç•¥ç­‰ï¼‰çš„èƒ½åŠ›ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜è¿ç»´æ•ˆç‡ã€‚\n\n\n\n- **å¾®å†…æ ¸æ¶æ„**\n\næœ€åè¯´è¯´**å¾®å†…æ ¸æ¶æ„**ï¼Œä¹Ÿå«æ’ä»¶åŒ–æ¶æ„ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯é¢å‘åŠŸèƒ½æ‹†åˆ†çš„ï¼Œé€šå¸¸åŒ…å«æ ¸å¿ƒç³»ç»Ÿå’Œæ’ä»¶æ¨¡å—ã€‚åœ¨å¾®å†…æ ¸æ¶æ„ä¸­ï¼Œæ ¸å¿ƒç³»ç»Ÿéœ€è¦æ”¯æŒæ’ä»¶çš„ç®¡ç†å’Œé“¾æ¥ï¼Œå³å¦‚ä½•åŠ è½½æ’ä»¶ï¼Œä½•æ—¶åŠ è½½æ’ä»¶ï¼Œæ’ä»¶å¦‚ä½•æ–°å¢å’Œæ“ä½œï¼Œæ’ä»¶å¦‚ä½•å’Œæ ¸å¿ƒå¼•æ“é€šä¿¡ç­‰ã€‚\n\nä¸¾ä¸€ä¸ªæœ€å¸¸è§çš„å¾®å†…æ ¸æ¶æ„çš„ä¾‹å­â€”â€”è§„åˆ™å¼•æ“ï¼Œåœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œå¼•æ“æ˜¯å†…æ ¸ï¼Œè´Ÿè´£è§£æè§„åˆ™ï¼Œå¹¶å°†è¾“å…¥é€šè¿‡è§„åˆ™å¤„ç†åå¾—åˆ°è¾“å‡ºã€‚è€Œå„ç§è§„åˆ™åˆ™æ˜¯æ’ä»¶ï¼Œé€šå¸¸æ ¹æ®å„ç§ä¸šåŠ¡åœºæ™¯è¿›è¡Œé…ç½®ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚\n\n## æ€»ç»“\n\näººä»¬é€šå¸¸æŠŠæŸé¡¹äº’è”ç½‘ä¸šåŠ¡çš„å‘å±•åˆ†ä¸ºå››ä¸ªæ—¶æœŸï¼šåˆåˆ›æœŸã€å‘å±•æœŸã€ç«äº‰æœŸå’Œæˆç†ŸæœŸã€‚\n\nåœ¨åˆåˆ›æœŸé€šå¸¸æ±‚å¿«ï¼Œç³»ç»Ÿèƒ½ä¹°å°±ä¹°ï¼Œèƒ½ç”¨å¼€æºå°±ç”¨å¼€æºï¼Œèƒ½ç”¨çš„å°±æ˜¯å¥½çš„ï¼Œå…ˆè¦æ´»ä¸‹æ¥ï¼›åˆ°äº†å‘å±•æœŸå¼€å§‹å †åŠŸèƒ½å’Œä¼˜åŒ–ï¼Œè¦æ±‚èƒ½å¿«é€Ÿå®ç°éœ€æ±‚ï¼Œå¹¶æœ‰ä½™åŠ›å¯¹ä¸€äº›ç³»ç»Ÿçš„é—®é¢˜è¿›è¡Œä¼˜åŒ–ï¼Œå½“ä¼˜åŒ–åˆ°é¡¶çš„æ—¶å€™å°±éœ€è¦ä»æ¶æ„å±‚é¢æ¥æ‹†åˆ†ä¼˜åŒ–äº†ï¼›è¿›å…¥ç«äº‰æœŸåï¼Œç»è¿‡å‘å±•æœŸçš„å¿«é€Ÿè¿­ä»£ï¼Œå¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤šé‡å¤é€ è½®å­å’Œæ··ä¹±çš„äº¤äº’ï¼Œæ­¤æ—¶å°±éœ€è¦é€šè¿‡å¹³å°åŒ–ã€æœåŠ¡åŒ–æ¥è§£å†³ä¸€äº›å…¬å…±çš„é—®é¢˜ï¼›æœ€ååˆ°è¾¾æˆç†ŸæœŸåï¼Œä¸»è¦åœ¨äºè¡¥é½çŸ­æ¿ï¼Œä¼˜åŒ–å¼±é¡¹ï¼Œä¿éšœç³»ç»Ÿçš„ç¨³å®šã€‚\n\nåœ¨æ•´ä¸ªå‘å±•çš„è¿‡ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªåŠŸèƒ½çš„å‰åè¦æ±‚ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œéšç€ç”¨æˆ·è§„æ¨¡çš„å¢åŠ ï¼Œæ€§èƒ½ä¼šè¶Šæ¥è¶Šéš¾ä¿éšœï¼Œå¯ç”¨æ€§é—®é¢˜çš„å½±å“ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œå› æ­¤å¤æ‚åº¦å°±æ¥äº†ã€‚\n\nå¯¹äºæ¶æ„å¸ˆæ¥è¯´ï¼Œé¦–è¦çš„ä»»åŠ¡æ˜¯ä»å½“å‰ç³»ç»Ÿçš„ä¸€å¤§å †çº·ç¹å¤æ‚çš„é—®é¢˜ä¸­è¯†åˆ«å‡ºçœŸæ­£è¦é€šè¿‡æ¶æ„é‡æ„æ¥è§£å†³çš„é—®é¢˜ï¼Œé›†ä¸­åŠ›é‡å¿«é€Ÿçªç ´ï¼Œä½†æ•´ä½“æ¥è¯´ï¼Œè¦å¾å¾å›¾ä¹‹ï¼Œä¸è¦æƒ³ç€ç”¨é‡æ„æ¥ä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰é—®é¢˜ã€‚\n\nå¯¹é¡¹ç›®ä¸­çš„é—®é¢˜åšå¥½åˆ†ç±»ï¼Œåˆ’åˆ†ä¼˜å…ˆçº§ï¼Œå…ˆæ˜“åéš¾ï¼Œæ‰æ›´å®¹æ˜“é€šè¿‡è¾ƒå°‘çš„èµ„æºå ç”¨ï¼Œè¾ƒå¿«åœ°å¾—åˆ°æˆæœï¼Œæé«˜å£«æ°”ã€‚ç„¶åå†å¾ªåºæ¸è¿›ï¼Œæ¯ä¸ªé˜¶æ®µæ§åˆ¶åœ¨ 1~3 ä¸ªæœˆï¼Œç¨³æ­¥æ¨è¿›ã€‚\n\nå½“ç„¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå…ä¸äº†å’Œä¸Šä¸‹æ¸¸å›¢é˜Ÿæ²Ÿé€šåä½œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è‡ªå·±çš„ç›®æ ‡å’Œå…¶ä»–å›¢é˜Ÿçš„ç›®æ ‡å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œéœ€è¦å¯¹é‡æ„çš„ä»·å€¼è¿›è¡Œæ¢ä½æ€è€ƒï¼Œè®©åŒæ–¹éƒ½å¯ä»¥åˆä½œå…±èµ¢ï¼Œæ‰èƒ½å€ŸåŠ›å‰è¿›ã€‚\n\nè¿˜æ˜¯å›åˆ°å¼€å¤´çš„é‚£å¥è¯ï¼Œæ¶æ„è®¾è®¡çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§£å†³è½¯ä»¶ç³»ç»Ÿå¤æ‚åº¦å¸¦æ¥çš„é—®é¢˜ã€‚é¦–å…ˆæ‰¾åˆ°ä¸»è¦çŸ›ç›¾åœ¨å“ªï¼Œåšåˆ°æœ‰çš„æ”¾çŸ¢ï¼Œç„¶åå†ç»“åˆçŸ¥è¯†ã€ç»éªŒè¿›è¡Œè®¾è®¡ï¼Œå»è§£å†³é¢å‰çš„é—®é¢˜ã€‚\n\n[ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†äººåšä¸äº†æ¶æ„å¸ˆï¼Ÿ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7251779626682023994)\n","tags":["å…¶ä»–"],"categories":["å…¶ä»–"]},{"title":"lambdaè¡¨è¾¾å¼","url":"/2023/08/05/lambdaè¡¨è¾¾å¼/","content":"\n## ç®€ä»‹\n\nLambda è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ç§°ä¸ºé—­åŒ…ï¼Œå®ƒæ˜¯æ¨åŠ¨ Java 8 å‘å¸ƒçš„æœ€é‡è¦æ–°ç‰¹æ€§ã€‚\n\nLambda å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ã€‚\n\nä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ä»£ç å˜çš„æ›´åŠ ç®€æ´ç´§å‡‘ã€‚\n\n### è¯­æ³•\n\nlambda è¡¨è¾¾å¼çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n\n```java\n(parameters) -> expression //æˆ– \n(parameters) ->{ statements; }\n```\n\n## å‡½æ•°å¼æ¥å£\n\nè¦äº†è§£Lambdaè¡¨è¾¾å¼,é¦–å…ˆéœ€è¦äº†è§£ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Œå‡½æ•°å¼æ¥å£å®šä¹‰ï¼šä¸€ä¸ªæ¥å£æœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•\n\næ³¨æ„ï¼š\n\n1. å¦‚æœä¸€ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥æ¥å£å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£\n2. å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ¥å£ä¸Šå£°æ˜äº† @FunctionalInterface æ³¨è§£ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæŒ‰ç…§å‡½æ•°å¼æ¥å£çš„å®šä¹‰æ¥è¦æ±‚è¯¥æ¥å£ï¼Œè¿™æ ·å¦‚æœæœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œç¨‹åºç¼–è¯‘å°±ä¼šæŠ¥é”™çš„ã€‚æ‰€ä»¥ï¼Œä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œåªè¦ä½ ä¿è¯ä½ çš„æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½ å¯ä»¥ä¸åŠ è¿™ä¸ªæ³¨è§£ã€‚åŠ ä¸Šå°±ä¼šè‡ªåŠ¨è¿›è¡Œæ£€æµ‹çš„ã€‚\n   å®šä¹‰æ–¹å¼ï¼š\n\n```java\n@FunctionalInterface\ninterface NoParameterNoReturn {\n\t//æ³¨æ„ï¼šåªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•\n\tvoid test();\n}\n```\n\nä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼šæˆ‘ä»¬çŸ¥é“åœ¨ jdk1.8ä¹‹åæ¥å£ä¸­çš„æ–¹æ³•å¼å¯ä»¥æœ‰å…·ä½“å®ç°çš„\n\n```java\n@FunctionalInterface\ninterface NoParameterNoReturn {\n\tvoid test();\n\tdefault void test2() {\n\t\tSystem.out.println(\"JDK1.8æ–°ç‰¹æ€§ï¼Œdefaulté»˜è®¤æ–¹æ³•å¯ä»¥æœ‰å…·ä½“çš„å®ç°\");\n\t}\n}\n```\n\n## Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨\n\n### æ— è¿”å›å€¼å‡½æ•°å¼æ¥å£\n\n```java\n//æ— è¿”å›å€¼æ— å‚æ•°\n@FunctionalInterface\ninterface NoParameterNoReturn {\n    void test();\n}\n//æ— è¿”å›å€¼ä¸€ä¸ªå‚æ•°\n@FunctionalInterface\ninterface OneParameterNoReturn {\n    void test(int a);\n}\n//æ— è¿”å›å€¼ä¸¤ä¸ªå‚æ•°\n@FunctionalInterface\ninterface MoreParameterNoReturn {\n    void test(int a,int b);\n}\npublic class TestDemo {\n    public static void main(String[] args) {\n        NoParameterNoReturn n = ()->{\n            System.out.println(\"æ— å‚æ•°æ— è¿”å›å€¼\");\n        };\n        n.test();\n\n        OneParameterNoReturn o = (a)-> {\n            System.out.println(\"æ— è¿”å›å€¼ä¸€ä¸ªå‚æ•°\"+a);\n        };\n        o.test(666);\n        MoreParameterNoReturn m = (int a,int b)->{\n            System.out.println(\"æ— è¿”å›å€¼ä¸¤ä¸ªå‚æ•°\"+a+\" \"+b);\n        };\n        m.test(666,999);\n    }\n}\n```\n\n### æœ‰è¿”å›å€¼å‡½æ•°æ¥å£\n\n```java\n//æœ‰è¿”å›å€¼æ— å‚æ•°\n@FunctionalInterface\ninterface NoParameterReturn {\n    int test();\n}\n//æœ‰è¿”å›å€¼ä¸€ä¸ªå‚æ•°\n@FunctionalInterface\ninterface OneParameterReturn {\n    int test(int a);\n}\n//æœ‰è¿”å›å€¼å¤šä¸ªå‚æ•°\n@FunctionalInterface\ninterface MoreParameterReturn {\n    int test(int a,int b);\n}\npublic class TestDemo {\n    public static void main(String[] args) {\n        NoParameterReturn n = ()->{\n            return 666;\n        };\n        int ret1 = n.test();\n        System.out.println(ret1);\n        System.out.println(\"================\");\n        OneParameterReturn o = (int a)->{\n            return a;\n        };\n        int ret2 = o.test(999);\n        System.out.println(ret2);\n        System.out.println(\"================\");\n        MoreParameterReturn m = (int a,int b)-> {\n            return a+b;\n        };\n        int ret3 = m.test(10,90);\n        System.out.println(ret3);\n    }\n}\n```\n\n## è¯­æ³•ç²¾ç®€\n\nLambdaè¡¨è¾¾å¼çš„è¯­æ³•è¿˜å¯ä»¥ç²¾ç®€ï¼Œæ˜¾å¾—éå¸¸æœ‰é€¼æ ¼ï¼Œä½†æ˜¯å¯è¯»æ€§å°±éå¸¸å·®ã€‚\n\n1. å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œå¦‚æœéœ€è¦çœç•¥ï¼Œæ¯ä¸ªå‚æ•°çš„ç±»å‹éƒ½è¦çœç•¥ã€‚\n2. å‚æ•°çš„å°æ‹¬å·é‡Œé¢åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå°æ‹¬å·å¯ä»¥çœç•¥\n3. å¦‚æœæ–¹æ³•ä½“å½“ä¸­åªæœ‰ä¸€å¥ä»£ç ï¼Œé‚£ä¹ˆå¤§æ‹¬å·å¯ä»¥çœç•¥\n4. å¦‚æœæ–¹æ³•ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå…¶æ˜¯returnè¯­å¥ï¼Œé‚£ä¹ˆå¤§æ‹¬å·å¯ä»¥çœç•¥ï¼Œä¸”å»æ‰returnå…³é”®å­—\n   æŠŠä¸Šé¢çš„ä»£ç ç²¾ç®€ç¤ºä¾‹ï¼š\n\n```java\n\tpublic static void main(String[] args) {\n        MoreParameterNoReturn moreParameterNoReturn = (a, b)->{\n            System.out.println(\"æ— è¿”å›å€¼å¤šä¸ªå‚æ•°ï¼Œçœç•¥å‚æ•°ç±»å‹ï¼š\"+a+\" \"+b);\n        };\n        moreParameterNoReturn.test(20,30);\n        OneParameterNoReturn oneParameterNoReturn = a ->{\n            System.out.println(\"æ— å‚æ•°ä¸€ä¸ªè¿”å›å€¼,å°æ‹¬å·å¯ä»¥çœç•¥ï¼š\"+ a);\n        };\n        oneParameterNoReturn.test(10);\n        NoParameterNoReturn noParameterNoReturn = ()->System.out.println(\"æ— å‚æ•°æ— è¿”å›å€¼ï¼Œæ–¹æ³•ä½“ä¸­åªæœ‰ ä¸€è¡Œä»£ç \");\n        noParameterNoReturn.test();\n        //æ–¹æ³•ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¸”æ˜¯returnè¯­å¥\n        NoParameterReturn noParameterReturn = ()-> 40;\n        int ret = noParameterReturn.test();\n        System.out.println(ret);\n    }\n```\n\n## å˜é‡æ•è·\n\nLambda è¡¨è¾¾å¼ä¸­å­˜åœ¨å˜é‡æ•è· ï¼Œäº†è§£äº†å˜é‡æ•è·ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„ç†è§£Lambda è¡¨è¾¾å¼çš„ä½œç”¨åŸŸ ã€‚Javaå½“ä¸­çš„åŒ¿åç±»ä¸­ï¼Œä¼šå­˜åœ¨å˜é‡æ•è·ã€‚\n\n```java\n//å˜é‡å¦‚æœå‡ºç°åœ¨å†…éƒ¨ä¼šæŠ¥é”™\npublic class VariableCapture {\n    public static void main(String[] args) {\n        int a = 100;\n        Test t = new Test(){\n            int a = 100  //error\n            @Override\n            public void func(){\n                System.out.println(\"æ•è·çš„å˜é‡æ˜¯ï¼š\"+a);\n            }\n        };\n        t.func();\n    }\n}\nclass Test{\n    public void func(){\n        System.out.println(\"func\");\n    }\n}\n```\n\n## Lambdaåœ¨é›†åˆå½“ä¸­çš„ä½¿ç”¨\n\nä¸ºäº†èƒ½å¤Ÿè®©Lambdaå’ŒJavaçš„é›†åˆç±»é›†æ›´å¥½çš„ä¸€èµ·ä½¿ç”¨ï¼Œé›†åˆå½“ä¸­ï¼Œä¹Ÿæ–°å¢äº†éƒ¨åˆ†æ¥å£ï¼Œä»¥ä¾¿ä¸Lambdaè¡¨è¾¾å¼å¯¹æ¥ã€‚è¦ç”¨Lambdaéå†é›†åˆå°±ä¸€å®šè¦çœ‹æ‡‚æºç ã€‚\n\n![d27c0eee706b43fbbbfb14456cba081a](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/d27c0eee706b43fbbbfb14456cba081a.png)\n\n## jdk8æä¾›çš„æ¥å£\n\njdk8ä¸­æä¾›äº†å››ä¸­æœ€åŸºæœ¬çš„å‡½æ•°å¼æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå‡å°‘æˆ‘ä»¬ç¼–å†™é¢å¤–çš„æ¥å£ã€‚\n\n- Predicateï¼šæ³›å‹å•å…¥å‚è¿”å›å¸ƒå°”å€¼å‡ºå‚\n- Functionï¼šæ³›å‹å•å…¥å‚è¿”å›æ³›å‹å‡ºå‚\n- Supplierï¼šæ— å…¥å‚è¿”å›æ³›å‹å‡ºå‚\n- Consumerï¼šæ³›å‹å•å…¥å‚æ— å‡ºå‚\n\n**Predicate**:\n\n```java\n@FunctionalInterface\npublic interface Predicate<T> {\n    /**\n     * Evaluates this predicate on the given argument.\n     *\n     * @param t the input argument\n     * @return {@code true} if the input argument matches the predicate,\n     * @return {@code true}å¦‚æœè¾“å…¥å‚æ•°ä¸è°“è¯åŒ¹é…ï¼Œ\n     * otherwise {@code false\n     */\n    boolean test(T t);\n}\n @Test\n    public void customPredicate(){\n        predicate(\"hello\",x-> x.contains(\"x\"));\n    }\n    /**\n     * å…¥å‚ --> true/false\n     * @param str\n     * @param t\n     */\n    public void predicate(String str, Predicate<String> t){\n        if(t.test(str)){\n            System.out.println(\"haha\");\n        }else {\n            System.out.println(\"what's up\");\n        }\n    }\n```\n\n **Function**:\n\n```java\n@FunctionalInterface\npublic interface Function<T, R> {\n    /**\n     * Applies this function to the given argument.\n     * @param t the function argument\n     * @return the function result\n     */\n    R apply(T t);\n}\n    @Test\n    public void customFunction(){\n        System.out.println(function(10, x -> x * x));\n    }\n    /**\n     * å…¥å‚ --> å‡ºå‚\n     */\n    public int  function(int i, Function<Integer,Integer> f){\n        return f.apply(i);\n    }\n```\n\n**Supplier**:\n\n```java\n@FunctionalInterface\npublic interface Supplier<T> {\n    /**\n\n   * Gets a result.\n      @return a result\n          */\n         T get();\n     }\n@Test\npublic void customSupplier(){\n    System.out.println(supplier(10, () -> new Random().nextInt(20)));\n}\n/**\n * ç©ºå‚ --> å‡ºå‚\n * @return\n */\npublic int  supplier(int i, Supplier<Integer> s){\n    return s.get();\n}\n```\n\nConsumer:\n\n```java\n@FunctionalInterface\npublic interface Consumer<T> {\n \n    /**\n     * Performs this operation on the given argument.\n     * @param t the input argument\n     */\n    void accept(T t);\n}\n \n    @Test\n    public void customConsumer(){\n        consumer(10, (x) -> System.out.println(++x));\n    }\n    /**\n     * å…¥å‚ --> ç©ºå‚\n     */\n    public void  consumer(int i, Consumer<Integer> c){\n         c.accept(i);\n    }\n```\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"ipv6","url":"/2023/08/02/ipv6/","content":"\n## ç®€ä»‹\n\nIPv6æ˜¯è‹±æ–‡â€œInternet Protocol Version 6â€ï¼ˆäº’è”ç½‘åè®®ç¬¬6ç‰ˆï¼‰çš„ç¼©å†™ï¼Œæ˜¯äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆ[IETF](https://baike.baidu.com/item/IETF/2800318?fromModule=lemma_inlink)ï¼‰è®¾è®¡çš„ç”¨äºæ›¿ä»£[IPv4](https://baike.baidu.com/item/IPv4/422599?fromModule=lemma_inlink)çš„ä¸‹ä¸€ä»£IPåè®®ï¼Œå…¶åœ°å€æ•°é‡å·ç§°å¯ä»¥ä¸ºå…¨ä¸–ç•Œçš„æ¯ä¸€ç²’æ²™å­ç¼–ä¸Šä¸€ä¸ªåœ°å€ ã€‚\n\nç”±äºIPv4æœ€å¤§çš„é—®é¢˜åœ¨äºç½‘ç»œåœ°å€èµ„æºä¸è¶³ï¼Œä¸¥é‡åˆ¶çº¦äº†äº’è”ç½‘çš„åº”ç”¨å’Œå‘å±•ã€‚IPv6çš„ä½¿ç”¨ï¼Œä¸ä»…èƒ½è§£å†³ç½‘ç»œåœ°å€èµ„æºæ•°é‡çš„é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿè§£å†³äº†å¤šç§æ¥å…¥è®¾å¤‡è¿å…¥äº’è”ç½‘çš„éšœç¢ ã€‚\n\näº’è”ç½‘æ•°å­—åˆ†é…æœºæ„ï¼ˆ[IANA](https://baike.baidu.com/item/IANA/2800158?fromModule=lemma_inlink)ï¼‰åœ¨2016å¹´å·²å‘å›½é™…äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰æå‡ºå»ºè®®ï¼Œè¦æ±‚æ–°åˆ¶å®šçš„å›½é™…äº’è”ç½‘æ ‡å‡†åªæ”¯æŒIPv6ï¼Œä¸å†å…¼å®¹IPv4ã€‚\n\n## è¡¨ç¤ºæ–¹æ³•\n\n![574e9258d109b3de99d9701cccbf6c81800a4c5b](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/574e9258d109b3de99d9701cccbf6c81800a4c5b.gif)\n\nIPv6çš„é•¿åˆ†å¸ƒå¼ç»“æ„å›¾\n\nIPv6çš„åœ°å€é•¿åº¦ä¸º128ä½ï¼Œæ˜¯IPv4åœ°å€é•¿åº¦çš„4å€ã€‚äºæ˜¯IPv4ç‚¹åˆ†åè¿›åˆ¶æ ¼å¼ä¸å†é€‚ç”¨ï¼Œé‡‡ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºã€‚IPv6æœ‰3ç§è¡¨ç¤ºæ–¹æ³•ã€‚\n\nä¸€ã€å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºæ³•\n\næ ¼å¼ä¸ºX:X:X:X:X:X:X:Xï¼Œå…¶ä¸­æ¯ä¸ªXè¡¨ç¤ºåœ°å€ä¸­çš„16bï¼Œä»¥åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š\n\nABCD:EF01:2345:6789:ABCD:EF01:2345:6789\n\nè¿™ç§è¡¨ç¤ºæ³•ä¸­ï¼Œæ¯ä¸ªXçš„å‰å¯¼0æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¾‹å¦‚ï¼š\n\n2001:0DB8:0000:0023:0008:0800:200C:417Aâ†’ 2001:DB8:0:23:8:800:200C:417A\n\näºŒã€0ä½å‹ç¼©è¡¨ç¤ºæ³•\n\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªIPv6åœ°å€ä¸­é—´å¯èƒ½åŒ…å«å¾ˆé•¿çš„ä¸€æ®µ0ï¼Œå¯ä»¥æŠŠè¿ç»­çš„ä¸€æ®µ0å‹ç¼©ä¸ºâ€œ::â€ã€‚ä½†ä¸ºä¿è¯åœ°å€è§£æçš„å”¯ä¸€æ€§ï¼Œåœ°å€ä¸­â€::â€åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¾‹å¦‚ï¼š\n\nFF01:0:0:0:0:0:0:1101 â†’ FF01::1101\n\n0:0:0:0:0:0:0:1 â†’ ::1\n\n0:0:0:0:0:0:0:0 â†’ ::\n\nä¸‰ã€å†…åµŒIPv4åœ°å€è¡¨ç¤ºæ³•\n\nä¸ºäº†å®ç°IPv4-IPv6äº’é€šï¼ŒIPv4åœ°å€ä¼šåµŒå…¥IPv6åœ°å€ä¸­ï¼Œæ­¤æ—¶åœ°å€å¸¸è¡¨ç¤ºä¸ºï¼šX:X:X:X:X:X:d.d.d.dï¼Œå‰96bé‡‡ç”¨å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œè€Œæœ€å32båœ°å€åˆ™ä½¿ç”¨IPv4çš„ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼Œä¾‹å¦‚::192.168.0.1ä¸::FFFF:192.168.0.1å°±æ˜¯ä¸¤ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œæ³¨æ„åœ¨å‰96bä¸­ï¼Œå‹ç¼©0ä½çš„æ–¹æ³•ä¾æ—§é€‚ç”¨\n\n## æŠ¥æ–‡å†…å®¹\n\nIPv6[æŠ¥æ–‡](https://baike.baidu.com/item/æŠ¥æ–‡?fromModule=lemma_inlink)çš„æ•´ä½“ç»“æ„åˆ†ä¸ºIPv6æŠ¥å¤´ï¼ˆå¦è¯‘ï¼šåŸºæœ¬é¦–éƒ¨ ã€æ‰©å±•æŠ¥å¤´å’Œä¸Šå±‚åè®®æ•°æ®3éƒ¨åˆ†ã€‚IPv6æŠ¥å¤´æ˜¯å¿…é€‰æŠ¥æ–‡å¤´éƒ¨ï¼Œé•¿åº¦å›ºå®šä¸º40Bï¼ŒåŒ…å«è¯¥æŠ¥æ–‡çš„åŸºæœ¬ä¿¡æ¯ï¼›æ‰©å±•æŠ¥å¤´æ˜¯å¯é€‰æŠ¥å¤´ï¼Œå¯èƒ½å­˜åœ¨0ä¸ªã€1ä¸ªæˆ–å¤šä¸ªï¼ŒIPv6åè®®é€šè¿‡æ‰©å±•æŠ¥å¤´å®ç°å„ç§ä¸°å¯Œçš„åŠŸèƒ½ï¼›ä¸Šå±‚åè®®æ•°æ®æ˜¯è¯¥IPv6æŠ¥æ–‡æºå¸¦çš„ä¸Šå±‚æ•°æ®ï¼Œå¯èƒ½æ˜¯[ICMPv6](https://baike.baidu.com/item/ICMPv6?fromModule=lemma_inlink)æŠ¥æ–‡ã€[TCP](https://baike.baidu.com/item/TCP/33012?fromModule=lemma_inlink)æŠ¥æ–‡ã€UDPæŠ¥æ–‡æˆ–å…¶ä»–å¯èƒ½æŠ¥æ–‡ã€‚\n\nIPv6çš„**æŠ¥æ–‡å¤´éƒ¨**ç»“æ„å¦‚å›¾ï¼š\n\n![eaf81a4c510fd9f94e7dcd152d2dd42a2834a460](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/eaf81a4c510fd9f94e7dcd152d2dd42a2834a460.jpg)\n\nIPv6çš„æŠ¥æ–‡å¤´éƒ¨ç»“æ„  \n\n| ç‰ˆæœ¬å·   | è¡¨ç¤ºåè®®ç‰ˆæœ¬ï¼å€¼ä¸º6                                          |\n| -------- | ------------------------------------------------------------ |\n| æµé‡ç­‰çº§ | ä¸»è¦ç”¨äºQoS                                                  |\n| æµæ ‡ç­¾   | ç”¨æ¥æ ‡è¯†åŒä¸€ä¸ªæµé‡Œé¢çš„æŠ¥æ–‡                                   |\n| è½½è·é•¿åº¦ | åŒ…å«æ‰©å±•æŠ¥å¤´å’Œæ•°æ®éƒ¨åˆ†çš„é•¿åº¦ï¼Œæœ€å¤šå¯è¡¨ç¤º65535å­—èŠ‚æ•°ï¼Œè¶…è¿‡åˆ™ç½®ä¸º0 [25] |\n| ä¸‹ä¸€æŠ¥å¤´ | è¯¥å­—æ®µç”¨æ¥æŒ‡æ˜æŠ¥å¤´åæ¥çš„æŠ¥æ–‡å¤´éƒ¨çš„ç±»å‹ï¼Œè‹¥å­˜åœ¨æ‰©å±•å¤´ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªæ‰©å±•å¤´çš„ç±»å‹ï¼Œå¦åˆ™è¡¨ç¤ºå…¶ä¸Šå±‚åè®®çš„ç±»å‹ï¼Œå®ƒæ˜¯IPv6å„ç§åŠŸèƒ½çš„æ ¸å¿ƒå®ç°æ–¹æ³• |\n| è·³æ•°é™åˆ¶ | è¯¥å­—æ®µç±»ä¼¼äºIPv4ä¸­çš„[TTL](https://baike.baidu.com/item/TTL/130248?fromModule=lemma_inlink)ï¼Œæ¯æ¬¡è½¬å‘è·³æ•°å‡ä¸€ï¼Œè¯¥å­—æ®µè¾¾åˆ°0æ—¶åŒ…å°†ä¼šè¢«ä¸¢å¼ƒ |\n| æºåœ°å€   | æ ‡è¯†è¯¥æŠ¥æ–‡çš„æ¥æºåœ°å€                                         |\n| ç›®çš„åœ°å€ | æ ‡è¯†è¯¥æŠ¥æ–‡çš„ç›®çš„åœ°å€                                         |\n\n**æ‰©å±•æŠ¥å¤´**ï¼šIPv6æŠ¥æ–‡ä¸­ä¸å†æœ‰â€œé€‰é¡¹â€å­—æ®µï¼Œè€Œæ˜¯é€šè¿‡â€œä¸‹ä¸€æŠ¥å¤´â€å­—æ®µé…åˆIPv6æ‰©å±•æŠ¥å¤´æ¥å®ç°é€‰é¡¹çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ‰©å±•å¤´æ—¶ï¼Œå°†åœ¨IPv6æŠ¥æ–‡ä¸‹ä¸€æŠ¥å¤´å­—æ®µè¡¨æ˜é¦–ä¸ªæ‰©å±•æŠ¥å¤´çš„ç±»å‹ï¼Œå†æ ¹æ®è¯¥ç±»å‹å¯¹æ‰©å±•æŠ¥å¤´è¿›è¡Œè¯»å–ä¸å¤„ç†ã€‚æ¯ä¸ªæ‰©å±•æŠ¥å¤´åŒæ ·åŒ…å«ä¸‹ä¸€æŠ¥å¤´å­—æ®µï¼Œè‹¥æ¥ä¸‹æ¥æœ‰å…¶ä»–æ‰©å±•æŠ¥å¤´ï¼Œå³åœ¨è¯¥å­—æ®µä¸­ç»§ç»­æ ‡æ˜æ¥ä¸‹æ¥çš„æ‰©å±•æŠ¥å¤´çš„ç±»å‹ï¼Œä»è€Œè¾¾åˆ°æ·»åŠ è¿ç»­å¤šä¸ªæ‰©å±•æŠ¥å¤´çš„ç›®çš„ã€‚åœ¨æœ€åä¸€ä¸ªæ‰©å±•æŠ¥å¤´çš„ä¸‹ä¸€æŠ¥å¤´å­—æ®µä¸­ï¼Œåˆ™æ ‡æ˜è¯¥æŠ¥æ–‡ä¸Šå±‚åè®®çš„ç±»å‹ï¼Œç”¨ä»¥è¯»å–ä¸Šå±‚åè®®æ•°æ® ã€‚\n\n![b17eca8065380cd733642891a944ad3459828150](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/b17eca8065380cd733642891a944ad3459828150.png)\n\næ‰©å±•æŠ¥å¤´ \n","tags":["è®¡ç®—æœºç½‘ç»œ"],"categories":["è®¡ç®—æœºç½‘ç»œ"]},{"title":"jenkins","url":"/2023/08/02/jenkins/","content":"\n## dockerå®‰è£…jenkins\n\nå®‰è£…å‘½ä»¤ï¼š\n\n```bash\ndocker run -d -u root --name jenkins -p 8088:8080 -v /opt/nan/jenkins_home:/var/jenkins_home jenkins/jenkins:latest\n```\n\nå®‰è£…å¥½ä¹‹ååœ¨æµè§ˆå™¨è¾“å…¥ipå’Œç«¯å£çœ‹åˆ°ä»¥ä¸‹ç•Œé¢\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1808388-20230112140446180-1457455354.png)\n\nåœ¨æ˜ å°„å‡ºæ¥çš„è·¯å¾„æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œå°†å¯†ç è¾“å…¥å°±å¯ä»¥äº†ã€‚å®‰è£…å°±ç®—å®Œæˆäº†\n\n## jenkinsçš„æ’ä»¶\n\nå¾ˆå¤šæ’ä»¶å¯ä»¥åœ¨Jenkinsä¸­ç›´æ¥ä¸‹è½½ï¼Œä¸èƒ½ä¸‹è½½çš„åœ¨jenkinså®˜ç½‘ä¸­çš„æ’ä»¶é¡µé¢å¯ä»¥æœç´¢æ‰€æœ‰çš„æ’ä»¶ã€‚æˆ‘è¿™é‡Œå·²ç»ä¸‹è½½å¥½äº†ä¸­æ–‡æ’ä»¶ã€‚\n\n##  æ‹‰å–gitè¿œç¨‹ä»“åº“\n\nåœ¨é¡¹ç›®ä¸­æ‰“å¼€é…ç½®æ‰¾åˆ°æºç ç®¡ç†ï¼Œé€‰æ‹©git\n\n![image-20230805184038958](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230805184038958.png)\n\nè¾“å…¥åœ°å€ï¼Œç„¶åç‚¹å‡»æ·»åŠ ï¼Œæ·»åŠ ä¸€ä¸ªå‡­è¯ï¼Œåœ¨é‡Œé¢è¾“å…¥ä½ çš„githubæˆ–è€…å…¶ä»–å¹³å°çš„è´¦å·ï¼Œç„¶ååœ¨credentialsé‡Œé€‰æ‹©åˆšæ‰æ·»åŠ çš„å‡­è¯ã€‚ç‚¹å‡»ä¿å­˜å°±ä¼šå°†è¿œç¨‹ä»“åº“çš„ä»£ç æ‹‰å–åˆ°æœ¬åœ°ã€‚\n\n## ç»‘å®šcodingè§¦å‘\n\nè¿˜æ˜¯åœ¨é…ç½®ä¸­ï¼Œæ‰¾åˆ°æ„å»ºè§¦å‘å™¨ã€‚è¿™é‡Œéœ€è¦ä¸‹è½½generic webhook triggeræ’ä»¶æ‰èƒ½çœ‹åˆ°ä¸‹é¢è¿™ä¸ªé€‰é¡¹ã€‚\n\n![image-20230805184812350](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230805184812350.png)\n\nåªéœ€è¦é…ç½®ä¸Štokenï¼Œç„¶åç”Ÿæˆçš„é“¾æ¥ç²˜è´´åˆ°codingçš„é¡¹ç›®ä¸­çš„å¼€å‘è€…é€‰é¡¹ä¸­çš„webhookåŠŸèƒ½ä¸­ã€‚\n\nå¦‚æœæœ‰å¤šä¸ªåˆ†æ”¯å¯ä»¥ä¸‹è½½git parameteræ’ä»¶ï¼Œç„¶åæŒ‰ç…§å¦‚ä¸‹é…ç½®\n\n![image-20230805185508886](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230805185508886.png)\n\n![image-20230805185654003](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230805185654003.png)\n","tags":["jenkins"],"categories":["å·¥å…·"]},{"title":"javaä¸­çš„æ³¨è§£","url":"/2023/08/02/javaä¸­çš„æ³¨è§£/","content":"\n# javaä¸­çš„æ³¨è§£\n\n## å¸¸è§ï¼ˆjava.lang.annotationåŒ…ä¸‹çš„å…ƒæ³¨è§£ï¼‰\n\n### **@Target:æ³¨è§£çš„ä½œç”¨ç›®æ ‡**\n\n> @Target(ElementType.TYPE)â€”â€”æ¥å£ã€ç±»ã€æšä¸¾ã€æ³¨è§£\n> @Target(ElementType.FIELD)â€”â€”å­—æ®µã€æšä¸¾çš„å¸¸é‡\n> @Target(ElementType.METHOD)â€”â€”æ–¹æ³•\n> @Target(ElementType.PARAMETER)â€”â€”æ–¹æ³•å‚æ•°\n> @Target(ElementType.CONSTRUCTOR) â€”â€”æ„é€ å‡½æ•°\n> @Target(ElementType.LOCAL_VARIABLE)â€”â€”å±€éƒ¨å˜é‡\n> @Target(ElementType.ANNOTATION_TYPE)â€”â€”æ³¨è§£\n> @Target(ElementType.PACKAGE)â€”â€”åŒ…ï¼Œç”¨äºè®°å½•javaæ–‡ä»¶çš„packageä¿¡æ¯\n\n### **@Retention:æ˜¯ç”¨æ¥ä¿®é¥°æ³¨è§£çš„ï¼Œæ³¨è§£çš„æ³¨è§£ï¼Œä¹Ÿç§°ä¸ºå…ƒæ³¨è§£**\n\n@Retentionä¿®é¥°æ³¨è§£ï¼Œç”¨æ¥è¡¨ç¤ºæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”Ÿå‘½å‘¨æœŸçš„é•¿çŸ­å–å†³äº@Retentionçš„å±æ€§RetentionPolicyæŒ‡å®šçš„å€¼ï¼Œä¾‹å¦‚@Retention(RetentionPolicy.RUNTIME)\n\n| å–å€¼                    | æè¿°                                                         | ä½œç”¨èŒƒå›´          | ä½¿ç”¨åœºæ™¯                                                     |\n| ----------------------- | ------------------------------------------------------------ | ----------------- | ------------------------------------------------------------ |\n| RetentionPolicy.SOURCE  | è¡¨ç¤ºæ³¨è§£åªä¿ç•™åœ¨æºæ–‡ä»¶ï¼Œå½“javaæ–‡ä»¶ç¼–è¯‘æˆclassæ–‡ä»¶ï¼Œå°±ä¼šæ¶ˆå¤±  | æºæ–‡ä»¶            | åªæ˜¯åšä¸€äº›æ£€æŸ¥æ€§çš„æ“ä½œï¼Œï¼Œæ¯”å¦‚ @Override å’Œ @SuppressWarnings |\n| RetentionPolicy.CLASS   | æ³¨è§£è¢«ä¿ç•™åˆ°classæ–‡ä»¶ï¼Œä½†jvmåŠ è½½classæ–‡ä»¶æ—¶å€™è¢«é—å¼ƒï¼Œè¿™æ˜¯é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸ | classæ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰ | è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚ç”Ÿæˆä¸€äº›è¾…åŠ©ä»£ç ï¼ˆå¦‚ ButterKnifeï¼‰ |\n| RetentionPolicy.RUNTIME | æ³¨è§£ä¸ä»…è¢«ä¿å­˜åˆ°classæ–‡ä»¶ä¸­ï¼ŒjvmåŠ è½½classæ–‡ä»¶ä¹‹åï¼Œä»ç„¶å­˜åœ¨  | è¿è¡Œæ—¶ä¹Ÿå­˜åœ¨      | éœ€è¦åœ¨è¿è¡Œæ—¶å»åŠ¨æ€è·å–æ³¨è§£ä¿¡æ¯                               |\n\n### **@Documented**\n\n**@**Documented æ³¨è§£è¡¨æ˜è¿™ä¸ªæ³¨è§£åº”è¯¥è¢« javadocå·¥å…·è®°å½•. é»˜è®¤æƒ…å†µä¸‹,javadocæ˜¯ä¸åŒ…æ‹¬æ³¨è§£çš„. ä½†å¦‚æœå£°æ˜æ³¨è§£æ—¶æŒ‡å®šäº† @Documented,åˆ™å®ƒä¼šè¢« javadoc ä¹‹ç±»çš„å·¥å…·å¤„ç†, æ‰€ä»¥æ³¨è§£ç±»å‹ä¿¡æ¯ä¹Ÿä¼šè¢«åŒ…æ‹¬åœ¨ç”Ÿæˆçš„æ–‡æ¡£ä¸­ï¼Œæ˜¯ä¸€ä¸ªæ ‡è®°æ³¨è§£ï¼Œæ²¡æœ‰æˆå‘˜ã€‚\n\n### **@Inherited**\n\n@Inheritedæ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œ**ç”¨æ¥ä¿®é¥°æ³¨è§£**\nä½œç”¨ï¼šå¦‚æœä¸€ä¸ªç±»ç”¨ä¸Šäº†@Inheritedä¿®é¥°çš„æ³¨è§£ï¼Œé‚£ä¹ˆå…¶å­ç±»ä¹Ÿä¼šç»§æ‰¿è¿™ä¸ªæ³¨è§£\n\næ³¨æ„ï¼š\n\n1. æ¥å£ç”¨ä¸Šä¸ª@Inheritedä¿®é¥°çš„æ³¨è§£ï¼Œå…¶å®ç°ç±»ä¸ä¼šç»§æ‰¿è¿™ä¸ªæ³¨è§£\n2. çˆ¶ç±»çš„æ–¹æ³•ç”¨äº†@Inheritedä¿®é¥°çš„æ³¨è§£ï¼Œå­ç±»ä¹Ÿä¸ä¼šç»§æ‰¿è¿™ä¸ªæ³¨è§£\n\nå½“ç”¨äº†@Inheritedä¿®é¥°çš„æ³¨è§£çš„@Retentionæ˜¯RetentionPolicy.RUNTIMEï¼Œåˆ™å¢å¼ºäº†ç»§æ‰¿æ€§ï¼Œåœ¨åå°„ä¸­å¯ä»¥è·å–å¾—åˆ°\n\n### **@Native** \n\næ³¨è§£ç”¨äºæ ‡è¯†ä¸€ä¸ªå­—æ®µæˆ–æ–¹æ³•æ˜¯ä¸æœ¬åœ°å¹³å°ç›¸å…³çš„ï¼Œå¹¶ä¸”ä¸å— Java è¯­è¨€è§„èŒƒçš„é™åˆ¶ã€‚è¿™æ„å‘³ç€è¯¥å­—æ®µæˆ–æ–¹æ³•çš„å®ç°æ˜¯ä¾èµ–äºåº•å±‚æœ¬åœ°å¹³å°çš„ï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„ Java ä»£ç ã€‚\n\nåœ¨ Java ä»£ç ä¸­ä½¿ç”¨ @Native æ³¨è§£ï¼Œé€šå¸¸è¡¨ç¤ºè¿™ä¸ªæˆå‘˜æ˜¯ä½¿ç”¨æœ¬åœ°ä»£ç ï¼ˆCã€C++ æˆ–å…¶ä»–æœ¬åœ°è¯­è¨€ï¼‰ç¼–å†™çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®åº•å±‚ç³»ç»Ÿèµ„æºã€‚è¿™æ ·çš„æˆå‘˜é€šå¸¸åœ¨ Java çš„æŸä¸ªç±»åº“æˆ–æ¡†æ¶ä¸­å……å½“äº†ä¸€ä¸ªä¸æœ¬åœ°å¹³å°äº¤äº’çš„æ¥å£ã€‚\n\n### **@Repeatable**\n\næ³¨è§£æ˜¯ç”¨äºå£°æ˜å…¶å®ƒç±»å‹æ³¨è§£çš„å…ƒæ³¨è§£ï¼Œæ¥è¡¨ç¤ºè¿™ä¸ªå£°æ˜çš„æ³¨è§£æ˜¯å¯é‡å¤çš„ã€‚@Repeatableçš„å€¼æ˜¯å¦ä¸€ä¸ªæ³¨è§£ï¼Œå…¶å¯ä»¥é€šè¿‡è¿™ä¸ªå¦ä¸€ä¸ªæ³¨è§£çš„å€¼æ¥åŒ…å«è¿™ä¸ªå¯é‡å¤çš„æ³¨è§£ã€‚\n\n**ç¤ºä¾‹**\n\nValueæ³¨è§£ï¼š\n\n```java\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@Repeatable(Values.class)\npublic @interface Value {\n    String value() default \"value\";\n}\n```\n\nValuesæ³¨è§£ï¼š\n\n```java\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Values {\n    Value[] value();\n}\n```\n\nå…¶ä¸­ï¼Œ`@Value`æ³¨è§£ä¸Šçš„å…ƒæ³¨è§£`@Repeatable`ä¸­çš„å€¼ï¼Œä½¿ç”¨äº†`@Values`æ³¨è§£ï¼Œ`@Values`æ³¨è§£ä¸­åŒ…å«çš„å€¼ç±»å‹æ˜¯ä¸€ä¸ª`@Value`æ³¨è§£çš„æ•°ç»„ï¼\nè¿™å°±è§£é‡Šäº†å®˜æ–¹æ–‡æ¡£ä¸­`@Repeatable`ä¸­å€¼çš„ä½¿ç”¨ã€‚\n\n**æµ‹è¯•**\n\næ³¨è§£ä½¿ç”¨æ–¹æ³•\n\n```java\npublic class AnnotationClass {\n\n    @Value(\"hello\")\n    @Value(\"world\")\n    public void test(String var1, String var2) {\n        System.out.println(var1 + \" \" + var2);\n    }\n}\n```\n\næµ‹è¯•ç”¨ä¾‹\n\n```java\n// è·å–ä½¿ç”¨`@Value`æ³¨è§£çš„`test`æ–¹æ³•ï¼Œå¹¶æ‰“å°è¿™ä¸ªæ–¹æ³•ä¸Šçš„æ³¨è§£é•¿åº¦å’Œä¿¡æ¯\n    @Test\n    public void testValue() {\n        Method[] methods = AnnotationClass.class.getMethods();\n        for (Method method : methods){\n            if (method.getName().equals(\"test\")) {\n                Annotation[] annotations = method.getDeclaredAnnotations();\n                System.out.println(annotations.length);\n                System.out.println(method.getName() + \" = \" + Arrays.toString(annotations));\n            }\n        }\n    }\n```\n\nå› ä¸º`test`æ–¹æ³•ä¸Šä½¿ç”¨äº†ä¸¤ä¸ª`@Value`æ³¨è§£ï¼Œæ‰€ä»¥çŒœæµ‹æ‰“å°æ³¨è§£é•¿åº¦ä¸º2ï¼Œç„¶åæ‰“å°è¯¦æƒ…ï¼Œå¯æ˜¯ç»“æœå¹¶ä¸åŒã€‚\n\n```bash\n1\ntest = [@com.example.annotations.Values(value=[@com.example.annotations.Value(value=hello), @com.example.annotations.Value(value=world)])]\n```\n\nç»“æœæ˜¾ç¤ºï¼Œ`test`æ–¹æ³•ä¸Šçš„æ³¨è§£é•¿åº¦ä¸º 1 , ä¸”æ‰“å°ä¿¡æ¯ä¸º`@Values`æ³¨è§£ï¼Œå®ƒçš„å€¼åŒ…å«äº†ä½¿ç”¨çš„ä¸¤ä¸ªæ³¨è§£ã€‚\nå› æ­¤å¯çŸ¥åœ¨jdk8ä¸­ï¼Œç›¸åŒæ³¨è§£åªæ˜¯ä»¥é›†åˆçš„æ–¹å¼è¿›è¡Œäº†ä¿å­˜ï¼ŒåŸç†å¹¶æ²¡æœ‰å˜åŒ–ã€‚\n\n### @SuppressWarnings(langåŒ…ä¸‹)\n\nå¦‚æœä½ ç¡®è®¤ç¨‹åºä¸­çš„è­¦å‘Šæ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸ç”¨ç†ä¼šã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœç¨‹åºä¸­ä½¿ç”¨æ²¡æœ‰æ³›å‹é™åˆ¶çš„é›†åˆå°†ä¼šå¼•èµ·ç¼–è¯‘å™¨è­¦å‘Šï¼Œä¸ºäº†é¿å…è¿™ç§ç¼–è¯‘å™¨è­¦å‘Šï¼Œå¯ä»¥ä½¿ç”¨ @SuppressWarnings æ³¨è§£æ¶ˆé™¤è¿™äº›è­¦å‘Šã€‚\n\næ³¨è§£çš„ä½¿ç”¨æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š\n\n1. æŠ‘åˆ¶å•ç±»å‹çš„è­¦å‘Šï¼š@SuppressWarnings(\"unchecked\")\n2. æŠ‘åˆ¶å¤šç±»å‹çš„è­¦å‘Šï¼š@SuppressWarnings(\"unchecked\",\"rawtypes\")\n3. æŠ‘åˆ¶æ‰€æœ‰ç±»å‹çš„è­¦å‘Šï¼š@SuppressWarnings(\"unchecked\")\n\næŠ‘åˆ¶è­¦å‘Šçš„å…³é”®å­—å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\n| å…³é”®å­—                   | ç”¨é€”                                                   |\n| ------------------------ | ------------------------------------------------------ |\n| all                      | æŠ‘åˆ¶æ‰€æœ‰è­¦å‘Š                                           |\n| boxing                   | æŠ‘åˆ¶è£…ç®±ã€æ‹†ç®±æ“ä½œæ—¶å€™çš„è­¦å‘Š                           |\n| cast                     | æŠ‘åˆ¶æ˜ å°„ç›¸å…³çš„è­¦å‘Š                                     |\n| dep-ann                  | æŠ‘åˆ¶å¯ç”¨æ³¨é‡Šçš„è­¦å‘Š                                     |\n| deprecation              | æŠ‘åˆ¶è¿‡æœŸæ–¹æ³•è­¦å‘Š                                       |\n| fallthrough              | æŠ‘åˆ¶åœ¨ switch ä¸­ç¼ºå¤± breaks çš„è­¦å‘Š                     |\n| finally                  | æŠ‘åˆ¶ finally æ¨¡å—æ²¡æœ‰è¿”å›çš„è­¦å‘Š                        |\n| hiding                   | æŠ‘åˆ¶ç›¸å¯¹äºéšè—å˜é‡çš„å±€éƒ¨å˜é‡çš„è­¦å‘Š                     |\n| incomplete-switch        | å¿½ç•¥ä¸å®Œæ•´çš„ switch è¯­å¥                               |\n| nls                      | å¿½ç•¥é nls æ ¼å¼çš„å­—ç¬¦                                  |\n| null                     | å¿½ç•¥å¯¹ null çš„æ“ä½œ                                     |\n| rawtypes                 | ä½¿ç”¨ generics æ—¶å¿½ç•¥æ²¡æœ‰æŒ‡å®šç›¸åº”çš„ç±»å‹                 |\n| restriction              | æŠ‘åˆ¶ç¦æ­¢ä½¿ç”¨åŠé˜»æˆ–ç¦æ­¢å¼•ç”¨çš„è­¦å‘Š                       |\n| serial                   | å¿½ç•¥åœ¨ serializable ç±»ä¸­æ²¡æœ‰å£°æ˜ serialVersionUID å˜é‡ |\n| static-access            | æŠ‘åˆ¶ä¸æ­£ç¡®çš„é™æ€è®¿é—®æ–¹å¼è­¦å‘Š                           |\n| synthetic-access         | æŠ‘åˆ¶å­ç±»æ²¡æœ‰æŒ‰æœ€ä¼˜æ–¹æ³•è®¿é—®å†…éƒ¨ç±»çš„è­¦å‘Š                 |\n| unchecked                | æŠ‘åˆ¶æ²¡æœ‰è¿›è¡Œç±»å‹æ£€æŸ¥æ“ä½œçš„è­¦å‘Š                         |\n| unqualified-field-access | æŠ‘åˆ¶æ²¡æœ‰æƒé™è®¿é—®çš„åŸŸçš„è­¦å‘Š                             |\n| unused                   | æŠ‘åˆ¶æ²¡è¢«ä½¿ç”¨è¿‡çš„ä»£ç çš„è­¦å‘Š                             |\n\n\n\n## javaæ‰©å±•åŒ…ä¸­çš„å‚æ•°æ ¡éªŒæ³¨è§£ï¼ˆjavax.validationï¼Œjavaxä¹Ÿå°±æ˜¯jakartaï¼‰\n\n### @Constraintæ³¨è§£ä»‹ç»\n\n`@Constraint`æ³¨è§£æ˜¯Java Bean Validationæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªå®šä¹‰çº¦æŸæ³¨è§£ï¼Œå³è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ã€‚\n\né€šè¿‡åœ¨è‡ªå®šä¹‰æ³¨è§£ä¸Šæ·»åŠ `@Constraint`æ³¨è§£ï¼Œå¯ä»¥å°†è¯¥æ³¨è§£æ ‡è®°ä¸ºä¸€ä¸ªè‡ªå®šä¹‰çº¦æŸæ³¨è§£ã€‚åŒæ—¶ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå®ç°äº†`ConstraintValidator`æ¥å£çš„éªŒè¯å™¨ç±»ï¼Œç”¨äºéªŒè¯è¯¥æ³¨è§£æ‰€æ ‡è®°çš„å­—æ®µæˆ–å‚æ•°æ˜¯å¦ç¬¦åˆè‡ªå®šä¹‰çš„æ ¡éªŒè§„åˆ™ã€‚\n\n`@Constraint`æ³¨è§£æœ‰ä»¥ä¸‹å±æ€§ï¼š\n\n1. `validatedBy`ï¼šç”¨äºæŒ‡å®šå®ç°äº†`ConstraintValidator`æ¥å£çš„éªŒè¯å™¨ç±»ã€‚è¯¥å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªClass[å¯¹è±¡æ•°ç»„](https://so.csdn.net/so/search?q=å¯¹è±¡æ•°ç»„&spm=1001.2101.3001.7020)ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªéªŒè¯å™¨ç±»ã€‚\n2. `message`ï¼šç”¨äºæŒ‡å®šå½“æ ¡éªŒå¤±è´¥æ—¶ï¼Œæ‰€è¿”å›çš„é”™è¯¯ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨å ä½ç¬¦{}ï¼Œåœ¨æ ¡éªŒå™¨ä¸­ä½¿ç”¨å…·ä½“çš„å‚æ•°æ›¿æ¢ã€‚\n3. `groups`ï¼šç”¨äºæŒ‡å®šåˆ†ç»„ï¼Œå³æ ¹æ®ä¸åŒçš„åˆ†ç»„åº”ç”¨ä¸åŒçš„æ ¡éªŒè§„åˆ™ã€‚\n4. `payload`ï¼šç”¨äºæŒ‡å®šå…ƒæ•°æ®ï¼Œå³å¯ä»¥é€šè¿‡è¯¥å±æ€§ä¼ é€’ä¸€äº›é¢å¤–çš„éªŒè¯ä¿¡æ¯ã€‚\n\nä½¿ç”¨`@Constraint`æ³¨è§£ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ³¨è§£çš„æ–¹å¼ï¼Œä¸ºå­—æ®µæˆ–å‚æ•°æ·»åŠ è‡ªå®šä¹‰çš„æ ¡éªŒè§„åˆ™ï¼Œå¹¶å®ç°æ ¡éªŒé€»è¾‘ã€‚è¿™æ ·ï¼Œåœ¨è¿›è¡Œå‚æ•°æ ¡éªŒæ—¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡æ³¨è§£çš„æ–¹å¼æ¥è°ƒç”¨è‡ªå®šä¹‰çš„æ ¡éªŒè§„åˆ™ã€‚\n\nè¿™é‡Œç”¨è‹¥ä¾ç³»ç»Ÿçš„ä¾‹å­\n\n```java\n/**\n * è‡ªå®šä¹‰xssæ ¡éªŒæ³¨è§£\n * \n * @author ruoyi\n */\n@Retention(RetentionPolicy.RUNTIME)\n@Target(value = { ElementType.METHOD, ElementType.FIELD, ElementType.CONSTRUCTOR, ElementType.PARAMETER })\n@Constraint(validatedBy = { XssValidator.class })\npublic @interface Xss\n{\n    String message()\n\n    default \"ä¸å…è®¸ä»»ä½•è„šæœ¬è¿è¡Œ\";\n\n    Class<?>[] groups() default {};\n\n    Class<? extends Payload>[] payload() default {};\n}\n\n```\n\n```java\n/**\n * è‡ªå®šä¹‰xssæ ¡éªŒæ³¨è§£å®ç°\n * \n * @author ruoyi\n */\npublic class XssValidator implements ConstraintValidator<Xss, String>\n{\n    private static final String HTML_PATTERN = \"<(\\\\S*?)[^>]*>.*?|<.*? />\";\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext)\n    {\n        if (StringUtils.isBlank(value))\n        {\n            return true;\n        }\n        return !containsHtml(value);\n    }\n\n    public static boolean containsHtml(String value)\n    {\n        Pattern pattern = Pattern.compile(HTML_PATTERN);\n        Matcher matcher = pattern.matcher(value);\n        return matcher.matches();\n    }\n}\n```\n\n## springbootä¸å¸¸è§æ³¨è§£\n\n### @ConfigurationProperties\n\nåœ¨ SpringBoot ä¸­ï¼Œå½“æƒ³éœ€è¦è·å–åˆ°é…ç½®æ–‡ä»¶æ•°æ®æ—¶ï¼Œé™¤äº†å¯ä»¥ç”¨ Spring è‡ªå¸¦çš„ @Value æ³¨è§£å¤–ï¼ŒSpringBoot è¿˜æä¾›äº†ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„æ–¹å¼ï¼š@ConfigurationPropertiesã€‚åªè¦åœ¨ Bean ä¸Šæ·»åŠ ä¸Šäº†è¿™ä¸ªæ³¨è§£ï¼ŒæŒ‡å®šå¥½é…ç½®æ–‡ä»¶çš„å‰ç¼€ï¼Œé‚£ä¹ˆå¯¹åº”çš„é…ç½®æ–‡ä»¶æ•°æ®å°±ä¼šè‡ªåŠ¨å¡«å……åˆ° Bean ä¸­ã€‚\n\næ¯”å¦‚åœ¨application.[properties](https://so.csdn.net/so/search?q=properties&spm=1001.2101.3001.7020)æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹é…ç½®æ–‡ä»¶\n\n```properties\nconfig.username=ilpvc\nconfig.password=3333\n```\n\nâ€‹    é‚£ä¹ˆæŒ‰ç…§å¦‚ä¸‹æ³¨è§£é…ç½®ï¼ŒSpringBooté¡¹ç›®ä¸­ä½¿ç”¨@ConfigurationPropertiesçš„Beanï¼Œå®ƒçš„usernameä¸passwordå°±ä¼šè¢«è‡ªåŠ¨æ³¨å…¥å€¼äº†ã€‚å°±åƒä¸‹é¢å±•ç¤ºçš„é‚£æ ·\n\n```java\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.stereotype.Component;\n@Component\n@ConfigurationProperties(prefix = \"config\")\npublic class TestBean{\n    private String username;\n    private String password;\n}\n```\n\n### @Nullable\n\n@Nullableå¯ä»¥ç”¨åœ¨æ–¹æ³•ã€å±æ€§ã€å‚æ•°ä¸Šã€‚å¯¹åº”çš„æ„æ€åˆ†åˆ«å¦‚ä¸‹ï¼š\n\næ–¹æ³•ï¼šè¡¨ç¤ºè¿”å›å€¼å¯ä»¥æ˜¯ç©º\n\nå±æ€§ï¼šè¡¨ç¤ºå±æ€§å€¼å¯ä»¥æ˜¯ç©º\n\nå‚æ•°ï¼šè¡¨ç¤ºå‚æ•°å€¼å¯ä»¥æ˜¯ç©º\n\n\n\n## spring securityæ³¨è§£\n\n### @PreAuthorize\n\n@[PreAuthorize](https://so.csdn.net/so/search?q=PreAuthorize&spm=1001.2101.3001.7020)æ³¨è§£ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™éªŒè¯ï¼Œæ”¯æŒSpring ELè¡¨è¾¾å¼ï¼Œå®ƒæ˜¯åŸºäºæ–¹æ³•æ³¨è§£çš„æƒé™è§£å†³æ–¹æ¡ˆã€‚åªæœ‰å½“@EnableGlobalMethodSecurity(prePostEnabled=true)çš„æ—¶å€™ï¼Œ@PreAuthorizeæ‰å¯ä»¥ä½¿ç”¨ï¼Œ@EnableGlobalMethodSecurityæ³¨è§£åœ¨SPRINGå®‰å…¨ä¸­å¿ƒè¿›è¡Œè®¾ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```java\n/**\n * SPRINGå®‰å…¨ä¸­å¿ƒ\n * @author ROCKY\n */\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n}\n```\n\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"åŠ¨æ€è§„åˆ’","url":"/2023/08/01/åŠ¨æ€è§„åˆ’/","content":"\n## åŠ¨æ€è§„åˆ’ç®—æ³•\n\nåŠ¨æ€è§„åˆ’ï¼ˆDynamic programmingï¼‰æ˜¯ä¸€ç§åœ¨æ•°å­¦ã€è®¡ç®—æœºç§‘å­¦å’Œç»æµå­¦ä¸­ä½¿ç”¨çš„ï¼Œé€šè¿‡æŠŠåŸé—®é¢˜åˆ†è§£ä¸ºç›¸å¯¹ç®€å•çš„å­é—®é¢˜çš„æ–¹å¼æ±‚è§£å¤æ‚é—®é¢˜çš„æ–¹æ³•ã€‚ åŠ¨æ€è§„åˆ’å¸¸å¸¸é€‚ç”¨äºæœ‰é‡å å­é—®é¢˜å’Œæœ€ä¼˜å­ç»“æ„æ€§è´¨çš„é—®é¢˜ï¼ŒåŠ¨æ€è§„åˆ’æ–¹æ³•æ‰€è€—æ—¶é—´å¾€å¾€è¿œå°‘äºæœ´ç´ è§£æ³•ã€‚ åŠ¨æ€è§„åˆ’èƒŒåçš„åŸºæœ¬æ€æƒ³éå¸¸ç®€å•ã€‚å¤§è‡´ä¸Šï¼Œè‹¥è¦è§£ä¸€ä¸ªç»™å®šé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å…¶ä¸åŒéƒ¨åˆ†ï¼ˆå³å­é—®é¢˜ï¼‰ï¼Œå†åˆå¹¶å­é—®é¢˜çš„è§£ä»¥å¾—å‡ºåŸé—®é¢˜çš„è§£ã€‚ é€šå¸¸è®¸å¤šå­é—®é¢˜éå¸¸ç›¸ä¼¼ï¼Œä¸ºæ­¤åŠ¨æ€è§„åˆ’æ³•è¯•å›¾ä»…ä»…è§£å†³æ¯ä¸ªå­é—®é¢˜ä¸€æ¬¡ï¼Œä»è€Œå‡å°‘è®¡ç®—é‡ï¼š ä¸€æ—¦æŸä¸ªç»™å®šå­é—®é¢˜çš„è§£å·²ç»ç®—å‡ºï¼Œåˆ™å°†å…¶è®°å¿†åŒ–å­˜å‚¨ï¼Œä»¥ä¾¿ä¸‹æ¬¡éœ€è¦åŒä¸€ä¸ªå­é—®é¢˜è§£ä¹‹æ—¶ç›´æ¥æŸ¥è¡¨ã€‚ è¿™ç§åšæ³•åœ¨é‡å¤å­é—®é¢˜çš„æ•°ç›®å…³äºè¾“å…¥çš„è§„æ¨¡å‘ˆæŒ‡æ•°å¢é•¿æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ å…³äºåŠ¨æ€è§„åˆ’æœ€ç»å…¸çš„é—®é¢˜å½“å±èƒŒåŒ…é—®é¢˜ã€‚\n\n## æ€§è´¨\n\n1. æœ€ä¼˜å­ç»“æ„æ€§è´¨ã€‚å¦‚æœé—®é¢˜çš„æœ€ä¼˜è§£æ‰€åŒ…å«çš„å­é—®é¢˜çš„è§£ä¹Ÿæ˜¯æœ€ä¼˜çš„ï¼Œæˆ‘ä»¬å°±ç§°è¯¥é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨ï¼ˆå³æ»¡è¶³æœ€ä¼˜åŒ–åŸç†ï¼‰ã€‚æœ€ä¼˜å­ç»“æ„æ€§è´¨ä¸ºåŠ¨æ€è§„åˆ’ç®—æ³•è§£å†³é—®é¢˜æä¾›äº†é‡è¦çº¿ç´¢ã€‚\n2. å­é—®é¢˜é‡å æ€§è´¨ã€‚å­é—®é¢˜é‡å æ€§è´¨æ˜¯æŒ‡åœ¨ç”¨é€’å½’ç®—æ³•è‡ªé¡¶å‘ä¸‹å¯¹é—®é¢˜è¿›è¡Œæ±‚è§£æ—¶ï¼Œæ¯æ¬¡äº§ç”Ÿçš„å­é—®é¢˜å¹¶ä¸æ€»æ˜¯æ–°é—®é¢˜ï¼Œæœ‰äº›å­é—®é¢˜ä¼šè¢«é‡å¤è®¡ç®—å¤šæ¬¡ã€‚åŠ¨æ€è§„åˆ’ç®—æ³•æ­£æ˜¯åˆ©ç”¨äº†è¿™ç§å­é—®é¢˜çš„é‡å æ€§è´¨ï¼Œå¯¹æ¯ä¸€ä¸ªå­é—®é¢˜åªè®¡ç®—ä¸€æ¬¡ï¼Œç„¶åå°†å…¶è®¡ç®—ç»“æœä¿å­˜åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œå½“å†æ¬¡éœ€è¦è®¡ç®—å·²ç»è®¡ç®—è¿‡çš„å­é—®é¢˜æ—¶ï¼Œåªæ˜¯åœ¨è¡¨æ ¼ä¸­ç®€å•åœ°æŸ¥çœ‹ä¸€ä¸‹ç»“æœï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„æ•ˆç‡ã€‚\n3. æ— åæ•ˆæ€§ï¼šå³æŸé˜¶æ®µçŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œå°±ä¸å—è¿™ä¸ªçŠ¶æ€ä»¥åå†³ç­–çš„å½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸçŠ¶æ€ä»¥åçš„è¿‡ç¨‹ä¸ä¼šå½±å“ä»¥å‰çš„çŠ¶æ€ï¼Œåªä¸å½“å‰çŠ¶æ€æœ‰å…³ã€‚\n\n## æ­¥éª¤\n\n1. åˆ’åˆ†ï¼šæŒ‰ç…§é—®é¢˜çš„ç‰¹å¾ï¼ŒæŠŠé—®é¢˜åˆ†ä¸ºè‹¥å¹²é˜¶æ®µã€‚æ³¨æ„ï¼šåˆ’åˆ†åçš„é˜¶æ®µä¸€å®šæ˜¯æœ‰åºçš„æˆ–è€…å¯æ’åºçš„\n2. ç¡®å®šçŠ¶æ€å’ŒçŠ¶æ€å˜é‡ï¼šå°†é—®é¢˜å‘å±•åˆ°å„ä¸ªé˜¶æ®µæ—¶æ‰€å¤„çš„å„ç§ä¸åŒçš„å®¢è§‚æƒ…å†µè¡¨ç°å‡ºæ¥ã€‚çŠ¶æ€çš„é€‰æ‹©è¦æ»¡è¶³æ— åç»­æ€§\n3. ç¡®å®šå†³ç­–å¹¶å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šçŠ¶æ€è½¬ç§»å°±æ˜¯æ ¹æ®ä¸Šä¸€é˜¶æ®µçš„å†³ç­–å’ŒçŠ¶æ€æ¥å¯¼å‡ºæœ¬é˜¶æ®µçš„çŠ¶æ€ã€‚æ ¹æ®ç›¸é‚»ä¸¤ä¸ªé˜¶æ®µçŠ¶æ€ä¹‹é—´çš„è”ç³»æ¥ç¡®å®šå†³ç­–æ–¹æ³•å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹\n4. è¾¹ç•Œæ¡ä»¶ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ä¸€ä¸ªé€’æ¨å¼ï¼Œå› æ­¤éœ€è¦æ‰¾åˆ°é€’æ¨ç»ˆæ­¢çš„æ¡ä»¶\n\n**å³ï¼š**\n\nã€åˆå§‹çŠ¶æ€ã€‘â†’ã€å†³ç­–1ã€‘â†’ã€å†³ç­–2ã€‘â†’â€¦â†’ã€å†³ç­–nã€‘â†’ã€ç»“æŸçŠ¶æ€ã€‘\n\n*æ³¨æ„ï¼š*\n\n1. é—®é¢˜é˜¶æ®µ\n2. æ¯ä¸ªé˜¶æ®µçš„çŠ¶æ€\n3. ç›¸é‚»ä¸¤ä¸ªé˜¶æ®µä¹‹é—´çš„é€’å½’å…³ç³»\n\n## **èƒŒåŒ…é—®é¢˜**\n\n*é—®é¢˜æè¿°ï¼šå‡è®¾æˆ‘ä»¬æœ‰nç§ç±»å‹çš„ç‰©å“ï¼Œåˆ†åˆ«ç¼–å·ä¸º1, 2...nã€‚å…¶ä¸­ç¼–å·ä¸ºiçš„ç‰©å“ä»·å€¼ä¸ºviï¼Œå®ƒçš„é‡é‡ä¸ºwiã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œå‡å®šä»·å€¼å’Œé‡é‡éƒ½æ˜¯æ•´æ•°å€¼ã€‚ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œå®ƒèƒ½å¤Ÿæ‰¿è½½çš„é‡é‡æ˜¯Capã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›å¾€åŒ…é‡Œè£…è¿™äº›ç‰©å“ï¼Œä½¿å¾—åŒ…é‡Œè£…çš„ç‰©å“ä»·å€¼æœ€å¤§åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•æ¥é€‰æ‹©è£…çš„ä¸œè¥¿å‘¢ï¼Ÿæ³¨æ„ï¼šæ¯ç§ç‰©å“åªæœ‰ä¸€ä»¶ï¼Œå¯ä»¥é€‰æ‹©æ”¾æˆ–è€…ä¸æ”¾ã€‚åˆå§‹åŒ–æ•°æ®ä¸ºï¼šn=5ï¼Œw={2,2,6,5,4}ï¼Œv={6,3,5,4,6}ï¼ŒCap=10*\n\nè§£æ³•å¦‚ä¸‹ï¼š\n\n1. æè¿°æœ€ä¼˜è§£çš„ç»“æ„\n\nè®¾å­é—®é¢˜ï¼šf[i][v]è¡¨ç¤ºå…è®¸å‰iä»¶ç‰©å“æ”¾å…¥å®¹é‡ä¸ºvçš„èƒŒåŒ…æ—¶å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚æ³¨ï¼šè¿™é‡Œçš„iä»0åˆ°5ï¼Œvä»0åˆ°10\n\nä¸ºäº†èƒ½å¤Ÿå¾—åˆ°å·²ç»è®¡ç®—è¿‡çš„ï¼Œæ›´å°è§„æ¨¡çš„å­é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å½“å‰é™é‡æ¥åªè€ƒè™‘ç¬¬iä»¶ç‰©å“æ”¾æˆ–è€…ä¸æ”¾ï¼Œé‚£ä¹ˆå°±å¯ä»¥è½¬åŒ–ä¸ºæ¶‰åŠå‰i-1ä»¶ç‰©å“çš„é—®é¢˜ï¼Œ\n\n```python\n#nï¼šç‰©å“ä»¶æ•°ï¼›c:æœ€å¤§æ‰¿é‡ä¸ºcçš„èƒŒåŒ…ï¼›w:å„ä¸ªç‰©å“çš„é‡é‡ï¼›v:å„ä¸ªç‰©å“çš„ä»·å€¼\n#ç¬¬ä¸€æ­¥å»ºç«‹æœ€å¤§ä»·å€¼çŸ©é˜µ(æ¨ªåæ ‡è¡¨ç¤º[0,c]æ•´æ•°èƒŒåŒ…æ‰¿é‡):(n+1)*(c+1)\n#æŠ€å·§:python ç”ŸæˆäºŒç»´æ•°ç»„(æ•°ç»„)é€šå¸¸å…ˆç”Ÿæˆåˆ—å†ç”Ÿæˆè¡Œ\ndef bag(n,c,w,p)ï¼š\n    res=[[-1 for j in range(c+1)]for i in range(n+1)]\n    for j in range(c+1):\n        #ç¬¬0è¡Œå…¨éƒ¨èµ‹å€¼ä¸º0ï¼Œç‰©å“ç¼–å·ä»1å¼€å§‹.ä¸ºäº†ä¸‹é¢èµ‹å€¼æ–¹ä¾¿\n        res[0][j]=0\n    for i in range(1:n+1):\n        for j in range(1:c+1):\n            res[i][j]=res[i-1][j]\n            #ç”Ÿæˆäº†n*cæœ‰æ•ˆçŸ©é˜µï¼Œä»¥ä¸‹å…¬å¼w[i-1],p[i-1]ä»£è¡¨ä»ç¬¬ä¸€ä¸ªå…ƒç´ w[0],p[0]å¼€å§‹å–ã€‚\n            if(j>=w[i-1]) and res[i-1][j-w[i-1]]+p[i-1]>res[i][j]ï¼š\n                res[i][j]=res[i-1][j-w[i-1]]+p[i-1]\n    return res\n#ä»¥ä¸‹ä»£ç åŠŸèƒ½ï¼šæ ‡è®°å‡ºæœ‰æ”¾å…¥èƒŒåŒ…çš„ç‰©å“\n#åè¿‡æ¥æ ‡è®°ï¼Œåœ¨ç›¸åŒä»·å€¼æƒ…å†µä¸‹ï¼Œåä¸€ä»¶ç‰©å“æ¯”å‰ä¸€ä»¶ç‰©å“çš„æœ€å¤§ä»·å€¼å¤§ï¼Œåˆ™è¡¨ç¤ºç‰©å“i#æœ‰è¢«åŠ å…¥åˆ°èƒŒåŒ…ï¼Œxæ•°ç»„è®¾ç½®ä¸ºTrueã€‚è®¾åˆå§‹ä¸ºj=cã€‚\ndef show(n,c,w,res):  \n    print('æœ€å¤§ä»·å€¼ä¸º:',res[n][c])  \n    x=[False for i in range(n)]  \n    j=c  \n    for i in range(1,n+1):  \n        if res[i][j]>res[i-1][j]:  \n            x[i-1]=True  \n            j-=w[i-1]  \n    print 'é€‰æ‹©çš„ç‰©å“ä¸º:'  \n    for i in range(n):  \n        if x[i]:  \n            print 'ç¬¬',i,'ä¸ª,' \n    print'' \nif __name__=='__main__':  \n    n=5  \n    c=10  \n    w=[2,2,6,5,4]  \n    p=[6,3,5,4,6]  \n    res=bag(n,c,w,p)  \n    show(n,c,w,res)\n```\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"Goå…­ä¸ªå¸¸ç”¨çš„æ¥å£çš„ä½¿ç”¨","url":"/2023/07/30/Goå…­ä¸ªå¸¸ç”¨çš„æ¥å£çš„ä½¿ç”¨/","content":"\n## fmt.Stringer\n\nåœ¨å¼€å‘è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè°ƒç”¨`fmt`åŒ…ä¸‹çš„æ‰“å°å‡½æ•°(å¦‚`println`æˆ–`printf`)å°†è°ƒè¯•ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ï¼š\n\n```go\nfmt.Println(\"test\")\nfmt.Printf(\"%d\\n\",10)\n```\n\nè¿™äº›æ‰“å°å‡½æ•°ä¼šè‡ªåŠ¨å†³å®šå¦‚ä½•åœ¨æ§åˆ¶å°è¾“å‡ºè¿™äº›ä¿¡æ¯ï¼Œå¯¹äºè‡ªå®šä¹‰ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰å…¶åœ¨æ§åˆ¶å°çš„è¾“å‡ºï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ\n\n`fmt`åŒ…çš„`Stringer`ç”¨äºå®šä¹‰ç±»å‹çš„æ ¼å¼åŒ–è¾“å‡ºï¼Œè¯¥æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š\n\n```go\ntype Stringer interface {\n    String() string\n}\n```\n\nå¯¹äºå®ç°äº†`Stringer`æ¥å£çš„ç±»å‹ï¼Œæ‰“å°å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥ç±»å‹çš„`String()`æ–¹æ³•ï¼Œå°†è¯¥æ–¹æ³•çš„è¿”å›å€¼è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæ¯”å¦‚æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ª`Reason`ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå­£èŠ‚ï¼š\n\n```go\npackage main \n\ntype Reason uint\n\nconst (\n\tSPRING Reason = iota + 1\n\tSUMMER\n\tAUTUMN\n\tWINTER\n)\n\nfunc main() {\n\tfmt.Println(SPRING) //è¾“å‡ºï¼š1\n    fmt.Println(SUMMER) //è¾“å‡ºï¼š2\n  \tfmt.Println(AUTUMN) //è¾“å‡ºï¼š3\n  \tfmt.Println(WINTER) //è¾“å‡ºï¼š4\n}\n```\n\nå®ç°Stringeræ¥å£åï¼Œå°±å¯ä»¥å°†`Reason`ç±»ä»¥ä¸­æ–‡çš„æ ¼å¼æ‰“å°å‡ºæ¥äº†ï¼š\n\n```go\nfunc (r Reason) String() string {\n\treturn ReasonText[r] //è‡ªå®šä¹‰è¾“å‡ºï¼šå°†æ•°å€¼è½¬åŒ–ä¸ºæ–‡æœ¬\n}\n\nvar ReasonText = map[Reason]string{\n\tSPRING: \"æ˜¥å¤©\",\n\tSUMMER: \"å¤å¤©\",\n\tAUTUMN: \"ç§‹å¤©\",\n\tWINTER: \"å†¬å¤©\",\n}\n\nfunc main() {\n\tfmt.Println(SPRING) //è¾“å‡ºï¼šæ˜¥å¤©\n  fmt.Println(SUMMER) //è¾“å‡ºï¼šå¤å¤©\n  fmt.Println(AUTUMN) //è¾“å‡ºï¼šç§‹å¤©\n  fmt.Println(WINTER) //è¾“å‡ºï¼šå†¬å¤©\n}\n```\n\n## sort.Interface\n\né™¤äº†æ ¼å¼åŒ–è¾“å‡ºä¿¡æ¯å¤–ï¼Œæ’åºåŠŸèƒ½ä¹Ÿæ˜¯å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„ï¼Œ`Go`æ ‡å‡†åº“çš„`sort`åŒ…çš„`Sort()`å°±æ˜¯å¸¸ç”¨çš„æ’åºå‡½æ•°ï¼Œè¯¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š\n\n```go\nfunc Sort(data Interface) {\n\tn := data.Len()\n\tquickSort(data, 0, n, maxDepth(n))\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œ`Sort`å‡½æ•°æ¥æ”¶ä¸€ä¸ª`Inferface`ç±»å‹çš„å‚æ•°ï¼Œ`Interface`ç±»å‹æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š\n\n```go\ntype Interface interface {\n    Len() int\n    Less(i, j int) bool\n    Swap(i, j int)\n}\n```\n\n`Interface`ç±»å‹çš„`Len`æ–¹æ³•ç”¨äºè¿”å›é•¿åº¦ï¼Œ`Less`æ–¹æ³•ç”¨äºå…ƒç´ æ¯”è¾ƒå¤§å°ï¼Œ`Swap`æ–¹æ³•å®ç°å…ƒç´ ä½ç½®äº¤æ¢ï¼Œä»»ä½•æ‹¥æœ‰è¿™ä¸ªæ–¹æ³•çš„ç±»å‹ï¼Œéƒ½å¯ä»¥ä¼ é€’ç»™`sort.Sort`è¿›è¡Œæ’åºã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®ç°`sort.Interface`æ¥å£ï¼Œå¹¶è°ƒç”¨`sort.Sort`å‡½æ•°çš„ç¤ºä¾‹ï¼š\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"sort\"\n)\n\ntype Student struct {\n\tID    int\n\tName  string\n\tScore int\n}\n\ntype Students []Student\n\nfunc (s Students) Len() int {\n\treturn len(s)\n}\nfunc (s Students) Less(i, j int) bool {\n\treturn s[i].Score > s[j].Score\n}\nfunc (s Students) Swap(i, j int) {\n\ts[i], s[j] = s[j], s[i]\n}\n\nfunc main() {\n\tstudents := []Student{\n    {ID: 1, Name: \"A\", Score: 95},\n\t\t{ID: 2, Name: \"B\", Score: 100},\n\t\t{ID: 3, Name: \"C\", Score: 90},\n    {ID: 4, Name: \"D\", Score: 80},             \n\t}\n\tsort.Sort(Students(students))\n\tfmt.Println(students)\n}\n```\n\n## io.Readerå’Œio.Writer\n\nç½‘ç»œæ•°æ®çš„è¯»å–ä¸å‘é€ã€æ–‡ä»¶çš„è¯»å–ä¸å†™å…¥ï¼Œæœ¬è´¨éƒ½æ˜¯å†™å…¥æˆ–å–å‡ºä¸€æ®µå­—èŠ‚æ•°æ®(å³å­—èŠ‚æ•°ç»„)ï¼ŒGoæ ‡å‡†åº“å¯¹å­—èŠ‚çš„è¯»å–ä¸å†™å…¥æŠ½è±¡ä¸º`io`åŒ…çš„`Reader`å’Œ`Writer`æ¥å£ï¼š\n\n```go\ntype Reader interface {\n\tRead(p []byte) (n int, err error)\n}\n\ntype Writer interface {\n\tWrite(p []byte) (n int, err error)\n}\n```\n\nåœ¨Goæ ‡å‡†åº“å†…æœ‰å¾ˆå¤šå®ç°äº†`io.Reader`å’Œ`io.Writer`æ¥å£ï¼Œæ¯”å¦‚`os.File`æˆ–è€…`Response.Boy`:\n\n```go\npackage main\n\nimport (\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n)\n\nfunc main() {\n\turl := \"\"\n\tresponse, err := http.Get(url)\n\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t//os.Stdoutæ˜¯os.Fileç±»å‹\n\tio.Copy(os.Stdout, response.Body)\n}\n```\n\nä¸Šé¢æˆ‘ä»¬è°ƒç”¨`io.Copy`æ–¹æ³•å°†è¯·æ±‚åˆ°çš„æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œ`io.Copy`å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š\n\n```go\nfunc Copy(dst Writer, src Reader) (written int64, err error) {\n\treturn copyBuffer(dst, src, nil)\n}\n```\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•æ¥æ”¶çš„å‚æ•°å°±æ˜¯`Writer`å’Œ`Reader`æ¥å£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»å‹æ¥å®ç°`Writer`æˆ–è€…`Reader`æ¥å£ï¼š\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n)\n\ntype Data string\n\nfunc (d *Data) Write(p []byte) (n int, err error) {\n\tn = len(p)\n\t*d = Data(string(p))\n\treturn n, nil\n}\n\nfunc main() {\n\turl := \"\"\n\tresponse, err := http.Get(url)\n\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tvar d Data\n\tio.Copy(&d, response.Body)\n\tfmt.Println(d)\n}\n```\n\n## error\n\n`Go`è¯­è¨€çš„å‡½æ•°æ”¯æŒå¤šä¸ªè¿”å›å€¼ï¼Œä¸€èˆ¬æ¨èæŠŠ`error`ç±»å‹ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªè¿”å›å€¼ï¼Œç”¨äºå‘Šè¯‰è°ƒç”¨è€…å‡½æ•°è°ƒç”¨æ˜¯å¦å‘ç”Ÿé”™è¯¯ï¼Œ`error`ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼š\n\n```go\ntype error interface {\n    Error() string\n}\n```\n\nå¯ä»¥çœ‹åˆ°`error`åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`errors`åŒ…çš„æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª`error`ç±»å‹ï¼š\n\n```go\nvar err error = errors.New(\"Not Found\")\n```\n\nä¹Ÿå¯ä»¥åœ¨å®ç°`error`æ¥å£çš„åŸºç¡€ï¼ŒåŒ…å«æ›´å¤šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒç”¨è€…åˆ¤æ–­é”™è¯¯ç±»å‹ï¼š\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n)\n\ntype FileNotFound struct {\n\tMessage  string\n\tFileName string\n\terr      error\n}\n\nfunc (f FileNotFound) Error() string {\n\treturn f.Message\n}\n\nfunc GetLogFile(fileName string) (*os.File, error) {\n\tf, err := os.Open(fileName)\n\tif err != nil {\n\t\treturn nil, &FileNotFound{FileName: fileName, err: err, Message: \"Not found\"}\n\t}\n\treturn f, nil\n}\n\nfunc main() {\n\tvar err error\n\tf, err = GetLogFile(\"1.txt\")\n\n\tif e, ok := err.(FileNotFound); ok {\n\t\tfmt.Println(e.Message)\n\t}\n}\n```\n\n## http.Handler\n\n`http`åŒ…çš„`Handler`æ¥å£å®šä¹‰å¦‚ä¸‹ï¼Œè¯¥æ¥å£å®šä¹‰äº†å¤„ç†`HTTP`è¯·æ±‚åº”è¯¥å®ç°çš„æ–¹æ³•ã€‚\n\n```go\ntype Handler interface {\n    ServeHTTP(w ResponseWriter, r *Request)\n}\n```\n\nåœ¨`Go`è¯­è¨€ä¸­ï¼Œåªéœ€è¦ç®€å•çš„å‡ è¡Œä»£ç ä¾¿å¯ä»¥å¯åŠ¨ä¸€ä¸ª`Web`æœåŠ¡å™¨ï¼š\n\n```go\npackage main\n\nimport \"net/http\"\n\nfunc main() {\n\thttp.HandleFunc(\"/user\", func(w http.ResponseWriter, r *http.Request) {\n\t\tw.Write([]byte(\"User Info\"))\n\t})\n\thttp.ListenAndServe(\":8080\", nil)\n}\n```\n\n`http.HandleFunc()`ä¼šå°†æˆ‘ä»¬è‡ªå·±çš„åŒ¿åå‡½æ•°å°è£…ä¸º`HandlerFunc`å‡½æ•°ï¼Œ`HandlerFunc`å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°å®ç°äº†`Handler`æ¥å£ï¼š\n\n```go\ntype HandlerFunc func(ResponseWriter, *Request)\n\nfunc (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {\n\tf(w, r)\n}\n```\n","tags":["go"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"golangçš„å‡½æ•°å®šä¹‰å’Œä½¿ç”¨","url":"/2023/07/29/golangçš„å‡½æ•°å®šä¹‰å’Œä½¿ç”¨/","content":"\n## å‡½æ•°çš„ç”³æ˜\n\nGoè¯­è¨€é‡Œçš„å‡½æ•°å¯åˆ†ä¸ºä¸¤ç§ï¼š\n\n1. å¸¦åå­—çš„å«æ™®é€šå‡½æ•°\n2. æ²¡å¸¦åå­—çš„å«åŒ¿åå‡½æ•°\n\nä½¿ç”¨`func`å…³é”®å­—ï¼Œåé¢ä¸€æ¬¡æ¥`å‡½æ•°å`ï¼Œ`å‚æ•°åˆ—è¡¨`ï¼Œ`è¿”å›å€¼åˆ—è¡¨`ï¼Œ`ç”¨{}åŒ…è£¹çš„ä»£ç å—`\n\n```go\nfunc å‡½æ•°å(å½¢å¼å‚æ•°åˆ—è¡¨)(è¿”å›å€¼åˆ—è¡¨){\n    å‡½æ•°ä½“\n}\n```\n\n## å‡½æ•°çš„å¯å˜å‚æ•°\n\n### å¤šä¸ªç±»å‹ä¸€è‡´çš„å‚æ•°\n\n```go\n// ä½¿ç”¨ ...ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå…ƒç´ ä¸ºintç±»å‹çš„åˆ‡ç‰‡\nfunc TestParams(args ...string) {\n  fmt.Printf(\"args: %v\\n\", args)\n}\n\n\nfunc main() {\n  type_func.TestParams(\"A\", \"B\", \"C\")\n  type_func.TestParams(\"A\", \"B\", \"C\", \"D\")\n  // args: [A B C]\n  // args: [A B C D]\n}\n```\n\n`...` æ˜¯ Go è¯­è¨€ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜å†™ä»£ç è€Œå®ç°çš„è¯­æ³•ç³–ï¼Œå¦‚æœè¯¥å‡½æ•°ä¸‹æœ‰å¤šä¸ªç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸ªè¯­æ³•ç³–å¿…é¡»å¾—æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚\n\nè¿™ä¸ªè¯­æ³•ç³–ï¼Œåªèƒ½åœ¨å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨ã€‚\n\n### å¤šä¸ªç±»å‹ä¸ä¸€è‡´çš„å‚æ•°\n\nä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„å‚æ•°ç±»å‹éƒ½ä¸ºstringï¼Œå¦‚æœä½ å¸Œæœ›å¤šä¸ªå‚æ•°åˆ‡è¿™äº›å‚æ•°çš„ç±»å‹éƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥æŒ‡å®šç±»å‹`...interface{}`ï¼Œç„¶åå†éå†ã€‚\n\nä¸‹é¢ä»£ç ä½¿ç”¨ä¹‹å‰è¯´è¿‡çš„`switch`å’Œ`arg.(type)`æ¥æ¼”ç¤ºä¸ä¸€è‡´å‚æ•°çš„æƒ…å†µã€‚\n\n```go\nfunc main() {\n  var v1 int = 1\n  var v2 int64 = 234\n  var v3 string = \"hello\"\n  var v4 float32 = 1.234\n  PrintType(v1, v2, v3, v4)\n}\n\nfunc PrintType(args ...interface{}) {\n  for _, arg := range args {\n    switch arg.(type) {\n    case int:\n      fmt.Println(arg, \"is an int value.\")\n    case string:\n      fmt.Println(arg, \"is a string value.\")\n    case int64:\n      fmt.Println(arg, \"is an int64 value.\")\n    default:\n      fmt.Println(arg, \"is an unknown type.\")\n    }\n  }\n}\n```\n\n## å‡½æ•°ä¼ é€’å¯å˜å‚æ•°\n\nä¸Šé¢æåˆ°äº†å¯ä»¥ä½¿ç”¨ `...` æ¥æ¥æ”¶å¤šä¸ªå‚æ•°ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªç”¨æ³•ï¼Œå°±æ˜¯ç”¨æ¥è§£åºåˆ—ï¼Œå°†å‡½æ•°çš„å¯å˜å‚æ•°ï¼ˆä¸€ä¸ªåˆ‡ç‰‡ï¼‰ä¸€ä¸ªä¸€ä¸ªå–å‡ºæ¥ï¼Œä¼ é€’ç»™å¦ä¸€ä¸ªå¯å˜å‚æ•°çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¼ é€’å¯å˜å‚æ•°å˜é‡æœ¬èº«ã€‚\n\nè¿™ä¸ªæ–¹æ³•ï¼Œåªèƒ½å†ç»™å‡½æ•°ä¼ é€’å‚æ•°çš„æ—¶å€™ä½¿ç”¨ï¼Œè¿™ä¸¤ä¸ªæ˜¯æˆå¯¹å‡ºç°çš„ã€‚\n\n```go\nfunc main() {\n\n  args := []int{1, 2, 3, 4}\n  test(args...)\n}\n\nfunc test(args ...int) {\n  fmt.Printf(\"args: %v\\n\", args)\n}\n```\n\n## å‡½æ•°çš„è¿”å›å€¼\n\nå‡½æ•°çš„è¿”å›å€¼æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™å°±å·²ç»ç¡®å®šå¥½äº†ã€‚\n\nä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ²¡æœ‰è¿”å›å€¼ï¼Œä¸€ç§æ˜¯æœ‰ã€‚åŒäº‹Goè¯­è¨€æ”¯æŒè¿”å›å¤šä¸ªå€¼ã€‚\n\n> å½“å‡½æ•°æ²¡æœ‰æŒ‡å®šè¿”å›å€¼æ—¶ã€‚å‡½æ•°ä½“å¯ä»¥ä½¿ç”¨`return`æ¥ç»“æŸå‡½æ•°çš„è¿è¡Œï¼Œä½†`return`åä¸èƒ½è·Ÿä»»ä½•ä¸œè¥¿ã€‚\n\nGoè¿”å›å¤šä¸ªå€¼çš„å‡½æ•°ï¼š\n\n```go\nfunc main() {\n\n  args := []int{1, 2, 3, 4}\n  test(args...)\n\n  number1, number2, string1 := returnTwo()\n\n  fmt.Printf(\"number1: %v\\n\", number1)\n  fmt.Printf(\"number2: %v\\n\", number2)\n  fmt.Printf(\"string1: %v\\n\", string1)\n}\n\nfunc returnTwo() (int, int, string) {\n  return 1, 2, \"111\"\n}\n\n// ç»“æœ\nnumber1: 1\nnumber2: 2\nstring1: 111\n```\n\n## åŒ¿åå‡½æ•°\n\nåŒ¿åå‡½æ•°ï¼Œå°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œå®ƒåªæœ‰å‡½æ•°é€»è¾‘ä½“ã€‚\n\nä¸‹é¢å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„å‡½æ•°ã€‚\n\n### ç«‹å³æ‰§è¡Œå‡½æ•°\n\n```go\nfunc(data int) {\n    fmt.Println(\"hello\", data)\n}(100)\n```\n\n### ä½œä¸ºå›è°ƒå‡½æ•°ä½¿ç”¨\n\n```go\nfunc main() {\n  excute(func(str string) {\n    print(\"call back\" + str)\n  })\n}\n\nfunc excute(call func(string)) {\n  call(\"123\")\n}\n\n// ç»“æœ\ncall back123\n```\n\nè¿™äº›ä¸œè¥¿å…¶å®åœ¨å…¶ä»–è¯­è¨€é‡Œä¹Ÿæœ‰åŒæ ·çš„æ¦‚å¿µï¼Œæƒ³`JS`é‡Œé¢çš„åŒ¿åå‡½æ•°\n\n### å‡½æ•°ä½œä¸ºå˜é‡\n\nåœ¨Goé‡Œé¢å‡½æ•°ï¼Œä¹Ÿæœ‰å’ŒJSä¸€æ ·çš„ç”¨æ³•å’Œæ¦‚å¿µï¼Œæ¯”å¦‚å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡ï¼Œä¸´æ—¶æ€§æ­»åŒºç­‰ã€‚\n\nä¸‹é¢æ˜¯å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡çš„æ–¹å¼ã€‚\n\n```go\nfunc main() {\n  // func1()  // ä¸åˆ é™¤ä¼šå½¢æˆä¸´æ—¶æ­»åŒº\n  var func1 = func() {\n    print(\"success!!!!\")\n  }\n  func1()\n}\n  // ç»“æœ\n  success!!!!\n```\n\nç„¶åæ¢ç§æ–¹å¼\n\n```go\nfunc main() {\n  func1()  // ä¸åˆ é™¤ä¼šå½¢æˆä¸´æ—¶æ­»åŒº\n  var func1 = func() {\n    print(\"success!!!!\")\n  }\n}\n```\n\næ‰§è¡Œæ—¶ä¼šæŠ¥é”™`.\\main.go:20:2: undefined: func1`ã€‚åŸå› æ˜¯å°†åŒ¿åå‡½æ•°èµ‹å€¼ç»™å˜é‡ä¹‹åï¼Œåœ¨å®šä¹‰`func1`å‰çš„ä»£ç æ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªå˜é‡çš„.\n\n## å‡½æ•°å’Œæ–¹æ³•\n\nåœ¨çœ‹å…¶ä»–ä»£ç çš„æ—¶å€™æœ‰æ—¶å€™ä¼šå‡ºç°åƒè¿™æ ·å®šä¹‰å‡½æ•°ï¼š\n\n```go\nfunc main() {\n  person1 := Person{\"my name\"}\n  person1.printName()\n}\n\n// å®šä¹‰ä¸€ä¸ªåä¸ºPersonçš„ç»“æ„ä½“\ntype Person struct {\n  name string\n}\n\n// å®šä¹‰ä¸€ä¸ªä¸Personç»‘å®šçš„æ–¹æ³•\nfunc (p Person) printName() {\n  fmt.Print(p.name)\n}\n\n// go run main.goåçš„ç»“æœ\nmy name\n```\n\nåƒè¿™ç§å®šä¹‰å‡½æ•°çš„å…¶å®æ˜¯Goé‡Œé¢çš„æ–¹æ³•ï¼Œç»™ç»“æ„ä½“å®šä¹‰æ–¹æ³•ã€‚é€šè¿‡å‡½æ•°åç§°å‰çš„` (p Person)`ï¼Œä¸ç»“æ„ä½“è¿›è¡Œç»‘å®šã€‚\n\næ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ã€‚å½“ä½ ä¸€ä¸ªå‡½æ•°å’Œå¯¹è±¡/ç»“æ„ä½“è¿›è¡Œç»‘å®šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚\n","tags":["go"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"ginæ¡†æ¶å­¦ä¹ ","url":"/2023/07/29/ginæ¡†æ¶å­¦ä¹ /","content":"\n## åˆ›å»ºEngine\nåœ¨ginæ¡†æ¶ä¸­ï¼ŒEngineè¢«å®šä¹‰æˆä¸ºä¸€ä¸ªç»“æ„ä½“ï¼ŒEngineä»£è¡¨ginæ¡†æ¶çš„ä¸€ä¸ªç»“æ„ä½“å®šä¹‰ï¼Œå…¶ä¸­åŒ…å«äº†è·¯ç”±ç»„ã€ä¸­é—´ä»¶ã€é¡µé¢æ¸²æŸ“æ¥å£ã€æ¡†æ¶é…ç½®è®¾ç½®ç­‰ç›¸å…³å†…å®¹ã€‚\n\né»˜è®¤çš„Engineå¯ä»¥é€šè¿‡**gin.Default**è¿›è¡Œåˆ›å»ºï¼Œæˆ–è€…ä½¿ç”¨gin.New()åŒæ ·å¯ä»¥åˆ›å»ºã€‚ä¸¤ç§æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```go\nengine1 = gin.Default()\nengine2 = gin.New()\n//gin.Default()å’Œgin.New()çš„åŒºåˆ«åœ¨äºï¼š\n//gin.Defaultä¹Ÿä½¿ç”¨gin.New()åˆ›å»ºengineå®ä¾‹ï¼Œä½†æ˜¯ä¼šé»˜è®¤ä½¿ç”¨Loggerå’ŒRecoveryä¸­é—´ä»¶ã€‚\n//Loggeræ˜¯è´Ÿè´£è¿›è¡Œæ‰“å°å¹¶è¾“å‡ºæ—¥å¿—çš„ä¸­é—´ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œç¨‹åºè°ƒè¯•ã€‚Recoveryä¸­é—´ä»¶çš„ä½œç”¨æ˜¯å¦‚æœç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°panicä¸­æ–­äº†æœåŠ¡ï¼Œåˆ™Recoveryä¼šæ¢å¤ç¨‹åºæ‰§è¡Œï¼Œå¹¶è¿”å›æœåŠ¡å™¨500å†…éƒ¨é”™è¯¯ã€‚\n```\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„gin.Defaultåˆ›å»ºEngineå®ä¾‹ã€‚\n\nè¿è¡ŒEngine\n\n```go\n engine1.Run([ä¸»æœºåœ°å€:ç«¯å£å·])\n// ä¾‹å¦‚:\n// ä¸å¸¦å‚æ•°ï¼Œé»˜è®¤ä¸»æœºåœ°å€ä¸ºlocalhostï¼Œé»˜è®¤ç«¯å£ä¸º8080\nengine1.Run()\n// å¸¦å‚æ•°ï¼Œä¸»æœºåœ°å€ä¸ºapphostï¼Œç«¯å£ä¸º8090\nengine1.Run(\"apphost:8090\")\n```\n\n## å¤„ç†HTTPè¯·æ±‚\nåœ¨ä¸Šé¢æˆ‘ä»¬åˆ›å»ºçš„engineå®ä¾‹ä¸­ï¼ŒåŒ…å«å¾ˆå¤šæ–¹æ³•å¯ä»¥ç›´æ¥å¤„ç†ä¸åŒç±»å‹çš„HTTPè¯·æ±‚ã€‚\n\n### HTTPè¯·æ±‚ç±»å‹\n\nhttpåè®®ä¸­ä¸€å…±å®šä¹‰äº†å…«ç§æ–¹æ³•æˆ–è€…ç§°ä¹‹ä¸ºç±»å‹æ¥è¡¨æ˜å¯¹è¯·æ±‚ç½‘ç»œèµ„æºï¼ˆRequest-URIï¼‰çš„ä¸åŒçš„æ“ä½œæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š`OPTIONSã€HEADã€GETã€POSTã€PUTã€DELETEã€TRACEã€CONNECT`ã€‚\n\nè™½ç„¶ä¸€å…±æœ‰å…«ç§è¯·æ±‚æ“ä½œç±»å‹ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­å¸¸ç”¨çš„å°±ï¼š`GETã€POSTã€DELETE`ç­‰å‡ ç§ã€‚\n\n### Context-ä¸Šä¸‹æ–‡\n\nContextæ˜¯ginæ¡†æ¶ä¸­å°è£…çš„ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™æ˜¯ginæ¡†æ¶ä¸­æœ€é‡è¦ï¼Œæœ€åŸºç¡€çš„ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡ã€‚\n\nè¯¥ç»“æ„ä½“å¯ä»¥æä¾›æˆ‘ä»¬æ“ä½œè¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œè·å–æ•°æ®ç­‰ç›¸å…³çš„æ“ä½œï¼Œé€šå¸¸ç§°ä¹‹ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç®€å•è¯´ä¸ºæˆ‘ä»¬æä¾›æ“ä½œç¯å¢ƒã€‚\n\nå¯ä»¥é€šè¿‡`context.Queryå’Œcontext.DefaultQuery`è·å–GETè¯·æ±‚æºå¸¦çš„å‚æ•°ã€‚\n\nå¯ä»¥é€šè¿‡`context.Writer.Write`å‘è¯·æ±‚å‘èµ·ç«¯è¿”å›æ•°æ®ã€‚\n\n\n### é€šç”¨å¤„ç†\n\nengineä¸­å¯ä»¥ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚çš„å¤„ç†ï¼Œåœ¨engineä¸­ä½¿ç”¨Handleæ–¹æ³•è¿›è¡Œhttpè¯·æ±‚çš„å¤„ç†ã€‚Handleæ–¹æ³•åŒ…å«ä¸‰ä¸ªå‚æ•°ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```go\nfunc (group *RouterGroup) Handle(httpMethod, relativePath string, handlers ...HandlerFunc) IRoutes\n```\n\n- `httpMethod`ï¼šç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦å¤„ç†çš„HTTPçš„è¯·æ±‚ç±»å‹ï¼Œæ˜¯GETã€POSTã€DELETEç­‰8ç§è¯·æ±‚ç±»å‹ä¸­çš„ä¸€ç§- \n- `relativePath`ï¼šç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¦è§£æçš„æ¥å£ï¼Œç”±å¼€å‘è€…è¿›è¡Œå®šä¹‰ã€‚\n- `handlers`ï¼šç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¤„ç†å¯¹åº”çš„è¯·æ±‚çš„ä»£ç çš„å®šä¹‰ã€‚\n\n**Handleå¤„ç†GETè¯·æ±‚**\n\n```go\n...\n// é€šè¿‡Handleæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå¤„ç†GETç±»å‹çš„è¯·æ±‚ï¼Œè§£æçš„æ¥å£æ˜¯/hello\n// url:http://localhost:8080/hello?name=syb\n// GETè¯·æ±‚é™„å¸¦çš„å‚æ•°åœ¨urlä¸­çš„?åé¢\nengine.Handle(\"GET\", \"/hello\", func(context *gin.Context) {\n    // è·å–è¯·æ±‚æ¥å£\n    fmt.Println(context.FullPath())\n    // è·å–å­—ç¬¦ä¸²å‚æ•°\n    name := context.DefaultQuery(\"name\", \"\")\n    fmt.Println(name)\n\n    // è¿”å›ç»™å‰ç«¯è¾“å‡º\n    context.Writer.Write([]byte(\"Hello ,\" + name))\n})\n...\n\n```\n\n`context.FullPath()`ï¼š**è¿”å›è¯·æ±‚æ¥å£åœ°å€ã€‚**ä¸Šè¿°ä»£ç è¿”å›çš„æ˜¯\"/hello\"ã€‚\n\n`context.DefaultQuery(key(string), defaultValue(string))`ï¼š**è¯»å–GETè¯·æ±‚é™„å¸¦çš„å‚æ•°ã€‚**ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šè¦è¯»å–çš„å‚æ•°çš„é”®å€¼keyï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‹¥è¯»å–ä¸åˆ°è¦è¿”å›çš„é»˜è®¤å­—ç¬¦ä¸²ã€‚\n\n`context.Writer.Write(([]byte))`ï¼š**ç»™å‰ç«¯è¿”å›æ•°æ®ã€‚**æ•°æ®ç±»å‹æ˜¯byteå­—ç¬¦æ•°ç»„ã€‚\n\n**Handleå¤„ç†POSTè¯·æ±‚**\n\n```go\n\n...\n// é€šè¿‡Handleæ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå¤„ç†POSTç±»å‹çš„è¯·æ±‚ï¼Œè§£æçš„æ¥å£æ˜¯/login\n// url:http://localhost:8080/login\nengine.Handle(\"POST\", \"/login\", func(context *gin.Context) {\n\n    fmt.Println(context.FullPath())\n    // è¯»å–ç”¨æˆ·å\n    username := context.PostForm(\"username\")\n    fmt.Println(username)\n\n    // è¯»å–ç”¨æˆ·å¯†ç \n    password := context.PostForm(\"pwd\")\n    fmt.Println(password)\n\n    context.Writer.Write([]byte(\"User login\"))\n})\n...\n\n```\n\n`context.PostForm(key(string))`ï¼š**è¯»å–POSTè¯·æ±‚é™„å¸¦çš„å‚æ•°ã€‚**å‚æ•°æŒ‡å®šè¦è¯»å–çš„å‚æ•°çš„é”®å€¼keyã€‚\n","tags":["go","gin"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼","url":"/2023/07/28/å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼/","content":"\n# å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼\n\n## ä¸€ã€æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼\n\n\n\n1. æ•°å­—ï¼š^[0-9]*$\n2. nä½çš„æ•°å­—ï¼š^\\d{n}$\n3. è‡³å°‘nä½çš„æ•°å­—ï¼š^\\d{n,}$\n4. m-nä½çš„æ•°å­—ï¼š^\\d{m,n}$\n5. é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$\n6. éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]{1,2})?$\n7. å¸¦1-2ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(\\-)?\\d+(\\.\\d{1,2})?$\n8. æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(\\-|\\+)?\\d+(\\.\\d+)?$\n9. æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{2})?$\n10. æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{1,3})?$\n11. éé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\\d*$ æˆ– ^([1-9][0-9]*){1,3}$ æˆ– ^\\+?[1-9][0-9]*$\n12. éé›¶çš„è´Ÿæ•´æ•°ï¼š^\\-[1-9][]0-9\"*$ æˆ– ^-[1-9]\\d*$\n13. éè´Ÿæ•´æ•°ï¼š^\\d+$ æˆ– ^[1-9]\\d*|0$\n14. éæ­£æ•´æ•°ï¼š^-[1-9]\\d*|0$ æˆ– ^((-\\d+)|(0+))$\n15. éè´Ÿæµ®ç‚¹æ•°ï¼š^\\d+(\\.\\d+)?$ æˆ– ^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0$\n16. éæ­£æµ®ç‚¹æ•°ï¼š^((-\\d+(\\.\\d+)?)|(0+(\\.0+)?))$ æˆ– ^(-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*))|0?\\.0+|0$\n17. æ­£æµ®ç‚¹æ•°ï¼š^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*$ æˆ– ^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$\n18. è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*)$ æˆ– ^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$\n19. æµ®ç‚¹æ•°ï¼š^(-?\\d+)(\\.\\d+)?$ æˆ– ^-?([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0)$\n\n \n\n \n\n## äºŒã€æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼\n\n \n\n1. æ±‰å­—ï¼š^[\\u4e00-\\u9fa5]{0,}$\n2. è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$ æˆ– ^[A-Za-z0-9]{4,40}$\n3. é•¿åº¦ä¸º3-20çš„æ‰€æœ‰å­—ç¬¦ï¼š^.{3,20}$\n4. ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$\n5. ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$\n6. ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$\n7. ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$\n8. ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\\w+$ æˆ– ^\\w{3,20}$\n9. ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\\u4E00-\\u9FA5A-Za-z0-9_]+$\n10. ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\\u4E00-\\u9FA5A-Za-z0-9]+$ æˆ– ^[\\u4E00-\\u9FA5A-Za-z0-9]{2,20}$\n11. å¯ä»¥è¾“å…¥å«æœ‰^%&',;=?$\\\"ç­‰å­—ç¬¦ï¼š[^%&',;=?$\\x22]+ 12 ç¦æ­¢è¾“å…¥å«æœ‰~çš„å­—ç¬¦ï¼š[^~\\x22]+\n\n \n\n**å…¶å®ƒï¼š**\n\n.*åŒ¹é…é™¤ \\n ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ã€‚\n\n/[\\u4E00-\\u9FA5]/ æ±‰å­—\n\n/[\\uFF00-\\uFFFF]/ å…¨è§’ç¬¦å·\n\n/[\\u0000-\\u00FF]/ åŠè§’ç¬¦å·\n\n \n\n## ä¸‰ã€ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼\n\n \n\n1. Emailåœ°å€ï¼š^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$\n2. åŸŸåï¼š[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?\n3. InternetURLï¼š[a-zA-z]+://[^\\s]* æˆ– ^http://([\\w-]+\\.)+[\\w-]+(/[\\w-./?%&=]*)?$\n4. æ‰‹æœºå·ç ï¼š^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$\n5. ç”µè¯å·ç (\"XXX-XXXXXXX\"ã€\"XXXX-XXXXXXXX\"ã€\"XXX-XXXXXXX\"ã€\"XXX-XXXXXXXX\"ã€\"XXXXXXX\"å’Œ\"XXXXXXXX)ï¼š^(\\(\\d{3,4}-)|\\d{3.4}-)?\\d{7,8}$\n6. å›½å†…ç”µè¯å·ç (0511-4405222ã€021-87888822)ï¼š\\d{3}-\\d{8}|\\d{4}-\\d{7}\n7. èº«ä»½è¯å·(15ä½ã€18ä½æ•°å­—)ï¼š^\\d{15}|\\d{18}$\n8. çŸ­èº«ä»½è¯å·ç (æ•°å­—ã€å­—æ¯xç»“å°¾)ï¼š^([0-9]){7,18}(x|X)?$ æˆ– ^\\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$\n9. å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]{4,15}$\n10. å¯†ç (ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿)ï¼š^[a-zA-Z]\\w{5,17}$\n11. å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´)ï¼š^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$\n12. æ—¥æœŸæ ¼å¼ï¼š^\\d{4}-\\d{1,2}-\\d{1,2}\n13. ä¸€å¹´çš„12ä¸ªæœˆ(01ï½09å’Œ1ï½12)ï¼š^(0?[1-9]|1[0-2])$\n14. ä¸€ä¸ªæœˆçš„31å¤©(01ï½09å’Œ1ï½31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$\n15. é’±çš„è¾“å…¥æ ¼å¼ï¼š\n16. 1.æœ‰å››ç§é’±çš„è¡¨ç¤ºå½¢å¼æˆ‘ä»¬å¯ä»¥æ¥å—:\"10000.00\" å’Œ \"10,000.00\", å’Œæ²¡æœ‰ \"åˆ†\" çš„ \"10000\" å’Œ \"10,000\"ï¼š^[1-9][0-9]*$\n17. 2.è¿™è¡¨ç¤ºä»»æ„ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—,ä½†æ˜¯,è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªå­—ç¬¦\"0\"ä¸é€šè¿‡,æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„å½¢å¼ï¼š^(0|[1-9][0-9]*)$\n18. 3.ä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—.æˆ‘ä»¬è¿˜å¯ä»¥å…è®¸å¼€å¤´æœ‰ä¸€ä¸ªè´Ÿå·ï¼š^(0|-?[1-9][0-9]*)$\n19. 4.è¿™è¡¨ç¤ºä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªå¯èƒ½ä¸ºè´Ÿçš„å¼€å¤´ä¸ä¸º0çš„æ•°å­—.è®©ç”¨æˆ·ä»¥0å¼€å¤´å¥½äº†.æŠŠè´Ÿå·çš„ä¹Ÿå»æ‰,å› ä¸ºé’±æ€»ä¸èƒ½æ˜¯è´Ÿçš„å§.ä¸‹é¢æˆ‘ä»¬è¦åŠ çš„æ˜¯è¯´æ˜å¯èƒ½çš„å°æ•°éƒ¨åˆ†ï¼š^[0-9]+(.[0-9]+)?$\n20. 5.å¿…é¡»è¯´æ˜çš„æ˜¯,å°æ•°ç‚¹åé¢è‡³å°‘åº”è¯¥æœ‰1ä½æ•°,æ‰€ä»¥\"10.\"æ˜¯ä¸é€šè¿‡çš„,ä½†æ˜¯ \"10\" å’Œ \"10.2\" æ˜¯é€šè¿‡çš„ï¼š^[0-9]+(.[0-9]{2})?$\n21. 6.è¿™æ ·æˆ‘ä»¬è§„å®šå°æ•°ç‚¹åé¢å¿…é¡»æœ‰ä¸¤ä½,å¦‚æœä½ è®¤ä¸ºå¤ªè‹›åˆ»äº†,å¯ä»¥è¿™æ ·ï¼š^[0-9]+(.[0-9]{1,2})?$\n22. 7.è¿™æ ·å°±å…è®¸ç”¨æˆ·åªå†™ä¸€ä½å°æ•°.ä¸‹é¢æˆ‘ä»¬è¯¥è€ƒè™‘æ•°å­—ä¸­çš„é€—å·äº†,æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$\n\n23 8.1åˆ°3ä¸ªæ•°å­—,åé¢è·Ÿç€ä»»æ„ä¸ª é€—å·+3ä¸ªæ•°å­—,é€—å·æˆä¸ºå¯é€‰,è€Œä¸æ˜¯å¿…é¡»ï¼š^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$\n\n24. å¤‡æ³¨ï¼šè¿™å°±æ˜¯æœ€ç»ˆç»“æœäº†,åˆ«å¿˜äº†\"+\"å¯ä»¥ç”¨\"*\"æ›¿ä»£å¦‚æœä½ è§‰å¾—ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ¥å—çš„è¯(å¥‡æ€ª,ä¸ºä»€ä¹ˆ?)æœ€å,åˆ«å¿˜äº†åœ¨ç”¨å‡½æ•°æ—¶å»æ‰å»æ‰é‚£ä¸ªåæ–œæ ,ä¸€èˆ¬çš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ\n25. xmlæ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\\\.[x|X][m|M][l|L]$\n26. ä¸­æ–‡å­—ç¬¦çš„[æ­£åˆ™è¡¨è¾¾å¼](https://so.csdn.net/so/search?q=æ­£åˆ™è¡¨è¾¾å¼&spm=1001.2101.3001.7020)ï¼š[\\u4e00-\\u9fa5]\n27. åŒå­—èŠ‚å­—ç¬¦ï¼š[^\\x00-\\xff] (åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1))\n28. ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\\n\\s*\\r (å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ)\n29. HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š<(\\S*?)[^>]*>.*?</\\1>|<.*? /> (ç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½éƒ¨åˆ†ï¼Œå¯¹äºå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›)\n30. é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\\s*|\\s*$æˆ–(^\\s*)|(\\s*$) (å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼)\n31. è…¾è®¯QQå·ï¼š[1-9][0-9]{4,} (è…¾è®¯QQå·ä»10000å¼€å§‹)\n32. ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\\d{5}(?!\\d) (ä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—)\n33. IPåœ°å€ï¼š\\d+\\.\\d+\\.\\d+\\.\\d+ (æå–IPåœ°å€æ—¶æœ‰ç”¨)\n34. IPåœ°å€ï¼š((?:(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)\\\\.){3}(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d))\n35. IP-v4åœ°å€ï¼š\\\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\b (æå–IPåœ°å€æ—¶æœ‰ç”¨)\n36. æ ¡éªŒIP-v6åœ°å€:(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\n37. å­ç½‘æ©ç ï¼š((?:(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)\\\\.){3}(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d))\n38. æ ¡éªŒæ—¥æœŸ:^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$(â€œyyyy-mm-ddâ€œ æ ¼å¼çš„æ—¥æœŸæ ¡éªŒï¼Œå·²è€ƒè™‘å¹³é—°å¹´ã€‚)\n39. æŠ½å–æ³¨é‡Šï¼š<!--(.*?)-->\n40. æŸ¥æ‰¾CSSå±æ€§:^\\\\s*[a-zA-Z\\\\-]+\\\\s*[:]{1}\\\\s[a-zA-Z0-9\\\\s.#]+[;]{1}\n41. æå–é¡µé¢è¶…é“¾æ¥:(<a\\\\s*(?!.*\\\\brel=)[^>]*)(href=\"https?:\\\\/\\\\/)((?!(?:(?:www\\\\.)?'.implode('|(?:www\\\\.)?', $follow_list).'))[^\" rel=\"external nofollow\" ]+)\"((?!.*\\\\brel=)[^>]*)(?:[^>]*)>\n42. æå–ç½‘é¡µå›¾ç‰‡:\\\\< *[img][^\\\\\\\\>]*[src] *= *[\\\\\"\\\\']{0,1}([^\\\\\"\\\\'\\\\ >]*)\n43. æå–ç½‘é¡µé¢œè‰²ä»£ç :^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$\n44. æ–‡ä»¶æ‰©å±•åæ•ˆéªŒ:^([a-zA-Z]\\\\:|\\\\\\\\)\\\\\\\\([^\\\\\\\\]+\\\\\\\\)*[^\\\\/:*?\"<>|]+\\\\.txt(l)?$\n45. åˆ¤æ–­IEç‰ˆæœ¬ï¼š^.*MSIE [5-8](?:\\\\.[0-9]+)?(?!.*Trident\\\\/[5-9]\\\\.0).*$\n\n \n\n| å…ƒå­—ç¬¦       | æè¿°                                                         |\n| ------------ | ------------------------------------------------------------ |\n| \\            | å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ç¬¦ã€æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ\\\\nâ€åŒ¹é…\\nã€‚â€œ\\nâ€åŒ¹é…æ¢è¡Œç¬¦ã€‚åºåˆ—â€œ\\\\â€åŒ¹é…â€œ\\â€è€Œâ€œ\\(â€åˆ™åŒ¹é…â€œ(â€ã€‚å³ç›¸å½“äºå¤šç§ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰çš„â€œè½¬ä¹‰å­—ç¬¦â€çš„æ¦‚å¿µã€‚ |\n| ^            | åŒ¹é…è¾“å…¥å­—è¡Œé¦–ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ^ä¹ŸåŒ¹é…â€œ\\nâ€æˆ–â€œ\\râ€ä¹‹åçš„ä½ç½®ã€‚ |\n| $            | åŒ¹é…è¾“å…¥è¡Œå°¾ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ$ä¹ŸåŒ¹é…â€œ\\nâ€æˆ–â€œ\\râ€ä¹‹å‰çš„ä½ç½®ã€‚ |\n| *            | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä»»æ„æ¬¡ã€‚ä¾‹å¦‚ï¼Œzo*èƒ½åŒ¹é…â€œzâ€ï¼Œä¹Ÿèƒ½åŒ¹é…â€œzoâ€ä»¥åŠâ€œzooâ€ã€‚*ç­‰ä»·äº{0,}ã€‚ |\n| +            | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡(å¤§äºç­‰äº1æ¬¡ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€œzo+â€èƒ½åŒ¹é…â€œzoâ€ä»¥åŠâ€œzooâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œzâ€ã€‚+ç­‰ä»·äº{1,}ã€‚ |\n| ?            | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€œdo(es)?â€å¯ä»¥åŒ¹é…â€œdoâ€æˆ–â€œdoesâ€ã€‚?ç­‰ä»·äº{0,1}ã€‚ |\n| {*n*}        | *n*æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„*n*æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€œo{2}â€ä¸èƒ½åŒ¹é…â€œBobâ€ä¸­çš„â€œoâ€ï¼Œä½†æ˜¯èƒ½åŒ¹é…â€œfoodâ€ä¸­çš„ä¸¤ä¸ªoã€‚ |\n| {*n*,}       | *n*æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…*n*æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€œo{2,}â€ä¸èƒ½åŒ¹é…â€œBobâ€ä¸­çš„â€œoâ€ï¼Œä½†èƒ½åŒ¹é…â€œfooooodâ€ä¸­çš„æ‰€æœ‰oã€‚â€œo{1,}â€ç­‰ä»·äºâ€œo+â€ã€‚â€œo{0,}â€åˆ™ç­‰ä»·äºâ€œo*â€ã€‚ |\n| {*n*,*m*}    | *m*å’Œ*n*å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­*n*<=*m*ã€‚æœ€å°‘åŒ¹é…*n*æ¬¡ä¸”æœ€å¤šåŒ¹é…*m*æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€œo{1,3}â€å°†åŒ¹é…â€œfoooooodâ€ä¸­çš„å‰ä¸‰ä¸ªoä¸ºä¸€ç»„ï¼Œåä¸‰ä¸ªoä¸ºä¸€ç»„ã€‚â€œo{0,1}â€ç­‰ä»·äºâ€œo?â€ã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ |\n| ?            | å½“è¯¥å­—ç¬¦ç´§è·Ÿåœ¨ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ï¼ˆ*,+,?ï¼Œ{*n*}ï¼Œ{*n*,}ï¼Œ{*n*,*m*}ï¼‰åé¢æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„ã€‚éè´ªå©ªæ¨¡å¼å°½å¯èƒ½å°‘åœ°åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼åˆ™å°½å¯èƒ½å¤šåœ°åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²â€œooooâ€ï¼Œâ€œo+â€å°†å°½å¯èƒ½å¤šåœ°åŒ¹é…â€œoâ€ï¼Œå¾—åˆ°ç»“æœ[â€œooooâ€]ï¼Œè€Œâ€œo+?â€å°†å°½å¯èƒ½å°‘åœ°åŒ¹é…â€œoâ€ï¼Œå¾—åˆ°ç»“æœ ['o', 'o', 'o', 'o'] |\n| .ç‚¹          | åŒ¹é…é™¤â€œ\\nâ€å’Œ\"\\r\"ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è¦åŒ¹é…åŒ…æ‹¬â€œ\\nâ€å’Œ\"\\r\"åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒâ€œ[\\s\\S]â€çš„æ¨¡å¼ã€‚ |\n| (pattern)    | åŒ¹é…patternå¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„Matchesé›†åˆå¾—åˆ°ï¼Œåœ¨VBScriptä¸­ä½¿ç”¨SubMatchesé›†åˆï¼Œåœ¨JScriptä¸­åˆ™ä½¿ç”¨$0â€¦$9å±æ€§ã€‚è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨â€œâ€æˆ–â€œâ€æˆ–â€œâ€ã€‚ |\n| (?:pattern)  | éè·å–åŒ¹é…ï¼ŒåŒ¹é…patternä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨æˆ–å­—ç¬¦â€œ(\\|)â€æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ—¶å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚â€œindustr(?:y\\|ies)â€å°±æ˜¯ä¸€ä¸ªæ¯”â€œindustry\\|industriesâ€æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚ |\n| (?=pattern)  | éè·å–åŒ¹é…ï¼Œæ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€œWindows(?=95\\|98\\|NT\\|2000)â€èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ |\n| (?!pattern)  | éè·å–åŒ¹é…ï¼Œæ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚â€œWindows(?!95\\|98\\|NT\\|2000)â€èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ã€‚ |\n| (?<=pattern) | éè·å–åŒ¹é…ï¼Œåå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚ï¼Œâ€œ(?<=95\\|98\\|NT\\|2000)Windowsâ€èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€ã€‚*pythonçš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰å®Œå…¨æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è§„èŒƒå®ç°ï¼Œæ‰€ä»¥ä¸€äº›é«˜çº§ç‰¹æ€§å»ºè®®ä½¿ç”¨å…¶ä»–è¯­è¨€å¦‚javaã€scalaç­‰ |\n| (?<!patte_n) | éè·å–åŒ¹é…ï¼Œåå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚â€œ(?<!95\\|98\\|NT\\|2000)Windowsâ€èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ã€‚*pythonçš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰å®Œå…¨æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è§„èŒƒå®ç°ï¼Œæ‰€ä»¥ä¸€äº›é«˜çº§ç‰¹æ€§å»ºè®®ä½¿ç”¨å…¶ä»–è¯­è¨€å¦‚javaã€scalaç­‰ |\n| x\\|y         | åŒ¹é…xæˆ–yã€‚ä¾‹å¦‚ï¼Œâ€œz\\|foodâ€èƒ½åŒ¹é…â€œzâ€æˆ–â€œfoodâ€(æ­¤å¤„è¯·è°¨æ…)ã€‚â€œ[z\\|f]oodâ€åˆ™åŒ¹é…â€œzoodâ€æˆ–â€œfoodâ€ã€‚ |\n| [xyz]        | å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ[abc]â€å¯ä»¥åŒ¹é…â€œplainâ€ä¸­çš„â€œaâ€ã€‚ |\n| [^xyz]       | è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ[^abc]â€å¯ä»¥åŒ¹é…â€œplainâ€ä¸­çš„â€œplinâ€ä»»ä¸€å­—ç¬¦ã€‚ |\n| [a-z]        | å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ[a-z]â€å¯ä»¥åŒ¹é…â€œaâ€åˆ°â€œzâ€èŒƒå›´å†…çš„ä»»æ„å°å†™å­—æ¯å­—ç¬¦ã€‚æ³¨æ„:åªæœ‰è¿å­—ç¬¦åœ¨å­—ç¬¦ç»„å†…éƒ¨æ—¶,å¹¶ä¸”å‡ºç°åœ¨ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶,æ‰èƒ½è¡¨ç¤ºå­—ç¬¦çš„èŒƒå›´; å¦‚æœå‡ºå­—ç¬¦ç»„çš„å¼€å¤´,åˆ™åªèƒ½è¡¨ç¤ºè¿å­—ç¬¦æœ¬èº«. |\n| [^a-z]       | è´Ÿå€¼å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…ä»»ä½•ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€œ[^a-z]â€å¯ä»¥åŒ¹é…ä»»ä½•ä¸åœ¨â€œaâ€åˆ°â€œzâ€èŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ |\n| \\b           | åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ï¼ˆå³æ­£åˆ™è¡¨è¾¾å¼çš„â€œåŒ¹é…â€æœ‰ä¸¤ç§æ¦‚å¿µï¼Œä¸€ç§æ˜¯åŒ¹é…å­—ç¬¦ï¼Œä¸€ç§æ˜¯åŒ¹é…ä½ç½®ï¼Œè¿™é‡Œçš„\\bå°±æ˜¯åŒ¹é…ä½ç½®çš„ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€œer\\bâ€å¯ä»¥åŒ¹é…â€œneverâ€ä¸­çš„â€œerâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œverbâ€ä¸­çš„â€œerâ€ï¼›â€œ\\b1_â€å¯ä»¥åŒ¹é…â€œ1_23â€ä¸­çš„â€œ1_â€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ21_3â€ä¸­çš„â€œ1_â€ã€‚ |\n| \\B           | åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€œer\\Bâ€èƒ½åŒ¹é…â€œverbâ€ä¸­çš„â€œerâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œneverâ€ä¸­çš„â€œerâ€ã€‚ |\n| \\cx          | åŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ\\cMåŒ¹é…ä¸€ä¸ªControl-Mæˆ–å›è½¦ç¬¦ã€‚xçš„å€¼å¿…é¡»ä¸ºA-Zæˆ–a-zä¹‹ä¸€ã€‚å¦åˆ™ï¼Œå°†cè§†ä¸ºä¸€ä¸ªåŸä¹‰çš„â€œcâ€å­—ç¬¦ã€‚ |\n| \\d           | åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[0-9]ã€‚grep è¦åŠ ä¸Š-Pï¼Œperlæ­£åˆ™æ”¯æŒ   |\n| \\D           | åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[^0-9]ã€‚grepè¦åŠ ä¸Š-Pï¼Œperlæ­£åˆ™æ”¯æŒ |\n| \\f           | åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚ç­‰ä»·äº\\x0cå’Œ\\cLã€‚                            |\n| \\n           | åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº\\x0aå’Œ\\cJã€‚                            |\n| \\r           | åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº\\x0då’Œ\\cMã€‚                            |\n| \\s           | åŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº[ \\f\\n\\r\\t\\v]ã€‚ |\n| \\S           | åŒ¹é…ä»»ä½•å¯è§å­—ç¬¦ã€‚ç­‰ä»·äº[^ \\f\\n\\r\\t\\v]ã€‚                     |\n| \\t           | åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº\\x09å’Œ\\cIã€‚                            |\n| \\v           | åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº\\x0bå’Œ\\cKã€‚                        |\n| \\w           | åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç±»ä¼¼ä½†ä¸ç­‰ä»·äºâ€œ[A-Za-z0-9_]â€ï¼Œè¿™é‡Œçš„\"å•è¯\"å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦é›†ã€‚ |\n| \\W           | åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ã€‚ç­‰ä»·äºâ€œ[^A-Za-z0-9_]â€ã€‚                  |\n| \\x*n*        | åŒ¹é…*n*ï¼Œå…¶ä¸­*n*ä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å€¼ã€‚åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼Œâ€œ\\x41â€åŒ¹é…â€œAâ€ã€‚â€œ\\x041â€åˆ™ç­‰ä»·äºâ€œ\\x04&1â€ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨ASCIIç¼–ç ã€‚ |\n| \\*num*       | åŒ¹é…*num*ï¼Œå…¶ä¸­*num*æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å¯¹æ‰€è·å–çš„åŒ¹é…çš„å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€œ(.)\\1â€åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦ã€‚ |\n| \\*n*         | æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ\\*n*ä¹‹å‰è‡³å°‘*n*ä¸ªè·å–çš„å­è¡¨è¾¾å¼ï¼Œåˆ™*n*ä¸ºå‘åå¼•ç”¨ã€‚å¦åˆ™ï¼Œå¦‚æœ*n*ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™*n*ä¸ºä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼ã€‚ |\n| \\*nm*        | æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ\\*nm*ä¹‹å‰è‡³å°‘æœ‰*nm*ä¸ªè·å¾—å­è¡¨è¾¾å¼ï¼Œåˆ™*nm*ä¸ºå‘åå¼•ç”¨ã€‚å¦‚æœ\\*nm*ä¹‹å‰è‡³å°‘æœ‰*n*ä¸ªè·å–ï¼Œåˆ™*n*ä¸ºä¸€ä¸ªåè·Ÿæ–‡å­—*m*çš„å‘åå¼•ç”¨ã€‚å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œè‹¥*n*å’Œ*m*å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™\\*nm*å°†åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼*nm*ã€‚ |\n| \\*nml*       | å¦‚æœ*n*ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œä¸”*m*å’Œ*l*å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼*nml*ã€‚ |\n| \\u*n*        | åŒ¹é…*n*ï¼Œå…¶ä¸­*n*æ˜¯ä¸€ä¸ªç”¨å››ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„Unicodeå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ\\u00A9åŒ¹é…ç‰ˆæƒç¬¦å·ï¼ˆÂ©ï¼‰ã€‚ |\n| \\p{P}        | å°å†™ p æ˜¯ property çš„æ„æ€ï¼Œè¡¨ç¤º Unicode å±æ€§ï¼Œç”¨äº Unicode æ­£è¡¨è¾¾å¼çš„å‰ç¼€ã€‚ä¸­æ‹¬å·å†…çš„â€œPâ€è¡¨ç¤ºUnicode å­—ç¬¦é›†ä¸ƒä¸ªå­—ç¬¦å±æ€§ä¹‹ä¸€ï¼šæ ‡ç‚¹å­—ç¬¦ã€‚å…¶ä»–å…­ä¸ªå±æ€§ï¼šLï¼šå­—æ¯ï¼›Mï¼šæ ‡è®°ç¬¦å·ï¼ˆä¸€èˆ¬ä¸ä¼šå•ç‹¬å‡ºç°ï¼‰ï¼›Zï¼šåˆ†éš”ç¬¦ï¼ˆæ¯”å¦‚ç©ºæ ¼ã€æ¢è¡Œç­‰ï¼‰ï¼›Sï¼šç¬¦å·ï¼ˆæ¯”å¦‚æ•°å­¦ç¬¦å·ã€è´§å¸ç¬¦å·ç­‰ï¼‰ï¼›Nï¼šæ•°å­—ï¼ˆæ¯”å¦‚é˜¿æ‹‰ä¼¯æ•°å­—ã€ç½—é©¬æ•°å­—ç­‰ï¼‰ï¼›Cï¼šå…¶ä»–å­—ç¬¦ã€‚**æ³¨ï¼šæ­¤è¯­æ³•éƒ¨åˆ†è¯­è¨€ä¸æ”¯æŒï¼Œä¾‹ï¼šjavascriptã€‚* |\n| \\<\\>         | åŒ¹é…è¯ï¼ˆwordï¼‰çš„å¼€å§‹ï¼ˆ\\<ï¼‰å’Œç»“æŸï¼ˆ\\>ï¼‰ã€‚ä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼\\<the\\>èƒ½å¤ŸåŒ¹é…å­—ç¬¦ä¸²\"for the wise\"ä¸­çš„\"the\"ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…å­—ç¬¦ä¸²\"otherwise\"ä¸­çš„\"the\"ã€‚æ³¨æ„ï¼šè¿™ä¸ªå…ƒå­—ç¬¦ä¸æ˜¯æ‰€æœ‰çš„è½¯ä»¶éƒ½æ”¯æŒçš„ã€‚ |\n| ( )          | å°†( å’Œ ) ä¹‹é—´çš„è¡¨è¾¾å¼å®šä¹‰ä¸ºâ€œç»„â€ï¼ˆgroupï¼‰ï¼Œå¹¶ä¸”å°†åŒ¹é…è¿™ä¸ªè¡¨è¾¾å¼çš„å­—ç¬¦ä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼ˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€å¤šå¯ä»¥ä¿å­˜9ä¸ªï¼‰ï¼Œå®ƒä»¬å¯ä»¥ç”¨ \\1 åˆ°\\9 çš„ç¬¦å·æ¥å¼•ç”¨ã€‚ |\n| \\|           | å°†ä¸¤ä¸ªåŒ¹é…æ¡ä»¶è¿›è¡Œé€»è¾‘â€œæˆ–â€ï¼ˆorï¼‰è¿ç®—ã€‚ä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼(him\\|her) åŒ¹é…\"it belongs to him\"å’Œ\"it belongs to her\"ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…\"it belongs to them.\"ã€‚æ³¨æ„ï¼šè¿™ä¸ªå…ƒå­—ç¬¦ä¸æ˜¯æ‰€æœ‰çš„è½¯ä»¶éƒ½æ”¯æŒçš„ã€‚ |\n","tags":["å·¥å…·"],"categories":["å·¥å…·"]},{"title":"AngularåŸºç¡€","url":"/2023/07/27/AngularåŸºç¡€/","content":"\n# AngularåŸºç¡€\n\n## ç®€ä»‹\n\nAngular æ˜¯ä¸€ä¸ªå¼€å‘å¹³å°ï¼ŒåŸºäº [TypeScript](https://www.typescriptlang.org/)ã€‚ä½œä¸ºä¸€ä¸ªå¹³å°ï¼ŒAngular åŒ…å«äº†ï¼š\n\n- åŸºäºç»„ä»¶çš„æ¡†æ¶ï¼Œå¯ç”¨äºæ„å»ºå¯æ‰©å±•çš„ Web åº”ç”¨ç¨‹åº\n- é›†æˆè‰¯å¥½çš„åº“ï¼ˆlibraryï¼‰ï¼Œæ¶µç›–å„ç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬è·¯ç”±ã€è¡¨å•ç®¡ç†ã€å®¢æˆ·ç«¯â€”â€”æœåŠ¡å™¨é€šä¿¡ç­‰\n- å¼€å‘äººå‘˜å·¥å…·ï¼Œå¯å¸®åŠ©æ‚¨å¼€å‘ã€æ„å»ºã€æµ‹è¯•å’Œæ›´æ–°ä»£ç \n\nå½“ä½ ç”¨ Angular æ­å»ºä¸€ä¸ªåº”ç”¨ï¼Œä½ æ­£åœ¨åˆ©ç”¨ä¸€ä¸ªå¯ä»¥ä»å•å¼€å‘äººå‘˜é¡¹ç›®æ‰©å±•åˆ°ä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„å¹³å°ã€‚Angular  è¢«è®¾è®¡ç”¨æ¥ä½¿ç‰ˆæœ¬è¿­ä»£å°½å¯èƒ½ç®€å•ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°åˆ©ç”¨æœ€æ–°æˆæœï¼ˆdevelopmentsï¼‰ã€‚æœ€ä¸ºé‡è¦çš„æ˜¯ï¼ŒAngular çš„ç”Ÿæ€ç³»ç»Ÿç”±å¤šè¾¾  170 ä¸‡çš„å¼€å‘äººå‘˜ã€åº“ï¼ˆlibraryï¼‰ä½œè€…å’Œå†…å®¹åˆ›ä½œè€…æ„æˆçš„å¤šå…ƒåŒ–ç¾¤ä½“ç»„æˆã€‚\n\n## Angularå¼€å‘ç¯å¢ƒæ­å»º\n\n#### è„šæ‰‹æ¶å®‰è£…\n\nnodeå®‰è£…æˆåŠŸä¹‹åï¼Œå¯ä»¥ä½¿ç”¨npmå‘½ä»¤å®‰è£…è„šæ‰‹æ¶\n\n```bash\nnpm install -g @angular/cli  # è£…çš„æ˜¯æœ€æ–°çš„ç‰ˆæœ¬\nnpm install -g @angular/cli@xx.xx.x # ä¹Ÿå¯ä»¥å®‰è£…æŒ‡å®šç‰ˆæœ¬\n```\n\n#### åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®å¹¶æ‰§è¡Œ\n\n```bash\nng new project_name  #project_nameç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰é¡¹ç›®å\ncd project_name\nng serve\n#æµè§ˆå™¨è¾“å…¥http://localhost:4200 ä¾¿å¯çœ‹åˆ°ç›¸å…³é¡µé¢\n```\n\n### ç›®å½•ä»‹ç»\n\næ¯ä¸ªå·¥ä½œåŒºä¸­çš„æ‰€æœ‰é¡¹ç›®å…±äº«åŒä¸€ä¸ª [CLI é…ç½®ç¯å¢ƒ](https://angular.cn/guide/workspace-config)ã€‚è¯¥å·¥ä½œåŒºçš„é¡¶å±‚åŒ…å«ç€å…¨å·¥ä½œåŒºçº§çš„é…ç½®æ–‡ä»¶ã€æ ¹åº”ç”¨çš„é…ç½®æ–‡ä»¶ä»¥åŠä¸€äº›åŒ…å«æ ¹åº”ç”¨çš„æºæ–‡ä»¶å’Œæµ‹è¯•æ–‡ä»¶çš„å­æ–‡ä»¶å¤¹ã€‚\n\n| å·¥ä½œåŒºé…ç½®æ–‡ä»¶      | ç”¨é€”                                                         |\n| ------------------- | ------------------------------------------------------------ |\n| `.editorconfig`     | ä»£ç ç¼–è¾‘å™¨çš„é…ç½®ã€‚å‚é˜… [EditorConfig](https://editorconfig.org)ã€‚ |\n| `.gitignore`        | æŒ‡å®š [Git](https://git-scm.com/) åº”å¿½ç•¥çš„ä¸å¿…è¿½è¸ªçš„æ–‡ä»¶ã€‚    |\n| `README.md`         | æ ¹åº”ç”¨çš„ç®€ä»‹æ–‡æ¡£ã€‚                                           |\n| `angular.json`      | ä¸ºå·¥ä½œåŒºä¸­çš„æ‰€æœ‰é¡¹ç›®æŒ‡å®š CLI çš„é»˜è®¤é…ç½®ï¼ŒåŒ…æ‹¬ CLI è¦ç”¨åˆ°çš„æ„å»ºã€å¯åŠ¨å¼€å‘æœåŠ¡å™¨å’Œæµ‹è¯•å·¥å…·çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚ [Karma](https://karma-runner.github.io) å’Œ [Protractor](http://www.protractortest.org)ã€‚æ¬²çŸ¥è¯¦æƒ…ï¼Œå‚é˜… [Angular å·¥ä½œåŒºé…ç½®](https://angular.cn/guide/workspace-config) éƒ¨åˆ†ã€‚ |\n| `package.json`      | é…ç½®å·¥ä½œåŒºä¸­æ‰€æœ‰é¡¹ç›®å¯ç”¨çš„ [npm åŒ…ä¾èµ–](https://angular.cn/guide/npm-packages)ã€‚å…³äºæ­¤æ–‡ä»¶çš„å…·ä½“æ ¼å¼å’Œå†…å®¹ï¼Œå‚é˜… [npm çš„æ–‡æ¡£](https://docs.npmjs.com/files/package.json)ã€‚ |\n| `package-lock.json` | æä¾› npm å®¢æˆ·ç«¯å®‰è£…åˆ° `node_modules` çš„æ‰€æœ‰è½¯ä»¶åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚æ¬²çŸ¥è¯¦æƒ…ï¼Œå‚é˜… [npm çš„æ–‡æ¡£](https://docs.npmjs.com/files/package-lock.json)ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ yarn å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶[å°±æ˜¯ yarn.lock](https://yarnpkg.com/lang/en/docs/yarn-lock)ã€‚ |\n| `src/`              | æ ¹é¡¹ç›®çš„æºæ–‡ä»¶ã€‚                                             |\n| `node_modules/`     | ä¸ºæ•´ä¸ªå·¥ä½œåŒºæä¾› [npm åŒ…](https://angular.cn/guide/npm-packages)ã€‚è¿™äº›å·¥ä½œåŒºçº§çš„ `node_modules` ä¾èµ–å¯¹å…¶ä¸­çš„æ‰€æœ‰é¡¹ç›®å¯è§ã€‚ |\n| `tsconfig.json`     | å·¥ä½œåŒºä¸­æ‰€æœ‰é¡¹ç›®çš„åŸºæœ¬ [TypeScript](https://www.typescriptlang.org) é…ç½®ã€‚æ‰€æœ‰å…¶å®ƒé…ç½®æ–‡ä»¶éƒ½ç»§æ‰¿è‡ªè¿™ä¸ªåŸºæœ¬é…ç½®ã€‚æ¬²çŸ¥è¯¦æƒ…ï¼Œå‚é˜… TypeScript æ–‡æ¡£ä¸­çš„ [é€šè¿‡ extends è¿›è¡Œé…ç½®ç»§æ‰¿](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends) éƒ¨åˆ† |\n\n![image-20230727161341227](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230727161341227.png)\n\n## ç»„ä»¶ä»‹ç»\n\nä»‹ç»ç»„ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»ä¸€ä¸‹`ç»„ä»¶`å’Œ`æ¨¡å—`ä¹‹å‰çš„å…³ç³»ï¼Œæ¡†æ¶éƒ½æ˜¯æ¨å´‡ç»„ä»¶åŒ–å¼€å‘çš„ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥çœ‹åšä¸€ä¸ªç»„ä»¶ï¼Œå…·ä½“é¡µé¢ä¸­ç»„ä»¶åˆ’åˆ†çš„ç²’åº¦æ˜¯å¤šå¤§ï¼Œè¿˜æ˜¯æŒ‰ç…§è‡ªå·±çš„ä¸ªäººå¼€å‘ä¹ æƒ¯æ¥è¿›è¡Œã€‚åœ¨Angularä¸­æˆ‘ä»¬çŸ¥é“äº†`appæ¨¡å—`æ˜¯æˆ‘ä»¬çš„æ ¹æ¨¡å—,ä»–ç®¡ç†æ•´ä¸ªå•é¡µé¢åº”ç”¨ä¸­æ¶‰åŠåˆ°çš„`å…¶ä»–æ¨¡å—`å’Œ`ç»„ä»¶`ã€‚æˆ‘ä»¬æ¥ç†Ÿæ‚‰ä¸€ä¸‹app.module.tsè¿™ä¸ªæ ¹æ¨¡å—æ–‡ä»¶ã€‚\n\n![image-20230727204415551](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230727204415551.png)\n\n> @NgModuleæ˜¯ Angularä¸­çš„è£…é¥°å™¨ï¼Œæ˜¯éœ€è¦ä»'@angular/core'å¯¼å…¥è¿›æ¥ ä½œç”¨ï¼š å¸®åŠ©å¼€å‘è€…ç»„ç»‡ä¸šåŠ¡ä»£ç ï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨ NgModule æŠŠå…³ç³»æ¯”è¾ƒç´§å¯†çš„ç»„ä»¶ç»„ç»‡åˆ°ä¸€èµ·ï¼Œä»–ä¸ä»…å¯ä»¥æ§åˆ¶ç»„ä»¶ï¼Œè¿˜å¯ä»¥æ§åˆ¶æŒ‡ä»¤ï¼Œç®¡é“ç­‰\n\n**declarations**ï¼šç”¨æ¥æ”¾`ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“`çš„å£°æ˜ï¼Œ ç»„ä»¶ã€æŒ‡ä»¤ã€ç®¡é“éƒ½å¿…é¡»å±äºä¸€ä¸ªæ¨¡å—ï¼Œè€Œä¸”åªèƒ½å±äº`ä¸€ä¸ª`æ¨¡å—ã€‚\n\n**imports**ï¼šç”¨æ¥å¯¼å…¥`å¤–éƒ¨æ¨¡å—`è€Œéç»„ä»¶ã€‚\n\n**exports**: æˆ‘ä»¬è¿™ä¸ªæ¨¡å—éœ€è¦å¯¼å‡ºçš„ä¸€äº›`ç»„ä»¶,æŒ‡ä»¤,æ¨¡å—`ç­‰; å¦‚æœåˆ«çš„æ¨¡å—å¯¼å…¥äº†æˆ‘ä»¬è¿™ä¸ªæ¨¡å—,é‚£ä¹ˆåˆ«çš„æ¨¡å—å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬åœ¨è¿™é‡Œå¯¼å‡ºçš„ç»„ä»¶,æŒ‡ä»¤,æ¨¡å—ç­‰.\n\n**providers**ï¼šéœ€è¦ä½¿ç”¨çš„`Service`éƒ½æ”¾åœ¨è¿™é‡Œã€‚æŒ‡å®šåº”ç”¨ç¨‹åºçš„æ ¹çº§åˆ«éœ€è¦ä½¿ç”¨çš„service\n\n**bootstrap**ï¼šå®šä¹‰å¯åŠ¨ç»„ä»¶ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°äº†è¿™ä¸ªé…ç½®é¡¹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æŒ‡å®šè¿™ä¸ªç»„ä»¶ä½œä¸ºå¯åŠ¨ç‚¹ã€‚ä¸€èˆ¬è¿™é‡Œä¸éœ€è¦åšæ”¹åŠ¨ã€‚\n\n## Hello Worldä»¥åŠç»„ä»¶è®²è§£\n\né¦–å…ˆæˆ‘ä»¬å…ˆå°†app.component.htmlä¸­çš„å†…å®¹å…¨éƒ¨æ¸…ç©ºï¼Œä¸ºæˆ‘ä»¬æ¥ä¸‹æ¥çš„ç»„ä»¶å­¦ä¹ åšå‡†å¤‡ã€‚\n\n**1. åœ¨appæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªç»„ä»¶æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºhello-world.component.ts**\n\n![image-20230727205557462](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230727205557462.png)\nä»ä¸Šå›¾ç‰‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ç»„ä»¶çš„ç»„æˆæœ‰ä»¥ä¸‹ä¸‰éƒ¨åˆ†ç»„æˆï¼š\n\n- **ç±»** ï¼ˆç±»åçš„å‘½åæ˜¯æ ¹æ®ç»„ä»¶çš„æ–‡ä»¶åæ¥å†³å®šçš„ï¼Œé¦–å­—æ¯å¤§å†™çš„é©¼å³°å‘½åæ–¹å¼ï¼‰\n- **è£…é¥°å™¨@component**, éœ€è¦ä»'@angular/core'ä¸­å¯¼å…¥ï¼Œå…¶ä½œç”¨æ˜¯æŠŠæŸä¸ªç±»æ ‡è®°ä¸ºAngularç»„ä»¶ï¼Œå¹¶ä¸ºä»–é…ç½®ä¸€äº›å…ƒæ•°æ®ï¼Œç›®å‰è¿™é‡Œåªæ¶‰åŠåˆ°3ä¸ªå…ƒæ•°æ®ï¼Œå…¶ä¸­`selector`ä¹Ÿç§°ä½œæ˜¯é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–ç†è§£æˆæˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶çš„åå­—ï¼Œä¸€èˆ¬ä»–çš„å‘½åä¹Ÿæ˜¯`app-ç»„ä»¶æ–‡ä»¶`çš„åå­—ï¼Œæ›´å¤šçš„å…ƒæ•°æ®åº”ç”¨å¯ä»¥å‚ç…§å®˜ç½‘ã€‚\n- **HTMLæ¨¡æ¿**ï¼Œå°±æ˜¯templateã€‚\n\n**2. ä¸Šè¾¹å·²ç»æåˆ°ï¼Œç»„ä»¶å¿…é¡»åœ¨æ¨¡å—ä¸­å£°æ˜æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘åœ¨æ ¹æ¨¡å—å£°æ˜ä¸€ä¸‹**\n\n![image-20230727205626396](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230727205626396.png)\n**3. æˆ‘ä»¬å°†å®šä¹‰å¥½çš„ç»„ä»¶åœ¨appçš„htmlä¸­å¼•ç”¨ä¸€ä¸‹**\n\n![image-20230727205659084](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230727205659084.png)\n\n> è¿™ä¸ªæ—¶å€™é¡µé¢ä¸Šå·²ç»å¯ä»¥å®Œç¾çš„å±•ç°å‡º hello worldäº†ï¼Œè¿™æ ·ä¸€ä¸ªç®€å•çš„ç»„ä»¶ä¹Ÿå°±å°è£…å¥½äº†ã€‚\n","tags":["Angular"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"äº†è§£ä¸€ç‚¹rtspåè®®","url":"/2023/07/25/äº†è§£ä¸€ç‚¹rtspåè®®/","content":"\n## ç®€ä»‹\n\nä»¥ä¸‹å–è‡ªç™¾åº¦ç™¾ç§‘\n\n> å®æ—¶æµ[ä¼ è¾“åè®®](https://baike.baidu.com/item/ä¼ è¾“åè®®/8048821?fromModule=lemma_inlink)ï¼ˆReal Time [Streaming](https://baike.baidu.com/item/Streaming/3790847?fromModule=lemma_inlink) Protocolï¼ŒRTSPï¼‰ï¼ŒRFC2326ï¼ˆä¸­æ–‡ç‰ˆï¼‰ï¼Œæ˜¯[TCP/IPåè®®](https://baike.baidu.com/item/TCP/IPåè®®/212915?fromModule=lemma_inlink)ä½“ç³»ä¸­çš„ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼Œç”±å“¥ä¼¦æ¯”äºšå¤§å­¦ã€[ç½‘æ™¯](https://baike.baidu.com/item/ç½‘æ™¯/70176?fromModule=lemma_inlink)å’Œ[RealNetworks](https://baike.baidu.com/item/RealNetworks/1987003?fromModule=lemma_inlink)å…¬å¸æäº¤çš„IETF RFCæ ‡å‡†ã€‚è¯¥åè®®å®šä¹‰äº†[ä¸€å¯¹å¤š](https://baike.baidu.com/item/ä¸€å¯¹å¤š/1327103?fromModule=lemma_inlink)[åº”ç”¨ç¨‹åº](https://baike.baidu.com/item/åº”ç”¨ç¨‹åº/5985445?fromModule=lemma_inlink)å¦‚ä½•æœ‰æ•ˆåœ°é€šè¿‡IPç½‘ç»œä¼ é€å¤šåª’ä½“æ•°æ®ã€‚RTSPåœ¨[ä½“ç³»ç»“æ„](https://baike.baidu.com/item/ä½“ç³»ç»“æ„/8174145?fromModule=lemma_inlink)ä¸Šä½äº[RTP](https://baike.baidu.com/item/RTP/8974125?fromModule=lemma_inlink)å’ŒR[TCP](https://baike.baidu.com/item/TCP/33012?fromModule=lemma_inlink)ä¹‹ä¸Šï¼Œå®ƒä½¿ç”¨TCPæˆ–[UDP](https://baike.baidu.com/item/UDP/571511?fromModule=lemma_inlink)å®Œæˆ[æ•°æ®ä¼ è¾“](https://baike.baidu.com/item/æ•°æ®ä¼ è¾“/2987565?fromModule=lemma_inlink)ã€‚[HTTP](https://baike.baidu.com/item/HTTP/243074?fromModule=lemma_inlink)ä¸RTSPç›¸æ¯”ï¼Œ[HTTPè¯·æ±‚](https://baike.baidu.com/item/HTTPè¯·æ±‚/10882159?fromModule=lemma_inlink)ç”±[å®¢æˆ·æœº](https://baike.baidu.com/item/å®¢æˆ·æœº/5168153?fromModule=lemma_inlink)å‘å‡ºï¼ŒæœåŠ¡å™¨ä½œå‡ºå“åº”ï¼›ä½¿ç”¨RTSPæ—¶ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å‘å‡ºè¯·æ±‚ï¼Œå³RTSPå¯ä»¥æ˜¯åŒå‘çš„ã€‚RTSPæ˜¯ç”¨æ¥æ§åˆ¶å£°éŸ³æˆ–å½±åƒçš„å¤šåª’ä½“ä¸²æµåè®®ï¼Œå¹¶å…è®¸åŒæ—¶å¤šä¸ªä¸²æµéœ€æ±‚æ§åˆ¶ï¼Œä¼ è¾“æ—¶æ‰€ç”¨çš„ç½‘ç»œé€šè®¯åå®šå¹¶ä¸åœ¨å…¶å®šä¹‰çš„èŒƒå›´å†…ï¼Œ[æœåŠ¡å™¨ç«¯](https://baike.baidu.com/item/æœåŠ¡å™¨ç«¯/3369401?fromModule=lemma_inlink)å¯ä»¥è‡ªè¡Œé€‰æ‹©ä½¿ç”¨TCPæˆ–UDPæ¥ä¼ é€ä¸²æµå†…å®¹ï¼Œå®ƒçš„è¯­æ³•å’Œè¿ä½œè·ŸHTTP 1.1ç±»ä¼¼ï¼Œä½†å¹¶ä¸ç‰¹åˆ«å¼ºè°ƒ[æ—¶é—´åŒæ­¥](https://baike.baidu.com/item/æ—¶é—´åŒæ­¥/1810349?fromModule=lemma_inlink)ï¼Œæ‰€ä»¥æ¯”è¾ƒèƒ½å®¹å¿[ç½‘ç»œå»¶è¿Ÿ](https://baike.baidu.com/item/ç½‘ç»œå»¶è¿Ÿ/10680325?fromModule=lemma_inlink)ã€‚è€Œå‰é¢æåˆ°çš„å…è®¸åŒæ—¶å¤šä¸ªä¸²æµéœ€æ±‚æ§åˆ¶ï¼ˆMulticastï¼‰ï¼Œé™¤äº†å¯ä»¥é™ä½æœåŠ¡å™¨ç«¯çš„ç½‘ç»œç”¨é‡ï¼Œæ›´è¿›è€Œæ”¯æŒå¤šæ–¹è§†è®¯ä¼šè®®ï¼ˆVideo Conferenceï¼‰ã€‚å› ä¸ºä¸[HTTP1.1](https://baike.baidu.com/item/HTTP1.1/9636659?fromModule=lemma_inlink)çš„è¿ä½œæ–¹å¼ç›¸ä¼¼ï¼Œæ‰€ä»¥[ä»£ç†æœåŠ¡å™¨](https://baike.baidu.com/item/ä»£ç†æœåŠ¡å™¨/97996?fromModule=lemma_inlink)ã€ˆ[Proxy](https://baike.baidu.com/item/Proxy/612388?fromModule=lemma_inlink)ã€‰çš„å¿«å–åŠŸèƒ½ã€ˆCacheã€‰ä¹ŸåŒæ ·é€‚ç”¨äºRTSPï¼Œå¹¶å› RTSPå…·æœ‰é‡æ–°å¯¼å‘åŠŸèƒ½ï¼Œå¯è§†å®é™…è´Ÿè½½æƒ…å†µæ¥è½¬æ¢æä¾›æœåŠ¡çš„æœåŠ¡å™¨ï¼Œä»¥é¿å…è¿‡å¤§çš„è´Ÿè½½é›†ä¸­äºåŒä¸€æœåŠ¡å™¨è€Œé€ æˆå»¶è¿Ÿã€‚\n\nå¯ä»¥ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è®²ï¼Œä½ åœ¨è§‚çœ‹èŠ‚ç›®çš„æ—¶å€™ï¼Œå¯ä»¥éšæ„çš„åé€€æš‚åœï¼Œä¹Ÿå¯ä»¥è‡ªå·±æƒ³çœ‹ä»€ä¹ˆå°±çœ‹ä»€ä¹ˆï¼Œä¸ç”¨åŠ å…¥åˆ«äººçš„ç»„ï¼Œæ•´ä¸ªèµ„æºéƒ½è¢«ä½ ä¸€ä¸ªäººäº«ç”¨ã€‚å°±å’Œä½ å¹³æ—¶çœ‹çˆ±å¥‡è‰ºï¼ŒBç«™ä»€ä¹ˆçš„æ²¡åŒºåˆ«ã€‚\n\n## RTSPæ–¹æ³•\n\nRTSPå¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬ï¼šOPTIONSã€DESCRIBEã€ANNOUNCEã€SETUPã€TEARDOWNã€PLAYã€PAUSEã€GET_PARAMETERå’ŒSET_PARAMETERç­‰ã€‚è¯¦ç»†ä½¿ç”¨ä»‹ç»å¦‚ä¸‹ï¼š\nRTSPæ–¹æ³•\n\n| æ–¹æ³•          | æ–¹å‘     | å¯¹è±¡ | è¦æ±‚ | å«ä¹‰                                                         |\n| ------------- | -------- | ---- | ---- | ------------------------------------------------------------ |\n| DESCRIBE      | C->S     | Pï¼ŒS | æ¨è | æ£€æŸ¥æ¼”ç¤ºæˆ–åª’ä½“å¯¹è±¡çš„æè¿°ï¼Œä¹Ÿå…è®¸ä½¿ç”¨æ¥æ”¶å¤´æŒ‡å®šç”¨æˆ·ç†è§£çš„æè¿°æ ¼å¼ã€‚DESCRIBEçš„ç­”å¤-å“åº”ç»„æˆåª’ä½“RTSPåˆå§‹é˜¶æ®µ |\n| ANNOUNCE      | C->SS->C | Pï¼ŒS | å¯é€‰ | å½“ä»ç”¨æˆ·å‘å¾€æœåŠ¡å™¨æ—¶ï¼ŒANNOUNCEå°†è¯·æ±‚URLè¯†åˆ«çš„æ¼”ç¤ºæˆ–åª’ä½“å¯¹è±¡æè¿°å‘é€ç»™æœåŠ¡å™¨ï¼›åä¹‹ï¼ŒANNOUNCEå®æ—¶æ›´æ–°è¿æ¥æè¿°ã€‚å¦‚æ–°åª’ä½“æµåŠ å…¥æ¼”ç¤ºï¼Œæ•´ä¸ªæ¼”ç¤ºæè¿°å†æ¬¡å‘é€ï¼Œè€Œä¸ä»…ä»…æ˜¯é™„åŠ ç»„ä»¶ï¼Œä½¿ç»„ä»¶èƒ½è¢«åˆ é™¤ |\n| GET_PARAMETER | C->SS->C | Pï¼ŒS | å¯é€‰ | GET_PARAMETERè¯·æ±‚æ£€æŸ¥URLæŒ‡å®šçš„æ¼”ç¤ºä¸åª’ä½“çš„å‚æ•°å€¼ã€‚æ²¡æœ‰å®ä½“ä½“æ—¶ï¼ŒGET_PARAMETERä¹Ÿè®¸èƒ½ç”¨æ¥æµ‹è¯•ç”¨æˆ·ä¸æœåŠ¡å™¨çš„è¿é€šæƒ…å†µ |\n| OPTIONS       | C->SS->C | Pï¼ŒS | è¦æ±‚ | å¯åœ¨ä»»æ„æ—¶åˆ»å‘å‡ºOPTIONSè¯·æ±‚ï¼Œå¦‚ç”¨æˆ·æ‰“ç®—å°è¯•éæ ‡å‡†è¯·æ±‚ï¼Œå¹¶ä¸å½±å“æœåŠ¡å™¨çŠ¶æ€ |\n| PAUSE         | C->S     | Pï¼ŒS | æ¨è | PAUSEè¯·æ±‚å¼•èµ·æµå‘é€ä¸´æ—¶ä¸­æ–­ã€‚å¦‚è¯·æ±‚URLå‘½åä¸€ä¸ªæµï¼Œä»…å›æ”¾å’Œè®°å½•è¢«åœæ­¢ï¼›å¦‚è¯·æ±‚URLå‘½åä¸€ä¸ªæ¼”ç¤ºæˆ–æµç»„ï¼Œæ¼”ç¤ºæˆ–ç»„ä¸­æ‰€æœ‰å½“å‰æ´»åŠ¨çš„æµå‘é€éƒ½åœæ­¢ã€‚æ¢å¤å›æ”¾æˆ–è®°å½•åï¼Œå¿…é¡»ç»´æŒåŒæ­¥ã€‚åœ¨SETUPæ¶ˆæ¯ä¸­è¿æ¥å¤´è¶…æ—¶å‚æ•°æ‰€æŒ‡å®šæ—¶æ®µæœŸé—´è¢«æš‚åœåï¼Œå°½ç®¡æœåŠ¡å™¨å¯èƒ½å…³é—­è¿æ¥å¹¶é‡Šæ”¾èµ„æºï¼Œä½†æœåŠ¡å™¨èµ„æºä¼šè¢«é¢„è®¢ |\n| PLAY          | C->S     | Pï¼ŒS | è¦æ±‚ | PLAYå‘Šè¯‰æœåŠ¡å™¨ä»¥SETUPæŒ‡å®šçš„æœºåˆ¶å¼€å§‹å‘é€æ•°æ®ï¼›ç›´åˆ°ä¸€äº›SETUPè¯·æ±‚è¢«æˆåŠŸå“åº”ï¼Œå®¢æˆ·ç«¯æ‰å¯å‘å¸ƒPLAYè¯·æ±‚ã€‚PLAYè¯·æ±‚å°†æ­£å¸¸æ’­æ”¾æ—¶é—´è®¾ç½®åœ¨æ‰€æŒ‡å®šèŒƒå›´çš„èµ·å§‹å¤„ï¼Œå‘é€æµæ•°æ®ç›´åˆ°èŒƒå›´çš„ç»“æŸå¤„ã€‚PLAYè¯·æ±‚å¯æ’æˆé˜Ÿåˆ—ï¼ŒæœåŠ¡å™¨å°†PLAYè¯·æ±‚æ’æˆé˜Ÿåˆ—ï¼Œé¡ºåºæ‰§è¡Œ |\n| RECORD        | C->S     | Pï¼ŒS | å¯é€‰ | è¯¥æ–¹æ³•æ ¹æ®æ¼”ç¤ºæè¿°åˆå§‹åŒ–åª’ä½“æ•°æ®è®°å½•èŒƒå›´ï¼Œæ—¶æ ‡åæ˜ å¼€å§‹å’Œç»“æŸæ—¶é—´ï¼›å¦‚æ²¡æœ‰ç»™å‡ºæ—¶é—´èŒƒå›´ï¼Œä½¿ç”¨æ¼”ç¤ºæè¿°æä¾›çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ã€‚å¦‚è¿æ¥å·²ç»å¯åŠ¨ï¼Œç«‹å³å¼€å§‹è®°å½•ï¼ŒæœåŠ¡å™¨æ•°æ®è¯·æ±‚URLæˆ–å…¶ä»–URLå†³å®šæ˜¯å¦å­˜å‚¨è®°å½•çš„æ•°æ®ï¼›å¦‚æœåŠ¡å™¨æ²¡æœ‰ä½¿ç”¨URLè¯·æ±‚ï¼Œå“åº”åº”ä¸º201ï¼ˆåˆ›å»ºï¼‰ï¼Œå¹¶åŒ…å«æè¿°è¯·æ±‚çŠ¶æ€å’Œå‚è€ƒæ–°èµ„æºçš„å®ä½“ä¸ä½ç½®å¤´ã€‚æ”¯æŒç°åœºæ¼”ç¤ºè®°å½•çš„åª’ä½“æœåŠ¡å™¨å¿…é¡»æ”¯æŒæ—¶é’ŸèŒƒå›´æ ¼å¼ï¼Œsmpteæ ¼å¼æ²¡æœ‰æ„ä¹‰ |\n| REDIRECT      | S->C     | Pï¼ŒS | å¯é€‰ | é‡å®šå‘è¯·æ±‚é€šçŸ¥å®¢æˆ·ç«¯è¿æ¥åˆ°å¦ä¸€æœåŠ¡å™¨åœ°å€ã€‚å®ƒåŒ…å«å¼ºåˆ¶å¤´åœ°å€ï¼ŒæŒ‡ç¤ºå®¢æˆ·ç«¯å‘å¸ƒURLè¯·æ±‚ï¼›ä¹Ÿå¯èƒ½åŒ…æ‹¬å‚æ•°èŒƒå›´ï¼Œä»¥æŒ‡æ˜é‡å®šå‘ä½•æ—¶ç”Ÿæ•ˆã€‚è‹¥å®¢æˆ·ç«¯è¦ç»§ç»­å‘é€æˆ–æ¥æ”¶URLåª’ä½“ï¼Œå®¢æˆ·ç«¯å¿…é¡»å¯¹å½“å‰è¿æ¥å‘é€TEARDOWNè¯·æ±‚ï¼Œè€Œå¯¹æŒ‡å®šä¸»æ‰§æ–°è¿æ¥å‘é€SETUPè¯·æ±‚ |\n| SETUP         | C->S     | S    | è¦æ±‚ | å¯¹URLçš„SETUPè¯·æ±‚æŒ‡å®šç”¨äºæµåª’ä½“çš„ä¼ è¾“æœºåˆ¶ã€‚å®¢æˆ·ç«¯å¯¹æ­£æ’­æ”¾çš„æµå‘å¸ƒä¸€ä¸ªSETUPè¯·æ±‚ï¼Œä»¥æ”¹å˜æœåŠ¡å™¨å…è®¸çš„ä¼ è¾“å‚æ•°ã€‚å¦‚ä¸å…è®¸è¿™æ ·åšï¼Œå“åº”é”™è¯¯ä¸º\"455 Method Not Valid In This Stateâ€ã€‚ä¸ºäº†é€è¿‡é˜²ç«å¢™ï¼Œå®¢æˆ·ç«¯å¿…é¡»æŒ‡æ˜ä¼ è¾“å‚æ•°ï¼Œå³ä½¿å¯¹è¿™äº›å‚æ•°æ²¡æœ‰å½±å“ |\n| SET_PARAMETER | C->SS->C | Pï¼ŒS | å¯é€‰ | è¿™ä¸ªæ–¹æ³•è¯·æ±‚è®¾ç½®æ¼”ç¤ºæˆ–URLæŒ‡å®šæµçš„å‚æ•°å€¼ã€‚è¯·æ±‚ä»…åº”åŒ…å«å•ä¸ªå‚æ•°ï¼Œå…è®¸å®¢æˆ·ç«¯å†³å®šæŸä¸ªç‰¹æ®Šè¯·æ±‚ä¸ºä½•å¤±è´¥ã€‚å¦‚è¯·æ±‚åŒ…å«å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰å‚æ•°å¯æˆåŠŸè®¾ç½®ï¼ŒæœåŠ¡å™¨å¿…é¡»åªå¯¹è¯¥è¯·æ±‚èµ·ä½œç”¨ã€‚æœåŠ¡å™¨å¿…é¡»å…è®¸å‚æ•°å¯é‡å¤è®¾ç½®æˆåŒä¸€å€¼ï¼Œä½†ä¸è®©æ”¹å˜å‚æ•°å€¼ã€‚æ³¨æ„ï¼šåª’ä½“æµä¼ è¾“å‚æ•°å¿…é¡»ç”¨SETUPå‘½ä»¤è®¾ç½®ã€‚å°†è®¾ç½®ä¼ è¾“å‚æ•°é™åˆ¶ä¸ºSETUPæœ‰åˆ©äºé˜²ç«å¢™ã€‚å°†å‚æ•°åˆ’åˆ†æˆè§„åˆ™æ’åˆ—å½¢å¼ï¼Œç»“æœæœ‰æ›´å¤šæœ‰æ„ä¹‰çš„é”™è¯¯æŒ‡ç¤º |\n| TEARDOWN      | C->S     | Pï¼ŒS | è¦æ±‚ | TEARDOWNè¯·æ±‚åœæ­¢ç»™å®šURLæµå‘é€ï¼Œé‡Šæ”¾ç›¸å…³èµ„æºã€‚å¦‚URLæ˜¯æ­¤æ¼”ç¤ºURLï¼Œä»»ä½•RTSPè¿æ¥æ ‡è¯†ä¸å†æœ‰æ•ˆã€‚é™¤éå…¨éƒ¨ä¼ è¾“å‚æ•°æ˜¯è¿æ¥æè¿°å®šä¹‰çš„ï¼ŒSETUPè¯·æ±‚å¿…é¡»åœ¨è¿æ¥å¯å†æ¬¡æ’­æ”¾å‰å‘å¸ƒ |\n\n## RTSPæŠ¥æ–‡è§£æ\n\nRTSPæœ‰ä¸¤ç±»æŠ¥æ–‡ï¼š**è¯·æ±‚æŠ¥æ–‡**å’Œ**å“åº”æŠ¥æ–‡**ã€‚è¯·æ±‚æŠ¥æ–‡æ˜¯æŒ‡ä»å®¢æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æŠ¥æ–‡ï¼Œå“åº”æŠ¥æ–‡æ˜¯æŒ‡ä»æœåŠ¡å™¨åˆ°å®¢æˆ·çš„åº”ç­”ã€‚RTSPæŠ¥æ–‡ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå³å¼€å§‹è¡Œã€é¦–éƒ¨è¡Œå’Œå®ä½“ä¸»ä½“ã€‚\n\n### 1ã€è¯·æ±‚æŠ¥æ–‡\n\nåœ¨è¯·æ±‚æŠ¥æ–‡ä¸­ï¼Œå¼€å§‹è¡Œå°±æ˜¯è¯·æ±‚è¡Œï¼ŒRTSPè¯·æ±‚æŠ¥æ–‡çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image-20230725174141886](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20190929143502463.jpg)\n\n### 2ã€å“åº”æŠ¥æ–‡\n\nå“åº”æŠ¥æ–‡çš„å¼€å§‹è¡Œæ˜¯çŠ¶æ€è¡Œï¼ŒRTSPå“åº”æŠ¥æ–‡çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![20190929143610233](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20190929143610233.jpg)\n","tags":["rtsp"],"categories":["è®¡ç®—æœºç½‘ç»œ"]},{"title":"elasticsearchåŸºç¡€","url":"/2023/07/23/elasticsearchåŸºç¡€/","content":"\n## æ¦‚è¿°\n\nElaticsearchï¼Œç®€ç§°ä¸ºesï¼Œ esæ˜¯ä¸€ä¸ªå¼€æºçš„é«˜æ‰©å±•çš„åˆ†å¸ƒå¼å…¨æ–‡æ£€ç´¢å¼•æ“ï¼Œå®ƒå¯ä»¥è¿‘ä¹å®æ—¶çš„å­˜å‚¨ã€æ£€ç´¢æ•°æ®ï¼›æœ¬èº«æ‰©å±•æ€§å¾ˆå¥½ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤„ç†PBçº§åˆ«çš„æ•°æ®ã€‚esä¹Ÿä½¿ç”¨Javaå¼€å‘å¹¶ä½¿ç”¨ `Lucene` ä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„ **RESTful API** æ¥éšè— Lucene çš„å¤æ‚æ€§ï¼Œä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚\n\næ®å›½é™…æƒå¨çš„æ•°æ®åº“äº§å“è¯„æµ‹æœºæ„ DB Engines çš„ç»Ÿè®¡ï¼Œåœ¨2016å¹´1æœˆï¼ŒElasticSearchå·²è¶…è¿‡Solrç­‰ï¼Œæˆä¸ºæ’åç¬¬ä¸€çš„æœç´¢å¼•æ“ç±»åº”ç”¨ã€‚\n\n### Solr ç®€ä»‹\n\nâ€‹        Solr æ˜¯ Apache ä¸‹çš„ä¸€ä¸ªé¡¶çº§å¼€æºé¡¹ç›®ï¼Œé‡‡ç”¨Javaå¼€å‘ï¼Œå®ƒæ˜¯åŸºäº Lucene çš„å…¨æ–‡æœç´¢æœåŠ¡å™¨ã€‚Solræä¾›äº†æ¯” Lucene æ›´ä¸ºä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€ï¼ŒåŒæ—¶å®ç°äº†å¯é…ç½®ã€å¯æ‰©å±•ï¼Œå¹¶å¯¹ç´¢å¼•ã€æœç´¢æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ã€‚\n\nâ€‹        Solrå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œè¿è¡Œåœ¨Jettyã€Tomcat ç­‰è¿™äº›Servletå®¹å™¨ä¸­ï¼ŒSolr ç´¢å¼•çš„å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œç”¨ POST  æ–¹æ³•å‘ Solr æœåŠ¡å™¨å‘é€ä¸€ä¸ªæè¿° Field åŠå…¶å†…å®¹çš„ XML æ–‡æ¡£ï¼ŒSolræ ¹æ® xml æ–‡æ¡£æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°ç´¢å¼•ã€‚Solr  æœç´¢åªéœ€è¦å‘é€ HTTP GET è¯·æ±‚ï¼Œç„¶åå¯¹ Solr  è¿”å›Xmlã€jsonç­‰æ ¼å¼çš„æŸ¥è¯¢ç»“æœè¿›è¡Œè§£æï¼Œç»„ç»‡é¡µé¢å¸ƒå±€ã€‚Solrä¸æä¾›æ„å»ºUIçš„åŠŸèƒ½ï¼ŒSolræä¾›äº†ä¸€ä¸ªç®¡ç†ç•Œé¢ï¼Œé€šè¿‡ç®¡ç†ç•Œé¢å¯ä»¥æŸ¥è¯¢Solrçš„é…ç½®å’Œè¿è¡Œæƒ…å†µã€‚\n\nâ€‹        Solræ˜¯åŸºäº lucene å¼€å‘ä¼ä¸šçº§æœç´¢æœåŠ¡å™¨ï¼Œå®é™…ä¸Šå°±æ˜¯å°è£…äº†luceneã€‚\n\nâ€‹        Solræ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¼ä¸šçº§æœç´¢åº”ç”¨æœåŠ¡å™¨ï¼Œå®ƒå¯¹å¤–æä¾›ç±»ä¼¼äºWeb-serviceçš„APIæ¥å£ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡httpè¯·æ±‚ï¼Œå‘æœç´¢å¼•æ“æœåŠ¡å™¨æäº¤ä¸€å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œç”Ÿæˆç´¢å¼•ï¼›ä¹Ÿå¯ä»¥é€šè¿‡æå‡ºæŸ¥æ‰¾è¯·æ±‚ï¼Œå¹¶å¾—åˆ°è¿”å›ç»“æœã€‚\n\n## ESçš„æ ¸å¿ƒæ¦‚å¿µ\n\nElasticSearch æ˜¯é¢å‘æ–‡æ¡£çš„**éå…³ç³»å‹æ•°æ®åº“**ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä¸**å…³ç³»å‹æ•°æ®åº“**çš„å®¢è§‚å¯¹æ¯”ï¼\n\nelasticsearch(é›†ç¾¤)ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(æ•°æ®åº“)ï¼Œæ¯ä¸ªç´¢å¼•ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹(è¡¨)ï¼Œæ¯ä¸ªç±»å‹ä¸‹åˆåŒ…å«å¤šä¸ªæ–‡æ¡£(è¡Œ)ï¼Œæ¯ä¸ªæ–‡æ¡£ä¸­åˆåŒ…å«å¤šä¸ªå­—æ®µ(åˆ—)\n\n**ç‰©ç†è®¾è®¡ï¼š**\n\nelasticsearch åœ¨åå°æŠŠæ¯ä¸ªç´¢å¼•åˆ’åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä»½åˆ†ç‰‡å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒæœåŠ¡å™¨é—´è¿ç§»\n\n**é€»è¾‘è®¾è®¡ï¼š**\n\n ä¸€ä¸ªç´¢å¼•ç±»å‹ä¸­ï¼ŒåŒ…å«å¤šä¸ªæ–‡æ¡£ï¼Œæ¯”å¦‚è¯´æ–‡æ¡£1ï¼Œæ–‡æ¡£2ã€‚ å½“æˆ‘ä»¬ç´¢å¼•ä¸€ç¯‡æ–‡æ¡£æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™æ ·çš„ä¸€ä¸ªé¡ºåºæ‰¾åˆ° å®ƒ: ç´¢å¼• â–· ç±»å‹ â–· æ–‡æ¡£ID ï¼Œé€šè¿‡è¿™ä¸ªç»„åˆæˆ‘ä»¬å°±èƒ½ç´¢å¼•åˆ°æŸä¸ªå…·ä½“çš„æ–‡æ¡£ã€‚ æ³¨æ„ : IDä¸å¿…æ˜¯æ•´æ•°ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚\n\n### **æ–‡æ¡£**\n\nä¹‹å‰è¯´ elasticsearch æ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ç´¢å¼•å’Œæœç´¢æ•°æ®çš„æœ€å°å•ä½æ˜¯æ–‡æ¡£ï¼Œelasticsearch ä¸­ï¼Œæ–‡æ¡£æœ‰å‡ ä¸ª **é‡è¦å±æ€§** :\n\n- è‡ªæˆ‘åŒ…å«ï¼Œä¸€ç¯‡æ–‡æ¡£åŒæ—¶åŒ…å«å­—æ®µå’Œå¯¹åº”çš„å€¼ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åŒ…å« key:valueï¼\n- å¯ä»¥æ˜¯å±‚æ¬¡å‹çš„ï¼Œä¸€ä¸ªæ–‡æ¡£ä¸­åŒ…å«è‡ªæ–‡æ¡£ï¼Œå¤æ‚çš„é€»è¾‘å®ä½“å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼å…¶å®å°±æ˜¯ä¸ªJSONå¯¹è±¡\n- çµæ´»çš„ç»“æ„ï¼Œæ–‡æ¡£ä¸ä¾èµ–é¢„å…ˆå®šä¹‰çš„æ¨¡å¼ï¼Œæˆ‘ä»¬çŸ¥é“å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¦æå‰å®šä¹‰å­—æ®µæ‰èƒ½ä½¿ç”¨ï¼Œåœ¨ elasticsearch ä¸­ï¼Œå¯¹äºå­—æ®µæ˜¯éå¸¸çµæ´»çš„ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥è¯¥å­—æ®µï¼Œæˆ–è€…åŠ¨æ€çš„æ·»åŠ ä¸€ä¸ªæ–°çš„å­—æ®µã€‚\n\nå°½ç®¡æˆ‘ä»¬å¯ä»¥éšæ„çš„æ–°å¢æˆ–è€…å¿½ç•¥æŸä¸ªå­—æ®µï¼Œä½†æ˜¯ï¼Œæ¯ä¸ªå­—æ®µçš„ç±»å‹éå¸¸é‡è¦ï¼Œæ¯”å¦‚ä¸€ä¸ªå¹´é¾„å­—æ®µç±»å‹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ•´å½¢ã€‚å› ä¸º  elasticsearch ä¼šä¿å­˜å­—æ®µå’Œç±»å‹ä¹‹é—´çš„æ˜ å°„åŠå…¶ä»–çš„è®¾ç½®ã€‚è¿™ç§æ˜ å°„å…·ä½“åˆ°æ¯ä¸ªæ˜ å°„çš„æ¯ç§ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ elasticsearch ä¸­ï¼Œç±»å‹æœ‰æ—¶å€™ä¹Ÿç§°ä¸º**æ˜ å°„ç±»å‹**ã€‚\n\n### **ç±»å‹**\n\nç±»å‹æ˜¯æ–‡æ¡£çš„é€»è¾‘å®¹å™¨ï¼Œå°±åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·ï¼Œè¡¨æ ¼æ˜¯è¡Œçš„å®¹å™¨ã€‚ ç±»å‹ä¸­å¯¹äºå­—æ®µçš„å®šä¹‰ç§°ä¸ºæ˜ å°„ï¼Œæ¯”å¦‚ name æ˜  å°„ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚  æˆ‘ä»¬è¯´æ–‡æ¡£æ˜¯æ— æ¨¡å¼çš„ï¼Œå®ƒä»¬ä¸éœ€è¦æ‹¥æœ‰æ˜ å°„ä¸­æ‰€å®šä¹‰çš„æ‰€æœ‰å­—æ®µï¼Œæ¯”å¦‚æ–°å¢ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆ elasticsearch  æ˜¯æ€ä¹ˆåšçš„å‘¢?elasticsearchä¼šè‡ªåŠ¨çš„å°†æ–°å­—æ®µåŠ å…¥æ˜ å°„ï¼Œä½†æ˜¯è¿™ä¸ªå­—æ®µçš„ä¸ç¡®å®šå®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œelasticsearchå°±å¼€å§‹çŒœï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯18ï¼Œé‚£ä¹ˆelasticsearchä¼šè®¤ä¸ºå®ƒæ˜¯æ•´å½¢ã€‚ ä½†æ˜¯elasticsearchä¹Ÿå¯èƒ½çŒœä¸å¯¹ï¼Œ  æ‰€ä»¥æœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯æå‰å®šä¹‰å¥½æ‰€éœ€è¦çš„æ˜ å°„ï¼Œè¿™ç‚¹è·Ÿå…³ç³»å‹æ•°æ®åº“æ®Šé€”åŒå½’äº†ï¼Œå…ˆå®šä¹‰å¥½å­—æ®µï¼Œç„¶åå†ä½¿ç”¨ã€‚ \n\n### **ç´¢å¼•**\n\nç´¢å¼•æ˜¯æ˜ å°„ç±»å‹çš„å®¹å™¨ï¼Œelasticsearch ä¸­çš„ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ–‡æ¡£é›†åˆã€‚ç´¢å¼•å­˜å‚¨äº†æ˜ å°„ç±»å‹çš„å­—æ®µå’Œå…¶ä»–è®¾ç½®ã€‚ ç„¶åå®ƒä»¬è¢«å­˜å‚¨åˆ°äº†å„ä¸ªåˆ†ç‰‡ä¸Šäº†ã€‚ æˆ‘ä»¬æ¥ç ”ç©¶ä¸‹åˆ†ç‰‡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\n**ç‰©ç†è®¾è®¡ ï¼šèŠ‚ç‚¹å’Œåˆ†ç‰‡å¦‚ä½•å·¥ä½œ**\n\nä¸€ä¸ªé›†ç¾¤è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª elasricsearch  è¿›ç¨‹ï¼ŒèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªç´¢å¼•é»˜è®¤çš„ï¼Œå¦‚æœä½ åˆ›å»ºç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•å°†ä¼šæœ‰ä¸ª5ä¸ªåˆ†ç‰‡ ( primary shard ,åˆç§°ä¸»åˆ†ç‰‡ )  æ„æˆçš„ï¼Œæ¯ä¸€ä¸ªä¸»åˆ†ç‰‡ä¼šæœ‰ä¸€ä¸ªå‰¯æœ¬ ( replica shard ,åˆç§°å¤åˆ¶åˆ†ç‰‡ )\n\n### **å€’æ’ç´¢å¼•**\n\nelasticsearch ä½¿ç”¨çš„æ˜¯ä¸€ç§ç§°ä¸º`å€’æ’ç´¢å¼•`çš„ç»“æ„ï¼Œé‡‡ç”¨`Lucene`å€’æ’ç´¢å¼•ä½œä¸ºåº•å±‚ã€‚è¿™ç§ç»“æ„é€‚ç”¨äºå¿«é€Ÿçš„å…¨æ–‡æœç´¢ï¼Œ ä¸€ä¸ªç´¢å¼•ç”±æ–‡æ¡£ä¸­æ‰€æœ‰ä¸é‡å¤çš„åˆ—è¡¨æ„æˆï¼Œå¯¹äºæ¯ä¸€ä¸ªè¯ï¼Œéƒ½æœ‰ä¸€ä¸ªåŒ…å«å®ƒçš„æ–‡æ¡£åˆ—è¡¨ã€‚ ä¾‹å¦‚ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªæ–‡æ¡£ï¼Œ æ¯ä¸ªæ–‡æ¡£åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š\n\n```text\nStudy every day, good good up to forever # æ–‡æ¡£1åŒ…å«çš„å†…å®¹\nTo forever, study every day, good good up # æ–‡æ¡£2åŒ…å«çš„å†…å®¹\n```\n\n## å®‰è£…\n\n### ç›´æ¥å®‰è£…\n\n#### **ä¸Šä¼ å®‰è£…åŒ…åˆ°linuxå¹¶è§£å‹**\n\nâ€‹        æˆ‘çš„ä¹ æƒ¯æ˜¯å°†æ‰€æœ‰çš„è½¯ä»¶åŒ…æ”¾åˆ°`/export/software`ç›®å½•ä¸‹ï¼Œè§£å‹åçš„ç›®å½•æ˜¯`/export/servers`\n\n```text\n[root@node01 software]# tar -zxvf elasticsearch-7.11.0-linux-x86_64.tar.gz -C ../servers/\n```\n\n#### **ç›®å½•ç»“æ„**\n\nâ€‹        è§£å‹å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å…ˆæ¥ç†Ÿæ‚‰esçš„ç›®å½•ç»“æ„\n\n```text\n[root@node01 elasticsearch-7.11.0]# ll /export/servers/elasticsearch-7.11.0\næ€»ç”¨é‡ 556\ndrwxr-xr-x.  2 esuser esuser   4096 2æœˆ   9 06:48 bin\ndrwxr-xr-x.  3 esuser esuser    199 2æœˆ  13 14:44 config\ndrwxr-xr-x.  3 esuser esuser     19 2æœˆ  13 14:15 data\ndrwxr-xr-x.  9 esuser esuser    107 2æœˆ   9 06:48 jdk\ndrwxr-xr-x.  3 esuser esuser   4096 2æœˆ   9 06:48 lib\n-rw-r--r--.  1 esuser esuser   3860 2æœˆ   9 06:41 LICENSE.txt\ndrwxr-xr-x.  2 esuser esuser      6 2æœˆ  13 14:47 logs\ndrwxr-xr-x. 57 esuser esuser   4096 2æœˆ   9 06:49 modules\n-rw-r--r--.  1 esuser esuser 544318 2æœˆ   9 06:46 NOTICE.txt\ndrwxr-xr-x.  2 esuser esuser      6 2æœˆ   9 06:45 plugins\n-rw-r--r--.  1 esuser esuser   7263 2æœˆ   9 06:41 README.asciidoc\n```\n\nâ€‹        å…¶ä¸­æˆ‘ä»¬å¸¸ç”¨çš„ç›®å½•æœ‰ï¼š\n\n- binï¼šå¯æ‰§è¡Œæ–‡ä»¶åœ¨é‡Œé¢ï¼Œè¿è¡Œesçš„å‘½ä»¤å°±åœ¨è¿™ä¸ªé‡Œé¢ï¼ŒåŒ…å«äº†ä¸€äº›è„šæœ¬æ–‡ä»¶ç­‰\n- configï¼šé…ç½®æ–‡ä»¶ç›®å½•\n- JDKï¼šjavaç¯å¢ƒ\n- libï¼šä¾èµ–çš„jarï¼Œç±»åº“\n- logsï¼šæ—¥å¿—æ–‡ä»¶\n- modulesï¼šesç›¸å…³çš„æ¨¡å—\n- pluginsï¼šå¯ä»¥è‡ªå·±å¼€å‘çš„æ’ä»¶\n- dataï¼šè¿™ä¸ªç›®å½•æ²¡æœ‰ï¼Œè‡ªå·±æ–°å»ºä¸€ä¸‹ï¼Œåé¢è¦ç”¨ -> mkdir dataï¼Œè¿™ä¸ªä½œä¸º**ç´¢å¼•ç›®å½•**\n\n#### **ä¿®æ”¹é…ç½®æ–‡ä»¶**\n\nâ€‹        ç†Ÿæ‚‰å®Œesçš„ç›®å½•ï¼Œåœ¨å¯åŠ¨eså‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ä¸€äº›é…ç½®æ–‡ä»¶\n\n#### **æ ¸å¿ƒé…ç½®æ–‡ä»¶ elasticearch.yml**\n\n```text\n[root@node01 elasticsearch-7.11.0]# vim config/elasticsearch.yml\n```\n\n1. ä¿®æ”¹é›†ç¾¤åç§°\n2. ä¿®æ”¹å½“å‰çš„ es èŠ‚ç‚¹åç§°\n3. ä¿®æ”¹dataæ•°æ®ä¿å­˜åœ°å€å’Œæ—¥å¿—æ•°æ®ä¿å­˜åœ°å€\n4. ç»‘å®š es ç½‘ç»œ ip\n5. é›†ç¾¤èŠ‚ç‚¹ä¿®æ”¹ä¸ºä¹‹å‰çš„èŠ‚ç‚¹åç§°\n\n#### ä¿®æ”¹ jvm å‚æ•°\n\nå› ä¸º Elasticsearch æ˜¯ç”¨ **Java** è¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é…ç½®ç¯èŠ‚ä¸€å®šå°‘ä¸äº†ä¿®æ”¹ jvm çš„å‚æ•°\n\n```text\n[root@node01 elasticsearch-7.11.0]# vim config/jvm.options\n```\n\n#### **æ·»åŠ ç”¨æˆ·**\n\næ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œesä¸å…è®¸ä½¿ç”¨ root æ¥æ“ä½œ esï¼Œéœ€è¦æˆ‘ä»¬æ·»åŠ ç”¨æˆ·ï¼Œå…·ä½“çš„å‘½ä»¤å¦‚ä¸‹ï¼š\n\n```text\n# 1. åˆ›å»ºelsearchç”¨æˆ·ç»„åŠelsearchç”¨æˆ·ï¼š\n\ngroupadd elsearch\nuseradd elsearch -g elsearch\npasswd elsearch# æ¥ä¸‹æ¥ä¼šè¾“å…¥ä¸¤æ¬¡å¯†ç \n# new password\n# retype passwd\n\n# 2. åˆ‡æ¢åˆ°elsearchç”¨æˆ·å†å¯åŠ¨\nsu elsearch\n```\n\n### **å¯åŠ¨es**\n\nä¿®æ”¹å®Œä¸Šé¢2ä¸ªé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°`bin`ç›®å½•ä¸‹ï¼Œé€šè¿‡`./elasticsearch`å¯åŠ¨es\n\nä¸å‡ºæ„å¤–ï¼Œåº”è¯¥ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š\n\n```text\nERROR: [3] bootstrap checks failed\n[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]\n[2]: max number of threads [3795] for user [esuser] is too low, increase to at least [4096]\n```\n\næˆ‘ä»¬åªéœ€è¦å°†æœ€å¤§çš„çº¿ç¨‹æ•°è®¾ç½®å¤§ä¸€äº›å³å¯\n\næˆ‘ä»¬åˆ‡æ¢å›åˆ°`root`ç›®å½•\n\n- ä¿®æ”¹`/etc/security/limits.conf`æ–‡ä»¶\n\næ·»åŠ ä»¥ä¸‹å†…å®¹\n\n```text\n* soft nofile 65536\n* hard nofile 131072\n* soft nproc 2048\n* hard nproc 4096\n```\n\nä¿®æ”¹å®Œæˆä¹‹åï¼Œä½¿ç”¨`sysctl -p`å‘½ä»¤åˆ·æ–°ä¸€ä¸‹ï¼Œå†æ¬¡åˆ‡æ¢åˆ° `esuser`è¿›è¡Œå¯åŠ¨å³å¯ã€‚\n\n>  è®°å¾—å°†é˜²ç«å¢™å…³é—­æˆ–è€…å°†9200ç«¯å£æ‰“å¼€ï¼Œå¦åˆ™å°±ä¼šå‡ºç°å¯åŠ¨æˆåŠŸï¼Œé¡µé¢æ— æ³•è®¿é—®çš„æƒ…å†µ\n\n#### **å¯åŠ¨æ–¹å¼1**\n\næˆ‘ä»¬åœ¨`bin`ç›®å½•ä¸‹ç›´æ¥`./elasticsearch`ï¼Œå¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœ\n\n#### **å¯åŠ¨æ–¹å¼2**\n\nåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åç«¯å¯åŠ¨\n\n```text\n[esuser@node01 bin]$ ./elasticsearch -d\n```\n\næ­¤æ—¶ï¼Œå¦‚æœæƒ³å…³é—­æœåŠ¡\n\n```text\n[esuser@node01 bin]$ ps -ef|grep elasticsearch\nesuser     2931   2178  0 15:58 pts/0    00:00:00 grep --color=auto elasticsearch\n```\n\nç„¶åå°†å¯¹åº”çš„è¿›ç¨‹id killæ‰å³å¯ï¼         \n\n### dockerå®‰è£…es\n\né¦–å…ˆåœ¨dockerhubä¸­æ‰¾åˆ°éœ€è¦çš„é•œåƒï¼Œæˆ‘è¿™é‡Œå°±ä»¥8.2.0ç‰ˆæœ¬ä¸ºä¾‹\n\n```shell\n#å°†å‘½ä»¤æ”¾åœ¨Linuxä¸Šæ•²å‡»å›è½¦å³å¯\ndocker pull elasticsearch:8.2.0\n```\n\n**å¯åŠ¨é•œåƒ**\n\n```bash\ndocker run \\\n--name es \\\n--privileged=true \\\n-p 9200:9200 \\\n-p 9300:9300 \\\n-v /root/es/config:/usr/share/elasticsearch/config \\\n-v /root/es/data:/usr/share/elasticsearch/data \\\n-v /root/es/plugins:/usr/share/elasticsearch/plugins \\\n-e ES_JAVA_OPTS=\"-Xms512m -Xmx512m\" \\\n-e \"discovery.type=single-node\" \\\n-d elasticsearch:8.2.0\n```\n\nå¯åŠ¨ä¹‹åå¦‚æœå‘ç°æ²¡æˆåŠŸå¯åŠ¨å®¹å™¨ï¼Œé€šè¿‡`docker logs es`çœ‹åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œé‚£ä¹ˆå°±æ˜¯å’‹ä»¬è‡ªå·±åˆ›å»ºçš„æŒ‚è½½ç›®å½•å¯èƒ½æƒé™ä¸å¤Ÿé«˜ã€‚\n\n```shell\nSkipping security auto configuration because the configuration file [/usr/share/elasticsearch/config/elasticsearch.yml] is missing or is not a regular file\nException in thread \"main\" java.nio.file.NoSuchFileException: /usr/share/elasticsearch/config/jvm.options\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at org.elasticsearch.tools.launchers.JvmOptionsParser.readJvmOptionsFiles(JvmOptionsParser.java:169)\n        at org.elasticsearch.tools.launchers.JvmOptionsParser.jvmOptions(JvmOptionsParser.java:125)\n        at org.elasticsearch.tools.launchers.JvmOptionsParser.main(JvmOptionsParser.java:87)\n```\n\n**ä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®/rootes/config/elasticsearch.yml**\n\n```bash\n#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------\n#\n# The following settings, TLS certificates, and keys have been automatically      \n# generated to configure Elasticsearch security features on 08-08-2023 15:01:08\n#\n# --------------------------------------------------------------------------------\n\n# Enable security features\nxpack.security.enabled: false\n\nxpack.security.enrollment.enabled: false\n\n# Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents\nxpack.security.http.ssl:\n  enabled: false\n  keystore.path: certs/http.p12\n\n# Enable encryption and mutual authentication between cluster nodes\nxpack.security.transport.ssl:\n  enabled: false\n  verification_mode: certificate\n  keystore.path: certs/transport.p12\n  truststore.path: certs/transport.p12\n#----------------------- END SECURITY AUTO CONFIGURATION -------------------------\n```\n\n\n\n**ç»™ä¸‰ä¸ªæŒ‚è½½ç›®å½•è¿›è¡Œ`chmod 777`**\n\n```shell\nchmod 777 /mydata/es/config\nchmod 777 /mydata/es/data\nchmod 777 /mydata/es/plugins\n```\n\n**ç›´æ¥å…ˆå¯åŠ¨ä¸€ä¸ªç®€å•çš„eså®¹å™¨**\n\n```shell\ndocker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" elasticsearch:8.2.0\n1\n```\n\n**å°†å®¹å™¨é‡Œçš„configæ–‡ä»¶å¤¹çš„ä¸œè¥¿æ‹·è´åˆ°å®¿ä¸»æœºä¸Š**\n\n```shell\ndocker cp elasticsearch:/usr/share/elasticsearch/config /mydata/es\n1\n```\n\n**åˆ é™¤ä¸´æ—¶å®¹å™¨**\n\n```shell\n docker stop elasticsearch\n docker rm -f elasticsearch\n12\n```\n\n**ä¿®æ”¹elasticsearch.ymlæ–‡ä»¶**\n\n```shell\nvim  /mydata/es/config/elasticsearch.yml\n```\n\nå°†ä¸‹é¢çš„åœ°æ–¹éƒ½æ”¹ä¸ºfalse\n\n![image-20230808233728439](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230808233728439.png)\n\nç„¶åé‡æ–°å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ˆåˆ é™¤ä¹‹å‰çš„å®¹å™¨ï¼‰\n\n### dockerå®‰è£…kibana\n\n**æ‹‰å–é•œåƒ**\n\n```bash\n#å°†å‘½ä»¤æ”¾åœ¨Linuxä¸Šæ•²å‡»å›è½¦å³å¯\ndocker pull kibana:8.2.0\n```\n\n**å¯åŠ¨é•œåƒ**\n\n```bash\ndocker run \\\n--name kibana \\\n--privileged=true \\\n-p 5601:5601 \\\n-v /root/kibana/config:/usr/share/kibana/config \\\n-d kibana:8.2.0\n```\n\nå¯ä»¥æå‰é…ç½®`/root/kibana/config/kibana.yml`\n\n```bash\n#è®¾ç½®Kibanaæ˜ å°„ç«¯å£\nserver.port: 5601\n\n#è®¾ç½®ç½‘å…³åœ°å€\nserver.host: 0.0.0.0\n\n#è®¾ç½®Kibanaå®ä¾‹å¯¹å¤–å±•ç¤ºçš„åç§°\nserver.name: \"kibana\"\n\n#è®¾ç½®ESé›†ç¾¤åœ°å€\nelasticsearch.hosts: [\"http://172.17.0.2:9200\"]\n\n#è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é•¿\nelasticsearch.requestTimeout: 120000\n\n#è®¾ç½®é¡µé¢è¯­è¨€\ni18n.locale: \"zh-CN\"\n```\n\n### å®‰è£…ikåˆ†è¯å™¨\n\n[Releases Â· medcl/elasticsearch-analysis-ik (github.com)](https://github.com/medcl/elasticsearch-analysis-ik/releases?page=3)\n\nä¸‹è½½å¯¹åº”elasticsearchç‰ˆæœ¬çš„ikåˆ†è¯å™¨ï¼Œåœ¨pluginsç›®å½•ä¸‹æ–°å»ºanalysis-ikï¼Œç„¶åå°†ä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œé‡å¯elasticsearchå°±å¯ä»¥äº†ã€‚\n\nåœ¨kibanaæ§åˆ¶å°è¾“å…¥ä¸‹é¢çš„è¯·æ±‚ï¼š\n\n```json\nPOST _analyze\n{\n  \"analyzer\": \"ik_max_word\",\n  \"text\":     \"æˆ‘æ˜¯ä¸­å›½äºº\"\n}\n```\n\n```json\n{\n  \"tokens\": [\n    {\n      \"token\": \"æˆ‘\",\n      \"start_offset\": 0,\n      \"end_offset\": 1,\n      \"type\": \"CN_CHAR\",\n      \"position\": 0\n    },\n    {\n      \"token\": \"æ˜¯\",\n      \"start_offset\": 1,\n      \"end_offset\": 2,\n      \"type\": \"CN_CHAR\",\n      \"position\": 1\n    },\n    {\n      \"token\": \"ä¸­å›½äºº\",\n      \"start_offset\": 2,\n      \"end_offset\": 5,\n      \"type\": \"CN_WORD\",\n      \"position\": 2\n    },\n    {\n      \"token\": \"ä¸­å›½\",\n      \"start_offset\": 2,\n      \"end_offset\": 4,\n      \"type\": \"CN_WORD\",\n      \"position\": 3\n    },\n    {\n      \"token\": \"å›½äºº\",\n      \"start_offset\": 3,\n      \"end_offset\": 5,\n      \"type\": \"CN_WORD\",\n      \"position\": 4\n    }\n  ]\n}\n\n```\n\n","tags":["elasticsearch"],"categories":["javaå…¨æ ˆ"]},{"title":"è´ªå¿ƒç®—æ³•","url":"/2023/07/23/è´ªå¿ƒç®—æ³•/","content":"\n## å…³äº\n\n**è´ªå¿ƒç®—æ³•**ï¼ˆåˆç§°è´ªå©ªç®—æ³•ï¼‰æ˜¯ä¸€ç§èƒ½å¤Ÿå¾—åˆ°æŸç§åº¦é‡æ„ä¹‰ä¸‹çš„æœ€ä¼˜è§£çš„åˆ†çº§å¤„ç†æ–¹æ³•ï¼Œå®ƒæ€»æ˜¯åšå‡ºåœ¨å½“å‰çœ‹æ¥æ˜¯æœ€ä¼˜çš„é€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯è¯´è´ªå¿ƒç­–ç•¥å¹¶ä¸æ˜¯ä»æ•´ä½“ä¸ŠåŠ ä»¥è€ƒè™‘ï¼Œå®ƒæ‰€åšå‡ºçš„é€‰æ‹©åªæ˜¯åœ¨æŸç§æ„ä¹‰ä¸Šçš„å±€éƒ¨æœ€ä¼˜è§£ç®—æ³•ã€‚\n\n**è´ªå¿ƒç®—æ³•å¯è§£å†³çš„é—®é¢˜é€šå¸¸å¤§éƒ¨åˆ†éƒ½æœ‰å¦‚ä¸‹çš„ç‰¹æ€§ï¼š**\n\n1. éšç€ç®—æ³•çš„è¿›è¡Œï¼Œå°†ç§¯ç´¯èµ·å…¶å®ƒä¸¤ä¸ªé›†åˆï¼šä¸€ä¸ªåŒ…å«å·²ç»è¢«è€ƒè™‘è¿‡å¹¶è¢«é€‰å‡ºçš„å€™é€‰å¯¹è±¡ï¼Œå¦ä¸€ä¸ªåŒ…å«å·²ç»è¢«è€ƒè™‘è¿‡ä½†è¢«ä¸¢å¼ƒçš„å€™é€‰å¯¹è±¡ã€‚\n2. æœ‰ä¸€ä¸ªå‡½æ•°æ¥æ£€æŸ¥ä¸€ä¸ªå€™é€‰å¯¹è±¡çš„é›†åˆæ˜¯å¦æä¾›äº†é—®é¢˜çš„è§£ç­”ã€‚è¯¥å‡½æ•°ä¸è€ƒè™‘æ­¤æ—¶çš„è§£å†³æ–¹æ³•æ˜¯å¦æœ€ä¼˜ã€‚\n3. è¿˜æœ‰ä¸€ä¸ªå‡½æ•°æ£€æŸ¥æ˜¯å¦ä¸€ä¸ªå€™é€‰å¯¹è±¡çš„é›†åˆæ˜¯å¯è¡Œçš„ï¼Œä¹Ÿå³æ˜¯å¦å¯èƒ½å¾€è¯¥é›†åˆä¸Šæ·»åŠ æ›´å¤šçš„å€™é€‰å¯¹è±¡ä»¥è·å¾—ä¸€ä¸ªè§£ã€‚å’Œä¸Šä¸€ä¸ªå‡½æ•°ä¸€æ ·ï¼Œæ­¤æ—¶ä¸è€ƒè™‘è§£å†³æ–¹æ³•çš„æœ€ä¼˜æ€§ã€‚\n4. é€‰æ‹©å‡½æ•°å¯ä»¥æŒ‡å‡ºå“ªä¸€ä¸ªå‰©ä½™çš„å€™é€‰å¯¹è±¡æœ€æœ‰å¸Œæœ›æ„æˆé—®é¢˜çš„è§£ã€‚\n5. æœ€åï¼Œç›®æ ‡å‡½æ•°ç»™å‡ºè§£çš„å€¼ã€‚\n6. ä¸ºäº†è§£å†³é—®é¢˜ï¼Œéœ€è¦å¯»æ‰¾ä¸€ä¸ªæ„æˆè§£çš„å€™é€‰å¯¹è±¡é›†åˆï¼Œå®ƒå¯ä»¥ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œè´ªå©ªç®—æ³•ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œã€‚èµ·åˆï¼Œç®—æ³•é€‰å‡ºçš„å€™é€‰å¯¹è±¡çš„é›†åˆä¸ºç©ºã€‚æ¥ä¸‹æ¥çš„æ¯ä¸€æ­¥ä¸­ï¼Œæ ¹æ®é€‰æ‹©å‡½æ•°ï¼Œç®—æ³•ä»å‰©ä½™å€™é€‰å¯¹è±¡ä¸­é€‰å‡ºæœ€æœ‰å¸Œæœ›æ„æˆè§£çš„å¯¹è±¡ã€‚å¦‚æœé›†åˆä¸­åŠ ä¸Šè¯¥å¯¹è±¡åä¸å¯è¡Œï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±è¢«ä¸¢å¼ƒå¹¶ä¸å†è€ƒè™‘ï¼›å¦åˆ™å°±åŠ åˆ°é›†åˆé‡Œã€‚æ¯ä¸€æ¬¡éƒ½æ‰©å……é›†åˆï¼Œå¹¶æ£€æŸ¥è¯¥é›†åˆæ˜¯å¦æ„æˆè§£ã€‚å¦‚æœè´ªå©ªç®—æ³•æ­£ç¡®å·¥ä½œï¼Œé‚£ä¹ˆæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªè§£é€šå¸¸æ˜¯æœ€ä¼˜çš„ã€‚\n\n**ç®—æ³•æ€è·¯ï¼š**\n\nè´ªå¿ƒç®—æ³•æ˜¯ä¸€ç§æ”¹è¿›äº†çš„åˆ†çº§å¤„ç†æ–¹æ³•ã€‚ç”¨è´ªå¿ƒæ³•è®¾è®¡ç®—æ³•çš„ç‰¹ç‚¹æ˜¯ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œï¼Œæ ¹æ®æŸä¸ªä¼˜åŒ–æµ‹åº¦(å¯èƒ½æ˜¯ç›®æ ‡å‡½æ•°ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ç›®æ ‡å‡½æ•°)ï¼Œæ¯ä¸€æ­¥ä¸Šéƒ½è¦ä¿è¯èƒ½è·å¾—å±€éƒ¨æœ€ä¼˜è§£ã€‚æ¯ä¸€æ­¥åªè€ƒè™‘ä¸€ä¸ª[æ•°æ®](https://wiki.mbalib.com/wiki/æ•°æ®)ï¼Œå®ƒçš„é€‰å–åº”æ»¡è¶³å±€éƒ¨ä¼˜åŒ–æ¡ä»¶ã€‚è‹¥ä¸‹ä¸€ä¸ªæ•°æ®ä¸éƒ¨åˆ†æœ€ä¼˜è§£è¿åœ¨ä¸€èµ·ä¸å†æ˜¯å¯è¡Œè§£æ—¶ï¼Œå°±ä¸æŠŠè¯¥æ•°æ®æ·»åŠ åˆ°éƒ¨åˆ†è§£ä¸­ï¼Œç›´åˆ°æŠŠæ‰€æœ‰æ•°æ®æšä¸¾å®Œï¼Œæˆ–è€…ä¸èƒ½å†æ·»åŠ ä¸ºæ­¢ã€‚è¿™ç§èƒ½å¤Ÿå¾—åˆ°æŸç§åº¦é‡æ„ä¹‰ä¸‹çš„æœ€ä¼˜è§£çš„åˆ†çº§å¤„ç†æ–¹æ³•æˆä¸ºè´ªå¿ƒæ³•ã€‚\n\n**æ±‚è§£è¿‡ç¨‹éœ€è¦ï¼š**\n\n1. å€™é€‰é›†åˆSï¼Œä¸ºäº†æ„é€ é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰ä¸€ä¸ªå€™é€‰é›†åˆCä½œä¸ºé—®é¢˜çš„å¯èƒ½è§£ï¼Œé—®é¢˜çš„æœ€ç»ˆè§£å‡å–è‡ªäºå€™é€‰é›†åˆCã€‚\n2. è§£é›†åˆSï¼Œéšç€è´ªå¿ƒé€‰æ‹©çš„è¿›è¡Œï¼Œè§£é›†åˆä¸æ–­æ‰©å±•ï¼Œç›´åˆ°æ„æˆä¸€ä¸ªæ»¡è¶³é—®é¢˜çš„å®Œæ•´è§£ã€‚\n3. è§£å†³å‡½æ•°solutionï¼Œæ£€æŸ¥è§£é›†åˆæ˜¯å¦æ„æˆé—®é¢˜çš„å®Œæ•´è§£ã€‚\n4. é€‰æ‹©å‡½æ•°selectï¼Œå³è´ªå¿ƒç­–ç•¥ï¼Œè¿™æ˜¯è´ªå¿ƒç®—æ³•çš„å…³é”®ï¼Œå®ƒæŒ‡å‡ºå“ªä¸ªå€™é€‰å¯¹è±¡æœ‰å¸Œæœ›æ„æˆæˆé—®é¢˜çš„è§£ã€‚\n5. å¯è¡Œå‡½æ•°feasibleï¼Œæ£€æŸ¥è§£é›†åˆä¸­åŠ å…¥ä¸€ä¸ªå€™é€‰å¯¹è±¡æ˜¯å¦å¯è¡Œï¼Œå³è§£é›†åˆæ‰©å±•åæ˜¯å¦æ»¡è¶³çº¦æŸæ¡ä»¶ã€‚\n\n## ä¾‹é¢˜\n\n### é›¶é’±æ‰¾å›é—®é¢˜\n\nè¿™ä¸ªé—®é¢˜åœ¨æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ä¸­å°±æ›´åŠ æ™®éäº†ã€‚å‡è®¾1å…ƒã€2å…ƒã€5å…ƒã€10å…ƒã€20å…ƒã€50å…ƒã€100å…ƒçš„çº¸å¸åˆ†åˆ«æœ‰c0, c1, c2, c3, c4, c5, c6å¼ ã€‚ç°åœ¨è¦ç”¨è¿™äº›é’±æ¥æ”¯ä»˜Kå…ƒï¼Œè‡³å°‘è¦ç”¨å¤šå°‘å¼ çº¸å¸ï¼Ÿç”¨è´ªå¿ƒç®—æ³•çš„æ€æƒ³ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæ¯ä¸€æ­¥å°½å¯èƒ½ç”¨é¢å€¼å¤§çš„çº¸å¸å³å¯ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ‘ä»¬è‡ªç„¶è€Œç„¶ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚åœ¨ç¨‹åºä¸­å·²ç»äº‹å…ˆå°†ValueæŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’å¥½ã€‚\n\n```c++\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int N=7; \nint Count[N]={3,0,2,1,0,3,5};\nint Value[N]={1,2,5,10,20,50,100};\n\nint solve(int money) \n{\n\tint num=0;\n\tfor(int i=N-1;i>=0;i--) \n\t{\n\t\tint c=min(money/Value[i],Count[i]);\n\t\tmoney=money-c*Value[i];\n\t\tnum+=c;\n\t}\n\tif(money>0) num=-1;\n\treturn num;\n}\n\nint main() \n{\n\tint money;\n\tcin>>money;\n\tint res=solve(money);\n\tif(res!=-1) cout<<res<<endl;\n\telse cout<<\"NO\"<<endl;\n}\n```\n\n### èƒŒåŒ…é—®é¢˜\n\nåœ¨é€‰æ‹©ç‰©å“iè£…å…¥èƒŒåŒ…æ—¶ï¼Œå¯ä»¥é€‰æ‹©ç‰©å“çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸ä¸€å®šè¦å…¨éƒ¨è£…å…¥èƒŒåŒ…ã€‚è¿™æ—¶ä¾¿å¯ä»¥ä½¿ç”¨è´ªå¿ƒç®—æ³•æ±‚è§£äº†ã€‚è®¡ç®—æ¯ç§ç‰©å“çš„å•ä½é‡é‡ä»·å€¼ä½œä¸ºè´ªå¿ƒé€‰æ‹©çš„ä¾æ®æŒ‡æ ‡ï¼Œé€‰æ‹©å•ä½é‡é‡ä»·å€¼æœ€é«˜çš„ç‰©å“ï¼Œå°†å°½å¯èƒ½å¤šçš„è¯¥ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œä¾æ­¤ç­–ç•¥ä¸€ç›´åœ°è¿›è¡Œä¸‹å»ï¼Œç›´åˆ°èƒŒåŒ…è£…æ»¡ä¸ºæ­¢ã€‚åœ¨é›¶ä¸€èƒŒåŒ…é—®é¢˜ä¸­è´ªå¿ƒé€‰æ‹©ä¹‹æ‰€ä»¥ä¸èƒ½å¾—åˆ°æœ€ä¼˜è§£åŸå› æ˜¯è´ªå¿ƒé€‰æ‹©æ— æ³•ä¿è¯æœ€ç»ˆèƒ½å°†èƒŒåŒ…è£…æ»¡ï¼Œéƒ¨åˆ†é—²ç½®çš„èƒŒåŒ…ç©ºé—´ä½¿æ¯å…¬æ–¤èƒŒåŒ…ç©ºé—´çš„ä»·å€¼é™ä½äº†ã€‚åœ¨ç¨‹åºä¸­å·²ç»äº‹å…ˆå°†å•ä½é‡é‡ä»·å€¼æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’å¥½ã€‚\n```c++\n#include<iostream>   \nusing namespace std;   \nconst int N=4;  \nvoid knapsack(float M,float v[],float w[],float x[]);  \n  \nint main()  \n{  \n    float M=50;\n\t//èƒŒåŒ…æ‰€èƒ½å®¹çº³çš„é‡é‡   \n    float w[]={0,10,30,20,5};\n\t//æ¯ç§ç‰©å“çš„é‡é‡  \n    float v[]={0,200,400,100,10};  \n  \t//æ¯ç§ç‰©å“çš„ä»·å€¼ \n    float x[N+1]={0};  \n    //è®°å½•ç»“æœçš„æ•°ç»„ \n    knapsack(M,v,w,x);  \n    cout<<\"é€‰æ‹©è£…ä¸‹çš„ç‰©å“æ¯”ä¾‹ï¼š\"<<endl;  \n    for(int i=1;i<=N;i++) cout<<\"[\"<<i<<\"]:\"<<x[i]<<endl;  \n}  \n  \nvoid knapsack(float M,float v[],float w[],float x[])  \n{  \n    int i;  \n    //ç‰©å“æ•´ä»¶è¢«è£…ä¸‹  \n    for(i=1;i<=N;i++)\n    {  \n        if(w[i]>M) break;   \n        x[i]=1;  \n        M-=w[i];  \n    }   \n    //ç‰©å“éƒ¨åˆ†è¢«è£…ä¸‹  \n    if(i<=N) x[i]=M/w[i];   \n} \n```\n\n## å¼•ç”¨\n\n[è´ªå¿ƒç®—æ³•](https://wiki.mbalib.com/wiki/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95)\n\n[csdn-è´ªå¿ƒç®—æ³•](https://blog.csdn.net/weixin_49370884/article/details/126247776)\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"å›æº¯ç®—æ³•æ€æƒ³","url":"/2023/07/22/å›æº¯ç®—æ³•æ€æƒ³/","content":"\n## å…³äº\n\nå›æº¯æ³•ä½œä¸ºä¸€ç§å¸¸è§çš„ç®—æ³•æ€æƒ³ï¼Œå…¶æ¦‚å¿µä¸ºï¼šæŒ‰é€‰ä¼˜æ¡ä»¶å‘å‰æœç´¢ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ã€‚å½“æ¢ç´¢åˆ°æŸä¸€æ­¥æ—¶ï¼Œå‘ç°åŸå…ˆé€‰æ‹©å¹¶ä¸ä¼˜æˆ–è¾¾ä¸åˆ°ç›®æ ‡ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œè¿™ç§èµ°ä¸é€šå°±é€€å›å†èµ°çš„æŠ€æœ¯ä¸ºå›æº¯æ³•ï¼Œè€Œæ»¡è¶³å›æº¯æ¡ä»¶çš„æŸä¸ªçŠ¶æ€çš„ç‚¹ç§°ä¸ºâ€œå›æº¯ç‚¹â€ã€‚å›æº¯æ³•å’Œç©·ä¸¾æ³•çš„æ€æƒ³ç›¸è¿‘ï¼Œä¸åŒåœ¨äºç©·ä¸¾æ³•æ˜¯å°†æ‰€æœ‰çš„æƒ…å†µéƒ½åˆ—ä¸¾å‡ºæ¥ä»¥åå†è¿›è¡Œç­›é€‰ï¼Œè€Œå›æº¯æ³•åœ¨åˆ—ä¸¾è¿‡ç¨‹å¦‚æœå‘ç°å½“å‰æƒ…å†µä¸æ»¡è¶³è¦æ±‚ï¼Œå°±è¿”å›ä¸Šä¸€æ­¥è¿›è¡Œæ–°çš„å°è¯•ã€‚\n\n> å›æº¯æ³•çš„ç­–ç•¥æ˜¯ï¼šåœ¨åŒ…å«é—®é¢˜çš„æ‰€æœ‰è§£çš„è§£ç©ºé—´æ ‘ä¸­ï¼ŒæŒ‰ç…§**æ·±åº¦ä¼˜å…ˆæœç´¢**çš„ç­–ç•¥ï¼Œä»æ ¹ç»“ç‚¹å‡ºå‘æ·±åº¦æ¢ç´¢è§£ç©ºé—´æ ‘ã€‚å½“æ¢ç´¢åˆ°æŸä¸€ç»“ç‚¹æ—¶ï¼Œè¦å…ˆåˆ¤æ–­è¯¥ç»“ç‚¹æ˜¯å¦åŒ…å«é—®é¢˜çš„è§£ï¼Œå¦‚æœåŒ…å«ï¼Œå°±ä»è¯¥ç»“ç‚¹å‡ºå‘ç»§ç»­æ¢ç´¢ä¸‹å»ï¼Œå¦‚æœè¯¥ç»“ç‚¹ä¸åŒ…å«é—®é¢˜çš„è§£ï¼Œåˆ™é€å±‚å‘å…¶ç¥–å…ˆç»“ç‚¹å›æº¯ï¼Œç›´åˆ°æ¢ç´¢åˆ°å¶èŠ‚ç‚¹åˆ™ç»“æŸæœ¬æ¬¡éå†ã€‚\n\næ­¥éª¤ï¼š\n\n1. å®šä¹‰é—®é¢˜çš„è§£ç©ºé—´ã€‚\n2. ç¡®å®šæ˜“äºæœç´¢çš„è§£ç©ºé—´ç»“æ„ã€‚\n3. ä»¥æ·±åº¦ä¼˜å…ˆæœç´¢çš„ç­–ç•¥æœç´¢è§£ç©ºé—´ï¼Œå¹¶åœ¨æœç´¢è¿‡ç¨‹ä¸­ç”¨å‰ªæå‡½æ•°é¿å…æ— æ•ˆæœç´¢ã€‚\n\n## æ¡ˆä¾‹\n\n### 1ã€å…«çš‡åé—®é¢˜\n\nè¯¥é—®é¢˜çš„æè¿°æ˜¯ï¼šåœ¨8Ã—8æ ¼çš„å›½é™…è±¡æ£‹ä¸Šæ‘†æ”¾8ä¸ªçš‡åï¼Œä½¿å…¶ä¸èƒ½äº’ç›¸æ”»å‡»ï¼Œå³ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸èƒ½å¤„äºåŒä¸€è¡Œã€åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šï¼Œé—®æœ‰å¤šå°‘ç§æ‘†æ³•ã€‚è¯¥é—®é¢˜æœ‰å¤šç§è§£æ³•ï¼Œé€’å½’æ³•æ˜¯æœ€ç®€å•çš„ä¸€ç§ï¼Œæœ¬æ–‡ä½¿ç”¨é€’å½’æ³•ï¼Œæ¥å€Ÿè¿™ä¸ªé—®é¢˜æ¥ä»‹ç»å›æº¯æ³•ã€‚\nâ€ƒâ€ƒå¦‚æœæ˜¯åˆæ¬¡æ¥è§¦è¯¥é—®é¢˜ï¼Œä¸€çœ‹åˆ°è¿™ä¸ªé¢˜ç›®å¯èƒ½ä¼šè§‰å¾—æ‰‹è¶³æ— æªã€‚å¯ä»¥å°è¯•ç€å°†é¢˜ç›®è½¬æ¢ä¸ºï¼šåœ¨ä¸€ä¸ª8x8çš„äºŒç»´æ•°ç»„ä¸Šï¼Œæ¯æ¬¡åœ¨æ¯ä¸€è¡Œæ”¾ç½®ä¸€ä¸ªå…ƒç´ ï¼Œä½¿å¾—è¿™8è¡Œçš„å…ƒç´ äº’ç›¸ä¸åœ¨åŒä¸€è¡Œã€åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šã€‚å‡å¦‚8x8æ£‹ç›˜åŸå§‹çš„å…ƒç´ éƒ½æ˜¯0ï¼Œåœ¨æŸè¡ŒæŸåˆ—æ”¾ç½®çš‡ååï¼Œè¯¥ä½ç½®çš„å…ƒç´ æ”¹ä¸º1ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡è¯¥åˆ—çš„8è¡Œæ˜¯å¦å­˜åœ¨å…ƒç´ 1ï¼Œæ¥åˆ¤æ–­è¯¥åˆ—æ˜¯å¦å­˜åœ¨çš‡åã€‚å°†å…«çš‡åé—®é¢˜è½¬æ¢æˆè¿™æ ·çš„æè¿°åï¼Œè¯¥é¢˜ç›®å°±è½¬æ¢æˆäº†è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š\n\n1. **åˆ¤æ–­è¦æ”¾ç½®çš„å…ƒç´ å’Œä¹‹å‰æ”¾ç½®è¿‡çš„å…ƒç´ äº’ç›¸ä¸åœ¨åŒä¸€è¡Œã€åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šï¼Ÿ**\n2. **å¦‚ä½•æ’¤é”€è¯¥è¡Œä¸­æ”¾ç½®çš„çš‡åï¼Ÿ**\n\nåŸºäºä¸Šé¢çš„çŸ¥è¯†é“ºå«ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¨å¯¼å‡ºç”¨é€’å½’æ–¹æ³•è§£å†³å…«çš‡åé—®é¢˜çš„æ­¥éª¤ï¼š\n\n1. æœç´¢ã€‚ä»ä¸‹æ ‡ä¸º0çš„è¡Œå¼€å§‹ï¼Œå°è¯•åœ¨è¯¥è¡Œçš„æŸä¸ªåˆ—æ”¾ç½®çš‡åï¼Œç„¶åç»§ç»­è¿›è¡Œä¸‹ä¸€è¡Œçš„æœç´¢ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œé€’å½’çš„è¿‡ç¨‹ã€‚\n2. è¾“å‡ºï¼Œå½“æœç´¢çš„è¡Œä¸‹æ ‡ä¸º8æ—¶ï¼Œä»£è¡¨è¯¥æ¬¡æœç´¢å·²ç»å®Œæˆï¼Œå¯ä»¥è¾“å‡ºç»“æœï¼Œæ€»çš„å¯èƒ½æ€§+1ã€‚\n3. åˆ¤æ–­ã€‚è¿™æ˜¯å…«çš‡åç®—æ³•çš„æ ¸å¿ƒï¼Œåˆ¤æ–­æŸè¡ŒæŸåˆ—çš„ä½ç½®ä¸Šæ˜¯å¦å¯ä»¥æ”¾ç½®çš‡åã€‚\n\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n\n/*\n * åœ¨8Ã—8æ ¼çš„å›½é™…è±¡æ£‹ä¸Šæ‘†æ”¾8ä¸ªçš‡åï¼Œä½¿å…¶ä¸èƒ½äº’ç›¸æ”»å‡»ï¼Œå³ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸èƒ½å¤„äºåŒä¸€è¡Œã€åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šï¼Œé—®æœ‰å¤šå°‘ç§æ‘†æ³•ã€‚\n */\npublic class EightQueen {\n\t\n\t/*æ€»çš„å¯èƒ½æ•°ï¼Œåˆå§‹åŒ–ä¸º0ï¼Œæ¯è¾“å‡ºä¸€æ¬¡ç»“æœï¼Œè‡ªå¢1*/\n\tprivate static int count=0;\n\t/*åˆ›å»ºä¸€ä¸ª8x8çš„æ£‹ç›˜ï¼Œé»˜è®¤åˆå§‹åŒ–å…ƒç´ ä¸º0ï¼Œä»£è¡¨æœªæ”¾ç½®çš‡å*/\n\tprivate static int[][] chess=new int[8][8];\n\t\n\tpublic static void main(String[] args) {\n\t\t/*ä¼ å‚0ï¼Œä»£è¡¨ä»ç¬¬ä¸€è¡Œå¼€å§‹éå†ï¼Œå¯»æ‰¾æ”¾ç½®çš‡åçš„ä½ç½®*/\n\t\teightQueen(0);\n\t\tSystem.out.println(\"å…«çš‡åé—®é¢˜æ€»å…±æœ‰\"+count+\"ç§ç»“æœ\");\n\t}\n\t\n\tprivate static void eightQueen(int row){\n\t\t/*å¦‚æœéå†å®Œå…«è¡Œéƒ½æ‰¾åˆ°æ”¾ç½®çš‡åçš„ä½ç½®åˆ™æ‰“å°*/\n\t\tif(row>7){                       \n\t\t\tprintQueen();                       \n\t\t\tcount++;\n\t\t\treturn;\n\t\t}\n\t\t/*åœ¨æ¯ä¸€è¡Œæ”¾ç½®çš‡åï¼Œå³éå†æŸè¡Œä¸­çš„æ¯ä¸€åˆ—*/\n\t\tfor(int col=0;col<8;col++){\n\t\t\t/*åˆ¤æ–­æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡å*/\n\t\t\tif(isExistQueen(row,col)){\n\t\t\t\t/*è¯¥ä½ç½®æ”¾ç½®çš‡å*/\n\t\t\t\tchess[row][col]=1;\n\t\t\t\t/*ç„¶åç»§ç»­åœ¨ä¸‹ä¸€è¡Œè¿›è¡Œåˆ¤æ–­*/\n\t\t\t\teightQueen(row+1);\n\t\t\t\t/*æ¸…é›¶ï¼Œè¿™ä¹Ÿæ˜¯å›æº¯æ³•è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸€ç§æ–¹æ³•å°è¯•åï¼Œéœ€è¦å°†ä¹‹å‰åšçš„å°è¯•å›é€€ï¼Œä»¥å…å½±å“åˆ°ä¸‹ä¸€æ¬¡å°è¯•*/\n\t\t\t\tchess[row][col]=0;           \n\t\t\t}\n\t\t}\n\t}\n\t\n\tprivate static void printQueen(){\n\t\tSystem.out.println(\"ç¬¬ \"+(count+1)+\"ç§ç»“æœ:\");\n\t\tfor(int row=0;row<8;row++){\n\t\t\tfor(int col=0;col<8;col++){\n\t\t\t\t/*æ”¾ç½®çš‡å*/\n\t\t\t\tif(chess[row][col]==1){\n\t\t\t\t\tSystem.out.print(\"q \");\n\t\t\t\t/*æ”¾ç½®å£«å…µ*/\n\t\t\t\t}else{\n\t\t\t\t\tSystem.out.print(\"s \");\n\t\t\t\t}\n\t\t\t}\n\t\t\tSystem.out.println();\n\t\t}\n\t\tSystem.out.println();\n\t}\n\t\n\tprivate static boolean isExistQueen(int row,int col){\n\t\tint i,k;\n\t\t/*åˆ¤æ–­åŒä¸€åˆ—ä¸­æ˜¯å¦å­˜åœ¨1ï¼Œå³çš‡å*/\n\t\tfor(i=0;i<8;i++){\n\t\t\tif(chess[i][col]==1)\n\t\t\t\treturn false;\n\t\t}\n\t\t/*åˆ¤æ–­ä»(0,0)åˆ°(i,k)åŒºåŸŸå†…ï¼Œå³å·¦ä¸Šè§’çš„å¯¹è§’çº¿ä½ç½®ä¸Šæ˜¯å¦å­˜åœ¨1ï¼Œå³çš‡å\n\t\t*æ­¤æ—¶ä¸æ£€æŸ¥å·¦ä¸‹è§’ï¼Œæ˜¯å› ä¸ºå·¦ä¸‹è§’å¯¹åº”çš„è¡Œè¿˜æ²¡å¼€å§‹æ”¾ç½®çš‡åï¼Œä¸ç”¨æ£€æŸ¥*/ \n\t\tfor(i=row,k=col;i>=0&&k>=0;i--,k--){\n\t\t\tif(chess[i][k]==1)\n\t\t\t\treturn false;\n\t\t}\n\t\t/*åˆ¤æ–­ä»(0,7)åˆ°(i,k)åŒºåŸŸå†…ï¼Œå³å³ä¸Šè§’çš„å¯¹è§’çº¿ä½ç½®ä¸Šæ˜¯å¦å­˜åœ¨1ï¼Œå³çš‡å\n\t\t*æ­¤æ—¶ä¸æ£€æŸ¥å³ä¸‹è§’ï¼Œæ˜¯å› ä¸ºå³ä¸‹è§’å¯¹åº”çš„è¡Œè¿˜æ²¡å¼€å§‹æ”¾ç½®çš‡åï¼Œä¸ç”¨æ£€æŸ¥*/ \n\t\tfor(i=row,k=col;i>=0&&k<8;i--,k++){\n\t\t\tif(chess[i][k]==1)\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n```\n\néƒ¨åˆ†æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n\n    ç¬¬ 92ç§ç»“æœ:\n    s s s s s s s q\n    s s s q s s s s\n    q s s s s s s s\n    s s q s s s s s\n    s s s s s q s s\n    s q s s s s s s\n    s s s s s s q s\n    s s s s q s s s\n    å…«çš‡åé—®é¢˜æ€»å…±æœ‰92ç§ç»“æœ\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"æšä¸¾ç®—æ³•","url":"/2023/07/22/æšä¸¾ç®—æ³•/","content":"\n## å…³äº\n\n**ä»€ä¹ˆæ˜¯æšä¸¾ç®—æ³•**\n\nä¸€ç§å°†é—®é¢˜çš„æ‰€æœ‰å¯èƒ½ç»“æœä¸€ä¸€åˆ—ä¸¾ï¼Œå¹¶ç”¨æ¡ä»¶æ£€éªŒæ˜¯å¦æˆç«‹çš„è§£é¢˜æ€ç»´ã€‚\n\nè¾ƒä¸ºè¯¦ç»†åœ°è¯´ï¼Œå¦‚æœä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆå·²ç»çŸ¥é“åœ¨ä»€ä¹ˆæ ·çš„èŒƒå›´ï¼Œè€Œä¸”æ‰€æœ‰çš„å¯èƒ½æ€§æ˜¯å¯ä»¥æœ‰é™åˆ—ä¸¾çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸€åˆ—ä¸¾çš„æ–¹å¼ï¼Œæ£€éªŒæ˜¯å¦æˆç«‹ã€‚ä¸€ä¸€åˆ—ä¸¾åœ¨å®é™…ç¼–ç¨‹ä¸­ä½“ç°ä¸ºé‡‡ç”¨å¾ªç¯ï¼Œæ£€éªŒå°±æ˜¯é‡‡ç”¨æ¡ä»¶è¯­å¥è¿›è¡Œæ£€éªŒã€‚ä¾‹å¦‚ï¼Œå·²çŸ¥ä¸€ä¸ªæ•´æ•°ä¸º23\\**ï¼Œ\\*è¡¨ç¤ºè¿™äº›æ•°å·²ç»æ¨¡ç³Šäº†ï¼Œä½†å·²çŸ¥è¿™ä¸ªæ•°æ˜¯7çš„å€æ•°æˆ–16çš„å€æ•°ï¼Œåˆ—ä¸¾23**çš„æ‰€æœ‰å¯èƒ½ç»“æœï¼Œæ­¤æ—¶æ˜¾ç„¶è¿™ä¸ªæ•°æœ€å°çš„å¯èƒ½æ˜¯2300ï¼Œæœ€å¤§çš„å¯èƒ½æ˜¯2399ï¼Œäºæ˜¯é‡‡ç”¨å¾ªç¯ä»¥åŠæ¡ä»¶æ£€éªŒï¼Œéå†æ£€éªŒè¿™ä¸ªèŒƒå›´çš„æ¯ä¸ªæ•°ã€‚\n\n**å¦‚ä½•è®¾è®¡æšä¸¾ç®—æ³•**\n\nç»“æœå¯èƒ½æœ‰å¤šä¸ªæ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨æšä¸¾ï¼›ç­”æ¡ˆèŒƒå›´æ˜¯å¯ä»¥ç¡®å®šçš„ï¼Œæˆ–è€…è¯´æ‰€æœ‰å¯èƒ½æ˜¯å¯åˆ—ä¸¾çš„ï¼›å¯æ£€éªŒï¼Œå¯ä»¥é€šè¿‡æ¡ä»¶è¯­å¥æ£€éªŒåˆ—ä¸¾çš„å¯èƒ½æ˜¯å¦æˆç«‹ã€‚\n\n\n\n## ä¾‹å­\n\nè¿™é‡Œç”¨leetcodeä¸Šçš„æŸ æª¬æ°´æ‰¾é›¶é¢˜ç›®ä¸¾ä¾‹ã€‚\n\n*åœ¨æŸ æª¬æ°´æ‘Šä¸Šï¼Œæ¯ä¸€æ¯æŸ æª¬æ°´çš„å”®ä»·ä¸º 5 ç¾å…ƒã€‚é¡¾å®¢æ’é˜Ÿè´­ä¹°ä½ çš„äº§å“ï¼Œï¼ˆæŒ‰è´¦å• bills æ”¯ä»˜çš„é¡ºåºï¼‰ä¸€æ¬¡è´­ä¹°ä¸€æ¯ã€‚*\n\n*æ¯ä½é¡¾å®¢åªä¹°ä¸€æ¯æŸ æª¬æ°´ï¼Œç„¶åå‘ä½ ä»˜ 5 ç¾å…ƒã€10 ç¾å…ƒæˆ– 20 ç¾å…ƒã€‚ä½ å¿…é¡»ç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œä¹Ÿå°±æ˜¯è¯´å‡€äº¤æ˜“æ˜¯æ¯ä½é¡¾å®¢å‘ä½ æ”¯ä»˜ 5 ç¾å…ƒã€‚*\n\n*æ³¨æ„ï¼Œä¸€å¼€å§‹ä½ æ‰‹å¤´æ²¡æœ‰ä»»ä½•é›¶é’±ã€‚*\n\n*ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ bills ï¼Œå…¶ä¸­ bills[i] æ˜¯ç¬¬ i ä½é¡¾å®¢ä»˜çš„è´¦ã€‚å¦‚æœä½ èƒ½ç»™æ¯ä½é¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œè¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚*\n\n****\n\nç¤ºä¾‹ 1ï¼š\n\n```\nè¾“å…¥ï¼šbills = [5,5,5,10,20]\nè¾“å‡ºï¼štrue\nè§£é‡Šï¼š\nå‰ 3 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æŒ‰é¡ºåºæ”¶å– 3 å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚\nç¬¬ 4 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ”¶å–ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨ï¼Œå¹¶è¿”è¿˜ 5 ç¾å…ƒã€‚\nç¬¬ 5 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ‰¾è¿˜ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨å’Œä¸€å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚\nç”±äºæ‰€æœ‰å®¢æˆ·éƒ½å¾—åˆ°äº†æ­£ç¡®çš„æ‰¾é›¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¾“å‡º trueã€‚\n```\n\nç¤ºä¾‹ 2ï¼š\n\n```\nè¾“å…¥ï¼šbills = [5,5,10,10,20]\nè¾“å‡ºï¼šfalse\nè§£é‡Šï¼š\nå‰ 2 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æŒ‰é¡ºåºæ”¶å– 2 å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚\nå¯¹äºæ¥ä¸‹æ¥çš„ 2 ä½é¡¾å®¢ï¼Œæˆ‘ä»¬æ”¶å–ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨ï¼Œç„¶åè¿”è¿˜ 5 ç¾å…ƒã€‚\nå¯¹äºæœ€åä¸€ä½é¡¾å®¢ï¼Œæˆ‘ä»¬æ— æ³•é€€å› 15 ç¾å…ƒï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨åªæœ‰ä¸¤å¼  10 ç¾å…ƒçš„é’ç¥¨ã€‚\nç”±äºä¸æ˜¯æ¯ä½é¡¾å®¢éƒ½å¾—åˆ°äº†æ­£ç¡®çš„æ‰¾é›¶ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ falseã€‚\n```\n\n**[é¢˜è§£ï¼šè¿™é‡Œå¼•ç”¨è·èµæœ€å¤šçš„é¢˜è§£](https://leetcode.cn/problems/lemonade-change/solutions/2353707/fen-lei-tao-lun-jian-ji-xie-fa-pythonjav-37oe/)**\n\nç”±äº 10 ç¾å…ƒé’ç¥¨åªèƒ½ç”¨äº 20 ç¾å…ƒçš„æ‰¾é›¶ï¼Œè€Œ5 ç¾å…ƒé’ç¥¨æ—¢å¯ä»¥ç”¨äº 20 ç¾å…ƒçš„æ‰¾é›¶ï¼Œåˆå¯ä»¥ç”¨äº 10 ç¾å…ƒçš„æ‰¾é›¶ï¼Œæ›´åŠ é€šç”¨ï¼ˆä½¿ç”¨åœºæ™¯æ›´å¤šï¼‰ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥ç”¨ 10 ç¾å…ƒï¼Œåº”å½“ä¼˜å…ˆç”¨ 10 ç¾å…ƒï¼Œå…¶æ¬¡ç”¨ 5 ç¾å…ƒã€‚å¦‚æœä¼˜å…ˆç”¨ 5 ç¾å…ƒï¼Œå¯èƒ½ä¼šé¢ä¸´ `bills[i]=10` æ— æ³•æ‰¾é›¶çš„æƒ…å†µã€‚\n\nè®¾å½“å‰æœ‰ *five* å¼  5 ç¾å…ƒé’ç¥¨ï¼Œ*ten* å¼  10 ç¾å…ƒé’ç¥¨ã€‚20 ç¾å…ƒçš„æ— éœ€ç»Ÿè®¡ï¼Œå› ä¸ºå®ƒæ— æ³•ç”¨æ¥æ‰¾é›¶ã€‚\n\nè®¾ `b=bills[i]`ï¼Œåˆ†ç±»è®¨è®ºï¼š\n\nå¦‚æœ `b=5`ï¼Œæ— éœ€æ‰¾é›¶ï¼Œ*five* åŠ ä¸€ã€‚\nå¦‚æœ `b=10`ï¼Œè¿”è¿˜ 5 ç¾å…ƒï¼Œ*five*å‡ä¸€ï¼Œ*ten* åŠ ä¸€ã€‚\nå¦‚æœ `b=20` ä¸” `ten>0`ï¼Œè¿”è¿˜ 10+5 ç¾å…ƒï¼Œ*five* å’Œ *ten* éƒ½å‡ä¸€ã€‚\nå¦‚æœ `b=20` ä¸” `ten=0`ï¼Œè¿”è¿˜ 5+5+5 ç¾å…ƒï¼Œ*five* å‡ä¸‰ã€‚\nå¦‚æœå‘ç° `five<0`ï¼Œè¯´æ˜æ— æ³•æ­£ç¡®æ‰¾é›¶ï¼Œè¿”å› falseã€‚\nå¦‚æœä¸­é€”æ²¡æœ‰è¿”å› falseï¼Œé‚£ä¹ˆå¾ªç¯ç»“æŸåè¿”å› trueã€‚\n\n```java\nclass Solution {\n    public boolean lemonadeChange(int[] bills) {\n        int five = 0, ten = 0;\n        for (int b : bills) {\n            if (b == 5) { // æ— éœ€æ‰¾é›¶\n                five++;\n            } else if (b == 10) { // è¿”è¿˜ 5\n                five--;\n                ten++;\n            } else if (ten > 0) { // æ­¤æ—¶ b=20ï¼Œè¿”è¿˜ 10+5\n                five--;\n                ten--;\n            } else { // æ­¤æ—¶ b=20ï¼Œè¿”è¿˜ 5+5+5\n                five -= 3;\n            }\n            if (five < 0) { // æ— æ³•æ­£ç¡®æ‰¾é›¶\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\n```\n\n\n\nå¼•ç”¨ï¼š\n\n[860. æŸ æª¬æ°´æ‰¾é›¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/lemonade-change/solutions/2353707/fen-lei-tao-lun-jian-ji-xie-fa-pythonjav-37oe/)\n\n[æšä¸¾ç®—æ³•](https://zhuanlan.zhihu.com/p/555394745)\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"p2pè¿æ¥","url":"/2023/07/21/p2pè¿æ¥/","content":"\n## å…³äº\n\nNATæŠ€æœ¯ï¼ˆNetwork Address  Translationï¼Œç½‘ç»œåœ°å€è½¬æ¢ï¼‰æ˜¯ä¸€ç§æŠŠå†…éƒ¨ç½‘ç»œï¼ˆç®€ç§°ä¸ºå†…ç½‘ï¼‰ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå¤–éƒ¨ç½‘ç»œï¼ˆç®€ç§°ä¸ºå¤–ç½‘ï¼‰å…¬å…±IPåœ°å€çš„æŠ€æœ¯ï¼Œå®ƒä½¿å¾—ä¸€å®šèŒƒå›´å†…çš„å¤šå°ä¸»æœºåªåˆ©ç”¨ä¸€ä¸ªå…¬å…±IPåœ°å€è¿æ¥åˆ°å¤–ç½‘ï¼Œå¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šç¼“è§£äº†å…¬ç½‘IPåœ°å€ç´§ç¼ºçš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½é˜²æ­¢å¤–ç½‘æ”»å‡»ä¿éšœå†…ç½‘å®‰å…¨ã€‚å¦‚ä¸‹å›¾ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-c3322f6baa1a2e29cfe937df02a64871_720w.png)\n\nNATä¸»è¦çš„é€šè¿‡å¯¹æ•°æ®åŒ…å¤´çš„åœ°å€æ›¿æ¢æ¥å®Œæˆå†…ç½‘è®¡ç®—æœºè®¿é—®å¤–ç½‘æœåŠ¡å™¨çš„ã€‚å½“å†…éƒ¨æœºå™¨è¦è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼ŒNATè®¾å¤‡æŠŠå†…ç½‘æœºå™¨çš„IPä¸ç«¯å£å·(ç½‘ç»œå±‚åœ°å€ä¸ä¼ è¾“å±‚åœ°å€ï¼Œå¦‚ï¼š192.168.1.100:666)ï¼Œè½¬æ¢æˆ NAT çš„å¤–éƒ¨  IPä¸ç«¯å£å·(å¦‚ï¼š100.10.10.10:1666)ï¼Œå‘é€ç»™å¤–ç½‘æœåŠ¡å™¨ï¼›æ•°æ®è¿”å›æ—¶ï¼Œå†æŠŠç›®çš„IPå’Œç«¯å£ç«¯å£å·(100.10.10.10:1666)çš„æ•°æ®åŒ…æ›¿æ¢ä¸ºå†…ç½‘æœºå™¨çš„IPåœ°å€å’Œç«¯å£å·(192.168.1.100:666)ï¼Œå‘ç»™å†…ç½‘æœºå™¨ã€‚è‹¥é€šè®¯åè®®çš„å†…å®¹ä¸­æœ‰IPåœ°å€çš„ä¼ é€’ï¼Œå¦‚FTPåè®®ï¼ŒNATåœ¨è½¬æ¢æ—¶è¿˜è¦æŠŠæ•°æ®åŒ…å†…æ¶‰åŠåè®®åœ°å€äº¤äº’çš„åœ°æ–¹æ›¿æ¢ï¼Œå¦åˆ™åè®®å°±ä¼šå‡ºç°åœ°å€æ··ä¹±ã€‚åœ¨  NATè®¾å¤‡ä¸­ç»´æŠ¤äº†è¿™ä¸ªè¦æ›¿æ¢åœ°å€çš„æ˜ å°„è¡¨ï¼Œå¹¶æ ¹æ®å†…éƒ¨è®¡ç®—æœºçš„é€šè®¯éœ€æ±‚ç»´æŠ¤è¯¥è¡¨ã€‚å¤–éƒ¨ç½‘ç»œæ¥æ•°æ®åŒ…èƒ½å¦è¿›å…¥å†…ç½‘ï¼Œä¸»è¦æ˜¯çœ‹æ˜¯å¦å·²ç»æœ‰å¯è½¬æ¢çš„æ˜ å°„è¡¨é¡¹ï¼Œè‹¥æ²¡æœ‰å°±ä¼šä¸¢å¼ƒã€‚\n\n## NATç±»å‹\n\nNATåˆ†ä¸ºä¸¤å¤§ç±»ï¼ŒåŸºæœ¬NAT(Basic Network Address Translator)å’ŒNAPT(Network Address/Port Translator)ã€‚\n\nåŸºæœ¬NATï¼Œå®ƒä»…å°†å†…ç½‘ä¸»æœºçš„ç§æœ‰IPåœ°å€è½¬æ¢æˆå…¬ç½‘IPåœ°å€ï¼Œä½†å¹¶ä¸å°†TCP/UDPç«¯å£ä¿¡æ¯è¿›è¡Œè½¬æ¢ï¼Œæœ‰åŠ¨æ€ä¸é™æ€ä¹‹åŒºåˆ†ã€‚é™æ€NATï¼šç§æœ‰åœ°å€ä¸å…¬æœ‰åœ°å€è¿›è¡Œä¸€å¯¹ä¸€çš„æ˜ å°„ï¼Œè¿™ç§ä¸€å¯¹ä¸€æ˜ å°„æ— æ³•ç¼“è§£å¯ç”¨å…¬æœ‰åœ°å€çŸ­ç¼ºçš„é—®é¢˜ã€‚åŠ¨æ€NATï¼šç§æœ‰åœ°å€ä¸å…¬æœ‰åœ°å€è¿›è¡Œä¸€å¯¹å¤šçš„æ˜ å°„ï¼Œå…ˆå»ºç«‹å…¬æœ‰åœ°å€æ± ï¼Œå½“ç§æœ‰åœ°å€å‘å¤–é€šä¿¡æ—¶ï¼Œä¼šä»å…¬æœ‰åœ°å€æ± ä¸­é€‰æ‹©éåœ¨ç”¨çš„å…¬æœ‰åœ°å€è¿›è¡Œæ˜ å°„ï¼Œå½“é€šä¿¡ç»“æŸæ—¶ï¼Œé‡Šæ”¾æ˜ å°„å…³ç³»ï¼Œå…¬æœ‰åœ°å€é‡æ–°æ¢å¤åˆ°åœ°å€æ± ä¸­å¾…ç”¨ã€‚\n\nNAPT(Network Address/Port  Translator)ï¼Œä»åç§°ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å¾—å‡ºï¼ŒNAPTä¸ä½†ä¼šè½¬æ¢ç»è¿‡çš„æ•°æ®åŒ…çš„IPåœ°å€ï¼Œè¿˜ä¼šè½¬æ¢æ•°æ®åŒ…çš„TCP/UDPç«¯å£ã€‚ç”±äºç°åœ¨å¤§éƒ¨åˆ†éƒ½å±äºNAPTï¼Œæ•…è¿™é‡Œä¸è¯¦ç»†è®¨è®ºåŸºç¡€NATï¼Œä¸‹æ–‡çš„NATæŒ‡NAPTã€‚\n\nNATæœ‰4ç§ç±»å‹ï¼šå®Œå…¨é”¥å½¢NAT(Full Clone NAT)ã€é™åˆ¶æ€§é”¥å½¢NAT(Restricted Clone NAT)ã€ç«¯å£é™åˆ¶æ€§é”¥å½¢NAT( Port Restricted  Clone NAT)ã€å¯¹ç§°å¼NAT(Symmetric NAT)ï¼Œå‰é¢3ç§æ˜¯é”¥å½¢NAT(Clone NAT)ã€‚\n\n### 2.1.å®Œå…¨é”¥å½¢NAT(Full Clone NAT)\n\nå®Œå…¨é”¥å½¢NAT(Full Clone NAT)ï¼šæ‰€æœ‰ä»åŒä¸€ä¸ªå†…ç½‘ä¸»æœºçš„IPå’Œç«¯å£å‘é€å‡ºæ¥çš„è¯·æ±‚éƒ½ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªNATçš„å¤–ç½‘IPå’Œç«¯å£ï¼Œä¸”ä»»ä½•ä¸€ä¸ªå¤–ç½‘ä¸»æœºå‡å¯é€šè¿‡æ­¤æ˜ å°„è¡¨é¡¹å‘é€æ•°æ®åŒ…åˆ°å¯¹åº”çš„å†…ç½‘ä¸»æœºã€‚å¤–ç½‘ä¸»æœºå¯ä»¥ä¸»åŠ¨è¿æ¥å†…ç½‘ä¸»æœºï¼Œæœ‰ç‚¹ç±»ä¼¼äºé™æ€NATã€‚\n\n### 2.2.é™åˆ¶æ€§é”¥å½¢NAT(Restricted Clone NAT)\n\né™åˆ¶æ€§é”¥å½¢NAT(Restricted Clone  NAT)ï¼šæ‰€æœ‰ä»åŒä¸€ä¸ªå†…ç½‘ä¸»æœºçš„IP(æ ‡ä¸ºSrc_IP)å’Œç«¯å£(æ ‡è®°Src_IP)å‘é€å‡ºæ¥çš„å¤–ç½‘è¯·æ±‚éƒ½ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªNATçš„å¤–ç½‘IPå’Œç«¯å£ï¼Œä½†å¢åŠ äº†ä¸€ä¸ªé™åˆ¶ï¼šåªæœ‰è¢«å†…ç½‘ä¸»æœº(Src_IP:Src_IP)è¯·æ±‚è¿‡çš„å¤–ç½‘ä¸»æœºIPæ‰èƒ½è¢«ä½¿ç”¨(æ­¤å¤–ç½‘ä¸»æœºå¯ä½¿ç”¨ä»»æ„ç«¯å£)ï¼Œå¦åˆ™å¤–ç½‘å‘é€çš„æ•°æ®åŒ…ä¼šè¢«ä¸¢å¼ƒã€‚é™åˆ¶æ€§é”¥å½¢NATä¹Ÿè¢«ç§°ä¸ºIPé™åˆ¶æ€§é”¥å½¢NATæˆ–åœ°å€é™åˆ¶æ€§é”¥å½¢NATã€‚\n\n### 2.3.ç«¯å£é™åˆ¶æ€§é”¥å½¢NAT( Port Restricted Clone NAT)\n\nç«¯å£é™åˆ¶æ€§é”¥å½¢NAT( Port Restricted Clone  NAT)ï¼šæ‰€æœ‰ä»åŒä¸€ä¸ªå†…ç½‘ä¸»æœºçš„IP(æ ‡ä¸ºSrc_IP)å’Œç«¯å£(æ ‡è®°Src_IP)å‘é€å‡ºæ¥çš„å¤–ç½‘è¯·æ±‚éƒ½ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªNATçš„å¤–ç½‘IPå’Œç«¯å£ï¼Œä½†é™åˆ¶ï¼šåªæœ‰è¢«å†…ç½‘ä¸»æœº(Src_IP:Src_IP)è¯·æ±‚è¿‡çš„å¤–ç½‘ä¸»æœºIPå’Œç«¯å£æ‰èƒ½è¢«ä½¿ç”¨ï¼Œå¦åˆ™å¤–ç½‘å‘é€çš„æ•°æ®åŒ…ä¼šè¢«ä¸¢å¼ƒã€‚å³åœ¨IPå—é™é”¥å½¢NATåŸºç¡€ä¸Šå¢åŠ äº†ç«¯å£çš„é™åˆ¶ã€‚\n\n### 2.4.å¯¹ç§°å¼NAT(Symmetric NAT)\n\nå¯¹ç§°å¼NAT(Symmetric  NAT)ï¼šæ‰€æœ‰ä»åŒä¸€ä¸ªå†…ç½‘ä¸»æœºçš„IP(æ ‡ä¸ºSrc_IP)å’Œç«¯å£(æ ‡è®°Src_IP)å‘é€åˆ°åŒä¸€ä¸ªå¤–ç½‘ä¸»æœº(IPåœ°å€æ ‡ä¸ºç›®çš„Des_IPï¼Œç«¯å£æ ‡è®°ä¸ºDes_Port)çš„è¯·æ±‚éƒ½ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªNATçš„å¤–ç½‘IPå’Œç«¯å£ã€‚å³æ­¤æ˜ å°„è¡¨é¡¹åªèƒ½è¢«å¤–ç½‘ä¸»æœº(Des_IP:Des_Port)æ‰€ç”¨ã€‚\n\nçœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰å¦‚ä¸‹ç½‘ç»œï¼ŒClientä½¿ç”¨666ç«¯å£è®¿é—®äº†Server1çš„1999ç«¯å£ã€1988ç«¯å£å’ŒServer2çš„1888ç«¯å£ã€‚\n\n![image-20230721085410781](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085410781.png)\n\næ ¹æ®NATç±»å‹ï¼Œå¯èƒ½äº§ç”Ÿå¦‚ä¸‹æ˜ å°„è¡¨ï¼Œâ†”ç¬¦å·å·¦è¡¨ç¤ºå†…ç½‘ä¸»æœºIPå’Œç«¯å£ï¼Œâ†”ç¬¦å·å³è¡¨ç¤ºNATçš„å¤–ç½‘IPå’Œç«¯å£ï¼Œ@ç¬¦å·å³è¡¨ç¤ºé™åˆ¶æ¡ä»¶ï¼šå¤–ç½‘ä¸»æœºåœ°å€IPå’Œç«¯å£ã€‚\n\n![image-20230721085428394](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085428394.png)\n\nå®é™…ä¸Šå¤§éƒ¨è¿è¥å•†æä¾›çš„å…‰çŒ«ä¸Šç½‘æœåŠ¡éƒ½æ˜¯é”¥å½¢NATçš„ï¼Œè€Œ3Gã€4Gç½‘ç»œã€å…¬å…±WiFiç­‰å› ä¸ºå®‰å…¨å› ç´ éƒ½æ˜¯å¯¹ç§°å¼NATã€‚\n\n## NATç©¿é€\n\nNATæŠ€æœ¯è™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šåœ¨è§£å†³IPv4åœ°å€ã€æ„å»ºé˜²ç«å¢™ã€ä¿è¯ç½‘ç»œå®‰å…¨æ–¹é¢éƒ½å‘æŒ¥äº†ä¸€å®šçš„ä½œç”¨ï¼Œå› ä¸å…è®¸å¤–ç½‘ä¸»æœºè®¿é—®å†…ç½‘ä¸»æœºï¼Œå´ç ´åäº†ç«¯åˆ°ç«¯çš„ç½‘ç»œé€šä¿¡ã€‚ä¸ºäº†è®©è·¨è¶ŠNATçš„ä¸»æœºä¹‹é—´æœ‰æ•ˆçš„P2Pé€šä¿¡ï¼Œéœ€è¦ç”¨åˆ°NATç©¿é€ï¼Œæˆ–è€…å«åšNATæ‰“æ´ã€‚\n\nSTUNï¼ˆSession Traversal Utilities for NATï¼ŒNATä¼šè¯ç©¿è¶Šåº”ç”¨ç¨‹åºï¼ŒIETF RFC  3489ï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œå®ƒå…è®¸ä½äºNATï¼ˆæˆ–å¤šé‡NATï¼‰åçš„å®¢æˆ·ç«¯æ‰¾å‡ºè‡ªå·±çš„å…¬ç½‘åœ°å€ï¼ŒæŸ¥å‡ºè‡ªå·±ä½äºå“ªç§ç±»å‹çš„NATä¹‹åä»¥åŠNATä¸ºæŸä¸€ä¸ªæœ¬åœ°ç«¯å£æ‰€ç»‘å®šçš„Internetç«¯ç«¯å£ã€‚\n\n### æ£€æµ‹NATç±»å‹\n\nç¬¬ä¸€æ­¥ å¯¹ç§°å¼NATã€é”¥å½¢NATæ£€æµ‹ï¼š\n\n1. Clienté¦–å…ˆä½¿ç”¨ç›¸åŒçš„ç«¯å£åˆ†åˆ«è¿æ¥Server1å’ŒServer2ï¼ŒServer1è·å–åˆ°NATæ˜ å°„çš„IP1:Port1ï¼ŒServer2è·å–åˆ°NATæ˜ å°„çš„IP2:Port2ï¼›\n2. Server2æŠŠIP2:Port2å‘ç»™Server1ï¼ŒServer1å¯¹æ¯”IP1:Port1å’ŒIP2:Port2ï¼Œè‹¥ä¸ç›¸ç­‰ï¼ŒNATæ˜¯å¯¹ç§°å¼ï¼›å¦åˆ™å°±æ˜¯é”¥å½¢NATã€‚\n\n![image-20230721085521225](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085521225.png)\n\nç¬¬äºŒæ­¥ é™åˆ¶é”¥å½¢NATã€å®Œå…¨é”¥å½¢NATæ£€æµ‹ï¼š\n\n1. Clienté¦–å…ˆå‘Server2å‘é€æ¶ˆæ¯Mesgï¼ŒServer2è·å–åˆ°NATæ˜ å°„çš„IP2:Port2å’ŒMesgï¼›\n2. Server2æŠŠIP2:Port2å’ŒMesgå‘ç»™Server1ï¼›\n3. Server1å‘IP2:Port2å‘é€æ¶ˆæ¯Mesgï¼ŒClientå¦‚æœæ”¶åˆ°Mesgï¼ŒNATå®Œå…¨é”¥å½¢ï¼Œå¦åˆ™å°±æ˜¯é™åˆ¶æ€§é”¥å½¢ã€‚\n\n![image-20230721085538769](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085538769.png)\n\nç¬¬ä¸‰æ­¥ IPé™åˆ¶é”¥å½¢NATã€ç«¯å£é™åˆ¶é”¥å½¢NATæ£€æµ‹ï¼š\n\n1. Clienté¦–å…ˆå‘Server1å‘é€æ¶ˆæ¯Mesgï¼ŒServer1ä½¿ç”¨Port_S1æ¥æ”¶Mesgï¼Œå¹¶è·å–åˆ°NATæ˜ å°„çš„IP1:Port1ï¼›\n2. Server1å¦å–ä¸€é—²ç½®ç«¯å£Port_Sx(Port_Sxâ‰ Port_S1)ï¼ŒServer1ä½¿ç”¨Port_Sxå›å¤Mesgåˆ°IP1:Port1ï¼Œè‹¥Clientæ”¶åˆ°Mesgï¼ŒNATæ˜¯IPé™åˆ¶é”¥å½¢ï¼Œå¦åˆ™æ˜¯ç«¯å£é™åˆ¶é”¥å½¢ã€‚\n\n![image-20230721085555219](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085555219.png)\n\n### NATç©¿é€åŸç†ä¸èƒ½åŠ›\n\nNATç©¿é€åŸç†å¦‚ä¸‹å›¾å¯ä»¥ç®€è¦åˆ†ä¸º6æ­¥ï¼š\n\n1. Client1å’ŒClient2åˆ†åˆ«ä¸Serverè¿æ¥ï¼ŒServerç”±æ­¤è·å–ä¸¤è€…åœ¨NAT1å’ŒNAT2ä¸Šçš„å¤–ç½‘æ˜ å°„IP1:Port1å’ŒIP2:Port2ï¼›\n2. ServeræŠŠIP1:Port1å‘ç»™Client2å¹¶å‘Šä¹‹è¿æ¥Clientï¼›\n3. Client2å‘é€è¯·æ±‚IP1:Port1ï¼ŒNAT1æ¥æ”¶åˆ°æ•°æ®åŒ…ç”±äºæ²¡æœ‰å¯¹åº”çš„æ˜ å°„è¡¨é¡¹ï¼ŒNAT1æŠŠæ•°æ®åŒ…ä¸¢å¼ƒï¼Œä½†åœ¨NAT2ä¸Šç•™ä¸‹IP1:Port1æ˜ å°„è¡¨é¡¹ï¼›\n4. Client2å‘Serverå‘é€æ¶ˆæ¯ï¼šè¯·æ±‚Serverè½¬å‘ŠClient1è¿æ¥Client2ï¼ŒServerå‘é€IP2:Port2ç»™Client1å¹¶å‘ŠçŸ¥è¿æ¥IP2:Port2ï¼›\n5. Client1è¿æ¥IP2:Port2ï¼›\n6. Client2æ¥æ”¶åˆ°Client1è¿æ¥ï¼Œç©¿é€æˆåŠŸï¼›æ¥æ”¶ä¸åˆ°åˆ™ç©¿é€å¤±è´¥ã€‚\n\n![image-20230721085613481](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230721085613481.png)\n\n## ä½¿ç”¨å¼€æºé¡¹ç›®æ­å»ºp2p\n\nç›®å‰githubæœ‰ä¸¤æ¬¾æ¯”è¾ƒç«çš„å†…ç½‘ç©¿é€å·¥å…·ï¼Œåˆ†åˆ«æ˜¯[frp](https://github.com/fatedier/frp)å’Œ[nps](https://github.com/ehang-io/nps)\n\nåŒ…æ‹¬[æµ‹è¯•æœ¬åœ°natå·¥å…·](https://github.com/HMBSbige/NatTypeTester/releases/download/3.4/NatTypeTester.exe)\n","tags":["è®¡ç®—æœºç½‘ç»œ"],"categories":["è®¡ç®—æœºç½‘ç»œ"]},{"title":"javaä¸­ä½¿ç”¨websocket","url":"/2023/07/16/javaä¸­çš„websocket/","content":"\n## websocketä»‹ç»\n\n WebSocketæ˜¯åŸºäºTCPçš„åº”ç”¨å±‚åè®®ï¼Œç”¨äºåœ¨C/Sæ¶æ„çš„åº”ç”¨ä¸­å®ç°åŒå‘é€šä¿¡ï¼Œå®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨å…¨åŒå·¥(full-duplex)é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯å…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘é€ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚\n\nWebSocket åè®®ä¸»è¦ä¸ºäº†è§£å†³åŸºäº HTTP/1.x çš„ Web åº”ç”¨æ— æ³•å®ç°æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ä¸»åŠ¨æ¨é€çš„é—®é¢˜, ä¸ºäº†å…¼å®¹ç°æœ‰çš„è®¾æ–½, WebSocket åè®®ä½¿ç”¨ä¸ HTTP åè®®ç›¸åŒçš„ç«¯å£, å¹¶ä½¿ç”¨ HTTP Upgrade æœºåˆ¶æ¥è¿›è¡Œ WebSocket æ¡æ‰‹, å½“æ¡æ‰‹å®Œæˆä¹‹å, é€šä¿¡åŒæ–¹ä¾¿å¯ä»¥æŒ‰ç…§ WebSocket åè®®çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚\n\néœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šè™½ç„¶WebSocketåè®®åœ¨å»ºç«‹è¿æ¥æ—¶ä¼šä½¿ç”¨HTTPåè®®ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€WebSocketåè®®æ˜¯åŸºäºHTTPåè®®å®ç°çš„ã€‚\n\n## WebSocketä¸Httpçš„åŒºåˆ«\n\nå®é™…ä¸Šï¼ŒWebSocketåè®®ä¸Httpåè®®æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼š\n\n### 1.é€šä¿¡æ–¹å¼ä¸åŒ\n\nWebSocketæ˜¯åŒå‘é€šä¿¡æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´åªæœ‰åœ¨æ¡æ‰‹é˜¶æ®µæ˜¯ä½¿ç”¨HTTPåè®®çš„â€œè¯·æ±‚-å“åº”â€æ¨¡å¼äº¤äº’ï¼Œè€Œä¸€æ—¦è¿æ¥å»ºç«‹ä¹‹åçš„é€šä¿¡åˆ™ä½¿ç”¨åŒå‘æ¨¡å¼äº¤äº’ï¼Œä¸è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯éƒ½å¯ä»¥éšæ—¶å°†æ•°æ®å‘é€ç»™å¯¹æ–¹ï¼›è€ŒHTTPåè®®åˆ™è‡³å§‹è‡³ç»ˆéƒ½é‡‡ç”¨â€œè¯·æ±‚-å“åº”â€æ¨¡å¼è¿›è¡Œé€šä¿¡ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼ŒHTTPåè®®çš„é€šä¿¡æ•ˆç‡æ²¡æœ‰WebSocketé«˜ã€‚\n![image-20230716190955787](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230716190955787.png)\n\n### 2.åè®®æ ¼å¼ä¸åŒ\n\nWebSocketä¸HTTPçš„åè®®æ ¼å¼æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå…·ä½“æ¥è®²ï¼š\nï¼ˆ1ï¼‰HTTPåè®®ï¼ˆå‚è§ï¼šrfc2616ï¼‰æ¯”è¾ƒè‡ƒè‚¿ï¼Œè€ŒWebSocketåè®®æ¯”è¾ƒè½»é‡ã€‚\nï¼ˆ2ï¼‰å¯¹äºHTTPåè®®æ¥è®²ï¼Œä¸€ä¸ªæ•°æ®åŒ…å°±æ˜¯ä¸€æ¡å®Œæ•´çš„æ¶ˆæ¯ï¼›è€ŒWebSocketå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„æœ€å°å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼Œç”±1ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆä¸€æ¡å®Œæ•´çš„æ¶ˆæ¯ï¼ˆmessageï¼‰ã€‚å³ï¼šå‘é€ç«¯å°†æ¶ˆæ¯åˆ‡å‰²æˆå¤šä¸ªå¸§ï¼Œå¹¶å‘é€ç»™æœåŠ¡ç«¯ï¼›æœåŠ¡ç«¯æ¥æ”¶æ¶ˆæ¯å¸§ï¼Œå¹¶å°†å…³è”çš„å¸§é‡æ–°ç»„è£…æˆå®Œæ•´çš„æ¶ˆæ¯ã€‚\nWebSocketåè®®æ ¼å¼ï¼š\n\n```bash\nbashå¤åˆ¶ä»£ç  0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-------+-+-------------+-------------------------------+\n|F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n|N|V|V|V|       |S|             |   (if payload len==126/127)   |\n| |1|2|3|       |K|             |                               |\n+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n|     Extended payload length continued, if payload len == 127  |\n+ - - - - - - - - - - - - - - - +-------------------------------+\n|                               |Masking-key, if MASK set to 1  |\n+-------------------------------+-------------------------------+\n| Masking-key (continued)       |          Payload Data         |\n+-------------------------------- - - - - - - - - - - - - - - - +\n:                     Payload Data continued ...                :\n+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n|                     Payload Data continued ...                |\n+---------------------------------------------------------------+\n```\n\nHTTPè¯·æ±‚æ¶ˆæ¯æ ¼å¼ï¼š\n\n```bash\nbashå¤åˆ¶ä»£ç Request-LineCRLF\ngeneral-headerCRLF\nrequest-headerCRLF\nentity-headerCRLF\nCRLF\n[ message-body ]\n```\n\nHTTPå“åº”æ¶ˆæ¯æ ¼å¼ï¼š\n\n```bash\nbashå¤åˆ¶ä»£ç Status-LineCRLF\ngeneral-headerCRLF\nresponse-headerCRLF\nentity-headerCRLF\nCRLF\n[ message-body ]\n```\n\nè™½ç„¶WebSocketå’ŒHTTPæ˜¯ä¸åŒåº”ç”¨åè®®ï¼Œä½†rfc6455è§„å®šï¼šâ€œWebSocketè®¾è®¡ä¸ºé€šè¿‡80å’Œ443ç«¯å£å·¥ä½œï¼Œä»¥åŠæ”¯æŒHTTPä»£ç†å’Œä¸­ä»‹â€ï¼Œä»è€Œä½¿å…¶ä¸HTTPåè®®å…¼å®¹ã€‚ä¸ºäº†å®ç°å…¼å®¹æ€§ï¼ŒWebSocketæ¡æ‰‹æ—¶ä½¿ç”¨HTTP Upgradeå¤´ä»HTTPåè®®æ›´æ”¹ä¸ºWebSocketåè®®ã€‚\n\n## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨WebSocket\n\néšç€Webåº”ç”¨çš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯åŠ¨æ€ç½‘é¡µçš„æ™®åŠï¼Œè¶Šæ¥è¶Šå¤šçš„åœºæ™¯éœ€è¦å®ç°æ•°æ®åŠ¨æ€åˆ·æ–°ã€‚\nåœ¨æ—©æœŸçš„æ—¶å€™ï¼Œå®ç°æ•°æ®åˆ·æ–°çš„æ–¹å¼é€šå¸¸æœ‰å¦‚ä¸‹3ç§ï¼š\n1.å®¢æˆ·ç«¯å®šæ—¶æŸ¥è¯¢\nå®¢æˆ·ç«¯å®šæ—¶æŸ¥è¯¢ï¼ˆå¦‚ï¼šæ¯éš”10ç§’é’ŸæŸ¥è¯¢ä¸€æ¬¡ï¼‰æ˜¯æœ€åŸå§‹ä¹Ÿæ˜¯æœ€ç®€å•çš„å®ç°æ•°æ®åˆ·æ–°çš„æ–¹æ³•ï¼ŒæœåŠ¡ç«¯ä¸ç”¨åšä»»ä½•æ”¹åŠ¨ï¼Œåªéœ€è¦åœ¨å®¢æˆ·ç«¯æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨å³å¯ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šå¤§é‡çš„å®šæ—¶è¯·æ±‚éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºæœåŠ¡ç«¯çš„æ•°æ®å¹¶æ²¡æœ‰æ›´æ–°ï¼Œç›¸åº”åœ°ä¹Ÿå¯¼è‡´äº†å¤§é‡çš„å¸¦å®½æµªè´¹ã€‚\n\n2.é•¿è½®è®­æœºåˆ¶\né•¿è½®è®­æœºåˆ¶æ˜¯å¯¹å®¢æˆ·ç«¯å®šæ—¶æŸ¥è¯¢çš„ä¸€ç§æ”¹è¿›ï¼Œå³ï¼šå®¢æˆ·ç«¯ä¾æ—§ä¿æŒå®šæ—¶å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ï¼Œä½†æ˜¯æœåŠ¡ç«¯å¹¶ä¸ç«‹å³å“åº”ï¼Œè€Œæ˜¯ç­‰åˆ°çœŸæ­£æœ‰æ•°æ®æ›´æ–°çš„æ—¶å€™æ‰å‘é€ç»™å®¢æˆ·ç«¯ã€‚å®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯å½“æ²¡æœ‰æ•°æ®æ›´æ–°æ—¶æœåŠ¡ç«¯å°±æ°¸è¿œéƒ½ä¸å“åº”å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯éœ€è¦åœ¨ç­‰å¾…ä¸€ä¸ªè¶…æ—¶æ—¶é—´ä¹‹åç»“æŸè¯¥æ¬¡é•¿è½®è®­è¯·æ±‚ã€‚ç›¸å¯¹äºå®¢æˆ·ç«¯å®šæ—¶æŸ¥è¯¢æ–¹å¼è€Œè¨€ï¼Œå½“æ•°æ®æ›´æ–°é¢‘ç‡ä¸ç¡®å®šæ—¶é•¿è½®è®­æœºåˆ¶èƒ½å¤Ÿå¾ˆæ˜æ˜¾åœ°å‡å°‘è¯·æ±‚æ•°ã€‚ä½†æ˜¯ï¼Œåœ¨æ•°æ®æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„åœºæ™¯ä¸‹ï¼Œé•¿è½®è®­æ–¹å¼çš„ä¼˜åŠ¿å°±æ²¡é‚£ä¹ˆæ˜æ˜¾äº†ã€‚\nåœ¨Webå¼€å‘ä¸­ä½¿ç”¨å¾—æœ€ä¸ºæ™®éçš„é•¿è½®è®­å®ç°æ–¹æ¡ˆä¸ºCometï¼ˆComet (webæŠ€æœ¯)ï¼‰ï¼ŒTomcatå’ŒJettyéƒ½æœ‰å¯¹åº”çš„å®ç°æ”¯æŒï¼Œè¯¦è§ï¼šWhatIsCometï¼ŒWhy Asynchronous Servletsã€‚\n\n3.HTTP Streaming\nä¸è®ºæ˜¯é•¿è½®è®­æœºåˆ¶è¿˜æ˜¯ä¼ ç»Ÿçš„å®¢æˆ·ç«¯å®šæ—¶æŸ¥è¯¢æ–¹å¼ï¼Œéƒ½éœ€è¦å®¢æˆ·ç«¯ä¸æ–­åœ°å‘é€è¯·æ±‚ä»¥è·å–æ•°æ®æ›´æ–°ï¼Œè€ŒHTTP Streamingåˆ™è¯•å›¾æ”¹å˜è¿™ç§æ–¹å¼ï¼Œå…¶å®ç°æœºåˆ¶ä¸ºï¼šå®¢æˆ·ç«¯å‘é€è·å–æ•°æ®æ›´æ–°è¯·æ±‚åˆ°æœåŠ¡ç«¯æ—¶ï¼ŒæœåŠ¡ç«¯å°†ä¿æŒè¯¥è¯·æ±‚çš„å“åº”æ•°æ®æµä¸€ç›´æ‰“å¼€ï¼Œåªè¦æœ‰æ•°æ®æ›´æ–°å°±å®æ—¶åœ°å‘é€ç»™å®¢æˆ·ç«¯ã€‚\nè™½ç„¶è¿™ä¸ªè®¾æƒ³æ˜¯éå¸¸ç¾å¥½çš„ï¼Œä½†è¿™å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼š\n(1)HTTP Streamingçš„å®ç°æœºåˆ¶è¿èƒŒäº†HTTPåè®®æœ¬èº«çš„è¯­ä¹‰ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¸å†æ˜¯â€œè¯·æ±‚-å“åº”â€çš„äº¤äº’æ–¹å¼ï¼Œè€Œæ˜¯ç›´æ¥åœ¨äºŒè€…å»ºç«‹èµ·äº†ä¸€ä¸ªå•å‘çš„â€œé€šä¿¡ç®¡é“â€ã€‚\n(2)åœ¨HTTP Streamingæ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯åªè¦å¾—åˆ°æ•°æ®æ›´æ–°å°±å‘é€ç»™å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå°±éœ€è¦å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åå•†å¦‚ä½•åŒºåˆ†æ¯ä¸€ä¸ªæ›´æ–°æ•°æ®åŒ…çš„å¼€å§‹å’Œç»“å°¾ï¼Œå¦åˆ™å°±å¯èƒ½å‡ºç°è§£ææ•°æ®é”™è¯¯çš„æƒ…å†µã€‚\n(3)å¦å¤–ï¼Œå¤„äºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ç½‘ç»œä¸­ä»‹ï¼ˆå¦‚ï¼šä»£ç†ï¼‰å¯èƒ½ä¼šç¼“å­˜å“åº”æ•°æ®æµï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å®¢æˆ·ç«¯æ— æ³•çœŸæ­£è·å–åˆ°æœåŠ¡ç«¯çš„æ›´æ–°æ•°æ®ï¼Œè¿™å®é™…ä¸Šä¸HTTP Streamingçš„æœ¬æ„æ˜¯ç›¸è¿èƒŒçš„ã€‚\né‰´äºä¸Šè¿°åŸå› ï¼Œåœ¨å®é™…åº”ç”¨ä¸­HTTP Streamingå¹¶æ²¡æœ‰çœŸæ­£æµè¡Œèµ·æ¥ï¼Œåä¹‹ä½¿ç”¨å¾—æœ€å¤šçš„æ˜¯é•¿è½®è®­æœºåˆ¶ã€‚\n\næ˜¾ç„¶ï¼Œä¸Šè¿°å‡ ç§å®ç°æ•°æ®åŠ¨æ€åˆ·æ–°çš„æ–¹å¼éƒ½æ˜¯åŸºäºHTTPåè®®å®ç°çš„ï¼Œæˆ–å¤šæˆ–å°‘åœ°å­˜åœ¨è¿™æ ·é‚£æ ·çš„é—®é¢˜å’Œç¼ºé™·ï¼›è€ŒWebSocketæ˜¯ä¸€ä¸ªå…¨æ–°çš„åº”ç”¨å±‚åè®®ï¼Œä¸“é—¨ç”¨äºWebåº”ç”¨ä¸­éœ€è¦å®ç°åŠ¨æ€åˆ·æ–°çš„åœºæ™¯ã€‚\nç›¸æ¯”èµ·HTTPåè®®ï¼ŒWebSocketå…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n\næ”¯æŒåŒå‘é€šä¿¡ï¼Œå®æ—¶æ€§æ›´å¼ºã€‚\næ›´å¥½çš„äºŒè¿›åˆ¶æ”¯æŒã€‚\nè¾ƒå°‘çš„æ§åˆ¶å¼€é”€ï¼šè¿æ¥åˆ›å»ºåï¼ŒWebSocketeå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯è¿›è¡Œæ•°æ®äº¤æ¢æ—¶ï¼Œåè®®æ§åˆ¶çš„æ•°æ®åŒ…å¤´éƒ¨è¾ƒå°ã€‚\næ”¯æŒæ‰©å±•ã€‚\n\n\n\n## Javaä¸­å®ç°ç®€å•çš„websocket\n\nå¼•å…¥ä¾èµ–\n\n```xml\n<dependency>\n     <groupId>org.java-websocket</groupId>\n     <artifactId>Java-WebSocket</artifactId>\n     <version>1.5.3</version>\n</dependency>\n```\n\næœåŠ¡ç«¯ï¼š\n\n```java\npublic class ChatServer extends WebSocketServer {\n\n    public ChatServer(int port) throws UnknownHostException {\n        super(new InetSocketAddress(port));\n    }\n\n    public ChatServer(InetSocketAddress address) {\n        super(address);\n    }\n\n    public ChatServer(int port, Draft_6455 draft) {\n        super(new InetSocketAddress(port), Collections.<Draft>singletonList(draft));\n    }\n\n    @Override\n    public void onOpen(WebSocket conn, ClientHandshake handshake) {\n        conn.send(\"Welcome to the server!\"); //This method sends a message to the new client\n        broadcast(\"new connection: \" + handshake\n                .getResourceDescriptor()); //This method sends a message to all clients connected\n        System.out.println(\n                conn.getRemoteSocketAddress().getAddress().getHostAddress() + \" entered the room!\");\n    }\n\n    @Override\n    public void onClose(WebSocket conn, int code, String reason, boolean remote) {\n        broadcast(conn + \" has left the room!\");\n        System.out.println(conn + \" has left the room!\");\n    }\n\n    @Override\n    public void onMessage(WebSocket conn, String message) {\n        broadcast(message);\n        System.out.println(conn + \": \" + message);\n    }\n\n    @Override\n    public void onMessage(WebSocket conn, ByteBuffer message) {\n        broadcast(message.array());\n        System.out.println(conn + \": \" + message);\n    }\n\n\n    public static void main(String[] args) throws InterruptedException, IOException {\n        int port = 8887; // 843 flash policy port\n        try {\n            port = Integer.parseInt(args[0]);\n        } catch (Exception ex) {\n        }\n        ChatServer s = new ChatServer(port);\n        s.start();\n        System.out.println(\"ChatServer started on port: \" + s.getPort());\n\n        BufferedReader sysin = new BufferedReader(new InputStreamReader(System.in));\n        while (true) {\n            String in = sysin.readLine();\n            s.broadcast(in);\n            if (in.equals(\"exit\")) {\n                s.stop(1000);\n                break;\n            }\n        }\n    }\n\n    @Override\n    public void onError(WebSocket conn, Exception ex) {\n        ex.printStackTrace();\n        if (conn != null) {\n            // some errors like port binding failed may not be assignable to a specific websocket\n        }\n    }\n\n    @Override\n    public void onStart() {\n        System.out.println(\"Server started!\");\n        setConnectionLostTimeout(0);\n        setConnectionLostTimeout(100);\n    }\n\n}\n```\n\nå®¢æˆ·ç«¯ï¼š\n\n```java\npublic class ExampleClient extends WebSocketClient {\n\n    public ExampleClient(URI serverUri, Draft draft) {\n        super(serverUri, draft);\n    }\n\n    public ExampleClient(URI serverURI) {\n        super(serverURI);\n    }\n\n    public ExampleClient(URI serverUri, Map<String, String> httpHeaders) {\n        super(serverUri, httpHeaders);\n    }\n\n    @Override\n    public void onOpen(ServerHandshake handshakedata) {\n        send(\"Hello, it is me. Mario :)\");\n        System.out.println(\"opened connection\");\n        // if you plan to refuse connection based on ip or httpfields overload: onWebsocketHandshakeReceivedAsClient\n    }\n\n    @Override\n    public void onMessage(String message) {\n        System.out.println(\"received: \" + message);\n    }\n\n    @Override\n    public void onClose(int code, String reason, boolean remote) {\n        // The close codes are documented in class org.java_websocket.framing.CloseFrame\n        System.out.println(\n                \"Connection closed by \" + (remote ? \"remote peer\" : \"us\") + \" Code: \" + code + \" Reason: \"\n                        + reason);\n    }\n\n    @Override\n    public void onError(Exception ex) {\n        ex.printStackTrace();\n        // if the error is fatal then onClose will be called additionally\n    }\n\n    public static void main(String[] args) throws URISyntaxException {\n        ExampleClient c = new ExampleClient(new URI(\n                \"ws://localhost:8887\")); // more about drafts here: http://github.com/TooTallNate/Java-WebSocket/wiki/Drafts\n        c.connect();\n    }\n\n}\n```\n\nè¿è¡Œå®ä¾‹(æœåŠ¡ç«¯)ï¼š\n\n```bash\nChatServer started on port: 8887\nServer started!\n127.0.0.1 entered the room!\norg.java_websocket.WebSocketImpl@684c7918: Hello, it is me. Mario :)\nnihao1\n127.0.0.1 entered the room!\norg.java_websocket.WebSocketImpl@a842999 has left the room!\n127.0.0.1 entered the room!\norg.java_websocket.WebSocketImpl@4fd85867 has left the room!\n\n```\n\nè¿è¡Œå®ä¾‹(å®¢æˆ·ç«¯):\n\n```java\nopened connection\nreceived: Welcome to the server!\nreceived: new connection: /\nreceived: Hello, it is me. Mario :)\nreceived: nihao1\nreceived: new connection: /\nreceived: org.java_websocket.WebSocketImpl@a842999 has left the room!\nreceived: new connection: /\nreceived: org.java_websocket.WebSocketImpl@4fd85867 has left the room!\n```\n\n","tags":["websocket"],"categories":["javaå…¨æ ˆ"]},{"title":"kubernetesé›†ç¾¤éƒ¨ç½²","url":"/2023/07/12/kubernetesé›†ç¾¤éƒ¨ç½²/","content":"\n## 1. å®‰è£…kubeé›†ç¾¤ï¼ˆ4èŠ‚ç‚¹ï¼‰\n\n### 1.1 å‡†å¤‡å·¥ä½œï¼ˆæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ‰§è¡Œï¼‰\n\nç¼–è¾‘4å°æœåŠ¡å™¨çš„ `/etc/hosts` æ–‡ä»¶ ,æ·»åŠ ä¸‹é¢å†…å®¹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡Œä¸€éï¼‰ï¼š\n\n```text\n192.168.2.1 node1\n192.168.2.2 node2\n192.168.2.3 node3\n192.168.2.4 node4\n```\n\nè®¾ç½®hostnameï¼ˆä»¥node1ä¸ºä¾‹ï¼‰ï¼š\n\n```bash\nhostnamectl set-hostname  node1  # node1 æ˜¯è‡ªå®šä¹‰åå­—\n```\n\næˆ–è€…ä¿®æ”¹ `/etc/hostname` æ–‡ä»¶ï¼Œå†™å…¥`node1`ï¼ˆå…¶ä»–çš„å­èŠ‚ç‚¹éƒ½ä¸€æ ·ï¼‰ï¼š\n\n```bash\nvim /etc/hostname\n```\n\nä¿®æ”¹ä¹‹å`/etc/hostname`çš„å†…å®¹ä¸ºï¼š\n\n```bash\nnode1\n```\n\næ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œæ—¶é—´åŒæ­¥ï¼š\n\n```bash\n# å¯åŠ¨chronydæœåŠ¡\nsystemctl start chronyd\nsystemctl enable chronyd\ndate\n```\n\næ‰€æœ‰èŠ‚ç‚¹ç¦ç”¨SELinuxå’ŒFirewalldæœåŠ¡ï¼š\n\n```bash\nsystemctl stop firewalld\nsystemctl disable firewalld\n\nsed -i 's/enforcing/disabled/' /etc/selinux/config # é‡å¯åç”Ÿæ•ˆ\n```\n\næ‰€æœ‰èŠ‚ç‚¹ç¦ç”¨swapåˆ†åŒºï¼š\n\n```bash\n# ä¸´æ—¶ç¦ç”¨swapåˆ†åŒº\nswapoff -a\n\n# æ°¸ä¹…ç¦ç”¨swapåˆ†åŒº\nvi /etc/fstab \n# æ³¨é‡Šæ‰ä¸‹é¢çš„è®¾ç½®\n# /dev/mapper/centos-swap swap\n# ä¹‹åéœ€è¦é‡å¯æœåŠ¡å™¨ç”Ÿæ•ˆ\n```\n\næ‰€æœ‰èŠ‚ç‚¹æ·»åŠ ç½‘æ¡¥è¿‡æ»¤å’Œåœ°å€è½¬å‘åŠŸèƒ½ï¼š\n\n```bash\ncat > /etc/sysctl.d/kubernetes.conf << EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n\n# ç„¶åæ‰§è¡Œ,ç”Ÿæ•ˆ\nsysctl --system\n```\n\nç„¶åæ‰€æœ‰èŠ‚ç‚¹å®‰è£…docker-ceï¼ˆç•¥ï¼‰\n\néœ€è¦æ³¨æ„çš„æ˜¯è¦é…ç½®dockerçš„cgroupdriverï¼š\n\n```json\n{\n  // æ·»åŠ è¿™è¡Œ\n  \"exec-opts\": [\"native.cgroupdriver=systemd\"],\n}\n```\n\næ‰€æœ‰èŠ‚ç‚¹çš„kubernetesé•œåƒåˆ‡æ¢æˆå›½å†…æºï¼š\n\n```bash\ncat > /etc/yum.repos.d/kubernetes.repo << EOF\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n```\n\næ‰€æœ‰èŠ‚ç‚¹å®‰è£…æŒ‡å®šç‰ˆæœ¬ kubeadmï¼Œkubelet å’Œ kubectlï¼ˆæˆ‘è¿™é‡Œé€‰æ‹©`1.23.0`ç‰ˆæœ¬çš„ï¼‰ï¼š\n\n```bash\nyum install -y kubelet-1.23.0 kubeadm-1.23.0 kubectl-1.23.0\n\n# è®¾ç½®kubeletå¼€æœºå¯åŠ¨ï¼ˆçœ‹ä½ è‡ªå·±ï¼‰\nsystemctl enable kubelet\n```\n\n### 1.2 æ›´æ”¹kubeletçš„å®¹å™¨è·¯å¾„ï¼ˆä¸éœ€è¦å¯ä»¥è·³è¿‡ï¼‰\n\n```bash\nvim /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf\n```\n\nä¿®æ”¹å®Œä¹‹åé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```bash\n[Service]\nEnvironment=\"KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --root-dir=/mnt/sdb_new/kubelet/ --kubeconfig=/etc/kubernetes/kubelet.conf\"\n```\n\nä½¿é…ç½®ç”Ÿæ•ˆï¼š\n\n```bash\nsystemctl daemon-reload\nsystemctl restart docker\nsystemctl restart kubelet\n```\n\n### 1.3 éƒ¨ç½²Kubernetesé›†ç¾¤\n\n#### 1.3.1 è¦†ç›–kubernetesçš„é•œåƒåœ°å€ï¼ˆåªéœ€è¦åœ¨masterèŠ‚ç‚¹ä¸Šæ“ä½œåˆå§‹åŒ–å‘½ä»¤ï¼‰\n\n1. é¦–å…ˆè¦è¦†ç›–kubeadmçš„é•œåƒåœ°å€ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯å¤–ç½‘çš„æ— æ³•è®¿é—®ï¼Œéœ€è¦æ›¿æ¢æˆå›½å†…çš„é•œåƒåœ°å€ï¼Œä½¿ç”¨æ­¤å‘½ä»¤åˆ—å‡ºé›†ç¾¤åœ¨é…ç½®è¿‡ç¨‹ä¸­éœ€è¦å“ªäº›é•œåƒï¼š\n\n```bash\n[root@node1 home]# kubeadm config images list\nI0418 18:26:04.047449   19242 version.go:255] remote version is much newer: v1.27.1; falling back to: stable-1.23\nk8s.gcr.io/kube-apiserver:v1.23.17\nk8s.gcr.io/kube-controller-manager:v1.23.17\nk8s.gcr.io/kube-scheduler:v1.23.17\nk8s.gcr.io/kube-proxy:v1.23.17\nk8s.gcr.io/pause:3.6\nk8s.gcr.io/etcd:3.5.1-0\nk8s.gcr.io/coredns/coredns:v1.8.6\n```\n\n2. æ›´æ”¹ä¸ºé˜¿é‡Œäº‘çš„é•œåƒåœ°å€ï¼š\n\n```bash\n[root@node1 home]# kubeadm config images list  --image-repository registry.aliyuncs.com/google_containers\nI0418 18:28:18.740057   20021 version.go:255] remote version is much newer: v1.27.1; falling back to: stable-1.23\nregistry.aliyuncs.com/google_containers/kube-apiserver:v1.23.17\nregistry.aliyuncs.com/google_containers/kube-controller-manager:v1.23.17\nregistry.aliyuncs.com/google_containers/kube-scheduler:v1.23.17\nregistry.aliyuncs.com/google_containers/kube-proxy:v1.23.17\nregistry.aliyuncs.com/google_containers/pause:3.6\nregistry.aliyuncs.com/google_containers/etcd:3.5.1-0\nregistry.aliyuncs.com/google_containers/coredns:v1.8.6\n```\n\n3. ç„¶åå°†é•œåƒæ‰‹åŠ¨æ‹‰å–ä¸‹æ¥ï¼Œè¿™æ ·åœ¨åˆå§‹åŒ–çš„æ—¶å€™å›æ›´å¿«ä¸€äº›ï¼ˆè¿˜æœ‰ä¸€ä¸ªåŠæ³•å°±æ˜¯ç›´æ¥åœ¨dockerä¸ŠæŠŠé•œåƒpullä¸‹æ¥ï¼Œdockeråªè¦é…ç½®ä¸€ä¸‹å›½å†…æºå³å¯å¿«é€Ÿçš„å°†é•œåƒpullä¸‹æ¥ï¼‰ï¼š\n\n```bash\n[root@node1 home]# kubeadm config images pull  --image-repository registry.aliyuncs.com/google_containers\nI0418 18:28:31.795554   20088 version.go:255] remote version is much newer: v1.27.1; falling back to: stable-1.23\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.23.17\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.23.17\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.23.17\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.23.17\n[config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.6\n[config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.1-0\n[config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.8.6\n```\n\n#### 1.3.2 åˆå§‹åŒ–kubernetesï¼ˆåªéœ€è¦åœ¨masterèŠ‚ç‚¹ä¸Šæ“ä½œåˆå§‹åŒ–å‘½ä»¤ï¼‰\n\nåˆå§‹åŒ– Kubernetesï¼ŒæŒ‡å®šç½‘ç»œåœ°å€æ®µ å’Œ é•œåƒåœ°å€ï¼ˆåç»­çš„å­èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨joinå‘½ä»¤è¿›è¡ŒåŠ¨æ€çš„è¿½åŠ ï¼‰ï¼š\n\n```bash\n[root@node1 home]# kubeadm init \\\n  --apiserver-advertise-address=192.168.2.1 \\\n  --image-repository registry.aliyuncs.com/google_containers \\\n  --kubernetes-version v1.23.0 \\\n  --service-cidr=10.96.0.0/12 \\\n  --pod-network-cidr=10.244.0.0/16 \\\n  --ignore-preflight-errors=all\n\n# â€“apiserver-advertise-address # é›†ç¾¤é€šå‘Šåœ°å€(master æœºå™¨IPï¼Œè¿™é‡Œç”¨çš„ä¸‡å…†ç½‘)\n# â€“image-repository # ç”±äºé»˜è®¤æ‹‰å–é•œåƒåœ°å€k8s.gcr.ioå›½å†…æ— æ³•è®¿é—®ï¼Œè¿™é‡ŒæŒ‡å®šé˜¿é‡Œäº‘é•œåƒä»“åº“åœ°å€\n# â€“kubernetes-version #K8sç‰ˆæœ¬ï¼Œä¸ä¸Šé¢å®‰è£…çš„ä¸€è‡´\n# â€“service-cidr #é›†ç¾¤å†…éƒ¨è™šæ‹Ÿç½‘ç»œï¼ŒPodç»Ÿä¸€è®¿é—®å…¥å£ï¼Œå¯ä»¥ä¸ç”¨æ›´æ”¹ï¼Œç›´æ¥ç”¨ä¸Šé¢çš„å‚æ•°\n# â€“pod-network-cidr #Podç½‘ç»œï¼Œä¸ä¸‹é¢éƒ¨ç½²çš„CNIç½‘ç»œç»„ä»¶yamlä¸­ä¿æŒä¸€è‡´ï¼Œå¯ä»¥ä¸ç”¨æ›´æ”¹ï¼Œç›´æ¥ç”¨ä¸Šé¢çš„å‚æ•°\n```\n\næ‰§è¡Œå®Œä¹‹åè¦æ‰‹åŠ¨æ‰§è¡Œä¸€äº›å‚æ•°ï¼ˆå°¤å…¶æ˜¯ **åŠ å…¥é›†ç¾¤çš„joinå‘½ä»¤** éœ€è¦å¤åˆ¶è®°å½•ä¸‹è½½ï¼‰ï¼š\n\n```bash\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.2.1:6443 --token ochspx.15in9qkiu5z8tx2y \\\n        --discovery-token-ca-cert-hash sha256:1f31202107af96a07df9fd78c3aa9bb44fd40076ac123e8ff28d6ab691a02a31\n```\n\næ‰§è¡Œå‚æ•°ï¼š\n\n```bash\n[root@node1 home]# mkdir -p $HOME/.kube\n[root@node1 home]# sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n[root@node1 home]# sudo chown $(id -u):$(id -g) $HOME/.kube/config\n[root@node1 home]# \n[root@node1 home]# vim /root/.bash_profile\n```\n\nåŠ å…¥ä»¥ä¸‹è¿™æ®µï¼š\n\n```bash\n# è¶…çº§ç”¨æˆ·å˜é‡\nexport KUBECONFIG=/etc/kubernetes/admin.conf\n# è®¾ç½®åˆ«å\nalias k=kubectl\n# è®¾ç½®kubectlå‘½ä»¤è¡¥é½åŠŸèƒ½\nsource <(kubectl completion bash)\n```\n\næ¿€æ´» `.bash_profile`ï¼š\n\n```bash\n[root@node1 home]# source /root/.bash_profile\n```\n\nè¿™æ®µè¦**å¤åˆ¶è®°å½•**ä¸‹æ¥ï¼ˆæ¥è‡ªk8såˆå§‹åŒ–æˆåŠŸä¹‹åå‡ºç°çš„`join`å‘½ä»¤ï¼Œéœ€è¦å…ˆé…ç½®å®ŒFlannelæ‰èƒ½åŠ å…¥å­èŠ‚ç‚¹ï¼‰ï¼Œåç»­å­èŠ‚ç‚¹åŠ å…¥masterèŠ‚ç‚¹éœ€è¦æ‰§è¡Œè¿™æ®µå‘½ä»¤ï¼š\n\n```bash\nkubeadm join 192.168.2.1:6443 --token ochspx.15in9qkiu5z8tx2y \\\n        --discovery-token-ca-cert-hash sha256:1f31202107af96a07df9fd78c3aa9bb44fd40076ac123e8ff28d6ab691a02a31\n```\n\n#### 1.3.3 è®¾å®škubeletlç½‘ç»œï¼ˆä¸»èŠ‚ç‚¹éƒ¨ç½²ï¼‰\n\néƒ¨ç½²å®¹å™¨ç½‘ç»œï¼ŒCNIç½‘ç»œæ’ä»¶(åœ¨Masterä¸Šæ‰§è¡Œï¼Œè‘—åçš„æœ‰flannelã€calicoã€canalå’Œkube-routerç­‰ï¼Œç®€å•æ˜“ç”¨çš„å®ç°æ˜¯ä¸ºCoreOSæä¾›çš„flannelé¡¹ç›®)ï¼Œè¿™é‡Œä½¿ç”¨Flannelå®ç°ã€‚\n\nä¸‹è½½`kube-flannel.yml`ï¼š\n\n```bash\n[root@node1 home]# wget https://raw.githubusercontent.com/flannel-io/flannel/master/Documenta\n```\n\næ³¨æ„ï¼šå›½å†…æ— æ³•ä¸‹è½½ï¼Œè¿™é‡Œè´´ä¸€ä¸ªæ¨¡ç‰ˆç›´æ¥å¤åˆ¶ç²˜è´´\n\n```yml\n---\napiVersion: policy/v1beta1\nkind: PodSecurityPolicy\nmetadata:\n  name: psp.flannel.unprivileged\n  annotations:\n    seccomp.security.alpha.kubernetes.io/allowedProfileNames: docker/default\n    seccomp.security.alpha.kubernetes.io/defaultProfileName: docker/default\n    apparmor.security.beta.kubernetes.io/allowedProfileNames: runtime/default\n    apparmor.security.beta.kubernetes.io/defaultProfileName: runtime/default\nspec:\n  privileged: false\n  volumes:\n    - configMap\n    - secret\n    - emptyDir\n    - hostPath\n  allowedHostPaths:\n    - pathPrefix: \"/etc/cni/net.d\"\n    - pathPrefix: \"/etc/kube-flannel\"\n    - pathPrefix: \"/run/flannel\"\n  readOnlyRootFilesystem: false\n  # Users and groups\n  runAsUser:\n    rule: RunAsAny\n  supplementalGroups:\n    rule: RunAsAny\n  fsGroup:\n    rule: RunAsAny\n  # Privilege Escalation\n  allowPrivilegeEscalation: false\n  defaultAllowPrivilegeEscalation: false\n  # Capabilities\n  allowedCapabilities: [ 'NET_ADMIN', 'NET_RAW' ]\n  defaultAddCapabilities: [ ]\n  requiredDropCapabilities: [ ]\n  # Host namespaces\n  hostPID: false\n  hostIPC: false\n  hostNetwork: true\n  hostPorts:\n    - min: 0\n      max: 65535\n  # SELinux\n  seLinux:\n    # SELinux is unused in CaaSP\n    rule: 'RunAsAny'\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: flannel\nrules:\n  - apiGroups: [ 'extensions' ]\n    resources: [ 'podsecuritypolicies' ]\n    verbs: [ 'use' ]\n    resourceNames: [ 'psp.flannel.unprivileged' ]\n  - apiGroups:\n      - \"\"\n    resources:\n      - pods\n    verbs:\n      - get\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes\n    verbs:\n      - list\n      - watch\n  - apiGroups:\n      - \"\"\n    resources:\n      - nodes/status\n    verbs:\n      - patch\n---\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: flannel\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: flannel\nsubjects:\n  - kind: ServiceAccount\n    name: flannel\n    namespace: kube-system\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: flannel\n  namespace: kube-system\n---\nkind: ConfigMap\napiVersion: v1\nmetadata:\n  name: kube-flannel-cfg\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\ndata:\n  cni-conf.json: |\n    {\n      \"name\": \"cbr0\",\n      \"cniVersion\": \"0.3.1\",\n      \"plugins\": [\n        {\n          \"type\": \"flannel\",\n          \"delegate\": {\n            \"hairpinMode\": true,\n            \"isDefaultGateway\": true\n          }\n        },\n        {\n          \"type\": \"portmap\",\n          \"capabilities\": {\n            \"portMappings\": true\n          }\n        }\n      ]\n    }\n  net-conf.json: |\n    {\n      \"Network\": \"10.244.0.0/16\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: kube-flannel-ds\n  namespace: kube-system\n  labels:\n    tier: node\n    app: flannel\nspec:\n  selector:\n    matchLabels:\n      app: flannel\n  template:\n    metadata:\n      labels:\n        tier: node\n        app: flannel\n    spec:\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n              - matchExpressions:\n                  - key: kubernetes.io/os\n                    operator: In\n                    values:\n                      - linux\n      hostNetwork: true\n      priorityClassName: system-node-critical\n      tolerations:\n        - operator: Exists\n          effect: NoSchedule\n      serviceAccountName: flannel\n      initContainers:\n        - name: install-cni-plugin\n          image: rancher/mirrored-flannelcni-flannel-cni-plugin:v1.0.0\n          command:\n            - cp\n          args:\n            - -f\n            - /flannel\n            - /opt/cni/bin/flannel\n          volumeMounts:\n            - name: cni-plugin\n              mountPath: /opt/cni/bin\n        - name: install-cni\n          image: lizhenliang/flannel:v0.11.0-amd64\n          command:\n            - cp\n          args:\n            - -f\n            - /etc/kube-flannel/cni-conf.json\n            - /etc/cni/net.d/10-flannel.conflist\n          volumeMounts:\n            - name: cni\n              mountPath: /etc/cni/net.d\n            - name: flannel-cfg\n              mountPath: /etc/kube-flannel/\n      containers:\n        - name: kube-flannel\n          image: lizhenliang/flannel:v0.11.0-amd64\n          command:\n            - /opt/bin/flanneld\n          args:\n            - --ip-masq\n            - --kube-subnet-mgr\n          resources:\n            requests:\n              cpu: \"100m\"\n              memory: \"50Mi\"\n            limits:\n              cpu: \"100m\"\n              memory: \"50Mi\"\n          securityContext:\n            privileged: false\n            capabilities:\n              add: [ \"NET_ADMIN\", \"NET_RAW\" ]\n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: POD_NAMESPACE\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.namespace\n          volumeMounts:\n            - name: run\n              mountPath: /run/flannel\n            - name: flannel-cfg\n              mountPath: /etc/kube-flannel/\n      volumes:\n        - name: run\n          hostPath:\n            path: /run/flannel\n        - name: cni-plugin\n          hostPath:\n            path: /opt/cni/bin\n        - name: cni\n          hostPath:\n            path: /etc/cni/net.d\n        - name: flannel-cfg\n          configMap:\n            name: kube-flannel-cfg\n```\n\nä¿®æ”¹é…ç½®ä¹‹åå®‰è£…ç»„ä»¶ï¼š\n\n```bash\n[root@node1 home]# kubectl apply -f kube-flannel.yml\n```\n\næŸ¥çœ‹`flannel pod`çŠ¶æ€ï¼ˆå¿…é¡»è¦ä¸º`Running`çŠ¶æ€ï¼Œå¦‚æœ`kube-flannel`èµ·ä¸æ¥ï¼Œé‚£ä¹ˆå°±ç”¨`kubectl describe pod kube-flannel-ds-f5jn6 -n kube-flannel`å‘½ä»¤æŸ¥çœ‹`pod`èµ·ä¸æ¥çš„åŸå› ï¼Œç„¶åå»æœåº¦å¨˜è·å–è§£å†³æ–¹æ¡ˆï¼‰ï¼š\n\n```bash\n[root@node1 home]# # å¿…é¡»æ‰€æœ‰çš„å®¹å™¨éƒ½æ˜¯Running\n[root@node1 home]# kubectl get pod --all-namespaces\nNAMESPACE      NAME                                 READY   STATUS    RESTARTS   AGE\nkube-flannel   kube-flannel-ds-f5jn6                1/1     Running   0          8m21s\nkube-system    coredns-6d8c4cb4d-ctqw5              1/1     Running   0          42m\nkube-system    coredns-6d8c4cb4d-n52fq              1/1     Running   0          42m\nkube-system    etcd-k8s-master                      1/1     Running   0          42m\nkube-system    kube-apiserver-k8s-master            1/1     Running   0          42m\nkube-system    kube-controller-manager-k8s-master   1/1     Running   0          42m\nkube-system    kube-proxy-swpkz                     1/1     Running   0          42m\nkube-system    kube-scheduler-k8s-master            1/1     Running   0          42m\n```\n\næŸ¥çœ‹é€šä¿¡çŠ¶æ€ï¼š\n\n```bash\n[root@node1 home]# kubectl get pod -n kube-system\nNAME                                 READY   STATUS    RESTARTS   AGE\ncoredns-6d8c4cb4d-ctqw5              1/1     Running   0          52m\ncoredns-6d8c4cb4d-n52fq              1/1     Running   0          52m\netcd-k8s-master                      1/1     Running   0          53m\nkube-apiserver-k8s-master            1/1     Running   0          53m\nkube-controller-manager-k8s-master   1/1     Running   0          53m\nkube-proxy-swpkz                     1/1     Running   0          52m\nkube-scheduler-k8s-master            1/1     Running   0          53m\n[root@node1 home]# \n[root@node1 home]# è·å–ä¸»èŠ‚ç‚¹çš„çŠ¶æ€\n[root@node1 home]# kubectl get cs\nWarning: v1 ComponentStatus is deprecated in v1.19+\nNAME                 STATUS    MESSAGE                         ERROR\ncontroller-manager   Healthy   ok\nscheduler            Healthy   ok\netcd-0               Healthy   {\"health\":\"true\",\"reason\":\"\"}\n[root@node1 home]# kubectl get node\nNAME         STATUS   ROLES                  AGE   VERSION\nnode1        Ready    control-plane,master   52m   v1.23.0\n```\n\næŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼ˆæ­¤æ—¶è¿˜åªæœ‰ä¸»èŠ‚ç‚¹ï¼Œè¿˜æ²¡æ·»åŠ å­èŠ‚ç‚¹ï¼‰ï¼š\n\n```bash\n[root@node1 home]# kubectl get node\nNAME         STATUS   ROLES                  AGE   VERSION\nnode1        Ready    control-plane,master   53m   v1.23.0\n```\n\n**è‡³æ­¤ K8s masterä¸»æœåŠ¡å™¨ å·²ç»éƒ¨ç½²å®Œæˆï¼**\n\n#### 1.3.4 å­èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ï¼ˆåœ¨å­èŠ‚ç‚¹ä¸Šæ“ä½œï¼‰\n\nåˆå§‹åŒ–ä¼šç”Ÿæˆ`join`å‘½ä»¤ï¼Œéœ€è¦åœ¨**å­èŠ‚ç‚¹**æ‰§è¡Œå³å¯ï¼Œä»¥ä¸‹`token`ä½œä¸ºä¸¾ä¾‹ï¼Œä»¥å®é™…ä¸ºä¸»ï¼Œä¾‹å¦‚ï¼š\n\n```bash\n[root@node2 home]# kubeadm join 192.168.2.1:6443 --token ochspx.15in9qkiu5z8tx2y         --discovery-token-ca-cert-hash sha256:1f31202107af96a07df9fd78c3aa9bb44fd40076ac123e8ff28d6ab691a02a31\n[preflight] Running pre-flight checks\n[preflight] Reading configuration from the cluster...\n[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Starting the kubelet\n[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...\n\nThis node has joined the cluster:\n* Certificate signing request was sent to apiserver and a response was received.\n* The Kubelet was informed of the new secure connection details.\n\nRun 'kubectl get nodes' on the control-plane to see this node join the cluster.\n```\n\né»˜è®¤çš„ `join token` æœ‰æ•ˆæœŸé™ä¸º24å°æ—¶ï¼Œå½“è¿‡æœŸåè¯¥ `token` å°±ä¸èƒ½ç”¨äº†ï¼Œè¿™æ—¶éœ€è¦é‡æ–°åˆ›å»º `token`ï¼Œåˆ›å»ºæ–°çš„`join token`éœ€è¦åœ¨ä¸»èŠ‚ç‚¹ä¸Šåˆ›å»ºï¼Œåˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼š\n\n```bash\n[root@node1 home]# kubeadm token create --print-join-command\n```\n\nåŠ å…¥ä¹‹åå†åœ¨ä¸»èŠ‚ç‚¹æŸ¥çœ‹é›†ç¾¤ä¸­èŠ‚ç‚¹çš„çŠ¶æ€ï¼ˆ**å¿…é¡»è¦éƒ½ä¸º`Ready`çŠ¶æ€**ï¼‰ï¼š\n\n```bash\n[root@node1 home]# kubectl get nodes\nNAME         STATUS     ROLES                  AGE     VERSION\nnode1        Ready      control-plane,master   63m     v1.23.0\nnode2        Ready      <none>                 3m57s   v1.23.0\nnode3        Ready      <none>                 29s     v1.23.0\n```\n\n**å¦‚æœæ‰€æœ‰çš„èŠ‚ç‚¹`STATUS`éƒ½ä¸º`Ready`çš„è¯ï¼Œé‚£ä¹ˆåˆ°æ­¤ï¼Œæ‰€æœ‰çš„å­èŠ‚ç‚¹åŠ å…¥å®Œæˆï¼**\n\n#### 1.3.5 åˆ é™¤å­èŠ‚ç‚¹ï¼ˆåœ¨masterä¸»èŠ‚ç‚¹ä¸Šæ“ä½œï¼‰\n\n```bash\n# kubectl drain <node name> --delete-local-data --force --ignore-daemonsets\n# å…¶ä¸­ <node name> æ˜¯åœ¨k8sé›†ç¾¤ä¸­ä½¿ç”¨ <kubectl get nodes> æŸ¥è¯¢åˆ°çš„èŠ‚ç‚¹åç§°\n# å‡è®¾è¿™é‡Œåˆ é™¤ node3 å­èŠ‚ç‚¹\n[root@node1 home]# kubectl drain node3 --delete-local-data --force --ignore-daemonsets\n[root@node1 home]# kubectl delete node node3\n```\n\nç„¶ååœ¨åˆ é™¤çš„å­èŠ‚ç‚¹ä¸Šæ“ä½œé‡ç½®k8sï¼ˆé‡ç½®k8sä¼šåˆ é™¤ä¸€äº›é…ç½®æ–‡ä»¶ï¼‰ï¼Œè¿™é‡Œåœ¨`node3`å­èŠ‚ç‚¹ä¸Šæ“ä½œï¼š\n\n```bash\n[root@node3 home]# # å­èŠ‚ç‚¹é‡ç½®k8s\n[root@node3 home]# kubeadm reset\n[reset] WARNING: Changes made to this host by 'kubeadm init' or 'kubeadm join' will be reverted.\n[reset] Are you sure you want to proceed? [y/N]: y\n[preflight] Running pre-flight checks\nW0425 01:59:40.412616   15604 removeetcdmember.go:80] [reset] No kubeadm config, using etcd pod spec to get data directory\n[reset] No etcd config found. Assuming external etcd\n[reset] Please, manually reset etcd to prevent further issues\n[reset] Stopping the kubelet service\n[reset] Unmounting mounted directories in \"/var/lib/kubelet\"\n[reset] Deleting contents of config directories: [/etc/kubernetes/manifests /etc/kubernetes/pki]\n[reset] Deleting files: [/etc/kubernetes/admin.conf /etc/kubernetes/kubelet.conf /etc/kubernetes/bootstrap-kubelet.conf /etc/kubernetes/controller-manager.conf /etc/kubernetes/scheduler.conf]\n[reset] Deleting contents of stateful directories: [/var/lib/kubelet /var/lib/dockershim /var/run/kubernetes /var/lib/cni]\n\nThe reset process does not clean CNI configuration. To do so, you must remove /etc/cni/net.d\n\nThe reset process does not reset or clean up iptables rules or IPVS tables.\nIf you wish to reset iptables, you must do so manually by using the \"iptables\" command.\n\nIf your cluster was setup to utilize IPVS, run ipvsadm --clear (or similar)\nto reset your system's IPVS tables.\n\nThe reset process does not clean your kubeconfig files and you must remove them manually.\nPlease, check the contents of the $HOME/.kube/config file.\n```\n\nç„¶ååœ¨è¢«åˆ é™¤çš„å­èŠ‚ç‚¹ä¸Šæ‰‹åŠ¨åˆ é™¤k8sé…ç½®æ–‡ä»¶ã€flannelç½‘ç»œé…ç½®æ–‡ä»¶ å’Œ flannelç½‘å£ï¼š\n\n```bash\n[root@node3 home]# rm -rf /etc/cni/net.d/\n[root@node3 home]# rm -rf /root/.kube/config\n[root@node3 home]# # åˆ é™¤cniç½‘ç»œ\n[root@node3 home]# ifconfig cni0 down\n[root@node3 home]# ip link delete cni0\n[root@node3 home]# ifconfig flannel.1 down\n[root@node3 home]# ip link delete flannel.1\n```\n\n## k8så¸¸ç”¨å‘½ä»¤é›†åˆ\n\nk8så¸¸ç”¨å‘½ä»¤é›†åˆï¼š\n\n```bash\n# æŸ¥çœ‹å½“å‰é›†ç¾¤çš„æ‰€æœ‰çš„èŠ‚ç‚¹\nkubectl get node\n# æ˜¾ç¤º Node çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¸€èˆ¬ç”¨ä¸ç€ï¼‰\nkubectl describe node node1\n\n# æŸ¥çœ‹æ‰€æœ‰çš„pod\nkubectl get pod --all-namespaces\n# æŸ¥çœ‹podçš„è¯¦ç»†ä¿¡æ¯\nkubectl get pods -o wide --all-namespaces\n\n# æŸ¥çœ‹æ‰€æœ‰åˆ›å»ºçš„æœåŠ¡\nkubectl get service\n\n# æŸ¥çœ‹æ‰€æœ‰çš„deploy\nkubectl get deploy\n\n# é‡å¯ podï¼ˆè¿™ä¸ªæ–¹å¼ä¼šåˆ é™¤åŸæ¥çš„podï¼Œç„¶åå†é‡æ–°ç”Ÿæˆä¸€ä¸ªpodè¾¾åˆ°é‡å¯çš„ç›®çš„ï¼‰\n# æœ‰yamlæ–‡ä»¶çš„é‡å¯\nkubectl replace --force -f xxx.yaml\n# æ— yamlæ–‡ä»¶çš„é‡å¯\nkubectl get pod <POD_NAME> -n <NAMESPACE> -o yaml | kubectl replace --force -f -\n\n# æŸ¥çœ‹podçš„è¯¦ç»†ä¿¡æ¯\nkubectl describe pod nfs-client-provisioner-65c77c7bf9-54rdp -n default\n\n# æ ¹æ® yaml æ–‡ä»¶åˆ›å»ºPodèµ„æº\nkubectl apply -f pod.yaml\n# åˆ é™¤åŸºäº pod.yaml æ–‡ä»¶å®šä¹‰çš„Pod \nkubectl delete -f pod.yaml\n\n# æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—\nkubectl logs <pod-name>\n# å®æ—¶æŸ¥çœ‹æ—¥å¿—\nkubectl logs -f <pod-name>\n# è‹¥ pod åªæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥ä¸åŠ  -c\nkubectl log  <pod-name> -c <container_name>\n# è¿”å›æ‰€æœ‰æ ‡è®°ä¸º app=frontend çš„ pod çš„åˆå¹¶æ—¥å¿—\nkubectl logs -l app=frontend\n\n# é€šè¿‡bashè·å¾— pod ä¸­æŸä¸ªå®¹å™¨çš„TTYï¼Œç›¸å½“äºç™»å½•å®¹å™¨\n# kubectl exec -it <pod-name> -c <container-name> -- bash\neg:\nkubectl exec -it redis-master-cln81 -- bash\n\n# æŸ¥çœ‹ endpoint åˆ—è¡¨\nkubectl get endpoints\n\n# æŸ¥çœ‹å·²æœ‰çš„token\nkubeadm token list\n```\n\n## å®Œæ•´çš„å¸è½½k8s\n\n```bash\n# é¦–å…ˆæ¸…ç†è¿è¡Œåˆ°k8sç¾¤é›†ä¸­çš„podï¼Œä½¿ç”¨\nkubectl delete node --all\n\n# ä½¿ç”¨è„šæœ¬åœæ­¢æ‰€æœ‰k8sæœåŠ¡\nfor service in kube-apiserver kube-controller-manager kubectl kubelet etcd kube-proxy kube-scheduler; \ndo\n    systemctl stop $service\ndone\n\n# ä½¿ç”¨å‘½ä»¤å¸è½½k8s\nkubeadm reset -f\n\n# å¸è½½k8sç›¸å…³ç¨‹åº\nyum -y remove kube*\n\n# åˆ é™¤ç›¸å…³çš„é…ç½®æ–‡ä»¶\nmodprobe -r ipip\nlsmod\n\n# ç„¶åæ‰‹åŠ¨åˆ é™¤é…ç½®æ–‡ä»¶å’Œflannelç½‘ç»œé…ç½®å’Œflannelç½‘å£ï¼š\nrm -rf /etc/cni\nrm -rf /root/.kube\n# åˆ é™¤cniç½‘ç»œ\nifconfig cni0 down\nip link delete cni0\nifconfig flannel.1 down\nip link delete flannel.1\n\n# åˆ é™¤æ®‹ç•™çš„é…ç½®æ–‡ä»¶\nrm -rf ~/.kube/\nrm -rf /etc/kubernetes/\nrm -rf /etc/systemd/system/kubelet.service.d\nrm -rf /etc/systemd/system/kubelet.service\nrm -rf /etc/systemd/system/multi-user.target.wants/kubelet.service\nrm -rf /var/lib/kubelet\nrm -rf /usr/libexec/kubernetes/kubelet-plugins\nrm -rf /usr/bin/kube*\nrm -rf /opt/cni\nrm -rf /var/lib/etcd\nrm -rf /var/etcd\n\n# æ›´æ–°é•œåƒ\nyum clean all\nyum makecache\n```\n","tags":["k8s"],"categories":["è¿ç»´"]},{"title":"spring Batchæ‰¹é‡å¤„ç†","url":"/2023/07/10/Batchæ‰¹é‡å¤„ç†/","content":"\n## å¼•è¨€\n\nåœ¨Javaåç«¯å¼€å‘ä¸­ï¼Œæ‰¹é‡å¤„ç†æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä»æ•°æ®åº“ä¸­è¯»å–å¤§é‡æ•°æ®ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†åçš„ç»“æœå†™å›åˆ°æ•°æ®åº“ä¸­ã€‚è¿™æ—¶å€™ï¼Œä½¿ç”¨Spring Batchæ¡†æ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåœ°å®ç°æ‰¹é‡å¤„ç†çš„åŠŸèƒ½ã€‚\n\n## ä»€ä¹ˆæ˜¯Spring Batchï¼Ÿ\n\nSpring Batchæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ‰¹é‡å¤„ç†æ¡†æ¶ï¼Œå®ƒåŸºäºSpringæ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„æ‰¹é‡å¤„ç†è§£å†³æ–¹æ¡ˆã€‚Spring Batchå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œæ”¯æŒäº‹åŠ¡ç®¡ç†ã€å¹¶å‘å¤„ç†ã€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½ã€‚\n\n## Spring Batchçš„æ ¸å¿ƒæ¦‚å¿µ\n\nåœ¨ä½¿ç”¨Spring Batchè¿›è¡Œæ‰¹é‡å¤„ç†ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›Spring Batchçš„æ ¸å¿ƒæ¦‚å¿µã€‚(åœ¨springboot3ä¹‹åï¼ŒåŒæ—¶springBatchä¹Ÿæœ‰æ”¹åŠ¨)\n\nspringå®˜ç½‘æ•™ç¨‹ï¼š[Getting Started | Creating a Batch Service --- å¼€å§‹ä½¿ç”¨|åˆ›å»ºæ‰¹å¤„ç†æœåŠ¡ (spring.io)](https://spring.io/guides/gs/batch-processing/)\n\n### Job\n\nJobæ˜¯Spring Batchä¸­çš„æœ€é«˜çº§åˆ«çš„æ¦‚å¿µï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå®Œæ•´çš„æ‰¹é‡å¤„ç†ä»»åŠ¡ã€‚ä¸€ä¸ªJobç”±å¤šä¸ªStepç»„æˆï¼Œæ¯ä¸ªStepä»£è¡¨äº†ä¸€ä¸ªå…·ä½“çš„å¤„ç†æ­¥éª¤ã€‚\n\n### Step\n\nStepæ˜¯Spring Batchä¸­çš„ä¸€ä¸ªå¤„ç†æ­¥éª¤ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªItemReaderã€ä¸€ä¸ªItemProcessorå’Œä¸€ä¸ªItemWriterã€‚ItemReaderç”¨äºè¯»å–æ•°æ®ï¼ŒItemProcessorç”¨äºå¤„ç†æ•°æ®ï¼ŒItemWriterç”¨äºå†™å…¥æ•°æ®ã€‚\n\n### ItemReader\n\nItemReaderç”¨äºè¯»å–æ•°æ®ï¼Œå®ƒå¯ä»¥ä»æ–‡ä»¶ã€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ•°æ®æºä¸­è¯»å–æ•°æ®ï¼Œå¹¶å°†è¯»å–åˆ°çš„æ•°æ®ä¼ é€’ç»™ItemProcessorè¿›è¡Œå¤„ç†ã€‚\n\n### ItemProcessor\n\nItemProcessorç”¨äºå¤„ç†æ•°æ®ï¼Œå®ƒå¯ä»¥å¯¹è¯»å–åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†å¤„ç†åçš„æ•°æ®ä¼ é€’ç»™ItemWriterè¿›è¡Œå†™å…¥ã€‚\n\n### ItemWriter\n\nItemWriterç”¨äºå†™å…¥æ•°æ®ï¼Œå®ƒå¯ä»¥å°†å¤„ç†åçš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ã€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ•°æ®æºä¸­ã€‚\n\n## ä½¿ç”¨Spring Batchè¿›è¡Œæ‰¹é‡å¤„ç†\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨Spring Batchè¿›è¡Œæ‰¹é‡å¤„ç†çš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œå…¶ä¸­åŒ…å«äº†å¤§é‡çš„ç”¨æˆ·æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦ä»ç”¨æˆ·è¡¨ä¸­è¯»å–æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†åçš„ç»“æœå†™å›åˆ°ç”¨æˆ·è¡¨ä¸­ã€‚\n\n### BatchConfig\n\n```java\n@Configuration\npublic class BatchConfig {\n    \n    //åˆ›å»ºitemReader\n    @Bean\n    public FlatFileItemReader<Person> reader(){\n        return new FlatFileItemReaderBuilder<Person>()\n                .name(\"personItemReader\")\n                .resource(new ClassPathResource(\"sample-data.csv\"))\n                .delimited()\n                .names(new String[]{\"firstName\",\"lastName\"})\n                .fieldSetMapper(new BeanWrapperFieldSetMapper<Person>(){{\n                    setTargetType(Person.class);\n                }})\n                .build();\n    }\n\t//ItemProcessor\n    @Bean\n    public PersonItemProcessor processor() {\n        return new PersonItemProcessor();\n    }\n    //ItemWriter\n    @Bean\n    public JdbcBatchItemWriter<Person> writer(DataSource dataSource) {\n        return new JdbcBatchItemWriterBuilder<Person>()\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider<>())\n                .sql(\"INSERT INTO people (first_name, last_name) VALUES (:firstName, :lastName)\")\n                .dataSource(dataSource)\n                .build();\n    }\n    //Job\n    @Bean\n    public Job importUserJob(JobRepository jobRepository,Step step1){\n        return new JobBuilder(\"importUserJob\",jobRepository)\n                .incrementer(new RunIdIncrementer())\n                .flow(step1)\n                .end()\n                .build();\n    }\n    //Step\n    @Bean\n    public Step step1(JobRepository jobRepository,\n                      PlatformTransactionManager transactionManager,\n                      JdbcBatchItemWriter<Person> writer){\n        return new StepBuilder(\"step1\", jobRepository)\n                .<Person, Person> chunk(10, transactionManager)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer)\n                .build();\n    }\n}\n```\n\n### ItemProcessor\n\n```java\npublic class PersonItemProcessor implements ItemProcessor<Person, Person> {\n\n    private static final Logger log = LoggerFactory.getLogger(PersonItemProcessor.class);\n\n    @Override\n    public Person process(final Person person) throws Exception {\n        final String firstName = person.getFirstName().toUpperCase();\n        final String lastName = person.getLastName().toUpperCase();\n\n        final Person transformedPerson = new Person(firstName, lastName);\n\n        log.info(\"Converting (\" + person + \") into (\" + transformedPerson + \")\");\n\n        return transformedPerson;\n    }\n}\n```\n\n### Person\n\n```java\n */\npublic class Person {\n    private String lastName;\n    private String firstName;\n\n    public Person() {\n    }\n\n    public Person(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    @Override\n    public String toString() {\n        return \"firstName: \" + firstName + \", lastName: \" + lastName;\n    }\n\n}\n```\n\n### é…ç½®æ–‡ä»¶\n\n```properties\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\nspring.datasource.password=123456\nspring.datasource.url=jdbc:mysql://192.168.5.57:3306/Person_demo?characterEncoding=utf8&useSSL=false&serverTimezone=UTC&rewriteBatchedStatements=true&allowMultiQueries=true&allowPublicKeyRetrieval=true\nspring.batch.jdbc.initialize-schema=always\n```\n\n### sample-data.csv\n\n```\nJill,Doe\nJoe,Doe\nJustin,Doe\nJane,Doe\nJohn,Doe\n```\n\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"javaçš„NIO","url":"/2023/07/08/javaçš„NIO/","content":"\n## ç®€ä»‹\n\nJava NIOæœ‰ä¸¤ç§è§£é‡Šï¼šä¸€ç§å«éé˜»å¡IOï¼ˆNon-blocking I/Oï¼‰ï¼Œå¦ä¸€ç§ä¹Ÿå«æ–°çš„IOï¼ˆNew I/Oï¼‰ï¼Œå…¶å®æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ç§**åŒæ­¥éé˜»å¡**çš„I/Oæ¨¡å‹ï¼Œä¹Ÿæ˜¯I/Oå¤šè·¯å¤ç”¨çš„åŸºç¡€ï¼Œå·²ç»è¢«è¶Šæ¥è¶Šå¤šåœ°åº”ç”¨åˆ°å¤§å‹åº”ç”¨æœåŠ¡å™¨ï¼Œæˆä¸ºè§£å†³é«˜å¹¶å‘ä¸å¤§é‡è¿æ¥ã€I/Oå¤„ç†é—®é¢˜çš„æœ‰æ•ˆæ–¹å¼ã€‚\n\nNIOæ˜¯ä¸€ç§åŸºäº**é€šé“å’Œç¼“å†²åŒº**çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“**ç›´æ¥åˆ†é…å †å¤–å†…å­˜**ï¼ˆåŒºåˆ«äºJVMçš„è¿è¡Œæ—¶æ•°æ®åŒºï¼‰ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †é‡Œé¢çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„ç›´æ¥å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚ \n\n## NIOä¸BIOçš„åŒºåˆ«\n\n1ï¼‰BIOä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€ŒNIOä»¥**å—çš„æ–¹å¼**å¤„ç†æ•°æ®ï¼Œå—I/Oçš„æ•ˆç‡æ¯”æµI/Oé«˜å¾ˆå¤šï¼›\n\n2ï¼‰BIOæ˜¯é˜»å¡çš„ï¼ŒNIOæ˜¯**éé˜»å¡**çš„ï¼›\n\n3ï¼‰BIOåŸºäºå­—èŠ‚æµå’Œå­—ç¬¦æµè¿›è¡Œæ“ä½œï¼Œè€ŒNIOåŸºäº**Channelï¼ˆé€šé“ï¼‰å’ŒBufferï¼ˆç¼“å†²åŒºï¼‰è¿›è¡Œæ“ä½œ**ï¼Œæ•°æ®æ€»æ˜¯ä»é€šé“è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œæˆ–è€…ä»ç¼“å†²åŒºå†™å…¥åˆ°é€šé“ä¸­ã€‚**Selectorï¼ˆé€‰æ‹©å™¨ï¼‰ç”¨äºç›‘å¬å¤šä¸ªé€šé“**çš„æ—¶é—´ï¼ˆæ¯”å¦‚ï¼šè¿æ¥è¯·æ±‚ï¼Œæ•°æ®åˆ°è¾¾ç­‰ï¼‰ï¼Œå› æ­¤ä½¿ç”¨**å•ä¸ªçº¿ç¨‹å°±å¯ä»¥ç›‘å¬å¤šä¸ªå®¢æˆ·ç«¯é€šé“**ï¼›\n\n4ï¼‰BIOæ˜¯å•å‘çš„ï¼Œå¦‚ï¼šInputStream, OutputStreamï¼›è€Œ**NIOæ˜¯åŒå‘çš„**ï¼Œæ—¢å¯ä»¥ç”¨æ¥è¿›è¡Œè¯»æ“ä½œï¼Œåˆå¯ä»¥ç”¨æ¥è¿›è¡Œå†™æ“ä½œã€‚\n\n## NIOä¸»è¦ç»„ä»¶ä»‹ç»\n\n### Buffer\n\nBufferï¼ˆç¼“å†²åŒºï¼‰æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨ç‰¹å®šåŸºæœ¬ç±»å‹æ•°æ®çš„å®¹å™¨ã€‚é™¤äº†booleanå¤–ï¼Œå…¶ä½™æ¯ç§åŸºæœ¬ç±»å‹éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„bufferç±»ã€‚\n\nBufferç±»çš„å­ç±»æœ‰ï¼š\n\n- ByteBuffer\n- CharBuffer\n- DoubleBuffer\n- FloatBuffer\n- IntBuffer\n- LongBuffer\n- ShortBuffer\n\n### Channel\n\nChannelï¼ˆé€šé“ï¼‰è¡¨ç¤ºåˆ°å®ä½“ï¼Œå¦‚ç¡¬ä»¶è®¾å¤‡ã€æ–‡ä»¶ã€ç½‘ç»œå¥—æ¥å­—æˆ–å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒ I/O æ“ä½œï¼ˆå¦‚è¯»å–æˆ–å†™å…¥ï¼‰çš„ç¨‹åºç»„ä»¶çš„å¼€æ”¾çš„è¿æ¥ã€‚\n\nChannelæ¥å£çš„å¸¸ç”¨å®ç°ç±»æœ‰ï¼š\n\n- FileChannelï¼ˆå¯¹åº”æ–‡ä»¶IOï¼‰\n- DatagramChannelï¼ˆå¯¹åº”UDPï¼‰\n- SocketChannelå’ŒServerSocketChannelï¼ˆå¯¹åº”TCPçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼‰\n\nChannelå’ŒIOä¸­çš„Streamï¼ˆæµï¼‰æ˜¯å·®ä¸å¤šä¸€ä¸ªç­‰çº§çš„ã€‚\n\n### Selector\n\nSelectorï¼ˆé€‰æ‹©å™¨ï¼‰ç”¨äºç›‘å¬å¤šä¸ªé€šé“çš„äº‹ä»¶ï¼ˆæ¯”å¦‚ï¼šè¿æ¥æ‰“å¼€ï¼Œæ•°æ®åˆ°è¾¾ï¼‰ã€‚å› æ­¤ï¼Œå•ä¸ªçš„çº¿ç¨‹å¯ä»¥ç›‘å¬å¤šä¸ªæ•°æ®é€šé“ã€‚å³ç”¨é€‰æ‹©å™¨ï¼Œå€ŸåŠ©å•ä¸€çº¿ç¨‹ï¼Œå°±å¯å¯¹æ•°é‡åºå¤§çš„æ´»åŠ¨I/Oé€šé“å®æ–½ç›‘æ§å’Œç»´æŠ¤ã€‚\n\nä»–ä»¬ä¹‹é—´çš„å…³ç³»å°±åƒä¸‹é¢è¿™å¼ å›¾\n\n![Bufferã€Channelå’ŒSelectorä¸‰è€…ä¹‹é—´çš„å…³ç³»](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/channel-buffer-selector.png)\n\n## Bufferï¼ˆç¼“å†²åŒºï¼‰\n\nåœ¨ä¼ ç»Ÿçš„ BIO ä¸­ï¼Œæ•°æ®çš„è¯»å†™æ˜¯é¢å‘æµçš„ï¼Œ åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµã€‚\n\nåœ¨Java 1.4 çš„ NIOåº“ä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ç”¨ç¼“å†²åŒºå¤„ç†çš„ï¼Œè¿™æ˜¯æ–°åº“å’Œä¹‹å‰çš„ BIO çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼Œæœ‰ç‚¹ç±»ä¼¼äº BIO ä¸­çš„ç¼“å†²æµã€‚NIO åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå®ƒæ˜¯ç›´æ¥è¯»åˆ°ç¼“å†²åŒºä¸­çš„ã€‚åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œå†™å…¥åˆ°ç¼“å†²åŒºä¸­ã€‚ ä½¿ç”¨ NIOåœ¨è¯»å†™æ•°æ®æ—¶ï¼Œéƒ½æ˜¯é€šè¿‡ç¼“å†²åŒºè¿›è¡Œæ“ä½œã€‚\n\nä½ å¯ä»¥å°† Buffer ç†è§£ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œ`IntBuffer`ã€`FloatBuffer`ã€`CharBuffer` ç­‰åˆ†åˆ«å¯¹åº” `int[]`ã€`float[]`ã€`char[]` ç­‰ã€‚\n\nä¸ºäº†æ›´æ¸…æ™°åœ°è®¤è¯†ç¼“å†²åŒºï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹çœ‹`Buffer` ç±»ä¸­å®šä¹‰çš„å››ä¸ªæˆå‘˜å˜é‡ï¼š\n\n```java\npublic abstract class Buffer {\n    // Invariants: mark <= position <= limit <= capacity\n    private int mark = -1;\n    private int position = 0;\n    private int limit;\n    private int capacity;\n}\n```\n\nè¿™å››ä¸ªæˆå‘˜å˜é‡çš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š\n\n1. å®¹é‡ï¼ˆ`capacity`ï¼‰ï¼š`Buffer`å¯ä»¥å­˜å‚¨çš„æœ€å¤§æ•°æ®é‡ï¼Œ`Buffer`åˆ›å»ºæ—¶è®¾ç½®ä¸”ä¸å¯æ”¹å˜ï¼›\n2. ç•Œé™ï¼ˆ`limit`ï¼‰ï¼š`Buffer` ä¸­å¯ä»¥è¯»/å†™æ•°æ®çš„è¾¹ç•Œã€‚å†™æ¨¡å¼ä¸‹ï¼Œ`limit` ä»£è¡¨æœ€å¤šèƒ½å†™å…¥çš„æ•°æ®ï¼Œä¸€èˆ¬ç­‰äº `capacity`ï¼ˆå¯ä»¥é€šè¿‡`limit(int newLimit) `æ–¹æ³•è®¾ç½®ï¼‰ï¼›è¯»æ¨¡å¼ä¸‹ï¼Œ`limit` ç­‰äº Buffer ä¸­å®é™…å†™å…¥çš„æ•°æ®å¤§å°ã€‚\n3. ä½ç½®ï¼ˆ`position`ï¼‰ï¼šä¸‹ä¸€ä¸ªå¯ä»¥è¢«è¯»å†™çš„æ•°æ®çš„ä½ç½®ï¼ˆç´¢å¼•ï¼‰ã€‚ä»å†™æ“ä½œæ¨¡å¼åˆ°è¯»æ“ä½œæ¨¡å¼åˆ‡æ¢çš„æ—¶å€™ï¼ˆflipï¼‰ï¼Œ`position` éƒ½ä¼šå½’é›¶ï¼Œè¿™æ ·å°±å¯ä»¥ä»å¤´å¼€å§‹è¯»å†™äº†ã€‚\n4. æ ‡è®°ï¼ˆ`mark`ï¼‰ï¼š`Buffer`å…è®¸å°†ä½ç½®ç›´æ¥å®šä½åˆ°è¯¥æ ‡è®°å¤„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰å±æ€§ï¼›\n\nå¹¶ä¸”ï¼Œä¸Šè¿°å˜é‡æ»¡è¶³å¦‚ä¸‹çš„å…³ç³»ï¼š**0 <= mark <= position <= limit <= capacity** ã€‚\n\nå¦å¤–ï¼ŒBuffer æœ‰è¯»æ¨¡å¼å’Œå†™æ¨¡å¼è¿™ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«ç”¨äºä» Buffer ä¸­è¯»å–æ•°æ®æˆ–è€…å‘ Buffer ä¸­å†™å…¥æ•°æ®ã€‚Buffer è¢«åˆ›å»ºä¹‹åé»˜è®¤æ˜¯å†™æ¨¡å¼ï¼Œè°ƒç”¨ `flip()` å¯ä»¥åˆ‡æ¢åˆ°è¯»æ¨¡å¼ã€‚å¦‚æœè¦å†æ¬¡åˆ‡æ¢å›å†™æ¨¡å¼ï¼Œå¯ä»¥è°ƒç”¨ `clear()` æˆ–è€… `compact()` æ–¹æ³•ã€‚\n\n![position ã€limit å’Œ capacity ä¹‹å‰çš„å…³ç³»](https://oss.javaguide.cn/github/javaguide/java/nio/JavaNIOBuffer.png)\n\nâ€‹\t\t\t\t\t\t\t\t\t\t\t\t\t*position ã€limit å’Œ capacity ä¹‹å‰çš„å…³ç³»*\n\n![position ã€limit å’Œ capacity ä¹‹å‰çš„å…³ç³»](https://oss.javaguide.cn/github/javaguide/java/nio/NIOBufferClassAttributes.png)\n\nâ€‹\t\t\t\t\t\t\t\t\t\t\t\t\t\t*position ã€limit å’Œ capacity ä¹‹å‰çš„å…³ç³»*\n\n`Buffer` å¯¹è±¡ä¸èƒ½é€šè¿‡ `new` è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ ï¼Œåªèƒ½é€šè¿‡é™æ€æ–¹æ³•å®ä¾‹åŒ– `Buffer`ã€‚\n\nè¿™é‡Œä»¥ `ByteBuffer `ä¸ºä¾‹è¿›è¡Œä»‹ç»ï¼š\n\n\n\n```java\n// åˆ†é…å †å†…å­˜\npublic static ByteBuffer allocate(int capacity); \n// åˆ†é…ç›´æ¥å†…å­˜\npublic static ByteBuffer allocateDirect(int capacity); \n```\n\nBuffer æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæ–¹æ³•ï¼š\n\n1. `get` : è¯»å–ç¼“å†²åŒºçš„æ•°æ®\n2. `put` ï¼šå‘ç¼“å†²åŒºå†™å…¥æ•°æ®\n\né™¤ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ä¹‹å¤–ï¼Œå…¶ä»–çš„é‡è¦æ–¹æ³•ï¼š\n\n- `flip` ï¼šå°†ç¼“å†²åŒºä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ï¼Œå®ƒä¼šå°† `limit` çš„å€¼è®¾ç½®ä¸ºå½“å‰ `position` çš„å€¼ï¼Œå°† `position` çš„å€¼è®¾ç½®ä¸º 0ã€‚\n- `clear`: æ¸…ç©ºç¼“å†²åŒºï¼Œå°†ç¼“å†²åŒºä»è¯»æ¨¡å¼åˆ‡æ¢åˆ°å†™æ¨¡å¼ï¼Œå¹¶å°† `position` çš„å€¼è®¾ç½®ä¸º 0ï¼Œå°† `limit` çš„å€¼è®¾ç½®ä¸º `capacity` çš„å€¼ã€‚\n- ......\n\nBuffer ä¸­æ•°æ®å˜åŒ–çš„è¿‡ç¨‹ï¼š\n\n\n\n```java\nimport java.nio.*;\n\npublic class CharBufferDemo {\n\n    public static void main(String[] args) {\n\n        CharBuffer charBuffer = CharBuffer.allocate(8);\n        System.out.println(\"åˆå§‹çŠ¶æ€ï¼š\");\n        printState(charBuffer);\n\n        charBuffer.put('i').put(' ').put('l').put('o').put('v').put('e');\n        System.out.println(\"å†™å…¥äº†i loveä¹‹å\");\n        printState(charBuffer);\n\n        //è°ƒç”¨flipæ–¹æ³•ï¼Œè¯»å–charBufferçš„å€¼\n        charBuffer.flip();\n        System.out.println(\"è°ƒç”¨flipæ–¹æ³•ä¹‹å\");\n        printState(charBuffer);\n        \n        // è¯»å–å­—ç¬¦\n        while (charBuffer.hasRemaining()){\n            System.out.println(charBuffer.get()+\" \");\n        }\n\n        // è°ƒç”¨clear()æ–¹æ³•ï¼Œæ¸…ç©ºç¼“å†²åŒºï¼Œå°† position çš„å€¼ç½®ä¸º 0ï¼Œå°† limit çš„å€¼ç½®ä¸º capacity çš„å€¼\n        charBuffer.clear();\n        System.out.println(\"è°ƒç”¨clear()æ–¹æ³•åçš„çŠ¶æ€ï¼š\");\n        printState(charBuffer);\n\n    }\n\n    // æ‰“å°bufferçš„capacityã€limitã€positionã€markçš„ä½ç½®\n    private static void printState(CharBuffer buffer) {\n        System.out.print(\"capacity: \" + buffer.capacity());\n        System.out.print(\", limit: \" + buffer.limit());\n        System.out.print(\", position: \" + buffer.position());\n        System.out.print(\", mark å¼€å§‹è¯»å–çš„å­—ç¬¦: \" + buffer.mark());\n        System.out.println(\"\\n\");\n    }\n}\n```\n\nè¾“å‡º:\n\n```bash\nåˆå§‹çŠ¶æ€ï¼š\ncapacity: 8, limit: 8, position: 0, mark å¼€å§‹è¯»å–çš„å­—ç¬¦:         \n\nå†™å…¥äº†i loveä¹‹å\ncapacity: 8, limit: 8, position: 6, mark å¼€å§‹è¯»å–çš„å­—ç¬¦:   \n\nè°ƒç”¨flipæ–¹æ³•ä¹‹å\ncapacity: 8, limit: 6, position: 0, mark å¼€å§‹è¯»å–çš„å­—ç¬¦: i love\n\ni \n  \nl \no \nv \ne \nè°ƒç”¨clear()æ–¹æ³•åçš„çŠ¶æ€ï¼š\ncapacity: 8, limit: 8, position: 0, mark å¼€å§‹è¯»å–çš„å­—ç¬¦: i love  \n```\n\n## Channelï¼ˆé€šé“ï¼‰\n\nChannel æ˜¯ä¸€ä¸ªé€šé“ï¼Œå®ƒå»ºç«‹äº†ä¸æ•°æ®æºï¼ˆå¦‚æ–‡ä»¶ã€ç½‘ç»œå¥—æ¥å­—ç­‰ï¼‰ä¹‹é—´çš„è¿æ¥ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥è¯»å–å’Œå†™å…¥æ•°æ®ï¼Œå°±åƒæ‰“å¼€äº†ä¸€æ¡è‡ªæ¥æ°´ç®¡ï¼Œè®©æ•°æ®åœ¨ Channel ä¸­è‡ªç”±æµåŠ¨ã€‚\n\nBIO ä¸­çš„æµæ˜¯å•å‘çš„ï¼Œåˆ†ä¸ºå„ç§ `InputStream`ï¼ˆè¾“å…¥æµï¼‰å’Œ `OutputStream`ï¼ˆè¾“å‡ºæµï¼‰ï¼Œæ•°æ®åªæ˜¯åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ã€‚é€šé“ä¸æµçš„ä¸åŒä¹‹å¤„åœ¨äºé€šé“æ˜¯åŒå‘çš„ï¼Œå®ƒå¯ä»¥ç”¨äºè¯»ã€å†™æˆ–è€…åŒæ—¶ç”¨äºè¯»å†™ã€‚\n\nChannel ä¸å‰é¢ä»‹ç»çš„ Buffer æ‰“äº¤é“ï¼Œè¯»æ“ä½œçš„æ—¶å€™å°† Channel ä¸­çš„æ•°æ®å¡«å……åˆ° Bufferä¸­ï¼Œè€Œå†™æ“ä½œæ—¶å°† Bufferä¸­çš„æ•°æ®å†™å…¥åˆ° Channel ä¸­ã€‚Channel å’Œ Bufferä¹‹é—´çš„å…³ç³»å¦‚å›¾æ‰€ç¤º\n\n![Channel å’Œ Bufferä¹‹é—´çš„å…³ç³»](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/channel-buffer.png)\n\nå¦å¤–ï¼Œå› ä¸º Channel æ˜¯å…¨åŒå·¥çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ¯”æµæ›´å¥½åœ°æ˜ å°„åº•å±‚æ“ä½œç³»ç»Ÿçš„ APIã€‚ç‰¹åˆ«æ˜¯åœ¨ UNIX ç½‘ç»œç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œåº•å±‚æ“ä½œç³»ç»Ÿçš„é€šé“éƒ½æ˜¯å…¨åŒå·¥çš„ï¼ŒåŒæ—¶æ”¯æŒè¯»å†™æ“ä½œã€‚\n\n`Channel` çš„å­ç±»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![Channel çš„å­ç±»](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/channel-subclasses.png)\n\nå…¶ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹çš„é€šé“ï¼š\n\n- `FileChannel`ï¼šæ–‡ä»¶è®¿é—®é€šé“ï¼›\n- `SocketChannel`ã€`ServerSocketChannel`ï¼šTCPé€šä¿¡é€šé“ï¼›\n- `DatagramChannel`ï¼šUDP é€šä¿¡é€šé“ï¼›\n\n![Channelç»§æ‰¿å…³ç³»å›¾](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/channel-inheritance-relationship.png)\n\nChannel æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæ–¹æ³•ï¼š\n\n1. `read` ï¼šç”¨äºä» Buffer ä¸­è¯»å–æ•°æ®ï¼›\n2. `write` ï¼šå‘ Buffer ä¸­å†™å…¥æ•°æ®ã€‚\n\nè¿™é‡Œæˆ‘ä»¬ä»¥ `FileChannel` ä¸ºä¾‹æ¼”ç¤ºä¸€ä¸‹æ˜¯è¯»å–æ–‡ä»¶æ•°æ®çš„ã€‚\n\n\n\n```java\n   public static void main(String[] args) throws IOException {\n        RandomAccessFile reader = new RandomAccessFile(\"E:\\\\IDEA project\\\\demo1\\\\src\\\\main\\\\java\\\\com\\\\example\\\\demo\\\\NIODemo\\\\text.ini\",\"r\");\n        FileChannel channel = reader.getChannel();\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\n        channel.read(buffer);\n\n    }\n```\n\n## Selectorï¼ˆé€‰æ‹©å™¨ï¼‰\n\nSelectorï¼ˆé€‰æ‹©å™¨ï¼‰ æ˜¯ NIOä¸­çš„ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼Œå®ƒå…è®¸ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ª Channelã€‚Selector æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„ I/O å¤šè·¯å¤ç”¨æ¨¡å‹ï¼Œä¸»è¦è¿ä½œåŸç†æ˜¯ï¼šé€šè¿‡ Selector æ³¨å†Œé€šé“çš„äº‹ä»¶ï¼ŒSelector ä¼šä¸æ–­åœ°è½®è¯¢æ³¨å†Œåœ¨å…¶ä¸Šçš„ Channelã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚ï¼šæŸä¸ª Channelä¸Šé¢æœ‰æ–°çš„ TCP è¿æ¥æ¥å…¥ã€è¯»å’Œå†™äº‹ä»¶ï¼Œè¿™ä¸ª Channelå°±å¤„äºå°±ç»ªçŠ¶æ€ï¼Œä¼šè¢« Selector è½®è¯¢å‡ºæ¥ã€‚Selector ä¼šå°†ç›¸å…³çš„ ChannelåŠ å…¥åˆ°å°±ç»ªé›†åˆä¸­ã€‚é€šè¿‡ SelectionKeyå¯ä»¥è·å–å°±ç»ª Channelçš„é›†åˆï¼Œç„¶åå¯¹è¿™äº›å°±ç»ªçš„ Channelè¿›è¡Œå“åº”çš„ I/O æ“ä½œã€‚\n\n![Selector é€‰æ‹©å™¨å·¥ä½œç¤ºæ„å›¾](https://oss.javaguide.cn/github/javaguide/java/nio/selector-channel-selectionkey.png)\n\nä¸€ä¸ªå¤šè·¯å¤ç”¨å™¨ Selector å¯ä»¥åŒæ—¶è½®è¯¢å¤šä¸ª Channelï¼Œç”±äº JDKä½¿ç”¨äº† `epoll()` ä»£æ›¿ä¼ ç»Ÿçš„ `select` å®ç°ï¼Œæ‰€ä»¥å®ƒå¹¶æ²¡æœ‰æœ€å¤§è¿æ¥å¥æŸ„ `1024/2048` çš„é™åˆ¶ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€åªéœ€è¦ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ Selector çš„è½®è¯¢ï¼Œå°±å¯ä»¥æ¥å…¥æˆåƒä¸Šä¸‡çš„å®¢æˆ·ç«¯ã€‚\n\nSelector å¯ä»¥ç›‘å¬ä»¥ä¸‹å››ç§äº‹ä»¶ç±»å‹ï¼š\n\n1. `SelectionKey.OP_ACCEPT`ï¼šè¡¨ç¤ºé€šé“æ¥å—è¿æ¥çš„äº‹ä»¶ï¼Œè¿™é€šå¸¸ç”¨äº `ServerSocketChannel`ã€‚\n2. `SelectionKey.OP_CONNECT`ï¼šè¡¨ç¤ºé€šé“å®Œæˆè¿æ¥çš„äº‹ä»¶ï¼Œè¿™é€šå¸¸ç”¨äº `SocketChannel`ã€‚\n3. `SelectionKey.OP_READ`ï¼šè¡¨ç¤ºé€šé“å‡†å¤‡å¥½è¿›è¡Œè¯»å–çš„äº‹ä»¶ï¼Œå³æœ‰æ•°æ®å¯è¯»ã€‚\n4. `SelectionKey.OP_WRITE`ï¼šè¡¨ç¤ºé€šé“å‡†å¤‡å¥½è¿›è¡Œå†™å…¥çš„äº‹ä»¶ï¼Œå³å¯ä»¥å†™å…¥æ•°æ®ã€‚\n\n`Selector `æ˜¯æŠ½è±¡ç±»ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨æ­¤ç±»çš„ `open()` é™æ€æ–¹æ³•æ¥åˆ›å»º Selector å®ä¾‹ã€‚Selector å¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ª `SelectableChannel` çš„ `IO` çŠ¶å†µï¼Œæ˜¯éé˜»å¡ `IO` çš„æ ¸å¿ƒã€‚\n\nä¸€ä¸ªSelector å®ä¾‹æœ‰ä¸‰ä¸ª `SelectionKey` é›†åˆï¼š\n\n1. æ‰€æœ‰çš„ `SelectionKey` é›†åˆï¼šä»£è¡¨äº†æ³¨å†Œåœ¨è¯¥ Selector ä¸Šçš„ `Channel`ï¼Œè¿™ä¸ªé›†åˆå¯ä»¥é€šè¿‡ `keys()` æ–¹æ³•è¿”å›ã€‚\n2. è¢«é€‰æ‹©çš„ `SelectionKey` é›†åˆï¼šä»£è¡¨äº†æ‰€æœ‰å¯é€šè¿‡ `select()` æ–¹æ³•è·å–çš„ã€éœ€è¦è¿›è¡Œ `IO` å¤„ç†çš„ Channelï¼Œè¿™ä¸ªé›†åˆå¯ä»¥é€šè¿‡ `selectedKeys()` è¿”å›ã€‚\n3. è¢«å–æ¶ˆçš„ `SelectionKey` é›†åˆï¼šä»£è¡¨äº†æ‰€æœ‰è¢«å–æ¶ˆæ³¨å†Œå…³ç³»çš„ `Channel`ï¼Œåœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ `select()` æ–¹æ³•æ—¶ï¼Œè¿™äº› `Channel` å¯¹åº”çš„ `SelectionKey` ä¼šè¢«å½»åº•åˆ é™¤ï¼Œç¨‹åºé€šå¸¸æ— é¡»ç›´æ¥è®¿é—®è¯¥é›†åˆï¼Œä¹Ÿæ²¡æœ‰æš´éœ²è®¿é—®çš„æ–¹æ³•ã€‚\n\nç®€å•æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•éå†è¢«é€‰æ‹©çš„ `SelectionKey` é›†åˆå¹¶è¿›è¡Œå¤„ç†ï¼š\n\n\n\n```java\nSet<SelectionKey> selectedKeys = selector.selectedKeys();\nIterator<SelectionKey> keyIterator = selectedKeys.iterator();\nwhile (keyIterator.hasNext()) {\n    SelectionKey key = keyIterator.next();\n    if (key != null) {\n        if (key.isAcceptable()) {\n            // ServerSocketChannel æ¥æ”¶äº†ä¸€ä¸ªæ–°è¿æ¥\n        } else if (key.isConnectable()) {\n            // è¡¨ç¤ºä¸€ä¸ªæ–°è¿æ¥å»ºç«‹\n        } else if (key.isReadable()) {\n            // Channel æœ‰å‡†å¤‡å¥½çš„æ•°æ®ï¼Œå¯ä»¥è¯»å–\n        } else if (key.isWritable()) {\n            // Channel æœ‰ç©ºé—²çš„ Bufferï¼Œå¯ä»¥å†™å…¥æ•°æ®\n        }\n    }\n    keyIterator.remove();\n}\n```\n\nSelector è¿˜æä¾›äº†ä¸€ç³»åˆ—å’Œ `select()` ç›¸å…³çš„æ–¹æ³•ï¼š\n\n- `int select()`ï¼šç›‘æ§æ‰€æœ‰æ³¨å†Œçš„ `Channel`ï¼Œå½“å®ƒä»¬ä¸­é—´æœ‰éœ€è¦å¤„ç†çš„ `IO` æ“ä½œæ—¶ï¼Œè¯¥æ–¹æ³•è¿”å›ï¼Œå¹¶å°†å¯¹åº”çš„ `SelectionKey` åŠ å…¥è¢«é€‰æ‹©çš„ `SelectionKey` é›†åˆä¸­ï¼Œè¯¥æ–¹æ³•è¿”å›è¿™äº› `Channel` çš„æ•°é‡ã€‚\n- `int select(long timeout)`ï¼šå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é•¿çš„ `select()` æ“ä½œã€‚\n- `int selectNow()`ï¼šæ‰§è¡Œä¸€ä¸ªç«‹å³è¿”å›çš„ `select()` æ“ä½œï¼Œç›¸å¯¹äºæ— å‚æ•°çš„ `select()` æ–¹æ³•è€Œè¨€ï¼Œè¯¥æ–¹æ³•ä¸ä¼šé˜»å¡çº¿ç¨‹ã€‚\n- `Selector wakeup()`ï¼šä½¿ä¸€ä¸ªè¿˜æœªè¿”å›çš„ `select()` æ–¹æ³•ç«‹åˆ»è¿”å›ã€‚\n- ......\n\nä½¿ç”¨ Selector å®ç°ç½‘ç»œè¯»å†™çš„ç®€å•ç¤ºä¾‹ï¼š\n\n\n\n```java\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Iterator;\nimport java.util.Set;\n\npublic class NioSelectorExample {\n\n  public static void main(String[] args) {\n    try {\n      ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();\n      serverSocketChannel.configureBlocking(false);\n      serverSocketChannel.socket().bind(new InetSocketAddress(8080));\n\n      Selector selector = Selector.open();\n      // å°† ServerSocketChannel æ³¨å†Œåˆ° Selector å¹¶ç›‘å¬ OP_ACCEPT äº‹ä»¶\n      serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\n\n      while (true) {\n        int readyChannels = selector.select();\n\n        if (readyChannels == 0) {\n          continue;\n        }\n\n        Set<SelectionKey> selectedKeys = selector.selectedKeys();\n        Iterator<SelectionKey> keyIterator = selectedKeys.iterator();\n\n        while (keyIterator.hasNext()) {\n          SelectionKey key = keyIterator.next();\n\n          if (key.isAcceptable()) {\n            // å¤„ç†è¿æ¥äº‹ä»¶\n            ServerSocketChannel server = (ServerSocketChannel) key.channel();\n            SocketChannel client = server.accept();\n            client.configureBlocking(false);\n\n            // å°†å®¢æˆ·ç«¯é€šé“æ³¨å†Œåˆ° Selector å¹¶ç›‘å¬ OP_READ äº‹ä»¶\n            client.register(selector, SelectionKey.OP_READ);\n          } else if (key.isReadable()) {\n            // å¤„ç†è¯»äº‹ä»¶\n            SocketChannel client = (SocketChannel) key.channel();\n            ByteBuffer buffer = ByteBuffer.allocate(1024);\n            int bytesRead = client.read(buffer);\n\n            if (bytesRead > 0) {\n              buffer.flip();\n              System.out.println(\"æ”¶åˆ°æ•°æ®ï¼š\" +new String(buffer.array(), 0, bytesRead));\n              // å°†å®¢æˆ·ç«¯é€šé“æ³¨å†Œåˆ° Selector å¹¶ç›‘å¬ OP_WRITE äº‹ä»¶\n              client.register(selector, SelectionKey.OP_WRITE);\n            } else if (bytesRead < 0) {\n              // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥\n              client.close();\n            }\n          } else if (key.isWritable()) {\n            // å¤„ç†å†™äº‹ä»¶\n            SocketChannel client = (SocketChannel) key.channel();\n            ByteBuffer buffer = ByteBuffer.wrap(\"Hello, Client!\".getBytes());\n            client.write(buffer);\n\n            // å°†å®¢æˆ·ç«¯é€šé“æ³¨å†Œåˆ° Selector å¹¶ç›‘å¬ OP_READ äº‹ä»¶\n            client.register(selector, SelectionKey.OP_READ);\n          }\n\n          keyIterator.remove();\n        }\n      }\n    } catch (IOException e) {\n      e.printStackTrace();\n    }\n  }\n}\n```\n\nåœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼Œç›‘å¬8080ç«¯å£ï¼Œä½¿ç”¨ Selector å¤„ç†è¿æ¥ã€è¯»å–å’Œå†™å…¥äº‹ä»¶ã€‚å½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨å°†è¯»å–æ•°æ®å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ï¼Œç„¶åå‘å®¢æˆ·ç«¯å›å¤ \"Hello, Client!\"ã€‚\n\n## [#](#nio-é›¶æ‹·è´) NIO é›¶æ‹·è´\n\né›¶æ‹·è´æ˜¯æå‡ IO æ“ä½œæ€§èƒ½çš„ä¸€ä¸ªå¸¸ç”¨æ‰‹æ®µï¼Œåƒ ActiveMQã€Kafka ã€RocketMQã€QMQã€Netty ç­‰é¡¶çº§å¼€æºé¡¹ç›®éƒ½ç”¨åˆ°äº†é›¶æ‹·è´ã€‚\n\né›¶æ‹·è´æ˜¯æŒ‡è®¡ç®—æœºæ‰§è¡Œ IO æ“ä½œæ—¶ï¼ŒCPU ä¸éœ€è¦å°†æ•°æ®ä»ä¸€ä¸ªå­˜å‚¨åŒºåŸŸå¤åˆ¶åˆ°å¦ä¸€ä¸ªå­˜å‚¨åŒºåŸŸï¼Œä»è€Œå¯ä»¥å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠ CPU çš„æ‹·è´æ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé›¶æ‹·è´ä¸»ä¸»è¦è§£å†³æ“ä½œç³»ç»Ÿåœ¨å¤„ç† I/O æ“ä½œæ—¶é¢‘ç¹å¤åˆ¶æ•°æ®çš„é—®é¢˜ã€‚é›¶æ‹·è´çš„å¸¸è§å®ç°æŠ€æœ¯æœ‰ï¼š `mmap+write`ã€`sendfile`å’Œ `sendfile + DMA gather copy` ã€‚\n\nä¸‹å›¾å±•ç¤ºäº†å„ç§é›¶æ‹·è´æŠ€æœ¯çš„å¯¹æ¯”å›¾ï¼š\n\n|                            | CPU æ‹·è´ | DMA æ‹·è´ | ç³»ç»Ÿè°ƒç”¨   | ä¸Šä¸‹æ–‡åˆ‡æ¢ |\n| -------------------------- | -------- | -------- | ---------- | ---------- |\n| ä¼ ç»Ÿæ–¹æ³•                   | 2        | 2        | read+write | 4          |\n| mmap+write                 | 1        | 2        | mmap+write | 4          |\n| sendfile                   | 1        | 2        | sendfile   | 2          |\n| sendfile + DMA gather copy | 0        | 2        | sendfile   | 2          |\n\nå¯ä»¥çœ‹å‡ºï¼Œæ— è®ºæ˜¯ä¼ ç»Ÿçš„ I/O æ–¹å¼ï¼Œè¿˜æ˜¯å¼•å…¥äº†é›¶æ‹·è´ä¹‹åï¼Œ2 æ¬¡ DMA(Direct Memory Access) æ‹·è´æ˜¯éƒ½å°‘ä¸äº†çš„ã€‚å› ä¸ºä¸¤æ¬¡ DMA éƒ½æ˜¯ä¾èµ–ç¡¬ä»¶å®Œæˆçš„ã€‚é›¶æ‹·è´ä¸»è¦æ˜¯å‡å°‘äº† CPU æ‹·è´åŠä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚\n\nJava å¯¹é›¶æ‹·è´çš„æ”¯æŒï¼š\n\n- `MappedByteBuffer` æ˜¯ NIO åŸºäºå†…å­˜æ˜ å°„ï¼ˆ`mmap`ï¼‰è¿™ç§é›¶æ‹·â»‰â½…å¼çš„æä¾›çš„â¼€ç§å®ç°ï¼Œåº•å±‚å®é™…æ˜¯è°ƒç”¨äº† Linux å†…æ ¸çš„ `mmap` ç³»ç»Ÿè°ƒç”¨ã€‚å®ƒå¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶çš„ä¸€éƒ¨åˆ†æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œå½¢æˆä¸€ä¸ªè™šæ‹Ÿå†…å­˜æ–‡ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æ“ä½œå†…å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯»å†™æ–‡ä»¶ã€‚\n- `FileChannel` çš„`transferTo()/transferFrom()`æ˜¯ NIO åŸºäºå‘é€æ–‡ä»¶ï¼ˆ`sendfile`ï¼‰è¿™ç§é›¶æ‹·è´æ–¹å¼çš„æä¾›çš„ä¸€ç§å®ç°ï¼Œåº•å±‚å®é™…æ˜¯è°ƒç”¨äº† Linux å†…æ ¸çš„ `sendfile`ç³»ç»Ÿè°ƒç”¨ã€‚å®ƒå¯ä»¥ç›´æ¥å°†æ–‡ä»¶æ•°æ®ä»ç£ç›˜å‘é€åˆ°ç½‘ç»œï¼Œè€Œä¸éœ€è¦ç»è¿‡ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºã€‚å…³äº`FileChannel`çš„ç”¨æ³•å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š[Java NIO æ–‡ä»¶é€šé“ FileChannel ç”¨æ³•open in new window](https://www.cnblogs.com/robothy/p/14235598.html)ã€‚\n\nä»£ç ç¤ºä¾‹ï¼š\n\n```java\nprivate void loadFileIntoMemory(File xmlFile) throws IOException {\n  FileInputStream fis = new FileInputStream(xmlFile);\n  // åˆ›å»º FileChannel å¯¹è±¡\n  FileChannel fc = fis.getChannel();\n  // FileChannle.map() å°†æ–‡ä»¶æ˜ å°„åˆ°ç›´æ¥å†…å­˜å¹¶è¿”å› MappedByteBuffer å¯¹è±¡\n  MappedByteBuffer mmb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\n  xmlFileBuffer = new byte[(int)fc.size()];\n  mmb.get(xmlFileBuffer);\n  fis.close();\n}\n```\n\nè½¬è½½ï¼š[Java NIO æ ¸å¿ƒçŸ¥è¯†æ€»ç»“ ](https://javaguide.cn/java/io/nio-basis.html#nio-é›¶æ‹·è´)\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"åˆ†æ²»ç®—æ³•æ€æƒ³","url":"/2023/07/08/åˆ†æ²»ç®—æ³•æ€æƒ³/","content":"\n## åŸºæœ¬æ¦‚å¿µ\n\nã€€ã€€åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œåˆ†æ²»æ³•æ˜¯ä¸€ç§å¾ˆé‡è¦çš„ç®—æ³•ã€‚å­—é¢ä¸Šçš„è§£é‡Šæ˜¯â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–æ›´å¤šçš„ç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œå†æŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜â€¦â€¦ç›´åˆ°æœ€åå­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æ¥æ±‚è§£ï¼ŒåŸé—®é¢˜çš„è§£å³å­é—®é¢˜çš„è§£çš„åˆå¹¶ã€‚è¿™ä¸ªæŠ€å·§æ˜¯å¾ˆå¤šé«˜æ•ˆç®—æ³•çš„åŸºç¡€ï¼Œå¦‚æ’åºç®—æ³•([å¿«é€Ÿæ’åº](http://www.cnblogs.com/xsyfl/p/6901315.html)ï¼Œ[å½’å¹¶æ’åº](http://www.cnblogs.com/xsyfl/p/6905974.html))ï¼Œå‚…ç«‹å¶å˜æ¢(å¿«é€Ÿå‚…ç«‹å¶å˜æ¢)â€¦â€¦\n\nã€€ã€€ä»»ä½•ä¸€ä¸ªå¯ä»¥ç”¨è®¡ç®—æœºæ±‚è§£çš„é—®é¢˜æ‰€éœ€çš„è®¡ç®—æ—¶é—´éƒ½ä¸å…¶è§„æ¨¡æœ‰å…³ã€‚é—®é¢˜çš„è§„æ¨¡è¶Šå°ï¼Œè¶Šå®¹æ˜“ç›´æ¥æ±‚è§£ï¼Œè§£é¢˜æ‰€éœ€çš„è®¡ç®—æ—¶é—´ä¹Ÿè¶Šå°‘ã€‚ä¾‹å¦‚ï¼Œå¯¹äºnä¸ªå…ƒç´ çš„æ’åºé—®é¢˜ï¼Œå½“n=1æ—¶ï¼Œä¸éœ€ä»»ä½•è®¡ç®—ã€‚n=2æ—¶ï¼Œåªè¦ä½œä¸€æ¬¡æ¯”è¾ƒå³å¯æ’å¥½åºã€‚n=3æ—¶åªè¦ä½œ3æ¬¡æ¯”è¾ƒå³å¯ï¼Œâ€¦ã€‚è€Œå½“nè¾ƒå¤§æ—¶ï¼Œé—®é¢˜å°±ä¸é‚£ä¹ˆå®¹æ˜“å¤„ç†äº†ã€‚è¦æƒ³ç›´æ¥è§£å†³ä¸€ä¸ªè§„æ¨¡è¾ƒå¤§çš„é—®é¢˜ï¼Œæœ‰æ—¶æ˜¯ç›¸å½“å›°éš¾çš„ã€‚\n\n## åŸºæœ¬æ€æƒ³åŠç­–ç•¥\n\nã€€ã€€åˆ†æ²»æ³•çš„è®¾è®¡æ€æƒ³æ˜¯ï¼šå°†ä¸€ä¸ªéš¾ä»¥ç›´æ¥è§£å†³çš„å¤§é—®é¢˜ï¼Œåˆ†å‰²æˆä¸€äº›è§„æ¨¡è¾ƒå°çš„ç›¸åŒé—®é¢˜ï¼Œä»¥ä¾¿å„ä¸ªå‡»ç ´ï¼Œåˆ†è€Œæ²»ä¹‹ã€‚\n\nã€€ã€€åˆ†æ²»ç­–ç•¥æ˜¯ï¼šå¯¹äºä¸€ä¸ªè§„æ¨¡ä¸ºnçš„é—®é¢˜ï¼Œè‹¥è¯¥é—®é¢˜å¯ä»¥å®¹æ˜“åœ°è§£å†³ï¼ˆæ¯”å¦‚è¯´è§„æ¨¡nè¾ƒå°ï¼‰åˆ™ç›´æ¥è§£å†³ï¼Œå¦åˆ™å°†å…¶åˆ†è§£ä¸ºkä¸ªè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜äº’ç›¸ç‹¬ç«‹ä¸”ä¸åŸé—®é¢˜å½¢å¼ç›¸åŒï¼Œé€’å½’åœ°è§£è¿™äº›å­é—®é¢˜ï¼Œç„¶åå°†å„å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚è¿™ç§ç®—æ³•è®¾è®¡ç­–ç•¥å«åšåˆ†æ²»æ³•ã€‚\n\nã€€ã€€å¦‚æœåŸé—®é¢˜å¯åˆ†å‰²æˆkä¸ªå­é—®é¢˜ï¼Œ1<kâ‰¤nï¼Œä¸”è¿™äº›å­é—®é¢˜éƒ½å¯è§£å¹¶å¯åˆ©ç”¨è¿™äº›å­é—®é¢˜çš„è§£æ±‚å‡ºåŸé—®é¢˜çš„è§£ï¼Œé‚£ä¹ˆè¿™ç§åˆ†æ²»æ³•å°±æ˜¯å¯è¡Œçš„ã€‚ç”±åˆ†æ²»æ³•äº§ç”Ÿçš„å­é—®é¢˜å¾€å¾€æ˜¯åŸé—®é¢˜çš„è¾ƒå°æ¨¡å¼ï¼Œè¿™å°±ä¸ºä½¿ç”¨é€’å½’æŠ€æœ¯æä¾›äº†æ–¹ä¾¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåå¤åº”ç”¨åˆ†æ²»æ‰‹æ®µï¼Œå¯ä»¥ä½¿å­é—®é¢˜ä¸åŸé—®é¢˜ç±»å‹ä¸€è‡´è€Œå…¶è§„æ¨¡å´ä¸æ–­ç¼©å°ï¼Œæœ€ç»ˆä½¿å­é—®é¢˜ç¼©å°åˆ°å¾ˆå®¹æ˜“ç›´æ¥æ±‚å‡ºå…¶è§£ã€‚è¿™è‡ªç„¶å¯¼è‡´é€’å½’è¿‡ç¨‹çš„äº§ç”Ÿã€‚åˆ†æ²»ä¸é€’å½’åƒä¸€å¯¹å­ªç”Ÿå…„å¼Ÿï¼Œç»å¸¸åŒæ—¶åº”ç”¨åœ¨ç®—æ³•è®¾è®¡ä¹‹ä¸­ï¼Œå¹¶ç”±æ­¤äº§ç”Ÿè®¸å¤šé«˜æ•ˆç®—æ³•ã€‚\n\n## åˆ†æ²»æ³•ä½¿ç”¨åœºæ™¯\n\nã€€ã€€åˆ†æ²»æ³•æ‰€èƒ½è§£å†³çš„é—®é¢˜ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š\n\nã€€ã€€1) è¯¥é—®é¢˜çš„è§„æ¨¡ç¼©å°åˆ°ä¸€å®šçš„ç¨‹åº¦å°±å¯ä»¥å®¹æ˜“åœ°è§£å†³\n\nã€€ã€€2) è¯¥é—®é¢˜å¯ä»¥åˆ†è§£ä¸ºè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„ç›¸åŒé—®é¢˜ï¼Œå³è¯¥é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨ã€‚\n\nã€€ã€€3) åˆ©ç”¨è¯¥é—®é¢˜åˆ†è§£å‡ºçš„å­é—®é¢˜çš„è§£å¯ä»¥åˆå¹¶ä¸ºè¯¥é—®é¢˜çš„è§£ï¼›\n\nã€€ã€€4) è¯¥é—®é¢˜æ‰€åˆ†è§£å‡ºçš„å„ä¸ªå­é—®é¢˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå³å­é—®é¢˜ä¹‹é—´ä¸åŒ…å«å…¬å…±çš„å­å­é—®é¢˜ã€‚\n\nã€€ã€€ç¬¬ä¸€æ¡ç‰¹å¾æ˜¯ç»å¤§å¤šæ•°é—®é¢˜éƒ½å¯ä»¥æ»¡è¶³çš„ï¼Œå› ä¸ºé—®é¢˜çš„è®¡ç®—å¤æ‚æ€§ä¸€èˆ¬æ˜¯éšç€é—®é¢˜è§„æ¨¡çš„å¢åŠ è€Œå¢åŠ ï¼›\n\nã€€ã€€**ç¬¬äºŒæ¡ç‰¹å¾æ˜¯åº”ç”¨åˆ†æ²»æ³•çš„å‰æ**å®ƒä¹Ÿæ˜¯å¤§å¤šæ•°é—®é¢˜å¯ä»¥æ»¡è¶³çš„ï¼Œæ­¤ç‰¹å¾åæ˜ äº†é€’å½’æ€æƒ³çš„åº”ç”¨ï¼›ã€\n\nã€€ã€€**ç¬¬ä¸‰æ¡ç‰¹å¾æ˜¯å…³é”®ï¼Œèƒ½å¦åˆ©ç”¨åˆ†æ²»æ³•å®Œå…¨å–å†³äºé—®é¢˜æ˜¯å¦å…·æœ‰ç¬¬ä¸‰æ¡ç‰¹å¾**ï¼Œå¦‚æœå…·å¤‡äº†ç¬¬ä¸€æ¡å’Œç¬¬äºŒæ¡ç‰¹å¾ï¼Œè€Œä¸å…·å¤‡ç¬¬ä¸‰æ¡ç‰¹å¾ï¼Œåˆ™å¯ä»¥è€ƒè™‘ç”¨è´ªå¿ƒæ³•æˆ–åŠ¨æ€è§„åˆ’æ³•ã€‚\n\nã€€ã€€**ç¬¬å››æ¡ç‰¹å¾æ¶‰åŠåˆ°åˆ†æ²»æ³•çš„æ•ˆç‡**ï¼Œå¦‚æœå„å­é—®é¢˜æ˜¯ä¸ç‹¬ç«‹çš„åˆ™åˆ†æ²»æ³•è¦åšè®¸å¤šä¸å¿…è¦çš„å·¥ä½œï¼Œé‡å¤åœ°è§£å…¬å…±çš„å­é—®é¢˜ï¼Œæ­¤æ—¶è™½ç„¶å¯ç”¨åˆ†æ²»æ³•ï¼Œä½†**ä¸€èˆ¬ç”¨åŠ¨æ€è§„åˆ’æ³•è¾ƒå¥½**ã€‚\n\n## åˆ†æ²»æ³•å¾—åŸºæœ¬æ­¥éª¤\n\nã€€ã€€åˆ†æ²»æ³•åœ¨æ¯ä¸€å±‚é€’å½’ä¸Šéƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š\n\nã€€ã€€step1 åˆ†è§£ï¼šå°†åŸé—®é¢˜åˆ†è§£ä¸ºè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œä¸åŸé—®é¢˜å½¢å¼ç›¸åŒçš„å­é—®é¢˜ï¼›\n\nã€€ã€€step2 è§£å†³ï¼šè‹¥å­é—®é¢˜è§„æ¨¡è¾ƒå°è€Œå®¹æ˜“è¢«è§£å†³åˆ™ç›´æ¥è§£ï¼Œå¦åˆ™é€’å½’åœ°è§£å„ä¸ªå­é—®é¢˜\n\nã€€ã€€step3 åˆå¹¶ï¼šå°†å„ä¸ªå­é—®é¢˜çš„è§£åˆå¹¶ä¸ºåŸé—®é¢˜çš„è§£ã€‚\n\nã€€ã€€å®ƒçš„ä¸€èˆ¬çš„ç®—æ³•è®¾è®¡æ¨¡å¼å¦‚ä¸‹ï¼š\n\nã€€ã€€Divide-and-Conquer(P)\n\nã€€ã€€1. if |P|â‰¤n0\n\nã€€ã€€2. then return(ADHOC(P))\n\nã€€ã€€3. å°†Påˆ†è§£ä¸ºè¾ƒå°çš„å­é—®é¢˜ P1 ,P2 ,â€¦,Pk\n\nã€€ã€€4. for iâ†1 to k\n\nã€€ã€€5. do yi â† Divide-and-Conquer(Pi) â–³ é€’å½’è§£å†³Pi\n\nã€€ã€€6. T â† MERGE(y1,y2,â€¦,yk) â–³ åˆå¹¶å­é—®é¢˜\n\nã€€ã€€7. return(T)\n\nã€€ã€€å…¶ä¸­|P|è¡¨ç¤ºé—®é¢˜Pçš„è§„æ¨¡ï¼›n0ä¸ºä¸€é˜ˆå€¼ï¼Œè¡¨ç¤ºå½“é—®é¢˜Pçš„è§„æ¨¡ä¸è¶…è¿‡n0æ—¶ï¼Œé—®é¢˜å·²å®¹æ˜“ç›´æ¥è§£å‡ºï¼Œä¸å¿…å†ç»§ç»­åˆ†è§£ã€‚ADHOC(P)æ˜¯è¯¥åˆ†æ²»æ³•ä¸­çš„åŸºæœ¬å­ç®—æ³•ï¼Œç”¨äºç›´æ¥è§£å°è§„æ¨¡çš„é—®é¢˜Pã€‚å› æ­¤ï¼Œå½“Pçš„è§„æ¨¡ä¸è¶…è¿‡n0æ—¶ç›´æ¥ç”¨ç®—æ³•ADHOC(P)æ±‚è§£ã€‚ç®—æ³•MERGE(y1,y2,â€¦,yk)æ˜¯è¯¥åˆ†æ²»æ³•ä¸­çš„åˆå¹¶å­ç®—æ³•ï¼Œç”¨äºå°†Pçš„å­é—®é¢˜P1 ,P2 ,â€¦,Pkçš„ç›¸åº”çš„è§£y1,y2,â€¦,ykåˆå¹¶ä¸ºPçš„è§£ã€‚\n\n## åˆ†æ²»æ³•çš„å¤æ‚æ€§åˆ†æ\n\nã€€ã€€ä¸€ä¸ªåˆ†æ²»æ³•å°†è§„æ¨¡ä¸ºnçš„é—®é¢˜åˆ†æˆkä¸ªè§„æ¨¡ä¸ºnï¼mçš„å­é—®é¢˜å»è§£ã€‚è®¾åˆ†è§£é˜€å€¼n0=1ï¼Œä¸”adhocè§£è§„æ¨¡ä¸º1çš„é—®é¢˜è€—è´¹1ä¸ªå•ä½æ—¶é—´ã€‚å†è®¾å°†åŸé—®é¢˜åˆ†è§£ä¸ºkä¸ªå­é—®é¢˜ä»¥åŠç”¨mergeå°†kä¸ªå­é—®é¢˜çš„è§£åˆå¹¶ä¸ºåŸé—®é¢˜çš„è§£éœ€ç”¨f(n)ä¸ªå•ä½æ—¶é—´ã€‚ç”¨T(n)è¡¨ç¤ºè¯¥åˆ†æ²»æ³•è§£è§„æ¨¡ä¸º|P|=nçš„é—®é¢˜æ‰€éœ€çš„è®¡ç®—æ—¶é—´ï¼Œåˆ™æœ‰ï¼š\n\nã€€ã€€Tï¼ˆnï¼‰= k T(n/m)+f(n)\n\nã€€ã€€é€šè¿‡è¿­ä»£æ³•æ±‚å¾—æ–¹ç¨‹çš„è§£ï¼š\n\nã€€ã€€é€’å½’æ–¹ç¨‹åŠå…¶è§£åªç»™å‡ºnç­‰äºmçš„æ–¹å¹‚æ—¶T(n)çš„å€¼ï¼Œä½†æ˜¯å¦‚æœè®¤ä¸ºT(n)è¶³å¤Ÿå¹³æ»‘ï¼Œé‚£ä¹ˆç”±nç­‰äºmçš„æ–¹å¹‚æ—¶T(n)çš„å€¼å¯ä»¥ä¼°è®¡T(n)çš„å¢é•¿é€Ÿåº¦ã€‚é€šå¸¸å‡å®šT(n)æ˜¯å•è°ƒä¸Šå‡çš„ï¼Œä»è€Œå½“miâ‰¤n<mi+1æ—¶ï¼ŒT(mi)â‰¤T(n)<T(mi+1)ã€‚\n\n## å¯ä½¿ç”¨åˆ†æ²»æ³•æ±‚è§£çš„ä¸€äº›ç»å…¸é—®é¢˜\n\nã€€ã€€ï¼ˆ1ï¼‰äºŒåˆ†æœç´¢\n\nã€€ã€€ï¼ˆ2ï¼‰å¤§æ•´æ•°ä¹˜æ³•\n\nã€€ã€€ï¼ˆ3ï¼‰StrassençŸ©é˜µä¹˜æ³•\n\nã€€ã€€ï¼ˆ4ï¼‰æ£‹ç›˜è¦†ç›–\n\nã€€ã€€ï¼ˆ5ï¼‰åˆå¹¶æ’åº\n\nã€€ã€€ï¼ˆ6ï¼‰å¿«é€Ÿæ’åº\n\nã€€ã€€ï¼ˆ7ï¼‰çº¿æ€§æ—¶é—´é€‰æ‹©\n\nã€€ã€€ï¼ˆ8ï¼‰æœ€æ¥è¿‘ç‚¹å¯¹é—®é¢˜\n\nã€€ã€€ï¼ˆ9ï¼‰å¾ªç¯èµ›æ—¥ç¨‹è¡¨\n\nã€€ã€€ï¼ˆ10ï¼‰æ±‰è¯ºå¡”\n\n## ä¸€äº›ç»å…¸é—®é¢˜æ±‚è§£ä»£ç å®ç°\n\n### 1ï¼‰äºŒåˆ†æœç´¢\n\näºŒåˆ†æœç´¢åˆå«åšäºŒåˆ†æŸ¥æ‰¾ã€æŠ˜åŠæŸ¥æ‰¾ï¼Œå®ƒæ˜¯ä¸€ç§æ•ˆç‡è¾ƒé«˜å¾—æŸ¥æ‰¾æ–¹æ³•ã€‚\n\näºŒåˆ†æœç´¢å¾—è¦æ±‚ï¼š\n\nçº¿æ€§è¡¨ä¸ºæœ‰åºè¡¨ï¼Œå¹¶ä¸”è¦ç”¨å‘é‡ä½œä¸ºè¡¨å¾—å­˜å‚¨ç»“æ„ã€‚\n\näºŒåˆ†æœç´¢å¾—åŸºæœ¬æ€æƒ³ï¼šå…ˆç¡®å®šå¾…æŸ¥æ‰¾è®°å½•æ‰€åœ¨çš„èŒƒå›´ï¼Œç„¶åé€æ­¥ç¼©å°èŒƒå›´ç›´è‡³æ‰¾åˆ°æˆ–æ‰¾ä¸åˆ°è¯¥è®°å½•ä½ç½®ã€‚\n\näºŒåˆ†æŸ¥æ‰¾æ­¥éª¤ï¼š\n\n1ã€å…ˆç¡®å®šä¸­é—´ä½ç½®ï¼š\n\nmiddle = (left+right)/2;\n\n2ã€å°†å¾…æŸ¥æ‰¾å¾—keyå€¼ä¸data[middle].keyå€¼ç›¸æ¯”è¾ƒã€‚è‹¥ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸå¹¶è¿”å›è¯¥ä½ç½®ï¼Œå¦åˆ™é¡»ç¡®å®šæ–°å¾—æŸ¥æ‰¾åŒºé—´ï¼Œç»§ç»­äºŒåˆ†æŸ¥æ‰¾ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š\n\nå¦‚æœdata[middle].keyå¤§äºkeyï¼Œç”±äºdataä¸ºæœ‰åºçº¿æ€§è¡¨ï¼Œå¯çŸ¥data[middle...right].keyå‡å¤§äºkeyï¼Œå› æ­¤è‹¥è¡¨ä¸­å­˜åœ¨å…³é”®å­—ç­‰äºkeyå¾—èŠ‚ç‚¹ï¼Œåˆ™ä¸€å®šåœ¨ä½ç½®middleå·¦è¾¹çš„å­è¡¨ä¸­ã€‚åä¹‹ï¼Œã€€data[middle].keyå°äºkeyï¼Œã€€å› æ­¤è‹¥è¡¨ä¸­å­˜åœ¨å…³é”®å­—ç­‰äºkeyå¾—èŠ‚ç‚¹ï¼Œåˆ™ä¸€å®šåœ¨ä½ç½®middleå³è¾¹çš„å­è¡¨ä¸­ã€‚ä¸‹ä¸€æ¬¡æŸ¥æ‰¾é’ˆå¯¹æ–°å¾—åŒºåŸŸè¿›è¡ŒæŸ¥æ‰¾ã€‚\n\n```java\n 1 public static void main(String[] args) {\n 2         int[] a = {1,2,3,4,5,6,7,8,9};\n 3         int pos =bSearch(a, 0, a.length-1, 1);\n 4         System.out.println(pos);\n 5     }\n 6     \n 7     \n 8     public static int bSearch(int[] data,int left,int right,int key){\n 9         //è·å–ä¸­é—´ä½ç½®\n10         int middle = (left+right)/2;\n11         //æ¯”è¾ƒkeyå€¼å¦‚ç›¸ç­‰ï¼Œè¿”å›å½“å‰ä½ç½®ï¼Œå¦åˆ™ç¡®è®¤æ–°çš„æŸ¥æ‰¾ç©ºé—´\n12         if(data[middle] == key){\n13             return middle;\n14         }else if(data[middle] >key){\n15             return bSearch(data, left, middle-1, key);\n16         }else{\n17             return bSearch(data, middle+1, right, key);\n18         }\n19     }\n```\n\n### 2ï¼‰æ±‰è¯ºå¡”\n\nåœ¨æ±‰è¯ºå¡”æ¸¸æˆä¸­ï¼Œæœ‰ä¸‰ä¸ªåˆ†åˆ«å‘½åä¸ºAã€Bã€Cå¾—å¡”åº§ï¼Œå‡ ä¸ªå¤§å°å„ä¸ç›¸åŒï¼Œä»å°åˆ°å¤§ä¸€æ¬¡ç¼–å·å¾—åœ†ç›˜ï¼Œæ¯ä¸ªåŸç›˜ä¸­é—´æœ‰ä¸€ä¸ªå°å­”ã€‚æœ€åˆï¼Œæ‰€æœ‰å¾—åœ†ç›˜éƒ½åœ¨Aå¡”åº§ä¸Šï¼Œå…¶ä¸­æœ€å¤§å¾—åœ†ç›˜åœ¨æœ€ä¸‹é¢ï¼Œç„¶åæ˜¯ç¬¬äºŒå¤§ï¼Œä»¥æ­¤ç±»æ¨.\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1030037-20170531112031243-1835538124.png)\n\næ¸¸æˆçš„ç›®çš„æ˜¯å°†æ‰€æœ‰çš„åœ†ç›˜ä»å¡”åº§Aç§»åŠ¨åˆ°å¡”åº§B;å¡”åº§Cç”¨æ¥é˜²æ­¢ä¸´æ—¶åœ†ç›˜,æ¸¸æˆçš„è§„åˆ™å¦‚ä¸‹:\n\n1ã€ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜\n\n2ã€ä»»ä½•æ—¶å€™éƒ½ä¸èƒ½å°†ä¸€ä¸ªè¾ƒå¤§çš„åœ†ç›˜å‹åœ¨è¾ƒå°çš„åœ†ç›˜ä¸Šé¢.\n\n3ã€é™¤äº†ç¬¬äºŒæ¡é™åˆ¶,ä»»ä½•å¡”åº§çš„æœ€ä¸Šé¢çš„åœ†ç›˜éƒ½å¯ä»¥ç§»åŠ¨åˆ°å…¶ä»–å¡”åº§ä¸Š.\n\næ±‰è¯ºå¡”é—®é¢˜è§£å†³æ€æƒ³:\n\nã€€ã€€åœ¨è§£å†³æ±‰è¯ºå¡”é—®é¢˜æ—¶,äº‹å®ä¸Š,æˆ‘ä»¬åº”è¯¥æœ€å…ˆå…³æ³¨çš„æ˜¯ç¬¬å››ä¸ªåœ†ç›˜ï¼Œè¦æŠŠç¬¬å››ä¸ªåœ†ç›˜ç§»åˆ°BæŸ±ä¸Šï¼Œå°±éœ€è¦å°†123ç§»åŠ¨åˆ°Cä¸Šã€‚æ¥ä¸‹æ¥çš„é—®é¢˜å°±å˜æˆäº†å¦‚ä½•æŠŠ3ç§»åŠ¨åˆ°Cï¼Œé‚£ä¹ˆå°±éœ€è¦å°†12ç§»åŠ¨åˆ°Bä¸Šï¼Œç„¶åè€ƒè™‘æ€ä¹ˆå°†2ç§»åŠ¨åˆ°Bä¸Šï¼Œå¯ä»¥æ¨å‡ºç¬¬ä¸€æ­¥å°†1ç§»åŠ¨åˆ°Cä¸Šã€‚ï¼ˆåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­çš„æ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸ºäº†ç§»åŠ¨å“ªä¸€ä¸ªï¼Œå°±éœ€è¦ç§»åŠ¨é‚£äº›ï¼‰\n\nä»£ç å®ç°ï¼šï¼ˆè¿™ä¸ªæ¡ˆä¾‹ä¸­ç”¨åˆ°äº†åˆ†æ²»æ€æƒ³ï¼ŒåŒæ—¶ä¹Ÿç”¨åˆ°äº†é€’å½’ï¼‰\n\n```java\npublic class Moved {\n 2     private static int count = 1;\n 3     public static void main(String[] args) {\n 4         moved(4, \"ç¬¬ä¸€æ ¹æŸ±å­\", \"ç¬¬äºŒæ ¹æŸ±å­\", \"ç¬¬ä¸‰æ ¹æŸ±å­\");\n 5     }\n 6     \n 7     /**\n 8      * \n 9      * @param i  åœ†ç›˜æ•°é‡\n10      * @param a  åœ†ç›˜åˆå§‹æ‰€åœ¨å¡”åº§\n11      * @param b  åœ†ç›˜å°†è¦ç§»åŠ¨åˆ°çš„å¡”åº§\n12      * @param c     è¾…åŠ©åœ†ç›˜ç§»åŠ¨çš„å¡”åº§\n13      */\n14     public static void moved(int i,String a,String b,String c){\n15         if(i == 1){\n16             disPaly(1, a, b);\n17         }else{\n18             //å°†i-1æ ¹åœ†ç›˜ç”±Aç§»åŠ¨åˆ°C\n19             moved(i-1, a, c, b);\n20             //å°†åœ†ç›˜i ç”±Aç§»åŠ¨åˆ°B\n21             disPaly(i, a, b);\n22             //å°†i-1æ ¹åœ†ç›˜ç”±Cç§»åŠ¨åˆ°A\n23             moved(i-1,c,b,a);\n24         }\n25     }\n26     \n27     public static void disPaly(int i,String a,String b){\n28         System.out.println(\"ç¬¬\"+count+\"æ­¥ï¼šç§»åŠ¨ç¬¬\"+i+\"ä¸ªå¡”ä»\"+a+\"åˆ°\"+b);\n29         count++;\n30     }\n31 }\n```\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"å…³äºå®½è¡¨çš„ä¼˜ç¼ºç‚¹å’Œè§£å†³æ–¹æ³•","url":"/2023/07/08/å…³äºå®½è¡¨çš„ä¼˜ç¼ºç‚¹å’Œè§£å†³æ–¹æ³•/","content":"\n## å‰è¨€\n\nå¤§å®¶ä½¿ç”¨å®½è¡¨ä¸»è¦åŸå› æœ‰ä¸¤ä¸ªã€‚\n\nä¸€æ˜¯ä¸ºäº†**æé«˜æŸ¥è¯¢æ€§èƒ½**ã€‚ç°ä»£BIï¼ˆ*å•†ä¸šæ™ºèƒ½ï¼Œåˆç§°å•†ä¸šæ™ºæ…§æˆ–å•†åŠ¡æ™ºèƒ½ï¼ŒæŒ‡ç”¨ç°ä»£æ•°æ®ä»“åº“æŠ€æœ¯ã€çº¿ä¸Šåˆ†æå¤„ç†æŠ€æœ¯ã€æ•°æ®æŒ–æ˜å’Œæ•°æ®å±•ç¤ºæŠ€æœ¯è¿›è¡Œæ•°æ®åˆ†æä»¥å®ç°å•†ä¸šä»·å€¼*ï¼‰é€šå¸¸ä½¿ç”¨å…³ç³»æ•°æ®åº“ä½œä¸ºåå°ï¼Œè€ŒSQLé€šå¸¸ä½¿ç”¨çš„HASH JOINç®—æ³•ï¼Œåœ¨å…³è”è¡¨æ•°é‡å’Œå…³è”å±‚çº§å˜å¤šçš„æ—¶å€™ï¼Œè®¡ç®—æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œæœ‰ä¸ƒå…«ä¸ªè¡¨ä¸‰å››å±‚çº§å…³è”æ—¶å°±èƒ½è§‚å¯Ÿåˆ°è¿™ä¸ªç°è±¡ï¼Œè€ŒBIä¸šåŠ¡ä¸­çš„å…³è”å¤æ‚åº¦è¿œè¿œè¶…è¿‡è¿™ä¸ªè§„æ¨¡ï¼Œç›´æ¥ä½¿ç”¨SQLçš„JOINå°±æ— æ³•è¾¾åˆ°å‰ç«¯ç«‹ç­‰å¯å–çš„æŸ¥è¯¢éœ€è¦äº†ã€‚ä¸ºäº†é¿å…å…³è”å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œå°±è¦å…ˆå°†å…³è”æ¶ˆé™¤ï¼Œå³å°†å¤šè¡¨äº‹å…ˆå…³è”å¥½é‡‡ç”¨å•è¡¨å­˜å‚¨ï¼ˆä¹Ÿå°±æ˜¯å®½è¡¨ï¼‰ï¼Œå†æŸ¥è¯¢çš„æ—¶å€™å°±å¯ä»¥ä¸ç”¨å†å…³è”ï¼Œä»è€Œè¾¾åˆ°æå‡æŸ¥è¯¢æ€§èƒ½çš„ç›®çš„ã€‚\n\näºŒæ˜¯ä¸ºäº†**é™ä½ä¸šåŠ¡éš¾åº¦**ã€‚å› ä¸ºå¤šè¡¨å…³è”å°¤å…¶æ˜¯å¤æ‚å…³è”åœ¨BIå‰ç«¯å¾ˆéš¾è¡¨è¾¾å’Œä½¿ç”¨ã€‚å¦‚æœé‡‡ç”¨è‡ªåŠ¨å…³è”ï¼ˆæ ¹æ®å­—æ®µç±»å‹ç­‰ä¿¡æ¯åŒ¹é…ï¼‰å½“é‡åˆ°åŒç»´å­—æ®µï¼ˆå¦‚ä¸€ä¸ªè¡¨æœ‰2ä¸ªä»¥ä¸Šåœ°åŒºå­—æ®µï¼‰æ—¶ä¼šâ€œæ™•æ‰â€ä¸çŸ¥é“è¯¥å…³è”å“ªä¸ªï¼Œè¡¨é—´å¾ªç¯å…³è”æˆ–è‡ªå…³è”çš„æƒ…å†µä¹Ÿæ— æ³•å¤„ç†ï¼›å¦‚æœå°†ä¼—å¤šè¡¨å¼€æ”¾ç»™ç”¨æˆ·æ¥è‡ªè¡Œé€‰æ‹©å…³è”ï¼Œç”±äºä¸šåŠ¡ç”¨æˆ·æ— æ³•ç†è§£è¡¨é—´å…³ç³»è€Œå‡ ä¹æ²¡æœ‰å¯ç”¨æ€§ï¼›åˆ†æ­¥å…³è”å¯ä»¥æè¿°å¤æ‚çš„å…³è”éœ€æ±‚ï¼Œä½†ä¸€æ—¦å‰ä¸€æ­¥å‡ºé”™å°±è¦æ¨å€’é‡æ¥ã€‚æ‰€ä»¥ï¼Œæ— è®ºé‡‡ç”¨ä½•ç§æ–¹å¼ï¼Œå·¥ç¨‹å®ç°å’Œç”¨æˆ·ä½¿ç”¨éƒ½å¾ˆéº»çƒ¦ã€‚ä½†æ˜¯åŸºäºå•è¡¨æ¥åšå°±ä¼šç®€å•å¾ˆå¤šï¼Œä¸šåŠ¡ç”¨æˆ·ä½¿ç”¨æ—¶æ²¡æœ‰ä»€ä¹ˆéšœç¢ï¼Œå› æ­¤å°†å¤šè¡¨ç»„ç»‡æˆå®½è¡¨å°±æˆäº†â€œè‡ªç„¶è€Œç„¶â€çš„äº‹æƒ…ã€‚\n\n### ç¼ºç‚¹\n\n**æ•°æ®å†—ä½™å®¹é‡å¤§**\n\nå®½è¡¨ä¸ç¬¦åˆèŒƒå¼è¦æ±‚ï¼Œå°†å¤šä¸ªè¡¨åˆå¹¶æˆä¸€ä¸ªè¡¨ä¼šå­˜åœ¨å¤§é‡å†—ä½™æ•°æ®ï¼Œå†—ä½™ç¨‹åº¦è·ŸåŸè¡¨æ•°æ®é‡å’Œè¡¨é—´å…³ç³»æœ‰å…³ï¼Œé€šå¸¸å¦‚æœå­˜åœ¨å¤šå±‚å¤–é”®è¡¨ï¼Œå…¶å†—ä½™ç¨‹åº¦ä¼šå‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚å¤§é‡æ•°æ®å†—ä½™ä¸ä»…ä¼šå¸¦æ¥å­˜å‚¨ä¸Šçš„å‹åŠ›ï¼ˆå¤šä¸ªè¡¨ç»„åˆå‡ºæ¥çš„å®½è¡¨æ•°é‡å¯èƒ½éå¸¸å¤šï¼‰é€ æˆæ•°æ®åº“å®¹é‡é—®é¢˜ï¼Œåœ¨æŸ¥è¯¢è®¡ç®—æ—¶ç”±äºå¤§é‡å†—ä½™æ•°æ®å‚ä¸è¿ç®—è¿˜ä¼šå½±å“è®¡ç®—æ€§èƒ½ï¼Œå¯¼è‡´è™½ç„¶ç”¨äº†å®½è¡¨ä½†ä»ç„¶æŸ¥è¯¢å¾ˆæ…¢ã€‚\n\n**æ•°æ®é”™è¯¯**\n\nç”±äºå®½è¡¨ä¸ç¬¦åˆä¸‰èŒƒå¼è¦æ±‚ï¼Œæ•°æ®å­˜å‚¨æ—¶å¯èƒ½å‡ºç°ä¸€è‡´æ€§é”™è¯¯ï¼ˆè„å†™ï¼‰ã€‚æ¯”å¦‚åŒä¸€ä¸ªé”€å”®å‘˜åœ¨ä¸åŒè®°å½•ä¸­å¯èƒ½å­˜å‚¨äº†ä¸åŒçš„æ€§åˆ«ï¼ŒåŒä¸€ä¸ªä¾›åº”å•†åœ¨ä¸åŒè®°å½•ä¸­çš„æ‰€åœ¨åœ°å¯èƒ½å‡ºç°çŸ›ç›¾ã€‚åŸºäºè¿™æ ·çš„æ•°æ®åšåˆ†æç»“æœæ˜¾ç„¶ä¸å¯¹ï¼Œè€Œè¿™ç§é”™è¯¯éå¸¸éšè”½å¾ˆéš¾è¢«å‘ç°ã€‚\n\nå¦å¤–ï¼Œå¦‚æœæ„å»ºçš„å®½è¡¨ä¸åˆç†è¿˜ä¼šå‡ºç°æ±‡æ€»é”™è¯¯ã€‚æ¯”å¦‚åŸºäºä¸€å¯¹å¤šçš„Aè¡¨å’ŒBè¡¨æ„å»ºå®½è¡¨ï¼Œå¦‚æœAä¸­æœ‰è®¡ç®—æŒ‡æ ‡ï¼ˆå¦‚é‡‘é¢ï¼‰ï¼Œåœ¨å®½è¡¨ä¸­å°±ä¼šé‡å¤ï¼ŒåŸºäºé‡å¤çš„æŒ‡æ ‡å†æ±‡æ€»å°±ä¼šå‡ºç°é”™è¯¯ã€‚\n\n**çµæ´»æ€§å·®**\n\nå®½è¡¨æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æŒ‰éœ€å»ºæ¨¡çš„æ‰‹æ®µï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚æ¥æ„å»ºå®½è¡¨ï¼ˆè™½ç„¶ç†è®ºä¸Šå¯ä»¥æŠŠæ‰€æœ‰è¡¨çš„ç»„åˆéƒ½å½¢æˆå®½è¡¨ï¼Œä½†è¿™åªå­˜åœ¨äºç†è®ºä¸Šï¼Œå¦‚æœè¦å®é™…æ“ä½œä¼šå‘ç°éœ€è¦çš„å­˜å‚¨ç©ºé—´å¤§åˆ°å®Œå…¨æ— æ³•æ¥å—çš„ç¨‹åº¦ï¼‰ï¼Œè¿™å°±å‡ºç°äº†ä¸€ä¸ªçŸ›ç›¾ï¼šBIç³»ç»Ÿå»ºè®¾çš„åˆè¡·ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ä¸šåŠ¡çµæ´»æŸ¥è¯¢çš„éœ€è¦ï¼Œå³äº‹å…ˆå¹¶ä¸çŸ¥é“ä¸šåŠ¡éœ€æ±‚ï¼Œæœ‰äº›æŸ¥è¯¢æ˜¯åœ¨ä¸šåŠ¡å¼€å±•è¿‡ç¨‹ä¸­é€æ¸å‚¬ç”Ÿå‡ºæ¥çš„ï¼Œæœ‰äº›æ˜¯ä¸šåŠ¡ç”¨æˆ·ä¸´æ—¶èµ·æ„çš„æŸ¥è¯¢ï¼Œè¿™ç§çµæ´»å¤šå˜çš„éœ€æ±‚é‡‡ç”¨å®½è¡¨è¿™ç§è¦äº‹å…ˆåŠ å·¥çš„è§£å†³åŠæ³•æä¸ºçŸ›ç›¾ï¼Œæƒ³è¦è·å¾—å®½è¡¨çš„å¥½å°±å¾—ç‰ºç‰²çµæ´»æ€§ï¼Œå¯è°“é±¼ä¸ç†ŠæŒä¸å¯å…¼å¾—ã€‚\n\n**å¯ç”¨æ€§é—®é¢˜**\n\né™¤äº†ä»¥ä¸Šé—®é¢˜ï¼Œå®½è¡¨ç”±äºå­—æ®µè¿‡å¤šè¿˜ä¼šå¼•èµ·å¯ç”¨æ€§ä½çš„é—®é¢˜ã€‚ä¸€ä¸ªäº‹å®è¡¨ä¼šå¯¹åº”å¤šä¸ªç»´è¡¨ï¼Œç»´è¡¨åˆæœ‰ç»´è¡¨ï¼Œè€Œä¸”è¡¨ä¹‹é—´è¿˜å¯èƒ½å­˜åœ¨è‡ªå…³è”/å¾ªç¯å…³è”çš„æƒ…å†µï¼Œè¿™ç§ç»“æ„åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­å¾ˆå¸¸è§ï¼ŒåŸºäºè¿™äº›ç»“æ„çš„è¡¨æ„å»ºå®½è¡¨ï¼Œå°¤å…¶è¦è¡¨è¾¾å¤šä¸ªå±‚çº§çš„æ—¶å€™ï¼Œå®½è¡¨å­—æ®µæ•°é‡ä¼šæ€¥å‰§å¢åŠ ï¼Œç»å¸¸å¯èƒ½è¾¾åˆ°æˆç™¾ä¸Šåƒä¸ªï¼ˆæœ‰çš„æ•°æ®åº“è¡¨æœ‰å­—æ®µæ•°é‡é™åˆ¶ï¼Œè¿™æ—¶åˆè¦æ¨ªå‘åˆ†è¡¨ï¼‰ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ç”¨æˆ·æ¥å…¥ç•Œé¢å¦‚æœå‡ºç°ä¸Šåƒä¸ªå­—æ®µè¦æ€ä¹ˆç”¨ï¼Ÿè¿™å°±æ˜¯å®½è¡¨å¸¦æ¥çš„å¯ç”¨æ€§å·®çš„é—®é¢˜ã€‚\n\n## SPL+DQLæ¶ˆç­å®½è¡¨\n\nå€ŸåŠ©å¼€æºé›†ç®—å™¨SPLå¯ä»¥å®Œæˆè¿™ä¸ªç›®æ ‡ã€‚\n\nSPLï¼ˆStructured Process Languageï¼‰æ˜¯ä¸€ä¸ªå¼€æºç»“æ„åŒ–æ•°æ®è®¡ç®—å¼•æ“ï¼Œæœ¬èº«æä¾›äº†ä¸ä¾èµ–æ•°æ®åº“çš„å¼ºå¤§è®¡ç®—èƒ½åŠ›ï¼ŒSPLå†…ç½®äº†å¾ˆå¤šé«˜æ€§èƒ½ç®—æ³•ï¼Œå°¤å…¶æ˜¯å¯¹å…³è”è¿ç®—åšäº†ä¼˜åŒ–ï¼Œå¯¹ä¸åŒçš„å…³è”åœºæ™¯é‡‡ç”¨ä¸åŒçš„æ‰‹æ®µï¼Œå¯ä»¥å¤§å¹…æå‡å…³è”æ€§èƒ½ï¼Œä»è€Œä¸ç”¨å®½è¡¨ä¹Ÿèƒ½å®æ—¶å…³è”ä»¥æ»¡è¶³å¤šç»´åˆ†ææ—¶æ•ˆæ€§çš„éœ€è¦ã€‚åŒæ—¶ï¼ŒSPLè¿˜æä¾›äº†é«˜æ€§èƒ½å­˜å‚¨ï¼Œé…åˆé«˜æ•ˆç®—æ³•å¯ä»¥è¿›ä¸€æ­¥å‘æŒ¥æ€§èƒ½ä¼˜åŠ¿ã€‚\n\nåªæœ‰é«˜æ€§èƒ½è¿˜ä¸å¤Ÿï¼ŒSPLåŸç”Ÿçš„è®¡ç®—è¯­æ³•ä¸é€‚åˆå¤šç»´åˆ†æåº”ç”¨æ¥å…¥ï¼ˆç”ŸæˆSPLè¯­å¥å¯¹BIç³»ç»Ÿæ”¹é€ è¾ƒå¤§ï¼‰ã€‚ç›®å‰å¤§éƒ¨åˆ†å¤šç»´åˆ†æå‰ç«¯éƒ½æ˜¯åŸºäºSQLå¼€å‘çš„ï¼Œä½†SQLä½“ç³»ï¼ˆä¸ç”¨å®½è¡¨æ—¶ï¼‰åœ¨æè¿°å¤æ‚å…³è”è®¡ç®—ä¸Šåˆå¾ˆå›°éš¾ï¼ŒåŸºäºè¿™æ ·çš„åŸå› ï¼ŒSPLè®¾è®¡äº†ä¸“é—¨çš„ç±»SQLæŸ¥è¯¢è¯­æ³•DQLï¼ˆDimensional Query Languageï¼‰ç”¨äºæ„å»ºè¯­ä¹‰å±‚ã€‚å‰ç«¯ç”ŸæˆDQLè¯­å¥ï¼ŒDQL Serverå°†å…¶è½¬æ¢æˆSPLè¯­å¥ï¼Œå†åŸºäºSPLè®¡ç®—å¼•æ“å’Œå­˜å‚¨å¼•æ“å®ŒæˆæŸ¥è¯¢è¿”å›ç»™å‰ç«¯ï¼Œå®ç°å…¨é“¾è·¯BIæŸ¥è¯¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSPLåªä½œä¸ºè®¡ç®—å¼•æ“å­˜åœ¨ï¼Œå‰ç«¯ç•Œé¢ä»è¦ç”±ç”¨æˆ·è‡ªè¡Œå®ç°ï¼ˆæˆ–é€‰ç”¨ç›¸åº”äº§å“ï¼‰ã€‚\n\n### SPLï¼šå…³è”å®ç°æŠ€æœ¯\n\nSPLå¦‚ä½•ä¸ç”¨å®½è¡¨ä¹Ÿèƒ½å®ç°å®æ—¶å…³è”ä»¥æ»¡è¶³æ€§èƒ½è¦æ±‚çš„ç›®æ ‡ï¼Ÿ\n\nåœ¨BIä¸šåŠ¡ä¸­ç»å¤§éƒ¨åˆ†çš„JOINéƒ½æ˜¯ç­‰å€¼JOINï¼Œä¹Ÿå°±æ˜¯å…³è”æ¡ä»¶ä¸ºç­‰å¼çš„ JOINã€‚SPLæŠŠç­‰å€¼å…³è”åˆ†ä¸ºå¤–é”®å…³è”å’Œä¸»é”®å…³è”ã€‚**å¤–é”®å…³è”**æ˜¯æŒ‡ç”¨ä¸€ä¸ªè¡¨çš„éä¸»é”®å­—æ®µï¼Œå»å…³è”å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ï¼Œå‰è€…ç§°ä¸ºäº‹å®è¡¨ï¼Œåè€…ç§°ä¸ºç»´è¡¨ï¼Œä¸¤ä¸ªè¡¨æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œæ¯”å¦‚è®¢å•è¡¨å’Œå®¢æˆ·è¡¨ã€‚**ä¸»é”®å…³è”**æ˜¯æŒ‡ç”¨ä¸€ä¸ªè¡¨çš„ä¸»é”®å…³è”å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®æˆ–éƒ¨åˆ†ä¸»é”®ï¼Œæ¯”å¦‚å®¢æˆ·è¡¨å’Œ VIP å®¢æˆ·è¡¨ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€è®¢å•è¡¨å’Œè®¢å•æ˜ç»†è¡¨ï¼ˆä¸€å¯¹å¤šï¼‰ã€‚\n\nè¿™ä¸¤ç±» JOIN éƒ½æ¶‰åŠåˆ°ä¸»é”®ï¼Œå¦‚æœå……åˆ†åˆ©ç”¨è¿™ä¸ªç‰¹å¾é‡‡ç”¨ä¸åŒçš„ç®—æ³•ï¼Œå°±å¯ä»¥å®ç°é«˜æ€§èƒ½çš„å®æ—¶å…³è”äº†ã€‚\n\nä¸è¿‡å¾ˆé—æ†¾ï¼ŒSQL å¯¹ JOIN çš„å®šä¹‰å¹¶ä¸æ¶‰åŠä¸»é”®ï¼Œåªæ˜¯ä¸¤ä¸ªè¡¨åšç¬›å¡å°”ç§¯åå†æŒ‰æŸç§æ¡ä»¶è¿‡æ»¤ã€‚è¿™ä¸ªå®šä¹‰å¾ˆç®€å•ä¹Ÿå¾ˆå®½æ³›ï¼Œå‡ ä¹å¯ä»¥æè¿°ä¸€åˆ‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸¥æ ¼æŒ‰è¿™ä¸ªå®šä¹‰å»å®ç° JOINï¼Œç†è®ºä¸Šæ²¡åŠæ³•åœ¨è®¡ç®—æ—¶åˆ©ç”¨ä¸»é”®çš„ç‰¹å¾æ¥æé«˜æ€§èƒ½ï¼Œåªèƒ½æ˜¯å·¥ç¨‹ä¸Šåšäº›æœ‰é™çš„ä¼˜åŒ–ï¼Œåœ¨æƒ…å†µè¾ƒå¤æ‚æ—¶ï¼ˆè¡¨å¤šä¸”å±‚æ¬¡å¤šï¼‰ç»å¸¸æ— æ•ˆã€‚\n\nSPL æ”¹å˜äº† JOIN çš„å®šä¹‰ï¼Œé’ˆå¯¹è¿™ä¸¤ç±» JOIN åˆ†åˆ«å¤„ç†ï¼Œå°±å¯ä»¥åˆ©ç”¨ä¸»é”®çš„ç‰¹å¾æ¥å‡å°‘è¿ç®—é‡ï¼Œä»è€Œæé«˜è®¡ç®—æ€§èƒ½ã€‚\n\n#### å¤–é”®å…³è”\n\nå’ŒSQLä¸åŒï¼ŒSPLä¸­æ˜ç¡®åœ°åŒºåˆ†äº†ç»´è¡¨å’Œäº‹å®è¡¨ã€‚BIç³»ç»Ÿä¸­çš„ç»´è¡¨éƒ½é€šå¸¸ä¸å¤§ï¼Œå¯ä»¥äº‹å…ˆè¯»å…¥å†…å­˜å»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·åœ¨å…³è”æ—¶å¯ä»¥å°‘è®¡ç®—ä¸€åŠçš„HASHå€¼ã€‚\n\nå¯¹äºå¤šå±‚ç»´è¡¨ï¼ˆç»´è¡¨è¿˜æœ‰ç»´è¡¨çš„æƒ…å†µï¼‰è¿˜å¯ä»¥ç”¨**å¤–é”®åœ°å€åŒ–**çš„æŠ€æœ¯åšå¥½**é¢„å…³è”**ã€‚å³å°†ç»´è¡¨ï¼ˆæœ¬è¡¨ï¼‰çš„å¤–é”®å­—æ®µå€¼è½¬æ¢æˆå¯¹åº”ç»´è¡¨ï¼ˆå¤–é”®è¡¨ï¼‰è®°å½•çš„åœ°å€ã€‚è¿™æ ·è¢«å…³è”çš„ç»´è¡¨æ•°æ®å¯ä»¥ç›´æ¥ç”¨åœ°å€å–å‡ºè€Œä¸å¿…å†è¿›è¡ŒHASHå€¼è®¡ç®—å’Œæ¯”å¯¹ï¼Œå¤šå±‚ç»´è¡¨ä»…ä»…æ˜¯å¤šä¸ªæŒ‰åœ°å€å–å€¼çš„æ—¶é—´ï¼Œå’Œå•å±‚ç»´è¡¨æ—¶çš„å…³è”æ€§èƒ½åŸºæœ¬ç›¸å½“ã€‚\n\nç±»ä¼¼çš„ï¼Œå¦‚æœäº‹å®è¡¨ä¹Ÿä¸å¤§å¯ä»¥å…¨éƒ¨è¯»å…¥å†…å­˜æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¢„å…³è”çš„æ–¹å¼è§£å†³äº‹å®è¡¨ä¸ç»´è¡¨çš„å…³è”é—®é¢˜ï¼Œæå‡å…³è”æ•ˆç‡ã€‚\n\né¢„å…³è”å¯ä»¥åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ä¸€æ¬¡æ€§è¯»å…¥å¹¶åšå¥½ï¼Œä»¥åç›´æ¥ä½¿ç”¨å³å¯ã€‚\n\nå½“äº‹å®è¡¨è¾ƒå¤§æ— æ³•å…¨å†…å­˜æ—¶ï¼ŒSPL æä¾›äº†**å¤–é”®åºå·åŒ–**æ–¹æ³•ï¼šå°†äº‹å®è¡¨ä¸­çš„å¤–é”®å­—æ®µå€¼è½¬æ¢ä¸ºç»´è¡¨å¯¹åº”è®°å½•çš„åºå·ã€‚å…³è”è®¡ç®—æ—¶ï¼Œç”¨åºå·å–å‡ºå¯¹åº”ç»´è¡¨è®°å½•ï¼Œè¿™æ ·å¯ä»¥è·å¾—å’Œå¤–é”®åœ°å€åŒ–ç±»ä¼¼çš„æ•ˆæœï¼ŒåŒæ ·èƒ½é¿å…HASHå€¼çš„è®¡ç®—å’Œæ¯”å¯¹ï¼Œå¤§å¹…æå‡å…³è”æ€§èƒ½ã€‚\n\n#### ä¸»é”®å…³è”\n\næœ‰çš„äº‹å®è¡¨è¿˜æœ‰æ˜ç»†è¡¨ï¼Œæ¯”å¦‚è®¢å•å’Œè®¢å•æ˜ç»†ï¼ŒäºŒè€…é€šè¿‡ä¸»é”®å’Œéƒ¨åˆ†ä¸»é”®è¿›è¡Œå…³è”ï¼Œå‰è€…ä½œä¸ºä¸»è¡¨åè€…ä½œä¸ºå­è¡¨ï¼ˆè¿˜æœ‰é€šè¿‡å…¨éƒ¨ä¸»é”®å…³è”çš„ç§°ä¸ºåŒç»´è¡¨ï¼Œå¯ä»¥çœ‹åšä¸»å­è¡¨çš„ç‰¹ä¾‹ï¼‰ã€‚ä¸»å­è¡¨éƒ½æ˜¯äº‹å®è¡¨ï¼Œæ¶‰åŠçš„æ•°æ®é‡éƒ½æ¯”è¾ƒå¤§ã€‚\n\nSPLä¸ºæ­¤é‡‡ç”¨äº†**æœ‰åºå½’å¹¶**æ–¹æ³•ï¼šé¢„å…ˆå°†å¤–å­˜è¡¨æŒ‰ç…§ä¸»é”®æœ‰åºå­˜å‚¨ï¼Œå…³è”æ—¶é¡ºåºå–å‡ºæ•°æ®åšå½’å¹¶ï¼Œä¸éœ€è¦äº§ç”Ÿä¸´æ—¶ç¼“å­˜ï¼Œåªç”¨å¾ˆå°çš„å†…å­˜å°±å¯ä»¥å®Œæˆè®¡ç®—ã€‚è€ŒSQLé‡‡ç”¨çš„HASHåˆ†å †ç®—æ³•å¤æ‚åº¦è¾ƒé«˜ï¼Œä¸ä»…è¦è®¡ç®—HASHå€¼è¿›è¡Œå¯¹æ¯”ï¼Œè¿˜ä¼šäº§ç”Ÿä¸´æ—¶ç¼“å­˜çš„è¯»å†™åŠ¨ä½œï¼Œè¿ç®—æ€§èƒ½å¾ˆå·®ã€‚\n\nHASH åˆ†å †æŠ€æœ¯å®ç°å¹¶è¡Œå›°éš¾ï¼Œå¤šçº¿ç¨‹è¦åŒæ—¶å‘æŸä¸ªåˆ†å †ç¼“å­˜æ•°æ®ï¼Œé€ æˆå…±äº«èµ„æºå†²çªï¼›æŸä¸ªåˆ†å †å…³è”æ—¶åˆä¼šæ¶ˆè´¹å¤§é‡å†…å­˜ï¼Œæ— æ³•å®æ–½è¾ƒå¤§çš„å¹¶è¡Œæ•°é‡ã€‚è€Œæœ‰åºå½’åˆ™æ˜“äºåˆ†æ®µå¹¶è¡Œã€‚æ•°æ®æœ‰åºæ—¶ï¼Œå­è¡¨å°±å¯ä»¥æ ¹æ®ä¸»è¡¨é”®å€¼è¿›è¡ŒåŒæ­¥å¯¹é½åˆ†æ®µä»¥ä¿è¯æ­£ç¡®æ€§ï¼Œæ— éœ€ç¼“å­˜ï¼Œä¸”å› ä¸ºå ç”¨å†…å­˜å¾ˆå°‘å¯ä»¥é‡‡ç”¨è¾ƒå¤§çš„å¹¶è¡Œæ•°ï¼Œä»è€Œè·å¾—æ›´é«˜æ€§èƒ½ã€‚\n\né¢„å…ˆæ’åºçš„æˆæœ¬è™½é«˜ï¼Œä½†æ˜¯ä¸€æ¬¡æ€§åšå¥½å³å¯ï¼Œä»¥åå°±æ€»èƒ½ä½¿ç”¨å½’å¹¶ç®—æ³•å®ç° JOINï¼Œæ€§èƒ½å¯ä»¥æé«˜å¾ˆå¤šã€‚åŒæ—¶ï¼ŒSPL ä¹Ÿæä¾›äº†åœ¨æœ‰è¿½åŠ æ•°æ®æ—¶ä»ç„¶ä¿æŒæ•°æ®æ•´ä½“æœ‰åºçš„æ–¹æ¡ˆã€‚\n\nå¯¹äºä¸»å­è¡¨å…³è”SPLè¿˜å¯ä»¥é‡‡ç”¨æ›´æœ‰æ•ˆçš„å­˜å‚¨å½¢å¼å°†ä¸»å­è¡¨ä¸€ä½“åŒ–å­˜å‚¨ï¼Œå­è¡¨ä½œä¸ºä¸»è¡¨çš„é›†åˆå­—æ®µï¼Œå…¶å–å€¼æ˜¯ç”±ä¸è¯¥ä¸»è¡¨æ•°æ®ç›¸å…³çš„å¤šæ¡å­è¡¨è®°å½•æ„æˆã€‚è¿™ç›¸å½“äºé¢„å…ˆå®ç°äº†å…³è”ï¼Œå†è®¡ç®—æ—¶ç›´æ¥å–æ•°è®¡ç®—å³å¯ï¼Œä¸éœ€è¦æ¯”å¯¹ï¼Œå­˜å‚¨é‡ä¹Ÿæ›´å°‘ï¼Œæ€§èƒ½æ›´é«˜ã€‚\n\n#### å­˜å‚¨æœºåˆ¶\n\né«˜æ€§èƒ½ç¦»ä¸å¼€æœ‰æ•ˆçš„å­˜å‚¨ã€‚SPLä¹Ÿæä¾›äº†**åˆ—å¼å­˜å‚¨**ï¼Œåœ¨BIè®¡ç®—ä¸­å¯ä»¥å¤§å¹…é™ä½æ•°æ®è¯»å–é‡ä»¥æå‡è¯»å–æ•ˆç‡ã€‚SPLåˆ—å­˜é‡‡ç”¨äº†ç‹¬æœ‰çš„**å€å¢åˆ†æ®µ**æŠ€æœ¯ï¼Œç›¸å¯¹ä¼ ç»Ÿåˆ—å­˜åˆ†å—å¹¶è¡Œæ–¹æ¡ˆè¦åœ¨å¾ˆå¤§æ•°æ®é‡æ—¶ï¼ˆå¦åˆ™å¹¶è¡Œä¼šå—åˆ°é™åˆ¶ï¼‰æ‰ä¼šå‘æŒ¥ä¼˜åŠ¿ä¸åŒï¼Œè¿™ä¸ªæŠ€æœ¯å¯ä»¥ä½¿SPLåˆ—å­˜åœ¨æ•°æ®é‡ä¸å¾ˆå¤§æ—¶ä¹Ÿèƒ½è·å¾—è‰¯å¥½çš„å¹¶è¡Œåˆ†æ®µæ•ˆæœï¼Œå……åˆ†å‘æŒ¥å¹¶è¡Œä¼˜åŠ¿ã€‚\n\nSPLè¿˜æä¾›äº†é’ˆå¯¹æ•°æ®ç±»å‹çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå¯ä»¥æ˜¾è‘—æå‡å¤šç»´åˆ†æä¸­çš„åˆ‡ç‰‡è¿ç®—æ€§èƒ½ã€‚æ¯”å¦‚å°†æšä¸¾å‹ç»´åº¦è½¬æ¢æˆæ•´æ•°ï¼Œåœ¨æŸ¥è¯¢æ—¶å°†åˆ‡ç‰‡æ¡ä»¶è½¬æ¢æˆå¸ƒå°”å€¼æ„æˆçš„å¯¹ä½åºåˆ—ï¼Œåœ¨æ¯”è¾ƒæ—¶å°±å¯ä»¥ç›´æ¥ä»åºåˆ—æŒ‡å®šä½ç½®å–å‡ºåˆ‡ç‰‡åˆ¤æ–­ç»“æœã€‚è¿˜æœ‰å°†å¤šä¸ªæ ‡ç­¾ç»´åº¦ï¼ˆå–å€¼æ˜¯æˆ–å¦çš„ç»´åº¦ï¼Œè¿™ç§ç»´åº¦åœ¨å¤šç»´åˆ†æä¸­å¤§é‡å­˜åœ¨ï¼‰å­˜å‚¨åœ¨ä¸€ä¸ªæ•´æ•°å­—æ®µä¸­çš„**æ ‡ç­¾ä½ç»´åº¦**æŠ€æœ¯ï¼ˆä¸€ä¸ªæ•´æ•°å­—æ®µå¯ä»¥å­˜å‚¨16ä¸ªæ ‡ç­¾ï¼‰ï¼Œä¸ä»…å¤§å¹…å‡å°‘å­˜å‚¨é‡ï¼Œåœ¨è®¡ç®—æ—¶è¿˜å¯ä»¥é’ˆå¯¹å¤šä¸ªæ ‡ç­¾åŒæ—¶åšæŒ‰ä½è®¡ç®—ä»è€Œå¤§å¹…æå‡è®¡ç®—æ€§èƒ½ã€‚\n\næœ‰äº†è¿™äº›é«˜æ•ˆæœºåˆ¶ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨BIåˆ†æä¸­ä¸å†ä½¿ç”¨å®½è¡¨ï¼Œè½¬è€ŒåŸºäºSPLå­˜å‚¨å’Œç®—æ³•åšå®æ—¶å…³è”ï¼Œæ€§èƒ½æ¯”å®½è¡¨è¿˜æ›´é«˜ï¼ˆæ²¡æœ‰å†—ä½™æ•°æ®è¯»å–é‡æ›´å°ï¼Œæ›´å¿«ï¼‰ã€‚\n\nä¸è¿‡ï¼Œåªæœ‰è¿™äº›è¿˜ä¸å¤Ÿï¼ŒSPLåŸç”Ÿè¯­æ³•è¿˜ä¸é€‚åˆBIå‰ç«¯ç›´æ¥è®¿é—®ï¼Œè¿™å°±éœ€è¦é€‚åˆçš„è¯­ä¹‰è½¬æ¢æŠ€æœ¯ï¼Œé€šè¿‡é€‚åˆçš„æ–¹å¼å°†ç”¨æˆ·æ“ä½œè½¬æ¢æˆSPLè¯­æ³•è¿›è¡ŒæŸ¥è¯¢ã€‚\n\nè¿™å°±éœ€è¦DQLäº†ã€‚\n\n### DQLï¼šå…³è”æè¿°æŠ€æœ¯\n\nDQLæ˜¯SPLä¹‹ä¸Šçš„è¯­ä¹‰å±‚æ„å»ºå·¥å…·ï¼Œåœ¨è¿™ä¸€å±‚å®Œæˆå¯¹äºSPLæ•°æ®å…³è”å…³ç³»çš„æè¿°ï¼ˆå»ºæ¨¡ï¼‰å†ä¸ºä¸Šå±‚åº”ç”¨æœåŠ¡ã€‚å³å°†SPLå­˜å‚¨æ˜ å°„æˆDQLè¡¨ï¼Œå†åŸºäºè¡¨æ¥æè¿°æ•°æ®å…³è”å…³ç³»ã€‚\n\n![image-20230708101729124](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230708101729124.png)\n\né€šè¿‡å¯¹æ•°æ®è¡¨å…³ç³»æè¿°ä»¥åå½¢æˆäº†ä¸€ç§ä»¥ç»´åº¦ä¸ºä¸­å¿ƒçš„æ€»çº¿å¼ç»“æ„ï¼ˆä¸åŒäºE-Rå›¾ä¸­çš„ç½‘çŠ¶ç»“æ„ï¼‰ï¼Œä¸­é—´æ˜¯ç»´åº¦ï¼Œè¡¨ä¸è¡¨ä¹‹é—´ä¸ç›´æ¥ç›¸å…³éƒ½é€šè¿‡ç»´åº¦è¿‡æ¸¡ã€‚\n\n![image-20230708101757697](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230708101757697.png)\n\nåŸºäºè¿™ç§ç»“æ„ä¸‹çš„å…³è”æŸ¥è¯¢ï¼ˆDQLè¯­å¥ï¼‰ä¼šå¾ˆå¥½è¡¨è¾¾ã€‚æ¯”å¦‚è¦æ ¹æ®è®¢å•è¡¨ï¼ˆordersï¼‰ã€å®¢æˆ·è¡¨ï¼ˆcustomerï¼‰ã€é”€å”®å‘˜è¡¨ï¼ˆemployeeï¼‰ä»¥åŠåŸå¸‚è¡¨ï¼ˆcityï¼‰æŸ¥è¯¢ï¼š**æœ¬å¹´åº¦åä¸œçš„é”€å”®äººå‘˜ï¼Œåœ¨å…¨å›½å„é”€å”®åŒºçš„é”€å”®é¢**ã€‚\n\nç”¨SQLå†™èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\n```sql\nSELECT\n ct1.area,o.emp_id,sum(o.amount) somt\nFROM\n orders o\n JOIN customer c ON o.cus_id = c.cus_id\n JOIN city ct1 ON c.city_id = ct1.city_id\n JOIN employee e ON o.emp_id = e.emp_id\n JOIN city ct2 ON e.city_id = ct2.city_id\nWHERE\n ct2.area = 'east' AND year(o.order_date)= 2022\nGROUP BY\n ct1.area,  o.emp_id\n```\n\nå¤šä¸ªè¡¨å…³è”è¦JOINå¤šæ¬¡ï¼ŒåŒä¸€ä¸ªåœ°åŒºè¡¨è¦åå¤å…³è”ä¸¤æ¬¡æ‰èƒ½æŸ¥åˆ°é”€å”®å‘˜å’Œå®¢æˆ·çš„æ‰€åœ¨åŒºåŸŸï¼Œå¯¹äºè¿™ç§æƒ…å†µBIå‰ç«¯è¡¨è¾¾èµ·æ¥ä¼šå¾ˆåƒåŠ›ï¼Œå¦‚æœå°†å…³è”å¼€æ”¾å‡ºæ¥ï¼Œç”¨æˆ·åˆå¾ˆéš¾ç†è§£ã€‚\n\né‚£ä¹ˆDQLæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ\n\n**DQLå†™æ³•ï¼š**\n\n```sql\nSELECT\n cus_id.city_id.area,emp_id,sum(amount) somt\nFROM\n orders\nWHERE\n emp_id.city_id.area == \"east\" AND year(order_date)== 2022\nBY\n cus_id.city_id.area,emp_id\n```\n\nDQLä¸éœ€è¦JOINå¤šä¸ªè¡¨ï¼ŒåªåŸºäºorderså•è¡¨æŸ¥è¯¢å°±å¯ä»¥äº†ï¼Œå¤–é”®æŒ‡å‘è¡¨çš„å­—æ®µå½“æˆå±æ€§ç›´æ¥ä½¿ç”¨ï¼Œæœ‰å¤šå°‘å±‚éƒ½å¯ä»¥å¼•ç”¨ä¸‹å»ï¼Œå¾ˆå¥½è¡¨è¾¾ã€‚åƒæŸ¥è¯¢å®¢æˆ·æ‰€åœ¨åœ°åŒºé€šè¿‡cus_id.city_id.areaä¸€ç›´å†™ä¸‹å»å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†å…³è”ï¼Œå°†å¤šè¡¨å…³è”æŸ¥è¯¢è½¬åŒ–æˆå•è¡¨æŸ¥è¯¢ã€‚\n\næ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å†åŸºäºDQLå¼€å‘BIå‰ç«¯ç•Œé¢å°±å¾ˆå®¹æ˜“ï¼Œæ¯”å¦‚å¯ä»¥åšæˆè¿™æ ·ï¼š\n\n![image-20230708101910349](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230708101910349.png)\n\nç”¨æ ‘ç»“æ„åˆ†å¤šçº§è¡¨è¾¾å¤šå±‚ç»´è¡¨å…³è”ï¼Œè¿™æ ·çš„å¤šç»´åˆ†æé¡µé¢ä¸ä»…å®¹æ˜“å¼€å‘ï¼Œæ™®é€šä¸šåŠ¡ç”¨æˆ·ä½¿ç”¨æ—¶ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œè¿™å°±æ˜¯DQLçš„æ•ˆåŠ›ã€‚\n\n## SPLèµ„æ–™\n\n- [SPLä¸‹è½½](https://link.juejin.cn/?target=http%3A%2F%2Fc.raqsoft.com.cn%2Farticle%2F1595816810031)\n- [SPLæºä»£ç ](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSPLWare%2FesProc)\n\n\n\nåŸæ–‡ï¼š[å®½è¡¨ä¸ºä»€ä¹ˆæ¨ªè¡Œ](https://juejin.cn/post/7200033099752554553)\n","tags":["sql"],"categories":["æ•°æ®åº“"]},{"title":"seleniumçš„åŸºæœ¬ä½¿ç”¨å’Œå¸¸ç”¨æ–¹æ³•","url":"/2023/07/07/seleniumçš„åŸºæœ¬ä½¿ç”¨å’Œå¸¸ç”¨æ–¹æ³•/","content":"\n## å‰è¨€\n\nseleniumåŒæ—¶é€‚é…äº†å¾ˆå¤šè¯­è¨€ï¼Œæ¯”å¦‚javaï¼Œpythonï¼ŒRç­‰ç­‰ï¼Œæœ¬æ¬¡æµ‹è¯•ä½¿ç”¨pythonè¿›è¡Œæµ‹è¯•ï¼Œéœ€è¦å‡†å¤‡ä¸‹è½½pip\n\n## webdriver\n\n#### 1ã€ä¸‹è½½WebDriver\n\n- Chromeæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ï¼š[chromedriver.storage.googleapis.com/index.html](https://link.juejin.cn/?target=https%3A%2F%2Fchromedriver.storage.googleapis.com%2Findex.html)\n- Edgeæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ï¼š[developer.microsoft.com/zh-cn/microâ€¦](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.microsoft.com%2Fzh-cn%2Fmicrosoft-edge%2Ftools%2Fwebdriver) æˆ– [msedgewebdriverstorage.z22.web.core.windows.net](https://link.juejin.cn/?target=https%3A%2F%2Fmsedgewebdriverstorage.z22.web.core.windows.net)\n- Mozillaæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ï¼š[github.com/mozilla/gecâ€¦](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmozilla%2Fgeckodriver%2Ftags)\n- Operaæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ï¼š[github.com/operasoftwaâ€¦](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Foperasoftware%2Foperachromiumdriver%2Ftags)\n- Safariæµè§ˆå™¨é©±åŠ¨ä¸‹è½½åœ°å€ï¼š[webkit.org/blog/6900/wâ€¦](https://link.juejin.cn/?target=https%3A%2F%2Fwebkit.org%2Fblog%2F6900%2Fwebdriver-support-in-safari-10)\n\n#### 2ã€å®‰è£…WebDriver\n\nå°†ä¸‹è½½å¥½çš„developer.exeé©±åŠ¨æ–‡ä»¶è§£å‹åï¼Œå¤åˆ¶ç§»åŠ¨åˆ°Pythonè§£é‡Šå™¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼ˆå°±æ˜¯Pythonçš„å®‰è£…ç›®å½•ï¼Œå’Œpython.exeåŒçº§ç›®å½•ï¼‰å°±å®Œæˆå®‰è£…äº†ã€‚\n\n![image-20230707124141448](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230707124141448.png)\n\n## å®‰è£…selenium\n\n> Seleniumæ˜¯ä¸€ä¸ªç”¨äºWebåº”ç”¨ç¨‹åºæµ‹è¯•çš„è‡ªåŠ¨åŒ–é›†æˆæµ‹è¯•æ“ä½œæ¡†æ¶ã€‚ç”±thoughtworks å…¬å¸æ¨å‡ºï¼Œå®ƒå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œã€‚åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œå¯ç”¨äºå•å…ƒæµ‹è¯•ã€å†’çƒŸæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å›å½’æµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•ç­‰ï¼Œå¹¶ä¸”å¯ä»¥è¿è¡Œåœ¨ä¸åŒç±»å‹çš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¸Šã€‚åˆ©ç”¨Seleniumï¼Œå¯ä»¥é©±åŠ¨æµè§ˆå™¨æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œæ¯”å¦‚ï¼šç‚¹å‡»ã€ä¸‹æ‹‰ç­‰ç­‰ï¼Œè¿˜å¯ä»¥è·å–æµè§ˆå™¨å½“å‰å‘ˆç°çš„é¡µé¢çš„æºä»£ç ã€‚æ”¯æŒåŒ…æ‹¬Microsoft Edge(IEä¹‹å)ã€Google Chromeã€Operaã€Mozilla Firefoxã€Apple Safariã€ç­‰æµè§ˆå™¨ã€‚\n\n#### 1ã€å…¨å±€å®‰è£…\n\nè¦æŸ¥çœ‹å…¨å±€å®‰è£…çš„seleniumåŒ…å­˜æ”¾è·¯å¾„ï¼ˆä¸€èˆ¬åŒPythonçš„å®‰è£…è·¯å¾„ï¼‰ å¦‚ï¼šD:\\Program Files (x86)\\Python311\\lib\\site-packages\\selenium\n\n```shell\n# æ ¼å¼ pip install è¦å®‰è£…çš„åŒ…å\npip install selenium\n    \n    \n# æˆ–ï¼ˆ-U å®‰è£…æˆ–å‡çº§ï¼‰\npip install -U selenium\n\n\n# å¦‚æœè¦å®‰è£…æŒ‡å®šçš„seleniumç‰ˆæœ¬ï¼ˆå®‰è£…å…¶ä»–åŒ…çš„æ“ä½œä¹Ÿç›¸åŒï¼‰\n# æ ¼å¼ pip install è¦å®‰è£…çš„åŒ…å == è¦æŒ‡å®šå®‰è£…çš„ç‰ˆæœ¬å·\npip install selenium == 4.8.0\n\n\n# åœ¨è¾“å…¥pip install seleniumå‘½ä»¤å æŒ‰å›è½¦ç¡®è®¤é”®ï¼Œå°±å¼€å§‹æ˜¾ç¤ºä»¥ä¸‹å®‰è£…è¿‡ç¨‹\nPS E:\\AutoTest> pip install selenium\nDefaulting to user installation because normal site-packages is not writeable\nCollecting selenium\nDownloading selenium-4.8.3-py3-none-any.whl (6.5 MB)\n     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¸â”â”â”â” 5.8/6.5 MB 86.6 kB/s eta 0:00:16 \n```\n\n#### 2ã€å±€éƒ¨å®‰è£…\n\nå±€éƒ¨å®‰è£…éœ€è¦æŒ‡å®šå®‰è£…ç›®å½•ï¼Œå¯é€šè¿‡--targetå‚æ•°æ¥æŒ‡å®š\n\n```bash\n# æ ¼å¼ï¼š\npip install --target=path_name package_name # path_nameè¡¨ç¤ºå®‰è£…çš„è·¯å¾„ï¼Œ package_nameè¡¨ç¤ºå®‰è£…åŒ…å\n\n# ä¾‹å¦‚\npip install --target=./lib selenium # è¡¨ç¤ºå°†seleniumåŒ…å®‰è£…åœ¨ï¼Œå½“å‰ç›®å½•ä¸‹çš„libæ–‡ä»¶å¤¹ä¸­ï¼ˆ./è¡¨ç¤ºå½“å‰ç›®å½•ï¼‰\n```\n\n### 3ã€åœ¨pythonè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…\n\nä¾‹å¦‚åœ¨pycharmä¸­ï¼Œå®‰è£…åœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä¸ä¼šå½±å“å…¶ä»–é¡¹ç›®ã€‚å¯ä»¥å†venv/libä¸­æŸ¥çœ‹\n\n![image-20230707125021035](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230707125021035.png)\n\n## å®ä¾‹\n\n```python\n# å¯¼å…¥seleniumæ¡†æ¶\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nimport time\n\n# å¼€å¯æµè§ˆå™¨æµ‹è¯•ä¼šè¯\ndriver = webdriver.Chrome()\n\n# æ³¨ï¼šå¦‚æœä¸åœ¨PyCharmç¼–è¾‘å™¨ä¸­è¿è¡Œä»£ç ï¼Œä¾§éœ€è¦æŒ‡å®šEdge WebDriveré©±åŠ¨è·¯å¾„\n# driver = webdriver.Edge(r'D:/Program Files (x86)/Python311/msedgedriver.exe')\n\n# æŒ‡å®šåŠ è½½æµè§ˆå™¨RULï¼ˆè¦æµ‹è¯•çš„ç½‘å€ï¼‰\ndriver.get(\"https://blog.ilpvc.cf\")\n\n# æœ€å¤§åŒ–æµè§ˆå™¨çª—å£\ndriver.maximize_window()\n\n# å¼ºåˆ¶å»¶æ—¶ç­‰å¾…5ç§’é’Ÿ\ntime.sleep(5)\n\n# é€€å‡ºæµ‹è¯•ä¼šè¯\ndriver.quit()\n```\n\n## å…­ã€æ‰©å±•\n\n> æƒ³äº†è§£æ›´å¤šSeleniumæ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯å»è¿™é‡ŒæŸ¥çœ‹ [selenium-python.readthedocs.io/api.html](https://link.juejin.cn/?target=https%3A%2F%2Fselenium-python.readthedocs.io%2Fapi.html)\n\n```python\n# å¼•å…¥seleniumæ“ä½œæ¡†æ¶\nfrom selenium import webdriver\n\n# å¼€å¯æµè§ˆå™¨ä¼šè¯\ndriver = webdriver.Edge()\n\n# æ˜¾ç¤ºdriverå¯¹è±¡æä¾›çš„æ‰€æœ‰æ–¹æ³•å…³é”®å­—\nprint('driverå¯¹è±¡ä¸­çš„å…³é”®å­—ï¼š', dir(driver))\n\n# åœ¨ä¸‹é¢çš„å„ä¸ªå…³é”®å­—å‰ åŠ ä¸Š driver. å°±å¯ä»¥è®¿é—®å¯¹åº”çš„æ–¹æ³•å’Œå¸¸é‡äº†ï¼Œå¦‚ï¼šdriver.get_window_size()\n\n'__abstractmethods__', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__enter__', '__eq__', '__exit__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_abc_impl', '_authenticator_id', '_file_detector', '_get_cdp_details', '_is_remote', '_mobile', '_shadowroot_cls', '_switch_to', '_unwrap_value', '_web_element_cls', '_wrap_value', 'add_cookie', 'add_credential', 'add_virtual_authenticator', 'application_cache', 'back', 'bidi_connection', 'capabilities', 'caps', 'close', 'command_executor', 'create_options', 'create_web_element', 'current_url', 'current_window_handle', 'delete_all_cookies', 'delete_cookie', 'delete_network_conditions', 'desired_capabilities', 'error_handler', 'execute', 'execute_async_script', 'execute_cdp_cmd', 'execute_script', 'file_detector', 'file_detector_context', 'find_element', 'find_elements', 'forward', 'fullscreen_window', 'get', 'get_cookie', 'get_cookies', 'get_credentials', 'get_issue_message', 'get_log', 'get_network_conditions', 'get_pinned_scripts', 'get_screenshot_as_base64', 'get_screenshot_as_file', 'get_screenshot_as_png', 'get_sinks', 'get_window_position', 'get_window_rect', 'get_window_size', 'implicitly_wait', 'launch_app', 'log_types', 'maximize_window', 'minimize_window', 'mobile', 'name', 'orientation', 'page_source', 'pin_script', 'pinned_scripts', 'port', 'print_page', 'quit', 'refresh', 'remove_all_credentials', 'remove_credential', 'remove_virtual_authenticator', 'save_screenshot', 'service', 'session_id', 'set_network_conditions', 'set_page_load_timeout', 'set_permissions', 'set_script_timeout', 'set_sink_to_use', 'set_user_verified', 'set_window_position', 'set_window_rect', 'set_window_size', 'start_client', 'start_desktop_mirroring', 'start_session', 'start_tab_mirroring', 'stop_casting', 'stop_client', 'switch_to', 'timeouts', 'title', 'unpin', 'vendor_prefix', 'virtual_authenticator_id', 'window_handles'\n```\n\n#### 1ã€Seleniumå¸¸ç”¨çš„æµè§ˆå™¨æ“ä½œAPI\n\n```python\n# å¼•å…¥seleniumæ“ä½œæ¡†æ¶\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n# å¼€å¯æµè§ˆå™¨ä¼šè¯\ndriver = webdriver.Chrome()\n# driver = webdriver.Edge()\n\n# æŒ‡å®šåŠ è½½æµè§ˆå™¨RUL\ndriver.get(\"http://www.muguilin.com\")\n\n# æ‰“å¼€æ–°é¡µé¢\ndriver.navigate().to(\"http://www.muguilin.com/blog\")\n\n# æœ€å¤§åŒ–çª—å£ï¼ˆæœ‰æ—¶å€™æ‰§è¡ŒæŸäº›æŒ‰æ‰­ã€äº‹ä»¶ç­‰æ— æ•ˆæ—¶ï¼Œå°±æ˜¯æ²¡æœ‰æœ€å¤§åŒ–æµè§ˆå™¨çª—å£ã€ä¸åœ¨å¯è§†åŒºã€‘å¯¼è‡´çš„ï¼ï¼‰\ndriver.maximize_window()\n\n# æœ€å°åŒ–çª—å£\ndriver.minimize_window()\n\n# ä¿å­˜å±å¹•æˆªå›¾\ndriver.save_screenshot('fileName')\n\n# è·å–å½“å‰æµè§ˆå™¨çª—å£å¯è§†åŒºå®½é«˜\ndriver.get_window_size()\n\n# è·å–å½“å‰çª—å£åæ ‡\ndriver.get_window_position()\n\n# è®¾ç½®çª—å£å¤§å°\ndriver.set_window_size(1920, 1080)\n\n# åˆ·æ–°é¡µé¢\ndriver.refresh()\n\n# å‰è¿›é¡µé¢\ndriver.forward()\n\n# åé€€é¡µé¢\ndriver.back()\n\n# å…³é—­çª—å£\ndriver.close()\n\n# å…³é—­æµè§ˆå™¨ä¼šè¯ï¼ˆå…³é—­sessionç­‰ï¼‰\ndriver.quit()\n```\n\n#### 2ã€Seleniumå¸¸ç”¨çš„å…ƒç´ é€‰æ‹©å™¨ï¼ˆå…ƒç´ å®šä½ï¼‰\n\n```python\n# å¼•å…¥seleniumæ“ä½œæ¡†æ¶\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n# å¼€å¯æµè§ˆå™¨ä¼šè¯\ndriver = webdriver.Chrome()\n\n# å…¶ä»–æµè§ˆå™¨ä¼šè¯æ–¹æ³•\n# webdriver.Firefox()\n# webdriver.FirefoxProfile()\n# webdriver.FirefoxOptions()\n# webdriver.Chrome()\n# webdriver.ChromeOptions()\n# webdriver.Ie()\n# webdriver.IeOptions()\n# webdriver.Edge()\n# webdriver.ChromiumEdge()\n# webdriver.EdgeOptions()\n# webdriver.Safari()\n# webdriver.WebKitGTK()\n# webdriver.WebKitGTKOptions()\n# webdriver.WPEWebKit()\n# webdriver.WPEWebKitOptions()\n# webdriver.Remote()\n# webdriver.DesiredCapabilities()\n# webdriver.ActionChains()\n# webdriver.Proxy()\n# webdriver.Keys()\n\n# æœ€å¤§åŒ–çª—å£\ndriver.maximize_window()  \n\n# æŒ‡å®šåŠ è½½æµè§ˆå™¨RUL\ndriver.get(\"http://www.muguilin.com\")\n\n# é€‰æ‹©inputå…ƒç´ å¹¶è®¾ç½®å€¼\nusername = driver.find_element(by=By.ID, value='username').send_keys('admin')\npasswerd = driver.find_element(by=By.ID, value='passwerd').send_keys('123456')\n\n# é€‰æ‹©buttonå…ƒç´ å¹¶æ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶\ndriver.find_element(by=By.ID, value='login-button').click()\n\n# è®¾ç½®å–usernameè¾“å…¥æ¡†æ–‡æœ¬å†…å®¹\nusername.sendKeys('root')\n\n# è·å–usernameè¾“å…¥æ¡†æ–‡æœ¬å†…å®¹\nusername.getText()\n\n# æ¸…ç©ºusernameè¾“å…¥æ¡†æ–‡æœ¬å†…å®¹\nusername.clear()\n\n# driver.find_element(By.ID, 'xxxid') // å•ä¸ªDOMå…ƒç´ é€‰æ‹©å™¨æ–¹æ³•\n# driver.find_elements(By.CLASS_NAME, 'xxxClassName') // å¤šä¸ªDOMå…ƒç´ é€‰æ‹©å™¨æ–¹æ³•\n\n# å…¶ä»–DOMå…ƒç´ é€‰æ‹©å™¨æ–¹æ³•\n# ID = \"id\"\n# NAME = \"name\"\n# TAG_NAME = \"tag name\"\n# CLASS_NAME = \"class name\"\n# LINK_TEXT = \"link text\"\n# PARTIAL_LINK_TEXT = \"partial link text\"\n# XPATH = \"xpath\"\n# CSS_SELECTOR = \"css selector\"\n\n# å…³é—­æµè§ˆå™¨ä¼šè¯\ndriver.quit()\n```\n\n#### 3ã€Seleniumé¼ æ ‡æ¨¡æ‹Ÿæ“ä½œï¼ˆActionChainsç±»ï¼‰\n\nSeleniumæ¡†æ¶ä¸­çš„ActionChainsç±»ä¾›äº†å¾ˆå¤šï¼Œå¦‚ï¼šå³å‡»ï¼ŒåŒå‡»ï¼Œæ‚¬åœï¼Œæ»‘åŠ¨ã€ä»¥åŠæ‹–æ”¾ç­‰é¼ æ ‡æ¨¡æ‹Ÿæ“ä½œã€‚\n\n##### (1)ã€ActionChainsç±»\n\n```python\n\"\"\"The ActionChains implementation,\"\"\"\n\nclass ActionChains:\n\n    def __init__(self, driver, duration=250)\n\n    def perform(self)\n       \n    def reset_actions(self)\n\n    def click(self, on_element=None)\n\n    def click_and_hold(self, on_element=None)\n        \n    def context_click(self, on_element=None)\n       \n    def double_click(self, on_element=None)\n       \n    def drag_and_drop(self, source, target)\n       \n    def drag_and_drop_by_offset(self, source, xoffset, yoffset)\n      \n    def key_down(self, value, element=None)\n       \n    def key_up(self, value, element=None)\n        \n    def move_by_offset(self, xoffset, yoffset)\n        \n    def move_to_element(self, to_element)\n       \n    def move_to_element_with_offset(self, to_element, xoffset, yoffset)\n        \n    def pause(self, seconds)\n        \n    def release(self, on_element=None)\n        \n    def send_keys(self, *keys_to_send)\n        \n    def send_keys_to_element(self, element, *keys_to_send)\n        \n    def scroll_to_element(self, element: WebElement)\n     \n    def scroll_by_amount(self, delta_x: int, delta_y: int)\n       \n    def scroll_from_origin(self, scroll_origin: ScrollOrigin, delta_x: int, delta_y: int)\n       \n    def scroll(self, x: int, y: int, delta_x: int, delta_y: int, duration: int = 0, origin: str = \"viewport\")\n       \n    def __enter__(self)\n        \n    def __exit__(self, _type, _value, _traceback)\n    \n```\n\n##### (2)ã€ActionChainsç±»çš„åŸºæœ¬ä½¿ç”¨\n\nåœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦å…ˆå¯¼å…¥ActionChainsç±»ï¼Œé€šè¿‡ActionChainsç±»æä¾›çš„ç›¸å…³æ–¹æ³•æ¥æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œï¼Œåœ¨è°ƒç”¨ActionChainsçš„æ–¹æ³•æ—¶ï¼Œå¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰çš„æ“ä½œï¼ŒæŒ‰é¡ºåºå­˜æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œå½“è°ƒç”¨perform()æ–¹æ³•æ—¶ï¼Œé˜Ÿåˆ—ä¸­çš„äº‹ä»¶ä¼šä¾æ¬¡æ‰§è¡Œã€‚\n\n```python\n# å¼•å…¥seleniumæ“ä½œæ¡†æ¶\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver import ActionChains\nfrom time import sleep\n\n# å¼€å¯æµè§ˆå™¨ä¼šè¯\ndriver = webdriver.Chrome()\n\n# æŒ‡å®šåŠ è½½æµè§ˆå™¨RUL\ndriver.get(\"http://www.baidu.com\")\n\n# è£…è½½ActionChainsç±»\naction = ActionChains(driver)\n\nsleep(1)\n\n# æ¨¡æ‹Ÿå³é”®ç‚¹å‡»\naction.context_click().perform()\n\n# åœ¨é€‰æ‹©IDä¸ºkwçš„inputå…ƒç´ ä¸Š æ¨¡æ‹Ÿå³é”®ç‚¹å‡»\nelement = driver.find_element(by=By.ID, value='kw')\naction.context_click(element).perform()\n\nsleep(10)\n```\n\n#### 4ã€Seleniumé”®ç›˜æ¨¡æ‹Ÿæ“ä½œï¼ˆKeysç±»ï¼‰\n\nåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé™¤äº†æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œä»¥å¤–ï¼Œæœ‰æ—¶è¿˜éœ€è¦å€ŸåŠ©æ¨¡æ‹Ÿé”®ç›˜æ“ä½œä¸€èµ·æ¥é…åˆä½¿ç”¨ï¼ŒSeleniumçš„Keysç±»ä¾›äº†å¾ˆå¤šå¤åˆ¶ã€ç²˜è´´ã€å…¨é€‰ï¼Œä»¥åŠè§¦å‘å›è½¦é”®ã€åˆ é™¤é”®ç”šè‡³ç»„åˆå¼å¿«æ·é”®ç­‰ã€‚\n\n##### (1)ã€Keysç±»\n\n```python\n\"\"\"The Keys implementation.\"\"\"\nclass Keys:\n    \"\"\"Set of special keys codes.\"\"\"\n\n    NULL = \"\\ue000\"\n    CANCEL = \"\\ue001\"  # ^break\n    HELP = \"\\ue002\"\n    BACKSPACE = \"\\ue003\"\n    BACK_SPACE = BACKSPACE\n    TAB = \"\\ue004\"\n    CLEAR = \"\\ue005\"\n    RETURN = \"\\ue006\"\n    ENTER = \"\\ue007\"\n    SHIFT = \"\\ue008\"\n    LEFT_SHIFT = SHIFT\n    CONTROL = \"\\ue009\"\n    LEFT_CONTROL = CONTROL\n    ALT = \"\\ue00a\"\n    LEFT_ALT = ALT\n    PAUSE = \"\\ue00b\"\n    ESCAPE = \"\\ue00c\"\n    SPACE = \"\\ue00d\"\n    PAGE_UP = \"\\ue00e\"\n    PAGE_DOWN = \"\\ue00f\"\n    END = \"\\ue010\"\n    HOME = \"\\ue011\"\n    LEFT = \"\\ue012\"\n    ARROW_LEFT = LEFT\n    UP = \"\\ue013\"\n    ARROW_UP = UP\n    RIGHT = \"\\ue014\"\n    ARROW_RIGHT = RIGHT\n    DOWN = \"\\ue015\"\n    ARROW_DOWN = DOWN\n    INSERT = \"\\ue016\"\n    DELETE = \"\\ue017\"\n    SEMICOLON = \"\\ue018\"\n    EQUALS = \"\\ue019\"\n\n    NUMPAD0 = \"\\ue01a\"  # number pad keys\n    NUMPAD1 = \"\\ue01b\"\n    NUMPAD2 = \"\\ue01c\"\n    NUMPAD3 = \"\\ue01d\"\n    NUMPAD4 = \"\\ue01e\"\n    NUMPAD5 = \"\\ue01f\"\n    NUMPAD6 = \"\\ue020\"\n    NUMPAD7 = \"\\ue021\"\n    NUMPAD8 = \"\\ue022\"\n    NUMPAD9 = \"\\ue023\"\n    MULTIPLY = \"\\ue024\"\n    ADD = \"\\ue025\"\n    SEPARATOR = \"\\ue026\"\n    SUBTRACT = \"\\ue027\"\n    DECIMAL = \"\\ue028\"\n    DIVIDE = \"\\ue029\"\n\n    F1 = \"\\ue031\"  # function  keys\n    F2 = \"\\ue032\"\n    F3 = \"\\ue033\"\n    F4 = \"\\ue034\"\n    F5 = \"\\ue035\"\n    F6 = \"\\ue036\"\n    F7 = \"\\ue037\"\n    F8 = \"\\ue038\"\n    F9 = \"\\ue039\"\n    F10 = \"\\ue03a\"\n    F11 = \"\\ue03b\"\n    F12 = \"\\ue03c\"\n\n    META = \"\\ue03d\"\n    COMMAND = \"\\ue03d\"\n    ZENKAKU_HANKAKU = \"\\ue040\"\n    \n```\n\n##### (2)ã€Keysç±»çš„åŸºæœ¬ä½¿ç”¨\n\nåœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦å…ˆå¯¼å…¥Keysç±»ï¼Œåœ¨é€‰æ‹©å¥½DOMå…ƒç´ åï¼Œé…åˆsend_keys()æ–¹æ³•ä¸€èµ·æ¨¡æ‹Ÿé”®ç›˜æ“ä½œ\n\n```python\n# å¼•å…¥seleniumæ“ä½œæ¡†æ¶\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom time import sleep\n\n# å¼€å¯æµè§ˆå™¨ä¼šè¯\ndriver = webdriver.Chrome()\n\n# æŒ‡å®šåŠ è½½æµè§ˆå™¨RUL\ndriver.get(\"http://www.baidu.com\")\n\nsleep(1)\n\n# åœ¨é€‰æ‹©IDä¸ºkwçš„inputå…ƒç´ ä¸Š æ¨¡æ‹ŸæŒ‰å›è½¦é”®\ndriver.find_element(by=By.ID, value='kw').send_keys('æ²æ«', Keys.ENTER) # å›è½¦é”®(ENTER)\n#driver.switch_to.active_element.send_keys(Keys.ENTER)\n\nsleep(10)\n\"\"\"\nå•ä¸ªé”® æ¨¡æ‹Ÿ\nelement.send_keys(Keys.F1)\t\t\t\t# é”®ç›˜F1\nelement.send_keys(Keys.F5)\t\t\t\t# é”®ç›˜F5(é¡µé¢åˆ·æ–°)\nelement.send_keys(Keys.F12)\t\t\t\t# é”®ç›˜F2(é¡µé¢è°ƒè¯•)\nelement.send_keys(Keys.TAB)\t\t\t\t# åˆ¶è¡¨é”®(TAB)\nelement.send_keys(Keys.BACK_SPACE)\t\t# é€€æ ¼é”®(BackSpace)\nelement.send_keys(Keys.DELETE)\t\t    # åˆ é™¤é”®(DELETE)\nelement.send_keys(Keys.ENTER)\t\t\t# å›è½¦é”®(ENTER)\nelement.send_keys(Keys.SPACE)\t\t\t# ç©ºæ ¼é”®(SPACE)\n\"\"\"\n\n\"\"\"\nç»„åˆé”® æ¨¡æ‹Ÿ\nelement.send_keys(Keys.CONTROL,'a')\t\t# å…¨é€‰(Ctrl+A)\nelement.send_keys(Keys.CONTROL,'x')\t\t# å‰ªåˆ‡(Ctrl+X)\nelement.send_keys(Keys.CONTROL,'c')\t\t# å¤åˆ¶(Ctrl+C)\nelement.send_keys(Keys.CONTROL,'s')\t\t# ä¿å­˜(Ctrl+S)\nelement.send_keys(Keys.CONTROL,'v')\t\t# ç²˜è´´(Ctrl+V)\n\"\"\"\n```\n\n\n\n\n\nå¼•ç”¨ï¼š[Pythonè‡ªåŠ¨åŒ–æµ‹è¯• ç¯å¢ƒæ­å»º Seleniumã€WebDriverä¸‹è½½ã€å®‰è£…ã€é…ç½®ã€åŸºæœ¬ä½¿ç”¨è¯¦è§£](https://juejin.cn/post/7245632566996107321#heading-6)\n","tags":["è‡ªåŠ¨åŒ–æµ‹è¯•"],"categories":["æµ‹è¯•"]},{"title":"è¾¹ç•Œå€¼åˆ†ææ³•","url":"/2023/07/05/è¾¹ç•Œå€¼åˆ†ææ³•/","content":"\n## æ¦‚è¿°\n\nï¼ˆ**1**ï¼‰è¾¹ç•Œå€¼åˆ†ææ³•æ˜¯å¯¹è½¯ä»¶çš„è¾“å…¥æˆ–è¾“å‡ºè¾¹ç•Œè¿›è¡Œæµ‹è¯•çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒé€šå¸¸ä½œä¸ºç­‰ä»·ç±»åˆ’åˆ†æ³•çš„ä¸€ç§è¡¥å……æµ‹è¯•ã€‚\n\nï¼ˆ**2**ï¼‰åœ¨ç­‰ä»·ç±»åˆ’åˆ†æ³•ä¸­ï¼Œæ— è®ºæ˜¯è¾“å…¥ç­‰ä»·ç±»è¿˜æ˜¯è¾“å‡ºç­‰ä»·ç±»ï¼Œéƒ½ä¼šæœ‰**å¤šä¸ªè¾¹ç•Œ**ï¼Œè€Œè¾¹ç•Œå€¼åˆ†ææ³•å°±æ˜¯åœ¨è¿™äº›è¾¹ç•Œé™„è¿‘å¯»æ‰¾**æŸäº›ç‚¹**ä½œä¸ºæµ‹è¯•æ•°æ®ï¼Œè€Œä¸æ˜¯åœ¨ç­‰ä»·ç±»å†…éƒ¨é€‰æ‹©æµ‹è¯•æ•°æ®ã€‚\n\n## è®¾è®¡æµ‹è¯•ç”¨ä¾‹\n\n**è®¾è®¡æµ‹è¯•ç”¨ä¾‹æ­¥éª¤**ï¼š\n\nï¼ˆ**1**ï¼‰é¦–å…ˆåˆ’åˆ†**ç­‰ä»·ç±»**ï¼Œæ ¹æ®ç­‰ä»·ç±»åˆ’åˆ†æƒ…å†µç¡®å®š**è¾¹ç•Œæƒ…å†µ**ã€‚\n\nï¼ˆ**2**ï¼‰é€‰å–**æ­£å¥½ç­‰äº**ã€**åˆšåˆšå¤§äº**ã€**åˆšåˆšå°äº**è¾¹ç•Œçš„å€¼ä½œä¸ºæµ‹è¯•æ•°æ®ï¼Œè€Œä¸æ˜¯é€‰å–ç­‰ä»·ç±»ä¸­çš„å…¸å‹å€¼æˆ–ä»»æ„å€¼ã€‚\n\n## è¾¹ç•Œå€¼è®¾è®¡åŸåˆ™\n\n**åŸåˆ™1**ï¼šå¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†**å€¼çš„èŒƒå›´**ï¼Œåˆ™åº”å–åˆšè¾¾åˆ°è¿™ä¸ªèŒƒå›´çš„è¾¹ç•Œçš„å€¼ï¼Œä»¥åŠåˆšåˆšè¶…è¶Šè¿™ä¸ªèŒƒå›´è¾¹ç•Œçš„å€¼ä½œä¸ºæµ‹è¯•è¾“å…¥æ•°æ®\n\n**åŸåˆ™2**ï¼šå¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†**å€¼çš„ä¸ªæ•°**ï¼Œåˆ™ç”¨æœ€å¤§ä¸ªæ•°ã€æœ€å°ä¸ªæ•°ã€æ¯”æœ€å°ä¸ªæ•°å°‘1ã€æ¯”æœ€å¤§ä¸ªæ•°å¤š1çš„æ•°ä½œä¸ºæµ‹è¯•æ•°æ®\n\n**åŸåˆ™3**ï¼šæ ¹æ®è§„æ ¼è¯´æ˜çš„æ¯ä¸ªè¾“å‡ºæ¡ä»¶ï¼Œä½¿ç”¨å‰é¢çš„åŸåˆ™1ã€‚\n\n**åŸåˆ™4**ï¼šæ ¹æ®è§„æ ¼è¯´æ˜çš„æ¯ä¸ªè¾“å‡ºæ¡ä»¶ï¼Œä½¿ç”¨å‰é¢çš„åŸåˆ™2ã€‚\n\n**åŸåˆ™5**ï¼šå¦‚æœç¨‹åºçš„è§„æ ¼è¯´æ˜ç»™å‡ºçš„è¾“å…¥åŸŸæˆ–è¾“å‡ºåŸŸæ˜¯**æœ‰åºé›†åˆ**ï¼Œåˆ™åº”é€‰å–é›†åˆçš„**ç¬¬ä¸€ä¸ªå…ƒç´ **å’Œ**æœ€åä¸€ä¸ªå…ƒç´ **ä½œä¸ºæµ‹è¯•ç”¨ä¾‹ã€‚\n\n**åŸåˆ™6**ï¼šå¦‚æœç¨‹åºä¸­ä½¿ç”¨äº†ä¸€ä¸ª**å†…éƒ¨æ•°æ®ç»“æ„**ï¼Œåˆ™åº”è¯¥é€‰æ‹©è¿™ä¸ªå†…éƒ¨æ•°æ®ç»“æ„è¾¹ç•Œä¸Šçš„å€¼ä½œä¸ºæµ‹è¯•ç”¨ä¾‹ã€‚\n\n**åŸåˆ™7**ï¼šåˆ†æè§„æ ¼è¯´æ˜ï¼Œæ‰¾å‡º**å…¶ä»–å¯èƒ½çš„è¾¹ç•Œæ¡ä»¶**ã€‚\n\n## ä¾‹å­\n\nå‡è®¾æˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ï¼Œå®ƒæ¥å—ä¸¤ä¸ªæ•´æ•°ä½œä¸ºè¾“å…¥ï¼Œå¹¶æ‰§è¡Œå››ä¸ªåŸºæœ¬çš„ç®—æœ¯è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚è®¡ç®—å™¨çš„è®¾è®¡è¦æ±‚è¾“å…¥çš„æ•´æ•°åœ¨-100åˆ°100çš„èŒƒå›´å†…ã€‚\n\næ ¹æ®è¾¹ç•Œå€¼åˆ†ææ³•ï¼Œæˆ‘ä»¬åº”è¯¥æµ‹è¯•ä»¥ä¸‹æƒ…å†µï¼š\n\n| è¾“å…¥å€¼  | èŒƒå›´          | ç»“æœ                             |\n| ------- | ------------- | -------------------------------- |\n| -100ï¼Œ2 | -100          | è®¡ç®—å™¨åº”æ­£ç¡®æ‰§è¡Œè¿ç®—å¹¶æ˜¾ç¤ºç»“æœã€‚ |\n| 100ï¼Œ5  | 100           | è®¡ç®—å™¨åº”æ­£ç¡®æ‰§è¡Œè¿ç®—å¹¶æ˜¾ç¤ºç»“æœã€‚ |\n| -101ï¼Œ7 | å°äº-100      | è®¡ç®—å™¨åº”æ‹’ç»è¾“å…¥å¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ |\n| 101ï¼Œ3  | å¤§äº100       | è®¡ç®—å™¨åº”æ‹’ç»è¾“å…¥å¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ |\n| 0,99    | -100åˆ°100ä¹‹é—´ | è®¡ç®—å™¨åº”æ­£ç¡®æ‰§è¡Œè¿ç®—å¹¶æ˜¾ç¤ºç»“æœã€‚ |\n\n## å¼•ç”¨\n\n[è½¯ä»¶æµ‹è¯•](https://juejin.cn/post/6968484121735594021)\n","tags":["æµ‹è¯•"],"categories":["æµ‹è¯•"]},{"title":"ç­‰ä»·ç±»åˆ’åˆ†æ³•","url":"/2023/07/05/ç­‰ä»·ç±»åˆ’åˆ†æ³•/","content":"\n## å®šä¹‰\n\nä¸€ä¸ªç¨‹åºå¯ä»¥æœ‰å¤šä¸ªè¾“å…¥ï¼Œç­‰ä»·ç±»åˆ’åˆ†å°±æ˜¯å°†è¿™äº›**è¾“å…¥æ•°æ®**æŒ‰ç…§è¾“å…¥éœ€æ±‚è¿›è¡Œåˆ†ç±»ï¼Œå°†å®ƒä»¬åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­é›†ï¼Œè¿™äº›å­é›†å³ä¸ºç­‰ä»·ç±»ï¼ˆ**æŸä¸ªè¾“å…¥åŸŸçš„å­é›†åˆ**ï¼‰ï¼Œåœ¨æ¯ä¸ª**ç­‰ä»·ç±»**ä¸­é€‰æ‹©æœ‰ä»£è¡¨æ€§çš„æ•°æ®è®¾è®¡æµ‹è¯•ç”¨ä¾‹ã€‚\n\n*ä¾‹å¦‚ï¼šç”µæºï¼Œä¸»æ¿ï¼Œcpuï¼Œcadï¼Œideaåˆ’åˆ†ç­‰ä»·ç±»ï¼Œå¯ä»¥å°†å‰ä¸‰ä¸ªåˆ’åœ¨ä¸€èµ·ï¼Œåä¸¤ä¸ªåˆ’åœ¨ä¸€èµ·ã€‚åˆ†åˆ«ä¸ºç”µè„‘ç¡¬ä»¶å’Œè½¯ä»¶ã€‚*\n\n## åˆ’åˆ†æ­¥éª¤\n\nï¼ˆ1ï¼‰å…ˆä»ç¨‹åº**è§„æ ¼è¯´æ˜ä¹¦**ä¸­æ‰¾å‡ºå„ä¸ª**è¾“å…¥æ¡ä»¶**ï¼› \n\nï¼ˆ2ï¼‰å†ä¸ºæ¯ä¸ªè¾“å…¥æ¡ä»¶åˆ’åˆ†**ç­‰ä»·ç±»**ï¼Œå½¢æˆè‹¥å¹²**äº’ä¸ç›¸äº¤çš„å­é›†**ï¼› \n\nï¼ˆ3ï¼‰åˆ—å‡ºç­‰ä»·è¡¨\n\n## è®¾è®¡æµ‹è¯•ç”¨ä¾‹æ­¥éª¤\n\nç­‰ä»·ç±»åˆ’åˆ†æ³•è®¾è®¡æµ‹è¯•ç”¨ä¾‹è¦ç»å†**åˆ’åˆ†ç­‰ä»·ç±»**ï¼ˆåˆ—å‡ºç­‰ä»·ç±»è¡¨ï¼‰å’Œ**é€‰å–æµ‹è¯•ç”¨ä¾‹**ä¸¤æ­¥ã€‚\n\n**ï¼ˆ1ï¼‰åˆ’åˆ†ç­‰ä»·ç±»**\n\n> ç­‰ä»·ç±»æ˜¯æŒ‡æŸä¸ªè¾“å…¥åŸŸçš„å­é›†åˆã€‚åœ¨è¯¥å­é›†åˆä¸­ï¼Œ**å„ä¸ªè¾“å…¥æ•°æ®å¯¹äºæ­éœ²ç¨‹åºä¸­çš„é”™è¯¯éƒ½æ˜¯ç­‰æ•ˆçš„**ã€‚æµ‹è¯•ä»£è¡¨å€¼å°±ç­‰ä»·äºè¿™ä¸€ç±»å…¶ä»–å€¼çš„æµ‹è¯•ã€‚\n\né‚£åœ¨åˆ’åˆ†ç­‰ä»·ç±»çš„æ—¶å€™ï¼Œä¼šå‡ºç°æœ‰æ•ˆç­‰ä»·ç±»å’Œæ— æ•ˆç­‰ä»·ç±»ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿ\n\n> **æœ‰æ•ˆç­‰ä»·ç±»**å°±æ˜¯æœ‰æ•ˆå€¼çš„é›†åˆï¼Œå®ƒä»¬æ˜¯ç¬¦åˆç¨‹åºè¦æ±‚ã€åˆç†ä¸”æœ‰æ„ä¹‰çš„è¾“å…¥æ•°æ®ã€‚\n>\n> **æ— æ•ˆç­‰ä»·ç±»**å°±æ˜¯æ— æ•ˆå€¼çš„é›†åˆï¼Œå®ƒä»¬æ˜¯ä¸ç¬¦åˆç¨‹åºè¦æ±‚ã€ä¸åˆç†æˆ–æ— æ„ä¹‰çš„è¾“å…¥æ•°æ®ã€‚\n\nå› æ­¤ï¼Œåœ¨è®¾è®¡æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œè¦**åŒæ—¶è€ƒè™‘**æœ‰æ•ˆç­‰ä»·ç±»å’Œæ— æ•ˆç­‰ä»·ç±»çš„è®¾è®¡ã€‚\n\nåŒæ—¶ï¼Œåœ¨åˆ’åˆ†ç­‰ä»·ç±»çš„æ—¶å€™ï¼Œéœ€è¦éµå¾ªä¸€å®šçš„åˆ’åˆ†åŸåˆ™ï¼š\n\n> **ç­‰ä»·ç±»åˆ’åˆ†åŸåˆ™**ï¼š\n>\n> **åŸåˆ™1**ï¼šå¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†**å–å€¼èŒƒå›´**æˆ–**å€¼çš„ä¸ªæ•°**çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œä¸¤ä¸ªæ— æ•ˆç­‰ä»·ç±»ã€‚\n>\n> **åŸåˆ™2**ï¼šå¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†**è¾“å…¥å€¼çš„é›†åˆ**æˆ–è€…è§„å®šäº† **â€œå¿…é¡»å¦‚ä½•â€çš„æ¡ä»¶** çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç¡®ç«‹ä¸€ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œä¸€ä¸ªæ— æ•ˆç­‰ä»·ç±»ã€‚\n>\n> **åŸåˆ™3**ï¼šå¦‚æœè¾“å…¥æ¡ä»¶æ˜¯ä¸€ä¸ª**å¸ƒå°”é‡**çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®å®šä¸€ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œä¸€ä¸ªæ— æ•ˆç­‰ä»·ç±»ã€‚\n>\n> **åŸåˆ™4**ï¼šå¦‚æœè§„å®šäº†**è¾“å…¥æ•°æ®çš„ä¸€ç»„å€¼**ï¼ˆå‡å®šnä¸ªï¼‰ï¼Œå¹¶ä¸”ç¨‹åºè¦å¯¹æ¯ä¸€ä¸ªè¾“å…¥å€¼åˆ†åˆ«å¤„ç†çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®å®šnä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œä¸€ä¸ªæ— æ•ˆç­‰ä»·ç±»ã€‚\n>\n> **åŸåˆ™5**ï¼šå¦‚æœè§„å®šäº†**è¾“å…¥æ•°æ®å¿…é¡»éµå®ˆ**çš„è§„åˆ™ï¼Œå¯ç¡®å®šä¸€ä¸ªæœ‰æ•ˆç­‰ä»·ç±»ï¼ˆç¬¦åˆè§„åˆ™ï¼‰å’Œè‹¥å¹²ä¸ªæ— æ•ˆç­‰ä»·ç±»ï¼ˆä»ä¸åŒè§’åº¦è¿åè§„åˆ™ï¼‰ã€‚\n>\n> **åŸåˆ™6**ï¼šåœ¨ç¡®çŸ¥å·²åˆ’åˆ†çš„ç­‰ä»·ç±»ä¸­ï¼Œå„å…ƒç´ åœ¨ç¨‹åºå¤„ç†ä¸­çš„æ–¹å¼ä¸åŒçš„æƒ…å†µä¸‹ï¼Œåˆ™åº”å†å°†è¯¥ç­‰ä»·ç±»è¿›ä¸€æ­¥åœ°åˆ’åˆ†ä¸ºæ›´å°çš„ç­‰ä»·ç±»ã€‚\n\n> åŒä¸€ä¸ªç­‰ä»·ç±»ä¸­çš„æ•°æ®å‘ç°ç¨‹åºç¼ºé™·çš„èƒ½åŠ›æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœä½¿ç”¨ç­‰ä»·ç±»ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ•°æ®ä¸èƒ½æ•è·ç¼ºé™·ï¼Œé‚£ä¹ˆä½¿ç”¨ç­‰ä»·ç±»ä¸­çš„å…¶ä»–æ•°æ®ä¹Ÿä¸èƒ½æ•è·ç¼ºé™·ï¼›åŒæ ·ï¼Œå¦‚æœç­‰ä»·ç±»ä¸­çš„å…¶ä¸­ä¸€ä¸ªæ•°æ®èƒ½å¤Ÿæ•è·ç¼ºé™·ï¼Œé‚£ä¹ˆè¯¥ç­‰ä»·ç±»ä¸­çš„å…¶ä»–æ•°æ®ä¹Ÿèƒ½æ•è·ç¼ºé™·ï¼Œå³**ç­‰ä»·ç±»ä¸­çš„æ‰€æœ‰è¾“å…¥æ•°æ®éƒ½æ˜¯ç­‰æ•ˆçš„**ã€‚\n\n**ï¼ˆ2ï¼‰è®¾è®¡æµ‹è¯•ç”¨ä¾‹**\n\n- åœ¨ç¡®ç«‹äº†ç­‰ä»·ç±»ä¹‹åï¼Œå»ºç«‹ç­‰ä»·ç±»åˆ—è¡¨ï¼Œåˆ—å‡ºæ‰€æœ‰åˆ’åˆ†å‡ºçš„ç­‰ä»·ç±»ã€‚\n- ä¸ºæ¯ä¸ªç­‰ä»·ç±»è§„å®šä¸€ä¸ª**å”¯ä¸€ç¼–å·**ã€‚\n- è®¾è®¡ä¸€ä¸ªæ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å…¶**å°½å¯èƒ½å¤šåœ°è¦†ç›–**å°šæœªè¢«è¦†ç›–çš„æœ‰æ•ˆç­‰ä»·ç±»ã€‚é‡å¤è¿™ä¸€æ­¥ï¼Œç›´åˆ°æ‰€æœ‰çš„æœ‰æ•ˆç­‰ä»·ç±»éƒ½è¢«è¦†ç›–ä¸ºæ­¢ã€‚\n- è®¾è®¡ä¸€ä¸ªæ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿å…¶**ä»…è¦†ç›–ä¸€ä¸ª**å°šæœªè¢«è¦†ç›–çš„æ— æ•ˆç­‰ä»·ç±»ã€‚é‡å¤è¿™ä¸€æ­¥ï¼Œç›´åˆ°æ‰€æœ‰çš„æ— æ•ˆç­‰ä»·ç±»éƒ½è¢«è¦†ç›–ä¸ºæ­¢ã€‚\n\n## æ¡ˆä¾‹\n\næŸè¿é”é…’åº—é›†å›¢å®è¡Œç§¯åˆ†å¥–åŠ±è®¡åˆ’ï¼Œä¼šå‘˜æ¯æ¬¡å…¥ä½é›†å›¢æ——ä¸‹é…’åº—å‡å¯ä»¥è·å¾—ä¸€å®šç§¯åˆ†ï¼Œç§¯åˆ†ç”±æ¬¢è¿ç§¯åˆ†åŠ æ¶ˆè´¹ç§¯åˆ†æ„æˆã€‚å…¶ä¸­æ¬¢è¿ç§¯åˆ†è·Ÿé…’åº—ç­‰çº§æœ‰å…³ï¼Œå…·ä½“æ ‡å‡†å¦‚è¡¨1-1æ‰€ç¤ºï¼›æ¶ˆè´¹ç§¯åˆ†è·Ÿæ¯æ¬¡å…¥ä½æ¶ˆè´¹é‡‘é¢æœ‰å…³ï¼Œå…·ä½“æ ‡å‡†ä¸ºæ¯æ¶ˆè´¹1å…ƒè·å¾—2ç§¯åˆ†ï¼ˆä¸è¶³1å…ƒçš„éƒ¨åˆ†ä¸ç»™åˆ†ï¼‰ã€‚æ­¤å¤–ï¼Œé›†å›¢ä¼šå‘˜åˆ†ä¸ºä¼˜å…ˆä¼šå‘˜ã€é‡‘ä¼šå‘˜ã€ç™½é‡‘ä¼šå‘˜ä¸‰ä¸ªçº§åˆ«ï¼Œé‡‘ä¼šå‘˜å’Œç™½é‡‘ä¼šå‘˜åœ¨å…¥ä½é…’åº—æ—¶å¯è·å¾—æ¶ˆè´¹ç§¯åˆ†çš„é¢å¤–å¥–åŠ±ï¼Œå¥–åŠ±è§„åˆ™å¦‚è¡¨1-2æ‰€ç¤ºã€‚\n\n**è¡¨1-1** é›†å›¢ä¸åŒç­‰çº§é…’åº—çš„æ¬¢è¿ç§¯åˆ†æ ‡å‡†\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230705205615.png)\n\n**è¡¨1-2** é¢å¤–ç§¯åˆ†å¥–åŠ±è§„åˆ™\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230705205635.png)\n\nè¯¥é…’åº—é›†å›¢å¼€å‘äº†ä¸€ä¸ªç¨‹åºæ¥è®¡ç®—ä¼šå‘˜æ¯æ¬¡å…¥ä½åæ‰€ç´¯ç§¯çš„ç§¯åˆ†ï¼Œç¨‹åºçš„è¾“å…¥åŒ…æ‹¬ä¼šå‘˜çº§åˆ«Lã€é…’åº—ç­‰çº§Cå’Œæ¶ˆè´¹é‡‘é¢Aï¼ˆå•ä½ï¼šå…ƒï¼‰ï¼Œç¨‹åºçš„è¾“å‡ºä¸ºæœ¬æ¬¡ç§¯åˆ†Sã€‚å…¶ä¸­ï¼ŒLä¸ºå•ä¸ªå­—æ¯ä¸”å¤§å°å†™ä¸æ•æ„Ÿï¼ŒCä¸ºå–å€¼1åˆ°6çš„æ•´æ•°ï¼ŒAä¸ºæ­£æµ®ç‚¹æ•°ä¸”æœ€å¤šä¿ç•™ä¸¤ä½å°æ•°ï¼ŒSä¸ºæ•´æ•°ã€‚\n\nã€**é—®é¢˜ä¸€**ã€‘é‡‡ç”¨ç­‰ä»·ç±»åˆ’åˆ†æ³•å¯¹è¯¥ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œç­‰ä»·ç±»è¡¨å¦‚è¡¨1-3æ‰€ç¤ºï¼Œè¯·è¡¥å……è¡¨ä¸­ç©ºï¼ˆ1ï¼‰-ï¼ˆ7ï¼‰ã€‚ \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230705205648.png)\n\nã€**é—®é¢˜äºŒ**ã€‘æ ¹æ®ä»¥ä¸Šç­‰ä»·ç±»è¡¨è®¾è®¡çš„æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¯·è¡¥å……è¡¨2-4ä¸­ç©ºï¼ˆ1ï¼‰-ï¼ˆ13ï¼‰ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230705205713.png)\n\n## å¼•ç”¨\n\n[è½¯ä»¶æµ‹è¯•](https://juejin.cn/post/6968484121735594021)\n","tags":["æµ‹è¯•"],"categories":["æµ‹è¯•"]},{"title":"æµ‹è¯•ç”¨ä¾‹è®¾è®¡","url":"/2023/07/04/æµ‹è¯•ç”¨ä¾‹è®¾è®¡/","content":"\n# å®šä¹‰\n\næµ‹è¯•ç”¨ä¾‹(Test Case)æ˜¯æŒ‡å¯¹ç‰¹å®šçš„è½¯ä»¶äº§å“è¿›è¡Œæµ‹è¯•ä»»åŠ¡çš„æè¿°ï¼Œä½“ç°æµ‹è¯•æ–¹æ¡ˆã€æ–¹æ³•ã€æŠ€æœ¯å’Œç­–ç•¥ã€‚æµ‹è¯•ç”¨ä¾‹å†…å®¹åŒ…æ‹¬æµ‹è¯•ç›®æ ‡ã€æµ‹è¯•ç¯å¢ƒã€è¾“å…¥æ•°æ®ã€æµ‹è¯•æ­¥éª¤ã€é¢„æœŸç»“æœã€æµ‹è¯•è„šæœ¬ç­‰ï¼Œæœ€ç»ˆå½¢æˆæ–‡æ¡£ç±»çš„è¾“å‡ºã€‚ç®€è€Œè¨€ä¹‹ï¼Œæµ‹è¯•ç”¨ä¾‹æ˜¯ä¸ºæŸä¸ªç›®æ ‡è€Œè®¾è®¡çš„ä¸€ç»„æµ‹è¯•è¾“å…¥ã€æ‰§è¡Œæ¡ä»¶ä»¥åŠé¢„æœŸç»“æœï¼Œç”¨äºæ ¸å®æ˜¯å¦æ»¡è¶³æŸä¸ªè½¯ä»¶éœ€æ±‚ã€‚\n\n# åŸºæœ¬åŸåˆ™\n\n- æ­£ç¡®æ€§ï¼šè®¾è®¡çš„æµ‹è¯•ç”¨ä¾‹å¿…é¡»æ˜¯æ­£ç¡®çš„ï¼Œå¿…è¦æ—¶éœ€è¦ç»è¿‡è¯„å®¡ã€‚\n- ä»£è¡¨æ€§ï¼šåœ¨è®¾è®¡æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ•°æ®çš„é€‰å–éœ€è¦æœ‰ä»£è¡¨æ€§ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºéƒ¨åˆ†çš„è®¾è®¡å†—ä½™æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ˜¯è¦†ç›–è¦å…¨ï¼Œæ•°æ®èƒ½è¦†ç›–è®¾è®¡æ–¹æ³•åˆ’åˆ†çš„èŒƒå›´ã€‚\n- å¯åˆ¤å®šæ€§ï¼šç”¨ä¾‹çš„æµ‹è¯•ç»“æœå¿…é¡»å¯é‡åŒ–ï¼Œè¿™æ ·æµ‹è¯•å®Œæˆä¹‹åæ‰èƒ½å°†æµ‹è¯•ç»“æœä¸é¢„æœŸç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤å®šæ˜¯å¦å­˜åœ¨BUGã€‚\n- å¯é‡ç°æ€§ï¼šæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå¯å¤ç°æ€§ä¿è¯é—®é¢˜å®šä½çš„å‡†ç¡®æ€§ã€‚\n- å¯æ“ä½œæ€§ï¼šè¯¦ç»†ã€å‡†ç¡®å’Œæ¸…æ™°çš„æ­¥éª¤æ˜¯æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œçš„å¿…è¦æ¡ä»¶ï¼Œä¹Ÿæ˜¯æµ‹è¯•ç”¨ä¾‹å¯é‡ç°çš„åŸºç¡€ã€‚\n\n# å¸¸ç”¨æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•\n\n**æµ‹è¯•åŒ…æ‹¬é»‘ç™½ç›’æµ‹è¯•ï¼Œè¿™é‡Œçš„è®¾è®¡æ–¹æ³•å°±æ˜¯é»‘ç›’æµ‹è¯•æ–¹æ³•ã€‚**å…ˆåœ¨è¿™é‡Œç®€å•ä»‹ç»å„ç§æ–¹æ³•ï¼Œå¯¹å¸¸ç”¨çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•æœ‰ä¸ªç²—æµ…çš„äº†è§£ï¼Œåç»­å¯¹æ¯ä¸ªæ–¹æ³•è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼ˆå®é™…æ˜¯æƒ³åˆ’æ°´ï¼Œå¤šåˆ’å‡ ç¯‡æ–‡ç« å‡ºæ¥ï¼‰ã€‚\n\n- ç­‰ä»·ç±»åˆ’åˆ†\n- è¾¹ç•Œå€¼åˆ†æ\n- åœºæ™¯æ³•\n- é”™è¯¯æ¨æµ‹æ³•\n- å› æœå›¾å’Œåˆ¤å®šè¡¨ï¼ˆè¿™ä¸ªå°±åˆåœ¨ä¸€èµ·å†™å§ï¼‰\n- æ­£äº¤å®éªŒæ³•\n\n# å®é™…å·¥ä½œä¸­çš„æµ‹è¯•ç”¨ä¾‹\n\nå®é™…å·¥ä½œä¸­ï¼Œå¦‚æœæŒ‰ç…§ç†è®ºä¸Šçš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•å»è®¾è®¡æ‰§è¡Œï¼Œæµ‹è¯•çš„æ—¶é—´å’Œæˆæœ¬éƒ½ä¼šå¢åŠ ï¼Œå°±æ˜¯åœ¨ç”¨æ—¶é—´æ¢å–é«˜è¦†ç›–ç‡ã€‚æ›´å¤šæƒ…å†µä¸‹ï¼Œç”¨ä¾‹è®¾è®¡æ—¶åº”è¯¥éµå®ˆç²¾ç›Šæµ‹è¯•ç­–ç•¥ï¼Œä¸èƒ½ä¸€å‘³çš„è¿½æ±‚æµ‹è¯•è¦†ç›–ç‡ï¼Œæœ‰æ•ˆçš„æµ‹è¯•æ›´æœ‰ä»·å€¼ã€‚åˆ©ç”¨æµ‹è¯•å››è±¡é™ç­‰ä¿¡æ¯æŒ‡å¯¼çš„ç²¾ç›Šæµ‹è¯•ï¼Œè¿½æ±‚ä»¥ä¸šåŠ¡ä»·å€¼ä¸ºç›®æ ‡ï¼Œä»¥å°½é‡å°‘çš„æˆæœ¬äº¤ä»˜é«˜è´¨é‡çš„è½¯ä»¶ï¼Œåšåˆ°æœ‰æ•ˆè¦†ç›–ï¼Œå‡å°‘æµªè´¹ã€‚ä¸ç®¡æ˜¯æ‰‹å·¥æµ‹è¯•è¿˜æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œéƒ½è¦å…ˆææ¸…æ¥šä¸šåŠ¡ä»·å€¼å’Œè´¨é‡ç›®æ ‡ï¼Œæµ‹è¯•ç”¨ä¾‹è®¾è®¡å’Œæ‰§è¡Œè¿‡ç¨‹éƒ½éœ€è¦åšå‡ºç›¸å¯¹åº”çš„è€ƒé‡ï¼ˆå¦‚æµ‹è¯•ç”¨ä¾‹çš„ä¼˜å…ˆçº§ï¼‰ã€‚\n\n![æµ‹è¯•å››è±¡é™](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230704180312.png)\n","tags":["æµ‹è¯•"],"categories":["æµ‹è¯•"]},{"title":"å…³äºprotobuf","url":"/2023/07/03/å…³äºprotobuf/","content":"\n ## å‰è¨€\n\næœ€è¿‘åœ¨çœ‹ä¸€æœ¬ä¹¦ï¼Œgoogleçš„æµ‹è¯•ä¹‹é“ï¼Œé‡Œé¢æåˆ°äº†ä¸€ä¸ªprotocol bufferåè¯ã€‚\n\n> Protocol Bufferæ˜¯Googleæä¾›çš„ä¸€ç§æ•°æ®åºåˆ—åŒ–åè®®ï¼Œä¸‹é¢æ˜¯æˆ‘ä»ç½‘ä¸Šæ‰¾åˆ°çš„Googleå®˜æ–¹å¯¹protobufçš„å®šä¹‰ï¼š\n> Protocol Buffers æ˜¯ä¸€ç§è½»ä¾¿é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå¯ä»¥ç”¨äºç»“æ„åŒ–æ•°æ®åºåˆ—åŒ–ï¼Œå¾ˆé€‚åˆåšæ•°æ®å­˜å‚¨æˆ– RPC æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒå¯ç”¨äºé€šè®¯åè®®ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸçš„è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„æ•°æ®æ ¼å¼ã€‚\n\n## ç®€å•ä½¿ç”¨\n\né¦–å…ˆåœ¨githubä¸‹è½½protocolçš„ç¼–è¯‘å™¨[ç›´è¾¾]([Releases Â· protocolbuffers/protobuf (github.com)](https://github.com/protocolbuffers/protobuf/releases))\n\nè§£å‹ä¹‹åè®¾ç½®ç¯å¢ƒå˜é‡æˆ–è€…è®²protoc.exeæ–‡ä»¶æ”¾åœ¨windows/system32ç›®å½•ä¸‹ã€‚\n\nå…ˆå®‰è£…protocol buffers\n\n```bash\nnpm install google-protobuf\n```\n\nç¼–å†™ä¸€ä¸ª.protoæ–‡ä»¶\n\n```protobuf\npackage zxwj;\nsyntax = \"proto3\";\nmessage helloworld \n{ \n   string zzuid = 123;  \n   string zzstatus = 0;\n}\n```\n\n## ç¼–è¯‘.protoæ–‡ä»¶\n\n> *ä½¿ç”¨protobuf.jså‘½ä»¤è¡Œå·¥å…·ç¼–è¯‘*\n\n```bash\nprotoc --js_out=import_style=commonjs,binary:. messages.proto\n```\n\nprotocä¼šç¼–è¯‘è¾“å…¥æ–‡ä»¶ï¼Œå¹¶ä¸”æ„å»ºmessages_pbï¼Œåœ¨severä¸­ï¼Œå¯ä»¥ä»¥ä»¥ä¸‹æ–¹å¼å¼•ç”¨\n\n```js\nvar messages = require('./messages_pb');\nvar message = new messages.MyMessage();\n```\n\n## ç¼–å†™server.js\n\n```js\nvar basepb = require('./messages_pb');\nconsole.log(basepb);\n\nvar message = new basepb.SearchRequest();\nconsole.log(message);\n\nmessage.setName(\"TS\");\nmessage.setPassword(\"123456\");\n\nvar bytes = message.serializeBinary(); //å¯¹è±¡åºåˆ—åŒ–\nconsole.log(bytes);\n\nvar message2 = basepb.SearchRequest.deserializeBinary(bytes); //è¿›åˆ¶åºåˆ—åŒ–\nconsole.log(message2);\n```\n\n## è¿è¡Œ\n\n```bash\nnode sever.js\n```\n\n\n\n# è¡¥å……\n\n### å®šä¹‰æ¶ˆæ¯ç±»å‹\n\n`protobuf`é‡Œæœ€åŸºæœ¬çš„ç±»å‹å°±æ˜¯`message`ï¼Œæ¯ä¸€ä¸ª`message`éƒ½ä¼šæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µ(`field`)ï¼Œå…¶ä¸­å­—æ®µåŒ…å«å¦‚ä¸‹å…ƒç´ \n\n![image-20230708102536853](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230708102536853.png)\n\n- ç±»å‹ï¼šç±»å‹ä¸ä»…å¯ä»¥æ˜¯æ ‡é‡ç±»å‹ï¼ˆ`int`ã€`string`ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤åˆç±»å‹ï¼ˆ`enum`ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–`message`\n- å­—æ®µåï¼šå­—æ®µåæ¯”è¾ƒæ¨èçš„æ˜¯ä½¿ç”¨ä¸‹åˆ’çº¿/åˆ†éš”åç§°\n- å­—æ®µç¼–å·ï¼šä¸€ä¸ªmessageå†…æ¯ä¸€ä¸ªå­—æ®µç¼–å·éƒ½å¿…é¡»å”¯ä¸€çš„ï¼Œåœ¨ç¼–ç åå…¶å®ä¼ é€’çš„æ˜¯è¿™ä¸ªç¼–å·è€Œä¸æ˜¯å­—æ®µå\n- å­—æ®µè§„åˆ™ï¼šæ¶ˆæ¯å­—æ®µå¯ä»¥æ˜¯ä»¥ä¸‹å­—æ®µä¹‹ä¸€\n  - `singular`ï¼šæ ¼å¼æ­£ç¡®çš„æ¶ˆæ¯å¯ä»¥æœ‰é›¶ä¸ªæˆ–ä¸€ä¸ªå­—æ®µï¼ˆä½†ä¸èƒ½è¶…è¿‡ä¸€ä¸ªï¼‰ã€‚ä½¿ç”¨ proto3 è¯­æ³•æ—¶ï¼Œå¦‚æœæœªä¸ºç»™å®šå­—æ®µæŒ‡å®šå…¶ä»–å­—æ®µè§„åˆ™ï¼Œåˆ™è¿™æ˜¯é»˜è®¤å­—æ®µè§„åˆ™\n  - `optional`ï¼šä¸ `singular` ç›¸åŒï¼Œä¸è¿‡æ‚¨å¯ä»¥æ£€æŸ¥è¯¥å€¼æ˜¯å¦æ˜ç¡®è®¾ç½®\n  - `repeated`ï¼šåœ¨æ ¼å¼æ­£ç¡®çš„æ¶ˆæ¯ä¸­ï¼Œæ­¤å­—æ®µç±»å‹å¯ä»¥é‡å¤é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ç³»ç»Ÿä¼šä¿ç•™é‡å¤å€¼çš„é¡ºåº\n  - `map`ï¼šè¿™æ˜¯ä¸€ä¸ªæˆå¯¹çš„é”®å€¼å¯¹å­—æ®µ\n- ä¿ç•™å­—æ®µï¼šä¸ºäº†é¿å…å†æ¬¡ä½¿ç”¨åˆ°å·²ç§»é™¤çš„å­—æ®µå¯ä»¥è®¾å®šä¿ç•™å­—æ®µã€‚å¦‚æœä»»ä½•æœªæ¥ç”¨æˆ·å°è¯•ä½¿ç”¨è¿™äº›å­—æ®µæ ‡è¯†ç¬¦ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™\n\n### æ ‡é‡å€¼ç±»\n\n| .proto Type | Go Type | Notes                                                        |\n| ----------- | ------- | ------------------------------------------------------------ |\n| double      | float64 |                                                              |\n| float       | float32 |                                                              |\n| int32       | int32   | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚å¯¹è´Ÿæ•°çš„ç¼–ç æ•ˆç‡ä½ä¸‹ - å¦‚æœæ‚¨çš„å­—æ®µå¯èƒ½åŒ…å«è´Ÿå€¼ï¼Œè¯·æ”¹ç”¨ sint32ã€‚ |\n| int64       | int64   | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚å¯¹è´Ÿæ•°çš„ç¼–ç æ•ˆç‡ä½ä¸‹ - å¦‚æœå­—æ®µå¯èƒ½æœ‰è´Ÿå€¼ï¼Œè¯·æ”¹ç”¨ sint64ã€‚ |\n| uint32      | uint32  | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚                                         |\n| uint64      | uint64  | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚                                         |\n| sint32      | int32   | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚æœ‰ç¬¦å·æ•´æ•°å€¼ã€‚ä¸å¸¸è§„ int32 ç›¸æ¯”ï¼Œè¿™äº›å‡½æ•°å¯ä»¥æ›´é«˜æ•ˆåœ°å¯¹è´Ÿæ•°è¿›è¡Œç¼–ç ã€‚ |\n| sint64      | int64   | ä½¿ç”¨å¯å˜é•¿åº¦çš„ç¼–ç ã€‚æœ‰ç¬¦å·æ•´æ•°å€¼ã€‚ä¸å¸¸è§„ int64 ç›¸æ¯”ï¼Œè¿™äº›å‡½æ•°å¯ä»¥æ›´é«˜æ•ˆåœ°å¯¹è´Ÿæ•°è¿›è¡Œç¼–ç ã€‚ |\n| fixed32     | uint32  | å§‹ç»ˆä¸º 4 ä¸ªå­—èŠ‚ã€‚å¦‚æœå€¼é€šå¸¸å¤§äº 2^28ï¼Œåˆ™æ¯” uint32 æ›´é«˜æ•ˆã€‚   |\n| fixed64     | uint64  | å§‹ç»ˆä¸º 8 ä¸ªå­—èŠ‚ã€‚å¦‚æœå€¼é€šå¸¸å¤§äº 2^56ï¼Œåˆ™æ¯” uint64 æ›´é«˜æ•ˆã€‚   |\n| sfixed32    | int32   | å§‹ç»ˆä¸º 4 ä¸ªå­—èŠ‚ã€‚                                            |\n| sfixed64    | int64   | å§‹ç»ˆä¸º 8 ä¸ªå­—èŠ‚ã€‚                                            |\n| bool        | bool    |                                                              |\n| string      | string  | å­—ç¬¦ä¸²å¿…é¡»å§‹ç»ˆåŒ…å« UTF-8 ç¼–ç æˆ– 7 ä½ ASCII æ–‡æœ¬ï¼Œå¹¶ä¸”é•¿åº¦ä¸å¾—è¶…è¿‡ 232ã€‚ |\n| bytes       | []byte  | å¯ä»¥åŒ…å«ä»»æ„é•¿åº¦çš„ 2^32 å­—èŠ‚ã€‚                               |\n\n### å¤åˆç±»å‹\n\n#### æ•°ç»„\n\n```protobuf\nmessage SearchResponse {\n  repeated Result results = 1;\n}\n\nmessage Result {\n  string url = 1;\n  string title = 2;\n  repeated string snippets = 3;\n}\n```\n\n#### æšä¸¾\n\n```protobuf\nmessage SearchRequest {\n  string query = 1;\n  int32 page_number = 2;\n  int32 result_per_page = 3;\n  enum Corpus {\n    UNIVERSAL = 0;\n    WEB = 1;\n    IMAGES = 2;\n    LOCAL = 3;\n    NEWS = 4;\n    PRODUCTS = 5;\n    VIDEO = 6;\n  }\n  Corpus corpus = 4;\n}\n```\n\n#### æœåŠ¡\n\nå®šä¹‰çš„methodä»…èƒ½æœ‰ä¸€ä¸ªå…¥å‚å’Œå‡ºå‚æ•°ã€‚å¦‚æœéœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰æˆmessage\n\n```protobuf\nprotobufå¤åˆ¶ä»£ç service SearchService {\n  rpc Search(SearchRequest) returns (SearchResponse);\n}\n```\n\n### ä½¿ç”¨å…¶ä»–æ¶ˆæ¯ç±»å‹\n\nä½¿ç”¨importå¼•ç”¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„pb\n\n```protobuf\nsyntax = \"proto3\";\n\nimport \"google/protobuf/wrappers.proto\";\n\npackage ecommerce;\n\nmessage Order {\n  string id = 1;\n  repeated string items = 2;\n  string description = 3;\n  float price = 4;\n  google.protobuf.StringValue destination = 5;\n}\n```\n\n## protocä½¿ç”¨\n\nprotocå°±æ˜¯protobufçš„ç¼–è¯‘å™¨ï¼Œå®ƒæŠŠprotoæ–‡ä»¶ç¼–è¯‘æˆä¸åŒçš„è¯­è¨€\n\n### ğŸ“– å®‰è£…\n\n[grpc.io/docs/protocâ€¦](https://link.juejin.cn/?target=https%3A%2F%2Fgrpc.io%2Fdocs%2Fprotoc-installation%2F)\n\n- Linux, using `apt` or `apt-get`, for example:\n\n  ```sh\n  $ apt install -y protobuf-compiler\n  $ protoc --version  # Ensure compiler version is 3+\n  ```\n\n### ğŸ“– ä½¿ç”¨\n\n```shell\nshellå¤åˆ¶ä»£ç $ protoc --help\nUsage: protoc [OPTION] PROTO_FILES\n\n  -IPATH, --proto_path=PATH   æŒ‡å®šæœç´¢è·¯å¾„\n  --plugin=EXECUTABLE:\n  \n  ....\n \n  --cpp_out=OUT_DIR           Generate C++ header and source.\n  --csharp_out=OUT_DIR        Generate C# source file.\n  --java_out=OUT_DIR          Generate Java source file.\n  --js_out=OUT_DIR            Generate JavaScript source.\n  --objc_out=OUT_DIR          Generate Objective C header and source.\n  --php_out=OUT_DIR           Generate PHP source file.\n  --python_out=OUT_DIR        Generate Python source file.\n  --ruby_out=OUT_DIR          Generate Ruby source file\n  \n   @<filename>                protoæ–‡ä»¶çš„å…·ä½“ä½ç½®\n```\n\n#### 1.æœç´¢è·¯å¾„å‚æ•°\n\nç¬¬ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å‚æ•°å°±æ˜¯`æœç´¢è·¯å¾„å‚æ•°`ï¼Œå³ä¸Šè¿°å±•ç¤ºçš„`-IPATH, --proto_path=PATH`ã€‚å®ƒè¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬è¦åœ¨å“ªä¸ªè·¯å¾„ä¸‹æœç´¢`.proto`æ–‡ä»¶ï¼Œè¿™ä¸ªå‚æ•°æ—¢å¯ä»¥ç”¨`-I`æŒ‡å®šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`--proto_path=`æŒ‡å®šã€‚\n\nå¦‚æœä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™é»˜è®¤åœ¨**å½“å‰è·¯å¾„**ä¸‹è¿›è¡Œæœç´¢ï¼›å¦å¤–ï¼Œè¯¥å‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šå¤šæ¬¡ï¼Œè¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¯ä»¥æŒ‡å®š**å¤šä¸ªè·¯å¾„**è¿›è¡Œæœç´¢ã€‚\n\n#### 2.è¯­è¨€æ’ä»¶å‚æ•°\n\nè¯­è¨€å‚æ•°å³ä¸Šè¿°çš„`--cpp_out=`ï¼Œ`--python_out=`ç­‰ï¼Œprotocæ”¯æŒçš„è¯­è¨€é•¿è¾¾13ç§ï¼Œä¸”éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„\n\nè¿è¡Œhelpå‡ºç°çš„è¯­è¨€å‚æ•°ï¼Œè¯´æ˜protocæœ¬èº«å·²ç»å†…ç½®è¯¥è¯­è¨€å¯¹åº”çš„ç¼–è¯‘æ’ä»¶ï¼Œæˆ‘ä»¬æ— éœ€å®‰è£…\n\n| Language                             | Generated Code                                               | Source                                                       |\n| ------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| C++ (include C++ runtime and protoc) | [C++](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fcpp-generated%23invocation) | [src](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fsrc) |\n| Java                                 | [Java](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fjava-generated%23invocation) | [java](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fjava) |\n| Python                               | [Python](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fpython-generated%23invocation) | [python](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fpython) |\n| Objective-C                          | [Objective-C](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fobjective-c-generated%23invocation) | [objectivec](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fobjectivec) |\n| C#                                   | [C#](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fcsharp-generated%23invocation) | [csharp](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fcsharp) |\n| Ruby                                 | [Ruby](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fruby-generated%23invocation) | [ruby](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fruby) |\n| PHP                                  | [PHP](https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fprotocol-buffers%2Fdocs%2Freference%2Fphp-generated%23invocation) | [php](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fprotocolbuffers%2Fprotobuf%2Fblob%2Fmain%2Fphp) |\n","tags":["protobuf"],"categories":["å·¥å…·"]},{"title":"æ— èŠæ—¶åœ¨æƒ³é»‘æ´æ˜¯å•¥","url":"/2023/06/30/å…³äºæ— èŠæ—¶çš„æ€è€ƒ/","content":"\n## ä¸»é¢˜1ï¼šé»‘æ´\n\n- é»‘æ´æ˜¯ç”±å·¨å¤§æ’æ˜Ÿåç¼©å½¢æˆçš„æå…¶å¯†é›†çš„å¤©ä½“ã€‚\n- é»‘æ´çš„é«˜å¯†åº¦æ˜¯ç”±äºå·¨å¤§çš„å¼•åŠ›å°†ç‰©è´¨å‹ç¼©åˆ°å¥‡ç‚¹ã€‚\n- åœ¨å¥‡ç‚¹å¤„ï¼Œæˆ‘ä»¬ç›®å‰æ‰€ç†è§£çš„ç‰©ç†å®šå¾‹å¤±æ•ˆï¼Œå…¶å¾®è§‚ç»“æ„ä»ç„¶æœªçŸ¥ã€‚\n\n## ä¸»é¢˜2ï¼šé»‘æ´çš„å½¢æˆ\n\n- å½“ä¸€ä¸ªå·¨å¤§ç‰©ä½“åœ¨è‡ªèº«çš„å¼•åŠ›ä½œç”¨ä¸‹åç¼©æ—¶ï¼Œå°±ä¼šå½¢æˆé»‘æ´ï¼Œå°†è´¨é‡é›†ä¸­åˆ°ä¸€ä¸ªå°ä½“ç§¯å†…ã€‚\n- å‹ç¼©åˆ°ä¸€ä¸ªå…³é”®åŠå¾„ï¼Œå³äº‹ä»¶è§†ç•Œï¼Œä¼šå½¢æˆä¸€ä¸ªè¿å…‰éƒ½æ— æ³•é€ƒè„±çš„åŒºåŸŸã€‚\n- äº‹ä»¶è§†ç•Œå’Œé»‘æ´çš„å½¢æˆæ¦‚å¿µæ˜¯ç”±çˆ±å› æ–¯å¦çš„å¹¿ä¹‰ç›¸å¯¹è®ºæ¨å¯¼å‡ºæ¥çš„ã€‚\n\n## ä¸»é¢˜3ï¼šå…‰é€Ÿ\n\n- åœ¨å®‡å®™ä¸­ï¼Œå…‰é€Ÿè¢«é€‰æ‹©ä¸ºä¸€ä¸ªåŸºæœ¬å¸¸é‡ï¼Œå¹¶éå·§åˆï¼Œè€Œæ˜¯æ—¶ç©ºæœ¬è´¨çš„ç»“æœã€‚\n- å…‰é€Ÿï¼Œè¡¨ç¤ºä¸º \"c\"ï¼Œåœ¨ç‰©ç†å®šå¾‹çš„ä¸€è‡´æ€§å’Œä¿¡æ¯ä¼ æ’­ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚\n\n## ä¸»é¢˜4ï¼šç‰©è´¨çš„å‹ç¼©\n\n- å¦‚æœå°†ä¸€å †ä¸­å­å’Œè´¨å­å‹ç¼©åœ¨ä¸€èµ·ï¼Œä¼šå—åˆ°ç”µç£åŠ›ã€æ ¸åŠ›å’Œæ³¡åˆ©ä¸ç›¸å®¹åŸç†ç­‰åä½œç”¨åŠ›çš„å½±å“ã€‚\n- å½“ç‰©ä½“è¢«æåº¦å‹ç¼©æ—¶ï¼Œä¼šè¾¾åˆ°é«˜å¯†åº¦çŠ¶æ€ï¼Œä½†ä¸ä¸€å®šä¼šå½¢æˆé»‘æ´ã€‚é»‘æ´çš„å½¢æˆéœ€è¦è¾¾åˆ°ä¸€å®šçš„è´¨é‡å’Œå‹ç¼©æ¡ä»¶ã€‚","tags":["é»‘æ´"],"categories":["å…¶ä»–"]},{"title":"é€’å½’ç®—æ³•ç»“æ„","url":"/2023/06/29/é€’å½’ç®—æ³•ç»“æ„/","content":"\n### 1.é€’å½’åŸç†\n\n### **1.1.ä»€ä¹ˆæ˜¯é€’å½’ï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ**\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹é€’å½’ï¼ˆrecursionï¼‰çš„å®šä¹‰ï¼š\n\n> é€’å½’æ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œåœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å°†è‡ªèº«ä½œä¸ºå­ä¾‹ç¨‹è°ƒç”¨ã€‚\n\nç®€å•è¯´ç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§å«é€’å½’ã€‚é€’å½’çš„æ€æƒ³æ˜¯**æŠŠä¸€ä¸ªå¤§å‹å¤æ‚é—®é¢˜å±‚å±‚è½¬åŒ–ä¸ºä¸€ä¸ªä¸åŸé—®é¢˜è§„æ¨¡æ›´å°çš„é—®é¢˜ï¼Œé—®é¢˜è¢«æ‹†è§£æˆå­é—®é¢˜åï¼Œé€’å½’è°ƒç”¨ç»§ç»­è¿›è¡Œï¼Œç›´åˆ°å­é—®é¢˜æ— éœ€è¿›ä¸€æ­¥é€’å½’å°±å¯ä»¥è§£å†³çš„åœ°æ­¥ä¸ºæ­¢**ã€‚\n\nä½¿ç”¨é€’å½’éœ€è¦é¿å…å‡ºç°æ­»å¾ªç¯ï¼Œä¸ºäº†ç¡®ä¿é€’å½’æ­£ç¡®å·¥ä½œï¼Œé€’å½’ç¨‹åºåº”è¯¥åŒ…å«2ä¸ªå±æ€§ï¼š\n\n1. åŸºæœ¬æƒ…å†µï¼ˆbottom casesï¼‰ï¼ŒåŸºæœ¬æƒ…å†µç”¨äºä¿è¯ç¨‹åºè°ƒç”¨åŠæ—¶è¿”å›ï¼Œä¸åœ¨ç»§ç»­é€’å½’ï¼Œä¿è¯äº†ç¨‹åºå¯ç»ˆæ­¢ã€‚\n2. é€’æ¨å…³ç³»ï¼ˆrecurrentce relationï¼‰ï¼Œå¯å°†æ‰€æœ‰å…¶ä»–æƒ…å†µæ‹†åˆ†åˆ°åŸºæœ¬æ¡ˆä¾‹ã€‚\n\n**ç¤ºä¾‹**\n\nè®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ç¼–ç¨‹é—®é¢˜å¼€å§‹ï¼š\n\n> ä»¥ç›¸åçš„é¡ºåºæ‰“å°å­—ç¬¦ä¸²ã€‚\n\nä½ å¯ä»¥ä½¿ç”¨è¿­ä»£çš„åŠæ³•è½»è€Œæ˜“ä¸¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³ä»å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦å¼€å§‹éå†å­—ç¬¦ä¸²ã€‚ä½†æ˜¯å¦‚ä½•é€’å½’åœ°è§£å†³å®ƒå‘¢ï¼Ÿ\n\né¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€éœ€çš„å‡½æ•°å®šä¹‰ä¸º printReverse(str[0...n-1])ï¼Œå…¶ä¸­ str[0] è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥åˆ†ä¸¤æ­¥å®Œæˆç»™å®šçš„ä»»åŠ¡ï¼š\n\n1. printReverse(str[1...n-1])ï¼šä»¥ç›¸åçš„é¡ºåºæ‰“å°å­å­—ç¬¦ä¸² str[1...n-1] ã€‚\n2. print(str[0])ï¼šæ‰“å°å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚\n\nè¯·æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥ä¸­è°ƒç”¨å‡½æ•°æœ¬èº«ï¼Œæ ¹æ®å®šä¹‰ï¼Œå®ƒä½¿å‡½æ•°é€’å½’ã€‚\n\nä¸‹é¢ç»™å‡ºäº†ä»£ç ç‰‡æ®µï¼š\n\n```java\nprivate static void printReverse(char [] str) {\n  helper(0, str);\n}\n\n\nprivate static void helper(int index, char [] str) {\n if (str == null || index >= str.length) {\n return;\n  }\n  helper(index + 1, str);\n  System.out.print(str[index]);\n}\n```\n\n### 1.2.é€’å½’çš„ç¨‹åºç‰¹å¾\n\n**ä¼˜é›…æ€§**\n\nç›¸æ¯”å…¶ä»–è§£æ³•ï¼ˆæ¯”å¦‚è¿­ä»£æ³•ï¼‰ï¼Œä½¿ç”¨é€’å½’æ³•ï¼Œä½ ä¼šå‘ç°åªéœ€å°‘é‡ç¨‹åºå°±å¯æè¿°å‡ºè§£é¢˜è¿‡ç¨‹ï¼Œå¤§å¤§å‡å°‘äº†ç¨‹åºçš„ä»£ç é‡ï¼Œè€Œä¸”å¾ˆå¥½ç†è§£ã€‚é€’å½’çš„èƒ½åŠ›åœ¨äºç”¨æœ‰é™çš„è¯­å¥æ¥å®šä¹‰å¯¹è±¡çš„æ— é™é›†åˆã€‚\n\n**åå‘æ€§**\n\nç”±äºé€’å½’è°ƒç”¨ç¨‹åºéœ€è¦ç»´æŠ¤è°ƒç”¨æ ˆï¼Œè€Œæ ˆï¼ˆæˆ‘ä»¬åœ¨ä¸Šæ–‡æè¿‡ï¼‰å…·æœ‰åè¿›å…ˆå‡ºçš„ç‰¹å¾ï¼Œå› æ­¤é€’å½’ç¨‹åºé€‚åˆæ»¡è¶³å–åç±»éœ€æ±‚ã€‚æˆ‘ä»¬åœ¨ç¬¬äº”éƒ¨åˆ†æœ‰ä¸€äº›ç¼–ç¨‹å®è·µï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å–åï¼Œé“¾è¡¨å–åç­‰ç›¸å…³æœ‰è¶£çš„ç®—æ³•é—®é¢˜ã€‚\n\n**é€’æ¨å…³ç³»**\n\né€’å½’ç¨‹åºå¯ä»¥è¾ƒæ˜æ˜¾çš„å‘ç°é€’æ¨å…³ç³»ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ï¼Œå…·æœ‰é€’æ¨å…³ç³»çš„é—®é¢˜åŸºæœ¬éƒ½å¯ä»¥é€šè¿‡é€’å½’æ±‚è§£ï¼ˆå½“ç„¶ä¹Ÿè®¸æœ‰æ€§èƒ½æ›´ä½³çš„è§£æ³•ï¼Œä½†é€’å½’ç»å¯¹æ˜¯ä¸€ç§é€‰æ‹©ï¼‰ã€‚é€’æ¨å…³ç³»å¸¸è§é—®é¢˜æœ‰æ¨è¾‰ä¸‰è§’ã€é˜¶ä¹˜è®¡ç®—ï¼ˆè§æœ¬æ–‡ç¬¬äº”å°èŠ‚ï¼‰ã€‚ä¸‹ä¸€èŠ‚é‡ç‚¹è®¨è®ºä¸€ä¸‹é€’æ¨å…³ç³»ã€‚\n\n### 1.3.ä»€ä¹ˆæ—¶å€™è€ƒè™‘é€’å½’\n\nå…·æœ‰ä»¥ä¸‹ç‰¹å¾çš„é—®é¢˜å¯è€ƒè™‘é€’å½’æ±‚è§£ï¼š\n\n- å½“é—®é¢˜å’Œå­é—®é¢˜å…·æœ‰é€’æ¨å…³ç³»ï¼Œæ¯”å¦‚æ¨è¾‰ä¸‰è§’ã€è®¡ç®—é˜¶ä¹˜ï¼ˆåæ–‡è®¨è®ºï¼‰ã€‚\n- å…·æœ‰é€’å½’æ€§è´¨çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚é“¾è¡¨ã€æ ‘ã€å›¾ã€‚\n- åå‘æ€§é—®é¢˜ï¼Œæ¯”å¦‚å–åã€‚\n\næ€»ç»“ä¸‹æ¥ï¼Œæœ€æ ¹æœ¬çš„è¿˜æ˜¯è¦**æŠ“ä½é—®é¢˜æœ¬èº«æ˜¯å¦å¯ä»¥é€šè¿‡å±‚å±‚æ‹†è§£åˆ°æœ€å°ç²’åº¦æ¥å¾—è§£ã€‚**\n\n### 2.é€’å½’çš„é€’æ¨æ€§è´¨\n\nä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´äº†ï¼Œåœ¨å®ç°é€’å½’å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¼„æ˜ç™½2ä»¶äº‹ï¼š\n\n- é€’æ¨å…³ç³»ï¼š ä¸€ä¸ªé—®é¢˜çš„ç»“æœä¸å…¶å­é—®é¢˜çš„ç»“æœä¹‹é—´çš„å…³ç³»ã€‚\n- åŸºæœ¬æƒ…å†µ: ä¸éœ€è¦è¿›ä¸€æ­¥çš„é€’å½’è°ƒç”¨å°±å¯ä»¥ç›´æ¥è®¡ç®—ç­”æ¡ˆçš„æƒ…å†µã€‚ å®ƒä»¬å¾€å¾€æ˜¯é—®é¢˜è¢«å‡å°‘åˆ°æœ€å°è§„æ¨¡çš„æƒ…å†µï¼Œ*ä¹Ÿå°±æ˜¯*å¦‚æœæˆ‘ä»¬è®¤ä¸ºå°†é—®é¢˜åˆ’åˆ†ä¸ºå­é—®é¢˜æ˜¯ä¸€ç§è‡ªä¸Šè€Œä¸‹çš„æ–¹å¼çš„æœ€ä¸‹å±‚ã€‚\n\nä¸€æ—¦æˆ‘ä»¬è®¡ç®—å‡ºä»¥ä¸Šä¸¤ä¸ªå…ƒç´ ï¼Œå†æƒ³è¦å®ç°ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå°±åªéœ€è¦æ ¹æ®é€’æ¨å…³ç³»è°ƒç”¨å‡½æ•°æœ¬èº«ï¼Œç›´åˆ°å…¶æŠµè¾¾åŸºæœ¬æƒ…å†µã€‚\n\nä¸ºäº†è§£é‡Šä»¥ä¸Šå‡ ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»å…¸é—®é¢˜ï¼šæ¨è¾‰ä¸‰è§’ï¼ˆä¹Ÿå«å¸•æ–¯å¡ä¸‰è§’ï¼‰ã€‚\n\n### 2.1.å¸•æ–¯å¡ä¸‰è§’\n\nå¸•æ–¯å¡ä¸‰è§’å½¢æ˜¯æ’åˆ—æˆä¸‰è§’å½¢çš„ä¸€ç³»åˆ—æ•°å­—ã€‚ åœ¨å¸•æ–¯å¡ä¸‰è§’å½¢ä¸­ï¼Œæ¯ä¸€è¡Œçš„æœ€å·¦è¾¹å’Œæœ€å³è¾¹çš„æ•°å­—æ€»æ˜¯ 1ã€‚ å¯¹äºå…¶ä½™çš„æ¯ä¸ªæ•°å­—éƒ½æ˜¯å‰ä¸€è¡Œä¸­ç›´æ¥ä½äºå®ƒä¸Šé¢çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œã€‚\n\nä¸‹é¢çš„æ’å›¾ç»™å‡ºäº†ä¸€ä¸ª 5 è¡Œçš„å¸•æ–¯å¡ä¸‰è§’ï¼š\n\n![åŠ¨å›¾å°é¢](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-99fd119be3ca7616ae635b28e7181f7e_b.jpg)\n\n\n\næ ¹æ®ä¸Šé¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå…·æœ‰ç¡®å®šè¡Œæ•°çš„å¸•æ–¯å¡ä¸‰è§’å½¢ã€‚\n\n**é€’æ¨å…³ç³»**\n\nè®©æˆ‘ä»¬ä»å¸•æ–¯å¡ä¸‰è§’å½¢å†…çš„é€’æ¨å…³ç³»å¼€å§‹ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•° *f*(*i*,*j*)ï¼Œå®ƒå°†ä¼šè¿”å›å¸•æ–¯å¡ä¸‰è§’å½¢ç¬¬ i è¡Œã€ç¬¬ j åˆ—çš„æ•°å­—ã€‚\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼æ¥è¡¨ç¤ºè¿™ä¸€é€’æ¨å…³ç³»ï¼š\n\n*f*(*i*,*j*)=*f*(*i*âˆ’1,*j*âˆ’1)+*f*(*i*âˆ’1,*j*)\n\n**åŸºæœ¬æƒ…å†µ**\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯è¡Œçš„æœ€å·¦è¾¹å’Œæœ€å³è¾¹çš„æ•°å­—æ˜¯åŸºæœ¬æƒ…å†µï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œå®ƒæ€»æ˜¯ç­‰äº 1ã€‚\n\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸºæœ¬æƒ…å†µå®šä¹‰å¦‚ä¸‹:\n\n*f*(*i*,*j*)=1*wherej*=1*orj*=*i*\n\n**æ¼”ç¤º**\n\næ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œä¸€æ—¦æˆ‘ä»¬å®šä¹‰äº† é€’æ¨å…³ç³» å’Œ åŸºæœ¬æƒ…å†µï¼Œé€’å½’å‡½æ•°çš„å®ç°å˜å¾—æ›´åŠ ç›´è§‚ï¼Œç‰¹åˆ«æ˜¯åœ¨æˆ‘ä»¬ç”¨æ•°å­¦å…¬å¼è¡¨ç¤ºå‡ºè¿™ä¸¤ä¸ªå…ƒç´ ä¹‹åã€‚\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå±•ç¤ºæˆ‘ä»¬å¦‚ä½•ç”¨è¿™ä¸ªå…¬å¼é€’å½’åœ°è®¡ç®— *f*(5,3), *ä¹Ÿå°±æ˜¯* å¸•æ–¯å¡ä¸‰è§’å½¢ç¬¬ 5 è¡Œä¸­çš„ç¬¬ 3 ä¸ªæ•°ã€‚\n\n![åŠ¨å›¾å°é¢](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-99fd119be3ca7616ae635b28e7181f7e_b.jpg)\n\n\n\n\n\næˆ‘ä»¬å¯ä»¥å°† *f*(5,3) åˆ†è§£ä¸º *f*(5,3)=*f*(4,2)+*f*(4,3)ï¼Œç„¶åé€’å½’åœ°è°ƒç”¨ *f*(4,2) å’Œ *f*(4,3)ï¼š\n\n- å¯¹äºè°ƒç”¨çš„ *f*(4,2)ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å±•å¼€å®ƒï¼Œç›´åˆ°åˆ°è¾¾åŸºæœ¬æƒ…å†µï¼Œæ­£å¦‚ä¸‹é¢æ‰€æè¿°çš„ï¼š\n\n*f*(4,2)=*f*(3,1)+*f*(3,2)=*f*(3,1)+(*f*(2,1)+*f*(2,2))=1+(1+1)=3\n\n- å¯¹äºè°ƒç”¨çš„ *f*(4,3)ï¼Œç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†è§£ä¸ºï¼š\n\n*f*(4,3)=*f*(3,2)+*f*(3,3)=(*f*(2,1)+*f*(2,2))+*f*(3,3)=(1+1)+1=3\n\n- æœ€åï¼Œæˆ‘ä»¬ç»“åˆä¸Šè¿°å­é—®é¢˜çš„ç»“æœï¼š\n\n*f*(5,3)=*f*(4,2)+*f*(4,3)=3+3=6\n\næ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°é€’å½’è§£å†³æ–¹æ¡ˆå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é‡å¤çš„è®¡ç®—ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬é‡å¤è®¡ç®—ç›¸åŒçš„ä¸­é—´æ•°ä»¥è·å¾—æœ€åä¸€è¡Œä¸­çš„æ•°å­—ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼Œä¸ºäº†å¾—åˆ° *f*(5,3) çš„ç»“æœï¼Œæˆ‘ä»¬åœ¨ *f*(4,2) å’Œ *f*(4,3) çš„è°ƒç”¨ä¸­è®¡ç®—äº† *f*(3,2) ä¸¤æ¬¡ï¼Œè¿™æ ·é‡å¤è®¡ç®—æ•ˆç‡è‚¯å®šä¸é«˜ï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¼šç»™å‡ºä¼˜åŒ–æ–¹æ¡ˆæ¥é¿å…é‡å¤è®¡ç®—ï¼ˆå³è®°å¿†æœ¯ï¼‰ã€‚\n\n### 3.é€’å½’å¤æ‚æ€§åˆ†æ\n\n### 3.1.é€’å½’æ—¶é—´å¤æ‚åº¦è®¡ç®—\n\nç»™å‡ºä¸€ä¸ªé€’å½’ç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ O(*T*) é€šå¸¸æ˜¯**é€’å½’è°ƒç”¨çš„æ•°é‡**ï¼ˆè®°ä½œ *R*ï¼‰ å’Œè®¡ç®—çš„æ—¶é—´å¤æ‚åº¦çš„ä¹˜ç§¯ï¼ˆè¡¨ç¤ºä¸º O(*s*)ï¼‰çš„ä¹˜ç§¯ï¼š\n\nO(*T*)=*R*âˆ—O(*s*)\n\n**ç¤ºä¾‹**\n\nåœ¨åè½¬å­—ç¬¦ä¸²é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ç›¸åçš„é¡ºåºæ‰“å°å­—ç¬¦ä¸²ï¼Œè§£å†³é—®é¢˜çš„é€’å½’å…³ç³»å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š\n\nprintReverse(str) = printReverse(str[1...n]) + print(str[0])\n\nå…¶ä¸­ str[1...n] æ˜¯è¾“å…¥å­—ç¬¦ä¸² str çš„å­ä¸²ï¼Œä»…ä¸å«å‰å¯¼å­—ç¬¦ str[0]ã€‚\n\nå¦‚æ‚¨æ‰€è§ï¼Œè¯¥å‡½æ•°å°†è¢«é€’å½’è°ƒç”¨ n æ¬¡ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥å­—ç¬¦ä¸²çš„å¤§å°ã€‚åœ¨æ¯æ¬¡é€’å½’ç»“æŸæ—¶ï¼Œæˆ‘ä»¬åªæ˜¯æ‰“å°å‰å¯¼å­—ç¬¦ï¼Œå› æ­¤è¯¥ç‰¹å®šæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯æ’å®šçš„ï¼Œå³ O(1)ã€‚\n\næ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„é€’å½’å‡½æ•° printReverse(str) çš„æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(*printReverse*)=*n*âˆ—O(1)=O(*n*)ã€‚\n\n**æ‰§è¡Œæ ‘åˆ†æé€’å½’è°ƒç”¨æ•°é‡**\n\nåœ¨åˆ†æé€’å½’çš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œé€’å½’è°ƒç”¨çš„æ•°é‡ä¸ä¸€å®šå’ŒNæˆçº¿æ€§å…³ç³»ï¼Œæ¯”å¦‚æ–æ³¢é‚£å¥‘æ•°çš„è®¡ç®—ï¼ˆè§ç¬¬äº”éƒ¨åˆ†ï¼‰ï¼Œå…¶é€’æ¨å…³ç³»è¢«å®šä¹‰ä¸ºf(n) = f(n-1) + f(n-2)ã€‚ä¹ä¸€çœ‹ï¼Œåœ¨æ‰§è¡Œæ–æ³¢é‚£å¥‘å‡½æ•°æœŸé—´è®¡ç®—é€’å½’è°ƒç”¨çš„æ•°é‡ä¼¼ä¹å¹¶ä¸ç®€å•ã€‚\n\næ‰§è¡Œæ ‘å®šä¹‰\n\n> **æ‰§è¡Œæ ‘**æ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºé€’å½’å‡½æ•°çš„æ‰§è¡Œæµç¨‹çš„æ ‘ã€‚æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºé€’å½’å‡½æ•°çš„è°ƒç”¨ã€‚å› æ­¤ï¼Œæ ‘ä¸­çš„èŠ‚ç‚¹æ€»æ•°å¯¹åº”äºæ‰§è¡ŒæœŸé—´çš„é€’å½’è°ƒç”¨çš„æ•°é‡ã€‚\n\né€’å½’å‡½æ•°çš„æ‰§è¡Œæ ‘å°†å½¢æˆ n å‰æ ‘ï¼Œå…¶ä¸­ n ä½œä¸ºé€’æ¨å…³ç³»ä¸­å‡ºç°é€’å½’çš„æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œæ–æ³¢é‚£å¥‘å‡½æ•°çš„æ‰§è¡Œå°†å½¢æˆäºŒå‰æ ‘ï¼Œä¸‹é¢çš„å›¾ç¤ºå±•ç°äº†ç”¨äºè®¡ç®—æ–æ³¢çº³å¥‘æ•° f(4) çš„æ‰§è¡Œæ ‘ã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-92d5e67cc69e6599cf921e90fb63d3f9_720w.webp)\n\n\nåœ¨ n å±‚çš„å®Œå…¨äºŒå‰æ ‘ä¸­ï¼ŒèŠ‚ç‚¹çš„æ€»æ•°ä¸º 2*n*âˆ’1ã€‚å› æ­¤ â€‹f(n)â€‹ ä¸­é€’å½’æ•°ç›®çš„ä¸Šé™ï¼ˆå°½ç®¡ä¸ä¸¥æ ¼ï¼‰ä¹Ÿæ˜¯ 2*n*âˆ’1ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä¼°è®¡ â€‹f(n)â€‹ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(2*n*)ã€‚\n\n### 3.2.é€’å½’ç©ºé—´å¤æ‚æ€§åˆ†æ\n\nåœ¨è®¡ç®—é€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦æ—¶ï¼Œåº”è¯¥è€ƒè™‘é€ æˆç©ºé—´æ¶ˆè€—çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šé€’å½’ç›¸å…³ç©ºé—´ï¼ˆrecursion related spaceï¼‰å’Œéé€’å½’ç›¸å…³ç©ºé—´ï¼ˆnon-recursion related spaceï¼‰ã€‚\n\n**é€’å½’ç›¸å…³ç©ºé—´**\n\né€’å½’ç›¸å…³ç©ºé—´æ˜¯æŒ‡ç”±é€’å½’ç›´æ¥å¼•èµ·çš„å†…å­˜å¼€é”€ï¼Œå³ç”¨äºè·Ÿè¸ªé€’å½’å‡½æ•°è°ƒç”¨çš„å †æ ˆã€‚ä¸ºäº†å®Œæˆå…¸å‹çš„å‡½æ•°è°ƒç”¨ï¼Œç³»ç»Ÿåº”è¯¥åœ¨æ ˆä¸­åˆ†é…ä¸€äº›ç©ºé—´æ¥ä¿å­˜ä¸‰ä¸ªé‡è¦ä¿¡æ¯ï¼š\n\n1. å‡½æ•°è°ƒç”¨çš„è¿”å›åœ°å€ã€‚ä¸€æ—¦å‡½æ•°è°ƒç”¨å®Œæˆï¼Œç¨‹åºåº”è¯¥çŸ¥é“è¿”å›çš„ä½ç½®ï¼Œå³å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ç‚¹ã€‚\n2. ä¼ é€’ç»™å‡½æ•°è°ƒç”¨çš„å‚æ•°ã€‚\n3. å‡½æ•°è°ƒç”¨ä¸­çš„å±€éƒ¨å˜é‡ã€‚\n\næ ˆä¸­çš„è¿™ä¸ªç©ºé—´æ˜¯å‡½æ•°è°ƒç”¨æœŸé—´äº§ç”Ÿçš„æœ€å°æˆæœ¬ã€‚ç„¶è€Œï¼Œä¸€æ—¦å®Œæˆå‡½æ•°è°ƒç”¨ï¼Œå°±ä¼šé‡Šæ”¾è¯¥ç©ºé—´ã€‚\n\nå¯¹äºé€’å½’ç®—æ³•ï¼Œå‡½æ•°è°ƒç”¨å°†è¿ç»­é“¾æ¥ç›´åˆ°å®ƒä»¬åˆ°è¾¾åŸºæœ¬æƒ…å†µï¼ˆ*ä¹Ÿç§°ä¸º* åº•å±‚æƒ…å†µï¼‰ã€‚è¿™æ„å‘³ç€ç”¨äºæ¯ä¸ªå‡½æ•°è°ƒç”¨çš„ç©ºé—´ä¹Ÿä¼šç´¯ç§¯ã€‚\n\nå¯¹äºé€’å½’ç®—æ³•ï¼Œå¦‚æœæ²¡æœ‰äº§ç”Ÿå…¶ä»–å†…å­˜æ¶ˆè€—ï¼Œåˆ™æ­¤é€’å½’å¼•èµ·çš„ç©ºé—´å°†æ˜¯ç®—æ³•çš„ç©ºé—´ä¸Šé™ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨æœ¬æ–‡ä¸€å¼€å§‹æˆ‘ä»¬æåˆ°äº†åè½¬å­—ç¬¦ä¸²ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨é¢å¤–çš„å†…å­˜ï¼Œå› ä¸ºæˆ‘ä»¬ä»…ä»…æ˜¯æ‰“å°ä¸€ä¸ªå­—ç¬¦ã€‚å¯¹äºæ¯ä¸ªé€’å½’è°ƒç”¨ï¼Œæˆ‘ä»¬å‡è®¾å®ƒå¯èƒ½éœ€è¦ä¸€ä¸ªæœ€å¤§ä¸ºæŸä¸€å¸¸é‡å€¼çš„ç©ºé—´ã€‚å¹¶ä¸”é€’å½’è°ƒç”¨æœ€å¤šå¯ä»¥é“¾æ¥ n æ¬¡ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥å­—ç¬¦ä¸²çš„å¤§å°ã€‚å› æ­¤ï¼Œè¯¥é€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(*n*)ã€‚\n\nä¸ºäº†æ›´å¥½åœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šå±•ç¤ºé€’å½’è°ƒç”¨ f(x1) -> f(x2) -> f(x3) çš„æ‰§è¡Œé¡ºåºä»¥åŠæ ˆç©ºé—´çš„åˆ†é…æƒ…å†µã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-3822068d611d10cf97f681d458bbd0e4_720w.webp)\n\næ ˆä¸­çš„ç©ºé—´å°†ä¼šåˆ†é…ç»™ f(x1) æ¥è°ƒç”¨ f(x2)ã€‚ç±»ä¼¼çš„æƒ…å†µä¹ŸåŒæ ·å‘ç”Ÿåœ¨ f(x2) ä¸­ï¼Œç³»ç»Ÿä¼šä¸º f(x3) çš„è°ƒç”¨åˆ†é…å¦ä¸€ä¸ªç©ºé—´ï¼Œæœ€ååœ¨ f(x3) ä¸­ï¼Œæˆ‘ä»¬åˆ°è¾¾åŸºæœ¬æƒ…å†µï¼Œå› æ­¤åœ¨ f(x3) ä¸­æ²¡æœ‰è¿›è¡Œè¿›ä¸€æ­¥çš„é€’å½’è°ƒç”¨ã€‚\n\næ­£æ˜¯ç”±äºè¿™äº›ä¸é€’å½’ç›¸å…³çš„ç©ºé—´æ¶ˆè€—ï¼Œæœ‰æ—¶å¯èƒ½ä¼šé‡åˆ°ç§°ä¸º[å †æ ˆæº¢å‡º](https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%A0%86%E6%A0%88%E6%BA%A2%E5%87%BA/1231765%3Ffr%3Daladdin)çš„æƒ…å†µï¼Œå…¶ä¸­ä¸ºç¨‹åºåˆ†é…çš„å †æ ˆè¾¾åˆ°å…¶æœ€å¤§ç©ºé—´é™åˆ¶å¹¶å¯¼è‡´ç¨‹åºæœ€ç»ˆå¤±è´¥ã€‚åœ¨è®¾è®¡é€’å½’ç®—æ³•æ—¶ï¼Œåº”è¯¥ä»”ç»†è¯„ä¼°åœ¨è¾“å…¥è§„æ¨¡æ‰©å¤§æ—¶æ˜¯å¦å­˜åœ¨å †æ ˆæº¢å‡ºçš„å¯èƒ½æ€§ï¼Œæ ˆæº¢å‡ºæ˜¯éå¸¸å®¹æ˜“å‡ºé”™çš„ç‚¹ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚å°†è®¨è®ºä¼˜åŒ–ç­–ç•¥ã€‚\n\n**éé€’å½’ç›¸å…³ç©ºé—´**\n\næ­£å¦‚åç§°æ‰€ç¤ºï¼Œéé€’å½’ç›¸å…³ç©ºé—´æŒ‡çš„æ˜¯ä¸é€’å½’è¿‡ç¨‹æ²¡æœ‰ç›´æ¥å…³ç³»çš„å†…å­˜ç©ºé—´ï¼Œé€šå¸¸åŒ…æ‹¬ä¸ºå…¨å±€å˜é‡åˆ†é…çš„ç©ºé—´ï¼ˆé€šå¸¸åœ¨å †ä¸­ï¼‰ã€‚\n\nä¸ç®¡æ˜¯å¦é€’å½’ï¼Œä½ éƒ½å¯èƒ½éœ€è¦åœ¨ä»»ä½•å‡½æ•°è°ƒç”¨ä¹‹å‰å°†é—®é¢˜çš„è¾“å…¥å­˜å‚¨ä¸ºå…¨å±€å˜é‡ã€‚ä½ å¯èƒ½è¿˜éœ€è¦ä¿å­˜é€’å½’è°ƒç”¨çš„ä¸­é—´ç»“æœï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å³å°†è®¨è®ºçš„**è®°å¿†åŒ–æŠ€æœ¯**ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨å¸¦æœ‰è®°å¿†åŒ–æŠ€æœ¯çš„é€’å½’ç®—æ³•è§£å†³æ–æ³¢é‚£å¥‘æ•°é—®é¢˜æ—¶,æˆ‘ä»¬ä½¿ç”¨æ˜ å°„ï¼ˆmapï¼‰æ¥è·Ÿè¸ªåœ¨é€’å½’è°ƒç”¨æœŸé—´äº§ç”Ÿçš„æ‰€æœ‰ä¸­é—´æ–æ³¢é‚£å¥‘æ•°ã€‚å› æ­¤ï¼Œåœ¨åˆ†æç©ºé—´å¤æ‚åº¦æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘åˆ°å› é‡‡ç”¨è®°å¿†åŒ–æŠ€æœ¯æ‰€å¯¼è‡´çš„ç©ºé—´æˆæœ¬ã€‚\n\n\n\n### 4.é€’å½’çš„ä¼˜åŒ–ç­–ç•¥\n\n### 4.1.æ—¶é—´ä¼˜åŒ–ç­–ç•¥ï¼šè®°å¿†åŒ–\n\né€’å½’æ˜¯ä¸€ç§ç›´è§‚è€Œæœ‰æ•ˆçš„å®ç°ç®—æ³•çš„æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ˜æ™ºåœ°ä½¿ç”¨å®ƒï¼Œå¯èƒ½ä¼šç»™æ€§èƒ½å¸¦æ¥ä¸€äº›ä¸å¸Œæœ›çš„æŸå¤±ï¼Œ*ä¾‹å¦‚*é‡å¤è®¡ç®—ã€‚ åœ¨å‰é¢æˆ‘ä»¬æåˆ°äº†å¸•æ–¯å¡ä¸‰è§’çš„é‡å¤è®¡ç®—é—®é¢˜ï¼Œå…¶ä¸­ä¸€äº›ä¸­é—´ç»“æœè¢«å¤šæ¬¡è®¡ç®—ã€‚\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥ç ”ç©¶é€’å½’å¯èƒ½å‡ºç°çš„é‡å¤è®¡ç®—é—®é¢˜ã€‚ ç„¶åæˆ‘ä»¬å°†æå‡ºä¸€ç§å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç§°ä¸ºè®°å¿†åŒ–ï¼ˆmemoizationï¼‰ï¼Œå¯ä»¥ç”¨æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚\n\nä¸ºäº†æ¼”ç¤ºé‡å¤è®¡ç®—çš„å¦ä¸€ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå¤§å¤šæ•°äººå¯èƒ½éƒ½å¾ˆç†Ÿæ‚‰çš„ä¾‹å­ï¼Œ[æ–æ³¢é‚£å¥‘æ•°](https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0)ã€‚ å¦‚æœæˆ‘ä»¬å®šä¹‰å‡½æ•° F(n) è¡¨ç¤ºåœ¨ç´¢å¼• n å¤„çš„æ–æ³¢é‚£å¥‘æ•°ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ¨å¯¼å‡ºå¦‚ä¸‹çš„é€’æ¨å…³ç³»ï¼š\n\nF(n) = F(n - 1) + F(n - 2)\n\nåŸºæœ¬æƒ…å†µï¼š\n\nF(0) = 0, F(1) = 1\n\næ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰ï¼Œå¯ä»¥å®ç°ä¸‹é¢çš„å‡½æ•°ï¼š\n\n```java\npublic static int fibonacci(int n) {\n if (n < 2) {\n return n;\n  } else {\n return fibonacci(n-1) + fibonacci(n-2);\n  }\n}\n```\n\nç°åœ¨ï¼Œå¦‚æœä½ æƒ³çŸ¥é“ F(4) æ˜¯å¤šå°‘ï¼Œä½ å¯ä»¥åº”ç”¨ä¸Šé¢çš„å…¬å¼å¹¶è¿›è¡Œå±•å¼€ï¼š\n\nF(4) = F(3) + F(2) = (F(2) + F(1)) + F(2)\n\næ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸ºäº†å¾—åˆ° f (4)çš„ç»“æœï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸Šè¿°æ¨å¯¼ä¹‹åè®¡ç®—ä¸¤æ¬¡æ•° F(2) : ç¬¬ä¸€æ¬¡åœ¨ F(4) çš„ç¬¬ä¸€æ¬¡å±•å¼€ä¸­ï¼Œç¬¬äºŒæ¬¡åœ¨ä¸­é—´ç»“æœ F(3) ä¸­ã€‚\n\nä¸‹é¢çš„æ ‘æ˜¾ç¤ºäº†åœ¨è®¡ç®— F(4) æ—¶å‘ç”Ÿçš„æ‰€æœ‰é‡å¤è®¡ç®—ï¼ˆæŒ‰é¢œè‰²åˆ†ç»„ï¼‰ã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-92d5e67cc69e6599cf921e90fb63d3f9_720w.webp)\n\n\n\nä¸ºäº†æ¶ˆé™¤ä¸Šè¿°æƒ…å†µä¸­çš„é‡å¤è®¡ç®—ï¼Œæ­£å¦‚è®¸å¤šäººå·²ç»æŒ‡å‡ºçš„é‚£æ ·ï¼Œå…¶ä¸­ä¸€ä¸ªæƒ³æ³•æ˜¯å°†ä¸­é—´ç»“æœ**å­˜å‚¨**åœ¨ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿æˆ‘ä»¬ä»¥åå¯ä»¥é‡ç”¨å®ƒä»¬ï¼Œè€Œä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚\n\nè¿™ä¸ªæƒ³æ³•ä¹Ÿè¢«ç§°ä¸º*è®°å¿†åŒ–*ï¼Œè¿™æ˜¯ä¸€ç§ç»å¸¸ä¸é€’å½’ä¸€èµ·ä½¿ç”¨çš„æŠ€æœ¯ã€‚\n\n**è®°å¿†åŒ–å®šä¹‰**\n\n> [è®°å¿†åŒ–](https://link.zhihu.com/?target=https%3A//baike.so.com/doc/4953402-5174974.html) æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¸»è¦ç”¨äº**åŠ å¿«**è®¡ç®—æœºç¨‹åºçš„é€Ÿåº¦ï¼Œæ–¹æ³•æ˜¯**å­˜å‚¨**æ˜‚è´µçš„å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œå¹¶åœ¨ç›¸åŒçš„è¾“å…¥å†æ¬¡å‡ºç°æ—¶è¿”å›ç¼“å­˜çš„ç»“æœã€‚ (æ¥æº: ç»´åŸºç™¾ç§‘)\n\nå›åˆ°æ–æ³¢é‚£å¥‘å‡½æ•° F(n)ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨æ¥è·Ÿè¸ªæ¯ä¸ªä»¥ n ä¸ºé”®çš„ F(n) çš„ç»“æœã€‚ æ•£åˆ—è¡¨ä½œä¸ºä¸€ä¸ªç¼“å­˜ï¼Œå¯ä»¥é¿å…é‡å¤è®¡ç®—ã€‚ è®°å¿†åŒ–æŠ€æœ¯æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå®ƒæ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡å¢åŠ é¢å¤–çš„ç©ºé—´ä»¥å‡å°‘è®¡ç®—æ—¶é—´ã€‚\n\nä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢æä¾›äº†å¸¦æœ‰è®°å¿†åŒ–åŠŸèƒ½çš„æ–æ³¢é‚£å¥‘æ•°åˆ—è§£å†³æ–¹æ¡ˆçš„å®ç°ã€‚\n\nä½œä¸ºä¸€ç§ç»ƒä¹ ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿è®°å¿†åŒ–æ›´åŠ é€šç”¨å’Œéä¾µå…¥æ€§ï¼Œå³åº”ç”¨è®°å¿†åŒ–æŠ€æœ¯è€Œä¸æ”¹å˜åŸæ¥çš„åŠŸèƒ½ã€‚\n\n```java\nimport java.util.HashMap;\n\npublic class Main {\n\n  HashMap<Integer, Integer> cache = new HashMap<Integer, Integer>();\n\n private int fib(int N) {\n if (cache.containsKey(N)) {\n return cache.get(N);\n    }\n int result;\n if (N < 2) {\n      result = N;\n    } else {\n      result = fib(N-1) + fib(N-2);\n    }\n // keep the result in cache.\n    cache.put(N, result);\n return result;\n  }\n}\n```\n\næ–æ³¢é‚£å¥‘æ•°åº”ç”¨çš„ä¸€ä¸ªç»å…¸é—®é¢˜æ˜¯çˆ¬æ¥¼æ¢¯ï¼Œæˆ‘ä»¬åœ¨ç¬¬äº”èŠ‚å†åˆ†æã€‚\n\né€šè¿‡è®°å¿†åŒ–æŠ€æœ¯ï¼Œæˆ‘ä»¬ä¿å­˜æ¯ä¸ªç´¢å¼• n å¯¹åº”çš„çš„æ–æ³¢é‚£å¥‘æ•°çš„ç»“æœã€‚æˆ‘ä»¬ç¡®ä¿¡æ¯ä¸ªæ–æ³¢é‚£å¥‘æ•°çš„è®¡ç®—åªä¼šå‘ç”Ÿä¸€æ¬¡ã€‚è€Œä»é€’æ¨å…³ç³»æ¥çœ‹ï¼Œæ–æ³¢çº³å¥‘æ•° f(n) å°†å–å†³äºå…¶æ‰€æœ‰ n-1 ä¸ªå…ˆéªŒæ–æ³¢çº³å¥‘æ•°ã€‚ç»“æœï¼Œè®¡ç®— f(n) çš„é€’å½’å°†è¢«è°ƒç”¨ n-1 æ¬¡ä»¥è®¡ç®—å®ƒæ‰€ä¾èµ–çš„æ‰€æœ‰å…ˆéªŒæ•°å­—ã€‚\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸‹é‡‡ç”¨äº†è®°å¿†åŒ–æŠ€æœ¯ä¼˜åŒ–åçš„æ—¶é—´å¤æ‚åº¦ï¼Œå³ O(1)âˆ—*n*=O(*n*)ã€‚å¯ä»¥å¾—å‡ºè®°å¿†åŒ–æŠ€æœ¯ä¸ä»…å¯ä»¥ä¼˜åŒ–ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿˜å¯ä»¥ç®€åŒ–æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—ã€‚\n\n### 4.2.ç©ºé—´ä¼˜åŒ–ç­–ç•¥ï¼šå°¾é€’å½’\n\nä¸Šä¸€èŠ‚æˆ‘ä»¬è®¨è®ºäº†é€’å½’ç©ºé—´å¤æ‚æ€§åˆ†æè¯é¢˜ï¼Œä»ä¸­æˆ‘ä»¬äº†è§£åˆ°é€’å½’è°ƒç”¨åœ¨ç³»ç»Ÿè°ƒç”¨æ ˆä¸Šä¼šäº§ç”Ÿé¢å¤–ç©ºé—´ï¼Œå¦‚æœé€’å½’è°ƒç”¨å±‚çº§å¾ˆæ·±ï¼Œç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¾ˆå¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæœ‰ä¸€ç§ç§°ä¸ºå°¾é€’å½’çš„ç‰¹æ®Šé€’å½’ï¼Œå®ƒå¯ä»¥æ§åˆ¶é€’å½’å¯¼è‡´ç©ºé—´å¼€é”€çš„å½±å“ã€‚\n\n**å°¾é€’å½’å®šä¹‰**\n\n> å°¾é€’å½’å‡½æ•°æ˜¯é€’å½’å‡½æ•°çš„ä¸€ç§ï¼Œå…¶ä¸­é€’å½’è°ƒç”¨æ˜¯é€’å½’å‡½æ•°ä¸­çš„æœ€åä¸€æ¡æŒ‡ä»¤ã€‚å¹¶ä¸”åœ¨å‡½æ•°ä¸­åº”è¯¥åªæœ‰ä¸€æ¬¡é€’å½’è°ƒç”¨ã€‚\n\nå°¾é€’å½’çš„å¥½å¤„æ˜¯ï¼Œå®ƒå¯ä»¥é¿å…é€’å½’è°ƒç”¨æœŸé—´æ ˆç©ºé—´å¼€é”€çš„ç´¯ç§¯ï¼Œå› ä¸ºç³»ç»Ÿå¯ä»¥ä¸ºæ¯ä¸ªé€’å½’è°ƒç”¨é‡ç”¨æ ˆä¸­çš„å›ºå®šç©ºé—´ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç¨‹åºæ‰§è¡Œåˆ°é€’å½’å‡½æ•°æœ€åä¸€æ¡é€’å½’è°ƒç”¨æŒ‡ä»¤æ—¶å›æ”¶äº†å½“å‰çš„æ ˆç©ºé—´ï¼ˆå…¶å®æ˜¯å¤ç”¨äº†å½“å‰çš„æ ˆç©ºé—´ï¼‰ï¼Œçˆ½æ­ªæ­ªã€‚\n\næˆ‘ä»¬åœ¨ç¬¬äº”éƒ¨åˆ†å°†çœ‹åˆ°å°¾é€’å½’ä¼˜åŒ–é˜¶ä¹˜è¿ç®—çš„ä¾‹å­ã€‚\n\n### 5.é‡‡ç”¨é€’å½’è§£æ³•çš„å‡ ä¸ªç»å…¸é—®é¢˜\n\né€’å½’åœ¨é€’æ¨å…³ç³»çš„æ•°å­¦é—®é¢˜ä¸Šåº”ç”¨å¹¿æ³›ï¼Œä½¿ç”¨é€’å½’æ³•å¯ä»¥è§£å†³å¾ˆå¤šè¶£å‘³é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹éƒ½æœ‰å“ªäº›ç»å…¸é—®é¢˜ã€‚\n\n### 5.1.åè½¬å­—ç¬¦ä¸²\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ char[] çš„å½¢å¼ç»™å‡ºã€‚\n\nä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»**[åŸåœ°](https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95)ä¿®æ”¹è¾“å…¥æ•°ç»„**ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚\n\nä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ [ASCII](https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/ASCII) ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n**è¾“å…¥ï¼š**[\"h\",\"e\",\"l\",\"l\",\"o\"]\n\n**è¾“å‡ºï¼š**[\"o\",\"l\",\"l\",\"e\",\"h\"]\n\n**ç¤ºä¾‹ 2ï¼š**\n\n**è¾“å…¥ï¼š**[\"H\",\"a\",\"n\",\"n\",\"a\",\"h\"]\n\n**è¾“å‡ºï¼š**[\"h\",\"a\",\"n\",\"n\",\"a\",\"H\"]\n\n\n\nåˆ†æï¼šæ­¤é—®é¢˜æ˜¯æ ¹æ®é€’å½’è°ƒç”¨æ ˆçš„ç‰¹æ€§åšåè¿›å…ˆå‡ºåè½¬ã€‚\n\nä»£ç ï¼š\n\n```java\n public void reverseString(char[] s) {\n        help(s, 0, s.length - 1);\n    }\n\n\n private void help(char[] s, int left, int right) {\n if (left >= right) return;\n        exch(s, left, right);\n        help(s, ++left, --right);\n    }\n\n\n private void exch(char[] a, int i, int j) {\n char swap = a[i];\n        a[i] = a[j];\n        a[j] = swap;\n    }\n```\n\n### 5.2.ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹\n\nç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚\n\n**ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼**ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚\n\n**ç¤ºä¾‹:**\n\nç»™å®š\n\n```\n1->2->3->4\n```\n\n, ä½ åº”è¯¥è¿”å›\n\n```\n2->1->4->3\n```\n\n\n\nä»£ç ï¼š\n\n```java\n public ListNode swapPairs(ListNode head) {\n    if (head == null || head.next == null) return head;\n        int temp = head.val;\n        head.val = head.next.val;\n        head.next.val = temp;\n \n        ListNode nextHead = swapPairs(head.next.next);\n        head.next.next = nextHead;\n \n return head;\n    }\n```\n\n\n\n### 5.3.æ¨è¾‰ä¸‰è§’\n\nç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° *numRowsï¼Œ*ç”Ÿæˆæ¨è¾‰ä¸‰è§’çš„å‰ *numRows* è¡Œã€‚\n\n\n\n![åŠ¨å›¾å°é¢](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-99fd119be3ca7616ae635b28e7181f7e_b.jpg)\n\n\n\n\n\nåœ¨æ¨è¾‰ä¸‰è§’ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚\n\n**ç¤ºä¾‹:**\n\n**è¾“å…¥:** 5\n\n**è¾“å‡º:**\n\n[\n\n[1],\n\n[1,1],\n\n[1,2,1],\n\n[1,3,3,1],\n\n[1,4,6,4,1]\n\n]\n\n\n\nåˆ†æï¼šå…¸å‹çš„å…·æœ‰é€’æ¨å…³ç³»çš„æ•°æ®é—®é¢˜ï¼Œæ³¨æ„é€šè¿‡è®°å¿†åŒ–ä¼˜åŒ–ã€‚\n\nä»£ç ï¼š\n\n```java\n public List<List<Integer>> generate(int numRows) {\n if (numRows == 0) return Collections.emptyList();\n \n int[][] mem = new int[numRows][numRows];\n        List<List<Integer>> res = new ArrayList<>(numRows);\n for (int i = 0; i < numRows; i++) {\n            List<Integer> subList = new ArrayList<>(i + 1); \n for (int j = 0; j <=i; j++)\n                subList.add(f(i, j, mem));\n            res.add(subList);\n        }\n return res;\n    }\n \n private int f(int i, int j, int[][] mem) {\n if (mem[i][j] != 0) return mem[i][j];\n if (j == 0 || j == i) {\n            mem[i][j] = 1;\n return mem[i][j];\n        }\n        mem[i][j] = f(i - 1, j - 1, mem) + f(i - 1, j, mem);\n return mem[i][j];\n    }\n```\n\n### 5.4.åè½¬é“¾è¡¨\n\nåè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚\n\n**ç¤ºä¾‹:**\n\n**è¾“å…¥:** 1->2->3->4->5->NULL\n\n**è¾“å‡º:** 5->4->3->2->1->NULL\n\n**è¿›é˜¶:**\n\nä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ\n\nåˆ†æï¼šé“¾è¡¨å’Œæ ‘æ˜¯å…·æœ‰é€’å½’ç»“æ„çš„æ•°æ®ç»“æ„ã€‚\n\nä»£ç ï¼š\n\n```java\n    public ListNode reverseList(ListNode head) {\n if (head == null || head.next == null) return head;\n        ListNode p = reverseList(head.next);\n        head.next.next = head;\n        head.next = null;\n return p;\n    }\n```\n\n\n\n### 5.5.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\n\nå°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ **å‡åº** é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚\n\n**ç¤ºä¾‹ï¼š**\n\n**è¾“å…¥ï¼š**1->2->4, 1->3->4\n\n**è¾“å‡ºï¼š**1->1->2->3->4->4\n\n\n\nåˆ†æï¼šé“¾è¡¨æ˜¯å…¸å‹çš„å…·æœ‰é€’å½’å±æ€§çš„æ•°æ®ç»“æ„ï¼Œé“¾è¡¨æ“ä½œé—®é¢˜ä¸€èˆ¬éƒ½å¯ä»¥å°†é—®é¢˜æœ¬èº«æ‹†åˆ†æˆå­é—®é¢˜ï¼Œç›´åˆ°ä¸èƒ½æ‹†è§£ä¸ºæ­¢ï¼Œé€šè¿‡é€’å½’å¾—è§£ã€‚\n\nä»£ç ï¼š\n\n```java\n public ListNode mergeTwoLists(ListNode l1, ListNode l2) {\n if (l1 == null) return l2;\n if (l2 == null) return l1;\n \n if (l1.val < l2.val) {\n            ListNode subList = mergeTwoLists(l1.next, l2);\n            l1.next = subList;\n return l1;\n        }\n else { \n            ListNode subList = mergeTwoLists(l1, l2.next);\n            l2.next = subList;\n return l2;\n        }\n    }\n```\n\n\n\n### 5.6.**æ–æ³¢é‚£å¥‘æ•°**\n\n**æ–æ³¢é‚£å¥‘æ•°**ï¼Œé€šå¸¸ç”¨ F(n) è¡¨ç¤ºï¼Œå½¢æˆçš„åºåˆ—ç§°ä¸º**æ–æ³¢é‚£å¥‘æ•°åˆ—**ã€‚è¯¥æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œåé¢çš„æ¯ä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰é¢ä¸¤é¡¹æ•°å­—çš„å’Œã€‚ä¹Ÿå°±æ˜¯ï¼š\n\nF(0) = 0, F(1) = 1\n\nF(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N > 1.\n\nç»™å®š Nï¼Œè®¡ç®— F(N)ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n**è¾“å…¥ï¼š**2\n\n**è¾“å‡ºï¼š**1\n\n**è§£é‡Šï¼š**F(2) = F(1) + F(0) = 1 + 0 = 1.\n\n**ç¤ºä¾‹ 2ï¼š**\n\n**è¾“å…¥ï¼š**3\n\n**è¾“å‡ºï¼š**2\n\n**è§£é‡Šï¼š**F(3) = F(2) + F(1) = 1 + 1 = 2.\n\n**ç¤ºä¾‹ 3ï¼š**\n\n**è¾“å…¥ï¼š**4\n\n**è¾“å‡ºï¼š**3\n\n**è§£é‡Šï¼š**F(4) = F(3) + F(2) = 2 + 1 = 3.\n\n**æç¤ºï¼š**\n\n- 0 â‰¤ N â‰¤ 30\n\n\n\nåˆ†æï¼šé€’å½’è€ƒè™‘è®°å¿†åŒ–ä¼˜åŒ–\n\nä»£ç ï¼š\n\n```java\n public int fib(int N) {\n if (N <= 0) return 0;\n int[] memory = new int[N + 1];\n return help(N, memory);\n    }\n \n private int help(int n, int[] memory) {\n if (n == 1 || n == 2) return 1;\n if (memory[n] != 0) return memory[n];\n else memory[n] = help(n - 1, memory) + help(n - 2, memory);\n return memory[n];\n    }  \n```\n\n\n\n### 5.7.çˆ¬æ¥¼æ¢¯\n\nå‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ *n* é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚\n\næ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ\n\n**æ³¨æ„ï¼š**ç»™å®š *n* æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n**è¾“å…¥ï¼š** 2\n\n**è¾“å‡ºï¼š** 2\n\n**è§£é‡Šï¼š** æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚\n\n\\1. 1 é˜¶ + 1 é˜¶\n\n\\2. 2 é˜¶\n\n**ç¤ºä¾‹ 2ï¼š**\n\n**è¾“å…¥ï¼š** 3\n\n**è¾“å‡ºï¼š** 3\n\n**è§£é‡Šï¼š** æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚\n\n\\1. 1 é˜¶ + 1 é˜¶ + 1 é˜¶\n\n\\2. 1 é˜¶ + 2 é˜¶\n\n\\3. 2 é˜¶ + 1 é˜¶\n\n\n\nåˆ†æï¼šè¯¥é—®é¢˜é€šè¿‡è§„å¾‹å‘ç°é€’æ¨å…³ç³»å°±æ˜¯æ–æ³¢é‚£å¥‘æ•°ã€‚\n\nä»£ç ï¼š\n\n```java\n public int climbStairs(int n) {\n int[] mem = new int[n + 1];\n return help(n, mem);\n    }\n \n private int help(int n, int[] mem) {\n if (n <= 0) return 0;\n if (mem[n] > 0) return mem[n];\n \n if (n < 4) {\n            mem[n] = n;\n        }\n else {\n            mem[n] = help(n - 1, mem) + help(n - 2, mem);\n        }\n return mem[n];\n    }\n```\n\n### 5.8.äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚\n\näºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚\n\n**è¯´æ˜:** å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n\nç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ\n\n3\n\n/ \\\n\n9 20\n\n/ \\\n\n15 7\n\nè¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚\n\n\n\nåˆ†æï¼šäºŒå‰æ ‘æ˜¯å…¸å‹çš„å…·æœ‰é€’å½’å±æ€§çš„æ•°æ®ç»“æ„ã€‚\n\nä»£ç ï¼š\n\n```java\n public int maxDepth(TreeNode root) {\n if (root == null) return 0;\n if (root.left == null && root.right == null) return 1;\n return Math.max(maxDepth(root.left), maxDepth(root.right)) + 1;\n    }\n```\n\n\n\n### 5.9. è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚\n\nå®ç° [pow(](https://link.zhihu.com/?target=https%3A//www.cplusplus.com/reference/valarray/pow/)*[x](https://link.zhihu.com/?target=https%3A//www.cplusplus.com/reference/valarray/pow/)*[, ](https://link.zhihu.com/?target=https%3A//www.cplusplus.com/reference/valarray/pow/)*[n](https://link.zhihu.com/?target=https%3A//www.cplusplus.com/reference/valarray/pow/)*[)](https://link.zhihu.com/?target=https%3A//www.cplusplus.com/reference/valarray/pow/) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n**è¾“å…¥:** 2.00000, 10\n\n**è¾“å‡º:** 1024.00000\n\n**ç¤ºä¾‹ 2:**\n\n**è¾“å…¥:** 2.10000, 3\n\n**è¾“å‡º:** 9.26100\n\n**ç¤ºä¾‹ 3:**\n\n**è¾“å…¥:** 2.00000, -2\n\n**è¾“å‡º:** 0.25000\n\n**è§£é‡Š:** 2-2 = 1/22 = 1/4 = 0.25\n\n**è¯´æ˜:**\n\n- -100.0 < *x* < 100.0\n- *n* æ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’231, 231 âˆ’ 1] ã€‚\n\n\n\nåˆ†æï¼šnå¯èƒ½å¾ˆå¤§ï¼Œéœ€è¦é˜²æ­¢æ ˆæº¢å‡ºï¼Œå¯æ€è€ƒå°¾é€’å½’å®ç°ã€‚\n\nä»£ç ï¼š\n\n```java\n public double myPow(double x, int n) {\n return n > 0 ? help(x, n) : 1.0 / help(x, -n);\n    }\n \n private double help(double x, int n) {\n if (n == 0) return 1;\n return n % 2 == 0 ? help(x * x, n / 2) : x * help(x * x, n / 2);\n    }\n```\n\n\n\n### 5.10.ç¬¬Kä¸ªè¯­æ³•ç¬¦å·\n\nåœ¨ç¬¬ä¸€è¡Œæˆ‘ä»¬å†™ä¸Šä¸€ä¸ª 0ã€‚æ¥ä¸‹æ¥çš„æ¯ä¸€è¡Œï¼Œå°†å‰ä¸€è¡Œä¸­çš„0æ›¿æ¢ä¸º01ï¼Œ1æ›¿æ¢ä¸º10ã€‚\n\nç»™å®šè¡Œæ•° N å’Œåºæ•° Kï¼Œè¿”å›ç¬¬ N è¡Œä¸­ç¬¬ Kä¸ªå­—ç¬¦ã€‚ï¼ˆKä»1å¼€å§‹ï¼‰\n\n\n\n**ä¾‹å­:**\n\n**è¾“å…¥:** N = 1, K = 1\n\n**è¾“å‡º:** 0\n\n\n\n**è¾“å…¥:** N = 2, K = 1\n\n**è¾“å‡º:** 0\n\n\n\n**è¾“å…¥:** N = 2, K = 2\n\n**è¾“å‡º:** 1\n\n\n\n**è¾“å…¥:** N = 4, K = 5\n\n**è¾“å‡º:** 1\n\n\n\n**è§£é‡Š:**\n\nç¬¬ä¸€è¡Œ: 0\n\nç¬¬äºŒè¡Œ: 01\n\nç¬¬ä¸‰è¡Œ: 0110\n\nç¬¬å››è¡Œ: 01101001\n\n\n\n**æ³¨æ„ï¼š**\n\n1. N çš„èŒƒå›´ [1, 30].\n2. K çš„èŒƒå›´ [1, 2^(N-1)].\n\n\n\nåˆ†æï¼šè¯†åˆ«å…·æœ‰é€’å½’å…³ç³»é—®é¢˜\n\nä»£ç ï¼š\n\n```java\n public int kthGrammar(int N, int K) {\n if (N == 1 && K == 1) return 0;\n \n int rmd = K % 2;  \n int p = kthGrammar(N - 1, rmd == 0 ? K / 2 : (K + 1) / 2);\n if (p == 0) return rmd == 0 ? 1 : 0;\n else return rmd == 0 ? 0 : 1;\n    }\n```\n\n\n\n### æ€»ç»“\n\nç°åœ¨ï¼Œæˆ‘ä»¬æ›´åŠ ç›¸ä¿¡é€’å½’æ˜¯ä¸€ç§å¼ºå¤§çš„æŠ€æœ¯ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸€ç§ä¼˜é›…è€Œæœ‰æ•ˆçš„æ–¹å¼è§£å†³è®¸å¤šé—®é¢˜ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿä¸æ˜¯è§£å†³ä»»åŠ¡é—®é¢˜çš„çµä¸¹å¦™è¯ã€‚ç”±äºæ—¶é—´æˆ–ç©ºé—´çš„é™åˆ¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥ç”¨é€’å½’æ¥è§£å†³ã€‚é€’å½’æœ¬èº«å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›ä¸å¸Œæœ›çœ‹åˆ°çš„å‰¯ä½œç”¨ï¼Œå¦‚æ ˆæº¢å‡ºã€‚\n\næœ‰æ—¶ï¼Œåœ¨è§£å†³å®é™…é—®é¢˜æ—¶ä¹ä¸€çœ‹ï¼Œæˆ‘ä»¬å¹¶ä¸æ¸…æ¥šæ˜¯å¦å¯ä»¥åº”ç”¨é€’å½’ç®—æ³•æ¥è§£å†³é—®é¢˜ã€‚ç„¶è€Œï¼Œç”±äºé€’å½’çš„é€’æ¨æ€§è´¨ä¸æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„æ•°å­¦éå¸¸æ¥è¿‘ï¼Œç”¨æ•°å­¦å…¬å¼æ¥æ¨å¯¼æŸäº›å…³ç³»æ€»æ˜¯æœ‰å¸®åŠ©çš„ï¼Œä¹Ÿå°±æ˜¯è¯´**å†™å‡ºé€’æ¨å…³ç³»å’ŒåŸºæœ¬æƒ…å†µ**æ˜¯ä½¿ç”¨é€’å½’ç®—æ³•çš„å‰ç½®æ¡ä»¶ã€‚\n\nåªè¦æœ‰å¯èƒ½ï¼Œå°±åº”ç”¨**è®°å¿†åŒ–**ã€‚åœ¨èµ·è‰é€’å½’ç®—æ³•æ—¶ï¼Œå¯ä»¥ä»æœ€ç®€å•çš„ç­–ç•¥å¼€å§‹ã€‚æœ‰æ—¶ï¼Œåœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°é‡å¤è®¡ç®—çš„æƒ…å†µï¼Œä¾‹å¦‚æ–æ³¢çº³å¥‘æ•°ï¼ˆFibonacciï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°è¯•åº”ç”¨ Memoization æŠ€æœ¯ï¼Œå®ƒå°†ä¸­é—´ç»“æœå­˜å‚¨åœ¨ç¼“å­˜ä¸­ä¾›ä»¥åé‡ç”¨ï¼Œå®ƒå¯ä»¥åœ¨ç©ºé—´å¤æ‚æ€§ä¸Šç¨åŠ æŠ˜ä¸­ï¼Œä»è€Œæå¤§åœ°æé«˜æ—¶é—´å¤æ‚æ€§ï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…ä»£ä»·è¾ƒé«˜çš„é‡å¤è®¡ç®—ã€‚\n\nå½“å †æ ˆæº¢å‡ºæ—¶ï¼Œ**å°¾é€’å½’**å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚\n\nä½¿ç”¨é€’å½’å®ç°ç®—æ³•é€šå¸¸æœ‰å‡ ç§æ–¹æ³•ã€‚å°¾é€’å½’æ˜¯æˆ‘ä»¬å¯ä»¥å®ç°çš„é€’å½’çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚ä¸è®°å¿†åŒ–æŠ€æœ¯ä¸åŒçš„æ˜¯ï¼Œå°¾é€’å½’é€šè¿‡æ¶ˆé™¤é€’å½’å¸¦æ¥çš„å †æ ˆå¼€é”€ï¼Œä¼˜åŒ–äº†ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæœ‰äº†å°¾é€’å½’ï¼Œå°±å¯ä»¥é¿å…ç»å¸¸ä¼´éšä¸€èˆ¬é€’å½’è€Œæ¥çš„å †æ ˆæº¢å‡ºé—®é¢˜ï¼Œè€Œå°¾é€’å½’çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œä¸éå°¾é€’å½’ç›¸æ¯”ï¼Œå°¾éƒ¨é€’å½’æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚è¿™æ˜¯ç”±äºå°¾é€’å½’ä¸å­˜åœ¨è°ƒç”¨åä¾èµ–ï¼ˆå³é€’å½’è°ƒç”¨æ˜¯å‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªåŠ¨ä½œï¼‰ï¼Œè¿™ä¸€ç‚¹ä¸åŒäºéå°¾é€’å½’ï¼Œå› æ­¤ï¼Œåªè¦æœ‰å¯èƒ½ï¼Œå°±åº”è¯¥å°½é‡è¿ç”¨å°¾é€’å½’ã€‚\n\nè½¬è½½æ¥è‡ªçŸ¥ä¹: [å…¨é¢ç†è§£é€’å½’](https://zhuanlan.zhihu.com/p/150562212)","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"javaä¸­spiçš„ç†è§£","url":"/2023/06/28/javaä¸­spiçš„ç†è§£/","content":"\n# ç®€ä»‹\n\n`spi`å¯ä»¥ç†è§£ä¸ºä¸€ç§æ¥å£ï¼Œå’Œ`api`ç±»ä¼¼ï¼Œä½†æ˜¯å’Œ`api`æœ‰ä¸åŒã€‚åœ¨å®ç°æ¥å£çš„æ¥å£è°ƒç”¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰æ¥å£çš„å®ç°æ–¹å’Œæ¥å£çš„è°ƒç”¨æ–¹ï¼Œä¸åŒç‚¹å°±åœ¨äº`api`ä¸­çš„æ¥å£æ˜¯æŒ‰ç…§å®ç°æ–¹å®ç°çš„ï¼Œç„¶åè°ƒç”¨è€…è°ƒç”¨æ¥å£æ–¹æ³•ã€‚`spi`æ˜¯æŒ‰ç…§è°ƒç”¨æ–¹è®¾è®¡çš„æ¥å£åè®®ï¼Œå®ç°æ–¹æŒ‰ç…§è¿™ä¸ªåè®®å®Œæˆæ¥å£æ–¹æ³•ã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1ebd1df862c34880bc26b9d494535b3dtplv-k3u1fbpfcp-watermark.png)\n\n\n\n# å®æˆ˜æ¼”ç¤º\n\nSLF4J ï¼ˆSimple Logging Facade for Javaï¼‰æ˜¯ Java çš„ä¸€ä¸ªæ—¥å¿—é—¨é¢ï¼ˆæ¥å£ï¼‰ï¼Œå…¶å…·ä½“å®ç°æœ‰å‡ ç§ï¼Œæ¯”å¦‚ï¼šLogbackã€Log4jã€Log4j2 ç­‰ç­‰ï¼Œè€Œä¸”è¿˜å¯ä»¥åˆ‡æ¢ï¼Œåœ¨åˆ‡æ¢æ—¥å¿—å…·ä½“å®ç°çš„æ—¶å€™æˆ‘ä»¬æ˜¯ä¸éœ€è¦æ›´æ”¹é¡¹ç›®ä»£ç çš„ï¼Œåªéœ€è¦åœ¨ Maven ä¾èµ–é‡Œé¢ä¿®æ”¹ä¸€äº› pom ä¾èµ–å°±å¥½äº†ã€‚\n\n![img](https://oss.javaguide.cn/github/javaguide/java/basis/spi/image-20220723213306039-165858318917813.png)\n\nè¿™å°±æ˜¯ä¾èµ– SPI æœºåˆ¶å®ç°çš„ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬çš„æ—¥å¿—æ¡†æ¶ã€‚\n\n## Service Provider Interface\n\næ–°å»ºä¸€ä¸ª Java é¡¹ç›® `service-provider-interface` ç›®å½•ç»“æ„å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„ç›´æ¥æ–°å»º Java é¡¹ç›®å°±å¥½äº†ï¼Œä¸ç”¨æ–°å»º Maven é¡¹ç›®ï¼ŒMaven é¡¹ç›®ä¼šæ¶‰åŠåˆ°ä¸€äº›ç¼–è¯‘é…ç½®ï¼Œå¦‚æœæœ‰ç§æœçš„è¯ï¼Œç›´æ¥ deploy ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æ²¡æœ‰çš„è¯ï¼Œåœ¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚ï¼‰\n\n\n\n```text\nâ”‚  service-provider-interface.iml\nâ”‚\nâ”œâ”€.idea\nâ”‚  â”‚  .gitignore\nâ”‚  â”‚  misc.xml\nâ”‚  â”‚  modules.xml\nâ”‚  â””â”€ workspace.xml\nâ”‚\nâ””â”€src\n    â””â”€edu\n        â””â”€jiangxuan\n            â””â”€up\n                â””â”€spi\n                        Logger.java\n                        LoggerService.java\n                        Main.class\n```\n\næ–°å»º `Logger` æ¥å£ï¼Œè¿™ä¸ªå°±æ˜¯ SPI ï¼Œ æœåŠ¡æä¾›è€…æ¥å£ï¼Œåé¢çš„æœåŠ¡æä¾›è€…å°±è¦é’ˆå¯¹è¿™ä¸ªæ¥å£è¿›è¡Œå®ç°ã€‚\n\n\n\n```java\npackage edu.jiangxuan.up.spi;\n\npublic interface Logger {\n    void info(String msg);\n    void debug(String msg);\n}\n```\n\næ¥ä¸‹æ¥å°±æ˜¯ `LoggerService` ç±»ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ä¸ºæœåŠ¡ä½¿ç”¨è€…ï¼ˆè°ƒç”¨æ–¹ï¼‰æä¾›ç‰¹å®šåŠŸèƒ½çš„ã€‚è¿™ä¸ªç±»ä¹Ÿæ˜¯å®ç° Java SPI æœºåˆ¶çš„å…³é”®æ‰€åœ¨ï¼Œå¦‚æœå­˜åœ¨ç–‘æƒ‘çš„è¯å¯ä»¥å…ˆå¾€åé¢ç»§ç»­çœ‹ã€‚\n\n\n\n```java\npackage edu.jiangxuan.up.spi;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.ServiceLoader;\n\npublic class LoggerService {\n    private static final LoggerService SERVICE = new LoggerService();\n\n    private final Logger logger;\n\n    private final List<Logger> loggerList;\n\n    private LoggerService() {\n        ServiceLoader<Logger> loader = ServiceLoader.load(Logger.class);\n        List<Logger> list = new ArrayList<>();\n        for (Logger log : loader) {\n            list.add(log);\n        }\n        // LoggerList æ˜¯æ‰€æœ‰ ServiceProvider\n        loggerList = list;\n        if (!list.isEmpty()) {\n            // Logger åªå–ä¸€ä¸ª\n            logger = list.get(0);\n        } else {\n            logger = null;\n        }\n    }\n\n    public static LoggerService getService() {\n        return SERVICE;\n    }\n\n    public void info(String msg) {\n        if (logger == null) {\n            System.out.println(\"info ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€…\");\n        } else {\n            logger.info(msg);\n        }\n    }\n\n    public void debug(String msg) {\n        if (loggerList.isEmpty()) {\n            System.out.println(\"debug ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€…\");\n        }\n        loggerList.forEach(log -> log.debug(msg));\n    }\n}\n```\n\næ–°å»º `Main` ç±»ï¼ˆæœåŠ¡ä½¿ç”¨è€…ï¼Œè°ƒç”¨æ–¹ï¼‰ï¼Œå¯åŠ¨ç¨‹åºæŸ¥çœ‹ç»“æœã€‚\n\n\n\n```java\npackage org.spi.service;\n\npublic class Main {\n    public static void main(String[] args) {\n        LoggerService service = LoggerService.getService();\n\n        service.info(\"Hello SPI\");\n        service.debug(\"Hello SPI\");\n    }\n}\n```\n\nç¨‹åºç»“æœï¼š\n\n> info ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€… debug ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€…\n\næ­¤æ—¶æˆ‘ä»¬åªæ˜¯ç©ºæœ‰æ¥å£ï¼Œå¹¶æ²¡æœ‰ä¸º `Logger` æ¥å£æä¾›ä»»ä½•çš„å®ç°ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸­æ²¡æœ‰æŒ‰ç…§é¢„æœŸæ‰“å°ç›¸åº”çš„ç»“æœã€‚\n\nä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤æˆ–è€…ç›´æ¥ä½¿ç”¨ IDEA å°†æ•´ä¸ªç¨‹åºç›´æ¥æ‰“åŒ…æˆ jar åŒ…ã€‚\n\n## Service Provider\n\næ¥ä¸‹æ¥æ–°å»ºä¸€ä¸ªé¡¹ç›®ç”¨æ¥å®ç° `Logger` æ¥å£\n\næ–°å»ºé¡¹ç›® `service-provider` ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n\n\n\n```text\nâ”‚  service-provider.iml\nâ”‚\nâ”œâ”€.idea\nâ”‚  â”‚  .gitignore\nâ”‚  â”‚  misc.xml\nâ”‚  â”‚  modules.xml\nâ”‚  â””â”€ workspace.xml\nâ”‚\nâ”œâ”€lib\nâ”‚      service-provider-interface.jar\n|\nâ””â”€src\n    â”œâ”€edu\n    â”‚  â””â”€jiangxuan\n    â”‚      â””â”€up\n    â”‚          â””â”€spi\n    â”‚              â””â”€service\n    â”‚                      Logback.java\n    â”‚\n    â””â”€META-INF\n        â””â”€services\n                edu.jiangxuan.up.spi.Logger\n```\n\næ–°å»º `Logback` ç±»\n\n\n\n```java\npackage edu.jiangxuan.up.spi.service;\n\nimport edu.jiangxuan.up.spi.Logger;\n\npublic class Logback implements Logger {\n    @Override\n    public void info(String s) {\n        System.out.println(\"Logback info æ‰“å°æ—¥å¿—ï¼š\" + s);\n    }\n\n    @Override\n    public void debug(String s) {\n        System.out.println(\"Logback debug æ‰“å°æ—¥å¿—ï¼š\" + s);\n    }\n}\n```\n\nå°† `service-provider-interface` çš„ jar å¯¼å…¥é¡¹ç›®ä¸­.\n\n> å®ç° `Logger` æ¥å£ï¼Œåœ¨ `src` ç›®å½•ä¸‹æ–°å»º `META-INF/services` æ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å»ºæ–‡ä»¶ `edu.jiangxuan.up.spi.Logger` ï¼ˆSPI çš„å…¨ç±»åï¼‰ï¼Œæ–‡ä»¶é‡Œé¢çš„å†…å®¹æ˜¯ï¼š`edu.jiangxuan.up.spi.service.Logback` ï¼ˆLogback çš„å…¨ç±»åï¼Œå³ SPI çš„å®ç°ç±»çš„åŒ…å + ç±»åï¼‰ã€‚\n\n**è¿™æ˜¯ JDK SPI æœºåˆ¶ ServiceLoader çº¦å®šå¥½çš„æ ‡å‡†ã€‚**\n\nè¿™é‡Œå…ˆå¤§æ¦‚è§£é‡Šä¸€ä¸‹ï¼šJava ä¸­çš„ SPI æœºåˆ¶å°±æ˜¯åœ¨æ¯æ¬¡ç±»åŠ è½½çš„æ—¶å€™ä¼šå…ˆå»æ‰¾åˆ° class ç›¸å¯¹ç›®å½•ä¸‹çš„ `META-INF` æ–‡ä»¶å¤¹ä¸‹çš„ services æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œå°†è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶å…ˆåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åæ ¹æ®è¿™äº›æ–‡ä»¶çš„æ–‡ä»¶åå’Œé‡Œé¢çš„æ–‡ä»¶å†…å®¹æ‰¾åˆ°ç›¸åº”æ¥å£çš„å…·ä½“å®ç°ç±»ï¼Œæ‰¾åˆ°å®ç°ç±»åå°±å¯ä»¥é€šè¿‡åå°„å»ç”Ÿæˆå¯¹åº”çš„å¯¹è±¡ï¼Œä¿å­˜åœ¨ä¸€ä¸ª list åˆ—è¡¨é‡Œé¢ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿­ä»£æˆ–è€…éå†çš„æ–¹å¼æ‹¿åˆ°å¯¹åº”çš„å®ä¾‹å¯¹è±¡ï¼Œç”Ÿæˆä¸åŒçš„å®ç°ã€‚\n\næ‰€ä»¥ä¼šæå‡ºä¸€äº›è§„èŒƒè¦æ±‚ï¼šæ–‡ä»¶åä¸€å®šè¦æ˜¯æ¥å£çš„å…¨ç±»åï¼Œç„¶åé‡Œé¢çš„å†…å®¹ä¸€å®šè¦æ˜¯å®ç°ç±»çš„å…¨ç±»åï¼Œå®ç°ç±»å¯ä»¥æœ‰å¤šä¸ªï¼Œç›´æ¥æ¢è¡Œå°±å¥½äº†ï¼Œå¤šä¸ªå®ç°ç±»çš„æ—¶å€™ï¼Œä¼šä¸€ä¸ªä¸€ä¸ªçš„è¿­ä»£åŠ è½½ã€‚\n\næ¥ä¸‹æ¥åŒæ ·å°† `service-provider` é¡¹ç›®æ‰“åŒ…æˆ jar åŒ…ï¼Œè¿™ä¸ª jar åŒ…å°±æ˜¯æœåŠ¡æä¾›æ–¹çš„å®ç°ã€‚é€šå¸¸æˆ‘ä»¬å¯¼å…¥ maven çš„ pom ä¾èµ–å°±æœ‰ç‚¹ç±»ä¼¼è¿™ç§ï¼Œåªä¸è¿‡æˆ‘ä»¬ç°åœ¨æ²¡æœ‰å°†è¿™ä¸ª jar åŒ…å‘å¸ƒåˆ° maven å…¬å…±ä»“åº“ä¸­ï¼Œæ‰€ä»¥åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹åªèƒ½æ‰‹åŠ¨çš„æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚\n\næ–°å»º Main æ–¹æ³•æµ‹è¯•ï¼š\n\n\n\n```java\npackage edu.jiangxuan.up.service;\n\nimport edu.jiangxuan.up.spi.LoggerService;\n\npublic class TestJavaSPI {\n    public static void main(String[] args) {\n        LoggerService loggerService = LoggerService.getService();\n        loggerService.info(\"ä½ å¥½\");\n        loggerService.debug(\"æµ‹è¯•Java SPI æœºåˆ¶\");\n    }\n}\n```\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n\n> Logback info æ‰“å°æ—¥å¿—ï¼šä½ å¥½ Logback debug æ‰“å°æ—¥å¿—ï¼šæµ‹è¯• Java SPI æœºåˆ¶\n\nè¯´æ˜å¯¼å…¥ jar åŒ…ä¸­çš„å®ç°ç±»ç”Ÿæ•ˆäº†ã€‚\n\nå¦‚æœæˆ‘ä»¬ä¸å¯¼å…¥å…·ä½“çš„å®ç°ç±»çš„ jar åŒ…ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºè¿è¡Œçš„ç»“æœå°±ä¼šæ˜¯ï¼š\n\n> info ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€… debug ä¸­æ²¡æœ‰å‘ç° Logger æœåŠ¡æä¾›è€…\n\né€šè¿‡ä½¿ç”¨ SPI æœºåˆ¶ï¼Œå¯ä»¥çœ‹å‡ºæœåŠ¡ï¼ˆ`LoggerService`ï¼‰å’Œ æœåŠ¡æä¾›è€…ä¸¤è€…ä¹‹é—´çš„è€¦åˆåº¦éå¸¸ä½ï¼Œå¦‚æœè¯´æˆ‘ä»¬æƒ³è¦æ¢ä¸€ç§å®ç°ï¼Œé‚£ä¹ˆå…¶å®åªéœ€è¦ä¿®æ”¹ `service-provider` é¡¹ç›®ä¸­é’ˆå¯¹ `Logger` æ¥å£çš„å…·ä½“å®ç°å°±å¯ä»¥äº†ï¼Œåªéœ€è¦æ¢ä¸€ä¸ª jar åŒ…å³å¯ï¼Œä¹Ÿå¯ä»¥æœ‰åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œé¢æœ‰å¤šä¸ªå®ç°ï¼Œè¿™ä¸å°±æ˜¯ SLF4J åŸç†å—ï¼Ÿ\n\nå¦‚æœæŸä¸€å¤©éœ€æ±‚å˜æ›´äº†ï¼Œæ­¤æ—¶éœ€è¦å°†æ—¥å¿—è¾“å‡ºåˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…åšä¸€äº›åˆ«çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å®Œå…¨ä¸éœ€è¦æ›´æ”¹ Logback çš„å®ç°ï¼Œåªéœ€è¦æ–°å¢ä¸€ä¸ªæœåŠ¡å®ç°ï¼ˆservice-providerï¼‰å¯ä»¥é€šè¿‡åœ¨æœ¬é¡¹ç›®é‡Œé¢æ–°å¢å®ç°ä¹Ÿå¯ä»¥ä»å¤–éƒ¨å¼•å…¥æ–°çš„æœåŠ¡å®ç° jar åŒ…ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡(LoggerService)ä¸­é€‰æ‹©ä¸€ä¸ªå…·ä½“çš„ æœåŠ¡å®ç°(service-provider) æ¥å®Œæˆæˆ‘ä»¬éœ€è¦çš„æ“ä½œã€‚\n\né‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å…·ä½“æ¥è¯´è¯´ Java SPI å·¥ä½œçš„é‡ç‚¹åŸç†â€”â€” **ServiceLoader** ã€‚\n\n## [#](#serviceloader) ServiceLoader\n\n### [#](#serviceloader-å…·ä½“å®ç°) ServiceLoader å…·ä½“å®ç°\n\næƒ³è¦ä½¿ç”¨ Java çš„ SPI æœºåˆ¶æ˜¯éœ€è¦ä¾èµ– `ServiceLoader` æ¥å®ç°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ `ServiceLoader` å…·ä½“æ˜¯æ€ä¹ˆåšçš„ï¼š\n\n`ServiceLoader` æ˜¯ JDK æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œ ä½äº`package java.util;`åŒ…ä¸‹ã€‚\n\n\n\n```text\nA facility to load implementations of a service.\n```\n\nè¿™æ˜¯ JDK å®˜æ–¹ç»™çš„æ³¨é‡Šï¼š**ä¸€ç§åŠ è½½æœåŠ¡å®ç°çš„å·¥å…·ã€‚**\n\nå†å¾€ä¸‹çœ‹ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª `final` ç±»å‹çš„ï¼Œæ‰€ä»¥æ˜¯ä¸å¯è¢«ç»§æ‰¿ä¿®æ”¹ï¼ŒåŒæ—¶å®ƒå®ç°äº† `Iterable` æ¥å£ã€‚ä¹‹æ‰€ä»¥å®ç°äº†è¿­ä»£å™¨ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åç»­æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡è¿­ä»£çš„æ–¹å¼å¾—åˆ°å¯¹åº”çš„æœåŠ¡å®ç°ã€‚\n\n\n\n```java\npublic final class ServiceLoader<S> implements Iterable<S>{ xxx...}\n```\n\nå¯ä»¥çœ‹åˆ°ä¸€ä¸ªç†Ÿæ‚‰çš„å¸¸é‡å®šä¹‰ï¼š\n\n```\nprivate static final String PREFIX = \"META-INF/services/\";\n```\n\nä¸‹é¢æ˜¯ `load` æ–¹æ³•ï¼šå¯ä»¥å‘ç° `load` æ–¹æ³•æ”¯æŒä¸¤ç§é‡è½½åçš„å…¥å‚ï¼›\n\n\n\n```java\npublic static <S> ServiceLoader<S> load(Class<S> service) {\n    ClassLoader cl = Thread.currentThread().getContextClassLoader();\n    return ServiceLoader.load(service, cl);\n}\n\npublic static <S> ServiceLoader<S> load(Class<S> service,\n                                        ClassLoader loader) {\n    return new ServiceLoader<>(service, loader);\n}\n\nprivate ServiceLoader(Class<S> svc, ClassLoader cl) {\n    service = Objects.requireNonNull(svc, \"Service interface cannot be null\");\n    loader = (cl == null) ? ClassLoader.getSystemClassLoader() : cl;\n    acc = (System.getSecurityManager() != null) ? AccessController.getContext() : null;\n    reload();\n}\n\npublic void reload() {\n    providers.clear();\n    lookupIterator = new LazyIterator(service, loader);\n}\n```\n\næ ¹æ®ä»£ç çš„è°ƒç”¨é¡ºåºï¼Œåœ¨ `reload()` æ–¹æ³•ä¸­æ˜¯é€šè¿‡ä¸€ä¸ªå†…éƒ¨ç±» `LazyIterator` å®ç°çš„ã€‚å…ˆç»§ç»­å¾€ä¸‹é¢çœ‹ã€‚\n\n`ServiceLoader` å®ç°äº† `Iterable` æ¥å£çš„æ–¹æ³•åï¼Œå…·æœ‰äº†è¿­ä»£çš„èƒ½åŠ›ï¼Œåœ¨è¿™ä¸ª `iterator` æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œé¦–å…ˆä¼šåœ¨ `ServiceLoader` çš„ `Provider` ç¼“å­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å‘½ä¸­é‚£ä¹ˆåˆ™åœ¨ `LazyIterator` ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚\n\n\n\n```java\npublic Iterator<S> iterator() {\n    return new Iterator<S>() {\n\n        Iterator<Map.Entry<String, S>> knownProviders\n                = providers.entrySet().iterator();\n\n        public boolean hasNext() {\n            if (knownProviders.hasNext())\n                return true;\n            return lookupIterator.hasNext(); // è°ƒç”¨ LazyIterator\n        }\n\n        public S next() {\n            if (knownProviders.hasNext())\n                return knownProviders.next().getValue();\n            return lookupIterator.next(); // è°ƒç”¨ LazyIterator\n        }\n\n        public void remove() {\n            throw new UnsupportedOperationException();\n        }\n\n    };\n}\n```\n\nåœ¨è°ƒç”¨ `LazyIterator` æ—¶ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š\n\n\n\n```java\npublic boolean hasNext() {\n    if (acc == null) {\n        return hasNextService();\n    } else {\n        PrivilegedAction<Boolean> action = new PrivilegedAction<Boolean>() {\n            public Boolean run() {\n                return hasNextService();\n            }\n        };\n        return AccessController.doPrivileged(action, acc);\n    }\n}\n\nprivate boolean hasNextService() {\n    if (nextName != null) {\n        return true;\n    }\n    if (configs == null) {\n        try {\n            //é€šè¿‡PREFIXï¼ˆMETA-INF/services/ï¼‰å’Œç±»å è·å–å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¾—åˆ°å…·ä½“çš„å®ç°ç±»\n            String fullName = PREFIX + service.getName();\n            if (loader == null)\n                configs = ClassLoader.getSystemResources(fullName);\n            else\n                configs = loader.getResources(fullName);\n        } catch (IOException x) {\n            fail(service, \"Error locating configuration files\", x);\n        }\n    }\n    while ((pending == null) || !pending.hasNext()) {\n        if (!configs.hasMoreElements()) {\n            return false;\n        }\n        pending = parse(service, configs.nextElement());\n    }\n    nextName = pending.next();\n    return true;\n}\n\n\npublic S next() {\n    if (acc == null) {\n        return nextService();\n    } else {\n        PrivilegedAction<S> action = new PrivilegedAction<S>() {\n            public S run() {\n                return nextService();\n            }\n        };\n        return AccessController.doPrivileged(action, acc);\n    }\n}\n\nprivate S nextService() {\n    if (!hasNextService())\n        throw new NoSuchElementException();\n    String cn = nextName;\n    nextName = null;\n    Class<?> c = null;\n    try {\n        c = Class.forName(cn, false, loader);\n    } catch (ClassNotFoundException x) {\n        fail(service,\n                \"Provider \" + cn + \" not found\");\n    }\n    if (!service.isAssignableFrom(c)) {\n        fail(service,\n                \"Provider \" + cn + \" not a subtype\");\n    }\n    try {\n        S p = service.cast(c.newInstance());\n        providers.put(cn, p);\n        return p;\n    } catch (Throwable x) {\n        fail(service,\n                \"Provider \" + cn + \" could not be instantiated\",\n                x);\n    }\n    throw new Error();          // This cannot happen\n}\n```\n\nå¯èƒ½å¾ˆå¤šäººçœ‹è¿™ä¸ªä¼šè§‰å¾—æœ‰ç‚¹å¤æ‚ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘è¿™è¾¹å®ç°äº†ä¸€ä¸ªç®€å•çš„ `ServiceLoader` çš„å°æ¨¡å‹ï¼Œæµç¨‹å’ŒåŸç†éƒ½æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œå¯ä»¥å…ˆä»è‡ªå·±å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬çš„å¼€å§‹å­¦ï¼š\n\n### [#](#è‡ªå·±å®ç°ä¸€ä¸ª-serviceloader) è‡ªå·±å®ç°ä¸€ä¸ª ServiceLoader\n\næˆ‘å…ˆæŠŠä»£ç è´´å‡ºæ¥ï¼š\n\n\n\n```java\npackage edu.jiangxuan.up.service;\n\nimport java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.reflect.Constructor;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.ArrayList;\nimport java.util.Enumeration;\nimport java.util.List;\n\npublic class MyServiceLoader<S> {\n\n    // å¯¹åº”çš„æ¥å£ Class æ¨¡æ¿\n    private final Class<S> service;\n\n    // å¯¹åº”å®ç°ç±»çš„ å¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ List è¿›è¡Œå°è£…\n    private final List<S> providers = new ArrayList<>();\n\n    // ç±»åŠ è½½å™¨\n    private final ClassLoader classLoader;\n\n    // æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å¼€å§‹åŠ è½½è‡ªå·±å®šåˆ¶çš„å®ç°æµç¨‹ã€‚\n    public static <S> MyServiceLoader<S> load(Class<S> service) {\n        return new MyServiceLoader<>(service);\n    }\n\n    // æ„é€ æ–¹æ³•ç§æœ‰åŒ–\n    private MyServiceLoader(Class<S> service) {\n        this.service = service;\n        this.classLoader = Thread.currentThread().getContextClassLoader();\n        doLoad();\n    }\n\n    // å…³é”®æ–¹æ³•ï¼ŒåŠ è½½å…·ä½“å®ç°ç±»çš„é€»è¾‘\n    private void doLoad() {\n        try {\n            // è¯»å–æ‰€æœ‰ jar åŒ…é‡Œé¢ META-INF/services åŒ…ä¸‹é¢çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åå°±æ˜¯æ¥å£åï¼Œç„¶åæ–‡ä»¶é‡Œé¢çš„å†…å®¹å°±æ˜¯å…·ä½“çš„å®ç°ç±»çš„è·¯å¾„åŠ å…¨ç±»å\n            Enumeration<URL> urls = classLoader.getResources(\"META-INF/services/\" + service.getName());\n            // æŒ¨ä¸ªéå†å–åˆ°çš„æ–‡ä»¶\n            while (urls.hasMoreElements()) {\n                // å–å‡ºå½“å‰çš„æ–‡ä»¶\n                URL url = urls.nextElement();\n                System.out.println(\"File = \" + url.getPath());\n                // å»ºç«‹é“¾æ¥\n                URLConnection urlConnection = url.openConnection();\n                urlConnection.setUseCaches(false);\n                // è·å–æ–‡ä»¶è¾“å…¥æµ\n                InputStream inputStream = urlConnection.getInputStream();\n                // ä»æ–‡ä»¶è¾“å…¥æµè·å–ç¼“å­˜\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n                // ä»æ–‡ä»¶å†…å®¹é‡Œé¢å¾—åˆ°å®ç°ç±»çš„å…¨ç±»å\n                String className = bufferedReader.readLine();\n\n                while (className != null) {\n                    // é€šè¿‡åå°„æ‹¿åˆ°å®ç°ç±»çš„å®ä¾‹\n                    Class<?> clazz = Class.forName(className, false, classLoader);\n                    // å¦‚æœå£°æ˜çš„æ¥å£è·Ÿè¿™ä¸ªå…·ä½“çš„å®ç°ç±»æ˜¯å±äºåŒä¸€ç±»å‹ï¼Œï¼ˆå¯ä»¥ç†è§£ä¸ºJavaçš„ä¸€ç§å¤šæ€ï¼Œæ¥å£è·Ÿå®ç°ç±»ã€çˆ¶ç±»å’Œå­ç±»ç­‰ç­‰è¿™ç§å…³ç³»ã€‚ï¼‰åˆ™æ„é€ å®ä¾‹\n                    if (service.isAssignableFrom(clazz)) {\n                        Constructor<? extends S> constructor = (Constructor<? extends S>) clazz.getConstructor();\n                        S instance = constructor.newInstance();\n                        // æŠŠå½“å‰æ„é€ çš„å®ä¾‹å¯¹è±¡æ·»åŠ åˆ° Providerçš„åˆ—è¡¨é‡Œé¢\n                        providers.add(instance);\n                    }\n                    // ç»§ç»­è¯»å–ä¸‹ä¸€è¡Œçš„å®ç°ç±»ï¼Œå¯ä»¥æœ‰å¤šä¸ªå®ç°ç±»ï¼Œåªéœ€è¦æ¢è¡Œå°±å¯ä»¥äº†ã€‚\n                    className = bufferedReader.readLine();\n                }\n            }\n        } catch (Exception e) {\n            System.out.println(\"è¯»å–æ–‡ä»¶å¼‚å¸¸ã€‚ã€‚ã€‚\");\n        }\n    }\n\n    // è¿”å›spiæ¥å£å¯¹åº”çš„å…·ä½“å®ç°ç±»åˆ—è¡¨\n    public List<S> getProviders() {\n        return providers;\n    }\n}\n```\n\nå…³é”®ä¿¡æ¯åŸºæœ¬å·²ç»é€šè¿‡ä»£ç æ³¨é‡Šæè¿°å‡ºæ¥äº†ï¼Œ\n\nä¸»è¦çš„æµç¨‹å°±æ˜¯ï¼š\n\n1. é€šè¿‡ URL å·¥å…·ç±»ä» jar åŒ…çš„ `/META-INF/services` ç›®å½•ä¸‹é¢æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œ\n2. è¯»å–è¿™ä¸ªæ–‡ä»¶çš„åç§°æ‰¾åˆ°å¯¹åº”çš„ spi æ¥å£ï¼Œ\n3. é€šè¿‡ `InputStream` æµå°†æ–‡ä»¶é‡Œé¢çš„å…·ä½“å®ç°ç±»çš„å…¨ç±»åè¯»å–å‡ºæ¥ï¼Œ\n4. æ ¹æ®è·å–åˆ°çš„å…¨ç±»åï¼Œå…ˆåˆ¤æ–­è·Ÿ spi æ¥å£æ˜¯å¦ä¸ºåŒä¸€ç±»å‹ï¼Œå¦‚æœæ˜¯çš„ï¼Œé‚£ä¹ˆå°±é€šè¿‡åå°„çš„æœºåˆ¶æ„é€ å¯¹åº”çš„å®ä¾‹å¯¹è±¡ï¼Œ\n5. å°†æ„é€ å‡ºæ¥çš„å®ä¾‹å¯¹è±¡æ·»åŠ åˆ° `Providers` çš„åˆ—è¡¨ä¸­ã€‚\n\n## [#](#æ€»ç»“) æ€»ç»“\n\nå…¶å®ä¸éš¾å‘ç°ï¼ŒSPI æœºåˆ¶çš„å…·ä½“å®ç°æœ¬è´¨ä¸Šè¿˜æ˜¯é€šè¿‡åå°„å®Œæˆçš„ã€‚å³ï¼š**æˆ‘ä»¬æŒ‰ç…§è§„å®šå°†è¦æš´éœ²å¯¹å¤–ä½¿ç”¨çš„å…·ä½“å®ç°ç±»åœ¨ `META-INF/services/` æ–‡ä»¶ä¸‹å£°æ˜ã€‚**\n\nå¦å¤–ï¼ŒSPI æœºåˆ¶åœ¨å¾ˆå¤šæ¡†æ¶ä¸­éƒ½æœ‰åº”ç”¨ï¼šSpring æ¡†æ¶çš„åŸºæœ¬åŸç†ä¹Ÿæ˜¯ç±»ä¼¼çš„æ–¹å¼ã€‚è¿˜æœ‰ Dubbo æ¡†æ¶æä¾›åŒæ ·çš„ SPI æ‰©å±•æœºåˆ¶ï¼Œåªä¸è¿‡ Dubbo å’Œ spring æ¡†æ¶ä¸­çš„ SPI æœºåˆ¶å…·ä½“å®ç°æ–¹å¼è·Ÿå’±ä»¬ä»Šå¤©å­¦å¾—è¿™ä¸ªæœ‰äº›ç»†å¾®çš„åŒºåˆ«ï¼Œä¸è¿‡æ•´ä½“çš„åŸç†éƒ½æ˜¯ä¸€è‡´çš„ï¼Œç›¸ä¿¡å¤§å®¶é€šè¿‡å¯¹ JDK ä¸­ SPI æœºåˆ¶çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿä¸€é€šç™¾é€šï¼ŒåŠ æ·±å¯¹å…¶ä»–é«˜æ·±æ¡†çš„ç†è§£ã€‚\n\né€šè¿‡ SPI æœºåˆ¶èƒ½å¤Ÿå¤§å¤§åœ°æé«˜æ¥å£è®¾è®¡çš„çµæ´»æ€§ï¼Œä½†æ˜¯ SPI æœºåˆ¶ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚ï¼š\n\n1. éå†åŠ è½½æ‰€æœ‰çš„å®ç°ç±»ï¼Œè¿™æ ·æ•ˆç‡è¿˜æ˜¯ç›¸å¯¹è¾ƒä½çš„ï¼›\n2. å½“å¤šä¸ª `ServiceLoader` åŒæ—¶ `load` æ—¶ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚\n\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"javaåå°„","url":"/2023/06/28/javaåå°„/","content":"\n##  ä½•ä¸ºåå°„ï¼Ÿ\n\nå¦‚æœè¯´å¤§å®¶ç ”ç©¶è¿‡æ¡†æ¶çš„åº•å±‚åŸç†æˆ–è€…å’±ä»¬è‡ªå·±å†™è¿‡æ¡†æ¶çš„è¯ï¼Œä¸€å®šå¯¹åå°„è¿™ä¸ªæ¦‚å¿µä¸é™Œç”Ÿã€‚\n\nåå°„ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæ¡†æ¶çš„çµé­‚ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèµ‹äºˆäº†æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ†æç±»ä»¥åŠæ‰§è¡Œç±»ä¸­æ–¹æ³•çš„èƒ½åŠ›ã€‚\n\né€šè¿‡åå°„ä½ å¯ä»¥è·å–ä»»æ„ä¸€ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½ è¿˜å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•å’Œå±æ€§ã€‚\n\n## [#](#åå°„çš„åº”ç”¨åœºæ™¯äº†è§£ä¹ˆ) åå°„çš„åº”ç”¨åœºæ™¯äº†è§£ä¹ˆï¼Ÿ\n\nåƒå’±ä»¬å¹³æ—¶å¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯åœ¨å†™ä¸šåŠ¡ä»£ç ï¼Œå¾ˆå°‘ä¼šæ¥è§¦åˆ°ç›´æ¥ä½¿ç”¨åå°„æœºåˆ¶çš„åœºæ™¯ã€‚\n\nä½†æ˜¯ï¼Œè¿™å¹¶ä¸ä»£è¡¨åå°„æ²¡æœ‰ç”¨ã€‚ç›¸åï¼Œæ­£æ˜¯å› ä¸ºåå°„ï¼Œä½ æ‰èƒ½è¿™ä¹ˆè½»æ¾åœ°ä½¿ç”¨å„ç§æ¡†æ¶ã€‚åƒ Spring/Spring Bootã€MyBatis ç­‰ç­‰æ¡†æ¶ä¸­éƒ½å¤§é‡ä½¿ç”¨äº†åå°„æœºåˆ¶ã€‚\n\n**è¿™äº›æ¡†æ¶ä¸­ä¹Ÿå¤§é‡ä½¿ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œè€ŒåŠ¨æ€ä»£ç†çš„å®ç°ä¹Ÿä¾èµ–åå°„ã€‚**\n\næ¯”å¦‚ä¸‹é¢æ˜¯é€šè¿‡ JDK å®ç°åŠ¨æ€ä»£ç†çš„ç¤ºä¾‹ä»£ç ï¼Œå…¶ä¸­å°±ä½¿ç”¨äº†åå°„ç±» `Method` æ¥è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•ã€‚\n\n\n\n```java\npublic class DebugInvocationHandler implements InvocationHandler {\n    /**\n     * ä»£ç†ç±»ä¸­çš„çœŸå®å¯¹è±¡\n     */\n    private final Object target;\n\n    public DebugInvocationHandler(Object target) {\n        this.target = target;\n    }\n\n\n    public Object invoke(Object proxy, Method method, Object[] args) throws InvocationTargetException, IllegalAccessException {\n        System.out.println(\"before method \" + method.getName());\n        Object result = method.invoke(target, args);\n        System.out.println(\"after method \" + method.getName());\n        return result;\n    }\n}\n```\n\nå¦å¤–ï¼Œåƒ Java ä¸­çš„ä¸€å¤§åˆ©å™¨ **æ³¨è§£** çš„å®ç°ä¹Ÿç”¨åˆ°äº†åå°„ã€‚\n\nä¸ºä»€ä¹ˆä½ ä½¿ç”¨ Spring çš„æ—¶å€™ ï¼Œä¸€ä¸ª`@Component`æ³¨è§£å°±å£°æ˜äº†ä¸€ä¸ªç±»ä¸º Spring Bean å‘¢ï¼Ÿä¸ºä»€ä¹ˆä½ é€šè¿‡ä¸€ä¸ª `@Value`æ³¨è§£å°±è¯»å–åˆ°é…ç½®æ–‡ä»¶ä¸­çš„å€¼å‘¢ï¼Ÿç©¶ç«Ÿæ˜¯æ€ä¹ˆèµ·ä½œç”¨çš„å‘¢ï¼Ÿ\n\nè¿™äº›éƒ½æ˜¯å› ä¸ºä½ å¯ä»¥åŸºäºåå°„åˆ†æç±»ï¼Œç„¶åè·å–åˆ°ç±»/å±æ€§/æ–¹æ³•/æ–¹æ³•çš„å‚æ•°ä¸Šçš„æ³¨è§£ã€‚ä½ è·å–åˆ°æ³¨è§£ä¹‹åï¼Œå°±å¯ä»¥åšè¿›ä¸€æ­¥çš„å¤„ç†ã€‚\n\n## [#](#è°ˆè°ˆåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹) è°ˆè°ˆåå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹\n\n**ä¼˜ç‚¹**ï¼šå¯ä»¥è®©å’±ä»¬çš„ä»£ç æ›´åŠ çµæ´»ã€ä¸ºå„ç§æ¡†æ¶æä¾›å¼€ç®±å³ç”¨çš„åŠŸèƒ½æä¾›äº†ä¾¿åˆ©\n\n**ç¼ºç‚¹**ï¼šè®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶æœ‰äº†åˆ†ææ“ä½œç±»çš„èƒ½åŠ›ï¼Œè¿™åŒæ ·ä¹Ÿå¢åŠ äº†å®‰å…¨é—®é¢˜ã€‚æ¯”å¦‚å¯ä»¥æ— è§†æ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥ï¼ˆæ³›å‹å‚æ•°çš„å®‰å…¨æ£€æŸ¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ï¼‰ã€‚å¦å¤–ï¼Œåå°„çš„æ€§èƒ½ä¹Ÿè¦ç¨å·®ç‚¹ï¼Œä¸è¿‡ï¼Œå¯¹äºæ¡†æ¶æ¥è¯´å®é™…æ˜¯å½±å“ä¸å¤§çš„ã€‚ç›¸å…³é˜…è¯»ï¼š[Java Reflection: Why is it so slow?open in new window](https://stackoverflow.com/questions/1392351/java-reflection-why-is-it-so-slow)\n\n## [#](#åå°„å®æˆ˜) åå°„å®æˆ˜\n\n### [#](#è·å–-class-å¯¹è±¡çš„å››ç§æ–¹å¼) è·å– Class å¯¹è±¡çš„å››ç§æ–¹å¼\n\nå¦‚æœæˆ‘ä»¬åŠ¨æ€è·å–åˆ°è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦ä¾é  Class å¯¹è±¡ã€‚Class ç±»å¯¹è±¡å°†ä¸€ä¸ªç±»çš„æ–¹æ³•ã€å˜é‡ç­‰ä¿¡æ¯å‘Šè¯‰è¿è¡Œçš„ç¨‹åºã€‚Java æä¾›äº†å››ç§æ–¹å¼è·å– Class å¯¹è±¡:\n\n**1. çŸ¥é“å…·ä½“ç±»çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ï¼š**\n\n\n\n```java\nClass alunbarClass = TargetObject.class;\n```\n\nä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä¸çŸ¥é“å…·ä½“ç±»çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡éå†åŒ…ä¸‹é¢çš„ç±»æ¥è·å– Class å¯¹è±¡ï¼Œé€šè¿‡æ­¤æ–¹å¼è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–\n\n**2. é€šè¿‡ `Class.forName()`ä¼ å…¥ç±»çš„å…¨è·¯å¾„è·å–ï¼š**\n\n\n\n```java\nClass alunbarClass1 = Class.forName(\"cn.javaguide.TargetObject\");\n```\n\n**3. é€šè¿‡å¯¹è±¡å®ä¾‹`instance.getClass()`è·å–ï¼š**\n\n\n\n```java\nTargetObject o = new TargetObject();\nClass alunbarClass2 = o.getClass();\n```\n\n**4. é€šè¿‡ç±»åŠ è½½å™¨`xxxClassLoader.loadClass()`ä¼ å…¥ç±»è·¯å¾„è·å–:**\n\n\n\n```java\nClassLoader.getSystemClassLoader().loadClass(\"cn.javaguide.TargetObject\");\n```\n\né€šè¿‡ç±»åŠ è½½å™¨è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œæ„å‘³ç€ä¸è¿›è¡ŒåŒ…æ‹¬åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—æ­¥éª¤ï¼Œé™æ€ä»£ç å—å’Œé™æ€å¯¹è±¡ä¸ä¼šå¾—åˆ°æ‰§è¡Œ\n\n### [#](#åå°„çš„ä¸€äº›åŸºæœ¬æ“ä½œ) åå°„çš„ä¸€äº›åŸºæœ¬æ“ä½œ\n\n1. åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬è¦ä½¿ç”¨åå°„æ“ä½œçš„ç±» `TargetObject`ã€‚\n\n\n\n```java\npackage cn.javaguide;\n\npublic class TargetObject {\n    private String value;\n\n    public TargetObject() {\n        value = \"JavaGuide\";\n    }\n\n    public void publicMethod(String s) {\n        System.out.println(\"I love \" + s);\n    }\n\n    private void privateMethod() {\n        System.out.println(\"value is \" + value);\n    }\n}\n```\n\n1. ä½¿ç”¨åå°„æ“ä½œè¿™ä¸ªç±»çš„æ–¹æ³•ä»¥åŠå‚æ•°\n\n\n\n```java\npackage cn.javaguide;\n\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\npublic class Main {\n    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException, NoSuchFieldException {\n        /**\n         * è·å– TargetObject ç±»çš„ Class å¯¹è±¡å¹¶ä¸”åˆ›å»º TargetObject ç±»å®ä¾‹\n         */\n        Class<?> targetClass = Class.forName(\"cn.javaguide.TargetObject\");\n        TargetObject targetObject = (TargetObject) targetClass.newInstance();\n        /**\n         * è·å– TargetObject ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•\n         */\n        Method[] methods = targetClass.getDeclaredMethods();\n        for (Method method : methods) {\n            System.out.println(method.getName());\n        }\n\n        /**\n         * è·å–æŒ‡å®šæ–¹æ³•å¹¶è°ƒç”¨\n         */\n        Method publicMethod = targetClass.getDeclaredMethod(\"publicMethod\",\n                String.class);\n\n        publicMethod.invoke(targetObject, \"JavaGuide\");\n\n        /**\n         * è·å–æŒ‡å®šå‚æ•°å¹¶å¯¹å‚æ•°è¿›è¡Œä¿®æ”¹\n         */\n        Field field = targetClass.getDeclaredField(\"value\");\n        //ä¸ºäº†å¯¹ç±»ä¸­çš„å‚æ•°è¿›è¡Œä¿®æ”¹æˆ‘ä»¬å–æ¶ˆå®‰å…¨æ£€æŸ¥\n        field.setAccessible(true);\n        field.set(targetObject, \"JavaGuide\");\n\n        /**\n         * è°ƒç”¨ private æ–¹æ³•\n         */\n        Method privateMethod = targetClass.getDeclaredMethod(\"privateMethod\");\n        //ä¸ºäº†è°ƒç”¨privateæ–¹æ³•æˆ‘ä»¬å–æ¶ˆå®‰å…¨æ£€æŸ¥\n        privateMethod.setAccessible(true);\n        privateMethod.invoke(targetObject);\n    }\n}\n```\n\nè¾“å‡ºå†…å®¹ï¼š\n\n```text\npublicMethod\nprivateMethod\nI love JavaGuide\nvalue is JavaGuide\n```\n\n**æ³¨æ„** : æœ‰è¯»è€…æåˆ°ä¸Šé¢ä»£ç è¿è¡Œä¼šæŠ›å‡º `ClassNotFoundException` å¼‚å¸¸,å…·ä½“åŸå› æ˜¯ä½ æ²¡æœ‰ä¸‹é¢æŠŠè¿™æ®µä»£ç çš„åŒ…åæ›¿æ¢æˆè‡ªå·±åˆ›å»ºçš„ `TargetObject` æ‰€åœ¨çš„åŒ… ã€‚\n\n```java\nClass<?> targetClass = Class.forName(\"cn.javaguide.TargetObject\");\n```\n\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"å…³äºjavaå¼‚å¸¸","url":"/2023/06/28/å…³äºjavaå¼‚å¸¸/","content":"\n# æ¦‚è¿°\n\nåœ¨`java`ä¸­ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½ç”±ä¸€ä¸ª`Throwable`ç±»å»¶ä¼¸å‡ºæ¥çš„ã€‚`Throwable` ç±»æœ‰ä¸¤ä¸ªé‡è¦çš„å­ç±»:\n\n- **`Exception`** :ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡ `catch` æ¥è¿›è¡Œæ•è·ã€‚`Exception` åˆå¯ä»¥åˆ†ä¸º Checked Exception (å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¿…é¡»å¤„ç†) å’Œ Unchecked Exception (ä¸å—æ£€æŸ¥å¼‚å¸¸ï¼Œå¯ä»¥ä¸å¤„ç†)ã€‚\n- **`Error`**ï¼š`Error` å±äºç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ ï¼Œæˆ‘ä»¬æ²¡åŠæ³•é€šè¿‡ `catch` æ¥è¿›è¡Œæ•è·ä¸å»ºè®®é€šè¿‡`catch`æ•è· ã€‚ä¾‹å¦‚ Java è™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆ`Virtual MachineError`ï¼‰ã€è™šæ‹Ÿæœºå†…å­˜ä¸å¤Ÿé”™è¯¯(`OutOfMemoryError`)ã€ç±»å®šä¹‰é”™è¯¯ï¼ˆ`NoClassDefFoundError`ï¼‰ç­‰ ã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚\n\nå…¶ä¸­`Exception`ä¸­æœ‰å—æ£€æŸ¥å¼‚å¸¸ï¼ˆJava ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå—æ£€æŸ¥å¼‚å¸¸æ²¡æœ‰è¢« `catch`æˆ–è€…`throws` å…³é”®å­—å¤„ç†çš„è¯ï¼Œå°±æ²¡åŠæ³•é€šè¿‡ç¼–è¯‘ã€‚ï¼‰å’Œéå—æ£€æŸ¥å¼‚å¸¸ï¼ˆJava ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ ï¼Œæˆ‘ä»¬å³ä½¿ä¸å¤„ç†ä¸å—æ£€æŸ¥å¼‚å¸¸ä¹Ÿå¯ä»¥æ­£å¸¸é€šè¿‡ç¼–è¯‘ã€‚ï¼‰ã€‚é™¤äº†`RuntimeException`åŠå…¶å­ç±»ä»¥å¤–ï¼Œå…¶ä»–çš„`Exception`ç±»åŠå…¶å­ç±»éƒ½å±äºå—æ£€æŸ¥å¼‚å¸¸ ã€‚å¸¸è§çš„å—æ£€æŸ¥å¼‚å¸¸æœ‰ï¼šIO ç›¸å…³çš„å¼‚å¸¸ã€`ClassNotFoundException`ã€`SQLException`...ã€‚\n\n`RuntimeException` åŠå…¶å­ç±»éƒ½ç»Ÿç§°ä¸ºéå—æ£€æŸ¥å¼‚å¸¸ï¼Œå¸¸è§çš„æœ‰ï¼š\n\n- `NullPointerException`(ç©ºæŒ‡é’ˆé”™è¯¯)\n- `IllegalArgumentException`(å‚æ•°é”™è¯¯æ¯”å¦‚æ–¹æ³•å…¥å‚ç±»å‹é”™è¯¯)\n- `NumberFormatException`ï¼ˆå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ ¼å¼é”™è¯¯ï¼Œ`IllegalArgumentException`çš„å­ç±»ï¼‰\n- `ArrayIndexOutOfBoundsException`ï¼ˆæ•°ç»„è¶Šç•Œé”™è¯¯ï¼‰\n- `ClassCastException`ï¼ˆç±»å‹è½¬æ¢é”™è¯¯ï¼‰\n- `ArithmeticException`ï¼ˆç®—æœ¯é”™è¯¯ï¼‰\n- `SecurityException` ï¼ˆå®‰å…¨é”™è¯¯æ¯”å¦‚æƒé™ä¸å¤Ÿï¼‰\n- `UnsupportedOperationException`(ä¸æ”¯æŒçš„æ“ä½œé”™è¯¯æ¯”å¦‚é‡å¤åˆ›å»ºåŒä¸€ç”¨æˆ·)\n\n- ...\n\n# å…³äºtry-with-resourceçš„ä½¿ç”¨\n\n1. **é€‚ç”¨èŒƒå›´ï¼ˆèµ„æºçš„å®šä¹‰ï¼‰ï¼š** ä»»ä½•å®ç° `java.lang.AutoCloseable`æˆ–è€… `java.io.Closeable` çš„å¯¹è±¡\n2. **å…³é—­èµ„æºå’Œ finally å—çš„æ‰§è¡Œé¡ºåºï¼š** åœ¨ `try-with-resources` è¯­å¥ä¸­ï¼Œä»»ä½• catch æˆ– finally å—åœ¨å£°æ˜çš„èµ„æºå…³é—­åè¿è¡Œ\n\nã€ŠEffective Javaã€‹ä¸­æ˜ç¡®æŒ‡å‡ºï¼š\n\n> é¢å¯¹å¿…é¡»è¦å…³é—­çš„èµ„æºï¼Œæˆ‘ä»¬æ€»æ˜¯åº”è¯¥ä¼˜å…ˆä½¿ç”¨ `try-with-resources` è€Œä¸æ˜¯`try-finally`ã€‚éšä¹‹äº§ç”Ÿçš„ä»£ç æ›´ç®€çŸ­ï¼Œæ›´æ¸…æ™°ï¼Œäº§ç”Ÿçš„å¼‚å¸¸å¯¹æˆ‘ä»¬ä¹Ÿæ›´æœ‰ç”¨ã€‚`try-with-resources`è¯­å¥è®©æˆ‘ä»¬æ›´å®¹æ˜“ç¼–å†™å¿…é¡»è¦å…³é—­çš„èµ„æºçš„ä»£ç ï¼Œè‹¥é‡‡ç”¨`try-finally`åˆ™å‡ ä¹åšä¸åˆ°è¿™ç‚¹ã€‚\n\nJava ä¸­ç±»ä¼¼äº`InputStream`ã€`OutputStream`ã€`Scanner`ã€`PrintWriter`ç­‰çš„èµ„æºéƒ½éœ€è¦æˆ‘ä»¬è°ƒç”¨`close()`æ–¹æ³•æ¥æ‰‹åŠ¨å…³é—­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡`try-catch-finally`è¯­å¥æ¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œå¦‚ä¸‹ï¼š\n\n\n\n```java\n//è¯»å–æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹\nScanner scanner = null;\ntry {\n    scanner = new Scanner(new File(\"D://read.txt\"));\n    while (scanner.hasNext()) {\n        System.out.println(scanner.nextLine());\n    }\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n} finally {\n    if (scanner != null) {\n        scanner.close();\n    }\n}\n```\n\nä½¿ç”¨ Java 7 ä¹‹åçš„ `try-with-resources` è¯­å¥æ”¹é€ ä¸Šé¢çš„ä»£ç :\n\n```java\ntry (Scanner scanner = new Scanner(new File(\"test.txt\"))) {\n    while (scanner.hasNext()) {\n        System.out.println(scanner.nextLine());\n    }\n} catch (FileNotFoundException fnfe) {\n    fnfe.printStackTrace();\n}\n```\n\n**æ³¨æ„**ï¼šä»Java 9å¼€å§‹ï¼Œæ²¡æœ‰å¿…è¦åœ¨*try-with-resources*è¯­å¥ä¸­å£°æ˜*èµ„æº*ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n\n```java\nBufferedWriter writer = new BufferedWriter(new FileWriter(fileName));\ntry (writer) {\n    writer.write(str); // do something with the file we've opened\n}\ncatch(IOException e) {\n    // handle the exception\n}\n```\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"javaæ³›å‹","url":"/2023/06/28/javaæ³›å‹/","content":"\n## æ³›å‹\n\n### ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\n\n**Java æ³›å‹ï¼ˆGenericsï¼‰** æ˜¯ JDK 5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ã€‚ä½¿ç”¨æ³›å‹å‚æ•°ï¼Œå¯ä»¥å¢å¼ºä»£ç çš„å¯è¯»æ€§ä»¥åŠç¨³å®šæ€§ã€‚\n\nç¼–è¯‘å™¨å¯ä»¥å¯¹æ³›å‹å‚æ•°è¿›è¡Œæ£€æµ‹ï¼Œå¹¶ä¸”é€šè¿‡æ³›å‹å‚æ•°å¯ä»¥æŒ‡å®šä¼ å…¥çš„å¯¹è±¡ç±»å‹ã€‚æ¯”å¦‚ `ArrayList<Person> persons = new ArrayList<Person>()` è¿™è¡Œä»£ç å°±æŒ‡æ˜äº†è¯¥ `ArrayList` å¯¹è±¡åªèƒ½ä¼ å…¥ `Person` å¯¹è±¡ï¼Œå¦‚æœä¼ å…¥å…¶ä»–ç±»å‹çš„å¯¹è±¡å°±ä¼šæŠ¥é”™ã€‚\n\n\n\n```java\nArrayList<E> extends AbstractList<E>\n```\n\nå¹¶ä¸”ï¼ŒåŸç”Ÿ `List` è¿”å›ç±»å‹æ˜¯ `Object` ï¼Œéœ€è¦æ‰‹åŠ¨è½¬æ¢ç±»å‹æ‰èƒ½ä½¿ç”¨ï¼Œä½¿ç”¨æ³›å‹åç¼–è¯‘å™¨è‡ªåŠ¨è½¬æ¢ã€‚\n\n### æ³›å‹çš„ä½¿ç”¨æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ\n\næ³›å‹ä¸€èˆ¬æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼:**æ³›å‹ç±»**ã€**æ³›å‹æ¥å£**ã€**æ³›å‹æ–¹æ³•**ã€‚\n\n**1.æ³›å‹ç±»**ï¼š\n\n\n\n```java\n//æ­¤å¤„Tå¯ä»¥éšä¾¿å†™ä¸ºä»»æ„æ ‡è¯†ï¼Œå¸¸è§çš„å¦‚Tã€Eã€Kã€Vç­‰å½¢å¼çš„å‚æ•°å¸¸ç”¨äºè¡¨ç¤ºæ³›å‹\n//åœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶ï¼Œå¿…é¡»æŒ‡å®šTçš„å…·ä½“ç±»å‹\npublic class Generic<T>{\n\n    private T key;\n\n    public Generic(T key) {\n        this.key = key;\n    }\n\n    public T getKey(){\n        return key;\n    }\n}\n```\n\nå¦‚ä½•å®ä¾‹åŒ–æ³›å‹ç±»ï¼š\n\n\n\n```java\nGeneric<Integer> genericInteger = new Generic<Integer>(123456);\n```\n\n**2.æ³›å‹æ¥å£**ï¼š\n\n\n\n```java\npublic interface Generator<T> {\n    public T method();\n}\n```\n\nå®ç°æ³›å‹æ¥å£ï¼Œä¸æŒ‡å®šç±»å‹ï¼š\n\n\n\n```java\nclass GeneratorImpl<T> implements Generator<T>{\n    @Override\n    public T method() {\n        return null;\n    }\n}\n```\n\nå®ç°æ³›å‹æ¥å£ï¼ŒæŒ‡å®šç±»å‹ï¼š\n\n\n\n```java\nclass GeneratorImpl<T> implements Generator<String>{\n    @Override\n    public String method() {\n        return \"hello\";\n    }\n}\n```\n\n**3.æ³›å‹æ–¹æ³•**ï¼š\n\n\n\n```java\n   public static < E > void printArray( E[] inputArray )\n   {\n         for ( E element : inputArray ){\n            System.out.printf( \"%s \", element );\n         }\n         System.out.println();\n    }\n```\n\nä½¿ç”¨ï¼š\n\n```java\n// åˆ›å»ºä¸åŒç±»å‹æ•°ç»„ï¼šInteger, Double å’Œ Character\nInteger[] intArray = { 1, 2, 3 };\nString[] stringArray = { \"Hello\", \"World\" };\nprintArray( intArray  );\nprintArray( stringArray  );\n```\n\n> æ³¨æ„: `public static < E > void printArray( E[] inputArray )` ä¸€èˆ¬è¢«ç§°ä¸ºé™æ€æ³›å‹æ–¹æ³•;åœ¨ java ä¸­æ³›å‹åªæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå¿…é¡»åœ¨ä¼ é€’ç±»å‹åæ‰èƒ½ä½¿ç”¨ã€‚ç±»åœ¨å®ä¾‹åŒ–æ—¶æ‰èƒ½çœŸæ­£çš„ä¼ é€’ç±»å‹å‚æ•°ï¼Œç”±äºé™æ€æ–¹æ³•çš„åŠ è½½å…ˆäºç±»çš„å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»ä¸­çš„æ³›å‹è¿˜æ²¡æœ‰ä¼ é€’çœŸæ­£çš„ç±»å‹å‚æ•°ï¼Œé™æ€çš„æ–¹æ³•çš„åŠ è½½å°±å·²ç»å®Œæˆäº†ï¼Œæ‰€ä»¥é™æ€æ³›å‹æ–¹æ³•æ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨ç±»ä¸Šå£°æ˜çš„æ³›å‹çš„ã€‚åªèƒ½ä½¿ç”¨è‡ªå·±å£°æ˜çš„ `<E>`\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"mybatisç¼“å­˜è¯¦è§£å’Œå®ç°","url":"/2023/06/26/mybatisç¼“å­˜è¯¦è§£å’Œå®ç°/","content":"\n# ä»‹ç»\n\nâ€‹\t\tåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¤§å¤šä½¿ç”¨MyBatisçš„é»˜è®¤ç¼“å­˜é…ç½®ï¼Œä½†æ˜¯MyBatisç¼“å­˜æœºåˆ¶ä¹Ÿæœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œä¸€ä¸ç•™ç¥å°±ä¼šå‡ºç°è„æ•°æ®ï¼Œå½¢æˆä¸€äº›æ½œåœ¨çš„éšæ‚£ï¼Œåç»­æ’æŸ¥é—®é¢˜å®¹æ˜“æµªè´¹æ—¶é—´ç²¾åŠ›ã€‚æ‰€ä»¥ï¼Œå¦‚ä½•ç”¨å¥½MyBatisçš„ç¼“å­˜ï¼Œæ˜¯é‡ä¸­ä¹‹é‡çš„ã€‚è¿™é‡Œä¸»è¦ä»‹ç»MyBatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ åªå¼€å¯ä¸€çº§ç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜æ˜¯å¯¹åŒä¸€ä¸ª SqlSession è€Œè¨€çš„ï¼‰ã€‚\n\n# ä¸€çº§ç¼“å­˜\n\næ¯å½“æˆ‘ä»¬ä½¿ç”¨MyBatiså¼€å¯ä¸€æ¬¡å’Œæ•°æ®åº“çš„ä¼šè¯ï¼ŒMyBatisä¼šåˆ›å»ºå‡ºä¸€ä¸ªSqlSessionå¯¹è±¡è¡¨ç¤ºä¸€æ¬¡æ•°æ®åº“ä¼šè¯ã€‚\n\nåœ¨å¯¹æ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½ä¼šåå¤åœ°æ‰§è¡Œå®Œå…¨ç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œå¦‚æœä¸é‡‡å–ä¸€äº›æªæ–½çš„è¯ï¼Œæ¯ä¸€æ¬¡æŸ¥è¯¢éƒ½ä¼šæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“,è€Œæˆ‘ä»¬åœ¨æçŸ­çš„æ—¶é—´å†…åšäº†å®Œå…¨ç›¸åŒçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ç»“æœææœ‰å¯èƒ½å®Œå…¨ç›¸åŒï¼Œç”±äºæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“çš„ä»£ä»·å¾ˆå¤§ï¼Œè¿™æœ‰å¯èƒ½é€ æˆå¾ˆå¤§çš„èµ„æºæµªè´¹ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡å°‘èµ„æºçš„æµªè´¹ï¼ŒMyBatisä¼šåœ¨è¡¨ç¤ºä¼šè¯çš„SqlSessionå¯¹è±¡ä¸­å»ºç«‹ä¸€ä¸ªç®€å•çš„ç¼“å­˜ï¼Œå°†æ¯æ¬¡æŸ¥è¯¢åˆ°çš„ç»“æœç»“æœç¼“å­˜èµ·æ¥ï¼Œå½“ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœåˆ¤æ–­å…ˆå‰æœ‰ä¸ªå®Œå…¨ä¸€æ ·çš„æŸ¥è¯¢ï¼Œä¼šç›´æ¥ä»ç¼“å­˜ä¸­ç›´æ¥å°†ç»“æœå–å‡ºï¼Œè¿”å›ç»™ç”¨æˆ·ï¼Œä¸éœ€è¦å†è¿›è¡Œä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢äº†ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒMyBatisä¸€æ¬¡ä¼šè¯: ä¸€ä¸ªSqlSessionå¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°ç¼“å­˜(local cache)ï¼Œå¯¹äºæ¯ä¸€æ¬¡æŸ¥è¯¢ï¼Œéƒ½ä¼šå°è¯•æ ¹æ®æŸ¥è¯¢çš„æ¡ä»¶å»æœ¬åœ°ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦åœ¨ç¼“å­˜ä¸­ï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­ï¼Œå°±ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºï¼Œç„¶åè¿”å›ç»™ç”¨æˆ·ï¼›å¦åˆ™ï¼Œä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œå°†æŸ¥è¯¢ç»“æœå­˜å…¥ç¼“å­˜å¹¶è¿”å›ç»™ç”¨æˆ·ã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/mybatis-y-cache-1.png)\n\n## SqlSession ä¸€çº§ç¼“å­˜çš„å·¥ä½œæµç¨‹\n\n- å¯¹äºæŸä¸ªæŸ¥è¯¢ï¼Œæ ¹æ®statementId,params,rowBoundsæ¥æ„å»ºä¸€ä¸ªkeyå€¼ï¼Œæ ¹æ®è¿™ä¸ªkeyå€¼å»ç¼“å­˜Cacheä¸­å–å‡ºå¯¹åº”çš„keyå€¼å­˜å‚¨çš„ç¼“å­˜ç»“æœï¼›\n- åˆ¤æ–­ä»Cacheä¸­æ ¹æ®ç‰¹å®šçš„keyå€¼å–çš„æ•°æ®æ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œå³æ˜¯å¦å‘½ä¸­ï¼›\n- å¦‚æœå‘½ä¸­ï¼Œåˆ™ç›´æ¥å°†ç¼“å­˜ç»“æœè¿”å›ï¼›\n- å¦‚æœæ²¡å‘½ä¸­ï¼š \n  - å»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœï¼›\n  - å°†keyå’ŒæŸ¥è¯¢åˆ°çš„ç»“æœåˆ†åˆ«ä½œä¸ºkey,valueå¯¹å­˜å‚¨åˆ°Cacheä¸­ï¼›\n  - å°†æŸ¥è¯¢ç»“æœè¿”å›ï¼›\n- ç»“æŸã€‚\n\n## ä¾‹å­\n\næ–¹æ³•å¼€å¯äº‹åŠ¡ï¼Œç„¶åå…ˆè¿›è¡Œä¸€æ¬¡æŸ¥è¯¢ï¼Œåœ¨ä¿®æ”¹ï¼Œåœ¨æŸ¥è¯¢ã€‚\n\n```java\n @GetMapping(\"/{id}\")\n @Transactional //å¼€å¯äº‹åŠ¡\n public User getUserOne(@PathVariable int id) {\n    User id1 = userService.getById(id);\n    User user = new User(id,\"ä¿®æ”¹åçš„åå­—\");\n    userService.updateById(user);\n    User user1 = userService.getById(id);\n    return user1;\n}\n```\n\næ§åˆ¶å°æ‰“å°ç»“æœ,å¯ä»¥çœ‹åˆ°æ‰§è¡Œäº†ä¸‰æ¬¡ï¼Œå°±æ˜¯æ²¡æœ‰å‘½ä¸­ç¼“å­˜\n\n```bash\nRegistering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9562f]\nJDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@60260b7d] will be managed by Spring\n==>  Preparing: SELECT id,username FROM USER WHERE id=?\n==> Parameters: 5(Integer)\n<==    Columns: id, username\n<==        Row: 5, Daniel Henderson\n<==      Total: 1\nReleasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9562f]\nFetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9562f] from current transaction\n==>  Preparing: UPDATE USER SET username=? WHERE id=?\n==> Parameters: ä¿®æ”¹åçš„åå­—(String), 5(Integer)\n<==    Updates: 1\nReleasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9562f]\nFetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9562f] from current transaction\n==>  Preparing: SELECT id,username FROM USER WHERE id=?\n==> Parameters: 5(Integer)\n<==    Columns: id, username\n<==        Row: 5, ä¿®æ”¹åçš„åå­—\n<==      Total: 1\n```\n\næ¥ä¸‹æ¥å°†updateè¯­å¥æ³¨é‡Šæ‰ã€‚å¯ä»¥çœ‹åˆ°ä¸¤æ¬¡æŸ¥è¯¢åªæ‰§è¡Œäº†ä¸€æ¬¡æŸ¥è¯¢ï¼Œå› ä¸ºç¬¬äºŒæ¬¡ç›´æ¥åœ¨ç¼“å­˜ä¸­è¿›è¡ŒæŸ¥è¯¢\n\n```bash\nRegistering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a108803]\nJDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@44ab6956] will be managed by Spring\n==>  Preparing: SELECT id,username FROM USER WHERE id=?\n==> Parameters: 5(Integer)\n<==    Columns: id, username\n<==        Row: 5, ä¿®æ”¹åçš„åå­—\n<==      Total: 1\nReleasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a108803]\n```\n\n\n\n# äºŒçº§ç¼“å­˜\n\n> MyBatisçš„äºŒçº§ç¼“å­˜æ˜¯Applicationçº§åˆ«çš„ç¼“å­˜ï¼Œå®ƒå¯ä»¥æé«˜å¯¹æ•°æ®åº“æŸ¥è¯¢çš„æ•ˆç‡ï¼Œä»¥æé«˜åº”ç”¨çš„æ€§èƒ½ã€‚MyBatiså¹¶ä¸æ˜¯ç®€å•åœ°å¯¹æ•´ä¸ªApplicationå°±åªæœ‰ä¸€ä¸ªCacheç¼“å­˜å¯¹è±¡ï¼Œå®ƒå°†ç¼“å­˜åˆ’åˆ†çš„æ›´ç»†ï¼Œå³æ˜¯Mapperçº§åˆ«çš„ï¼Œå³æ¯ä¸€ä¸ªMapperéƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªCacheå¯¹è±¡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/mybatis-y-cache-7.png)\n\n- **ä¸ºæ¯ä¸€ä¸ªMapperåˆ†é…ä¸€ä¸ªCacheç¼“å­˜å¯¹è±¡**ï¼ˆä½¿ç”¨`<cache>`èŠ‚ç‚¹é…ç½®ï¼‰\n\nMyBatiså°†Applicationçº§åˆ«çš„äºŒçº§ç¼“å­˜ç»†åˆ†åˆ°Mapperçº§åˆ«ï¼Œå³å¯¹äºæ¯ä¸€ä¸ªMapper.xml,å¦‚æœåœ¨å…¶ä¸­ä½¿ç”¨äº†`<cache>` èŠ‚ç‚¹ï¼Œåˆ™MyBatisä¼šä¸ºè¿™ä¸ªMapperåˆ›å»ºä¸€ä¸ªCacheç¼“å­˜å¯¹è±¡ï¼Œ\n\n- **å¤šä¸ªMapperå…±ç”¨ä¸€ä¸ªCacheç¼“å­˜å¯¹è±¡**ï¼ˆä½¿ç”¨`<cache-ref>`èŠ‚ç‚¹é…ç½®ï¼‰\n\nå¦‚æœä½ æƒ³è®©å¤šä¸ªMapperå…¬ç”¨ä¸€ä¸ªCacheçš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨`<cache-ref namespace=\"\">`èŠ‚ç‚¹ï¼Œæ¥æŒ‡å®šä½ çš„è¿™ä¸ªMapperä½¿ç”¨åˆ°äº†å“ªä¸€ä¸ªMapperçš„Cacheç¼“å­˜ã€‚\n\n- MyBatiså¯¹äºŒçº§ç¼“å­˜çš„æ”¯æŒç²’åº¦å¾ˆç»†ï¼Œå®ƒä¼šæŒ‡å®šæŸä¸€æ¡æŸ¥è¯¢è¯­å¥æ˜¯å¦ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚\n\nè™½ç„¶åœ¨Mapperä¸­é…ç½®äº†`<cache>`,å¹¶ä¸”ä¸ºæ­¤Mapperåˆ†é…äº†Cacheå¯¹è±¡ï¼Œè¿™å¹¶ä¸è¡¨ç¤ºæˆ‘ä»¬ä½¿ç”¨Mapperä¸­å®šä¹‰çš„æŸ¥è¯¢è¯­å¥æŸ¥åˆ°çš„ç»“æœéƒ½ä¼šæ”¾ç½®åˆ°Cacheå¯¹è±¡ä¹‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®šMapperä¸­çš„æŸæ¡é€‰æ‹©è¯­å¥æ˜¯å¦æ”¯æŒç¼“å­˜ï¼Œå³å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨`<select>` èŠ‚ç‚¹ä¸­é…ç½®useCache=\"true\"ï¼ŒMapperæ‰ä¼šå¯¹æ­¤Selectçš„æŸ¥è¯¢æ”¯æŒç¼“å­˜ç‰¹æ€§ï¼Œå¦åˆ™ï¼Œä¸ä¼šå¯¹æ­¤SelectæŸ¥è¯¢ï¼Œä¸ä¼šç»è¿‡Cacheç¼“å­˜ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼ŒSelectè¯­å¥é…ç½®äº†useCache=\"true\"ï¼Œåˆ™è¡¨æ˜è¿™æ¡Selectè¯­å¥çš„æŸ¥è¯¢ä¼šä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚\n\n```xml\n<select id=\"selectByMinSalary\" resultMap=\"BaseResultMap\" parameterType=\"java.util.Map\" useCache=\"true\">\n```\n\næ€»ä¹‹ï¼Œè¦æƒ³ä½¿æŸæ¡SelectæŸ¥è¯¢æ”¯æŒäºŒçº§ç¼“å­˜ï¼Œä½ éœ€è¦ä¿è¯ï¼š\n\n- MyBatisæ”¯æŒäºŒçº§ç¼“å­˜çš„æ€»å¼€å…³ï¼šå…¨å±€é…ç½®å˜é‡å‚æ•° cacheEnabled=true\n- è¯¥selectè¯­å¥æ‰€åœ¨çš„Mapperï¼Œé…ç½®äº†`<cache>` æˆ–`<cached-ref>`èŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ‰æ•ˆ\n- è¯¥selectè¯­å¥çš„å‚æ•° useCache=true\n\n### äºŒçº§ç¼“å­˜å®ç°çš„é€‰æ‹©\n\nMyBatiså¯¹äºŒçº§ç¼“å­˜çš„è®¾è®¡éå¸¸çµæ´»ï¼Œå®ƒè‡ªå·±å†…éƒ¨å®ç°äº†ä¸€ç³»åˆ—çš„Cacheç¼“å­˜å®ç°ç±»ï¼Œå¹¶æä¾›äº†å„ç§ç¼“å­˜åˆ·æ–°ç­–ç•¥å¦‚LRUï¼ŒFIFOç­‰ç­‰ï¼›å¦å¤–ï¼ŒMyBatisè¿˜å…è®¸ç”¨æˆ·è‡ªå®šä¹‰Cacheæ¥å£å®ç°ï¼Œç”¨æˆ·æ˜¯éœ€è¦å®ç°org.apache.ibatis.cache.Cacheæ¥å£ï¼Œç„¶åå°†Cacheå®ç°ç±»é…ç½®åœ¨`<cache type=\"\">`èŠ‚ç‚¹çš„typeå±æ€§ä¸Šå³å¯ï¼›é™¤æ­¤ä¹‹å¤–ï¼ŒMyBatisè¿˜æ”¯æŒè·Ÿç¬¬ä¸‰æ–¹å†…å­˜ç¼“å­˜åº“å¦‚Memecachedçš„é›†æˆï¼Œæ€»ä¹‹ï¼Œä½¿ç”¨MyBatisçš„äºŒçº§ç¼“å­˜æœ‰ä¸‰ä¸ªé€‰æ‹©:\n\n- MyBatisè‡ªèº«æä¾›çš„ç¼“å­˜å®ç°ï¼›\n- ç”¨æˆ·è‡ªå®šä¹‰çš„Cacheæ¥å£å®ç°ï¼›\n- è·Ÿç¬¬ä¸‰æ–¹å†…å­˜ç¼“å­˜åº“çš„é›†æˆ;\n\n\n\n### å®ç°ï¼ˆç®€å•é…ç½®ï¼‰\n\n```yml\nmybatis-plus:\n  mapper-locations: classpath:com/example/cachetest/mapper/*.xml # åŠ è½½xmlæ–‡ä»¶\n  configuration:\n    cache-enabled: true  #å¼€å¯å…¨å±€äºŒçº§ç¼“å­˜\n```\n\nå¼€å¯å…¨å±€ç¼“å­˜ä¹‹åï¼Œåªéœ€è¦åœ¨mapperä¸Šå¼€å¯mapperçš„ç¼“å­˜å°±èƒ½å¯¹å•ä¸ªmapperå®ç°ç¼“å­˜ã€‚\n\n```java\n@Mapper\n@CacheNamespace(eviction = FifoCache.class) //è¿™é‡ŒFifoCacheç¼“å­˜æ¸…é™¤æœºåˆ¶ã€‚\npublic interface UserMapper extends BaseMapper<User> {\n\n}\n```\n\nå¼€å¯ç¼“å­˜åè¿ç»­è®¿é—®å¤šæ¬¡åŒä¸€ä¸ªæ•°æ®,å¯ä»¥çœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œç¼“å­˜å‘½ä¸­ç‡ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨å‘èµ·å¯¹æ•°æ®åº“å‘èµ·æ–°çš„æŸ¥è¯¢ã€‚\n\n```bash\nCache Hit Ratio [com.example.cachetest.mapper.UserMapper]: 0.5\n```\n\n\n\n## Rediså®ç°äºŒçº§ç¼“å­˜\n\n### é…ç½®redisï¼Œè¿™é‡Œéœ€è¦å¯¹redisTemplateè¿›è¡Œåºåˆ—åŒ–é…ç½®\n\n```java\n@Configuration\npublic class RedisConfig {\n\n    @Bean\n    public RedisTemplate<String,Object > redisTemplate(RedisConnectionFactory factory){\n        RedisTemplate<String,Object> redisTemplate=new RedisTemplate<>();\n        RedisSerializer<String > redisSerializer = new StringRedisSerializer();\n        //ä½¿ç”¨Jacksonçš„åºåˆ—åŒ–å™¨ï¼Œåœ¨åé¢å¯¹valueè¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¯¹Objectç±»åºåˆ—åŒ–\n          /*\n        è®¾ç½®objectMapperï¼›è½¬æ¢javaå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨çš„\n         */\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);\n\n        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<Object>(objectMapper,Object.class);\n        redisTemplate.setConnectionFactory(factory);\n        redisTemplate.setKeySerializer(redisSerializer);\n        //valueåºåˆ—åŒ–\n        redisTemplate.setValueSerializer(serializer);\n        //value hashmapåºåˆ—åŒ–\n        redisTemplate.setHashKeySerializer(redisSerializer);\n        //key hashmapåºåˆ—åŒ–\n        redisTemplate.setHashValueSerializer(serializer);\n\n        redisTemplate.afterPropertiesSet();\n\n        return redisTemplate;\n    }\n}\n```\n\n### application.ymlä¸­å…³äºredisçš„é…ç½®\n\n```yml\nspring:\n  data:\n    redis:\n      host: 192.168.137.111\n      port: 6379\n      password: 123456\n      database: 0\n      timeout: 3000\n```\n\n### è‡ªå®šä¹‰Mybatisç¼“å­˜\n\n**åœ¨è¿™é‡Œæœ‰ä¸ªé‡ç‚¹ï¼ŒMybatisRedisCacheä¸­å¿…é¡»è¦ä¸€ä¸ªåªæœ‰idçš„æ„é€ å™¨ï¼ˆæˆ‘è¿™é‡Œæ˜¯nameSpaceï¼‰ã€‚**\n\néœ€è¦ä½¿ç”¨redisTemplateå¯ä»¥ç”¨ä¸€ä¸ªç±»å®ç°ApplicationContextAwareæ¥å£ï¼Œè°ƒç”¨Applicationcontext.getBean()æ–¹æ³•è·å–redisTemplateã€‚\n\n```java\n/**\n * Description:\n *\n * @date:2023/6/26 14:24\n * @author: ilpvc\n */\n\n@Slf4j\npublic class MybatisRedisCache implements Cache {\n\n    private final ReadWriteLock readWriteLock = new ReentrantReadWriteLock();\n    private RedisTemplate<String,Object> redisTemplate;\n\n    private final String nameSpace;\n\n    private RedisTemplate<String,Object> getRedisTemplate(){\n        this.redisTemplate = SpringUtils.getBean(\"redisTemplate\",RedisTemplate.class);\n        return redisTemplate;\n    }\n\n    public MybatisRedisCache(String nameSpace){\n        if (nameSpace==null) {\n            throw new IllegalArgumentException(\"Cache instances require an ID\");\n        }\n        this.nameSpace = nameSpace;\n\n    }\n\n    @Override\n    public String getId() {\n        return this.nameSpace;\n    }\n\n    @Override\n    public void putObject(Object key, Object value) {\n        getRedisTemplate().opsForValue().set(String.valueOf(key),value,10, TimeUnit.MINUTES);\n    }\n\n    @Override\n    public Object getObject(Object o) {\n        return getRedisTemplate().opsForValue().get(String.valueOf(o));\n    }\n\n    @Override\n    public Object removeObject(Object o) {\n        return getRedisTemplate().opsForValue().getAndDelete(String.valueOf(o));\n    }\n\n    @Override\n    public void clear() {\n        Set<String> keys = getRedisTemplate().keys(\"*\");\n        if (keys!=null){\n            getRedisTemplate().delete(keys);\n        }\n    }\n\n    @Override\n    public int getSize() {\n        Set<String> keys = getRedisTemplate().keys(\"*\");\n        if (keys==null){\n            throw new NullPointerException();\n        }\n        return keys.size();\n    }\n\n    @Override\n    public ReadWriteLock getReadWriteLock() {\n        return this.readWriteLock;\n    }\n}\n\n```\n\nè‡ªå®šä¹‰çš„SpringUtilså®ç°ApplicationContextAware\n\n```java\n@Component\npublic class SpringUtils implements ApplicationContextAware {\n    private static ApplicationContext applicationContext;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        SpringUtils.applicationContext = applicationContext;\n    }\n\n    //æ ¹æ®bean name è·å–å®ä¾‹\n    // é€šè¿‡nameè·å– Bean.\n    public static Object getBean(String name) {\n        return applicationContext.getBean(name);\n    }\n    // é€šè¿‡classè·å–Bean.\n    public static <T> T getBean(Class<T> clazz) {\n        return applicationContext.getBean(clazz);\n    }\n    // é€šè¿‡name,ä»¥åŠClazzè¿”å›æŒ‡å®šçš„Bean\n    public static <T> T getBean(String name, Class<T> clazz) {\n        return applicationContext.getBean(name, clazz);\n    }\n}\n```\n\nç„¶ååœ¨UserMapperä¸ŠåŠ ä¸Šæ³¨è§£`@CacheNamespace(implementation = MybatisRedisCache.class)`\n\n","tags":["mybatis","java"],"categories":["javaå…¨æ ˆ"]},{"title":"å…³äºObjectMapper","url":"/2023/06/26/å…³äºObjectMapper/","content":"\n## å‰æ\n\njacksonå¹¶æ²¡æœ‰ç±»ä¼¼fastjsonçš„`JSON.parseObjec`è¿™æ ·çš„ï¼Œç¡®å®çœ‹èµ·æ¥å¾ˆå¿«çš„æ–¹æ³•ã€‚è¦æƒ³è§£æjsonï¼Œä½ ä¸å¾—ä¸newä¸€ä¸ªObjectMapperï¼Œæ¥å¤„ç†çœŸæ­£çš„è§£æåŠ¨ä½œã€‚\n\nå°±åƒä¸‹é¢è¿™æ ·ã€‚\n\n```java\npublic String getCarString(Car car){\n    ObjectMapper objectMapper = new ObjectMapper();\n    String str = objectMapper.writeValueAsString(car);\n    return str;\n}\n```\n\nè¿™ç§ä»£ç å°±åœ¨CVå·¥ç¨‹å¸ˆæ‰‹ä¸­éåœ°å¼€äº†èŠ±ã€‚\n\n## è¿™ä»£ç æœ‰é—®é¢˜ä¹ˆï¼Ÿ\n\nä½ è¦è¯´å®ƒæœ‰é—®é¢˜ï¼Œå®ƒç¡®å®èƒ½æ­£ç¡®çš„æ‰§è¡Œã€‚ä½ è¦è¯´å®ƒæ²¡é—®é¢˜ï¼Œåœ¨è¿½æ±‚æ€§èƒ½çš„åŒå­¦çœ¼é‡Œï¼Œè¿™è‚¯å®šæ˜¯ä¸€æ®µåæ¶ä¸èµ¦çš„ä»£ç ã€‚\n\nä¸€èˆ¬çš„å·¥å…·ç±»ï¼Œéƒ½æ˜¯å•ä¾‹çš„ï¼ŒåŒæ—¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ObjectMapperä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½ å¯ä»¥å¹¶å‘çš„æ‰§è¡Œå®ƒï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•é—®é¢˜ã€‚\n\nè¿™æ®µä»£ç ï¼ŒObjectMapperåœ¨æ¯æ¬¡æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªã€‚é‚£å®ƒé™¤äº†é€ æˆä¸€å®šçš„å¹´è½»ä»£å†…å­˜æµªè´¹ä¹‹å¤–ï¼Œåœ¨æ‰§è¡Œæ—¶é—´ä¸Šæœ‰æ²¡æœ‰ä»€ä¹ˆç¡¬ä¼¤å‘¢ï¼Ÿ\n\nJMH(the Java Microbenchmark Harness) æ˜¯è¿™æ ·ä¸€ä¸ªèƒ½å¤ŸåšåŸºå‡†æµ‹è¯•çš„å·¥å…·ã€‚å¦‚æœä½ é€šè¿‡æˆ‘ä»¬ä¸€ç³»åˆ—çš„å·¥å…·ï¼Œå®šä½åˆ°äº†çƒ­ç‚¹ä»£ç ï¼Œè¦æµ‹è¯•å®ƒçš„æ€§èƒ½æ•°æ®ï¼Œè¯„ä¼°æ”¹å–„æƒ…å†µï¼Œå°±å¯ä»¥äº¤ç»™JMHã€‚å®ƒçš„æµ‹é‡ç²¾åº¦éå¸¸é«˜ï¼Œæœ€é«˜å¯è¾¾åˆ°çº³ç§’çš„çº§åˆ«ã€‚\n\n`JMH`æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œå®ƒå’Œå•å…ƒæµ‹è¯•æ¡†æ¶`JUnit`éå¸¸çš„åƒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£è¿›è¡Œä¸€äº›åŸºç¡€é…ç½®ã€‚è¿™éƒ¨åˆ†é…ç½®æœ‰å¾ˆå¤šæ˜¯å¯ä»¥é€šè¿‡mainæ–¹æ³•çš„`OptionsBuilder`è¿›è¡Œè®¾ç½®çš„ã€‚\n\n![JMH](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230626141615.png)\n\nä¸Šå›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„JMHç¨‹åºæ‰§è¡Œçš„å†…å®¹ã€‚é€šè¿‡å¼€å¯å¤šä¸ªè¿›ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹ï¼Œé¦–å…ˆæ‰§è¡Œé¢„çƒ­ï¼Œç„¶åæ‰§è¡Œè¿­ä»£ï¼Œæœ€åæ±‡æ€»æ‰€æœ‰çš„æµ‹è¯•æ•°æ®è¿›è¡Œåˆ†æã€‚åœ¨æ‰§è¡Œå‰åï¼Œè¿˜å¯ä»¥æ ¹æ®ç²’åº¦å¤„ç†ä¸€äº›å‰ç½®å’Œåç½®æ“ä½œã€‚\n\n## JMHæµ‹è¯•ç»“æœ\n\nä¸ºäº†æµ‹è¯•ä¸Šé¢çš„åœºæ™¯ï¼Œæˆ‘ä»¬åˆ›é€ äº†ä¸‹é¢çš„åŸºå‡†æµ‹è¯•ç±»ã€‚åˆ†ä¸ºä¸‰ä¸ªæµ‹è¯•åœºæ™¯ï¼š\n\n1. ç›´æ¥åœ¨æ–¹æ³•é‡Œnew ObjectMapper\n2. åœ¨å…¨å±€å…±äº«ä¸€ä¸ªObjectMapper\n3. ä½¿ç”¨ThreadLocalï¼Œæ¯ä¸ªçº¿ç¨‹ä¸€ä¸ªObjectMapper\n\nè¿™æ ·çš„æµ‹è¯•å±äºcpuå¯†é›†å‹çš„ã€‚æˆ‘çš„cpuæœ‰10æ ¸ï¼Œç›´æ¥å°±åˆ†é…äº†10ä¸ªçº¿ç¨‹çš„å¹¶å‘ï¼Œcpuåœ¨æµ‹è¯•æœŸé—´è·‘çš„æ»¡æ»¡çš„ã€‚\n\n```java\n@BenchmarkMode({Mode.Throughput})\n@OutputTimeUnit(TimeUnit.SECONDS)\n@State(Scope.Thread)\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\n@Fork(1)\n@Threads(10)\npublic class ObjectMapperTest {\n    String json = \"{ \\\"color\\\" : \\\"Black\\\", \\\"type\\\" : \\\"BMW\\\" }\";\n\n    @State(Scope.Benchmark)\n    public static class BenchmarkState {\n        ObjectMapper GLOBAL_MAP = new ObjectMapper();\n        ThreadLocal<ObjectMapper> GLOBAL_MAP_THREAD = new ThreadLocal<>();\n    }\n\n    @Benchmark\n    public Map globalTest(BenchmarkState state) throws Exception{\n        Map map = state.GLOBAL_MAP.readValue(json, Map.class);\n        return map;\n    }\n\n\n    @Benchmark\n    public Map globalTestThreadLocal(BenchmarkState state) throws Exception{\n        if(null == state.GLOBAL_MAP_THREAD.get()){\n            state.GLOBAL_MAP_THREAD.set(new ObjectMapper());\n        }\n        Map map = state.GLOBAL_MAP_THREAD.get().readValue(json, Map.class);\n        return map;\n    }\n\n    @Benchmark\n    public Map localTest() throws Exception{\n        ObjectMapper objectMapper = new ObjectMapper();\n        Map map = objectMapper.readValue(json, Map.class);\n        return map;\n    }\n\n    public static void main(String[] args) throws Exception {\n        Options opts = new OptionsBuilder()\n                .include(ObjectMapperTest.class.getSimpleName())\n                .resultFormat(ResultFormatType.CSV)\n                .build();\n\n        new Runner(opts).run();\n    }\n}\n```\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ã€‚\n\n```bash\nbashå¤åˆ¶ä»£ç Benchmark                                Mode  Cnt         Score         Error  Units\nObjectMapperTest.globalTest             thrpt    5  25125094.559 Â± 1754308.010  ops/s\nObjectMapperTest.globalTestThreadLocal  thrpt    5  31780573.549 Â± 7779240.155  ops/s\nObjectMapperTest.localTest              thrpt    5   2131394.345 Â±  216974.682  ops/s\n```\n\nä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨éƒ½newä¸€ä¸ªObjectMapperï¼Œæ¯ç§’å¯ä»¥æ‰§è¡Œ200ä¸‡æ¬¡JSONè§£æï¼›å¦‚æœå…¨å±€ä½¿ç”¨ä¸€ä¸ªObjectMapperï¼Œåˆ™æ¯ç§’å¯ä»¥æ‰§è¡Œ2000å¤šä¸‡æ¬¡ï¼Œé€Ÿåº¦è¶³è¶³å¿«äº†10å€ã€‚\n\nå¦‚æœä½¿ç”¨ThreadLocalçš„æ–¹å¼ï¼Œæ¯ä¸ªçº¿ç¨‹ç»™å®ƒåˆ†é…ä¸€ä¸ªè§£æå™¨ï¼Œåˆ™æ€§èƒ½ä¼šæœ‰å°‘è®¸ä¸Šå‡ï¼Œä½†ä¹Ÿæ²¡æœ‰è¾¾åˆ°éå¸¸å¤¸å¼ çš„åœ°æ­¥ã€‚\n\næ‰€ä»¥åœ¨é¡¹ç›®ä¸­å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿è¯æœ‰ä¸€ä¸ªå…¨å±€çš„ObjectMapperå°±å¯ä»¥äº†ã€‚\n\nå½“ç„¶ï¼Œç”±äºObjectMapperæœ‰å¾ˆå¤šçš„ç‰¹æ€§éœ€è¦é…ç½®ï¼Œä½ å¯èƒ½ä¼šä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯åˆ†é…ä¸€ä¸ªå•ç‹¬ä½¿ç”¨çš„ObjectMapperã€‚æ€»ä¹‹ï¼Œå®ƒçš„æ•°é‡ä¸éœ€è¦å¤ªå¤šï¼Œå› ä¸ºå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\n## End\n\næ‰€ä»¥ç»“è®ºå°±æ¯”è¾ƒæ¸…æ™°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ•´ä¸ªé¡¹ç›®é‡Œä½¿ç”¨ä¸€ä¸ªObjectMapperå°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦å‚»ä¸æ‹‰å‡ çš„æ¯æ¬¡éƒ½newä¸€ä¸ªï¼Œæ¯•ç«Ÿæ€§èƒ½å·®äº†10å€ã€‚å¦‚æœä½ çš„JSONæœ‰å¾ˆå¤šè‡ªå®šä¹‰çš„é…ç½®ï¼Œä½¿ç”¨å…¨å±€çš„å˜é‡æ›´èƒ½å‡¸æ˜¾å®ƒçš„ä¼˜åŠ¿ã€‚\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"å…³äºæ•°æ®åº“è¿æ¥æ± ","url":"/2023/06/25/å…³äºæ•°æ®åº“è¿æ¥æ± /","content":"\n# æ•°æ®åº“è¿æ¥æ± çš„æ¦‚å¿µ\n\n- æ•°æ®åº“è¿æ¥èƒŒæ™¯æ•°æ®åº“è¿æ¥æ˜¯ä¸€ç§å…³é”®çš„ã€æœ‰é™çš„ã€æ˜‚è´µçš„èµ„æºï¼Œè¿™ä¸€ç‚¹åœ¨å¤šç”¨æˆ·çš„ç½‘é¡µåº”ç”¨ç¨‹åºä¸­ä½“ç°å¾—å°¤ä¸ºçªå‡ºã€‚å¯¹æ•°æ®åº“è¿æ¥çš„ç®¡ç†èƒ½æ˜¾è‘—å½±å“åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ä¼¸ç¼©æ€§å’Œå¥å£®æ€§ï¼Œå½±å“åˆ°ç¨‹åºçš„æ€§èƒ½æŒ‡æ ‡ã€‚æ•°æ®åº“è¿æ¥æ± æ­£æ˜¯é’ˆå¯¹è¿™ä¸ªé—®é¢˜æå‡ºæ¥çš„ã€‚\n- æ•°æ®åº“è¿æ¥æ± æ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ªã€‚è¿™é¡¹æŠ€æœ¯èƒ½æ˜æ˜¾æé«˜å¯¹æ•°æ®åº“æ“ä½œçš„æ€§èƒ½ã€‚\n- æ•°æ®åº“è¿æ¥æ± çš„åŸç†æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼šä¸€ä¸ªè®¿é—®åˆ›å»ºä¸€ä¸ªè¿æ¥ï¼Œä½¿ç”¨å®Œå…³é—­è¿æ¥ã€‚è€Œé¢‘ç¹çš„åˆ›å»ºå’Œå…³é—­è¿æ¥éå¸¸è€—æ—¶\n\n- ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ä¹‹åï¼šæå‰å‡†å¤‡ä¸€äº›æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨æ—¶ä»æ± ä¸­å–å‡ºï¼Œç”¨å®Œå½’è¿˜è¿æ¥æ± \n\n\n\n# è‡ªå®šä¹‰è¿æ¥æ± \n\n## åˆæ¢è¿æ¥æ± \n\n### è‡ªå®šä¹‰JDBCå·¥å…·ç±»\n\né…ç½®æ–‡ä»¶ config.properties\n\n```ini\niniå¤åˆ¶ä»£ç driverClass=com.mysql.jdbc.Driver\nurl=jdbc:mysql://ä¸»æœºå:3306/æ•°æ®åº“å\nusername=ç”¨æˆ·å\npassword=å¯†ç \n```\n\nJDBCUtilså·¥å…·ç±»\n\n```java\npublic class JDBCUtils {\n    private JDBCUtils() {}  //æ„é€ å‡½æ•°ç§æœ‰åŒ–\n\n    private static String driverClass;\n    private static String url;\n    private static String username;\n    private static String password;\n    private static Connection con;\n\n    static {\n        try {\n            InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream(\"config.properties\");\n            Properties properties = new Properties();\n            properties.load(is);\n            driverClass = properties.getProperty(\"driverClass\");\n            url = properties.getProperty(\"url\");\n            username = properties.getProperty(\"username\");\n            password = properties.getProperty(\"password\");\n            Class.forName(driverClass);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static Connection getConnection() {  //è·å–è¿æ¥å¯¹è±¡\n        try {\n            con = DriverManager.getConnection(url, username, password);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return con;\n    }\n    //å…³é—­è¿æ¥ï¼ˆæœ‰æŸ¥è¯¢ç»“æœé›†ï¼‰\n    public static void close(Connection con, Statement stat, ResultSet res) {\n        if (con != null) {\n            try {\n                con.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        if (stat != null) {\n            try {\n                stat.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        if (res != null) {\n            try {\n                res.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    //å…³é—­è¿æ¥ï¼ˆæ— æŸ¥è¯¢ç»“æœé›†ï¼‰\n    public static void close(Connection con, Statement stat) {\n        close(con, stat, null);\n    }\n}\n```\n\n### å®ç°è¿æ¥æ± ç±»\n\nå®šä¹‰ä¸€ä¸ªè¿æ¥æ± ç±»å¹¶å®ç° java.sql.DataSource æ¥å£ã€‚\n\n```java\nConnection getConnection();  //è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡\n\npublic class MyDataSource implements DataSource{\n    //å®šä¹‰é›†åˆå®¹å™¨ï¼Œç”¨äºä¿å­˜å¤šä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡\n    //ä½¿ç”¨Collections å·¥å…·ç±»å®ç°é›†åˆçš„çº¿ç¨‹åŒæ­¥\n    private static List<Connection> pool = Collections.synchronizedList(new ArrayList<Connection>());\n\n    //é™æ€ä»£ç å—ï¼Œç”Ÿæˆ10ä¸ªæ•°æ®åº“è¿æ¥ä¿å­˜åˆ°é›†åˆä¸­\n    static {\n        for (int i = 0; i < 10; i++) {\n            Connection con = JDBCUtils.getConnection();\n            pool.add(con);\n        }\n    }\n\n    //è¿”å›è¿æ¥æ± çš„å¤§å°\n    public int getSize() {\n        return pool.size();\n    }\n\n    //ä»æ± ä¸­è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥\n    @Override\n    public Connection getConnection() {\n        if(pool.size() > 0) {\n            //ä»æ± ä¸­è·å–æ•°æ®åº“è¿æ¥\n            return pool.remove(0);\n        }else {\n            throw new RuntimeException(\"è¿æ¥æ•°é‡å·²ç”¨å°½\");\n        }\n    }\n\n    @Override\n    public Connection getConnection(String username, String password) throws SQLException {\n        return null;\n    }\n\n    @Override\n    public <T> T unwrap(Class<T> iface) throws SQLException {\n        return null;\n    }\n\n    @Override\n    public boolean isWrapperFor(Class<?> iface) throws SQLException {\n        return false;\n    }\n\n    @Override\n    public PrintWriter getLogWriter() throws SQLException {\n        return null;\n    }\n\n    @Override\n    public void setLogWriter(PrintWriter out) throws SQLException {\n\n    }\n\n    @Override\n    public void setLoginTimeout(int seconds) throws SQLException {\n\n    }\n\n    @Override\n    public int getLoginTimeout() throws SQLException {\n        return 0;\n    }\n\n    @Override\n    public Logger getParentLogger() throws SQLFeatureNotSupportedException {\n        return null;\n    }\n}\n```\n\n### è‡ªå®šä¹‰è¿æ¥æ± çš„æµ‹è¯•\n\n```java\npublic class MyDataSourceTest {\n    public static void main(String[] args) throws SQLException {\n        MyDataSource dataSource = new MyDataSource();\n        System.out.println(\"ä½¿ç”¨å‰è¿æ¥æ± æ•°é‡ï¼š\" + dataSource.getSize());\n\n        Connection con = dataSource.getConnection();\n\n        String sql = \"select * from emp\";\n\n        PreparedStatement pst = con.prepareStatement(sql);\n\n        ResultSet res = pst.executeQuery();\n        while (res.next()) {\n            String ename = res.getString(\"ename\");\n            String job = res.getString(\"job\");\n            String hiredate = res.getString(\"hiredate\");\n            System.out.println(\"ename:\" + ename + \"\\t job:\" + job + \"\\t hiredate:\" + hiredate);\n        }\n\n        res.close();\n        pst.close();\n        con.close();\n        System.out.println(\"ä½¿ç”¨åè¿æ¥æ± æ•°é‡ï¼š\" + dataSource.getSize());\n    }\n}\n```\n\nè¾“å‡ºï¼š\n\n```bash\nä½¿ç”¨å‰è¿æ¥æ± æ•°é‡ï¼š10\nename:SMITH\t job:CLERK\t hiredate:1980-12-17\nename:ALLEN\t job:SALESMAN\t hiredate:1981-02-20\nename:WARD\t job:SALESMAN\t hiredate:1981-02-22\nename:JONES\t job:MANAGER\t hiredate:1981-04-02\nename:MARTIN\t job:SALESMAN\t hiredate:1981-09-28\nename:BLAKE\t job:MANAGER\t hiredate:1981-05-01\nename:CLARK\t job:MANAGER\t hiredate:1981-06-09\nename:SCOTT\t job:ANALYST\t hiredate:1987-04-19\nename:KING\t job:PRESIDENT\t hiredate:1981-11-17\nename:TURNER\t job:SALESMAN\t hiredate:1981-09-08\nename:ADAMS\t job:CLERK\t hiredate:1987-05-23\nename:JAMES\t job:CLERK\t hiredate:1981-12-03\nename:FORD\t job:ANALYST\t hiredate:1981-12-03\nename:MILLER\t job:CLERK\t hiredate:1982-01-23\nä½¿ç”¨åè¿æ¥æ± æ•°é‡ï¼š9\n```\n\né—®é¢˜ï¼šè™½ç„¶æˆ‘ä»¬è‡ªå®šä¹‰äº†æ•°æ®åº“è¿æ¥æ± ï¼Œä½†æ˜¯è¿æ¥å…³é—­ä»¥åå¹¶æ²¡æœ‰å½’è¿˜ç»™æ•°æ®åº“è¿æ¥æ± ï¼Œè¿˜éœ€è¦æ”¹è¿› å½’è¿˜è¿æ¥ çš„é—®é¢˜\n\n### ç»§æ‰¿æ–¹å¼æ”¹è¿›è¿æ¥æ± \n\n```java\nSystem.out.println(JDBCUtils.getConnection());\n//com.mysql.jdbc.JDBC4Connection@470e2030\n```\n\né€šè¿‡è¾“å‡º Connection çš„åœ°å€å‘ç° Connection ç±»çš„å®ç°ç±»æ˜¯ JDBC4Connection ï¼Œæ˜¯å¦èƒ½å¤Ÿé€šè¿‡ç¼–å†™ä¸€ä¸ªç±»ç»§æ‰¿ JDBC4Connection ï¼Œç„¶åé‡å†™ close() æ–¹æ³•ï¼Œåœ¨å…³é—­è¿æ¥çš„åŒæ—¶å½’è¿˜è¿æ¥ï¼Ÿ\n\n```java\n/*\n      è‡ªå®šä¹‰Connectionç±»\n   */\n  public class MyConnection1 extends JDBC4Connection {\n      //å£°æ˜è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± é›†åˆå¯¹è±¡\n      private Connection con;\n      private List<Connection> pool;\n  \n      //é€šè¿‡æ„é€ æ–¹æ³•ç»™æˆå‘˜å˜é‡èµ‹å€¼\n      public MyConnection1(String hostToConnectTo, int portToConnectTo, Properties info, String databaseToConnectTo, String url,Connection con,List<Connection> pool) throws SQLException {\n          super(hostToConnectTo, portToConnectTo, info, databaseToConnectTo, url);\n          this.con = con;\n          this.pool = pool;\n      }\n  \n      //é‡å†™close()æ–¹æ³•ï¼Œå°†è¿æ¥å½’è¿˜ç»™æ± ä¸­\n      @Override\n      public void close() throws SQLException {\n          pool.add(con);\n      }\n  }\n```\n\nä½†æ˜¯è¿™ç§æ–¹å¼è¡Œä¸é€šï¼Œé€šè¿‡æŸ¥çœ‹JDBCå·¥å…·ç±»è·å–è¿æ¥çš„æ–¹æ³•æˆ‘ä»¬å‘ç°ï¼šæˆ‘ä»¬è™½ç„¶è‡ªå®šä¹‰äº†ä¸€ä¸ªå­ç±»ï¼Œå®Œæˆäº†å½’è¿˜è¿æ¥çš„æ“ä½œã€‚ä½†æ˜¯ DriverManager è·å–çš„è¿˜æ˜¯ JDBC4Connection è¿™ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬çš„å­ç±»å¯¹è±¡ã€‚è€Œæˆ‘ä»¬åˆä¸èƒ½æ•´ä½“å»ä¿®æ”¹é©±åŠ¨åŒ…ä¸­ç±»çš„åŠŸèƒ½ï¼\n\n```java\n//å°†ä¹‹å‰çš„è¿æ¥å¯¹è±¡æ¢æˆè‡ªå®šä¹‰çš„å­ç±»å¯¹è±¡\n  private static MyConnection1 con;\n  \n  public static Connection getConnection() {\n      try {\n          //ç­‰æ•ˆäºï¼šMyConnection1 con = new JDBC4Connection();  å­ç±»å¼•ç”¨æŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼Œè¯­æ³•é”™è¯¯ï¼\n          con = DriverManager.getConnection(url,username,password);\n      } catch (SQLException e) {\n          e.printStackTrace();\n      }\n  \n      return con;\n  }\n```\n\n### è£…é¥°è®¾è®¡æ¨¡å¼æ”¹è¿›è¿æ¥æ± \n\nè‡ªå®šä¹‰Connectionç±»ã€‚é€šè¿‡è£…é¥°è®¾è®¡æ¨¡å¼ï¼Œå®ç°å’Œmysqlé©±åŠ¨åŒ…ä¸­çš„Connectionå®ç°ç±»ç›¸åŒçš„åŠŸèƒ½ï¼\n\nå®ç°æ­¥éª¤ï¼š\n\n- å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°Connectionæ¥å£\n\n- å®šä¹‰Connectionè¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å®¹å™¨å¯¹è±¡çš„å˜é‡\n\n- æä¾›æœ‰å‚æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å¯¹è±¡ï¼Œå¯¹å˜é‡èµ‹å€¼\n\n- åœ¨close()æ–¹æ³•ä¸­ï¼Œå®Œæˆè¿æ¥çš„å½’è¿˜\n\n- å‰©ä½™æ–¹æ³•ï¼Œåªéœ€è¦è°ƒç”¨mysqlé©±åŠ¨åŒ…çš„è¿æ¥å¯¹è±¡å®Œæˆå³å¯\n\n  public class MyConnection2 implements Connection {\n\n  ```java\n    //2.å®šä¹‰Connectionè¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å®¹å™¨å¯¹è±¡çš„å˜é‡\n    private Connection con;\n    private List<Connection> pool;\n  \n    //3.æä¾›æœ‰å‚æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å¯¹è±¡ï¼Œå¯¹å˜é‡èµ‹å€¼\n    public MyConnection2(Connection con,List<Connection> pool) {\n        this.con = con;\n        this.pool = pool;\n    }\n  \n    //4.åœ¨close()æ–¹æ³•ä¸­ï¼Œå®Œæˆè¿æ¥çš„å½’è¿˜\n    @Override\n    public void close() throws SQLException {\n        pool.add(con);\n    }\n  \n  \n    @Override\n    public Statement createStatement() throws SQLException {\n        return con.createStatement();\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql) throws SQLException {\n        return con.prepareStatement(sql);\n    }\n  \n    @Override\n    public CallableStatement prepareCall(String sql) throws SQLException {\n        return con.prepareCall(sql);\n    }\n  \n    @Override\n    public String nativeSQL(String sql) throws SQLException {\n        return con.nativeSQL(sql);\n    }\n  \n    @Override\n    public void setAutoCommit(boolean autoCommit) throws SQLException {\n        con.setAutoCommit(autoCommit);\n    }\n  \n    @Override\n    public boolean getAutoCommit() throws SQLException {\n        return con.getAutoCommit();\n    }\n  \n    @Override\n    public void commit() throws SQLException {\n        con.commit();\n    }\n  \n    @Override\n    public void rollback() throws SQLException {\n        con.rollback();\n    }\n  \n    @Override\n    public boolean isClosed() throws SQLException {\n        return con.isClosed();\n    }\n  \n    @Override\n    public DatabaseMetaData getMetaData() throws SQLException {\n        return con.getMetaData();\n    }\n  \n    @Override\n    public void setReadOnly(boolean readOnly) throws SQLException {\n        con.setReadOnly(readOnly);\n    }\n  \n    @Override\n    public boolean isReadOnly() throws SQLException {\n        return con.isReadOnly();\n    }\n  \n    @Override\n    public void setCatalog(String catalog) throws SQLException {\n        con.setCatalog(catalog);\n    }\n  \n    @Override\n    public String getCatalog() throws SQLException {\n        return con.getCatalog();\n    }\n  \n    @Override\n    public void setTransactionIsolation(int level) throws SQLException {\n        con.setTransactionIsolation(level);\n    }\n  \n    @Override\n    public int getTransactionIsolation() throws SQLException {\n        return con.getTransactionIsolation();\n    }\n  \n    @Override\n    public SQLWarning getWarnings() throws SQLException {\n        return con.getWarnings();\n    }\n  \n    @Override\n    public void clearWarnings() throws SQLException {\n        con.clearWarnings();\n    }\n  \n    @Override\n    public Statement createStatement(int resultSetType, int resultSetConcurrency) throws SQLException {\n        return con.createStatement(resultSetType,resultSetConcurrency);\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql, int resultSetType, int resultSetConcurrency) throws SQLException {\n        return con.prepareStatement(sql,resultSetType,resultSetConcurrency);\n    }\n  \n    @Override\n    public CallableStatement prepareCall(String sql, int resultSetType, int resultSetConcurrency) throws SQLException {\n        return con.prepareCall(sql,resultSetType,resultSetConcurrency);\n    }\n  \n    @Override\n    public Map<String, Class<?>> getTypeMap() throws SQLException {\n        return con.getTypeMap();\n    }\n  \n    @Override\n    public void setTypeMap(Map<String, Class<?>> map) throws SQLException {\n        con.setTypeMap(map);\n    }\n  \n    @Override\n    public void setHoldability(int holdability) throws SQLException {\n        con.setHoldability(holdability);\n    }\n  \n    @Override\n    public int getHoldability() throws SQLException {\n        return con.getHoldability();\n    }\n  \n    @Override\n    public Savepoint setSavepoint() throws SQLException {\n        return con.setSavepoint();\n    }\n  \n    @Override\n    public Savepoint setSavepoint(String name) throws SQLException {\n        return con.setSavepoint(name);\n    }\n  \n    @Override\n    public void rollback(Savepoint savepoint) throws SQLException {\n        con.rollback(savepoint);\n    }\n  \n    @Override\n    public void releaseSavepoint(Savepoint savepoint) throws SQLException {\n        con.releaseSavepoint(savepoint);\n    }\n  \n    @Override\n    public Statement createStatement(int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n        return con.createStatement(resultSetType,resultSetConcurrency,resultSetHoldability);\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql, int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n        return con.prepareStatement(sql,resultSetType,resultSetConcurrency,resultSetHoldability);\n    }\n  \n    @Override\n    public CallableStatement prepareCall(String sql, int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n        return con.prepareCall(sql,resultSetType,resultSetConcurrency,resultSetHoldability);\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql, int autoGeneratedKeys) throws SQLException {\n        return con.prepareStatement(sql,autoGeneratedKeys);\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql, int[] columnIndexes) throws SQLException {\n        return con.prepareStatement(sql,columnIndexes);\n    }\n  \n    @Override\n    public PreparedStatement prepareStatement(String sql, String[] columnNames) throws SQLException {\n        return con.prepareStatement(sql,columnNames);\n    }\n  \n    @Override\n    public Clob createClob() throws SQLException {\n        return con.createClob();\n    }\n  \n    @Override\n    public Blob createBlob() throws SQLException {\n        return con.createBlob();\n    }\n  \n    @Override\n    public NClob createNClob() throws SQLException {\n        return con.createNClob();\n    }\n  \n    @Override\n    public SQLXML createSQLXML() throws SQLException {\n        return con.createSQLXML();\n    }\n  \n    @Override\n    public boolean isValid(int timeout) throws SQLException {\n        return con.isValid(timeout);\n    }\n  \n    @Override\n    public void setClientInfo(String name, String value) throws SQLClientInfoException {\n        con.setClientInfo(name,value);\n    }\n  \n    @Override\n    public void setClientInfo(Properties properties) throws SQLClientInfoException {\n        con.setClientInfo(properties);\n    }\n  \n    @Override\n    public String getClientInfo(String name) throws SQLException {\n        return con.getClientInfo(name);\n    }\n  \n    @Override\n    public Properties getClientInfo() throws SQLException {\n        return con.getClientInfo();\n    }\n  \n    @Override\n    public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\n        return con.createArrayOf(typeName,elements);\n    }\n  \n    @Override\n    public Struct createStruct(String typeName, Object[] attributes) throws SQLException {\n        return con.createStruct(typeName,attributes);\n    }\n  \n    @Override\n    public void setSchema(String schema) throws SQLException {\n        con.setSchema(schema);\n    }\n  \n    @Override\n    public String getSchema() throws SQLException {\n        return con.getSchema();\n    }\n  \n    @Override\n    public void abort(Executor executor) throws SQLException {\n        con.abort(executor);\n    }\n  \n    @Override\n    public void setNetworkTimeout(Executor executor, int milliseconds) throws SQLException {\n        con.setNetworkTimeout(executor,milliseconds);\n    }\n  \n    @Override\n    public int getNetworkTimeout() throws SQLException {\n        return con.getNetworkTimeout();\n    }\n  \n    @Override\n    public <T> T unwrap(Class<T> iface) throws SQLException {\n        return con.unwrap(iface);\n    }\n  \n    @Override\n    public boolean isWrapperFor(Class<?> iface) throws SQLException {\n        return con.isWrapperFor(iface);\n    }\n  ```\n\n  }\n\nè‡ªå®šä¹‰è¿æ¥æ± ç±»\n\n```java\npublic class MyDataSource implements DataSource{\n      //å®šä¹‰é›†åˆå®¹å™¨ï¼Œç”¨äºä¿å­˜å¤šä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡\n      private static List<Connection> pool = Collections.synchronizedList(new ArrayList<Connection>());\n  \n      //é™æ€ä»£ç å—ï¼Œç”Ÿæˆ10ä¸ªæ•°æ®åº“è¿æ¥ä¿å­˜åˆ°é›†åˆä¸­\n      static {\n          for (int i = 0; i < 10; i++) {\n              Connection con = JDBCUtils.getConnection();\n              pool.add(con);\n          }\n      }\n  \n      //è¿”å›è¿æ¥æ± çš„å¤§å°\n      public int getSize() {\n          return pool.size();\n      }\n  \n      //ä»æ± ä¸­è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥\n      @Override\n      public Connection getConnection() {\n          if(pool.size() > 0) {\n              //ä»æ± ä¸­è·å–æ•°æ®åº“è¿æ¥\n              Connection con = pool.remove(0);\n              //é€šè¿‡è‡ªå®šä¹‰è¿æ¥å¯¹è±¡è¿›è¡ŒåŒ…è£…\n              MyConnection2 mycon = new MyConnection2(con,pool);\n              //è¿”å›åŒ…è£…åçš„è¿æ¥å¯¹è±¡\n              return mycon;\n          }else {\n              throw new RuntimeException(\"è¿æ¥æ•°é‡å·²ç”¨å°½\");\n          }\n      }\n  }\n```\n\nç¼ºç‚¹ï¼š Connection æ¥å£ä¸­è¦å®ç°çš„æ–¹æ³•å¤ªå¤šäº†ï¼Œä»£ç ç¹æ‚\n\n### é€‚é…å™¨è®¾è®¡æ¨¡å¼æ”¹è¿›è¿æ¥æ± \n\næä¾›ä¸€ä¸ªé€‚é…å™¨ç±»ï¼Œå®ç° Connection æ¥å£ï¼Œå°†æ‰€æœ‰åŠŸèƒ½è¿›è¡Œå®ç°(é™¤äº† close()æ–¹æ³•)ï¼Œä½œä¸ºä¸­é—´ç±»ã€‚è‡ªå®šä¹‰è¿æ¥ç±»åªéœ€è¦ç»§æ‰¿è¿™ä¸ªé€‚é…å™¨ç±»ï¼Œé‡å†™éœ€è¦æ”¹è¿›çš„ close() æ–¹æ³•å³å¯ï¼\n\né€‚é…å™¨ç±»ä¸éœ€è¦å®ç° close() æ–¹æ³•ï¼Œæ‰€ä»¥å®šä¹‰ä¸ºæŠ½è±¡ç±»\n\n```java\npublic abstract class MyAdapter implements Connection {\n  \n      // å®šä¹‰æ•°æ®åº“è¿æ¥å¯¹è±¡çš„å˜é‡\n      private Connection con;\n  \n      // é€šè¿‡æ„é€ æ–¹æ³•èµ‹å€¼\n      public MyAdapter(Connection con) {\n          this.con = con;\n      }\n  \n      // æ‰€æœ‰çš„æ–¹æ³•ï¼Œå‡è°ƒç”¨mysqlçš„è¿æ¥å¯¹è±¡å®ç°\n      @Override\n      public Statement createStatement() throws SQLException {\n          return con.createStatement();\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql) throws SQLException {\n          return con.prepareStatement(sql);\n      }\n  \n      @Override\n      public CallableStatement prepareCall(String sql) throws SQLException {\n          return con.prepareCall(sql);\n      }\n  \n      @Override\n      public String nativeSQL(String sql) throws SQLException {\n          return con.nativeSQL(sql);\n      }\n  \n      @Override\n      public void setAutoCommit(boolean autoCommit) throws SQLException {\n          con.setAutoCommit(autoCommit);\n      }\n  \n      @Override\n      public boolean getAutoCommit() throws SQLException {\n          return con.getAutoCommit();\n      }\n  \n      @Override\n      public void commit() throws SQLException {\n          con.commit();\n      }\n  \n      @Override\n      public void rollback() throws SQLException {\n          con.rollback();\n      }\n  \n      @Override\n      public boolean isClosed() throws SQLException {\n          return con.isClosed();\n      }\n  \n      @Override\n      public DatabaseMetaData getMetaData() throws SQLException {\n          return con.getMetaData();\n      }\n  \n      @Override\n      public void setReadOnly(boolean readOnly) throws SQLException {\n          con.setReadOnly(readOnly);\n      }\n  \n      @Override\n      public boolean isReadOnly() throws SQLException {\n          return con.isReadOnly();\n      }\n  \n      @Override\n      public void setCatalog(String catalog) throws SQLException {\n          con.setCatalog(catalog);\n      }\n  \n      @Override\n      public String getCatalog() throws SQLException {\n          return con.getCatalog();\n      }\n  \n      @Override\n      public void setTransactionIsolation(int level) throws SQLException {\n          con.setTransactionIsolation(level);\n      }\n  \n      @Override\n      public int getTransactionIsolation() throws SQLException {\n          return con.getTransactionIsolation();\n      }\n  \n      @Override\n      public SQLWarning getWarnings() throws SQLException {\n          return con.getWarnings();\n      }\n  \n      @Override\n      public void clearWarnings() throws SQLException {\n          con.clearWarnings();\n      }\n  \n      @Override\n      public Statement createStatement(int resultSetType, int resultSetConcurrency) throws SQLException {\n          return con.createStatement(resultSetType,resultSetConcurrency);\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql, int resultSetType, int resultSetConcurrency) throws SQLException {\n          return con.prepareStatement(sql,resultSetType,resultSetConcurrency);\n      }\n  \n      @Override\n      public CallableStatement prepareCall(String sql, int resultSetType, int resultSetConcurrency) throws SQLException {\n          return con.prepareCall(sql,resultSetType,resultSetConcurrency);\n      }\n  \n      @Override\n      public Map<String, Class<?>> getTypeMap() throws SQLException {\n          return con.getTypeMap();\n      }\n  \n      @Override\n      public void setTypeMap(Map<String, Class<?>> map) throws SQLException {\n          con.setTypeMap(map);\n      }\n  \n      @Override\n      public void setHoldability(int holdability) throws SQLException {\n          con.setHoldability(holdability);\n      }\n  \n      @Override\n      public int getHoldability() throws SQLException {\n          return con.getHoldability();\n      }\n  \n      @Override\n      public Savepoint setSavepoint() throws SQLException {\n          return con.setSavepoint();\n      }\n  \n      @Override\n      public Savepoint setSavepoint(String name) throws SQLException {\n          return con.setSavepoint(name);\n      }\n  \n      @Override\n      public void rollback(Savepoint savepoint) throws SQLException {\n          con.rollback(savepoint);\n      }\n  \n      @Override\n      public void releaseSavepoint(Savepoint savepoint) throws SQLException {\n          con.releaseSavepoint(savepoint);\n      }\n  \n      @Override\n      public Statement createStatement(int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n          return con.createStatement(resultSetType,resultSetConcurrency,resultSetHoldability);\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql, int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n          return con.prepareStatement(sql,resultSetType,resultSetConcurrency,resultSetHoldability);\n      }\n  \n      @Override\n      public CallableStatement prepareCall(String sql, int resultSetType, int resultSetConcurrency, int resultSetHoldability) throws SQLException {\n          return con.prepareCall(sql,resultSetType,resultSetConcurrency,resultSetHoldability);\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql, int autoGeneratedKeys) throws SQLException {\n          return con.prepareStatement(sql,autoGeneratedKeys);\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql, int[] columnIndexes) throws SQLException {\n          return con.prepareStatement(sql,columnIndexes);\n      }\n  \n      @Override\n      public PreparedStatement prepareStatement(String sql, String[] columnNames) throws SQLException {\n          return con.prepareStatement(sql,columnNames);\n      }\n  \n      @Override\n      public Clob createClob() throws SQLException {\n          return con.createClob();\n      }\n  \n      @Override\n      public Blob createBlob() throws SQLException {\n          return con.createBlob();\n      }\n  \n      @Override\n      public NClob createNClob() throws SQLException {\n          return con.createNClob();\n      }\n  \n      @Override\n      public SQLXML createSQLXML() throws SQLException {\n          return con.createSQLXML();\n      }\n  \n      @Override\n      public boolean isValid(int timeout) throws SQLException {\n          return con.isValid(timeout);\n      }\n  \n      @Override\n      public void setClientInfo(String name, String value) throws SQLClientInfoException {\n          con.setClientInfo(name,value);\n      }\n  \n      @Override\n      public void setClientInfo(Properties properties) throws SQLClientInfoException {\n          con.setClientInfo(properties);\n      }\n  \n      @Override\n      public String getClientInfo(String name) throws SQLException {\n          return con.getClientInfo(name);\n      }\n  \n      @Override\n      public Properties getClientInfo() throws SQLException {\n          return con.getClientInfo();\n      }\n  \n      @Override\n      public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\n          return con.createArrayOf(typeName,elements);\n      }\n  \n      @Override\n      public Struct createStruct(String typeName, Object[] attributes) throws SQLException {\n          return con.createStruct(typeName,attributes);\n      }\n  \n      @Override\n      public void setSchema(String schema) throws SQLException {\n          con.setSchema(schema);\n      }\n  \n      @Override\n      public String getSchema() throws SQLException {\n          return con.getSchema();\n      }\n  \n      @Override\n      public void abort(Executor executor) throws SQLException {\n          con.abort(executor);\n      }\n  \n      @Override\n      public void setNetworkTimeout(Executor executor, int milliseconds) throws SQLException {\n          con.setNetworkTimeout(executor,milliseconds);\n      }\n  \n      @Override\n      public int getNetworkTimeout() throws SQLException {\n          return con.getNetworkTimeout();\n      }\n  \n      @Override\n      public <T> T unwrap(Class<T> iface) throws SQLException {\n          return con.unwrap(iface);\n      }\n  \n      @Override\n      public boolean isWrapperFor(Class<?> iface) throws SQLException {\n          return con.isWrapperFor(iface);\n      }\n  }\n```\n\nè‡ªå®šä¹‰è¿æ¥ç±»\n\né€šè¿‡é€‚é…å™¨è®¾è®¡æ¨¡å¼ã€‚å®Œæˆclose()æ–¹æ³•çš„é‡å†™\n\n- å®šä¹‰ä¸€ä¸ªç±»ï¼Œç»§æ‰¿é€‚é…å™¨çˆ¶ç±»\n\n- å®šä¹‰ Connection è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å®¹å™¨å¯¹è±¡çš„å˜é‡\n\n- æä¾›æœ‰å‚æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å¯¹è±¡ï¼Œå¯¹å˜é‡èµ‹å€¼\n\n- åœ¨ close() æ–¹æ³•ä¸­ï¼Œå®Œæˆè¿æ¥çš„å½’è¿˜\n\n  public class MyConnection3 extends MyAdapter { //2.å®šä¹‰Connectionè¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å®¹å™¨å¯¹è±¡çš„å˜é‡ private Connection con; private List pool;\n\n  ```java\n    //3.æä¾›æœ‰å‚æ„é€ æ–¹æ³•ï¼Œæ¥æ”¶è¿æ¥å¯¹è±¡å’Œè¿æ¥æ± å¯¹è±¡ï¼Œå¯¹å˜é‡èµ‹å€¼\n    public MyConnection3(Connection con,List<Connection> pool) {\n        super(con);    // å°†æ¥æ”¶çš„æ•°æ®åº“è¿æ¥å¯¹è±¡ç»™é€‚é…å™¨çˆ¶ç±»ä¼ é€’\n        this.con = con;\n        this.pool = pool;\n    }\n  \n    //4.åœ¨close()æ–¹æ³•ä¸­ï¼Œå®Œæˆè¿æ¥çš„å½’è¿˜\n    @Override\n    public void close() throws SQLException {\n        pool.add(con);\n    }\n  ```\n\n  }\n\nè‡ªå®šä¹‰è¿æ¥æ± ç±»\n\n```java\npublic class MyDataSource implements DataSource{\n      //å®šä¹‰é›†åˆå®¹å™¨ï¼Œç”¨äºä¿å­˜å¤šä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡\n      private static List<Connection> pool = Collections.synchronizedList(new ArrayList<Connection>());\n  \n      //é™æ€ä»£ç å—ï¼Œç”Ÿæˆ10ä¸ªæ•°æ®åº“è¿æ¥ä¿å­˜åˆ°é›†åˆä¸­\n      static {\n          for (int i = 0; i < 10; i++) {\n              Connection con = JDBCUtils.getConnection();\n              pool.add(con);\n          }\n      }\n  \n      //è¿”å›è¿æ¥æ± çš„å¤§å°\n      public int getSize() {\n          return pool.size();\n      }\n  \n      //ä»æ± ä¸­è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥\n      @Override\n      public Connection getConnection() {\n          if(pool.size() > 0) {\n              //ä»æ± ä¸­è·å–æ•°æ®åº“è¿æ¥\n              Connection con = pool.remove(0);\n  \n              //é€šè¿‡è‡ªå®šä¹‰è¿æ¥å¯¹è±¡è¿›è¡ŒåŒ…è£…\n              MyConnection3 mycon = new MyConnection3(con,pool);\n  \n              //è¿”å›åŒ…è£…åçš„è¿æ¥å¯¹è±¡\n              return mycon;\n          }else {\n              throw new RuntimeException(\"è¿æ¥æ•°é‡å·²ç”¨å°½\");\n          }\n      }\n  }\n```\n\nç¼ºç‚¹ï¼šè‡ªå®šä¹‰è¿æ¥ç±»ä¸­çš„æ–¹æ³•å·²ç»å¾ˆç®€æ´äº†ã€‚å‰©ä½™æ‰€æœ‰çš„æ–¹æ³•å·²ç»æŠ½å–åˆ°äº†é€‚é…å™¨ç±»ä¸­ã€‚ä½†æ˜¯é€‚é…å™¨è¿™ä¸ªç±»è¿˜æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼Œä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼æ‰€ä»¥å¯ä»¥ä½¿ç”¨åŠ¨æ€ä»£ç†çš„æ–¹å¼æ¥æ”¹è¿›ã€‚\n\n### åŠ¨æ€ä»£ç†\n\n```java\npublic class MyDataSource implements DataSource{\n      //å®šä¹‰é›†åˆå®¹å™¨ï¼Œç”¨äºä¿å­˜å¤šä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡\n      private static List<Connection> pool = Collections.synchronizedList(new ArrayList<Connection>());\n  \n      //é™æ€ä»£ç å—ï¼Œç”Ÿæˆ10ä¸ªæ•°æ®åº“è¿æ¥ä¿å­˜åˆ°é›†åˆä¸­\n      static {\n          for (int i = 0; i < 10; i++) {\n              Connection con = JDBCUtils.getConnection();\n              pool.add(con);\n          }\n      }\n  \n      //è¿”å›è¿æ¥æ± çš„å¤§å°\n      public int getSize() {\n          return pool.size();\n      }\n  \n      //åŠ¨æ€ä»£ç†æ–¹å¼\n      @Override\n      public Connection getConnection() {\n          if(pool.size() > 0) {\n              //ä»æ± ä¸­è·å–æ•°æ®åº“è¿æ¥\n              Connection con = pool.remove(0);\n  \n              Connection proxyCon = (Connection)Proxy.newProxyInstance(con.getClass().getClassLoader(), new Class[]{Connection.class}, new InvocationHandler() {\n                  /*\n                      æ‰§è¡ŒConnectionå®ç°ç±»æ‰€æœ‰æ–¹æ³•éƒ½ä¼šç»è¿‡invoke\n                      å¦‚æœæ˜¯closeæ–¹æ³•ï¼Œåˆ™å°†è¿æ¥è¿˜å›æ± ä¸­\n                      å¦‚æœä¸æ˜¯ï¼Œç›´æ¥æ‰§è¡Œå®ç°ç±»çš„åŸæœ‰æ–¹æ³•\n                   */\n                  @Override\n                  public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n                      if(method.getName().equals(\"close\")) {\n                          pool.add(con);\n                          return null;\n                      }else {\n                          return method.invoke(con,args);\n                      }\n                  }\n              });\n  \n              return proxyCon;\n          }else {\n              throw new RuntimeException(\"è¿æ¥æ•°é‡å·²ç”¨å°½\");\n          }\n      }\n  \n  \n      //ä»æ± ä¸­è¿”å›ä¸€ä¸ªæ•°æ®åº“è¿æ¥\n      /*@Override\n      public Connection getConnection() {\n          if(pool.size() > 0) {\n              //ä»æ± ä¸­è·å–æ•°æ®åº“è¿æ¥\n              Connection con = pool.remove(0);\n  \n              //é€šè¿‡è‡ªå®šä¹‰è¿æ¥å¯¹è±¡è¿›è¡ŒåŒ…è£…\n              //MyConnection2 mycon = new MyConnection2(con,pool);\n              MyConnection3 mycon = new MyConnection3(con,pool);\n  \n              //è¿”å›åŒ…è£…åçš„è¿æ¥å¯¹è±¡\n              return mycon;\n          }else {\n              throw new RuntimeException(\"è¿æ¥æ•°é‡å·²ç”¨å°½\");\n          }\n      }*/\n  }\n```\n\n# å¼€æºè¿æ¥æ± çš„ä½¿ç”¨\n\n## C3P0è¿æ¥æ± \n\n- å¯¼å…¥jaråŒ…\n- å¯¼å…¥é…ç½®æ–‡ä»¶åˆ°srcç›®å½•ä¸‹\n- åˆ›å»ºc3p0è¿æ¥æ± å¯¹è±¡\n- è·å–æ•°æ®åº“è¿æ¥è¿›è¡Œä½¿ç”¨\n\né…ç½®æ–‡ä»¶ c3p0-config.xml æ³¨æ„è¯¥é…ç½®æ–‡ä»¶çš„åå­—æ˜¯å›ºå®šçš„ä¸è¦æ”¹ï¼Œå¦åˆ™æ— æ³•è¯†åˆ«\n\n- initialPoolSize ï¼šåˆå§‹åŒ–è¿æ¥æ•°é‡\n\n- maxPoolSize ï¼šæœ€å¤§è¿æ¥æ•°é‡ï¼Œå½“è¿æ¥æ•°é‡è¶…è¿‡åˆå§‹åŒ–è¿æ¥æ•°é‡æ—¶ï¼Œä¼šåœ¨è¿æ¥æ± å†…ç»§ç»­åˆ›å»ºè¿æ¥ï¼Œç›´åˆ°è¾¾åˆ°æ•°æ®åº“è¿æ¥æ± æ‰€èƒ½å®¹çº³çš„æœ€å¤§è¿æ¥æ•°é‡\n\n- checkoutTimeout ï¼šè¶…è¿‡æ—¶é—´ã€‚å¦‚æœä½¿ç”¨çš„è¿æ¥æ•°é‡è¶…è¿‡æœ€å¤§è¿æ¥æ•°é‡ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ checkoutTimeout æ—¶é—´ä»¥åæŠ¥é”™å¹¶ç»ˆæ­¢ç¨‹åºã€‚\n\n  com.mysql.jdbc.Driver jdbc:mysql://ä¸»æœºå:3306/æ•°æ®åº“å ç”¨æˆ·å å¯†ç \n\n  ```xml\n  <!-- è¿æ¥æ± å‚æ•° -->\n  <!-- åˆå§‹åŒ–è¿æ¥æ•°é‡ -->\n  <property name=\"initialPoolSize\">5</property>\n  <!--  æœ€å¤§è¿æ¥æ•°é‡  -->\n  <property name=\"maxPoolSize\">10</property>\n  <!--  è¶…æ—¶æ—¶é—´  -->\n  <property name=\"checkoutTimeout\">3000</property>\n  ```\n\n  com.mysql.jdbc.Driver jdbc:mysql://ä¸»æœºå:3306/æ•°æ®åº“å ç”¨æˆ·å å¯†ç \n\n  ```xml\n  <!-- è¿æ¥æ± å‚æ•° -->\n  <property name=\"initialPoolSize\">5</property>\n  <property name=\"maxPoolSize\">8</property>\n  <property name=\"checkoutTimeout\">1000</property>\n  ```\n\nC3P0æ•°æ®åº“è¿æ¥æ± çš„ä½¿ç”¨\n\n```java\npublic static void main(String[] args) throws SQLException {\n        //åˆ›å»ºc3p0è¿æ¥æ± å¯¹è±¡\n        DataSource dataSource = new ComboPooledDataSource();\n        //è·å–æ•°æ®åº“è¿æ¥è¿›è¡Œä½¿ç”¨\n        Connection con = dataSource.getConnection();\n        String s = \"select *from emp\";\n        PreparedStatement pst = con.prepareStatement(s);\n        ResultSet rs = pst.executeQuery();\n        while (rs.next()) {\n            String ename = rs.getString(\"ename\");\n            String job = rs.getString(\"job\");\n            String hiredate = rs.getString(\"hiredate\");\n            System.out.println(\"ename:\" + ename + \" job:\" + job + \" hiredate:\" + hiredate);\n        }\n        rs.close();\n        pst.close();\n        con.close(); // å°†è¿æ¥å¯¹è±¡å½’è¿˜æ± ä¸­\n    }\n```\n\n## Druidè¿æ¥æ± \n\n- å¯¼å…¥jaråŒ…\n- ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨srcç›®å½•ä¸‹\n- é€šè¿‡Propertiesé›†åˆåŠ è½½é…ç½®æ–‡ä»¶\n- é€šè¿‡Druidè¿æ¥æ± å·¥å‚ç±»è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡\n- è·å–æ•°æ®åº“è¿æ¥ï¼Œè¿›è¡Œä½¿ç”¨\n\né…ç½®æ–‡ä»¶ druid.properties\n\n```properties\ndriverClassName=com.mysql.jdbc.Driver\nurl=jdbc:mysql://ä¸»æœºå:3306/æ•°æ®åº“å\nusername:ç”¨æˆ·å\npassword:å¯†ç \n# åˆå§‹è¿æ¥æ•°é‡\ninitialSize=5\n# æœ€å¤§è¿æ¥æ•°é‡\nmaxActive=10\n# æœ€é•¿ç­‰å¾…æ—¶é—´\nmaxWait=3000\n```\n\nDruidæ•°æ®åº“çš„ä½¿ç”¨\n\n```java\n\tpublic static void main(String[] args) throws Exception {\n        //é€šè¿‡Propertiesé›†åˆåŠ è½½é…ç½®æ–‡ä»¶\n        InputStream is = demo01.class.getClassLoader().getResourceAsStream(\"druid.properties\");\n        Properties prop = new Properties();\n        prop.load(is);\n        //é€šè¿‡Druidè¿æ¥æ± å·¥å‚ç±»è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡\n        DataSource dataSource = DruidDataSourceFactory.createDataSource(prop);\n        //è·å–æ•°æ®åº“è¿æ¥ï¼Œè¿›è¡Œä½¿ç”¨\n        Connection con = dataSource.getConnection();\n        PreparedStatement pst = con.prepareStatement(\"select *from emp\");\n        ResultSet rs = pst.executeQuery();\n        while (rs.next()) {\n            String ename = rs.getString(\"ename\");\n            String job = rs.getString(\"job\");\n            String hiredate = rs.getString(\"hiredate\");\n            System.out.println(\"ename:\" + ename + \" job:\" + job + \" hiredate:\" + hiredate);\n        }\n        rs.close();\n        pst.close();\n        con.close();\n\t}\n```\n\n# æŠ½å–å·¥å…·ç±»\n\n```java\n/*\n      æ•°æ®åº“è¿æ¥æ± å·¥å…·ç±»\n   */\n  public class DataSourceUtils {\n      //1.ç§æœ‰æ„é€ æ–¹æ³•\n      private DataSourceUtils(){}\n  \n      //2.å®šä¹‰DataSourceæ•°æ®æºå˜é‡\n      private static DataSource dataSource;\n  \n      //3.æä¾›é™æ€ä»£ç å—ï¼Œå®Œæˆé…ç½®æ–‡ä»¶çš„åŠ è½½å’Œè·å–è¿æ¥æ± å¯¹è±¡\n      static {\n          try{\n              //åŠ è½½é…ç½®æ–‡ä»¶\n              InputStream is = DruidDemo1.class.getClassLoader().getResourceAsStream(\"druid.properties\");\n              Properties prop = new Properties();\n              prop.load(is);\n  \n              //è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡\n              dataSource = DruidDataSourceFactory.createDataSource(prop);\n  \n          } catch(Exception e) {\n              e.printStackTrace();\n          }\n      }\n  \n      //4.æä¾›è·å–æ•°æ®åº“è¿æ¥çš„æ–¹æ³•\n      public static Connection getConnection() {\n          Connection con = null;\n          try {\n              con = dataSource.getConnection();\n          } catch (SQLException e) {\n              e.printStackTrace();\n          }\n          return con;\n      }\n  \n      //5.æä¾›è·å–æ•°æ®åº“è¿æ¥æ± çš„æ–¹æ³•\n      public static DataSource getDataSource() {\n          return dataSource;\n      }\n  \n      //6.æä¾›é‡Šæ”¾èµ„æºçš„æ–¹æ³•\n      public static void close(Connection con, Statement stat, ResultSet rs) {\n          if(con != null) {\n              try {\n                  con.close();\n              } catch (SQLException e) {\n                  e.printStackTrace();\n              }\n          }\n  \n          if(stat != null) {\n              try {\n                  stat.close();\n              } catch (SQLException e) {\n                  e.printStackTrace();\n              }\n          }\n  \n          if(rs != null) {\n              try {\n                  rs.close();\n              } catch (SQLException e) {\n                  e.printStackTrace();\n              }\n          }\n      }\n  \n      public static void close(Connection con, Statement stat) {\n          close(con,stat,null);\n      }\n  \n  }\n```\n\nå·¥å…·ç±»çš„ä½¿ç”¨\n\n```java\npublic static void main(String[] args) throws SQLException {\n        //åˆ©ç”¨å·¥å…·ç±»è·å–DataSoure\n        DataSource dataSource = DataSourceUtils.getDataSource();\n        //è·å–è¿æ¥ï¼Œå¹¶ä½¿ç”¨\n        Connection con = dataSource.getConnection();\n        String s = \"select *from emp\";\n        PreparedStatement pst = con.prepareStatement(s);\n        ResultSet rs = pst.executeQuery();\n        while (rs.next()) {\n            String ename = rs.getString(\"ename\");\n            String job = rs.getString(\"job\");\n            String hiredate = rs.getString(\"hiredate\");\n            System.out.println(\"ename:\" + ename + \" job:\" + job + \" hiredate:\" + hiredate);\n        }\n        DataSourceUtils.close(con, pst, rs);\n    }\n```\n","tags":["mysql"],"categories":["æ•°æ®åº“"]},{"title":"CSSå®ç°é•œåƒåè½¬","url":"/2023/06/24/CSSå®ç°é•œåƒåè½¬/","content":"\n## é•œåƒç¿»è½¬ä½¿ç”¨äº†webkit-box-reflect\n\nç›´æ¥æ”¾ä»£ç ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Title</title>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"index.css\">\n</head>\n<body>\n<div class=\"context\">\n  <div class=\"button\">é•œåƒç¿»è½¬</div>\n</div>\n</body>\n</html>\n```\n\ncss:\n\n```css\n.context {\n    height: 300px;\n    width: 300px;\n    display: flex;\n    background-color: black;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.button {\n    position: relative;\n    top: -30px;\n    padding: 1rem 2.5rem;\n    border-radius: 0.4rem;\n    background-color: rgb(14,14,26);\n    color: rgb(234,234,234);\n    box-shadow: 0px 0px 60px #1f4c55;\n    -webkit-box-reflect: below 10px linear-gradient(to bottom,rgba(0,0,0,0.0),rgba(0,0,0,0.4));\n}\n```\n\næœ€åæ•ˆæœå›¾\n\n![image-20230624123307318](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20230624123307318.png)\n","tags":["CSS"],"categories":["javaå…¨æ ˆ"]},{"title":"nginxåŸºç¡€","url":"/2023/06/23/nginxåŸºç¡€/","content":"\n# ä»‹ç»\n\nNginxæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„http æœåŠ¡å™¨/åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚\n\nç”±ä¿„ç½—æ–¯çš„ç¨‹åºè®¾è®¡å¸ˆIgor Sysoevæ‰€å¼€å‘ï¼Œå®˜æ–¹æµ‹è¯•nginxèƒ½å¤Ÿæ”¯æ”¯æ’‘5ä¸‡å¹¶å‘é“¾æ¥ï¼Œ\n\nå¹¶ä¸”cpuã€å†…å­˜ç­‰èµ„æºæ¶ˆè€—å´éå¸¸ä½ï¼Œè¿è¡Œéå¸¸ç¨³å®šã€‚\n\n# åº”ç”¨åœºæ™¯\n\n1ã€httpæœåŠ¡å™¨ã€‚Nginxæ˜¯ä¸€ä¸ªhttpæœåŠ¡å¯ä»¥ç‹¬ç«‹æä¾›httpæœåŠ¡ã€‚å¯ä»¥åšç½‘é¡µé™æ€æœåŠ¡å™¨ã€‚\n\n2ã€è™šæ‹Ÿä¸»æœºã€‚å¯ä»¥å®ç°åœ¨ä¸€å°æœåŠ¡å™¨è™šæ‹Ÿå‡ºå¤šä¸ªç½‘ç«™ã€‚ä¾‹å¦‚ä¸ªäººç½‘ç«™ä½¿ç”¨çš„è™šæ‹Ÿä¸»æœºã€‚\n\n3ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ã€‚å½“ç½‘ç«™çš„è®¿é—®é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œå•å°æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³ç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼Œ\n\néœ€è¦ç”¨å¤šå°æœåŠ¡å™¨é›†ç¾¤å¯ä»¥ä½¿ç”¨nginxåšåå‘ä»£ç†ã€‚å¹¶ä¸”å¤šå°æœåŠ¡å™¨å¯ä»¥å¹³å‡åˆ†æ‹…è´Ÿè½½ï¼Œ\n\nä¸ä¼šå› ä¸ºæŸå°æœåŠ¡å™¨è´Ÿè½½é«˜å®•æœºè€ŒæŸå°æœåŠ¡å™¨é—²ç½®çš„æƒ…å†µã€‚\n\n# é…ç½®æ–‡ä»¶\n\nNginxçš„ä¸»é…ç½®æ–‡ä»¶æ˜¯nginx.confï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸€å…±ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«ä¸º**å…¨å±€å—ã€eventså—å’Œhttpå—**ã€‚åœ¨httpå—ä¸­ï¼ŒåˆåŒ…å«httpå…¨å±€å—ã€å¤šä¸ªserverå—ã€‚æ¯ä¸ªserverå—ä¸­ï¼Œå¯ä»¥åŒ…å«serverå…¨å±€å—å’Œå¤šä¸ªlocationå—ã€‚åœ¨åŒä¸€é…ç½®å—ä¸­åµŒå¥—çš„é…ç½®å—ï¼Œå„ä¸ªä¹‹é—´ä¸å­˜åœ¨æ¬¡åºå…³ç³»ã€‚\n\né…ç½®æ–‡ä»¶æ”¯æŒå¤§é‡å¯é…ç½®çš„æŒ‡ä»¤ï¼Œç»å¤§å¤šæ•°æŒ‡ä»¤ä¸æ˜¯ç‰¹å®šå±äºæŸä¸€ä¸ªå—çš„ã€‚åŒä¸€ä¸ªæŒ‡ä»¤æ”¾åœ¨ä¸åŒå±‚çº§çš„å—ä¸­ï¼Œå…¶ä½œç”¨åŸŸä¹Ÿä¸åŒï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé«˜ä¸€çº§å—ä¸­çš„æŒ‡ä»¤å¯ä»¥ä½œç”¨äºè‡ªèº«æ‰€åœ¨çš„å—å’Œæ­¤å—åŒ…å«çš„æ‰€æœ‰ä½å±‚çº§å—ã€‚å¦‚æœæŸä¸ªæŒ‡ä»¤åœ¨ä¸¤ä¸ªä¸åŒå±‚çº§çš„å—ä¸­åŒæ—¶å‡ºç°ï¼Œåˆ™é‡‡ç”¨â€œå°±è¿‘åŸåˆ™â€ï¼Œå³ä»¥è¾ƒä½å±‚çº§å—ä¸­çš„é…ç½®ä¸ºå‡†ã€‚æ¯”å¦‚ï¼ŒæŸæŒ‡ä»¤åŒæ—¶å‡ºç°åœ¨httpå…¨å±€å—ä¸­å’Œserverå—ä¸­ï¼Œå¹¶ä¸”é…ç½®ä¸åŒï¼Œåˆ™åº”è¯¥ä»¥serverå—ä¸­çš„é…ç½®ä¸ºå‡†ã€‚\n\næ•´ä¸ªé…ç½®æ–‡ä»¶çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n\n```perl\n#å…¨å±€å—\n#user  nobody;\nworker_processes  1;\n\n#eventå—\nevents {\n    worker_connections  1024;\n}\n\n#httpå—\nhttp {\n    #httpå…¨å±€å—\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    #serverå—\n    server {\n        #serverå…¨å±€å—\n        listen       8000;\n        server_name  localhost;\n        #locationå—\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n    #è¿™è¾¹å¯ä»¥æœ‰å¤šä¸ªserverå—\n    server {\n      ...\n    }\n}\n```\n\n## å…¨å±€å—\n\nå…¨å±€å—æ˜¯é»˜è®¤é…ç½®æ–‡ä»¶ä»å¼€å§‹åˆ°eventså—ä¹‹é—´çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œä¸»è¦è®¾ç½®ä¸€äº›å½±å“NginxæœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œå› æ­¤ï¼Œè¿™äº›æŒ‡ä»¤çš„ä½œç”¨åŸŸæ˜¯NginxæœåŠ¡å™¨å…¨å±€ã€‚\n\né€šå¸¸åŒ…æ‹¬é…ç½®è¿è¡ŒNginxæœåŠ¡å™¨çš„ç”¨æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸ç”Ÿæˆçš„worker processæ•°ã€Nginxè¿›ç¨‹PIDå­˜æ”¾è·¯å¾„ã€æ—¥å¿—çš„å­˜æ”¾è·¯å¾„å’Œç±»å‹ä»¥åŠé…ç½®æ–‡ä»¶å¼•å…¥ç­‰ã€‚\n\n```shell\n# æŒ‡å®šå¯ä»¥è¿è¡ŒnginxæœåŠ¡çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œåªèƒ½åœ¨å…¨å±€å—é…ç½®\n# user [user] [group]\n# å°†useræŒ‡ä»¤æ³¨é‡Šæ‰ï¼Œæˆ–è€…é…ç½®æˆnobodyçš„è¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è¿è¡Œ\n# user nobody nobody;\n# useræŒ‡ä»¤åœ¨Windowsä¸Šä¸ç”Ÿæ•ˆï¼Œå¦‚æœä½ åˆ¶å®šå…·ä½“ç”¨æˆ·å’Œç”¨æˆ·ç»„ä¼šæŠ¥å°é¢è­¦å‘Š\n# nginx: [warn] \"user\" is not supported, ignored in D:\\software\\nginx-1.18.0/conf/nginx.conf:2\n\n# æŒ‡å®šå·¥ä½œçº¿ç¨‹æ•°ï¼Œå¯ä»¥åˆ¶å®šå…·ä½“çš„è¿›ç¨‹æ•°ï¼Œä¹Ÿå¯ä½¿ç”¨è‡ªåŠ¨æ¨¡å¼ï¼Œè¿™ä¸ªæŒ‡ä»¤åªèƒ½åœ¨å…¨å±€å—é…ç½®\n# worker_processes number | autoï¼›\n# åˆ—å­ï¼šæŒ‡å®š4ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šç”Ÿæˆä¸€ä¸ªmasterè¿›ç¨‹å’Œ4ä¸ªworkerè¿›ç¨‹\n# worker_processes 4;\n\n# æŒ‡å®špidæ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ï¼Œè¿™ä¸ªæŒ‡ä»¤åªèƒ½åœ¨å…¨å±€å—é…ç½®\n# pid logs/nginx.pid;\n\n# æŒ‡å®šé”™è¯¯æ—¥å¿—çš„è·¯å¾„å’Œæ—¥å¿—çº§åˆ«ï¼Œæ­¤æŒ‡ä»¤å¯ä»¥åœ¨å…¨å±€å—ã€httpå—ã€serverå—ä»¥åŠlocationå—ä¸­é…ç½®ã€‚(åœ¨ä¸åŒçš„å—é…ç½®æœ‰å•¥åŒºåˆ«ï¼Ÿï¼Ÿ)\n# å…¶ä¸­debugçº§åˆ«çš„æ—¥å¿—éœ€è¦ç¼–è¯‘æ—¶ä½¿ç”¨--with-debugå¼€å¯debugå¼€å…³\n# error_log [path] [debug | info | notice | warn | error | crit | alert | emerg] \n# error_log  logs/error.log  notice;\n# error_log  logs/error.log  info;\n```\n\n## eventså—\n\neventså—æ¶‰åŠçš„æŒ‡ä»¤ä¸»è¦å½±å“NginxæœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ã€‚å¸¸ç”¨åˆ°çš„è®¾ç½®åŒ…æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤šworker processä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ¯ä¸ªworker processå¯ä»¥åŒæ—¶æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ç­‰ã€‚\n\nè¿™ä¸€éƒ¨åˆ†çš„æŒ‡ä»¤å¯¹NginxæœåŠ¡å™¨çš„æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œåœ¨å®é™…é…ç½®ä¸­åº”è¯¥æ ¹æ®å®é™…æƒ…å†µçµæ´»è°ƒæ•´ã€‚\n\n```shell\n# å½“æŸä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªç½‘ç»œè¿æ¥åˆ°æ¥æ—¶ï¼Œå¤šä¸ªç¡çœ è¿›ç¨‹ä¼šè¢«åŒæ—¶å«é†’ï¼Œä½†åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯è·å¾—è¿æ¥ã€‚å¦‚æœæ¯æ¬¡å”¤é†’çš„è¿›ç¨‹æ•°ç›®å¤ªå¤šï¼Œä¼šå½±å“ä¸€éƒ¨åˆ†ç³»ç»Ÿæ€§èƒ½ã€‚åœ¨NginxæœåŠ¡å™¨çš„å¤šè¿›ç¨‹ä¸‹ï¼Œå°±æœ‰å¯èƒ½å‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚\n# å¼€å¯çš„æ—¶å€™ï¼Œå°†ä¼šå¯¹å¤šä¸ªNginxè¿›ç¨‹æ¥æ”¶è¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œé˜²æ­¢å¤šä¸ªè¿›ç¨‹å¯¹è¿æ¥çš„äº‰æŠ¢\n# é»˜è®¤æ˜¯å¼€å¯çŠ¶æ€ï¼Œåªèƒ½åœ¨eventså—ä¸­è¿›è¡Œé…ç½®\n# accept_mutex on | off;\n\n# å¦‚æœmulti_acceptè¢«ç¦æ­¢äº†ï¼Œnginxä¸€ä¸ªå·¥ä½œè¿›ç¨‹åªèƒ½åŒæ—¶æ¥å—ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚å¦åˆ™ï¼Œä¸€ä¸ªå·¥ä½œè¿›ç¨‹å¯ä»¥åŒæ—¶æ¥å—æ‰€æœ‰çš„æ–°è¿æ¥ã€‚ \n# å¦‚æœnginxä½¿ç”¨kqueueè¿æ¥æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ¡æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šæŠ¥å‘Šåœ¨ç­‰å¾…è¢«æ¥å—çš„æ–°è¿æ¥çš„æ•°é‡ã€‚\n# é»˜è®¤æ˜¯offçŠ¶æ€ï¼Œåªèƒ½åœ¨eventå—é…ç½®\n# multi_accept on | off;\n\n# æŒ‡å®šä½¿ç”¨å“ªç§ç½‘ç»œIOæ¨¡å‹ï¼Œmethodå¯é€‰æ‹©çš„å†…å®¹æœ‰ï¼šselectã€pollã€kqueueã€epollã€rtsigã€/dev/pollä»¥åŠeventportï¼Œä¸€èˆ¬æ“ä½œç³»ç»Ÿä¸æ˜¯æ”¯æŒä¸Šé¢æ‰€æœ‰æ¨¡å‹çš„ã€‚\n# åªèƒ½åœ¨eventså—ä¸­è¿›è¡Œé…ç½®\n# use method\n# use epoll\n\n# è®¾ç½®å…è®¸æ¯ä¸€ä¸ªworker processåŒæ—¶å¼€å¯çš„æœ€å¤§è¿æ¥æ•°ï¼Œå½“æ¯ä¸ªå·¥ä½œè¿›ç¨‹æ¥å—çš„è¿æ¥æ•°è¶…è¿‡è¿™ä¸ªå€¼æ—¶å°†ä¸å†æ¥æ”¶è¿æ¥\n# å½“æ‰€æœ‰çš„å·¥ä½œè¿›ç¨‹éƒ½æ¥æ”¶æ»¡æ—¶ï¼Œè¿æ¥è¿›å…¥logbackï¼Œlogbackæ»¡åè¿æ¥è¢«æ‹’ç»\n# åªèƒ½åœ¨eventså—ä¸­è¿›è¡Œé…ç½®\n# æ³¨æ„ï¼šè¿™ä¸ªå€¼ä¸èƒ½è¶…è¿‡è¶…è¿‡ç³»ç»Ÿæ”¯æŒæ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ï¼Œä¹Ÿä¸èƒ½è¶…è¿‡å•ä¸ªè¿›ç¨‹æ”¯æŒæ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://cloud.tencent.com/developer/article/1114773\n# worker_connections  1024;\n```\n\n## httpå—\n\nhttpå—æ˜¯NginxæœåŠ¡å™¨é…ç½®ä¸­çš„é‡è¦éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜å’Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°çš„åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½å¯ä»¥æ”¾åœ¨è¿™ä¸ªæ¨¡å—ä¸­ã€‚\n\nå‰é¢å·²ç»æåˆ°ï¼Œhttpå—ä¸­å¯ä»¥åŒ…å«è‡ªå·±çš„å…¨å±€å—ï¼Œä¹Ÿå¯ä»¥åŒ…å«serverå—ï¼Œserverå—ä¸­åˆå¯ä»¥è¿›ä¸€æ­¥åŒ…å«locationå—ï¼Œåœ¨æœ¬ä¹¦ä¸­æˆ‘ä»¬ä½¿ç”¨â€œhttpå…¨å±€å—â€æ¥è¡¨ç¤ºhttpä¸­è‡ªå·±çš„å…¨å±€å—ï¼Œå³httpå—ä¸­ä¸åŒ…å«åœ¨serverå—ä¸­çš„éƒ¨åˆ†ã€‚\n\nå¯ä»¥åœ¨httpå…¨å±€å—ä¸­é…ç½®çš„æŒ‡ä»¤åŒ…æ‹¬æ–‡ä»¶å¼•å…¥ã€MIME-Typeå®šä¹‰ã€æ—¥å¿—è‡ªå®šä¹‰ã€æ˜¯å¦ä½¿ç”¨sendfileä¼ è¾“æ–‡ä»¶ã€è¿æ¥è¶…æ—¶æ—¶é—´ã€å•è¿æ¥è¯·æ±‚æ•°ä¸Šé™ç­‰ã€‚\n\n```shell\n# å¸¸ç”¨çš„æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥æ˜¾ç¤ºçš„å†…å®¹æœ‰HTMLã€XMLã€GIFåŠFlashç­‰ç§ç±»ç¹å¤šçš„æ–‡æœ¬ã€åª’ä½“ç­‰èµ„æºï¼Œæµè§ˆå™¨ä¸ºåŒºåˆ†è¿™äº›èµ„æºï¼Œéœ€è¦ä½¿ç”¨MIME Typeã€‚æ¢è¨€ä¹‹ï¼ŒMIME Typeæ˜¯ç½‘ç»œèµ„æºçš„åª’ä½“ç±»å‹ã€‚NginxæœåŠ¡å™¨ä½œä¸ºWebæœåŠ¡å™¨ï¼Œå¿…é¡»èƒ½å¤Ÿè¯†åˆ«å‰ç«¯è¯·æ±‚çš„èµ„æºç±»å‹ã€‚\n\n# includeæŒ‡ä»¤ï¼Œç”¨äºåŒ…å«å…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æ”¾åœ¨é…ç½®æ–‡ä»¶çš„ä»»ä½•åœ°æ–¹ï¼Œä½†æ˜¯è¦æ³¨æ„ä½ åŒ…å«è¿›æ¥çš„é…ç½®æ–‡ä»¶ä¸€å®šç¬¦åˆé…ç½®è§„èŒƒï¼Œæ¯”å¦‚è¯´ä½ includeè¿›æ¥çš„é…ç½®æ˜¯worker_processesæŒ‡ä»¤çš„é…ç½®ï¼Œè€Œä½ å°†è¿™ä¸ªæŒ‡ä»¤åŒ…å«åˆ°äº†httpå—ä¸­ï¼Œç€è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œä¸Šé¢å·²ç»ä»‹ç»è¿‡worker_processesæŒ‡ä»¤åªèƒ½åœ¨å…¨å±€å—ä¸­ã€‚\n# ä¸‹é¢çš„æŒ‡ä»¤å°†mime.typesåŒ…å«è¿›æ¥ï¼Œmime.typeså’Œngin.cfgåŒçº§ç›®å½•ï¼Œä¸åŒçº§çš„è¯éœ€è¦æŒ‡å®šå…·ä½“è·¯å¾„\n# include  mime.types;\n\n# é…ç½®é»˜è®¤ç±»å‹ï¼Œå¦‚æœä¸åŠ æ­¤æŒ‡ä»¤ï¼Œé»˜è®¤å€¼ä¸ºtext/plainã€‚\n# æ­¤æŒ‡ä»¤è¿˜å¯ä»¥åœ¨httpå—ã€serverå—æˆ–è€…locationå—ä¸­è¿›è¡Œé…ç½®ã€‚\n# default_type  application/octet-stream;\n\n# access_logé…ç½®ï¼Œæ­¤æŒ‡ä»¤å¯ä»¥åœ¨httpå—ã€serverå—æˆ–è€…locationå—ä¸­è¿›è¡Œè®¾ç½®\n# åœ¨å…¨å±€å—ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»è¿‡errer_logæŒ‡ä»¤ï¼Œå…¶ç”¨äºé…ç½®Nginxè¿›ç¨‹è¿è¡Œæ—¶çš„æ—¥å¿—å­˜æ”¾å’Œçº§åˆ«ï¼Œæ­¤å¤„æ‰€æŒ‡çš„æ—¥å¿—ä¸å¸¸è§„çš„ä¸åŒï¼Œå®ƒæ˜¯æŒ‡è®°å½•NginxæœåŠ¡å™¨æä¾›æœåŠ¡è¿‡ç¨‹åº”ç­”å‰ç«¯è¯·æ±‚çš„æ—¥å¿—\n# access_log path [format [buffer=size]]\n# å¦‚æœä½ è¦å…³é—­access_log,ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤\n# access_log off;\n\n# log_formatæŒ‡ä»¤ï¼Œç”¨äºå®šä¹‰æ—¥å¿—æ ¼å¼ï¼Œæ­¤æŒ‡ä»¤åªèƒ½åœ¨httpå—ä¸­è¿›è¡Œé…ç½®\n# log_format  main '$remote_addr - $remote_user [$time_local] \"$request\" '\n#                  '$status $body_bytes_sent \"$http_referer\" '\n#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n# å®šä¹‰äº†ä¸Šé¢çš„æ—¥å¿—æ ¼å¼åï¼Œå¯ä»¥ä»¥ä¸‹é¢çš„å½¢å¼ä½¿ç”¨æ—¥å¿—\n# access_log  logs/access.log  main;\n\n# å¼€å¯å…³é—­sendfileæ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¯ä»¥åœ¨httpå—ã€serverå—æˆ–è€…locationå—ä¸­è¿›è¡Œé…ç½®\n# sendfile  on | off;\n\n# è®¾ç½®sendfileæœ€å¤§æ•°æ®é‡,æ­¤æŒ‡ä»¤å¯ä»¥åœ¨httpå—ã€serverå—æˆ–locationå—ä¸­é…ç½®\n# sendfile_max_chunk size;\n# å…¶ä¸­ï¼Œsizeå€¼å¦‚æœå¤§äº0ï¼ŒNginxè¿›ç¨‹çš„æ¯ä¸ªworker processæ¯æ¬¡è°ƒç”¨sendfile()ä¼ è¾“çš„æ•°æ®é‡æœ€å¤§ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼(è¿™é‡Œæ˜¯128kï¼Œæ‰€ä»¥æ¯æ¬¡ä¸èƒ½è¶…è¿‡128k)ï¼›å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ— é™åˆ¶ã€‚é»˜è®¤å€¼ä¸º0ã€‚\n# sendfile_max_chunk 128k;\n\n# é…ç½®è¿æ¥è¶…æ—¶æ—¶é—´,æ­¤æŒ‡ä»¤å¯ä»¥åœ¨httpå—ã€serverå—æˆ–locationå—ä¸­é…ç½®ã€‚\n# ä¸ç”¨æˆ·å»ºç«‹ä¼šè¯è¿æ¥åï¼ŒNginxæœåŠ¡å™¨å¯ä»¥ä¿æŒè¿™äº›è¿æ¥æ‰“å¼€ä¸€æ®µæ—¶é—´\n# timeoutï¼ŒæœåŠ¡å™¨ç«¯å¯¹è¿æ¥çš„ä¿æŒæ—¶é—´ã€‚é»˜è®¤å€¼ä¸º75s;header_timeoutï¼Œå¯é€‰é¡¹ï¼Œåœ¨åº”ç­”æŠ¥æ–‡å¤´éƒ¨çš„Keep-AliveåŸŸè®¾ç½®è¶…æ—¶æ—¶é—´ï¼šâ€œKeep-Alive:timeout= header_timeoutâ€ã€‚æŠ¥æ–‡ä¸­çš„è¿™ä¸ªæŒ‡ä»¤å¯ä»¥è¢«Mozillaæˆ–è€…Konquerorè¯†åˆ«ã€‚\n# keepalive_timeout timeout [header_timeout]\n# ä¸‹é¢é…ç½®çš„å«ä¹‰æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯ä¿æŒè¿æ¥çš„æ—¶é—´è®¾ç½®ä¸º120 sï¼Œå‘ç»™ç”¨æˆ·ç«¯çš„åº”ç­”æŠ¥æ–‡å¤´éƒ¨ä¸­Keep-AliveåŸŸçš„è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º100 sã€‚\n# keepalive_timeout 120s 100s\n\n# é…ç½®å•è¿æ¥è¯·æ±‚æ•°ä¸Šé™ï¼Œæ­¤æŒ‡ä»¤å¯ä»¥åœ¨httpå—ã€serverå—æˆ–locationå—ä¸­é…ç½®ã€‚\n# NginxæœåŠ¡å™¨ç«¯å’Œç”¨æˆ·ç«¯å»ºç«‹ä¼šè¯è¿æ¥åï¼Œç”¨æˆ·ç«¯é€šè¿‡æ­¤è¿æ¥å‘é€è¯·æ±‚ã€‚æŒ‡ä»¤keepalive_requestsç”¨äºé™åˆ¶ç”¨æˆ·é€šè¿‡æŸä¸€è¿æ¥å‘NginxæœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ¬¡æ•°ã€‚é»˜è®¤æ˜¯100\n# keepalive_requests number;\n```\n\n## serverå—\n\nserverå—å’Œâ€œè™šæ‹Ÿä¸»æœºâ€çš„æ¦‚å¿µæœ‰å¯†åˆ‡è”ç³»ã€‚\n\nè™šæ‹Ÿä¸»æœºï¼Œåˆç§°è™šæ‹ŸæœåŠ¡å™¨ã€ä¸»æœºç©ºé—´æˆ–æ˜¯ç½‘é¡µç©ºé—´ï¼Œå®ƒæ˜¯ä¸€ç§æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯æ˜¯ä¸ºäº†èŠ‚çœäº’è”ç½‘æœåŠ¡å™¨ç¡¬ä»¶æˆæœ¬è€Œå‡ºç°çš„ã€‚è¿™é‡Œçš„â€œä¸»æœºâ€æˆ–â€œç©ºé—´â€æ˜¯ç”±å®ä½“çš„æœåŠ¡å™¨å»¶ä¼¸è€Œæ¥ï¼Œç¡¬ä»¶ç³»ç»Ÿå¯ä»¥åŸºäºæœåŠ¡å™¨ç¾¤ï¼Œæˆ–è€…å•ä¸ªæœåŠ¡å™¨ç­‰ã€‚è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä¸»è¦åº”ç”¨äºHTTPã€FTPåŠEMAILç­‰å¤šé¡¹æœåŠ¡ï¼Œå°†ä¸€å°æœåŠ¡å™¨çš„æŸé¡¹æˆ–è€…å…¨éƒ¨æœåŠ¡å†…å®¹é€»è¾‘åˆ’åˆ†ä¸ºå¤šä¸ªæœåŠ¡å•ä½ï¼Œå¯¹å¤–è¡¨ç°ä¸ºå¤šä¸ªæœåŠ¡å™¨ï¼Œä»è€Œå……åˆ†åˆ©ç”¨æœåŠ¡å™¨ç¡¬ä»¶èµ„æºã€‚ä»ç”¨æˆ·è§’åº¦æ¥çœ‹ï¼Œä¸€å°è™šæ‹Ÿä¸»æœºå’Œä¸€å°ç‹¬ç«‹çš„ç¡¬ä»¶ä¸»æœºæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\n\nåœ¨ä½¿ç”¨NginxæœåŠ¡å™¨æä¾›WebæœåŠ¡æ—¶ï¼Œåˆ©ç”¨è™šæ‹Ÿä¸»æœºçš„æŠ€æœ¯å°±å¯ä»¥é¿å…ä¸ºæ¯ä¸€ä¸ªè¦è¿è¡Œçš„ç½‘ç«™æä¾›å•ç‹¬çš„NginxæœåŠ¡å™¨ï¼Œä¹Ÿæ— éœ€ä¸ºæ¯ä¸ªç½‘ç«™å¯¹åº”è¿è¡Œä¸€ç»„Nginxè¿›ç¨‹ã€‚è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä½¿å¾—NginxæœåŠ¡å™¨å¯ä»¥åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šåªè¿è¡Œä¸€ç»„Nginxè¿›ç¨‹ï¼Œå°±å¯ä»¥è¿è¡Œå¤šä¸ªç½‘ç«™ã€‚\n\nåœ¨å‰é¢æåˆ°è¿‡ï¼Œæ¯ä¸€ä¸ªhttpå—éƒ½å¯ä»¥åŒ…å«å¤šä¸ªserverå—ï¼Œè€Œæ¯ä¸ªserverå—å°±ç›¸å½“äºä¸€å°è™šæ‹Ÿä¸»æœºï¼Œå®ƒå†…éƒ¨å¯æœ‰å¤šå°ä¸»æœºè”åˆæä¾›æœåŠ¡ï¼Œä¸€èµ·å¯¹å¤–æä¾›åœ¨é€»è¾‘ä¸Šå…³ç³»å¯†åˆ‡çš„ä¸€ç»„æœåŠ¡ï¼ˆæˆ–ç½‘ç«™ï¼‰ã€‚\n\nå’Œhttpå—ç›¸åŒï¼Œserverå—ä¹Ÿå¯ä»¥åŒ…å«è‡ªå·±çš„å…¨å±€å—ï¼ŒåŒæ—¶å¯ä»¥åŒ…å«å¤šä¸ªlocationå—ã€‚åœ¨serverå…¨å±€å—ä¸­ï¼Œæœ€å¸¸è§çš„ä¸¤ä¸ªé…ç½®é¡¹æ˜¯æœ¬è™šæ‹Ÿä¸»æœºçš„ç›‘å¬é…ç½®å’Œæœ¬è™šæ‹Ÿä¸»æœºçš„åç§°æˆ–IPé…ç½®ã€‚\n\n### listenæŒ‡ä»¤\n\nserverå—ä¸­æœ€é‡è¦çš„æŒ‡ä»¤å°±æ˜¯listenæŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤æœ‰ä¸‰ç§é…ç½®è¯­æ³•ã€‚è¿™ä¸ªæŒ‡ä»¤é»˜è®¤çš„é…ç½®å€¼æ˜¯ï¼šlisten *:80 | *:8000ï¼›åªèƒ½åœ¨serverå—ç§é…ç½®è¿™ä¸ªæŒ‡ä»¤ã€‚\n\n```less\n//ç¬¬ä¸€ç§\nlisten address[:port] [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];\n\n//ç¬¬äºŒç§\nlisten port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];\n\n//ç¬¬ä¸‰ç§ï¼ˆå¯ä»¥ä¸ç”¨é‡ç‚¹å…³æ³¨ï¼‰\nlisten unix:path [default_server] [ssl] [http2 | spdy] [proxy_protocol] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];\n```\n\nlistenæŒ‡ä»¤çš„é…ç½®éå¸¸çµæ´»ï¼Œå¯ä»¥å•ç‹¬åˆ¶å®šipï¼Œå•ç‹¬æŒ‡å®šç«¯å£æˆ–è€…åŒæ—¶æŒ‡å®šipå’Œç«¯å£ã€‚\n\n```perl\nlisten 127.0.0.1:8000;  #åªç›‘å¬æ¥è‡ª127.0.0.1è¿™ä¸ªIPï¼Œè¯·æ±‚8000ç«¯å£çš„è¯·æ±‚\nlisten 127.0.0.1; #åªç›‘å¬æ¥è‡ª127.0.0.1è¿™ä¸ªIPï¼Œè¯·æ±‚80ç«¯å£çš„è¯·æ±‚ï¼ˆä¸æŒ‡å®šç«¯å£ï¼Œé»˜è®¤80ï¼‰\nlisten 8000; #ç›‘å¬æ¥è‡ªæ‰€æœ‰IPï¼Œè¯·æ±‚8000ç«¯å£çš„è¯·æ±‚\nlisten *:8000; #å’Œä¸Šé¢æ•ˆæœä¸€æ ·\nlisten localhost:8000; #å’Œç¬¬ä¸€ç§æ•ˆæœä¸€è‡´\n```\n\nå…³äºä¸Šé¢çš„ä¸€äº›é‡è¦å‚æ•°åšå¦‚ä¸‹è¯´æ˜ï¼š\n\n- addressï¼šç›‘å¬çš„IPåœ°å€ï¼ˆè¯·æ±‚æ¥æºçš„IPåœ°å€ï¼‰ï¼Œå¦‚æœæ˜¯IPv6çš„åœ°å€ï¼Œéœ€è¦ä½¿ç”¨ä¸­æ‹¬å·â€œ[]â€æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚[fe80::1]ç­‰ã€‚\n- portï¼šç«¯å£å·ï¼Œå¦‚æœåªå®šä¹‰äº†IPåœ°å€æ²¡æœ‰å®šä¹‰ç«¯å£å·ï¼Œå°±ä½¿ç”¨80ç«¯å£ã€‚**è¿™è¾¹éœ€è¦åšä¸ªè¯´æ˜ï¼šè¦æ˜¯ä½ å‹æ ¹æ²¡é…ç½®listenæŒ‡ä»¤ï¼Œé‚£ä¹ˆé‚£ä¹ˆå¦‚æœnginxä»¥è¶…çº§ç”¨æˆ·æƒé™è¿è¡Œï¼Œåˆ™ä½¿ç”¨`\\*`:80ï¼Œå¦åˆ™ä½¿ç”¨`\\*`:8000**ã€‚å¤šä¸ªè™šæ‹Ÿä¸»æœºå¯ä»¥åŒæ—¶ç›‘å¬åŒä¸€ä¸ªç«¯å£,ä½†æ˜¯server_nameéœ€è¦è®¾ç½®æˆä¸ä¸€æ ·ï¼›\n- default_serverï¼šå‡å¦‚é€šè¿‡Hostæ²¡åŒ¹é…åˆ°å¯¹åº”çš„è™šæ‹Ÿä¸»æœºï¼Œåˆ™é€šè¿‡è¿™å°è™šæ‹Ÿä¸»æœºå¤„ç†ã€‚å…·ä½“çš„å¯ä»¥å‚è€ƒè¿™ç¯‡[æ–‡ç« ](https://segmentfault.com/a/1190000015681272)ï¼Œå†™çš„ä¸é”™ã€‚\n- backlog=numberï¼šè®¾ç½®ç›‘å¬å‡½æ•°listen()æœ€å¤šå…è®¸å¤šå°‘ç½‘ç»œè¿æ¥åŒæ—¶å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œåœ¨FreeBSDä¸­é»˜è®¤ä¸º-1ï¼Œå…¶ä»–å¹³å°é»˜è®¤ä¸º511ã€‚\n- accept_filter=filterï¼Œè®¾ç½®ç›‘å¬ç«¯å£å¯¹è¯·æ±‚çš„è¿‡æ»¤ï¼Œè¢«è¿‡æ»¤çš„å†…å®¹ä¸èƒ½è¢«æ¥æ”¶å’Œå¤„ç†ã€‚æœ¬æŒ‡ä»¤åªåœ¨FreeBSDå’ŒNetBSD 5.0+å¹³å°ä¸‹æœ‰æ•ˆã€‚filterå¯ä»¥è®¾ç½®ä¸ºdatareadyæˆ–httpreadyï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚é˜…Nginxçš„å®˜æ–¹æ–‡æ¡£ã€‚\n- bindï¼šæ ‡è¯†ç¬¦ï¼Œä½¿ç”¨ç‹¬ç«‹çš„bind()å¤„ç†æ­¤address:portï¼›ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºç«¯å£ç›¸åŒè€ŒIPåœ°å€ä¸åŒçš„å¤šä¸ªè¿æ¥ï¼ŒNginxæœåŠ¡å™¨å°†åªä½¿ç”¨ä¸€ä¸ªç›‘å¬å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨bind()å¤„ç†ç«¯å£ç›¸åŒçš„æ‰€æœ‰è¿æ¥ã€‚\n- sslï¼šæ ‡è¯†ç¬¦ï¼Œè®¾ç½®ä¼šè¯è¿æ¥ä½¿ç”¨SSLæ¨¡å¼è¿›è¡Œï¼Œæ­¤æ ‡è¯†ç¬¦å’ŒNginxæœåŠ¡å™¨æä¾›çš„HTTPSæœåŠ¡æœ‰å…³ã€‚\n\nlistenæŒ‡ä»¤çš„ä½¿ç”¨çœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œä½†å…¶å®åœ¨ä¸€èˆ¬çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸ä¼šè¿›è¡Œå¤ªå¤æ‚çš„é…ç½®ã€‚\n\n### server_nameæŒ‡ä»¤\n\nç”¨äºé…ç½®è™šæ‹Ÿä¸»æœºçš„åç§°ã€‚è¯­æ³•æ˜¯ï¼š\n\n```makefile\nSyntax:\tserver_name name ...;\nDefault:\t\nserver_name \"\";\nContext:\tserver\n```\n\nå¯¹äºname æ¥è¯´ï¼Œå¯ä»¥åªæœ‰ä¸€ä¸ªåç§°ï¼Œä¹Ÿå¯ä»¥ç”±å¤šä¸ªåç§°å¹¶åˆ—ï¼Œä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚æ¯ä¸ªåå­—å°±æ˜¯ä¸€ä¸ªåŸŸåï¼Œç”±ä¸¤æ®µæˆ–è€…ä¸‰æ®µç»„æˆï¼Œä¹‹é—´ç”±ç‚¹å·â€œ.â€éš”å¼€ã€‚æ¯”å¦‚\n\n```undefined\nserver_name myserver.com www.myserver.com\n```\n\nåœ¨è¯¥ä¾‹ä¸­ï¼Œæ­¤è™šæ‹Ÿä¸»æœºçš„åç§°è®¾ç½®ä¸ºmyserver.comæˆ–www. myserver.comã€‚NginxæœåŠ¡å™¨è§„å®šï¼Œç¬¬ä¸€ä¸ªåç§°ä½œä¸ºæ­¤è™šæ‹Ÿä¸»æœºçš„ä¸»è¦åç§°ã€‚\n\nåœ¨name ä¸­å¯ä»¥ä½¿ç”¨é€šé…ç¬¦â€œ*â€ï¼Œä½†é€šé…ç¬¦åªèƒ½ç”¨åœ¨ç”±ä¸‰æ®µå­—ç¬¦ä¸²ç»„æˆçš„åç§°çš„é¦–æ®µæˆ–å°¾æ®µï¼Œæˆ–è€…ç”±ä¸¤æ®µå­—ç¬¦ä¸²ç»„æˆçš„åç§°çš„å°¾æ®µï¼Œå¦‚ï¼š\n\n```undefined\nserver_name myserver.* *.myserver.com\n```\n\nå¦å¤–nameè¿˜æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„å½¢å¼ã€‚è¿™è¾¹å°±ä¸è¯¦ç»†å±•å¼€äº†ã€‚\n\nç”±äºserver_nameæŒ‡ä»¤æ”¯æŒä½¿ç”¨é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ä¸¤ç§é…ç½®åç§°çš„æ–¹å¼ï¼Œå› æ­¤åœ¨åŒ…å«æœ‰å¤šä¸ªè™šæ‹Ÿä¸»æœºçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªåç§°è¢«å¤šä¸ªè™šæ‹Ÿä¸»æœºçš„server_nameåŒ¹é…æˆåŠŸã€‚é‚£ä¹ˆï¼Œæ¥è‡ªè¿™ä¸ªåç§°çš„è¯·æ±‚åˆ°åº•è¦äº¤ç»™å“ªä¸ªè™šæ‹Ÿä¸»æœºå¤„ç†å‘¢ï¼ŸNginxæœåŠ¡å™¨åšå‡ºå¦‚ä¸‹è§„å®šï¼š\n\na. å¯¹äºåŒ¹é…æ–¹å¼ä¸åŒçš„ï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„ä¼˜å…ˆçº§é€‰æ‹©è™šæ‹Ÿä¸»æœºï¼Œæ’åœ¨å‰é¢çš„ä¼˜å…ˆå¤„ç†è¯·æ±‚ã€‚\n\n- â‘  å‡†ç¡®åŒ¹é…server_name\n- â‘¡ é€šé…ç¬¦åœ¨å¼€å§‹æ—¶åŒ¹é…server_nameæˆåŠŸ\n- â‘¢ é€šé…ç¬¦åœ¨ç»“å°¾æ—¶åŒ¹é…server_nameæˆåŠŸ\n- â‘£ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…server_nameæˆåŠŸ\n\nb. åœ¨ä»¥ä¸Šå››ç§åŒ¹é…æ–¹å¼ä¸­ï¼Œå¦‚æœserver_nameè¢«å¤„äºåŒä¸€ä¼˜å…ˆçº§çš„åŒ¹é…æ–¹å¼å¤šæ¬¡åŒ¹é…æˆåŠŸï¼Œåˆ™é¦–æ¬¡åŒ¹é…æˆåŠŸçš„è™šæ‹Ÿä¸»æœºå¤„ç†è¯·æ±‚ã€‚\n\næœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨åŸºäºIPåœ°å€çš„è™šæ‹Ÿä¸»æœºé…ç½®ï¼Œæ¯”å¦‚è®¿é—®192.168.1.31æœ‰è™šæ‹Ÿä¸»æœº1å¤„ç†ï¼Œè®¿é—®192.168.1.32ç”±è™šæ‹Ÿä¸»æœº2å¤„ç†ã€‚\n\nè¿™æ—¶æˆ‘ä»¬è¦å…ˆç½‘å¡ç»‘å®šåˆ«åï¼Œæ¯”å¦‚è¯´ç½‘å¡ä¹‹å‰ç»‘å®šçš„IPæ˜¯192.168.1.30ï¼Œç°åœ¨å°†192.168.1.31å’Œ192.168.1.32è¿™ä¸¤ä¸ªIPéƒ½ç»‘å®šåˆ°è¿™ä¸ªç½‘å¡ä¸Šï¼Œé‚£ä¹ˆè¯·æ±‚è¿™ä¸ªä¸¤ä¸ªIPçš„è¯·æ±‚æ‰ä¼šåˆ°è¾¾è¿™å°æœºå™¨ã€‚\n\nç»‘å®šåˆ«ååè¿›è¡Œä»¥ä¸‹é…ç½®å³å¯ï¼š\n\n```css\nhttp\n{\n\t{\n\t   listen:  80;\n\t   server_name:  192.168.1.31;\n     ...\n\t}\n\t{\n\t   listen:  80;\n\t   server_name:  192.168.1.32;\n     ...\n\t}\n}\n```\n\n## locationå—\n\næ¯ä¸ªserverå—ä¸­å¯ä»¥åŒ…å«å¤šä¸ªlocationå—ã€‚åœ¨æ•´ä¸ªNginxé…ç½®æ–‡æ¡£ä¸­èµ·ç€é‡è¦çš„ä½œç”¨ï¼Œè€Œä¸”NginxæœåŠ¡å™¨åœ¨è®¸å¤šåŠŸèƒ½ä¸Šçš„çµæ´»æ€§å¾€å¾€åœ¨locationæŒ‡ä»¤çš„é…ç½®ä¸­ä½“ç°å‡ºæ¥ã€‚\n\nlocationå—çš„ä¸»è¦ä½œç”¨æ˜¯ï¼ŒåŸºäºNginxæœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œ server_name/uri-stringï¼‰ï¼Œå¯¹é™¤è™šæ‹Ÿä¸»æœºåç§°ï¼ˆä¹Ÿå¯ä»¥æ˜¯IPåˆ«åï¼Œåæ–‡æœ‰è¯¦ç»†é˜è¿°ï¼‰ä¹‹å¤–çš„å­—ç¬¦ä¸²ï¼ˆå‰ä¾‹ä¸­â€œ/uri-stringâ€éƒ¨åˆ†ï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ°å€å®šå‘ã€æ•°æ®ç¼“å­˜å’Œåº”ç­”æ§åˆ¶ç­‰åŠŸèƒ½éƒ½æ˜¯åœ¨è¿™éƒ¨åˆ†å®ç°ã€‚è®¸å¤šç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ä¹Ÿæ˜¯åœ¨locationå—ä¸­æä¾›åŠŸèƒ½ã€‚\n\nåœ¨Nginxçš„å®˜æ–¹æ–‡æ¡£ä¸­å®šä¹‰çš„locationçš„è¯­æ³•ç»“æ„ä¸ºï¼š\n\n```css\nlocation [ = | ~ | ~* | ^~ ] uri { ... }\n```\n\nå…¶ä¸­ï¼Œuriå˜é‡æ˜¯å¾…åŒ¹é…çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ä¸å«æ­£åˆ™è¡¨è¾¾çš„å­—ç¬¦ä¸²ï¼Œå¦‚/myserver.phpç­‰ï¼›ä¹Ÿå¯ä»¥æ˜¯åŒ…å«æœ‰æ­£åˆ™è¡¨è¾¾çš„å­—ç¬¦ä¸²ï¼Œå¦‚ .php$ï¼ˆè¡¨ç¤ºä»¥.phpç»“å°¾çš„URLï¼‰ç­‰ã€‚ä¸ºäº†ä¸‹æ–‡å™è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬çº¦å®šï¼Œä¸å«æ­£åˆ™è¡¨è¾¾çš„uriç§°ä¸ºâ€œæ ‡å‡†uriâ€ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„uriç§°ä¸ºâ€œæ­£åˆ™uriâ€ã€‚\n\nå…¶ä¸­æ–¹æ‹¬å·é‡Œçš„éƒ¨åˆ†ï¼Œæ˜¯å¯é€‰é¡¹ï¼Œç”¨æ¥æ”¹å˜è¯·æ±‚å­—ç¬¦ä¸²ä¸ uri çš„åŒ¹é…æ–¹å¼ã€‚åœ¨ä»‹ç»å››ç§æ ‡è¯†çš„å«ä¹‰ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸æ·»åŠ æ­¤é€‰é¡¹æ—¶ï¼ŒNginxæœåŠ¡å™¨æ˜¯å¦‚ä½•åœ¨serverå—ä¸­æœç´¢å¹¶ä½¿ç”¨locationå—çš„uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…çš„ã€‚\n\nåœ¨ä¸æ·»åŠ æ­¤é€‰é¡¹æ—¶ï¼ŒNginxæœåŠ¡å™¨é¦–å…ˆåœ¨serverå—çš„å¤šä¸ªlocationå—ä¸­æœç´¢æ˜¯å¦æœ‰æ ‡å‡†uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä»¥åŒ¹é…ï¼Œå°±è®°å½•åŒ¹é…åº¦æœ€é«˜çš„ä¸€ä¸ªã€‚ç„¶åï¼ŒæœåŠ¡å™¨å†ç”¨locationå—ä¸­çš„æ­£åˆ™uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…ï¼Œå½“ç¬¬ä¸€ä¸ªæ­£åˆ™uriåŒ¹é…æˆåŠŸï¼Œç»“æŸæœç´¢ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªlocationå—å¤„ç†æ­¤è¯·æ±‚ï¼›å¦‚æœæ­£åˆ™åŒ¹é…å…¨éƒ¨å¤±è´¥ï¼Œå°±ä½¿ç”¨åˆšæ‰è®°å½•çš„åŒ¹é…åº¦æœ€é«˜çš„locationå—å¤„ç†æ­¤è¯·æ±‚ã€‚\n\näº†è§£äº†ä¸Šé¢çš„å†…å®¹ï¼Œå°±å¯ä»¥è§£é‡Šå¯é€‰é¡¹ä¸­å„ä¸ªæ ‡è¯†çš„å«ä¹‰äº†ï¼š\n\n- â€œ=â€ï¼Œç”¨äºæ ‡å‡†uriå‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸uriä¸¥æ ¼åŒ¹é…ã€‚å¦‚æœå·²ç»åŒ¹é…æˆåŠŸï¼Œå°±åœæ­¢ç»§ç»­å‘ä¸‹æœç´¢å¹¶ç«‹å³å¤„ç†æ­¤è¯·æ±‚ã€‚\n- â€œ^ï½â€ï¼Œç”¨äºæ ‡å‡†uriå‰ï¼Œè¦æ±‚NginxæœåŠ¡å™¨æ‰¾åˆ°æ ‡è¯†uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„locationåï¼Œç«‹å³ä½¿ç”¨æ­¤locationå¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†ä½¿ç”¨locationå—ä¸­çš„æ­£åˆ™uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åšåŒ¹é…ã€‚\n- â€œï½â€ï¼Œç”¨äºè¡¨ç¤ºuriåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚\n- â€œï½`*`â€ï¼Œç”¨äºè¡¨ç¤ºuriåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚æ³¨æ„å¦‚æœuriåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±å¿…é¡»è¦ä½¿ç”¨â€œï½â€æˆ–è€…â€œï½*â€æ ‡è¯†ã€‚\n\n> æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æµè§ˆå™¨ä¼ é€URIæ—¶å¯¹ä¸€éƒ¨åˆ†å­—ç¬¦è¿›è¡ŒURLç¼–ç ï¼Œæ¯”å¦‚ç©ºæ ¼è¢«ç¼–ç ä¸ºâ€œ%20â€ï¼Œé—®å·è¢«ç¼–ç ä¸ºâ€œ%3fâ€ç­‰ã€‚â€œï½â€æœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒå¯¹uriä¸­çš„è¿™äº›ç¬¦å·å°†ä¼šè¿›è¡Œç¼–ç å¤„ç†ã€‚æ¯”å¦‚ï¼Œå¦‚æœlocationå—æ”¶åˆ°çš„URIä¸ºâ€œ/html/%20/dataâ€ï¼Œåˆ™å½“NginxæœåŠ¡å™¨æœç´¢åˆ°é…ç½®ä¸ºâ€œï½ /html/ /dataâ€çš„locationæ—¶ï¼Œå¯ä»¥åŒ¹é…æˆåŠŸã€‚\n\n### rootæŒ‡ä»¤\n\nè¿™ä¸ªæŒ‡ä»¤ç”¨äºè®¾ç½®è¯·æ±‚å¯»æ‰¾èµ„æºçš„è·Ÿç›®å½•ï¼Œæ­¤æŒ‡ä»¤å¯ä»¥åœ¨httpå—ã€serverå—æˆ–è€…locationå—ä¸­é…ç½®ã€‚ç”±äºä½¿ç”¨NginxæœåŠ¡å™¨å¤šæ•°æƒ…å†µä¸‹è¦é…ç½®å¤šä¸ªlocationå—å¯¹ä¸åŒçš„è¯·æ±‚åˆ†åˆ«åšå‡ºå¤„ç†ï¼Œå› æ­¤è¯¥æŒ‡ä»¤é€šå¸¸åœ¨locationå—ä¸­è¿›è¡Œè®¾ç½®ã€‚\n\n```lua\nroot path\n```\n\npathå˜é‡ä¸­å¯ä»¥åŒ…å«NginxæœåŠ¡å™¨é¢„è®¾çš„å¤§å¤šæ•°å˜é‡ï¼Œåªæœ‰documentrootå’Œrealpath_rootä¸å¯ä»¥ä½¿ç”¨ã€‚\n\n## ä¸€ç‚¹è¯´æ˜[#](https://www.cnblogs.com/54chensongxia/p/12938929.html#ä¸€ç‚¹è¯´æ˜)\n\nä¸Šé¢åˆ—ä¸¾äº†Nignxä¸­å…¨å±€å—ã€eventå—å’Œhttpå—çš„ä¸€äº›é…ç½®æŒ‡ä»¤ï¼Œä½†æ˜¯Nginxçš„æŒ‡ä»¤è¿œè¿œä¸æ­¢è¿™äº›ã€‚å…¶å®è¿™è¾¹æœ€ä¸»è¦çš„è¿˜æ˜¯è®²è§£æ•´ä¸ªé…ç½®æ–‡ä»¶çš„ç»“æ„ï¼Œå¦‚æœå¤§å®¶è¦çœ‹æ¯”è¾ƒå…¨çš„æŒ‡ä»¤ä»‹ç»ã€æ¨¡å—ä»‹ç»çš„è¯ï¼Œå»ºè®®å»Nginxçš„å®˜ç½‘ã€‚\n\n\n\n# ç¤ºä¾‹\n\n##ã€€é…ç½®ä¸¤ä¸ªæœåŠ¡å™¨\n\nä½¿ç”¨expressè½»é‡æœåŠ¡å™¨è¿›è¡Œé…ç½®\n\n```js\nconst express = require('express')\nconst app = express()\nconst port = 3001\n\napp.get('/1',(req,res)=>{\n    res.send({\n        server:'1',\n        name:'phone',\n        price:'888'\n    })\n    console.log(\"è¢«è®¿é—®äº†order1\")\n})\n\napp.listen(port,()=>{\n    console.log('æ­£åœ¨ç›‘å¬'+port)\n})\n```\n\nåˆ†åˆ«å¯åŠ¨ä¸€ä¸ª3000ç«¯å£å’Œä¸€ä¸ª3001ç«¯å£çš„æœåŠ¡å™¨ã€‚\n\nå¯åŠ¨å‘½ä»¤ï¼š\n\n```bash\nnode order1.js\n```\n\n## é…ç½®Nginxè¿›è¡Œå¯åŠ¨\n\nå…³é”®é…ç½®æ–‡ä»¶\n\n```nginx\n upstream order {\n        server 127.0.0.1:3000;\n        server 127.0.0.1:3001;\n    }\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n            # root   html;\n            proxy_pass http://order;\n            # index  index.html index.htm;\n        }\n}\n```\n\n## nginxé…ç½®è´Ÿè½½å‡è¡¡\n\nå‡è®¾è¿™æ ·ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šå°†åº”ç”¨éƒ¨ç½²åœ¨ 192.168.1.11:80ã€192.168.1.12:80ã€192.168.1.13:80 ä¸‰å° linux ç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šã€‚ç½‘ç«™åŸŸåå« **www.helloworld.com**ï¼Œå…¬ç½‘ IP ä¸º 192.168.1.11ã€‚åœ¨å…¬ç½‘ IP æ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½² nginxï¼Œå¯¹æ‰€æœ‰è¯·æ±‚åšè´Ÿè½½å‡è¡¡å¤„ç†ï¼ˆä¸‹é¢ä¾‹å­ä¸­ä½¿ç”¨çš„æ˜¯åŠ æƒè½®è¯¢ç­–ç•¥ï¼‰ã€‚\n\nnginx.conf é…ç½®å¦‚ä¸‹ï¼š\n\n```nginx\nhttp {\n     #è®¾å®šmimeç±»å‹,ç±»å‹ç”±mime.typeæ–‡ä»¶å®šä¹‰\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n    #è®¾å®šæ—¥å¿—æ ¼å¼\n    access_log    /var/log/nginx/access.log;\n\n    #è®¾å®šè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨åˆ—è¡¨\n    upstream load_balance_server {\n        #weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§\n        server 192.168.1.11:80   weight=5;\n        server 192.168.1.12:80   weight=1;\n        server 192.168.1.13:80   weight=6;\n    }\n\n   #HTTPæœåŠ¡å™¨\n   server {\n        #ä¾¦å¬80ç«¯å£\n        listen       80;\n\n        #å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®\n        server_name  www.helloworld.com;\n\n        #å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡è¯·æ±‚\n        location / {\n            root        /root;                 #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®\n            index       index.html index.htm;  #å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°\n            proxy_pass  http://load_balance_server ;#è¯·æ±‚è½¬å‘load_balance_server å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨\n\n            #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®(å¯é€‰æ‹©æ€§é…ç½®)\n            #proxy_redirect off;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_connect_timeout 90;          #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)\n            proxy_send_timeout 90;             #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)\n            proxy_read_timeout 90;             #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)\n            proxy_buffer_size 4k;              #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°\n            proxy_buffers 4 32k;               #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®\n            proxy_busy_buffers_size 64k;       #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰\n            proxy_temp_file_write_size 64k;    #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ \n\n            client_max_body_size 10m;          #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°\n            client_body_buffer_size 128k;      #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°\n        }\n    }\n}\n```\n\n### è´Ÿè½½å‡è¡¡çš„ç­–ç•¥\n\n#### [è´Ÿè½½å‡è¡¡ç­–ç•¥](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=è´Ÿè½½å‡è¡¡ç­–ç•¥)\n\nNginx æä¾›äº†å¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè®©æˆ‘ä»¬æ¥ä¸€ä¸€äº†è§£ä¸€ä¸‹ï¼š\n\nè´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨å„ç§åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åŸºæœ¬ä¸ŠåŸç†ä¸€è‡´ï¼Œå¯¹äºåŸç†æœ‰å…´è¶£ï¼Œä¸å¦¨å‚è€ƒ [è´Ÿè½½å‡è¡¡](https://dunwu.github.io/blog/pages/98a1c1/)\n\n##### [è½®è¯¢](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=è½®è¯¢)\n\n```nginx\nupstream bck_testing_01 {\n  # é»˜è®¤æ‰€æœ‰æœåŠ¡å™¨æƒé‡ä¸º 1\n  server 192.168.250.220:8080\n  server 192.168.250.221:8080\n  server 192.168.250.222:8080\n}\n```\n\n##### [åŠ æƒè½®è¯¢](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=åŠ æƒè½®è¯¢)\n\n```nginx\nupstream bck_testing_01 {\n  server 192.168.250.220:8080   weight=3\n  server 192.168.250.221:8080              # default weight=1\n  server 192.168.250.222:8080              # default weight=1\n}\n```\n\n##### [æœ€å°‘è¿æ¥](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=æœ€å°‘è¿æ¥)\n\n```nginx\nupstream bck_testing_01 {\n  least_conn;\n\n  # with default weight for all (weight=1)\n  server 192.168.250.220:8080\n  server 192.168.250.221:8080\n  server 192.168.250.222:8080\n}\n```\n\n##### [åŠ æƒæœ€å°‘è¿æ¥](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=åŠ æƒæœ€å°‘è¿æ¥)\n\n```nginx\nupstream bck_testing_01 {\n  least_conn;\n\n  server 192.168.250.220:8080   weight=3\n  server 192.168.250.221:8080              # default weight=1\n  server 192.168.250.222:8080              # default weight=1\n}\n```\n\n##### [IP Hash](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=ip-hash)\n\n```nginx\nupstream bck_testing_01 {\n\n  ip_hash;\n\n  # with default weight for all (weight=1)\n  server 192.168.250.220:8080\n  server 192.168.250.221:8080\n  server 192.168.250.222:8080\n\n}\n```\n\n##### [æ™®é€š Hash](https://dunwu.github.io/nginx-tutorial/#/nginx-quickstart?id=æ™®é€š-hash)\n\n```nginx\nupstream bck_testing_01 {\n\n  hash $request_uri;\n\n  # with default weight for all (weight=1)\n  server 192.168.250.220:8080\n  server 192.168.250.221:8080\n  server 192.168.250.222:8080\n\n}\n```\n\n## ä½¿ç”¨nginxæ­å»ºæ–‡ä»¶æœåŠ¡å™¨\n\næœ‰æ—¶å€™ï¼Œå›¢é˜Ÿéœ€è¦å½’æ¡£ä¸€äº›æ•°æ®æˆ–èµ„æ–™ï¼Œé‚£ä¹ˆæ–‡ä»¶æœåŠ¡å™¨å¿…ä¸å¯å°‘ã€‚ä½¿ç”¨ Nginx å¯ä»¥éå¸¸å¿«é€Ÿä¾¿æ·çš„æ­å»ºä¸€ä¸ªç®€æ˜“çš„æ–‡ä»¶æœåŠ¡ã€‚\n\nNginx ä¸­çš„é…ç½®è¦ç‚¹ï¼š\n\n- å°† autoindex å¼€å¯å¯ä»¥æ˜¾ç¤ºç›®å½•ï¼Œé»˜è®¤ä¸å¼€å¯ã€‚\n- å°† autoindex_exact_size å¼€å¯å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ã€‚\n- å°† autoindex_localtime å¼€å¯å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚\n- root ç”¨æ¥è®¾ç½®å¼€æ”¾ä¸ºæ–‡ä»¶æœåŠ¡çš„æ ¹è·¯å¾„ã€‚\n- charset è®¾ç½®ä¸º `charset utf-8,gbk;`ï¼Œå¯ä»¥é¿å…ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ˆwindows æœåŠ¡å™¨ä¸‹è®¾ç½®åï¼Œä¾ç„¶ä¹±ç ï¼Œæœ¬äººæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼‰ã€‚\n\nä¸€ä¸ªæœ€ç®€åŒ–çš„é…ç½®å¦‚ä¸‹ï¼š\n\n```nginx\nautoindex on;# æ˜¾ç¤ºç›®å½•\nautoindex_exact_size on;# æ˜¾ç¤ºæ–‡ä»¶å¤§å°\nautoindex_localtime on;# æ˜¾ç¤ºæ–‡ä»¶æ—¶é—´\n\nserver {\n    charset      utf-8,gbk; # windows æœåŠ¡å™¨ä¸‹è®¾ç½®åï¼Œä¾ç„¶ä¹±ç ï¼Œæš‚æ—¶æ— è§£\n    listen       9050 default_server;\n    listen       [::]:9050 default_server;\n    server_name  _;\n    root         /share/fs;\n}\n```\n\n# åœ¨linuxä¸Šå®‰è£…é…ç½®nginx\n\n## å®‰è£…\n\nå› ä¸ºNginxä¾èµ–äºgccçš„ç¼–è¯‘ç¯å¢ƒï¼Œæ‰€ä»¥ï¼Œéœ€è¦å®‰è£…ç¼–è¯‘ç¯å¢ƒæ¥ä½¿Nginxèƒ½å¤Ÿç¼–è¯‘èµ·æ¥ã€‚\n\nå‘½ä»¤ï¼š`yum install gcc-c++`\n\nNginxçš„httpæ¨¡å—éœ€è¦ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œéœ€è¦å®‰è£…pcreã€‚\n\nå‘½ä»¤ï¼š`yum install -y pcre pcre-devel`\n\nå®‰è£…ä¾èµ–çš„è§£å‹åŒ…ã€‚\n\nå‘½ä»¤ï¼š`yum install -y zlib zlib-devel`\n\nssl åŠŸèƒ½éœ€è¦ openssl åº“ï¼Œå®‰è£… opensslã€‚\n\nå‘½ä»¤ï¼š`yum install -y openssl openssl-devel`\n\n\n\n**ç„¶åå»[nginx](https://nginx.org/en/download.html)å®˜ç½‘ä¸‹è½½nginx**\n\n- Mainline versionï¼šMainline æ˜¯ Nginx ç›®å‰ä¸»åŠ›åœ¨åšçš„ç‰ˆæœ¬ï¼Œå¯ä»¥è¯´æ˜¯å¼€å‘ç‰ˆ\n- Stable versionï¼šæœ€æ–°ç¨³å®šç‰ˆï¼Œç”Ÿäº§ç¯å¢ƒä¸Šå»ºè®®ä½¿ç”¨çš„ç‰ˆæœ¬\n- Legacy versionsï¼šé—ç•™çš„è€ç‰ˆæœ¬çš„ç¨³å®šç‰ˆ\n\n\n\nç„¶åè§£å‹åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™é‡Œæ¨èè§£å‹åˆ°`/usr/local/`,ç„¶åå°†ç›®å½•åç§°æ”¹ä¸ºnginx\n\nè¿›å…¥åˆ°è¯¥ç›®å½•ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œï¼š\n\n```bash\n./configure --prefix=/usr/local/nginx\nmake\nmake install\n```\n\n**é…ç½®nginx.conf**\n\nåœ¨locationçš„rootä¸­é…ç½®æœ¬åœ°å‰ç«¯æ‰“åŒ…å¥½çš„æ–‡ä»¶è·¯å¾„\n\n**å¯åŠ¨Nginx**\n\nè¿›å…¥ `/usr/local/nginx/sbin` ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š`./nginx` å¯åŠ¨Nginxï¼š\n","tags":["nginx"],"categories":["è¿ç»´"]},{"title":"JSåŸå‹","url":"/2023/06/21/JSåŸå‹/","content":"\n## ä¸€ã€åŸå‹\n\næ¯ä¸ªJSå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒJSä¼šè‡ªåŠ¨ä¸ºè¯¥å¯¹è±¡å…³è”ä¸€ä¸ªåŸå‹ã€‚åœ¨ES5ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸å°†åŸå‹å¯¹è±¡ç§°ä¸ºprotoï¼Œå› ä¸ºæ²¡æœ‰å®é™…çš„æ–¹æ³•å¯ä»¥è·å–åˆ°å¯¹è±¡çš„åŸå‹ã€‚ä½†æ˜¯åœ¨ES5ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Object.getPrototypeOf(obj)æ–¹æ³•æ¥è·å–å¯¹è±¡çš„åŸå‹ã€‚\n\n### 1.1 åŸå‹çš„æ¦‚å¿µ\n\nåŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥é€šè¿‡å®ƒæ¥å®ç°å±æ€§å’Œæ–¹æ³•çš„å…±äº«ã€‚ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå®ƒçš„åŸå‹ä¸ä¸ºç©ºï¼Œåˆ™å®ƒå°±å¯ä»¥ç»§æ‰¿æ¥è‡ªå®ƒåŸå‹çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n### 1.2 åŸå‹çš„æ„é€ \n\nåœ¨JSä¸­ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå®ƒä»£è¡¨äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚å½“æˆ‘ä»¬ä½¿ç”¨newè¿ç®—ç¬¦æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘äº†å‡½æ•°çš„prototypeå±æ€§ã€‚ä¾‹å¦‚ï¼š\n\n```javascript\nfunction Person(name, age) {\n  this.name = name;\n  this.age = age;\n}\n\nPerson.prototype.sayHello = function() {\n  console.log('Hello, my name is ' + this.name);\n}\n\nvar tom = new Person('Tom', 28);\ntom.sayHello(); // Hello, my name is Tom\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªPersonå‡½æ•°ï¼Œå¹¶åœ¨å®ƒçš„åŸå‹ä¸ŠåŠ ä¸Šäº†sayHelloæ–¹æ³•ã€‚å½“æˆ‘ä»¬ç”¨newè¿ç®—ç¬¦åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒJSä¼šè‡ªåŠ¨ä¸ºæ–°å¯¹è±¡åˆ†é…ä¸€ä¸ªåŸå‹ï¼Œå¹¶å°†è¯¥åŸå‹æŒ‡å‘Personå‡½æ•°çš„prototypeå±æ€§ã€‚å› æ­¤ï¼Œæ–°å¯¹è±¡å°±å¯ä»¥ç»§æ‰¿PersonåŸå‹ä¸Šçš„sayHelloæ–¹æ³•ã€‚\n\n### 1.3 åŸå‹çš„åº”ç”¨\n\nåŸå‹çš„ä¸»è¦ä½œç”¨æ˜¯å®ç°ç»§æ‰¿ã€‚åœ¨JSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾æ¥å®ç°ç»§æ‰¿ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„åŸå‹ä¸ä¸ºç©ºï¼Œåˆ™å®ƒå°±å¯ä»¥ç»§æ‰¿æ¥è‡ªå®ƒåŸå‹çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼š\n\n```javascript\nfunction Animal() {}\n\nAnimal.prototype.eat = function() {\n  console.log('Animal is eating');\n}\n\nfunction Dog() {}\n\nDog.prototype = Object.create(Animal.prototype); // ç»§æ‰¿AnimalåŸå‹\n\nDog.prototype.bark = function() {\n  console.log('Dog is barking');\n}\n\nvar snoop = new Dog();\nsnoop.eat(); // Animal is eating\nsnoop.bark(); // Dog is barking\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªAnimalå‡½æ•°ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªeatæ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªDogå‡½æ•°ï¼Œå®ƒçš„åŸå‹æŒ‡å‘äº†Animalçš„åŸå‹ã€‚è¿™æ ·ä¸€æ¥ï¼ŒDogå°±å¯ä»¥ç»§æ‰¿Animalçš„åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•äº†ã€‚æˆ‘ä»¬åœ¨Dogçš„åŸå‹ä¸Šæ·»åŠ äº†barkæ–¹æ³•ï¼Œè¿™æ ·snoopå¯¹è±¡å°±å¯ä»¥è°ƒç”¨å®ƒä»¬äº†ã€‚\n\n## äºŒã€åŸå‹é“¾\n\nåŸå‹é“¾æ˜¯ç”±æ¯ä¸ªå¯¹è±¡çš„åŸå‹éšå¼æŒ‡å‘ä¸Šä¸€ä¸ªåŸå‹ï¼Œä»è€Œå½¢æˆçš„é“¾å¼ç»“æ„ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡éœ€è¦è®¿é—®ä¸€ä¸ªå±æ€§æˆ–æ–¹æ³•ï¼Œä½†è¯¥å±æ€§æˆ–æ–¹æ³•æ‰¾ä¸åˆ°ï¼ŒJSä¼šè‡ªåŠ¨æ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚å› æ­¤ï¼ŒåŸå‹é“¾ä¹Ÿæ˜¯å®ç°ç»§æ‰¿çš„å¦ä¸€ä¸ªé‡è¦æœºåˆ¶ã€‚\n\n### 2.1 åŸå‹é“¾çš„æ¦‚å¿µ\n\nåœ¨JSä¸­ï¼ŒåŸå‹é“¾ç”±ä¸€ç³»åˆ—åŸå‹å¯¹è±¡ç»„æˆã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œè€ŒåŸå‹å¯¹è±¡åˆæœ‰è‡ªå·±çš„åŸå‹å¯¹è±¡ã€‚å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJSä¼šå…ˆåœ¨è¯¥å¯¹è±¡æœ¬èº«æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚å¦‚æœæ•´ä¸ªåŸå‹é“¾éƒ½æ²¡æœ‰æ‰¾åˆ°è¯¥å±æ€§æˆ–æ–¹æ³•ï¼ŒJSä¼šè¿”å›undefinedã€‚\n\n### 2.2 åŸå‹é“¾çš„æ„é€ \n\nåœ¨JSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸€ä¸ªæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œæ¥æ„é€ åŸå‹é“¾ã€‚ä¾‹å¦‚ï¼š\n\n```javascript\nfunction Animal() {}\n\nAnimal.prototype.eat = function() {\n  console.log('Animal is eating');\n}\n\nfunction Dog() {}\n\nDog.prototype = Object.create(Animal.prototype); // ç»§æ‰¿AnimalåŸå‹\n\nDog.prototype.bark = function() {\n  console.log('Dog is barking');\n}\n\nvar snoop = new Dog();\nconsole.log(snoop.__proto__); // Dog.prototype\nconsole.log(snoop.__proto__.__proto__); // Animal.prototype\nconsole.log(snoop.__proto__.__proto__.__proto__); // Object.prototype\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†Animalå’ŒDogä¸¤ä¸ªå‡½æ•°ã€‚ç„¶åå°†Dogçš„åŸå‹æŒ‡å‘äº†Animalçš„åŸå‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œsnoopå¯¹è±¡å°±å¯ä»¥æ²¿ç€åŸå‹é“¾ç»§æ‰¿AnimalåŸå‹ä¸Šçš„eatæ–¹æ³•ã€‚\n\n### 2.3 åŸå‹é“¾çš„åº”ç”¨\n\nåŸå‹é“¾çš„ä¸»è¦åº”ç”¨å°±æ˜¯å®ç°ç»§æ‰¿ã€‚åœ¨JSä¸­ï¼Œé€šè¿‡å°†ä¸€ä¸ªæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„é€ å‡ºä¸€ä¸ªåŸå‹é“¾ï¼Œä»è€Œå®ç°ç»§æ‰¿ã€‚ä¾‹å¦‚ï¼š\n\n```javascript\nfunction Animal(name) {\n  this.name = name;\n}\n\nAnimal.prototype.eat = function() {\n  console.log(this.name + ' is eating');\n}\n\nfunction Dog(name) {\n  Animal.call(this, name); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°\n}\n\nDog.prototype = Object.create(Animal.prototype); // ç»§æ‰¿AnimalåŸå‹\n\nDog.prototype.bark = function() {\n  console.log(this.name + ' is barking');\n}\n\nvar snoop = new Dog('Snoop');\nsnoop.eat(); // Snoop is eating\nsnoop.bark(); // Snoop is barking\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†Animalå’ŒDogä¸¤ä¸ªå‡½æ•°ã€‚åœ¨Dogçš„æ„é€ å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬è°ƒç”¨äº†Animalçš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¼ å…¥äº†å½“å‰å¯¹è±¡çš„thiså’Œnameå‚æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼ŒDogå°±å¯ä»¥ç»§æ‰¿Animalçš„å±æ€§å’Œæ–¹æ³•äº†ã€‚æˆ‘ä»¬é€šè¿‡å°†Dogçš„åŸå‹æŒ‡å‘Animalçš„åŸå‹ï¼Œæ¥å®ç°å¯¹AnimalåŸå‹ä¸Šeatæ–¹æ³•çš„ç»§æ‰¿ã€‚æœ€åï¼Œæˆ‘ä»¬å®šä¹‰äº†Dogè‡ªå·±çš„barkæ–¹æ³•ï¼Œåœ¨snoopå¯¹è±¡ä¸Šå³å¯è°ƒç”¨åˆ°ã€‚\n\n> åœ¨JSä¸­ï¼ŒåŸå‹å’ŒåŸå‹é“¾æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µã€‚å®ƒä»¬å¯ä»¥è®©JSå˜å¾—æ›´åŠ çµæ´»å’Œå¼ºå¤§ï¼Œä½¿å¾—ç»§æ‰¿å’Œå¤šæ€ç­‰é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§éƒ½å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„å®ç°ã€‚ç†Ÿç»ƒæŒæ¡åŸå‹å’ŒåŸå‹é“¾ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£JSçš„é¢å‘å¯¹è±¡æœºåˆ¶ï¼Œå†™å‡ºæ›´åŠ ä¼˜é›…ã€é«˜æ•ˆçš„ä»£ç ã€‚\n\né™„ï¼šå®Œæ•´ä»£ç \n\n```javascript\nfunction Animal(name) {\n  this.name = name;\n}\n\nAnimal.prototype.eat = function() {\n  console.log(this.name + ' is eating');\n}\n\nfunction Dog(name) {\n  Animal.call(this, name); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°\n}\n\nDog.prototype = Object.create(Animal.prototype); // ç»§æ‰¿AnimalåŸå‹\n\nDog.prototype.bark = function() {\n  console.log(this.name + ' is barking');\n}\n\nvar snoop = new Dog('Snoop');\nsnoop.eat(); // Snoop is eating\nsnoop.bark(); // Snoop is barking\n\nconsole.log(snoop.__proto__); // Dog.prototype\nconsole.log(snoop.__proto__.__proto__); // Animal.prototype\nconsole.log(snoop.__proto__.__proto__.__proto__); // Object.prototype\n\nfunction Person(name, age) {\n  this.name = name;\n  this.age = age;\n}\n\nPerson.prototype.sayHello = function() {\n  console.log('Hello, my name is ' + this.name);\n}\n\nvar tom = new Person('Tom', 28);\ntom.sayHello(); // Hello, my name is Tom\n```\n\n**é¡ºé“è®²è§£ä¸€ä¸‹æ„é€ å‡½æ•°å’Œç±»çš„æ¦‚å¿µï¼Œæ‰“ç‰¢åŸºç¡€ï¼Œè¿™å¯¹äºç†è§£ JavaScript çš„é¢å‘å¯¹è±¡ç¼–ç¨‹éå¸¸é‡è¦ã€‚**\n\n## ä¸‰ã€æ„é€ å‡½æ•°\n\nåœ¨ JS ä¸­ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œå®ƒä»¬ç”¨äºåˆ›å»ºå¯¹è±¡ã€‚ä¸æ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ„é€ å‡½æ•°é€šå¸¸é¦–å­—æ¯å¤§å†™ï¼Œè€Œä¸”å¿…é¡»ä½¿ç”¨ new è¿ç®—ç¬¦æ¥è°ƒç”¨ã€‚å½“æˆ‘ä»¬ç”¨ new è¿ç®—ç¬¦æ¥è°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°æ—¶ï¼ŒJS ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ã€‚\n\n### 3.1 æ„é€ å‡½æ•°çš„æ¦‚å¿µ\n\næ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œå®ƒä»¬ç”¨äºåˆ›å»ºå¯¹è±¡ã€‚ä¸æ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œæ„é€ å‡½æ•°é€šå¸¸é¦–å­—æ¯å¤§å†™ï¼Œè€Œä¸”å¿…é¡»ä½¿ç”¨ new è¿ç®—ç¬¦æ¥è°ƒç”¨ã€‚æ„é€ å‡½æ•°å†…éƒ¨é€šå¸¸ä¼šå®šä¹‰ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•ä¼šåœ¨æ¯ä¸ªé€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ä¸­å…±äº«ã€‚\n\n```javascript\nfunction Person(name, age) {\n  this.name = name;\n  this.age = age;\n}\n\nvar tom = new Person('Tom', 28);\nconsole.log(tom.name); // Tom\nconsole.log(tom.age); // 28\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„æ„é€ å‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•° name å’Œ ageï¼Œç„¶åå°†å®ƒä»¬ä¿å­˜åˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨ new è¿ç®—ç¬¦æ¥è°ƒç”¨è¯¥æ„é€ å‡½æ•°ï¼Œå¹¶å°†è¿”å›å€¼ä¿å­˜åˆ°å˜é‡ tom ä¸­ã€‚æ­¤æ—¶ï¼Œtom å°±æ˜¯ä¸€ä¸ªé€šè¿‡ Person æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ã€‚\n\n### 3.2 æ„é€ å‡½æ•°çš„åº”ç”¨\n\næ„é€ å‡½æ•°æœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯åˆ›å»ºå¯¹è±¡ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åˆ›å»ºå¤šä¸ªå…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª Car æ„é€ å‡½æ•°ï¼Œå¹¶ç”¨å®ƒæ¥åˆ›å»ºå¤šä¸ªæ±½è½¦å¯¹è±¡ï¼š\n\n```javascript\nfunction Car(brand, model, price) {\n  this.brand = brand;\n  this.model = model;\n  this.price = price;\n}\n\nvar car1 = new Car('Toyota', 'Camry', 25000);\nvar car2 = new Car('Honda', 'Accord', 28000);\nconsole.log(car1.brand); // Toyota\nconsole.log(car2.model); // Accord\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Car çš„æ„é€ å‡½æ•°ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ brandã€model å’Œ price å±æ€§ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨è¯¥æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸¤ä¸ªä¸åŒçš„æ±½è½¦å¯¹è±¡ car1 å’Œ car2ã€‚\n\n## å››ã€ç±»\n\nåœ¨ ES6 ä¸­ï¼ŒJS å¼•å…¥äº† class å…³é”®å­—ï¼Œä½¿å¾— JS å˜å¾—æ›´åŠ æ¥è¿‘ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚ä½¿ç”¨ class å…³é”®å­—å¯ä»¥è½»æ¾åœ°å®šä¹‰ä¸€ä¸ªç±»ï¼Œå¹¶åœ¨è¯¥ç±»ä¸­å®šä¹‰å±æ€§å’Œæ–¹æ³•ã€‚ç±»ä¹Ÿå¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ï¼Œå¹¶é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚å°† class ä¸ constructor å’Œ prototype ç»“åˆä½¿ç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæ•´åœ°å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚\n\n### 4.1 ç±»çš„æ¦‚å¿µ\n\nåœ¨ JS ä¸­ï¼Œç±»æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯¹è±¡ï¼Œå®ƒé€šå¸¸ç”±å±æ€§å’Œæ–¹æ³•ç»„æˆã€‚ç±»å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§æ¨¡æ¿æˆ–è“å›¾ï¼Œå®ƒæè¿°äº†å¯¹è±¡åº”è¯¥å…·æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼ŒJS ä¼šæ ¹æ®è¯¥ç±»çš„å®šä¹‰æ¥ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå®ä¾‹è¿”å›ã€‚\n\n```javascript\nclass Person {\n  constructor(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  \n  sayHello() {\n    console.log('Hello, my name is ' + this.name);\n  }\n}\n\nlet tom = new Person('Tom', 28);\ntom.sayHello(); // Hello, my name is Tom\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ class å…³é”®å­—å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„ç±»ã€‚Person ç±»æœ‰ä¸€ä¸ª constructor æ–¹æ³•ï¼Œç”¨äºåœ¨åˆ›å»ºæ–°å¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚Person ç±»è¿˜æœ‰ä¸€ä¸ªåä¸º sayHello çš„æ–¹æ³•ï¼Œå¯ä»¥è¾“å‡ºä¸€ä¸ªé—®å€™è¯­ã€‚\n\nç„¶åæˆ‘ä»¬ä½¿ç”¨ new è¿ç®—ç¬¦æ¥åˆ›å»ºä¸€ä¸ª Person ç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° tom å˜é‡ä¸­ã€‚æ­¤æ—¶ï¼Œtom å°±æ˜¯ä¸€ä¸ª Person ç±»çš„å®ä¾‹ã€‚\n\n### 4.2 ç±»çš„åº”ç”¨\n\nç±»æœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯åˆ›å»ºå¯¹è±¡ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åˆ›å»ºå¤šä¸ªå…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª Car ç±»ï¼Œå¹¶ç”¨å®ƒæ¥åˆ›å»ºå¤šä¸ªæ±½è½¦å¯¹è±¡ï¼š\n\n```javascript\nclass Car {\n  constructor(brand, model, price) {\n    this.brand = brand;\n    this.model = model;\n    this.price = price;\n  }\n  \n  getFullName() {\n    return this.brand + ' ' + this.model;\n  }\n}\n\nlet car1 = new Car('Toyota', 'Camry', 25000);\nlet car2 = new Car('Honda', 'Accord', 28000);\nconsole.log(car1.getFullName()); // Toyota Camry\nconsole.log(car2.getFullName()); // Honda Accord\n```\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º Car çš„ç±»ï¼Œå®ƒæœ‰ä¸‰ä¸ªå±æ€§ brandã€model å’Œ priceï¼Œä»¥åŠä¸€ä¸ª getFullName æ–¹æ³•ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥ç±»æ¥åˆ›å»ºä¸¤ä¸ªä¸åŒçš„æ±½è½¦å¯¹è±¡ car1 å’Œ car2ï¼Œå¹¶è°ƒç”¨å®ƒä»¬çš„ getFullName æ–¹æ³•ã€‚\n","tags":["js"],"categories":["javaå…¨æ ˆ"]},{"title":"pythonå­¦ä¹ è®°å½•","url":"/2023/06/08/pythonå­¦ä¹ è®°å½•/","content":"\n# è®°å½•åœ¨pythonä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜\n\n## ç±»å‹è½¬æ¢\n\n**æ•°å­—è½¬æ¢å­—ç¬¦ä¸²**\n\nç›´æ¥ä½¿ç”¨str()å‡½æ•°è½¬åŒ–\n\n**å­—ç¬¦ä¸²è½¬æ•°å­—**\n\nä½¿ç”¨int()æ–¹æ³•\n\n> åœ¨pythonä¸­ç±»å‹è½¬æ¢åœ¨éœ€è¦è½¬æ¢çš„å€¼å‰é¢åŠ ä¸Šè½¬æ¢åçš„ç±»å‹å°±è¡Œ\n\n","tags":["python"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"python OSåŒ…","url":"/2023/06/08/python-OSåŒ…/","content":"\n## 1. ç®€ä»‹\n\n`os`å°±æ˜¯â€œoperating systemâ€çš„ç¼©å†™ï¼Œé¡¾åæ€ä¹‰ï¼Œ`os`æ¨¡å—æä¾›çš„å°±æ˜¯å„ç§ Python ç¨‹åºä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„æ¥å£ã€‚é€šè¿‡ä½¿ç”¨`os`æ¨¡å—ï¼Œä¸€æ–¹é¢å¯ä»¥æ–¹ä¾¿åœ°ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œå¦ä¸€æ–¹é¢é¡µå¯ä»¥æå¤§å¢å¼ºä»£ç çš„å¯ç§»æ¤æ€§ã€‚å¦‚æœè¯¥æ¨¡å—ä¸­ç›¸å…³åŠŸèƒ½å‡ºé”™ï¼Œä¼šæŠ›å‡º`OSError`å¼‚å¸¸æˆ–å…¶å­ç±»å¼‚å¸¸ã€‚\n\n> æ³¨æ„ï¼Œå¦‚æœæ˜¯è¯»å†™æ–‡ä»¶çš„è¯ï¼Œå»ºè®®ä½¿ç”¨å†…ç½®å‡½æ•°`open()`ï¼›å¦‚æœæ˜¯è·¯å¾„ç›¸å…³çš„æ“ä½œï¼Œå»ºè®®ä½¿ç”¨`os`çš„å­æ¨¡å—`os.path`ï¼›å¦‚æœè¦é€è¡Œè¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨`fileinput`æ¨¡å—ï¼›è¦åˆ›å»ºä¸´æ—¶æ–‡ä»¶æˆ–è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨`tempfile`æ¨¡å—ï¼›è¦è¿›è¡Œæ›´é«˜çº§çš„æ–‡ä»¶å’Œè·¯å¾„æ“ä½œåˆ™åº”å½“ä½¿ç”¨`shutil`æ¨¡å—ã€‚\n\nå½“ç„¶ï¼Œä½¿ç”¨`os`æ¨¡å—å¯ä»¥å†™å‡ºæ“ä½œç³»ç»Ÿæ— å…³çš„ä»£ç å¹¶ä¸æ„å‘³ç€`os`æ— æ³•è°ƒç”¨ä¸€äº›ç‰¹å®šç³»ç»Ÿçš„æ‰©å±•åŠŸèƒ½ï¼Œä½†è¦åˆ‡è®°ä¸€ç‚¹ï¼šä¸€æ—¦è¿™æ ·åšå°±ä¼šæå¤§**æŸå®³ä»£ç çš„å¯ç§»æ¤æ€§**ã€‚\n\næ­¤å¤–ï¼Œå¯¼å…¥`os`æ¨¡å—æ—¶è¿˜è¦å°å¿ƒä¸€ç‚¹ï¼Œåƒä¸‡**ä¸è¦**ä¸ºäº†å›¾è°ƒç”¨çœäº‹å„¿è€Œå°†`os`æ¨¡å—è§£åŒ…å¯¼å…¥ï¼Œå³ä¸è¦ä½¿ç”¨`from os import *`æ¥å¯¼å…¥`os`æ¨¡å—ï¼›å¦åˆ™`os.open()`å°†ä¼šè¦†ç›–å†…ç½®å‡½æ•°`open()`ï¼Œä»è€Œé€ æˆé¢„æ–™ä¹‹å¤–çš„é”™è¯¯ã€‚\n\n## 2. å¸¸è§æ–¹æ³•\n\n**`listdir`**:åˆ—å‡ºï¼ˆå½“å‰ï¼‰ç›®å½•ä¸‹çš„å…¨éƒ¨è·¯å¾„ï¼ˆåŠæ–‡ä»¶ï¼‰ã€‚è¯¥å‡½æ•°å­˜åœ¨ä¸€ä¸ªå‚æ•°ï¼Œç”¨ä»¥æŒ‡å®šè¦åˆ—å‡ºå­ç›®å½•çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º`â€œ.â€`ï¼Œå³â€œå½“å‰è·¯å¾„ã€‚ä¸‹ä¾‹ï¼Œæ‰¹é‡ä¿®æ”¹æ–‡ä»¶åç¼€ï¼š\n\n```python\nimport os\nfor filename in os.listdir(\"D:\\\\static\\\\image\\\\\"):\n    newName = filename.replace(\"jpeg\",\"jpg\")\n    os.rename(\"D:\\\\static\\\\image\\\\\"+filename,\"D:\\\\static\\\\image\\\\\"+newName)\n```\n\n\n\n**`open` `write`**:æ–‡ä»¶çš„è¯»å†™ã€‚\n\n```python\nfd = os.open(\"D:\\\\static\\\\image\\\\ceshi.txt\", os.O_CREAT | os.O_RDWR)\nos.write(fd, \"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶\".encode('utf-8'))\n```\n\n\n\n**`mkdir`**:å³â€œmake directoryâ€ï¼Œç”¨å¤„æ˜¯â€œæ–°å»ºä¸€ä¸ªè·¯å¾„â€ã€‚éœ€è¦ä¼ å…¥ä¸€ä¸ªç±»è·¯å¾„å‚æ•°ç”¨ä»¥æŒ‡å®šæ–°å»ºè·¯å¾„çš„ä½ç½®å’Œåç§°ï¼Œå¦‚æœæŒ‡å®šè·¯å¾„å·²å­˜åœ¨ï¼Œåˆ™ä¼šæŠ›å‡º`FileExistsError`å¼‚å¸¸ã€‚\n\nè¯¥å‡½æ•°åªèƒ½åœ¨å·²æœ‰çš„è·¯å¾„ä¸‹æ–°å»ºä¸€çº§è·¯å¾„ï¼Œå¦åˆ™ï¼ˆå³æ–°å»ºå¤šçº§è·¯å¾„ï¼‰ä¼šæŠ›å‡º`FileNotFoundError`å¼‚å¸¸ã€‚\n\nç›¸åº”åœ°ï¼Œåœ¨éœ€è¦æ–°å»ºå¤šçº§è·¯å¾„çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨`os.makedirs()`æ¥å®Œæˆä»»åŠ¡ã€‚å‡½æ•°`os.makedirs()`æ‰§è¡Œçš„æ˜¯é€’å½’åˆ›å»ºï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåˆ†åˆ«æ–°å»ºæŒ‡å®šè·¯å¾„ç»è¿‡çš„ä¸­é—´è·¯å¾„ï¼Œç›´åˆ°æœ€ååˆ›å»ºå‡ºæœ«ç«¯çš„â€œå¶å­è·¯å¾„â€ã€‚\n\n\n\n**`remove`**:ç”¨äºåˆ é™¤æ–‡ä»¶ï¼Œå¦‚æœæŒ‡å®šè·¯å¾„æ˜¯ç›®å½•è€Œéæ–‡ä»¶çš„è¯ï¼Œå°±ä¼šæŠ›å‡º`IsADirectoryError`å¼‚å¸¸ã€‚åˆ é™¤ç›®å½•åº”è¯¥ä½¿ç”¨`os.rmdir()`å‡½æ•°ã€‚\n\nåŒæ ·çš„ï¼Œå¯¹åº”äº`os.makedirs()`ï¼Œåˆ é™¤è·¯å¾„æ“ä½œ`os.rmdir()`ä¹Ÿæœ‰ä¸€ä¸ªé€’å½’åˆ é™¤çš„å‡½æ•°`os.removedirs()`ï¼Œè¯¥å‡½æ•°ä¼šå°è¯•ä»æœ€ä¸‹çº§ç›®å½•å¼€å§‹ï¼Œé€çº§åˆ é™¤æŒ‡å®šçš„è·¯å¾„ï¼Œå‡ ä¹å°±æ˜¯ä¸€ä¸ª`os.makedirs()`çš„é€†è¿‡ç¨‹ï¼›ä¸€æ—¦é‡åˆ°éç©ºç›®å½•å³åœæ­¢ã€‚\n\n\n\n**`rename`**:è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶æˆ–è·¯å¾„é‡å‘½åï¼Œä¸€èˆ¬è°ƒç”¨æ ¼å¼ä¸º`os.rename(src, dst)`ï¼Œå³å°†`src`æŒ‡å‘çš„æ–‡ä»¶æˆ–è·¯å¾„é‡å‘½åä¸º`dst`æŒ‡å®šçš„åç§°ã€‚\n\næ³¨æ„ï¼Œå¦‚æœæŒ‡å®šçš„ç›®æ ‡è·¯å¾„åœ¨å…¶ä»–ç›®å½•ä¸‹ï¼Œè¯¥å‡½æ•°è¿˜å¯å®ç°æ–‡ä»¶æˆ–è·¯å¾„çš„â€œå‰ªåˆ‡å¹¶ç²˜è´´â€åŠŸèƒ½ã€‚ä½†æ— è®ºç›´æ¥åŸåœ°é‡å‘½åè¿˜æ˜¯â€œå‰ªåˆ‡ç²˜è´´â€ï¼Œä¸­é—´è·¯å¾„éƒ½å¿…é¡»è¦å­˜åœ¨ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡º`FileNotFoundError`å¼‚å¸¸ã€‚å¦‚æœç›®æ ‡è·¯å¾„å·²å­˜åœ¨ï¼ŒWindows ä¸‹ä¼šæŠ›å‡º`FileExistsError`å¼‚å¸¸ï¼›Linux ä¸‹ï¼Œå¦‚æœç›®æ ‡è·¯å¾„ä¸ºç©ºä¸”ç”¨æˆ·æƒé™å…è®¸ï¼Œåˆ™ä¼šé™é»˜è¦†ç›–åŸè·¯å¾„ï¼Œå¦åˆ™æŠ›å‡º`OSError`å¼‚å¸¸ï¼Œ\n\nå’Œä¸Šä¸¤ä¸ªå‡½æ•°ä¸€æ ·ï¼Œè¯¥å‡½æ•°ä¹Ÿæœ‰å¯¹åº”çš„é€’å½’ç‰ˆæœ¬`os.renames()`ï¼Œèƒ½å¤Ÿåˆ›å»ºç¼ºå¤±çš„ä¸­é—´è·¯å¾„ã€‚\n\næ³¨æ„ï¼Œè¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå‡½æ•°æ‰§è¡ŒæˆåŠŸï¼Œéƒ½ä¼šè°ƒç”¨`os.removedir()`å‡½æ•°æ¥é€’å½’åˆ é™¤æºè·¯å¾„çš„æœ€ä¸‹çº§ç›®å½•ã€‚\n","tags":["python"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"javascriptæŠ€æœ¯","url":"/2023/04/16/javascriptæŠ€æœ¯/","content":"\n## jsä¸­æ•°ç»„çš„mapæ–¹æ³•\n\n### ä½¿ç”¨mapæ ¼å¼åŒ–å¯¹è±¡\n\nä¾‹å¦‚ï¼š\n\n```\nconst kvArray = [\n  { key: 1, value: 10 },\n  { key: 2, value: 20 },\n  { key: 3, value: 30 },\n];\n\nconst reformattedArray = kvArray.map(({ key, value}) => ({ [key]: value }));\n\n// reformattedArray ç°åœ¨æ˜¯ [{1: 10}, {2: 20}, {3: 30}],\n\n// kvArray ä¾ç„¶æ˜¯ï¼š\n// [{key: 1, value: 10},\n//  {key: 2, value: 20},\n//  {key: 3, value: 30}]\n```\n\n## jsä¸­çš„ç®­å¤´å‡½æ•°\n\n```\n()=>{}  //å®Œæ•´çš„è¯­æ³•å½¢å¼\n//ä¾‹å¦‚\n()=>{\n    return \"æˆ‘å¾ˆå¸…å“¦\"\n}\n()=>()  //ä¸€è¡Œçš„å†™æ³•\n//ä¾‹å¦‚\n()=>('æˆ‘ä¹Ÿå¾ˆå¸…');\n()=>({message:'æˆ‘ä¹Ÿå¾ˆå¸…'})\n\n//å¦‚æœåªæœ‰ä¸€å¥ï¼Œå¯ä»¥çœç•¥æ‹¬å·,å¦‚æœè¿”å›ä¸€ä¸ªï½›ï½å½¢å¼çš„å¯¹è±¡ï¼Œå¿…é¡»è¦åŠ ä¸Šï¼ˆï¼‰\n()=>'æˆ‘ä¹Ÿå¾ˆå¸…'\n```\n","tags":["js"],"categories":["javaå…¨æ ˆ"]},{"title":"Lodashçš„ä½¿ç”¨","url":"/2023/04/14/lodashçš„ä½¿ç”¨/","content":"\n## debounce é˜²æŠ–\n\n```\n//å¯¹ç‚¹èµæ“ä½œè¿›è¡Œé˜²æŠ–\nconst handleThumb = debounce(()=>{\n  if (thumb.value) {\n    addLikes({userId: webInfoStore.getUser.id, postId: post.id}).then(res => {\n      if (res.code === 200) message.success('ç‚¹èµæˆåŠŸ')\n      else message.error('ç‚¹èµå¤±è´¥')\n    })\n  } else {\n    deleteLikes({userId: webInfoStore.getUser.id, postId: post.id}).then(res => {\n      if (res.code === 200) message.warning('å–æ¶ˆç‚¹èµ')\n      else message.error('å–æ¶ˆå¤±è´¥')\n    })\n  }\n}, 500)\n```\n","tags":["å‰ç«¯"],"categories":["javaå…¨æ ˆ"]},{"title":"SpringBootåº”ç”¨å¼€å‘é—®é¢˜","url":"/2023/04/12/springbootåº”ç”¨å¼€å‘é—®é¢˜/","content":"\n## é™æ€èµ„æºè®¿é—®é…ç½®\n\nä¸¤ç§æ–¹å¼ï¼š\n\n1ã€åˆ©ç”¨configé…ç½®æ–‡ä»¶é…ç½®\n\n```\n@Configuration\n@Slf4j\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(\"/static/**\")  //åŒ¹é…è¯·æ±‚è·¯å¾„\n                .addResourceLocations(\"file:D:\\\\static\\\\\");  //å®é™…æœ¬åœ°èµ„æºè·¯å¾„\n    }\n}\n```\n\n2ã€åˆ©ç”¨applicationé…ç½®æ–‡ä»¶\n\n```\nspring.mvc.static-path-pattern= /**  #åŒ¹é…è¯·æ±‚è·¯å¾„\n\nspring.resources.static-locations= file:D:\\\\static\\\\  # å®é™…æœ¬åœ°èµ„æºè·¯å¾„\nspring.resources.static-locations= classpath:/static/** # å®é™…æœ¬é¡¹ç›®è·¯å¾„\n```\n\næ³¨æ„é¡¹ç›®ä¸­çš„å„ç§æ‹¦æˆªå™¨å¯¹é™æ€èµ„æºçš„æ”¾è¡Œï¼ˆä¾‹å¦‚SpringSecurityï¼‰\n","tags":["springboot"],"categories":["javaå…¨æ ˆ"]},{"title":"ç»Ÿä¸€ç½‘å…³Gateway","url":"/2023/04/11/ç»Ÿä¸€ç½‘å…³gateway/","content":"\n## 1ã€ç½‘å…³ä½œç”¨\n\n1-èº«ä»½è®¤è¯å’Œæƒé™æ ¡éªŒ\n\n2-æœåŠ¡è·¯ç”±ã€è´Ÿè½½å‡è¡¡\n\n3-è¯·æ±‚é™æµ\n\n## 2ã€å®ç°\n\nSpringCloudå®ç°ç½‘å…³åŒ…æ‹¬ä¸¤ç§\n\n- gateway\n\n- zuul\n\nzuulåŸºäºservletå®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚gatewayæ˜¯åˆ©ç”¨spring5ä¸­çš„webfluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹å®ç°ï¼Œå…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚\n\n## 3ã€ä½¿ç”¨\n\n### ä¸€ã€å¼•å…¥ä¾èµ–\n\nè¿™é‡Œéœ€è¦å¼•å…¥ä¸¤ä¸ªä¾èµ–ï¼Œä¸€ä¸ªæ˜¯gatewayçš„staterï¼Œå¦ä¸€ä¸ªæ˜¯nacosçš„æœåŠ¡å‘ç°stater\n\n```xml\n<!--ç½‘å…³ä¾èµ–-->\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-starter-gateway</artifactId>\n</dependency>\n<!--nac0SæœåŠ¡å‘ç°ä¾èµ–-->\n<dependency>\n  <groupId>com.alibaba.cloud</groupId>\n  <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n### äºŒã€é…ç½®æ–‡ä»¶\n\n```yml\nserver:\n  port:10010 #ç½‘å…³ç«¯å£\nspring:\n  application:\n    name: gateway #æœåŠ¡åç§°\n  cloud:\n    nacos:\n      server-addr: Localhost:8848 #nacosåœ°å€\n    gateway\n      routes: #ç½‘å…³è·¯ç”±é…ç½®\n        - id: User-service  #è·¯ç”±id,è‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯\n          #Uri:http://127.0.0.1:8081 #è·¯ç”±çš„ç›®æ ‡åœ°å€httpå°±æ˜¯å›ºå®šåœ°å€\n          uri: lb://userservice #è·¯ç”±çš„ç›®æ ‡åœ°å€lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢é™æœåŠ¡åç§°\n          predicates: #è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­æƒ…æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶\n            - Path= /user/**  #è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚\n```\n\n**ç½‘å…³è·¯ç”±å¯ä»¥é…ç½®çš„å†…å®¹åŒ…æ‹¬ï¼š**  \nè·¯ç”±id: è·¯ç”±å”¯ä¸€æ ‡ç¤º  \nuri: è·¯ç”±ç›®çš„åœ°ï¼Œæ”¯ç‰¹bå’Œhttpä¸¤ç§  \npredicates: è·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œç¬¦åˆåˆ™è½¬å‘åˆ°è·¯ç”±ç›®çš„åœ°  \nfilters: è·¯ç”±è¿‡æ»¤å™¨ï¼Œå¤„ç†è¯·æ±‚æˆ–å“åº”\n\n**predicateå·¥å‚**\n\n1. `AfterRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚æ—¶é—´æ˜¯å¦åœ¨æŒ‡å®šæ—¶é—´ä¹‹åã€‚\n\n3. `BeforeRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚æ—¶é—´æ˜¯å¦åœ¨æŒ‡å®šæ—¶é—´ä¹‹å‰ã€‚\n\n5. `BetweenRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚æ—¶é—´æ˜¯å¦åœ¨æŒ‡å®šæ—¶é—´æ®µå†…ã€‚\n\n7. `CookieRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦åŒ…å«æŒ‡å®š Cookieã€‚\n\n9. `HeaderRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚å¤´ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ã€‚\n\n11. `HostRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚çš„ Host æ˜¯å¦åŒ¹é…æŒ‡å®šçš„å€¼ã€‚\n\n13. `MethodRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚çš„æ–¹æ³•æ˜¯å¦åŒ¹é…æŒ‡å®šçš„å€¼ã€‚\n\n15. `PathRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚è·¯å¾„æ˜¯å¦åŒ¹é…æŒ‡å®šçš„å€¼ã€‚\n\n17. `QueryRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦åŒ¹é…æŒ‡å®šçš„å€¼ã€‚\n\n19. `ReadBodyRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚ä½“ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ã€‚\n\n21. `RemoteAddrRoutePredicateFactory`ï¼šç”¨äºæ£€æŸ¥è¯·æ±‚çš„è¿œç¨‹åœ°å€æ˜¯å¦åŒ¹é…æŒ‡å®šçš„å€¼ã€‚\n","tags":["gateway"],"categories":["javaå…¨æ ˆ"]},{"title":"Feignå­¦ä¹ è®°å½•","url":"/2023/04/06/feignå­¦ä¹ è®°å½•/","content":"\n**Feignçš„ä¸»è¦ä½œç”¨ï¼šç®€åŒ–HTTPè¯·æ±‚-Feignå¯ä»¥è‡ªåŠ¨ç”ŸæˆHTTPè¯·æ±‚ä»£ç ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ã€‚**\n\n**ç”¨åœ¨æœåŠ¡é—´çš„è°ƒç”¨ï¼Œæ›¿æ¢RestTemplateçš„ä½¿ç”¨**\n\n**Feigné‡Œé¢é›†æˆäº†Ribbonè´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨å®ç°è´Ÿè½½å‡è¡¡**\n\n## 1ã€å¼•å…¥ä¾èµ–\n\n**è¿™é‡Œé»˜è®¤å¼•å…¥äº†springbootçˆ¶ä¾èµ–**\n\n```\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\n## 2ã€åœ¨å¯åŠ¨ç±»æ·»åŠ æ³¨è§£å¼€å¯Feign\n\n```\n//å¼€å¯Feign\n@EnableFeignclients\n@Mapperscan(\"cn.itcast.order.mapper\")\n@SpringBootApplication\npublic class OrderApplication{\n    public static void main(String[]args){\n        SpringApplication.run(OrderApplication.class,args);\n}\n```\n\n## 3ã€ç¼–å†™Feignå®¢æˆ·ç«¯\n\n```\n@Feignclient(\"userservice\")\npublic interface Userclient{\n    @GetMapping(\"/user/id]\")\n    User findById(@PathVariable(\"id\")Long id);\n}\n```\n\n## 4ã€Feignå¸¸ç”¨é…ç½®\n\n```\nfeign:\n  client:\n    config:\n      default:\n        connectTimeout: 5000 # è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’\n        readTimeout: 5000 # è¯»å–è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’\n        loggerLevel: basic # æ—¥å¿—çº§åˆ«ï¼Œbasicä¸ºè®°å½•è¯·æ±‚æ–¹æ³•ã€URLã€å“åº”çŠ¶æ€ç ï¼Œfullä¸ºè®°å½•è¯·æ±‚å’Œå“åº”çš„æ‰€æœ‰ä¿¡æ¯\n        retryer: # é‡è¯•æœºåˆ¶\n          retryMaxAttempts: 3 # æœ€å¤§é‡è¯•æ¬¡æ•°\n          retryInterval: 1000 # é‡è¯•é—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’\n        decoder: # å“åº”è§£ç å™¨\n          default: # é»˜è®¤è§£ç å™¨\n            feign:\n              autoconfiguration:\n                enabled: true # æ˜¯å¦å¯ç”¨è‡ªåŠ¨é…ç½®\n              client:\n                httpclient:\n                  enabled: true # æ˜¯å¦å¯ç”¨HttpClient\n                okhttp:\n                  enabled: false # æ˜¯å¦å¯ç”¨OkHttp\n        encoder: # è¯·æ±‚ç¼–ç å™¨\n          default: # é»˜è®¤ç¼–ç å™¨\n            feign:\n              autoconfiguration:\n                enabled: true # æ˜¯å¦å¯ç”¨è‡ªåŠ¨é…ç½®\n              client:\n                httpclient:\n                  enabled: true # æ˜¯å¦å¯ç”¨HttpClient\n                okhttp:\n                  enabled: false # æ˜¯å¦å¯ç”¨OkHttp\n```\n\n## 5ã€Feignæ€§èƒ½ä¼˜åŒ–\n\n1. Feignåº•å±‚å®¢æˆ·ç«¯å®ç°ä¸¤ç§æ¨è\n\n- Apache HttpClient\n\n- OKHttp\n\n2\\. æ—¥å¿—çº§åˆ«æœ€å¥½æ˜¯ç”¨basicæˆ–none\n\n### å…·ä½“ä½¿ç”¨\n\næ·»åŠ HTTPClientä¾èµ–\n\n```\n<!--httpClientçš„ä¾èµ–-->\n<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-httpclient</artifactId>\n</dependency>\n```\n","tags":["feign"],"categories":["javaå…¨æ ˆ"]},{"title":"SpringSecurity6.0ä½¿ç”¨","url":"/2023/04/02/springsecurity6-0ä½¿ç”¨/","content":"\n## å‰åç«¯åˆ†ç¦»çš„åŸºæœ¬ä½¿ç”¨\n\n### UserDetailsServiceImplç±»\n\n```\n@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    //è¿™æ˜¯è‡ªå®šä¹‰ç”¨æˆ·å®‰å…¨ç±»çš„Mapper,ä¸»è¦åŒ…å«ç™»é™†éœ€è¦çš„ä¿¡æ¯,æ¯”å¦‚ç”¨æˆ·å,å¯†ç ,é‚®ç®±ç­‰\n    @Autowired\n    private UserSecurityMapper userSecurityMapper;\n\n    private QueryWrapper<UserSecurity> queryWrapper;\n\n\n    //æ ¹æ®ç”¨æˆ·é‚®ç®±æŸ¥æ‰¾ç”¨æˆ·,ç„¶åè¿”å›UserDetails\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        queryWrapper = new QueryWrapper<>();\n        queryWrapper.eq(\"email\",username);\n        UserSecurity userSecurity = userSecurityMapper.selectOne(queryWrapper);\n        if (userSecurity == null) {\n            throw new UsernameNotFoundException(\"username \" + username + \" is not found\");\n        }\n        return new MyUserDetails(userSecurity.getNickname(),userSecurity.getPassword(),userSecurity.getEmail());\n    }\n}\n```\n\n### UserSecurityå®ä½“ç±»\n\n```\n\n@Getter\n@Setter\n@TableName(\"user_security\")\n@ApiModel(value = \"UserSecurityå¯¹è±¡\", description = \"ç”¨æˆ·å¯†ç è¡¨\")\npublic class UserSecurity implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @TableId(value = \"id\", type = IdType.AUTO)\n    private Integer id;\n\n    @ApiModelProperty(\"ç”¨æˆ·ID\")\n    @TableField(\"user_id\")\n    private Integer userId;\n\n    @ApiModelProperty(\"æ˜µç§°\")\n    @TableField(\"nickname\")\n    private String nickname;\n\n    @ApiModelProperty(\"å¯†ç \")\n    @TableField(\"password\")\n    private String password;\n\n    @ApiModelProperty(\"ç”¨æˆ·é‚®ç®±\")\n    @TableField(\"email\")\n    private String email;\n}\n```\n\n### SecurityConfigé…ç½®ç±»\n\n```\n@Configuration\n@EnableWebSecurity\n@Slf4j\npublic class SecurityConfig {\n\n    //è‡ªåŠ¨æ³¨å…¥UserDetailsServiceç±»,å°±æ˜¯ä¸Šé¢å®šä¹‰çš„UserDetailsServiceImpl\n    @Resource\n    UserDetailsService userDetailsService;\n\n    //æ‹¦æˆªå™¨,è´Ÿè´£æ ¡éªŒtoken\n    @Autowired\n    JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;\n\n    //ä¸»è¦é…ç½®\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .cors().and().csrf().disable()  //å…³é—­csrf\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeHttpRequests(authorize -> authorize\n                        .requestMatchers(new AntPathRequestMatcher(\"/lostandfound/**\")).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(\"/**\")).permitAll() //æ”¾è¡Œæ‰€æœ‰è·¯å¾„\n                ).formLogin((formLoginConfigurer)->{\n                    formLoginConfigurer.disable();  //ç¦æ­¢è¡¨å•ç™»é™†\n                }).addFilterAt(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);   //æ”¾å…¥æ‹¦æˆªå™¨tokenæ ¡éªŒæ‹¦æˆªå™¨å’ŒUsernamePassword\næ‹¦æˆªå™¨åŒä½ç½®\n\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n\n    // é…ç½®è®¤è¯ç®¡ç†å™¨\n    @Bean\n    public AuthenticationManager authenticationManager() {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\n        return new ProviderManager(daoAuthenticationProvider);\n    }\n\n}\n```\n\n### UserDetailså®ç°ç±»\n\n```\n@Data\npublic class MyUserDetails extends User implements UserDetails {\n    private String password;\n    private final String username;\n    private final String email; // æ‰©å±•å­—æ®µï¼Œæ‰‹æœºå·æ”¾å…¥ç”¨æˆ·ä¿¡æ¯ä¸­\n\n\n    public MyUserDetails(String username, String password, String email) {\n        this.password = password;\n        this.email = email;\n        this.username = username;\n\n    }\n\n    @Override\n    public Collection<? extends GrantedAuthority> getAuthorities() {\n        return null;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n```\n","tags":["SpringSecurity"],"categories":["javaå…¨æ ˆ"]},{"title":"CSSä¸å¸¸è§å±æ€§","url":"/2023/03/28/cssä¸å¸¸è§å±æ€§/","content":"\n`user-select` ç¦æ­¢è¢«é€‰ä¸­ï¼ˆæ¯”å¦‚æ–‡å­—ä¸èƒ½é€‰ä¸­å¤åˆ¶ï¼‰\n\nåœ¨æ ‡ç­¾ä¸ŠåŠ  tabindex=-1è¡¨ç¤ºè®©éè¡¨å•å…ƒç´ è·å¾—èšç„¦å±æ€§\n\nä¾‹å¦‚ :\n\n<li tabindex=\"-1\" class=\"nav-item\">å…¨éƒ¨å­¦ç§‘</li>\n","tags":["css"],"categories":["javaå…¨æ ˆ"]},{"title":"Vueä¸­ç»„åˆå¼pinia","url":"/2023/03/28/vueä¸­ç»„åˆå¼pinia/","content":"\n## 1ã€å®‰è£…pinia\n\n```\nnpm i -d install pinia   //å®‰è£…åœ¨dev\n```\n\n## 2ã€åœ¨é¡¹ç›®ä¸­å¼•å…¥\n\n```\nimport {createApp} from \"vue\"\n//å¼•å…¥\nimport {createPinia} from \"pinia\";\nimport App from './App.vue'\n\nconst pinia = createPinia()\nconst app = createApp(App)\n//ä½¿ç”¨\napp.use(pinia)\n```\n\n## 3ã€åˆ›å»ºstore\n\n```\nimport {defineStore} from \"pinia\";\nimport {computed, ref} from \"vue\";\n\nexport const useWebStore = defineStore('web', () => {\n    const page = ref(0)\n\n    const getPage=computed(()=>{\n        return page.value\n    })\n\n    function changePage(p: number) {\n        page.value = p;\n    }\n\n    return {page, changePage,getPage}\n})\n```\n\n_è¿™é‡Œä½¿ç”¨çš„æ˜¯ç»„åˆå¼çš„pinia_\n\n## 4ã€åœ¨å…¶ä»–ç»„ä»¶ä¸­å¼•å…¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†\n\n```\nimport {useWebStore} from \"@/store/WebStore\";\n```\n","tags":["vue"],"categories":["javaå…¨æ ˆ"]},{"title":"Mybatis-plusè®°å½•","url":"/2023/03/27/mybatis-plusè®°å½•/","content":"\n## 1ã€æŸ¥è¯¢æ–¹æ³•\n\n### æ’åºæŸ¥è¯¢\n\n```\npublic R getRankingUser(){\n        queryWrapper = new QueryWrapper<>();\n\n        //å¯¹æŸä¸ªå­—æ®µæ’åºæŸ¥è¯¢\n        queryWrapper.orderByDesc(\"find_num\");\n\n        //é™åˆ¶è¾“å‡ºæ¡æ•°\n        queryWrapper.last(\"limit 10\");\n        List<User> users = userService.list(queryWrapper);\n        return R.ok().data(\"list\",users);\n    }\n```\n","tags":["mybatis-plus"],"categories":["javaå…¨æ ˆ"]},{"title":"Vueå­¦ä¹ ","url":"/2023/03/27/ä½¿ç”¨vueæ—¶é‡åˆ°çš„é—®é¢˜/","content":"\n## 1ã€åœ¨å‘åç«¯è·å–æ•°æ®æ—¶ï¼Œå‘å­ç»„ä»¶ä¼ å‚\n\n```\nasync function init(){\n  //è·å–åç«¯æ•°æ®ï¼Œå°†æ•°æ®èµ‹å€¼ï¼Œå¹¶ä¸”é‡æ–°åŠ è½½é¡µé¢\n  await getAllPosts().then(res=>{\n    ports.value=res.data.list\n  })\n\n  await getLikeKey(\"complete\").then(res=>{\n    count.value = res.data.list\n  })\n  load=true\n  currentInstance?.proxy?.$forceUpdate()\n\n}\n```\n\n**_åœ¨è¿™é‡Œï¼Œportså’Œcountéƒ½æ˜¯refï¼Œä½†æ˜¯å¦‚æœæ”¹ä¸ºæ™®é€šå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‚æ•°çš„å€¼ä¸èƒ½åœ¨é¡µé¢è·³è½¬ä¹‹å‰ä¼ åˆ°å­ç»„ä»¶_**\n\n## 2ã€Vueé¡µé¢åˆ·æ–°å¯¼è‡´Storeå†…æ•°æ®ä¸¢å¤±\n\n\\-**å¯ä»¥é€‰æ‹©å­˜åœ¨locaStorageé‡Œé¢ã€‚**\n\n\\-**å¯ä»¥ä½¿ç”¨Cookieå­˜å‚¨**\n\næˆ‘ä½¿ç”¨Cookieå­˜å‚¨ä¿¡æ¯\n\n```\n//Cookieçš„ä½¿ç”¨\nCookie.set([key],[value])\nCookei.get([key])\n```\n\n## ä½¿ç”¨vue3ä¸­çš„refè·å–domå…ƒç´ ,ä½¿ç”¨æ—¶ä¸ºç©º\n\nå®é™…ä¸Šåœ¨setupçš„æ—¶å€™ï¼Œdomå…ƒç´ è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œä¸€åˆ‡éƒ½å¤„äºæ··æ²ŒçŠ¶æ€ï¼Œåªæœ‰setupå®Œæ¯•äº†HTMLæ‰èƒ½å®Œæ•´æ„å»ºï¼Œæ‰èƒ½çœŸæ­£è®¿é—®åˆ°valueå€¼ï¼Œæ‰€ä»¥è‡ªç„¶æ— æ³•è·å–åˆ°domèŠ‚ç‚¹ï¼Œè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦é…åˆé’©å­å‡½æ•°\n\nä¾‹å¦‚:\n\n```\nconst defaultItem = ref()\n\n//åœ¨onMountedä¸­ä½¿ç”¨,æ­¤æ—¶çš„domå·²ç»åˆ›å»º\nonMounted(()=>{\n  console.log(defaultItem.value)\n})\n```\n\n## vueä¸­hå‡½æ•°çš„ä½¿ç”¨\n\nh() å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º VNode çš„å®ç”¨ç¨‹åºã€‚ä¹Ÿè®¸å¯ä»¥æ›´å‡†ç¡®åœ°å°†å…¶å‘½åä¸º createVNode()ï¼Œä½†ç”±äºé¢‘ç¹ä½¿ç”¨å’Œç®€æ´ï¼Œå®ƒè¢«ç§°ä¸º h() ã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šä¸‰ä¸ªå‚æ•°ç®€å•æ€»ç»“å°±æ˜¯ï¼Œæ ‡ç­¾ï¼Œæ ‡ç­¾å±æ€§ï¼Œæ ‡ç­¾å†…åŒ…å«çš„ï¼ˆå­æ ‡ç­¾å’Œæ–‡å­—ï¼‰\n\n```\n// @returns {VNode}\nh(\n    // {String | Object | Function} tag\n    // ä¸€ä¸ª HTML æ ‡ç­¾åã€ä¸€ä¸ªç»„ä»¶ã€ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶ã€æˆ–\n    // ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ã€‚\n    //\n    // å¿…éœ€çš„ã€‚\n    'div',\n\n    // {Object} props\n    // ä¸ attributeã€prop å’Œäº‹ä»¶ç›¸å¯¹åº”çš„å¯¹è±¡ã€‚\n    // è¿™ä¼šåœ¨æ¨¡æ¿ä¸­ç”¨åˆ°ã€‚\n    //\n    // å¯é€‰çš„(åœ¨å¼€å‘æ—¶ã€‚å»ºè®®ä¼ ï¼Œå®åœ¨æ²¡æœ‰ä¼ çš„æ—¶å€™ï¼Œä¼ å…¥ null)\n    {},\n\n    // {String | Array | Object} children\n    // å­ VNodes, ä½¿ç”¨ `h()` æ„å»º,\n    // æˆ–ä½¿ç”¨å­—ç¬¦ä¸²è·å– \"æ–‡æœ¬ VNode\" æˆ–è€…\n    // æœ‰æ’æ§½çš„å¯¹è±¡ã€‚\n    //\n    // å¯é€‰çš„ã€‚\n    [\n        'Some text comes first.',\n        h('h1', 'A headline'),\n        h(MyComponent, {\n            someProp: 'foobar'\n        })\n    ]\n)\n```\n\n## ä½¿ç”¨vueå®ç°ä¸€ä¸ªç®€æ˜“çš„å¯¼èˆªæ \n\n```\n<div class=\"nav\">\n\n      <ul ref=\"allItem\">\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[0]}\" @click=\"changeNav(0)\">å…¨éƒ¨å­¦ç§‘</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[1]}\" @click=\"changeNav(1)\">é«˜ç­‰æ•°å­¦</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[2]}\" @click=\"changeNav(2)\">å¤§å­¦è‹±è¯­</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[3]}\" @click=\"changeNav(3)\">æ•™èµ„</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[4]}\" @click=\"changeNav(4)\">å››å…­çº§</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[5]}\" @click=\"changeNav(5)\">Cè¯­è¨€</li>\n        <li class=\"nav-item\" :class=\"{onFocus:isActive[6]}\" @click=\"changeNav(6)\">å…¶ä»–</li>\n      </ul>\n    </div>\n\n\nconst isActive = ref([\n  true,\n  false,\n  false,\n  false,\n  false,\n  false,\n  false,\n])\n\nfunction changeNav(nav: number) {\n  isActive.value = [false, false, false, false, false, false,false]\n  for (let i = 0; i < unref(isActive).length; i++) {\n    if (i === nav) {\n      unref(isActive).splice(i,1,true)\n    }\n  }\n}\n```\n\n## vueä¸­é˜»æ­¢å†’æ³¡äº‹ä»¶ï¼ˆ@clickçš„å„ç§å±æ€§ï¼‰\n\n1ã€@click.stop é˜»æ­¢äº‹ä»¶å†’æ³¡\n\n2ã€@click.prevent é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º ï¼ˆæäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ï¼‰\n\n3ã€@click.capture ä¼˜å…ˆè§¦å‘\n\n4ã€@click.self åªæœ‰è‡ªå·±èƒ½è§¦å‘ï¼Œå­å…ƒç´ æ— æ³•è§¦å‘[](/#)\n\n5ã€@click.once åªèƒ½æäº¤ä¸€æ¬¡ï¼ˆ.once ä¿®é¥°ç¬¦è¿˜èƒ½è¢«ç”¨åˆ°è‡ªå®šä¹‰çš„ç»„ä»¶äº‹ä»¶ä¸Šã€‚ï¼‰\n\n6ã€@click.native  \n7ã€@click.passive\n\n8ã€@keyup.enter //æŒ‰é”®ä¿®é¥°ç¬¦ï¼ˆæŒ‰é”®ç çš„åˆ«åï¼š.enter ï¼Œ.tab ï¼Œ.delete ï¼Œ.esc ï¼Œ.space ï¼Œ.up ï¼Œ.down ï¼Œ.left ï¼Œ.right ï¼‰  \n9ã€ç³»ç»Ÿä¿®é¥°é”®ï¼ˆ.ctrl , .alt , .shift ,.meta ï¼‰\n\n10ã€.exactä¿®é¥°ç¬¦\n","tags":["vue"],"categories":["javaå…¨æ ˆ"]},{"title":"redis","url":"/2023/03/24/rediså¸¸ç”¨å‘½ä»¤/","content":"\n## dockerå®‰è£…redis\n\n```bash\ndocker run --restart=always --log-opt max-size=100m --log-opt max-file=2 -p 6379:6379 --name laf-redis -v /usr/lib/redis/myredis.conf:/etc/redis/redis.conf -v /usr/lib/redis/data:/data -d redis redis-server /etc/redis/redis.conf  --appendonly yes  --requirepass 123456\n```\n\n## è¿æ¥\n\nRedis å®¢æˆ·ç«¯çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š\n\n```bash\n$ redis-cli\n```\n\nå¦‚æœéœ€è¦åœ¨è¿œç¨‹ redis æœåŠ¡ä¸Šæ‰§è¡Œå‘½ä»¤ï¼ŒåŒæ ·æˆ‘ä»¬ä½¿ç”¨çš„ä¹Ÿæ˜¯Â **redis-cli**Â å‘½ä»¤ã€‚\n\n```bash\n$ redis-cli -h host -p port -a password\n```\n\n## ç±»å‹\n\n| ç±»å‹ | ç®€ä»‹ | ç‰¹æ€§ | åœºæ™¯ |\n| --- | --- | --- | --- |\n| String(å­—ç¬¦ä¸²) | äºŒè¿›åˆ¶å®‰å…¨ | å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®,æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡,ä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨512M | \\--- |\n| Hash(å­—å…¸) | é”®å€¼å¯¹é›†åˆ,å³ç¼–ç¨‹è¯­è¨€ä¸­çš„Mapç±»å‹ | é€‚åˆå­˜å‚¨å¯¹è±¡,å¹¶ä¸”å¯ä»¥åƒæ•°æ®åº“ä¸­updateä¸€ä¸ªå±æ€§ä¸€æ ·åªä¿®æ”¹æŸä¸€é¡¹å±æ€§å€¼(Memcachedä¸­éœ€è¦å–å‡ºæ•´ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–æˆå¯¹è±¡ä¿®æ”¹å®Œå†åºåˆ—åŒ–å­˜å›å») | å­˜å‚¨ã€è¯»å–ã€ä¿®æ”¹ç”¨æˆ·å±æ€§ |\n| List(åˆ—è¡¨) | é“¾è¡¨(åŒå‘é“¾è¡¨) | å¢åˆ å¿«,æä¾›äº†æ“ä½œæŸä¸€æ®µå…ƒç´ çš„API | 1,æœ€æ–°æ¶ˆæ¯æ’è¡Œç­‰åŠŸèƒ½(æ¯”å¦‚æœ‹å‹åœˆçš„æ—¶é—´çº¿) 2,æ¶ˆæ¯é˜Ÿåˆ— |\n| Set(é›†åˆ) | å“ˆå¸Œè¡¨å®ç°,å…ƒç´ ä¸é‡å¤ | 1ã€æ·»åŠ ã€åˆ é™¤,æŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1) 2ã€ä¸ºé›†åˆæä¾›äº†æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œ | 1ã€å…±åŒå¥½å‹ 2ã€åˆ©ç”¨å”¯ä¸€æ€§,ç»Ÿè®¡è®¿é—®ç½‘ç«™çš„æ‰€æœ‰ç‹¬ç«‹ip 3ã€å¥½å‹æ¨èæ—¶,æ ¹æ®tagæ±‚äº¤é›†,å¤§äºæŸä¸ªé˜ˆå€¼å°±å¯ä»¥æ¨è |\n| Sorted Set(æœ‰åºé›†åˆ) | å°†Setä¸­çš„å…ƒç´ å¢åŠ ä¸€ä¸ªæƒé‡å‚æ•°score,å…ƒç´ æŒ‰scoreæœ‰åºæ’åˆ— | æ•°æ®æ’å…¥é›†åˆæ—¶,å·²ç»è¿›è¡Œå¤©ç„¶æ’åº | 1ã€æ’è¡Œæ¦œ 2ã€å¸¦æƒé‡çš„æ¶ˆæ¯é˜Ÿåˆ— |\n\n## å‘½ä»¤\n\n### æ•°æ®åº“æ“ä½œ\n\n```shell\nflushdb # æ¸…é™¤å½“å‰æ•°æ®åº“\n```\n\n### é”®æ“ä½œï¼ˆå¸¸ç”¨keyså‘½ä»¤ï¼‰\n\n```shell\nSET [key] [value] # è®¾ç½®é”®å€¼å¯¹\n\nDEL [key]  # åˆ é™¤æŸä¸ªkeyå’Œä»–çš„å€¼\n\nEXISTS [key] # æ£€æŸ¥æŸä¸ªkeyæ˜¯å¦å­˜åœ¨\n\nPTTL/TTL [key] # è¿”å›æŸä¸ªkeyçš„å‰©ä½™æ—¶é—´(æ¯«ç§’/ç§’)\n\nRENAME [key] [newkey] # ä¿®æ”¹æŸä¸ªkeyçš„åå­—\n\nTYPE [key] # è¿”å›keyæ‰€å­˜å‚¨çš„ç±»å‹\n```\n","tags":["redis"],"categories":["javaå…¨æ ˆ"]},{"title":"å‰ç«¯å¼€å‘å¸¸ç”¨å·¥å…·","url":"/2023/03/24/å‰ç«¯å¼€å‘å¸¸ç”¨å·¥å…·/","content":"\n## 1ã€free-swagger\n\nä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆä»£ç çš„å‰ç«¯å·¥å…·\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230324103117.png)\n\n> åœ¨googleæµè§ˆå™¨ä¸­æœç´¢free-swaggeræ’ä»¶ï¼Œå®‰è£…ä½¿ç”¨\n> \n> è¿™ä¸ªæ’ä»¶èƒ½ç›´æ¥å°†åç«¯çš„swaggeræ¥å£ç”Ÿæˆinterfaceå’Œapiä»£ç ï¼Œç”Ÿæˆä»£ç åŠŸèƒ½åœ¨ä¸‹æ–¹ã€‚\n\n## 2ã€moment.js\n\nå‰ç«¯æ—¶é—´å¤„ç†å·¥å…· [moment.js](http://momentjs.cn/)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/20230324103640.png)\n\n### ä½¿ç”¨ï¼š\n","tags":["å‰ç«¯"],"categories":["å·¥å…·"]},{"title":"Redis+SpringBooté—®é¢˜","url":"/2023/03/23/redisspringbooté—®é¢˜/","content":"\n### é…ç½®ç±»\n\nè¿™é‡Œéœ€è¦å¯¹javaä¸­çš„å„ç§å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼Œç„¶åå­˜æ”¾åœ¨redisä¸­ã€‚å¦‚æœä¸åœ¨configé…ç½®ç±»ä¸­é…ç½®ï¼Œéœ€è¦æ¯æ¬¡è°ƒç”¨æ‰‹åŠ¨è½¬åŒ–ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚\n\nå¦å¤–æ–°ç‰ˆæœ¬ä¹‹åJackson2JsonRedisSerializeråº”è¯¥åœ¨å®ä¾‹åŒ–æ—¶ç›´æ¥new Jackson2JsonRedisSerializer<Object>(objectMapper,Object.class)ï¼›è¿™é‡Œè¿™ä¸ªobjectMapperæ˜¯é‡ç‚¹\n\n```\n@Configuration\npublic class RedisConfig {\n\n    @Bean\n    public RedisTemplate<String,Object > redisTemplate(RedisConnectionFactory factory){\n        RedisTemplate<String,Object> redisTemplate=new RedisTemplate<>();\n        RedisSerializer<String > redisSerializer = new StringRedisSerializer();\n        //ä½¿ç”¨Jacksonçš„åºåˆ—åŒ–å™¨ï¼Œåœ¨åé¢å¯¹valueè¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¯¹Objectç±»åºåˆ—åŒ–\n          /*\n        è®¾ç½®objectMapperï¼›è½¬æ¢javaå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨çš„\n         */\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);\n\n        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<Object>(objectMapper,Object.class);\n\n\n        redisTemplate.setConnectionFactory(factory);\n        redisTemplate.setKeySerializer(redisSerializer);\n        //valueåºåˆ—åŒ–\n        redisTemplate.setValueSerializer(serializer);\n        //value hashmapåºåˆ—åŒ–\n        redisTemplate.setHashKeySerializer(redisSerializer);\n        //key hashmapåºåˆ—åŒ–\n        redisTemplate.setHashValueSerializer(serializer);\n\n        redisTemplate.afterPropertiesSet();\n\n        return redisTemplate;\n    }\n}\n```\n\n### Rediså·¥å…·ç±»\n\n```\n@SuppressWarnings(value = { \"unchecked\", \"rawtypes\" })\n@Component\npublic class RedisCache\n{\n    @Autowired\n    public RedisTemplate redisTemplate;\n\n    /**\n     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰\n     *\n     * @param key ç¼“å­˜çš„é”®å€¼\n     * @param value ç¼“å­˜çš„å€¼\n     */\n    public <T> void setCacheObject(final String key, final T value)\n    {\n        redisTemplate.opsForValue().set(key, value);\n    }\n\n    /**\n     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰\n     *\n     * @param key ç¼“å­˜çš„é”®å€¼\n     * @param value ç¼“å­˜çš„å€¼\n     * @param timeout æ—¶é—´\n     * @param timeUnit æ—¶é—´é¢—ç²’åº¦\n     */\n    public <T> void setCacheObject(final String key, final T value, final Integer timeout, final TimeUnit timeUnit)\n    {\n        redisTemplate.opsForValue().set(key, value, timeout, timeUnit);\n    }\n\n    /**\n     * è®¾ç½®æœ‰æ•ˆæ—¶é—´\n     *\n     * @param key Redisé”®\n     * @param timeout è¶…æ—¶æ—¶é—´\n     * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥\n     */\n    public boolean expire(final String key, final long timeout)\n    {\n        return expire(key, timeout, TimeUnit.SECONDS);\n    }\n\n    /**\n     * è®¾ç½®æœ‰æ•ˆæ—¶é—´\n     *\n     * @param key Redisé”®\n     * @param timeout è¶…æ—¶æ—¶é—´\n     * @param unit æ—¶é—´å•ä½\n     * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥\n     */\n    public boolean expire(final String key, final long timeout, final TimeUnit unit)\n    {\n        return redisTemplate.expire(key, timeout, unit);\n    }\n\n    /**\n     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡ã€‚\n     *\n     * @param key ç¼“å­˜é”®å€¼\n     * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®\n     */\n    public <T> T getCacheObject(final String key)\n    {\n        ValueOperations<String, T> operation = redisTemplate.opsForValue();\n        return operation.get(key);\n    }\n\n    /**\n     * åˆ é™¤å•ä¸ªå¯¹è±¡\n     *\n     * @param key\n     */\n    public boolean deleteObject(final String key)\n    {\n        return redisTemplate.delete(key);\n    }\n\n    /**\n     * åˆ é™¤é›†åˆå¯¹è±¡\n     *\n     * @param collection å¤šä¸ªå¯¹è±¡\n     * @return\n     */\n    public long deleteObject(final Collection collection)\n    {\n        return redisTemplate.delete(collection);\n    }\n\n    /**\n     * ç¼“å­˜Listæ•°æ®\n     *\n     * @param key ç¼“å­˜çš„é”®å€¼\n     * @param dataList å¾…ç¼“å­˜çš„Listæ•°æ®\n     * @return ç¼“å­˜çš„å¯¹è±¡\n     */\n    public <T> long setCacheList(final String key, final List<T> dataList)\n    {\n        Long count = redisTemplate.opsForList().rightPushAll(key, dataList);\n        return count == null ? 0 : count;\n    }\n\n    /**\n     * è·å¾—ç¼“å­˜çš„listå¯¹è±¡\n     *\n     * @param key ç¼“å­˜çš„é”®å€¼\n     * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®\n     */\n    public <T> List<T> getCacheList(final String key)\n    {\n        return redisTemplate.opsForList().range(key, 0, -1);\n    }\n\n    /**\n     * ç¼“å­˜Set\n     *\n     * @param key ç¼“å­˜é”®å€¼\n     * @param dataSet ç¼“å­˜çš„æ•°æ®\n     * @return ç¼“å­˜æ•°æ®çš„å¯¹è±¡\n     */\n    public <T> BoundSetOperations<String, T> setCacheSet(final String key, final Set<T> dataSet)\n    {\n        BoundSetOperations<String, T> setOperation = redisTemplate.boundSetOps(key);\n        Iterator<T> it = dataSet.iterator();\n        while (it.hasNext())\n        {\n            setOperation.add(it.next());\n        }\n        return setOperation;\n    }\n\n    /**\n     * è·å¾—ç¼“å­˜çš„set\n     *\n     * @param key\n     * @return\n     */\n    public <T> Set<T> getCacheSet(final String key)\n    {\n        return redisTemplate.opsForSet().members(key);\n    }\n\n    /**\n     * ç¼“å­˜Map\n     *\n     * @param key\n     * @param dataMap\n     */\n    public <T> void setCacheMap(final String key, final Map<String, T> dataMap)\n    {\n        if (dataMap != null) {\n            redisTemplate.opsForHash().putAll(key, dataMap);\n        }\n    }\n\n    /**\n     * è·å¾—ç¼“å­˜çš„Map\n     *\n     * @param key\n     * @return\n     */\n    public <T> Map<String, T> getCacheMap(final String key)\n    {\n        return redisTemplate.opsForHash().entries(key);\n    }\n\n    /**\n     * å¾€Hashä¸­å­˜å…¥æ•°æ®\n     *\n     * @param key Redisé”®\n     * @param hKey Hashé”®\n     * @param value å€¼\n     */\n    public <T> void setCacheMapValue(final String key, final String hKey, final T value)\n    {\n        redisTemplate.opsForHash().put(key, hKey, value);\n    }\n\n    /**\n     * è·å–Hashä¸­çš„æ•°æ®\n     *\n     * @param key Redisé”®\n     * @param hKey Hashé”®\n     * @return Hashä¸­çš„å¯¹è±¡\n     */\n    public <T> T getCacheMapValue(final String key, final String hKey)\n    {\n        HashOperations<String, String, T> opsForHash = redisTemplate.opsForHash();\n        return opsForHash.get(key, hKey);\n    }\n\n    /**\n     * åˆ é™¤Hashä¸­çš„æ•°æ®\n     *\n     * @param key\n     * @param hkey\n     */\n    public void delCacheMapValue(final String key, final String hkey)\n    {\n        HashOperations hashOperations = redisTemplate.opsForHash();\n        hashOperations.delete(key, hkey);\n    }\n\n    /**\n     * è·å–å¤šä¸ªHashä¸­çš„æ•°æ®\n     *\n     * @param key Redisé”®\n     * @param hKeys Hashé”®é›†åˆ\n     * @return Hashå¯¹è±¡é›†åˆ\n     */\n    public <T> List<T> getMultiCacheMapValue(final String key, final Collection<Object> hKeys)\n    {\n        return redisTemplate.opsForHash().multiGet(key, hKeys);\n    }\n\n    /**\n     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡åˆ—è¡¨\n     *\n     * @param pattern å­—ç¬¦ä¸²å‰ç¼€\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    public Collection<String> keys(final String pattern)\n    {\n        return redisTemplate.keys(pattern);\n    }\n}\n```\n","tags":["redis"],"categories":["javaå…¨æ ˆ"]},{"title":"å¸¸ç”¨API","url":"/2023/03/23/å¸¸ç”¨api/","content":"\nè·å–QQå¤´åƒï¼š`http://q1.qlogo.cn/g?b=qq&nk=2693285351&s=640`\n","tags":["å·¥å…·"],"categories":["å·¥å…·"]},{"title":"SpringCloudå­¦ä¹ è®°å½•","url":"/2023/03/16/springcloudå­¦ä¹ è®°å½•/","content":"\n# SpringCloud01\n\n# 1.è®¤è¯†å¾®æœåŠ¡\n\néšç€äº’è”ç½‘è¡Œä¸šçš„å‘å±•ï¼Œå¯¹æœåŠ¡çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼ŒæœåŠ¡æ¶æ„ä¹Ÿä»å•ä½“æ¶æ„é€æ¸æ¼”å˜ä¸ºç°åœ¨æµè¡Œçš„å¾®æœåŠ¡æ¶æ„ã€‚è¿™äº›æ¶æ„ä¹‹é—´æœ‰æ€æ ·çš„å·®åˆ«å‘¢ï¼Ÿ\n\n## 1.0.å­¦ä¹ ç›®æ ‡\n\näº†è§£å¾®æœåŠ¡æ¶æ„çš„ä¼˜ç¼ºç‚¹\n\n## 1.1.å•ä½“æ¶æ„\n\n**å•ä½“æ¶æ„**ï¼šå°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚\n\n![image-20210713202807818](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713202807818.png)\n\nå•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š\n\n**ä¼˜ç‚¹ï¼š**\n\n- æ¶æ„ç®€å•\n\n- éƒ¨ç½²æˆæœ¬ä½\n\n**ç¼ºç‚¹ï¼š**\n\n- è€¦åˆåº¦é«˜ï¼ˆç»´æŠ¤å›°éš¾ã€å‡çº§å›°éš¾ï¼‰\n\n## 1.2.åˆ†å¸ƒå¼æ¶æ„\n\n**åˆ†å¸ƒå¼æ¶æ„**ï¼šæ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿåšæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡åŠŸèƒ½æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ï¼Œç§°ä¸ºä¸€ä¸ªæœåŠ¡ã€‚\n\n![image-20210713203124797](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713203124797.png)\n\nåˆ†å¸ƒå¼æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼š\n\n**ä¼˜ç‚¹ï¼š**\n\n- é™ä½æœåŠ¡è€¦åˆ\n\n- æœ‰åˆ©äºæœåŠ¡å‡çº§å’Œæ‹“å±•\n\n**ç¼ºç‚¹ï¼š**\n\n- æœåŠ¡è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚\n\nåˆ†å¸ƒå¼æ¶æ„è™½ç„¶é™ä½äº†æœåŠ¡è€¦åˆï¼Œä½†æ˜¯æœåŠ¡æ‹†åˆ†æ—¶ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜éœ€è¦æ€è€ƒï¼š\n\n- æœåŠ¡æ‹†åˆ†çš„ç²’åº¦å¦‚ä½•ç•Œå®šï¼Ÿ\n\n- æœåŠ¡ä¹‹é—´å¦‚ä½•è°ƒç”¨ï¼Ÿ\n\n- æœåŠ¡çš„è°ƒç”¨å…³ç³»å¦‚ä½•ç®¡ç†ï¼Ÿ\n\näººä»¬éœ€è¦åˆ¶å®šä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ ‡å‡†æ¥çº¦æŸåˆ†å¸ƒå¼æ¶æ„ã€‚\n\n## 1.3.å¾®æœåŠ¡\n\nå¾®æœåŠ¡çš„æ¶æ„ç‰¹å¾ï¼š\n\n- å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£\n\n- è‡ªæ²»ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ï¼Œç‹¬ç«‹éƒ¨ç½²å’Œäº¤ä»˜\n\n- é¢å‘æœåŠ¡ï¼šæœåŠ¡æä¾›ç»Ÿä¸€æ ‡å‡†çš„æ¥å£ï¼Œä¸è¯­è¨€å’ŒæŠ€æœ¯æ— å…³\n\n- éš”ç¦»æ€§å¼ºï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜\n\n![image-20210713203753373](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713203753373.png)\n\nå¾®æœåŠ¡çš„ä¸Šè¿°ç‰¹æ€§å…¶å®æ˜¯åœ¨ç»™åˆ†å¸ƒå¼æ¶æ„åˆ¶å®šä¸€ä¸ªæ ‡å‡†ï¼Œè¿›ä¸€æ­¥é™ä½æœåŠ¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæä¾›æœåŠ¡çš„ç‹¬ç«‹æ€§å’Œçµæ´»æ€§ã€‚åšåˆ°é«˜å†…èšï¼Œä½è€¦åˆã€‚\n\nå› æ­¤ï¼Œå¯ä»¥è®¤ä¸º**å¾®æœåŠ¡**æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½æ¶æ„è®¾è®¡çš„**åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ** ã€‚\n\nä½†æ–¹æ¡ˆè¯¥æ€ä¹ˆè½åœ°ï¼Ÿé€‰ç”¨ä»€ä¹ˆæ ·çš„æŠ€æœ¯æ ˆï¼Ÿå…¨çƒçš„äº’è”ç½‘å…¬å¸éƒ½åœ¨ç§¯æå°è¯•è‡ªå·±çš„å¾®æœåŠ¡è½åœ°æ–¹æ¡ˆã€‚\n\nå…¶ä¸­åœ¨Javaé¢†åŸŸæœ€å¼•äººæ³¨ç›®çš„å°±æ˜¯SpringCloudæä¾›çš„æ–¹æ¡ˆäº†ã€‚\n\n## 1.4.SpringCloud\n\nSpringCloudæ˜¯ç›®å‰å›½å†…ä½¿ç”¨æœ€å¹¿æ³›çš„å¾®æœåŠ¡æ¡†æ¶ã€‚å®˜ç½‘åœ°å€ï¼š[https://spring.io/projects/spring-cloud](https://spring.io/projects/spring-cloud)ã€‚\n\nSpringCloudé›†æˆäº†å„ç§å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶ï¼Œå¹¶åŸºäºSpringBootå®ç°äº†è¿™äº›ç»„ä»¶çš„è‡ªåŠ¨è£…é…ï¼Œä»è€Œæä¾›äº†è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚\n\nå…¶ä¸­å¸¸è§çš„ç»„ä»¶åŒ…æ‹¬ï¼š\n\n![image-20210713204155887](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713204155887.png)\n\nå¦å¤–ï¼ŒSpringCloudåº•å±‚æ˜¯ä¾èµ–äºSpringBootçš„ï¼Œå¹¶ä¸”æœ‰ç‰ˆæœ¬çš„å…¼å®¹å…³ç³»ï¼Œå¦‚ä¸‹ï¼š\n\n![image-20210713205003790](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713205003790.png)\n\næˆ‘ä»¬è¯¾å ‚å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯ Hoxton.SR10ï¼Œå› æ­¤å¯¹åº”çš„SpringBootç‰ˆæœ¬æ˜¯2.3.xç‰ˆæœ¬ã€‚\n\n## 1.5.æ€»ç»“\n\n- å•ä½“æ¶æ„ï¼šç®€å•æ–¹ä¾¿ï¼Œé«˜åº¦è€¦åˆï¼Œæ‰©å±•æ€§å·®ï¼Œé€‚åˆå°å‹é¡¹ç›®ã€‚ä¾‹å¦‚ï¼šå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ\n\n- åˆ†å¸ƒå¼æ¶æ„ï¼šæ¾è€¦åˆï¼Œæ‰©å±•æ€§å¥½ï¼Œä½†æ¶æ„å¤æ‚ï¼Œéš¾åº¦å¤§ã€‚é€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®ï¼Œä¾‹å¦‚ï¼šäº¬ä¸œã€æ·˜å®\n\n- å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆâ‘ ä¼˜ç‚¹ï¼šæ‹†åˆ†ç²’åº¦æ›´å°ã€æœåŠ¡æ›´ç‹¬ç«‹ã€è€¦åˆåº¦æ›´ä½â‘¡ç¼ºç‚¹ï¼šæ¶æ„éå¸¸å¤æ‚ï¼Œè¿ç»´ã€ç›‘æ§ã€éƒ¨ç½²éš¾åº¦æé«˜\n\n- SpringCloudæ˜¯å¾®æœåŠ¡æ¶æ„çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œé›†æˆäº†å„ç§ä¼˜ç§€å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶\n\n# 2.æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨\n\nä»»ä½•åˆ†å¸ƒå¼æ¶æ„éƒ½ç¦»ä¸å¼€æœåŠ¡çš„æ‹†åˆ†ï¼Œå¾®æœåŠ¡ä¹Ÿæ˜¯ä¸€æ ·ã€‚\n\n## 2.1.æœåŠ¡æ‹†åˆ†åŸåˆ™\n\nè¿™é‡Œæˆ‘æ€»ç»“äº†å¾®æœåŠ¡æ‹†åˆ†æ—¶çš„å‡ ä¸ªåŸåˆ™ï¼š\n\n- ä¸åŒå¾®æœåŠ¡ï¼Œä¸è¦é‡å¤å¼€å‘ç›¸åŒä¸šåŠ¡\n\n- å¾®æœåŠ¡æ•°æ®ç‹¬ç«‹ï¼Œä¸è¦è®¿é—®å…¶å®ƒå¾®æœåŠ¡çš„æ•°æ®åº“\n\n- å¾®æœåŠ¡å¯ä»¥å°†è‡ªå·±çš„ä¸šåŠ¡æš´éœ²ä¸ºæ¥å£ï¼Œä¾›å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨\n\n![image-20210713210800950](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713210800950.png)\n\n## 2.2.æœåŠ¡æ‹†åˆ†ç¤ºä¾‹\n\nä»¥è¯¾å‰èµ„æ–™ä¸­çš„å¾®æœåŠ¡cloud-demoä¸ºä¾‹ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\n\n![image-20210713211009593](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713211009593.png)\n\ncloud-demoï¼šçˆ¶å·¥ç¨‹ï¼Œç®¡ç†ä¾èµ–\n\n- order-serviceï¼šè®¢å•å¾®æœåŠ¡ï¼Œè´Ÿè´£è®¢å•ç›¸å…³ä¸šåŠ¡\n\n- user-serviceï¼šç”¨æˆ·å¾®æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·ç›¸å…³ä¸šåŠ¡\n\nè¦æ±‚ï¼š\n\n- è®¢å•å¾®æœåŠ¡å’Œç”¨æˆ·å¾®æœåŠ¡éƒ½å¿…é¡»æœ‰å„è‡ªçš„æ•°æ®åº“ï¼Œç›¸äº’ç‹¬ç«‹\n\n- è®¢å•æœåŠ¡å’Œç”¨æˆ·æœåŠ¡éƒ½å¯¹å¤–æš´éœ²Restfulçš„æ¥å£\n\n- è®¢å•æœåŠ¡å¦‚æœéœ€è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½è°ƒç”¨ç”¨æˆ·æœåŠ¡çš„Restfulæ¥å£ï¼Œä¸èƒ½æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“\n\n### 2.2.1.å¯¼å…¥Sqlè¯­å¥\n\né¦–å…ˆï¼Œå°†è¯¾å‰èµ„æ–™æä¾›çš„`cloud-order.sql`å’Œ`cloud-user.sql`å¯¼å…¥åˆ°mysqlä¸­ï¼š\n\n![image-20210713211417049](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713211417049.png)\n\ncloud-userè¡¨ä¸­åˆå§‹æ•°æ®å¦‚ä¸‹ï¼š\n\n![image-20210713211550169](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713211550169.png)\n\ncloud-orderè¡¨ä¸­åˆå§‹æ•°æ®å¦‚ä¸‹ï¼š\n\n![image-20210713211657319](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713211657319.png)\n\ncloud-orderè¡¨ä¸­æŒæœ‰cloud-userè¡¨ä¸­çš„idå­—æ®µã€‚\n\n### 2.2.2.å¯¼å…¥demoå·¥ç¨‹\n\nç”¨IDEAå¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„Demoï¼š\n\n![image-20210713211814094](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713211814094.png)\n\né¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š\n\n![image-20210713212656887](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212656887.png)\n\nå¯¼å…¥åï¼Œä¼šåœ¨IDEAå³ä¸‹è§’å‡ºç°å¼¹çª—ï¼š\n\n![image-20210713212349272](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212349272.png)\n\nç‚¹å‡»å¼¹çª—ï¼Œç„¶åæŒ‰ä¸‹å›¾é€‰æ‹©ï¼š\n\n![image-20210713212336185](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212336185.png)\n\nä¼šå‡ºç°è¿™æ ·çš„èœå•ï¼š\n\n![image-20210713212513324](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212513324.png)\n\né…ç½®ä¸‹é¡¹ç›®ä½¿ç”¨çš„JDKï¼š\n\n![image-20210713220736408](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713220736408.png)\n\n## 2.3.å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹\n\nåœ¨order-serviceæœåŠ¡ä¸­ï¼Œæœ‰ä¸€ä¸ªæ ¹æ®idæŸ¥è¯¢è®¢å•çš„æ¥å£ï¼š\n\n![image-20210713212749575](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212749575.png)\n\næ ¹æ®idæŸ¥è¯¢è®¢å•ï¼Œè¿”å›å€¼æ˜¯Orderå¯¹è±¡ï¼Œå¦‚å›¾ï¼š\n\n![image-20210713212901725](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713212901725.png)\n\nå…¶ä¸­çš„userä¸ºnull\n\nåœ¨user-serviceä¸­æœ‰ä¸€ä¸ªæ ¹æ®idæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼š\n\n![image-20210713213146089](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713213146089.png)\n\næŸ¥è¯¢çš„ç»“æœå¦‚å›¾ï¼š\n\n![image-20210713213213075](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713213213075.png)\n\n### 2.3.1.æ¡ˆä¾‹éœ€æ±‚ï¼š\n\nä¿®æ”¹order-serviceä¸­çš„æ ¹æ®idæŸ¥è¯¢è®¢å•ä¸šåŠ¡ï¼Œè¦æ±‚åœ¨æŸ¥è¯¢è®¢å•çš„åŒæ—¶ï¼Œæ ¹æ®è®¢å•ä¸­åŒ…å«çš„userIdæŸ¥è¯¢å‡ºç”¨æˆ·ä¿¡æ¯ï¼Œä¸€èµ·è¿”å›ã€‚\n\n![image-20210713213312278](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713213312278.png)\n\nå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨order-serviceä¸­ å‘user-serviceå‘èµ·ä¸€ä¸ªhttpçš„è¯·æ±‚ï¼Œè°ƒç”¨[http://localhost:8081/user/](http://localhost:8081/user/){userId}è¿™ä¸ªæ¥å£ã€‚\n\nå¤§æ¦‚çš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š\n\n- æ³¨å†Œä¸€ä¸ªRestTemplateçš„å®ä¾‹åˆ°Springå®¹å™¨\n\n- ä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œæ ¹æ®Orderå¯¹è±¡ä¸­çš„userIdæŸ¥è¯¢User\n\n- å°†æŸ¥è¯¢çš„Userå¡«å……åˆ°Orderå¯¹è±¡ï¼Œä¸€èµ·è¿”å›\n\n### 2.3.2.æ³¨å†ŒRestTemplate\n\né¦–å…ˆï¼Œæˆ‘ä»¬åœ¨order-serviceæœåŠ¡ä¸­çš„OrderApplicationå¯åŠ¨ç±»ä¸­ï¼Œæ³¨å†ŒRestTemplateå®ä¾‹ï¼š\n\npackage cn.itcast.order;  \nâ€‹  \nimport org.mybatis.spring.annotation.MapperScan;  \nimport org.springframework.boot.SpringApplication;  \nimport org.springframework.boot.autoconfigure.SpringBootApplication;  \nimport org.springframework.context.annotation.Bean;  \nimport org.springframework.web.client.RestTemplate;  \nâ€‹  \n@MapperScan(\"cn.itcast.order.mapper\")  \n@SpringBootApplication  \npublic class OrderApplication {  \nâ€‹  \n Â  Â public static void main(String\\[\\] args) {  \n Â  Â  Â  Â SpringApplication.run(OrderApplication.class, args);  \n Â   }  \nâ€‹  \n Â  Â @Bean  \n Â  Â public RestTemplate restTemplate() {  \n Â  Â  Â  Â return new RestTemplate();  \n Â   }  \n}\n\n### 2.3.3.å®ç°è¿œç¨‹è°ƒç”¨\n\nä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„cn.itcast.order.serviceåŒ…ä¸‹çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼š\n\n![image-20210713213959569](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713213959569.png)\n\n## 2.4.æä¾›è€…ä¸æ¶ˆè´¹è€…\n\nåœ¨æœåŠ¡è°ƒç”¨å…³ç³»ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªä¸åŒçš„è§’è‰²ï¼š\n\n**æœåŠ¡æä¾›è€…**ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè¢«å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨çš„æœåŠ¡ã€‚ï¼ˆæä¾›æ¥å£ç»™å…¶å®ƒå¾®æœåŠ¡ï¼‰\n\n**æœåŠ¡æ¶ˆè´¹è€…**ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡çš„æœåŠ¡ã€‚ï¼ˆè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼‰\n\n![image-20210713214404481](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713214404481.png)\n\nä½†æ˜¯ï¼ŒæœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…çš„è§’è‰²å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œè€Œæ˜¯ç›¸å¯¹äºä¸šåŠ¡è€Œè¨€ã€‚\n\nå¦‚æœæœåŠ¡Aè°ƒç”¨äº†æœåŠ¡Bï¼Œè€ŒæœåŠ¡Båˆè°ƒç”¨äº†æœåŠ¡Cï¼ŒæœåŠ¡Bçš„è§’è‰²æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- å¯¹äºAè°ƒç”¨Bçš„ä¸šåŠ¡è€Œè¨€ï¼šAæ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼ŒBæ˜¯æœåŠ¡æä¾›è€…\n\n- å¯¹äºBè°ƒç”¨Cçš„ä¸šåŠ¡è€Œè¨€ï¼šBæ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼ŒCæ˜¯æœåŠ¡æä¾›è€…\n\nå› æ­¤ï¼ŒæœåŠ¡Bæ—¢å¯ä»¥æ˜¯æœåŠ¡æä¾›è€…ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡æ¶ˆè´¹è€…ã€‚\n\n# 3.Eurekaæ³¨å†Œä¸­å¿ƒ\n\nå‡å¦‚æˆ‘ä»¬çš„æœåŠ¡æä¾›è€…user-serviceéƒ¨ç½²äº†å¤šä¸ªå®ä¾‹ï¼Œå¦‚å›¾ï¼š\n\n![image-20210713214925388](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713214925388.png)\n\nå¤§å®¶æ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š\n\n- order-serviceåœ¨å‘èµ·è¿œç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œè¯¥å¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹çš„ipåœ°å€å’Œç«¯å£ï¼Ÿ\n\n- æœ‰å¤šä¸ªuser-serviceå®ä¾‹åœ°å€ï¼Œorder-serviceè°ƒç”¨æ—¶è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ\n\n- order-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ\n\n## 3.1.Eurekaçš„ç»“æ„å’Œä½œç”¨\n\nè¿™äº›é—®é¢˜éƒ½éœ€è¦åˆ©ç”¨SpringCloudä¸­çš„æ³¨å†Œä¸­å¿ƒæ¥è§£å†³ï¼Œå…¶ä¸­æœ€å¹¿ä¸ºäººçŸ¥çš„æ³¨å†Œä¸­å¿ƒå°±æ˜¯Eurekaï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\n\n![image-20210713220104956](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713220104956.png)\n\nå›ç­”ä¹‹å‰çš„å„ä¸ªé—®é¢˜ã€‚\n\né—®é¢˜1ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹åœ°å€ï¼Ÿ\n\nè·å–åœ°å€ä¿¡æ¯çš„æµç¨‹å¦‚ä¸‹ï¼š\n\n- user-serviceæœåŠ¡å®ä¾‹å¯åŠ¨åï¼Œå°†è‡ªå·±çš„ä¿¡æ¯æ³¨å†Œåˆ°eureka-serverï¼ˆEurekaæœåŠ¡ç«¯ï¼‰ã€‚è¿™ä¸ªå«æœåŠ¡æ³¨å†Œ\n\n- eureka-serverä¿å­˜æœåŠ¡åç§°åˆ°æœåŠ¡å®ä¾‹åœ°å€åˆ—è¡¨çš„æ˜ å°„å…³ç³»\n\n- order-serviceæ ¹æ®æœåŠ¡åç§°ï¼Œæ‹‰å–å®ä¾‹åœ°å€åˆ—è¡¨ã€‚è¿™ä¸ªå«æœåŠ¡å‘ç°æˆ–æœåŠ¡æ‹‰å–\n\né—®é¢˜2ï¼šorder-serviceå¦‚ä½•ä»å¤šä¸ªuser-serviceå®ä¾‹ä¸­é€‰æ‹©å…·ä½“çš„å®ä¾‹ï¼Ÿ\n\n- order-serviceä»å®ä¾‹åˆ—è¡¨ä¸­åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•é€‰ä¸­ä¸€ä¸ªå®ä¾‹åœ°å€\n\n- å‘è¯¥å®ä¾‹åœ°å€å‘èµ·è¿œç¨‹è°ƒç”¨\n\né—®é¢˜3ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ\n\n- user-serviceä¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤30ç§’ï¼‰å‘eureka-serverå‘èµ·è¯·æ±‚ï¼ŒæŠ¥å‘Šè‡ªå·±çŠ¶æ€ï¼Œç§°ä¸ºå¿ƒè·³\n\n- å½“è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å‘é€å¿ƒè·³æ—¶ï¼Œeureka-serverä¼šè®¤ä¸ºå¾®æœåŠ¡å®ä¾‹æ•…éšœï¼Œå°†è¯¥å®ä¾‹ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤\n\n- order-serviceæ‹‰å–æœåŠ¡æ—¶ï¼Œå°±èƒ½å°†æ•…éšœå®ä¾‹æ’é™¤äº†\n\n> æ³¨æ„ï¼šä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ—¢å¯ä»¥æ˜¯æœåŠ¡æä¾›è€…ï¼Œåˆå¯ä»¥æ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼Œå› æ­¤eurekaå°†æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½ç»Ÿä¸€å°è£…åˆ°äº†eureka-clientç«¯\n\nå› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åŠ¨æ‰‹å®è·µçš„æ­¥éª¤åŒ…æ‹¬ï¼š\n\n![image-20210713220509769](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713220509769.png)\n\n## 3.2.æ­å»ºeureka-server\n\né¦–å…ˆå¤§å®¶æ³¨å†Œä¸­å¿ƒæœåŠ¡ç«¯ï¼šeureka-serverï¼Œè¿™å¿…é¡»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡\n\n### 3.2.1.åˆ›å»ºeureka-serveræœåŠ¡\n\nåœ¨cloud-demoçˆ¶å·¥ç¨‹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå­æ¨¡å—ï¼š\n\n![image-20210713220605881](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713220605881.png)\n\nå¡«å†™æ¨¡å—ä¿¡æ¯ï¼š\n\n![image-20210713220857396](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713220857396.png)\n\nç„¶åå¡«å†™æœåŠ¡ä¿¡æ¯ï¼š\n\n![image-20210713221339022](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713221339022.png)\n\n### 3.2.2.å¼•å…¥eurekaä¾èµ–\n\nå¼•å…¥SpringCloudä¸ºeurekaæä¾›çš„starterä¾èµ–ï¼š\n\n<dependency>  \n Â  Â <groupId>org.springframework.cloud</groupId>  \n Â  Â <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>  \n</dependency>\n\n### 3.2.3.ç¼–å†™å¯åŠ¨ç±»\n\nç»™eureka-serveræœåŠ¡ç¼–å†™ä¸€ä¸ªå¯åŠ¨ç±»ï¼Œä¸€å®šè¦æ·»åŠ ä¸€ä¸ª@EnableEurekaServeræ³¨è§£ï¼Œå¼€å¯eurekaçš„æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ï¼š\n\npackage cn.itcast.eureka;  \nâ€‹  \nimport org.springframework.boot.SpringApplication;  \nimport org.springframework.boot.autoconfigure.SpringBootApplication;  \nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;  \nâ€‹  \n@SpringBootApplication  \n@EnableEurekaServer  \npublic class EurekaApplication {  \n Â  Â public static void main(String\\[\\] args) {  \n Â  Â  Â  Â SpringApplication.run(EurekaApplication.class, args);  \n Â   }  \n}\n\n### 3.2.4.ç¼–å†™é…ç½®æ–‡ä»¶\n\nç¼–å†™ä¸€ä¸ªapplication.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\nserver:  \n  port: 10086  \nspring:  \n  application:  \n Â   name: eureka-server  \neureka:  \n  client:  \n Â   service-url:   \n Â  Â   defaultZone: http://127.0.0.1:10086/eureka\n\n### 3.2.5.å¯åŠ¨æœåŠ¡\n\nå¯åŠ¨å¾®æœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼š[http://127.0.0.1:10086](http://127.0.0.1:10086/)\n\nçœ‹åˆ°ä¸‹é¢ç»“æœåº”è¯¥æ˜¯æˆåŠŸäº†ï¼š\n\n![image-20210713222157190](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713222157190.png)\n\n## 3.3.æœåŠ¡æ³¨å†Œ\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°†user-serviceæ³¨å†Œåˆ°eureka-serverä¸­å»ã€‚\n\n### 1ï¼‰å¼•å…¥ä¾èµ–\n\nåœ¨user-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥ä¸‹é¢çš„eureka-clientä¾èµ–ï¼š\n\n<dependency>  \n Â  Â <groupId>org.springframework.cloud</groupId>  \n Â  Â <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>  \n</dependency>\n\n### 2ï¼‰é…ç½®æ–‡ä»¶\n\nåœ¨user-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š\n\nspring:  \n  application:  \n Â   name: userservice  \neureka:  \n  client:  \n Â   service-url:  \n Â  Â   defaultZone: http://127.0.0.1:10086/eureka\n\n### 3ï¼‰å¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹\n\nä¸ºäº†æ¼”ç¤ºä¸€ä¸ªæœåŠ¡æœ‰å¤šä¸ªå®ä¾‹çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªSpringBootçš„å¯åŠ¨é…ç½®ï¼Œå†å¯åŠ¨ä¸€ä¸ªuser-serviceã€‚\n\né¦–å…ˆï¼Œå¤åˆ¶åŸæ¥çš„user-serviceå¯åŠ¨é…ç½®ï¼š\n\n![image-20210713222656562](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713222656562.png)\n\nç„¶åï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå¡«å†™ä¿¡æ¯ï¼š\n\n![image-20210713222757702](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713222757702.png)\n\nç°åœ¨ï¼ŒSpringBootçª—å£ä¼šå‡ºç°ä¸¤ä¸ªuser-serviceå¯åŠ¨é…ç½®ï¼š\n\n![image-20210713222841951](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713222841951.png)\n\nä¸è¿‡ï¼Œç¬¬ä¸€ä¸ªæ˜¯8081ç«¯å£ï¼Œç¬¬äºŒä¸ªæ˜¯8082ç«¯å£ã€‚\n\nå¯åŠ¨ä¸¤ä¸ªuser-serviceå®ä¾‹ï¼š\n\n![image-20210713223041491](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713223041491.png)\n\næŸ¥çœ‹eureka-serverç®¡ç†é¡µé¢ï¼š\n\n![image-20210713223150650](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713223150650.png)\n\n## 3.4.æœåŠ¡å‘ç°\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°†order-serviceçš„é€»è¾‘ä¿®æ”¹ï¼šå‘eureka-serveræ‹‰å–user-serviceçš„ä¿¡æ¯ï¼Œå®ç°æœåŠ¡å‘ç°ã€‚\n\n### 1ï¼‰å¼•å…¥ä¾èµ–\n\nä¹‹å‰è¯´è¿‡ï¼ŒæœåŠ¡å‘ç°ã€æœåŠ¡æ³¨å†Œç»Ÿä¸€éƒ½å°è£…åœ¨eureka-clientä¾èµ–ï¼Œå› æ­¤è¿™ä¸€æ­¥ä¸æœåŠ¡æ³¨å†Œæ—¶ä¸€è‡´ã€‚\n\nåœ¨order-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥ä¸‹é¢çš„eureka-clientä¾èµ–ï¼š\n\n<dependency>  \n Â  Â <groupId>org.springframework.cloud</groupId>  \n Â  Â <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>  \n</dependency>\n\n### 2ï¼‰é…ç½®æ–‡ä»¶\n\næœåŠ¡å‘ç°ä¹Ÿéœ€è¦çŸ¥é“eurekaåœ°å€ï¼Œå› æ­¤ç¬¬äºŒæ­¥ä¸æœåŠ¡æ³¨å†Œä¸€è‡´ï¼Œéƒ½æ˜¯é…ç½®eurekaä¿¡æ¯ï¼š\n\nåœ¨order-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š\n\nspring:  \n  application:  \n Â   name: orderservice  \neureka:  \n  client:  \n Â   service-url:  \n Â  Â   defaultZone: http://127.0.0.1:10086/eureka\n\n### 3ï¼‰æœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡\n\næœ€åï¼Œæˆ‘ä»¬è¦å»eureka-serverä¸­æ‹‰å–user-serviceæœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå¹¶ä¸”å®ç°è´Ÿè½½å‡è¡¡ã€‚\n\nä¸è¿‡è¿™äº›åŠ¨ä½œä¸ç”¨æˆ‘ä»¬å»åšï¼Œåªéœ€è¦æ·»åŠ ä¸€äº›æ³¨è§£å³å¯ã€‚\n\nåœ¨order-serviceçš„OrderApplicationä¸­ï¼Œç»™RestTemplateè¿™ä¸ªBeanæ·»åŠ ä¸€ä¸ª@LoadBalancedæ³¨è§£ï¼š\n\n![image-20210713224049419](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713224049419.png)\n\nä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„cn.itcast.order.serviceåŒ…ä¸‹çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ã€‚ä¿®æ”¹è®¿é—®çš„urlè·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ipã€ç«¯å£ï¼š\n\n![image-20210713224245731](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713224245731.png)\n\nspringä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬ä»eureka-serverç«¯ï¼Œæ ¹æ®userserviceè¿™ä¸ªæœåŠ¡åç§°ï¼Œè·å–å®ä¾‹åˆ—è¡¨ï¼Œè€Œåå®Œæˆè´Ÿè½½å‡è¡¡ã€‚\n\n# 4.Ribbonè´Ÿè½½å‡è¡¡\n\nä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†@LoadBalancedæ³¨è§£ï¼Œå³å¯å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸç†å‘¢ï¼Ÿ\n\n## 4.1.è´Ÿè½½å‡è¡¡åŸç†\n\nSpringCloudåº•å±‚å…¶å®æ˜¯åˆ©ç”¨äº†ä¸€ä¸ªåä¸ºRibbonçš„ç»„ä»¶ï¼Œæ¥å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ã€‚\n\n![image-20210713224517686](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713224517686.png)\n\né‚£ä¹ˆæˆ‘ä»¬å‘å‡ºçš„è¯·æ±‚æ˜æ˜æ˜¯[http://userservice/user/1](http://userservice/user/1)ï¼Œæ€ä¹ˆå˜æˆäº†[http://localhost:8081](http://localhost:8081/)çš„å‘¢ï¼Ÿ\n\n## 4.2.æºç è·Ÿè¸ª\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬åªè¾“å…¥äº†serviceåç§°å°±å¯ä»¥è®¿é—®äº†å‘¢ï¼Ÿä¹‹å‰è¿˜è¦è·å–ipå’Œç«¯å£ã€‚\n\næ˜¾ç„¶æœ‰äººå¸®æˆ‘ä»¬æ ¹æ®serviceåç§°ï¼Œè·å–åˆ°äº†æœåŠ¡å®ä¾‹çš„ipå’Œç«¯å£ã€‚å®ƒå°±æ˜¯`LoadBalancerInterceptor`ï¼Œè¿™ä¸ªç±»ä¼šåœ¨å¯¹RestTemplateçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œç„¶åä»Eurekaæ ¹æ®æœåŠ¡idè·å–æœåŠ¡åˆ—è¡¨ï¼Œéšååˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•å¾—åˆ°çœŸå®çš„æœåŠ¡åœ°å€ä¿¡æ¯ï¼Œæ›¿æ¢æœåŠ¡idã€‚\n\næˆ‘ä»¬è¿›è¡Œæºç è·Ÿè¸ªï¼š\n\n### 1ï¼‰LoadBalancerIntercepor\n\n![1525620483637](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525620483637.png)\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„interceptæ–¹æ³•ï¼Œæ‹¦æˆªäº†ç”¨æˆ·çš„HttpRequestè¯·æ±‚ï¼Œç„¶ååšäº†å‡ ä»¶äº‹ï¼š\n\n- `request.getURI()`ï¼šè·å–è¯·æ±‚uriï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯ [http://user-service/user/8](http://user-service/user/8)\n\n- `originalUri.getHost()`ï¼šè·å–uriè·¯å¾„çš„ä¸»æœºåï¼Œå…¶å®å°±æ˜¯æœåŠ¡idï¼Œ`user-service`\n\n- `this.loadBalancer.execute()`ï¼šå¤„ç†æœåŠ¡idï¼Œå’Œç”¨æˆ·è¯·æ±‚ã€‚\n\nè¿™é‡Œçš„`this.loadBalancer`æ˜¯`LoadBalancerClient`ç±»å‹ï¼Œæˆ‘ä»¬ç»§ç»­è·Ÿå…¥ã€‚\n\n### 2ï¼‰LoadBalancerClient\n\nç»§ç»­è·Ÿå…¥executeæ–¹æ³•ï¼š\n\n![1525620787090](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525620787090.png)\n\nä»£ç æ˜¯è¿™æ ·çš„ï¼š\n\n- getLoadBalancer(serviceId)ï¼šæ ¹æ®æœåŠ¡idè·å–ILoadBalancerï¼Œè€ŒILoadBalancerä¼šæ‹¿ç€æœåŠ¡idå»eurekaä¸­è·å–æœåŠ¡åˆ—è¡¨å¹¶ä¿å­˜èµ·æ¥ã€‚\n\n- getServer(loadBalancer)ï¼šåˆ©ç”¨å†…ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚æœ¬ä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–äº†8082ç«¯å£çš„æœåŠ¡\n\næ”¾è¡Œåï¼Œå†æ¬¡è®¿é—®å¹¶è·Ÿè¸ªï¼Œå‘ç°è·å–çš„æ˜¯8081ï¼š\n\n![1525620835911](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525620835911.png)\n\næœç„¶å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚\n\n### 3ï¼‰è´Ÿè½½å‡è¡¡ç­–ç•¥IRule\n\nåœ¨åˆšæ‰çš„ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–æœåŠ¡ä½¿é€šè¿‡ä¸€ä¸ª`getServer`æ–¹æ³•æ¥åšè´Ÿè½½å‡è¡¡:\n\n![1525620835911](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525620835911.png)\n\næˆ‘ä»¬ç»§ç»­è·Ÿå…¥ï¼š\n\n![1544361421671](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1544361421671.png)\n\nç»§ç»­è·Ÿè¸ªæºç chooseServeræ–¹æ³•ï¼Œå‘ç°è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n\n![1525622652849](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525622652849.png)\n\næˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªruleæ˜¯è°ï¼š\n\n![1525622699666](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525622699666.png)\n\nè¿™é‡Œçš„ruleé»˜è®¤å€¼æ˜¯ä¸€ä¸ª`RoundRobinRule`ï¼Œçœ‹ç±»çš„ä»‹ç»ï¼š\n\n![1525622754316](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/1525622754316.png)\n\nè¿™ä¸å°±æ˜¯è½®è¯¢çš„æ„æ€å˜›ã€‚\n\nåˆ°è¿™é‡Œï¼Œæ•´ä¸ªè´Ÿè½½å‡è¡¡çš„æµç¨‹æˆ‘ä»¬å°±æ¸…æ¥šäº†ã€‚\n\n### 4ï¼‰æ€»ç»“\n\nSpringCloudRibbonçš„åº•å±‚é‡‡ç”¨äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªäº†RestTemplateå‘å‡ºçš„è¯·æ±‚ï¼Œå¯¹åœ°å€åšäº†ä¿®æ”¹ã€‚ç”¨ä¸€å¹…å›¾æ¥æ€»ç»“ä¸€ä¸‹ï¼š\n\n![image-20210713224724673](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713224724673.png)\n\nåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š\n\n- æ‹¦æˆªæˆ‘ä»¬çš„RestTemplateè¯·æ±‚[http://userservice/user/1](http://userservice/user/1)\n\n- RibbonLoadBalancerClientä¼šä»è¯·æ±‚urlä¸­è·å–æœåŠ¡åç§°ï¼Œä¹Ÿå°±æ˜¯user-service\n\n- DynamicServerListLoadBalanceræ ¹æ®user-serviceåˆ°eurekaæ‹‰å–æœåŠ¡åˆ—è¡¨\n\n- eurekaè¿”å›åˆ—è¡¨ï¼Œlocalhost:8081ã€localhost:8082\n\n- IRuleåˆ©ç”¨å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œä¾‹å¦‚localhost:8081\n\n- RibbonLoadBalancerClientä¿®æ”¹è¯·æ±‚åœ°å€ï¼Œç”¨localhost:8081æ›¿ä»£userserviceï¼Œå¾—åˆ°[http://localhost:8081/user/1](http://localhost:8081/user/1)ï¼Œå‘èµ·çœŸå®è¯·æ±‚\n\n## 4.3.è´Ÿè½½å‡è¡¡ç­–ç•¥\n\n### 4.3.1.è´Ÿè½½å‡è¡¡ç­–ç•¥\n\nè´Ÿè½½å‡è¡¡çš„è§„åˆ™éƒ½å®šä¹‰åœ¨IRuleæ¥å£ä¸­ï¼Œè€ŒIRuleæœ‰å¾ˆå¤šä¸åŒçš„å®ç°ç±»ï¼š\n\n![image-20210713225653000](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713225653000.png)\n\nä¸åŒè§„åˆ™çš„å«ä¹‰å¦‚ä¸‹ï¼š\n\n| **å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ç±»** | **è§„åˆ™æè¿°** |\n| --- | --- |\n| RoundRobinRule | ç®€å•è½®è¯¢æœåŠ¡åˆ—è¡¨æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚å®ƒæ˜¯Ribboné»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ã€‚ |\n| AvailabilityFilteringRule | å¯¹ä»¥ä¸‹ä¸¤ç§æœåŠ¡å™¨è¿›è¡Œå¿½ç•¥ï¼š ï¼ˆ1ï¼‰åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°æœåŠ¡å™¨å¦‚æœ3æ¬¡è¿æ¥å¤±è´¥ï¼Œè¿™å°æœåŠ¡å™¨å°±ä¼šè¢«è®¾ç½®ä¸ºâ€œçŸ­è·¯â€çŠ¶æ€ã€‚çŸ­è·¯çŠ¶æ€å°†æŒç»­30ç§’ï¼Œå¦‚æœå†æ¬¡è¿æ¥å¤±è´¥ï¼ŒçŸ­è·¯çš„æŒç»­æ—¶é—´å°±ä¼šå‡ ä½•çº§åœ°å¢åŠ ã€‚ ï¼ˆ2ï¼‰å¹¶å‘æ•°è¿‡é«˜çš„æœåŠ¡å™¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¿‡é«˜ï¼Œé…ç½®äº†AvailabilityFilteringRuleè§„åˆ™çš„å®¢æˆ·ç«¯ä¹Ÿä¼šå°†å…¶å¿½ç•¥ã€‚å¹¶å‘è¿æ¥æ•°çš„ä¸Šé™ï¼Œå¯ä»¥ç”±å®¢æˆ·ç«¯çš„<clientName>.<clientConfigNameSpace>.ActiveConnectionsLimitå±æ€§è¿›è¡Œé…ç½®ã€‚ |\n| WeightedResponseTimeRule | ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å™¨èµ‹äºˆä¸€ä¸ªæƒé‡å€¼ã€‚æœåŠ¡å™¨å“åº”æ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„æƒé‡å°±è¶Šå°ã€‚è¿™ä¸ªè§„åˆ™ä¼šéšæœºé€‰æ‹©æœåŠ¡å™¨ï¼Œè¿™ä¸ªæƒé‡å€¼ä¼šå½±å“æœåŠ¡å™¨çš„é€‰æ‹©ã€‚ |\n| **ZoneAvoidanceRule** | ä»¥åŒºåŸŸå¯ç”¨çš„æœåŠ¡å™¨ä¸ºåŸºç¡€è¿›è¡ŒæœåŠ¡å™¨çš„é€‰æ‹©ã€‚ä½¿ç”¨Zoneå¯¹æœåŠ¡å™¨è¿›è¡Œåˆ†ç±»ï¼Œè¿™ä¸ªZoneå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœºæˆ¿ã€ä¸€ä¸ªæœºæ¶ç­‰ã€‚è€Œåå†å¯¹Zoneå†…çš„å¤šä¸ªæœåŠ¡åšè½®è¯¢ã€‚ |\n| BestAvailableRule | å¿½ç•¥é‚£äº›çŸ­è·¯çš„æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©å¹¶å‘æ•°è¾ƒä½çš„æœåŠ¡å™¨ã€‚ |\n| RandomRule | éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å™¨ã€‚ |\n| RetryRule | é‡è¯•æœºåˆ¶çš„é€‰æ‹©é€»è¾‘ |\n\né»˜è®¤çš„å®ç°å°±æ˜¯ZoneAvoidanceRuleï¼Œæ˜¯ä¸€ç§è½®è¯¢æ–¹æ¡ˆ\n\n### 4.3.2.è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥\n\né€šè¿‡å®šä¹‰IRuleå®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n1. ä»£ç æ–¹å¼ï¼šåœ¨order-serviceä¸­çš„OrderApplicationç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRuleï¼š\n\n@Bean  \npublic IRule randomRule(){  \n Â  Â return new RandomRule();  \n}\n\n2. é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåœ¨order-serviceçš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š\n\nuserservice: # ç»™æŸä¸ªå¾®æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œè¿™é‡Œæ˜¯userserviceæœåŠ¡  \n  ribbon:  \n Â   NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # è´Ÿè½½å‡è¡¡è§„åˆ™ \n\n> **æ³¨æ„**ï¼Œä¸€èˆ¬ç”¨é»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä¸åšä¿®æ”¹ã€‚\n\n## 4.4.é¥¥é¥¿åŠ è½½\n\nRibboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚\n\nè€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š\n\nribbon:  \n  eager-load:  \n Â   enabled: true  \n Â   clients: userservice\n\n# 5.Nacosæ³¨å†Œä¸­å¿ƒ\n\nå›½å†…å…¬å¸ä¸€èˆ¬éƒ½æ¨å´‡é˜¿é‡Œå·´å·´çš„æŠ€æœ¯ï¼Œæ¯”å¦‚æ³¨å†Œä¸­å¿ƒï¼ŒSpringCloudAlibabaä¹Ÿæ¨å‡ºäº†ä¸€ä¸ªåä¸ºNacosçš„æ³¨å†Œä¸­å¿ƒã€‚\n\n## 5.1.è®¤è¯†å’Œå®‰è£…Nacos\n\n[Nacos](https://nacos.io/)æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œç°åœ¨æ˜¯[SpringCloud](https://spring.io/projects/spring-cloud)ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯”[Eureka](https://github.com/Netflix/eureka)åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ã€‚\n\n![image-20210713230444308](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713230444308.png)\n\nå®‰è£…æ–¹å¼å¯ä»¥å‚è€ƒè¯¾å‰èµ„æ–™ã€ŠNacoså®‰è£…æŒ‡å—.mdã€‹\n\n## 5.2.æœåŠ¡æ³¨å†Œåˆ°nacos\n\nNacosæ˜¯SpringCloudAlibabaçš„ç»„ä»¶ï¼Œè€ŒSpringCloudAlibabaä¹Ÿéµå¾ªSpringCloudä¸­å®šä¹‰çš„æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°è§„èŒƒã€‚å› æ­¤ä½¿ç”¨Nacoså’Œä½¿ç”¨Eurekaå¯¹äºå¾®æœåŠ¡æ¥è¯´ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚\n\nä¸»è¦å·®å¼‚åœ¨äºï¼š\n\n- ä¾èµ–ä¸åŒ\n\n- æœåŠ¡åœ°å€ä¸åŒ\n\n### 1ï¼‰å¼•å…¥ä¾èµ–\n\nåœ¨cloud-demoçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„`<dependencyManagement>`ä¸­å¼•å…¥SpringCloudAlibabaçš„ä¾èµ–ï¼š\n\n<dependency>  \n Â  Â <groupId>com.alibaba.cloud</groupId>  \n Â  Â <artifactId>spring-cloud-alibaba-dependencies</artifactId>  \n Â  Â <version>2.2.6.RELEASE</version>  \n Â  Â <type>pom</type>  \n Â  Â <scope>import</scope>  \n</dependency>\n\nç„¶ååœ¨user-serviceå’Œorder-serviceä¸­çš„pomæ–‡ä»¶ä¸­å¼•å…¥nacos-discoveryä¾èµ–ï¼š\n\n<dependency>  \n Â  Â <groupId>com.alibaba.cloud</groupId>  \n Â  Â <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>  \n</dependency>\n\n> **æ³¨æ„**ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„ä¾èµ–ã€‚\n\n### 2ï¼‰é…ç½®nacosåœ°å€\n\nåœ¨user-serviceå’Œorder-serviceçš„application.ymlä¸­æ·»åŠ nacosåœ°å€ï¼š\n\nspring:  \n  cloud:  \n Â   nacos:  \n Â  Â   server-addr: localhost:8848\n\n> **æ³¨æ„**ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„åœ°å€\n\n### 3ï¼‰é‡å¯\n\né‡å¯å¾®æœåŠ¡åï¼Œç™»å½•nacosç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¾®æœåŠ¡ä¿¡æ¯ï¼š\n\n![image-20210713231439607](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713231439607.png)\n\n## 5.3.æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹\n\nä¸€ä¸ª**æœåŠ¡**å¯ä»¥æœ‰å¤šä¸ª**å®ä¾‹**ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„user-serviceï¼Œå¯ä»¥æœ‰:\n\n- 127.0.0.1:8081\n\n- 127.0.0.1:8082\n\n- 127.0.0.1:8083\n\nå‡å¦‚è¿™äº›å®ä¾‹åˆ†å¸ƒäºå…¨å›½å„åœ°çš„ä¸åŒæœºæˆ¿ï¼Œä¾‹å¦‚ï¼š\n\n- 127.0.0.1:8081ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿\n\n- 127.0.0.1:8082ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿\n\n- 127.0.0.1:8083ï¼Œåœ¨æ­å·æœºæˆ¿\n\nNacoså°±å°†åŒä¸€æœºæˆ¿å†…çš„å®ä¾‹ åˆ’åˆ†ä¸ºä¸€ä¸ª**é›†ç¾¤**ã€‚\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œuser-serviceæ˜¯æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥åŒ…å«å¤šä¸ªé›†ç¾¤ï¼Œå¦‚æ­å·ã€ä¸Šæµ·ï¼Œæ¯ä¸ªé›†ç¾¤ä¸‹å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œå½¢æˆåˆ†çº§æ¨¡å‹ï¼Œå¦‚å›¾ï¼š\n\n![image-20210713232522531](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713232522531.png)\n\nå¾®æœåŠ¡äº’ç›¸è®¿é—®æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½è®¿é—®åŒé›†ç¾¤å®ä¾‹ï¼Œå› ä¸ºæœ¬åœ°è®¿é—®é€Ÿåº¦æ›´å¿«ã€‚å½“æœ¬é›†ç¾¤å†…ä¸å¯ç”¨æ—¶ï¼Œæ‰è®¿é—®å…¶å®ƒé›†ç¾¤ã€‚ä¾‹å¦‚ï¼š\n\n![image-20210713232658928](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713232658928.png)\n\næ­å·æœºæˆ¿å†…çš„order-serviceåº”è¯¥ä¼˜å…ˆè®¿é—®åŒæœºæˆ¿çš„user-serviceã€‚\n\n### 5.3.1.ç»™user-serviceé…ç½®é›†ç¾¤\n\nä¿®æ”¹user-serviceçš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š\n\nspring:  \n  cloud:  \n Â   nacos:  \n Â  Â   server-addr: localhost:8848  \n Â  Â   discovery:  \n Â  Â  Â   cluster-name: HZ # é›†ç¾¤åç§°\n\né‡å¯ä¸¤ä¸ªuser-serviceå®ä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨nacosæ§åˆ¶å°çœ‹åˆ°ä¸‹é¢ç»“æœï¼š\n\n![image-20210713232916215](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713232916215.png)\n\næˆ‘ä»¬å†æ¬¡å¤åˆ¶ä¸€ä¸ªuser-serviceå¯åŠ¨é…ç½®ï¼Œæ·»åŠ å±æ€§ï¼š\n\n\\-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH\n\né…ç½®å¦‚å›¾æ‰€ç¤ºï¼š\n\n![image-20210713233528982](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713233528982.png)\n\nå¯åŠ¨UserApplication3åå†æ¬¡æŸ¥çœ‹nacosæ§åˆ¶å°ï¼š\n\n![image-20210713233727923](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713233727923.png)\n\n### 5.3.2.åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡\n\né»˜è®¤çš„`ZoneAvoidanceRule`å¹¶ä¸èƒ½å®ç°æ ¹æ®åŒé›†ç¾¤ä¼˜å…ˆæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚\n\nå› æ­¤Nacosä¸­æä¾›äº†ä¸€ä¸ª`NacosRule`çš„å®ç°ï¼Œå¯ä»¥ä¼˜å…ˆä»åŒé›†ç¾¤ä¸­æŒ‘é€‰å®ä¾‹ã€‚\n\n1ï¼‰ç»™order-serviceé…ç½®é›†ç¾¤ä¿¡æ¯\n\nä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š\n\nspring:  \n  cloud:  \n Â   nacos:  \n Â  Â   server-addr: localhost:8848  \n Â  Â   discovery:  \n Â  Â  Â   cluster-name: HZ # é›†ç¾¤åç§°\n\n2ï¼‰ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™\n\nä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š\n\nuserservice:  \n  ribbon:  \n Â   NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule # è´Ÿè½½å‡è¡¡è§„åˆ™ \n\n## 5.4.æƒé‡é…ç½®\n\nå®é™…éƒ¨ç½²ä¸­ä¼šå‡ºç°è¿™æ ·çš„åœºæ™¯ï¼š\n\næœåŠ¡å™¨è®¾å¤‡æ€§èƒ½æœ‰å·®å¼‚ï¼Œéƒ¨åˆ†å®ä¾‹æ‰€åœ¨æœºå™¨æ€§èƒ½è¾ƒå¥½ï¼Œå¦ä¸€äº›è¾ƒå·®ï¼Œæˆ‘ä»¬å¸Œæœ›æ€§èƒ½å¥½çš„æœºå™¨æ‰¿æ‹…æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ã€‚\n\nä½†é»˜è®¤æƒ…å†µä¸‹NacosRuleæ˜¯åŒé›†ç¾¤å†…éšæœºæŒ‘é€‰ï¼Œä¸ä¼šè€ƒè™‘æœºå™¨çš„æ€§èƒ½é—®é¢˜ã€‚\n\nå› æ­¤ï¼ŒNacosæä¾›äº†æƒé‡é…ç½®æ¥æ§åˆ¶è®¿é—®é¢‘ç‡ï¼Œæƒé‡è¶Šå¤§åˆ™è®¿é—®é¢‘ç‡è¶Šé«˜ã€‚\n\nåœ¨nacosæ§åˆ¶å°ï¼Œæ‰¾åˆ°user-serviceçš„å®ä¾‹åˆ—è¡¨ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œå³å¯ä¿®æ”¹æƒé‡ï¼š\n\n![image-20210713235133225](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210713235133225.png)\n\nåœ¨å¼¹å‡ºçš„ç¼–è¾‘çª—å£ï¼Œä¿®æ”¹æƒé‡ï¼š\n\n> **æ³¨æ„**ï¼šå¦‚æœæƒé‡ä¿®æ”¹ä¸º0ï¼Œåˆ™è¯¥å®ä¾‹æ°¸è¿œä¸ä¼šè¢«è®¿é—®\n\n## 5.5.ç¯å¢ƒéš”ç¦»\n\nNacosæä¾›äº†namespaceæ¥å®ç°ç¯å¢ƒéš”ç¦»åŠŸèƒ½ã€‚\n\n- nacosä¸­å¯ä»¥æœ‰å¤šä¸ªnamespace\n\n- namespaceä¸‹å¯ä»¥æœ‰groupã€serviceç­‰\n\n- ä¸åŒnamespaceä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¾‹å¦‚ä¸åŒnamespaceçš„æœåŠ¡äº’ç›¸ä¸å¯è§\n\n![image-20210714000101516](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000101516.png)\n\n### 5.5.1.åˆ›å»ºnamespace\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰serviceã€dataã€groupéƒ½åœ¨åŒä¸€ä¸ªnamespaceï¼Œåä¸ºpublicï¼š\n\n![image-20210714000414781](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000414781.png)\n\næˆ‘ä»¬å¯ä»¥ç‚¹å‡»é¡µé¢æ–°å¢æŒ‰é’®ï¼Œæ·»åŠ ä¸€ä¸ªnamespaceï¼š\n\n![image-20210714000440143](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000440143.png)\n\nç„¶åï¼Œå¡«å†™è¡¨å•ï¼š\n\n![image-20210714000505928](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000505928.png)\n\nå°±èƒ½åœ¨é¡µé¢çœ‹åˆ°ä¸€ä¸ªæ–°çš„namespaceï¼š\n\n![image-20210714000522913](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000522913.png)\n\n### 5.5.2.ç»™å¾®æœåŠ¡é…ç½®namespace\n\nç»™å¾®æœåŠ¡é…ç½®namespaceåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ¥å®ç°ã€‚\n\nä¾‹å¦‚ï¼Œä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼š\n\nspring:  \n  cloud:  \n Â   nacos:  \n Â  Â   server-addr: localhost:8848  \n Â  Â   discovery:  \n Â  Â  Â   cluster-name: HZ  \n Â  Â  Â   namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # å‘½åç©ºé—´ï¼Œå¡«ID\n\né‡å¯order-serviceåï¼Œè®¿é—®æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š\n\n![image-20210714000830703](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000830703.png)\n\n![image-20210714000837140](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000837140.png)\n\næ­¤æ—¶è®¿é—®order-serviceï¼Œå› ä¸ºnamespaceä¸åŒï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°userserviceï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼š\n\n![image-20210714000941256](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714000941256.png)\n\n## 5.6.Nacosä¸Eurekaçš„åŒºåˆ«\n\nNacosçš„æœåŠ¡å®ä¾‹åˆ†ä¸ºä¸¤ç§lç±»å‹ï¼š\n\n- ä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œé»˜è®¤çš„ç±»å‹ã€‚\n\n- éä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºï¼Œä¸ä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œä¹Ÿå¯ä»¥å«æ°¸ä¹…å®ä¾‹ã€‚\n\né…ç½®ä¸€ä¸ªæœåŠ¡å®ä¾‹ä¸ºæ°¸ä¹…å®ä¾‹ï¼š\n\nspring:  \n  cloud:  \n Â   nacos:  \n Â  Â   discovery:  \n Â  Â  Â   ephemeral: false # è®¾ç½®ä¸ºéä¸´æ—¶å®ä¾‹\n\nNacoså’ŒEurekaæ•´ä½“ç»“æ„ç±»ä¼¼ï¼ŒæœåŠ¡æ³¨å†Œã€æœåŠ¡æ‹‰å–ã€å¿ƒè·³ç­‰å¾…ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚ï¼š\n\n![image-20210714001728017](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20210714001728017.png)\n\n- Nacosä¸eurekaçš„å…±åŒç‚¹\n    - éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå’ŒæœåŠ¡æ‹‰å–\n    \n    - éƒ½æ”¯æŒæœåŠ¡æä¾›è€…å¿ƒè·³æ–¹å¼åšå¥åº·æ£€æµ‹\n\n- Nacosä¸Eurekaçš„åŒºåˆ«\n    - Nacosæ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨æ£€æµ‹æä¾›è€…çŠ¶æ€ï¼šä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼ï¼Œéä¸´æ—¶å®ä¾‹é‡‡ç”¨ä¸»åŠ¨æ£€æµ‹æ¨¡å¼\n    \n    - ä¸´æ—¶å®ä¾‹å¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œéä¸´æ—¶å®ä¾‹åˆ™ä¸ä¼šè¢«å‰”é™¤\n    \n    - Nacosæ”¯æŒæœåŠ¡åˆ—è¡¨å˜æ›´çš„æ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ŒæœåŠ¡åˆ—è¡¨æ›´æ–°æ›´åŠæ—¶\n    \n    - Nacosé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ–¹å¼ï¼Œå½“é›†ç¾¤ä¸­å­˜åœ¨éä¸´æ—¶å®ä¾‹æ—¶ï¼Œé‡‡ç”¨CPæ¨¡å¼ï¼›Eurekaé‡‡ç”¨APæ–¹å¼\n","tags":["springcloud"],"categories":["javaå…¨æ ˆ"]},{"title":"åå¤§ç»å…¸æ’åºç®—æ³•","url":"/2022/12/20/åå¤§ç»å…¸æ’åºç®—æ³•/","content":"\n### 0.ç®—æ³•å¤æ‚åº¦\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140150.png)\n\n**ç›¸å…³æ¦‚å¿µï¼š**\n\n- **ç¨³å®š**ï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ã€‚\n\n- **ä¸ç¨³å®š**ï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹å a å¯èƒ½ä¼šå‡ºç°åœ¨ b çš„åé¢ã€‚\n\n- **æ—¶é—´å¤æ‚åº¦**ï¼šå¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°ã€‚åæ˜ å½“nå˜åŒ–æ—¶ï¼Œæ“ä½œæ¬¡æ•°å‘ˆç°ä»€ä¹ˆè§„å¾‹ã€‚\n\n- **ç©ºé—´å¤æ‚åº¦ï¼š**æ˜¯æŒ‡ç®—æ³•åœ¨è®¡ç®—æœº\n\n### 1.å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰\n\n**1.1ç®—æ³•æè¿°**\n\n- æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼›\n\n- å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼›\n\n- é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼›\n\n- é‡å¤æ­¥éª¤1~3ï¼Œç›´åˆ°æ’åºå®Œæˆ\n\n**1.2 åŠ¨ç”»æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140201.gif)\n\n**1.3 ä»£ç å®ç°**\n\n```\nfunction bubbleSort(arr) { Â  Â var len = arr.length; Â  Â for (var i = 0; i < len - 1; i++) {//ä¸€å…±éœ€è¦len-1æ¬¡å¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯å°±æ˜¯æ‰¾å‡ºæœ€å¤§çš„æ•° Â  Â  Â  Â for (var j = 0; j < len - 1 - i; j++) {//ä»åŠ¨ç”»ä¸­çœ‹å‡ºåªéœ€è¦åšlen-1-iæ¬¡ Â  Â  Â  Â  Â  Â if (arr[j] > arr[j+1]) { Â  Â  Â  Â // ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯” Â  Â  Â  Â  Â  Â  Â  Â var temp = arr[j+1]; Â  Â  Â  Â // å…ƒç´ äº¤æ¢ Â  Â  Â  Â  Â  Â  Â  Â arr[j+1] = arr[j]; Â  Â  Â  Â  Â  Â  Â  Â arr[j] = temp; Â  Â  Â  Â  Â   } Â  Â  Â   } Â   } Â  Â return arr;}\n```\n\n### 2.é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰\n\n**2.1ç®—æ³•æè¿°**\n\nnä¸ªè®°å½•çš„ç›´æ¥é€‰æ‹©æ’åºå¯ç»è¿‡n-1è¶Ÿç›´æ¥é€‰æ‹©æ’åºå¾—åˆ°æœ‰åºç»“æœã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š\n\n- åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸ºR\\[1..n\\]ï¼Œæœ‰åºåŒºä¸ºç©ºï¼›\n\n- ç¬¬iè¶Ÿæ’åº(i=1,2,3â€¦n-1)å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸ºR\\[1..i-1\\]å’ŒR(i..nï¼‰ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­-é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R\\[k\\]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬1ä¸ªè®°å½•Räº¤æ¢ï¼Œä½¿R\\[1..i\\]å’ŒR\\[i+1..n)åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ 1ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘1ä¸ªçš„æ–°æ— åºåŒºï¼›\n\n- n-1è¶Ÿç»“æŸï¼Œæ•°ç»„æœ‰åºåŒ–äº†ã€‚\n\n**2.2åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140211.gif)\n\n**2.3ä»£ç å®ç°**\n\n```\nfunction selectionSort(arr) { Â  Â var len = arr.length; Â  Â var minIndex, temp; Â  Â for (var i = 0; i < len - 1; i++) { Â  Â  Â  Â minIndex = i;//æ— åºéƒ¨åˆ†çš„ç¬¬ä¸€ä¸ª Â  Â  Â  Â for (var j = i + 1; j < len; j++) { Â  Â  Â  Â  Â  Â if (arr[j] < arr[minIndex]) { Â  Â  // å¦‚æœç¬¬jä¸ªæ¯”ç¬¬ä¸€ä¸ªå° Â  Â  Â  Â  Â  Â  Â  Â minIndex = j; Â  Â  Â  Â  Â  Â  Â  Â  // å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜ Â  Â  Â  Â  Â   } Â  Â  //ä¸€è½®ä¸‹æ¥æ‰¾å‡ºæœ€å°çš„æ•° Â  Â  Â   } Â  Â  Â  Â //å°†æœ€å°çš„æ•°å’Œç¬¬ä¸€ä¸ªäº¤æ¢ä½ç½® Â  Â  Â  Â temp = arr[i]; Â  Â  Â  Â arr[i] = arr[minIndex]; Â  Â  Â  Â arr[minIndex] = temp; Â   } Â  Â return arr;} \n```\n\n### 3.æ’å…¥æ’åº\n\n**3.1ç®—æ³•æè¿°**\n\n- ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›\n\n- å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›\n\n- å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼›\n\n- é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼›\n\n- å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼›\n\n- é‡å¤æ­¥éª¤2~5ã€‚\n\n**3.2åŠ¨å›¾æ¼”ç¤º**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/849589-20171015225645277-1151100000.gif)\n\n**3.3ä»£ç å®ç°**\n\n```\nfunction insertionSort(arr) { Â  Â var len = arr.length; Â  Â var preIndex, current; Â  Â for (var i = 1; i < len; i++) { Â  Â  Â  Â preIndex = i - 1; Â  Â  Â  Â current = arr[i]; Â  Â  Â  Â //åªè¦arr[preIndex]<=currentå°±è¯´æ˜æ‰¾åˆ°äº†ä½ç½® Â  Â  Â  Â while (preIndex >= 0 && arr[preIndex] > current) { Â  Â  Â  Â  Â  Â arr[preIndex + 1] = arr[preIndex];//ä¸åŒ¹é…çš„æ•°å¾€åç§»ä¸€ä½ Â  Â  Â  Â  Â  Â preIndex--; //å‘å‰æ‰¾ Â  Â  Â   } Â  Â  Â  Â arr[preIndex + 1] = current; Â   } Â  Â return arr;}\n```\n\n### 4.å¸Œå°”æ’åºï¼ˆShell Sortï¼‰\n\n**4.1ç®—æ³•æè¿°**\n\nå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå…·ä½“ç®—æ³•æè¿°ï¼š\n\n- é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ—t1ï¼Œt2ï¼Œâ€¦ï¼Œtkï¼Œå…¶ä¸­ti>tjï¼Œtk=1ï¼›\n\n- æŒ‰å¢é‡åºåˆ—ä¸ªæ•°kï¼Œå¯¹åºåˆ—è¿›è¡Œk è¶Ÿæ’åºï¼›\n\n- æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸ºm çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚\n\n**4.2åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140233.gif)\n\n**4.3ä»£ç å®ç°**\n\n```\nfunction shellSort(arr) { Â  Â var len = arr.length; Â  Â for (var gap = Math.floor(len / 2); gap > 0; gap = Math.floor(gap / 2)) { Â  Â  Â  Â // æ³¨æ„ï¼šè¿™é‡Œå’ŒåŠ¨å›¾æ¼”ç¤ºçš„ä¸ä¸€æ ·ï¼ŒåŠ¨å›¾æ˜¯åˆ†ç»„æ‰§è¡Œï¼Œå®é™…æ“ä½œæ˜¯å¤šä¸ªåˆ†ç»„äº¤æ›¿æ‰§è¡Œ Â  Â  Â  Â for (var i = gap; i < len; i++) { Â  Â  Â  Â  Â  Â var j = i; Â  Â  Â  Â  Â  Â var current = arr[i]; Â  Â  Â  Â  Â  Â while (j - gap >= 0 && current < arr[j - gap]) { Â  Â  Â  Â  Â  Â  Â  Â  arr[j] = arr[j - gap]; Â  Â  Â  Â  Â  Â  Â  Â  j = j - gap; Â  Â  Â  Â  Â   } Â  Â  Â  Â  Â  Â arr[j] = current; Â  Â  Â   } Â   } Â  Â return arr;}\n```\n\n### 5.å½’å¹¶æ’åºï¼ˆMerge sortï¼‰\n\n**5.1ç®—æ³•æè¿°**\n\n- æŠŠé•¿åº¦ä¸ºnçš„è¾“å…¥åºåˆ—åˆ†æˆä¸¤ä¸ªé•¿åº¦ä¸ºn/2çš„å­åºåˆ—ï¼›\n\n- å¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«é‡‡ç”¨å½’å¹¶æ’åºï¼›\n\n- å°†ä¸¤ä¸ªæ’åºå¥½çš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„æ’åºåºåˆ—ã€‚\n\n**5.2åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140243.gif)\n\n**5.3ä»£ç å®ç°**\n\n```\nfunction mergeSort(arr) { Â  Â var len = arr.length; Â  Â if (len < 2) { Â  Â  Â  Â return arr; Â   } Â  Â var middle = Math.floor(len / 2), Â  Â  Â  Â left = arr.slice(0, middle), Â  Â  Â  Â right = arr.slice(middle); Â  Â return merge(mergeSort(left), mergeSort(right));} function merge(left, right) { Â  Â var result = [];  Â  Â while (left.length>0 && right.length>0) { Â  Â  Â  Â if (left[0] <= right[0]) { Â  Â  Â  Â  Â  Â result.push(left.shift()); Â  Â  Â   } else { Â  Â  Â  Â  Â  Â result.push(right.shift()); Â  Â  Â   } Â   }  Â  Â while (left.length) Â  Â  Â  Â result.push(left.shift());  Â  Â while (right.length) Â  Â  Â  Â result.push(right.shift());  Â  Â return result;}\n```\n\n### 6.å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰\n\n**6.1ç®—æ³•æè¿°**\n\nå¿«é€Ÿæ’åºä½¿ç”¨åˆ†æ²»æ³•æ¥æŠŠä¸€ä¸ªä¸²ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­ä¸²ï¼ˆsub-listsï¼‰ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š\n\n- ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰ï¼›\n\n- é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›\n\n- é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚\n\n**6.2åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140255.gif)\n\n**6.3ä»£ç æ¼”ç¤º**\n\n```\nfunction quickSort(arr, left, right) { Â  Â var len = arr.length, Â  Â  Â  Â partitionIndex, Â  Â  Â  Â left = typeof left != 'number' ? 0 : left, Â  Â  Â  Â right = typeof right != 'number' ? len - 1 : right;  Â  Â if (left < right) { Â  Â  Â  Â partitionIndex = partition(arr, left, right); Â  Â  Â  Â quickSort(arr, left, partitionIndex-1); Â  Â  Â  Â quickSort(arr, partitionIndex+1, right); Â   } Â  Â return arr;} function partition(arr, left ,right) { Â  Â  // åˆ†åŒºæ“ä½œ Â  Â var pivot = left, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // è®¾å®šåŸºå‡†å€¼ï¼ˆpivotï¼‰ Â  Â  Â  Â index = pivot + 1; Â  Â for (var i = index; i <= right; i++) { Â  Â  Â  Â if (arr[i] < arr[pivot]) { Â  Â  Â  Â  Â  Â swap(arr, i, index); Â  Â  Â  Â  Â  Â index++; Â  Â  Â   } Â  Â  Â   Â   } Â  Â swap(arr, pivot, index - 1); Â  Â return index-1;} function swap(arr, i, j) { Â  Â var temp = arr[i]; Â  Â arr[i] = arr[j]; Â  Â arr[j] = temp;}\n```\n\n### 7.å †æ’åºï¼ˆHeap Sortï¼‰\n\n**7.1ç®—æ³•æè¿°**\n\n- å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼›\n\n- å°†å †é¡¶å…ƒç´ R\\[1\\]ä¸æœ€åä¸€ä¸ªå…ƒç´ R\\[n\\]äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R\\[1,2â€¦n-1\\]<=R\\[n\\]ï¼›\n\n- ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R\\[1\\]å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°†R\\[1\\]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn)ã€‚ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚\n\n**7.2 åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140300.gif)\n\n**7.3ä»£ç å®ç°**\n\n```\nvar len; Â  Â // å› ä¸ºå£°æ˜çš„å¤šä¸ªå‡½æ•°éƒ½éœ€è¦æ•°æ®é•¿åº¦ï¼Œæ‰€ä»¥æŠŠlenè®¾ç½®æˆä¸ºå…¨å±€å˜é‡ function buildMaxHeap(arr) { Â  // å»ºç«‹å¤§é¡¶å † Â  Â len = arr.length; Â  Â for (var i = Math.floor(len/2); i >= 0; i--) { Â  Â  Â  Â heapify(arr, i); Â   }} function heapify(arr, i) { Â  Â  // å †è°ƒæ•´ Â  Â var left = 2 * i + 1, Â  Â  Â  Â right = 2 * i + 2, Â  Â  Â  Â largest = i;  Â  Â if (left < len && arr[left] > arr[largest]) { Â  Â  Â  Â largest = left; Â   }  Â  Â if (right < len && arr[right] > arr[largest]) { Â  Â  Â  Â largest = right; Â   }  Â  Â if (largest != i) { Â  Â  Â  Â swap(arr, i, largest); Â  Â  Â  Â heapify(arr, largest); Â   }} function swap(arr, i, j) { Â  Â var temp = arr[i]; Â  Â arr[i] = arr[j]; Â  Â arr[j] = temp;} function heapSort(arr) { Â  Â buildMaxHeap(arr);  Â  Â for (var i = arr.length - 1; i > 0; i--) { Â  Â  Â  Â swap(arr, 0, i); Â  Â  Â  Â len--; Â  Â  Â  Â heapify(arr, 0); Â   } Â  Â return arr;}\n```\n\n### 8.è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰\n\nè®¡æ•°æ’åºä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ï¼Œå…¶æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚\n\n**8.1 ç®—æ³•æè¿°**\n\n- æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼›\n\n- ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼›\n\n- å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼›\n\n- åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1ã€‚\n\n**8.2 åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140308.gif)\n\n**8.3 ä»£ç å®ç°**\n\n```\nfunction countingSort(arr, maxValue) { Â  Â var bucket = new Array(maxValue + 1), Â  Â  Â  Â sortedIndex = 0; Â  Â  Â  Â arrLen = arr.length, Â  Â  Â  Â bucketLen = maxValue + 1;  Â  Â for (var i = 0; i < arrLen; i++) { Â  Â  Â  Â if (!bucket[arr[i]]) { Â  Â  Â  Â  Â  Â bucket[arr[i]] = 0; Â  Â  Â   } Â  Â  Â  Â bucket[arr[i]]++; Â   }  Â  Â for (var j = 0; j < bucketLen; j++) { Â  Â  Â  Â while(bucket[j] > 0) { Â  Â  Â  Â  Â  Â arr[sortedIndex++] = j; Â  Â  Â  Â  Â  Â bucket[j]--; Â  Â  Â   } Â   }  Â  Â return arr;}\n```\n\n### 9.æ¡¶æ’åºï¼ˆBucket Sortï¼‰\n\næ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚æ¡¶æ’åº (Bucket sort)çš„å·¥ä½œçš„åŸç†ï¼šå‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’ï¼‰ã€‚\n\n**9.1 ç®—æ³•æè¿°**\n\n- è®¾ç½®ä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶ï¼›\n\n- éå†è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”æŠŠæ•°æ®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œå»ï¼›\n\n- å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶è¿›è¡Œæ’åºï¼›\n\n- ä»ä¸æ˜¯ç©ºçš„æ¡¶é‡ŒæŠŠæ’å¥½åºçš„æ•°æ®æ‹¼æ¥èµ·æ¥ã€‚\n\n**9.2 å›¾ç‰‡æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140315.png)\n\n**9.3 ä»£ç å®ç°**\n\n```\nfunction bucketSort(arr, bucketSize) {    if (arr.length === 0) {      return arr;    }     var i;    var minValue = arr[0];    var maxValue = arr[0];    for (i = 1; i < arr.length; i++) {      if (arr[i] < minValue) {          minValue = arr[i];                // è¾“å…¥æ•°æ®çš„æœ€å°å€¼      } else if (arr[i] > maxValue) {          maxValue = arr[i];                // è¾“å…¥æ•°æ®çš„æœ€å¤§å€¼      }    }     // æ¡¶çš„åˆå§‹åŒ–    var DEFAULT_BUCKET_SIZE = 5;            // è®¾ç½®æ¡¶çš„é»˜è®¤æ•°é‡ä¸º5    bucketSize = bucketSize || DEFAULT_BUCKET_SIZE;    var bucketCount = Math.floor((maxValue - minValue) / bucketSize) + 1;      var buckets = new Array(bucketCount);    for (i = 0; i < buckets.length; i++) {        buckets[i] = [];    }     // åˆ©ç”¨æ˜ å°„å‡½æ•°å°†æ•°æ®åˆ†é…åˆ°å„ä¸ªæ¡¶ä¸­    for (i = 0; i < arr.length; i++) {        buckets[Math.floor((arr[i] - minValue) / bucketSize)].push(arr[i]);    }     arr.length = 0;    for (i = 0; i < buckets.length; i++) {        insertionSort(buckets[i]);                      // å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œæ’åºï¼Œè¿™é‡Œä½¿ç”¨äº†æ’å…¥æ’åº        for (var j = 0; j < buckets[i].length; j++) {            arr.push(buckets[i][j]);                             }    }     return arr;}\n```\n\n### 10.åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰\n\nåŸºæ•°æ’åºæ˜¯æŒ‰ç…§ä½ä½å…ˆæ’åºï¼Œç„¶åæ”¶é›†ï¼›å†æŒ‰ç…§é«˜ä½æ’åºï¼Œç„¶åå†æ”¶é›†ï¼›ä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æœ€é«˜ä½ã€‚æœ‰æ—¶å€™æœ‰äº›å±æ€§æ˜¯æœ‰ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œå…ˆæŒ‰ä½ä¼˜å…ˆçº§æ’åºï¼Œå†æŒ‰é«˜ä¼˜å…ˆçº§æ’åºã€‚æœ€åçš„æ¬¡åºå°±æ˜¯é«˜ä¼˜å…ˆçº§é«˜çš„åœ¨å‰ï¼Œé«˜ä¼˜å…ˆçº§ç›¸åŒçš„ä½ä¼˜å…ˆçº§é«˜çš„åœ¨å‰ã€‚\n\n**10.1 ç®—æ³•æè¿°**\n\n- å–å¾—æ•°ç»„ä¸­çš„æœ€å¤§æ•°ï¼Œå¹¶å–å¾—ä½æ•°ï¼›\n\n- arrä¸ºåŸå§‹æ•°ç»„ï¼Œä»æœ€ä½ä½å¼€å§‹å–æ¯ä¸ªä½ç»„æˆradixæ•°ç»„ï¼›\n\n- å¯¹radixè¿›è¡Œè®¡æ•°æ’åºï¼ˆåˆ©ç”¨è®¡æ•°æ’åºé€‚ç”¨äºå°èŒƒå›´æ•°çš„ç‰¹ç‚¹ï¼‰ï¼›\n\n**10.2 åŠ¨å›¾æ¼”ç¤º**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210428140320.gif)\n\n**10.3 ä»£ç å®ç°**\n\n```\nvar counter = [];function radixSort(arr, maxDigit) {    var mod = 10;    var dev = 1;    for (var i = 0; i < maxDigit; i++, dev *= 10, mod *= 10) {        for(var j = 0; j < arr.length; j++) {            var bucket = parseInt((arr[j] % mod) / dev);            if(counter[bucket]==null) {                counter[bucket] = [];            }            counter[bucket].push(arr[j]);        }        var pos = 0;        for(var j = 0; j < counter.length; j++) {            var value = null;            if(counter[j]!=null) {                while ((value = counter[j].shift()) != null) {                      arr[pos++] = value;                }          }        }    }    return arr;}\n```\n\n**10.4 ç®—æ³•åˆ†æ**\n\nåŸºæ•°æ’åºåŸºäºåˆ†åˆ«æ’åºï¼Œåˆ†åˆ«æ”¶é›†ï¼Œæ‰€ä»¥æ˜¯ç¨³å®šçš„ã€‚ä½†åŸºæ•°æ’åºçš„æ€§èƒ½æ¯”æ¡¶æ’åºè¦ç•¥å·®ï¼Œæ¯ä¸€æ¬¡å…³é”®å­—çš„æ¡¶åˆ†é…éƒ½éœ€è¦O(n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œè€Œä¸”åˆ†é…ä¹‹åå¾—åˆ°æ–°çš„å…³é”®å­—åºåˆ—åˆéœ€è¦O(n)çš„æ—¶é—´å¤æ‚åº¦ã€‚å‡å¦‚å¾…æ’æ•°æ®å¯ä»¥åˆ†ä¸ºdä¸ªå…³é”®å­—ï¼Œåˆ™åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å°†æ˜¯O(d\\*2n) ï¼Œå½“ç„¶dè¦è¿œè¿œå°äºnï¼Œå› æ­¤åŸºæœ¬ä¸Šè¿˜æ˜¯çº¿æ€§çº§åˆ«çš„ã€‚\n\nåŸºæ•°æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(n+k)ï¼Œå…¶ä¸­kä¸ºæ¡¶çš„æ•°é‡ã€‚ä¸€èˆ¬æ¥è¯´n>>kï¼Œå› æ­¤é¢å¤–ç©ºé—´éœ€è¦å¤§æ¦‚nä¸ªå·¦å³ã€‚\n","tags":["ç®—æ³•"],"categories":["ç®—æ³•"]},{"title":"è‹±è¯­16ç§æ—¶æ€","url":"/2022/11/11/è‹±è¯­16ç§æ—¶æ€/","content":"\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/v2-fa0458291392a1d09e5c5f78d5b0aa6e_720w.webp)\n\n### 1.ä¸€èˆ¬ç°åœ¨æ—¶ ï¼ˆdo/does; is/am/areï¼‰\n\nâ‘ è¡¨ç¤ºç°åœ¨çš„æƒ…å†µã€çŠ¶æ€å’Œç‰¹å¾ã€‚\n\nä¾‹ï¼šHe is a student.\n\nä»–æ˜¯ä¸€ä¸ªå­¦ç”Ÿã€‚\n\nâ‘¡ è¡¨ç¤ºç»å¸¸æ€§ã€ä¹ æƒ¯æ€§åŠ¨ä½œã€‚\n\nä¾‹ï¼šHe always helps others.\n\nä»–æ€»æ˜¯å¸®åŠ©åˆ«äººã€‚\n\nâ‘¢ å®¢è§‚äº‹å®å’Œæ™®éçœŸç†ã€‚\n\nä¾‹ï¼šThe earth moves the sun.\n\nåœ°çƒç»•ç€å¤ªé˜³è½¬ã€‚\n\nâ‘£ è¡¨ç¤ºä¸€ä¸ªæŒ‰è§„å®šã€è®¡åˆ’æˆ–å®‰æ’è¦å‘ç”Ÿçš„åŠ¨ä½œã€‚ï¼ˆå¸¸ç”¨äºåˆ—è½¦ã€å®¢è½¦ã€é£æœºæˆ–è½®èˆ¹æ—¶åˆ»è¡¨ï¼‰\n\nä¾‹ï¼šThe next train leaves at 3 o'clock this afternoon.  \nä¸‹ä¸€è¶Ÿç«è½¦ä»Šå¤©ä¸‹åˆ3ç‚¹å¼€è½¦ã€‚\n\nâ‘¤ ä¸»å°†ä»ç°ï¼šåœ¨æ—¶é—´ã€æ¡ä»¶å’Œè®©æ­¥çŠ¶è¯­ä»å¥ä¸­ç»å¸¸ç”¨ä¸€èˆ¬ç°åœ¨è¡¨ç¤ºå°†çš„æ¥äº‹æƒ…ã€‚\n\nä¾‹ï¼šIf it rains tomorrow, we will stay at home.\n\nå¦‚æœæ˜å¤©ä¸‹é›¨ï¼Œæˆ‘ä»¬ä¼šå¾…åœ¨å®¶é‡Œã€‚\n"},{"title":"æ±‡ç¼–è¯­è¨€DEBUGå‘½ä»¤","url":"/2022/10/28/æ±‡ç¼–è¯­è¨€debugå‘½ä»¤/","content":"\n## Rå‘½ä»¤\n\nä½œç”¨ï¼šè§‚çœ‹å’Œä¿®æ”¹å¯„å­˜å™¨çš„å€¼ã€‚åé¢è·Ÿé€šç”¨å¯„å­˜å™¨å¯ä»¥ä¿®æ”¹å¯„å­˜å™¨çš„å€¼ï¼ˆax,bx,cx,dx)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image.png)\n\n## Hå‘½ä»¤\n\nHå‘½ä»¤ä½œç”¨ï¼šè®¡ç®—ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°çš„å’Œä¸å·®ã€‚ç¬¬ä¸€ä¸ªå€¼ä¸ºå’Œï¼Œç¬¬äºŒä¸ªå€¼ä¸ºå·®\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-1.png)\n\n## Då‘½ä»¤\n\nDå‘½ä»¤ä½œç”¨ï¼šæ˜¾ç¤ºå†…å­˜åŒºåŸŸçš„å†…å®¹ã€‚åé¢è·Ÿå†…å­˜åœ°å€å¯ä»¥æŸ¥çœ‹æŒ‡å®šå†…å­˜å128å­—èŠ‚ã€‚\n\nè¿˜å¯ä»¥d \\[èµ·å§‹ä½ç½®\\] \\[ç»“æŸä½ç½®\\]ã€‚æŒ‡å®šåŒºé—´\n\nè¿˜å¯ä»¥ï¼šd \\[èµ·å§‹ä½ç½®\\] \\[Lé•¿åº¦\\]ï¼Œé•¿åº¦ä»¥Lå‚æ•°ä¸ºæ ‡è¯†ã€‚DEBUGä»èµ·å§‹ä½ç½®å¼€å§‹æ˜¾ç¤ºæŒ‡å®šé•¿åº¦çš„å†…å®¹ã€‚åœ¨æç¤ºç¬¦â€œ-â€ä¸‹æ‰§è¡Œå‘½ä»¤d ds:100 L10ã€‚è§‚çœ‹å‘½ä»¤æ‰§è¡Œç»“æœã€‚\n\nï¼ˆ2000ï¼š0 çš„æ„æ€æ˜¯2000æ®µï¼Œåç§»ä¸º0ï¼Œå¯¹åº”å¯„å­˜å™¨csï¼Œipï¼‰\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-2.png)\n\n## Eå‘½ä»¤\n\nEå‘½ä»¤ä½œç”¨ï¼šæ”¹å˜å†…å­˜å•ä½çš„å†…å®¹ã€‚  \nEå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼šE \\[èµ·å§‹ä½ç½®\\]ã€‚\n\nDEBUGé¦–å…ˆæ˜¾ç¤º\\[1000:100\\]çš„å†…å®¹01.ï¼Œè¿™æ—¶å¯ä»¥ä¿®æ”¹è¯¥å­—èŠ‚çš„å€¼ã€‚å¦‚æœè¿˜è¦ä¿®æ”¹åç»­çš„å†…å®¹ï¼Œå¯ä»¥æŒ‰ç©ºæ ¼é”®ç»§ç»­ã€‚å½“è¦è·³è¿‡æŸä¸ªå­—èŠ‚æ—¶ï¼Œå¯ä»¥æŒ‰è¿ç»­çš„ä¸¤ä¸ªç©ºæ ¼è·³åˆ°åä¸€ä¸ªå­—èŠ‚å»ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-3.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-4.png)\n\n## Få‘½ä»¤\n\nFå‘½ä»¤ä½œç”¨ï¼šä½¿ç”¨æŒ‡å®šçš„å€¼å¡«å……æŒ‡å®šå†…å­˜åŒºåŸŸä¸­çš„åœ°å€ã€‚  \nFå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼šF \\[èŒƒå›´\\] \\[å¡«å……åˆ—è¡¨\\]ã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šF 1AF5:100 L20 1 2 3 4 5ã€‚æ‰§è¡Œå‘½ä»¤D 1AF5:100è§‚çœ‹å‘½ä»¤æ‰§è¡Œç»“æœã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-5.png)\n\nè¯´æ˜ï¼šè¯¥å‘½ä»¤æ˜¯ç”¨å­—èŠ‚åºåˆ—01ã€02ã€03ã€04ã€05è½®æµå¡«å……ä»1AF5:100å¼€å§‹é•¿åº¦ä¸º20Hçš„å†…å­˜åŒºåŸŸã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šF 1AF5:100 13F 41 42 43 44ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-6.png)\n\nè¯´æ˜ï¼šè¯¥å‘½ä»¤æ˜¯ç”¨å­—èŠ‚åºåˆ—41ã€42ã€43ã€44è½®æµå¡«å……ä»1AF5:100å¼€å§‹ä¸€ç›´åˆ°1AF5:13Fçš„å†…å­˜åŒºåŸŸã€‚\n\n## Må‘½ä»¤\n\nMå‘½ä»¤ä½œç”¨ï¼šå°†æŒ‡å®šå†…å­˜åŒºåŸŸçš„æ•°æ®å¤åˆ¶åˆ°æŒ‡å®šçš„åœ°å€å»ã€‚  \nMå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼šM \\[èŒƒå›´\\] \\[æŒ‡å®šåœ°å€\\]ã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šM 1AF5:100 13F 1AF5:140ã€‚æ‰§è¡Œå‘½ä»¤D 1AF5:100è§‚çœ‹å‘½ä»¤æ‰§è¡Œç»“æœã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-7.png)\n\n## Cå‘½ä»¤\n\nCå‘½ä»¤ä½œç”¨ï¼šå°†ä¸¤å—å†…å­˜çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒã€‚  \nCå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼šC \\[èŒƒå›´\\] \\[æŒ‡å®šåœ°å€\\]ï¼Œæ„æ€å°±æ˜¯å°†æŒ‡å®šèŒƒå›´çš„å†…å­˜åŒºåŸŸä¸ä»æŒ‡å®šåœ°å€å¼€å§‹çš„ç›¸åŒé•¿åº¦çš„å†…å­˜åŒºåŸŸé€ä¸ªå­—èŠ‚è¿›è¡Œæ¯”è¾ƒï¼Œåˆ—å‡ºä¸åŒçš„å†…å®¹ã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šC 1AF5:100 13F 1AF5:140ã€‚ç”±äºä¸¤å—å†…å®¹å®Œå…¨ç›¸åŒï¼Œæ‰€ä»¥å‘½ä»¤æ‰§è¡Œåæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šC 1AF5:100 107 1AF5:180ï¼Œæ¯”è¾ƒçš„åŒºåŸŸé•¿åº¦ä¸º8ä¸ªå­—èŠ‚ã€‚å‘½ä»¤æ‰§è¡Œååˆ—å‡ºæ¯”è¾ƒç»“æœä¸åŒçš„å„ä¸ªå­—èŠ‚ã€‚  \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-8.png)\n\n## Så‘½ä»¤\n\nSå‘½ä»¤ä½œç”¨ï¼šåœ¨æŒ‡å®šçš„å†…å­˜åŒºåŸŸä¸­æœç´¢æŒ‡å®šçš„ä¸²ã€‚  \nSå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼šS \\[èŒƒå›´\\] \\[æŒ‡å®šä¸²\\]ã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šD 1AF5:100 11Fã€‚æ˜¾ç¤ºè¯¥åŒºåŸŸçš„å†…å­˜å€¼ã€‚  \nåœ¨æç¤ºç¬¦â€œ-â€ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼šS 1AF5:100 11F 41 42 43 44ã€‚æœç´¢è¯¥åŒºåŸŸæ˜¯å¦å­˜åœ¨å­—èŠ‚ä¸²41 42 43 44ï¼Œå¹¶å°†æœç´¢ç»“æœä¸€ä¸€åˆ—å‡ºã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-9.png)\n\n## Aå‘½ä»¤\n\nAå‘½ä»¤ä½œç”¨ï¼šè¾“å…¥æ±‡ç¼–æŒ‡ä»¤ã€‚  \nä»¥ä¸‹çš„ç¨‹åºè¦åœ¨å±å¹•ä¸Šæ˜¾ç¤ºâ€œABCDâ€å››ä¸ªå­—ç¬¦ã€‚  \né¦–å…ˆç”¨Eå‘½ä»¤å°†â€œABCDâ€ å›› ä¸ª å­— ç¬¦ é¢„ å…ˆ æ”¾ åœ¨ å†… å­˜ C S : 200 å¤„ ï¼Œ ç„¶ å æ‰§ è¡Œ A 100 å‘½ ä»¤ è¾“ å…¥ æ±‡ ç¼– ç¨‹ åº ä»£ ç  ï¼š M O V A X , C S M O V D S , A X M O V D X , 200 M O V A H , 9 I N T 21 I N T 20 ï¼ˆ è¯´ æ˜ ï¼š å‰ ä¸¤ è¡Œ æ±‡ ç¼– æŒ‡ ä»¤ ç”¨ äº å°† æ®µ å¯„ å­˜ å™¨ C S çš„ å€¼ èµ‹ ç»™ æ®µ å¯„ å­˜ å™¨ D S ã€‚ ç¬¬ ä¸‰ åˆ° ç¬¬ äº” è¡Œ æ±‡ ç¼– ä»£ ç  çš„ ä½œ ç”¨ æ˜¯ æ˜¾ ç¤º ä»¥ â€œ â€å››ä¸ªå­—ç¬¦é¢„å…ˆæ”¾åœ¨å†…å­˜CS:200å¤„ï¼Œç„¶åæ‰§è¡ŒA100å‘½ä»¤è¾“å…¥æ±‡ç¼–ç¨‹åºä»£ç ï¼š MOV AX,CS MOV DS,AX MOV DX,200 MOV AH,9 INT 21 INT 20 ï¼ˆè¯´æ˜ï¼šå‰ä¸¤è¡Œæ±‡ç¼–æŒ‡ä»¤ç”¨äºå°†æ®µå¯„å­˜å™¨CSçš„å€¼èµ‹ç»™æ®µå¯„å­˜å™¨DSã€‚ç¬¬ä¸‰åˆ°ç¬¬äº”è¡Œæ±‡ç¼–ä»£ç çš„ä½œç”¨æ˜¯æ˜¾ç¤ºä»¥â€œâ€å››ä¸ªå­—ç¬¦é¢„å…ˆæ”¾åœ¨å†…å­˜CS:200å¤„ï¼Œç„¶åæ‰§è¡ŒA100å‘½ä»¤è¾“å…¥æ±‡ç¼–ç¨‹åºä»£ç ï¼šMOVAX,CSMOVDS,AXMOVDX,200MOVAH,9INT21INT20ï¼ˆè¯´æ˜ï¼šå‰ä¸¤è¡Œæ±‡ç¼–æŒ‡ä»¤ç”¨äºå°†æ®µå¯„å­˜å™¨CSçš„å€¼èµ‹ç»™æ®µå¯„å­˜å™¨DSã€‚ç¬¬ä¸‰åˆ°ç¬¬äº”è¡Œæ±‡ç¼–ä»£ç çš„ä½œç”¨æ˜¯æ˜¾ç¤ºä»¥â€œâ€ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²ã€‚æœ€åä¸€è¡Œç”¨äºç»“æŸç¨‹åºã€‚ï¼‰  \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-10.png)\n\n## Gå‘½ä»¤\n\nGå‘½ä»¤ä½œç”¨ï¼šæ‰§è¡Œæ±‡ç¼–æŒ‡ä»¤ã€‚  \nGå‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼šG \\[=èµ·å§‹åœ°å€\\] \\[æ–­ç‚¹åœ°å€\\]ï¼Œæ„æ€æ˜¯ä»èµ·å§‹åœ°å€å¼€å§‹æ‰§è¡Œåˆ°æ–­ç‚¹åœ°å€ã€‚å¦‚æœä¸è®¾ç½®æ–­ç‚¹ï¼Œåˆ™ç¨‹åºä¸€ç›´è¿è¡Œåˆ°ä¸­æ­¢æŒ‡ä»¤æ‰åœæ­¢ã€‚  \nåœ¨è®¾ç½®å®Œç¤ºä¾‹ä¹çš„çš„å†…å­˜æ•°æ®å¹¶ä¸”è¾“å…¥å®Œç¤ºä¾‹ä¹çš„ç¨‹åºåè¿è¡Œè¿™äº›æ±‡ç¼–ä»£ç ã€‚åœ¨DEBUGä¸­æ‰§è¡Œå‘½ä»¤G=100ï¼Œè§‚çœ‹è¿è¡Œç»“æœã€‚  \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-11.png)\n\næ±‡ç¼–ç¨‹åºè¿è¡Œååœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‡ºâ€œABCDâ€å››ä¸ªå­—ç¬¦ã€‚  \næ¥ä¸‹æ¥åœ¨DEBUGä¸­æ‰§è¡ŒG=100 10Bï¼Œæ„æ€æ˜¯ä»åœ°å€CSï¼š100å¼€å§‹ï¼Œä¸€ç›´è¿è¡Œåˆ°CSï¼š10Båœæ­¢ã€‚è§‚çœ‹è¿è¡Œç»“æœã€‚  \nå‘½ä»¤æ‰§è¡Œåï¼Œä¸ä½†æ˜¾ç¤ºå‡ºå­—ç¬¦ä¸²â€œABCDâ€ï¼Œè€Œä¸”åˆ—å‡ºå½“å‰å¯„å­˜å™¨å’Œæ ‡å¿—ä½çš„å€¼ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-12.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-13.png)\n\ngå‘½ä»¤åœ¨loopä¸­çš„ä½¿ç”¨ï¼š  \nä½¿ç”¨loopå¾ªç¯æ—¶ï¼Œå¦‚æœè¦è·³å‡ºå¾ªç¯æ‰§è¡Œåé¢çš„ä»£ç ï¼Œå¯ä»¥å…ˆç”¨uå‘½ä»¤æŸ¥çœ‹ä»£ç çš„åç§»åœ°å€ï¼Œåœ¨ç”¨gå‘½ä»¤è·³è½¬åˆ°æ­¤åç§»åˆ°æ­¤ä»£ç å¤„ï¼Œå¦‚ä¸‹ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-14.png)\n\nç”¨uå‘½ä»¤å¯ä»¥çœ‹åˆ°å¾ªç¯çš„å‘½ä»¤ä½äº0b40:000bï¼Œæ‰€ä»¥è¦è·³å‡ºå¾ªç¯å°±ç”¨ g 000b å³å¯ã€‚\n\n## Uå‘½ä»¤\n\nUå‘½ä»¤ä½œç”¨ï¼šå¯¹æœºå™¨ä»£ç åæ±‡ç¼–æ˜¾ç¤ºã€‚  \nUå‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼šU \\[èŒƒå›´\\]ã€‚å¦‚æœèŒƒå›´å‚æ•°åªè¾“å…¥äº†èµ·å§‹åœ°å€ï¼Œåˆ™åªå¯¹20Hä¸ªå­—èŠ‚çš„æœºå™¨ä»£ç åæ±‡ç¼–ã€‚æ‰§è¡Œå‘½ä»¤U100ï¼Œè§‚çœ‹åæ±‡ç¼–ç»“æœ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-15.png)\n\næ‰§è¡Œå‘½ä»¤U100 10Bï¼Œè§‚çœ‹åæ±‡ç¼–ç»“æœã€‚è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯å¯¹ä»100åˆ°10Bçš„æœºå™¨ä»£ç è¿›è¡Œåæ±‡ç¼–ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-16.png)\n\n## Nå‘½ä»¤\n\nNå‘½ä»¤ä½œç”¨ï¼šè®¾ç½®æ–‡ä»¶åï¼Œä¸ºå°†åˆšæ‰ç¼–å†™çš„æ±‡ç¼–ç¨‹åºå­˜ç›˜åšå‡†å¤‡ã€‚  \nä»¥ä¸‹çš„DEBUGå‘½ä»¤åºåˆ—ä½œç”¨å°†åˆšæ‰çš„æ±‡ç¼–ç¨‹åºå­˜ä¸ºç£ç›˜çš„COMå¯æ‰§è¡Œç¨‹åºã€‚  \nD200 20F  \nU100 10C  \nN E:\\\\FIRST.COM  \nRCX  \n:110  \nW  \nç¬¬ä¸€å’Œç¬¬äºŒæ¡å‘½ä»¤çš„ä½œç”¨æ˜¯æ£€æŸ¥ä¸€ä¸‹åˆšæ‰ç¼–å†™çš„æ±‡ç¼–æŒ‡ä»¤ã€‚ç¬¬ä¸‰æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯è®¾ç½®å­˜ç›˜æ–‡ä»¶åä¸ºE:\\\\FIRST.COMï¼Œç¬¬å››æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯è®¾ç½®å­˜ç›˜æ–‡ä»¶å¤§å°ä¸º110Hä¸ªå­—èŠ‚ã€‚æœ€åä¸€æ¡å‘½ä»¤æ˜¯å°†æ–‡ä»¶å­˜ç›˜ã€‚  \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-17.png)\n\n## Wå‘½ä»¤\n\nWå‘½ä»¤ä½œç”¨ï¼šå°†æ–‡ä»¶æˆ–è€…ç‰¹å®šæ‰‡åŒºå†™å…¥ç£ç›˜ã€‚  \nåœ¨ç¤ºä¾‹â€œNå‘½ä»¤çš„ä½¿ç”¨â€ä¸­å·²ç»å®éªŒäº†å¦‚ä½•ä½¿ç”¨Wå‘½ä»¤å°†æ–‡ä»¶å­˜ç›˜ã€‚  \nåœ¨æ²¡æœ‰å¾ˆå¥½åœ°æŒæ¡æ±‡ç¼–è¯­è¨€å’Œç£ç›˜æ–‡ä»¶ç³»ç»Ÿå‰ï¼Œæš‚æ—¶ä¸è¦ä½¿ç”¨Wå‘½ä»¤å†™ç£ç›˜æ‰‡åŒºï¼Œå¦åˆ™å¾ˆå®¹æ˜“æŸåç£ç›˜æ–‡ä»¶ï¼Œç”šè‡³ç ´åæ•´ä¸ªç£ç›˜çš„æ–‡ä»¶ç³»ç»Ÿã€‚\n\n## Lå‘½ä»¤\n\nLå‘½ä»¤ä½œç”¨ï¼šä»ç£ç›˜ä¸­å°†æ–‡ä»¶æˆ–æ‰‡åŒºå†…å®¹è¯»å…¥å†…å­˜ã€‚  \nå°†æ–‡ä»¶è°ƒå…¥å†…å­˜å¿…é¡»å…ˆç”¨DEBUGçš„Nå‘½ä»¤è®¾å®šæ–‡ä»¶åã€‚ä»¥ä¸‹ä¾‹å­æ˜¯å°†E:\\\\FIRST.COMè¯»å…¥å†…å®¹ã€‚  \nN FIRST.COM  \nL  \nè§‚çœ‹è°ƒå…¥ç¨‹åºçš„æ±‡ç¼–ä»£ç å¯ä»¥ä½¿ç”¨DEBUGçš„Uå‘½ä»¤ï¼Œç”¨U100è§‚çœ‹è°ƒå…¥çš„COMæ–‡ä»¶ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-18.png)\n\nè¯»å–ç£ç›˜æ‰‡åŒºçš„æ–¹å¼æ˜¯ï¼šL \\[å†…å­˜åœ°å€\\] \\[ç£ç›˜é©±åŠ¨å™¨å·\\] \\[èµ·å§‹æ‰‡åŒº\\] \\[æ‰‡åŒºæ•°\\]ã€‚â€œå†…å­˜åœ°å€â€æŒ‡å®šè¦åœ¨å…¶ä¸­åŠ è½½æ–‡ä»¶æˆ–æ‰‡åŒºå†…å®¹çš„å†…å­˜ä½ç½®ï¼Œå¦‚æœä¸æŒ‡å®šâ€œå†…å­˜åœ°å€â€çš„è¯ï¼ŒDEBUGå°†ä½¿ç”¨CSå¯„å­˜å™¨ä¸­çš„å½“å‰åœ°å€ã€‚â€œç£ç›˜é©±åŠ¨å™¨å·â€æŒ‡å®šåŒ…å«è¯»å–æŒ‡å®šæ‰‡åŒºçš„ç£ç›˜çš„é©±åŠ¨å™¨ï¼Œè¯¥å€¼æ˜¯æ•°å€¼å‹ï¼š0=Aï¼Œ1=Bï¼Œ2=Cç­‰ã€‚â€œèµ·å§‹æ‰‡åŒºâ€æŒ‡å®šè¦åŠ è½½å…¶å†…å®¹çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºçš„åå…­è¿›åˆ¶æ•°ã€‚â€œæ‰‡åŒºæ•°â€æŒ‡å®šè¦åŠ è½½å…¶å†…å®¹çš„è¿ç»­æ‰‡åŒºçš„åå…­è¿›åˆ¶æ•°ã€‚  \nåªæœ‰è¦åŠ è½½ç‰¹å®šæ‰‡åŒºçš„å†…å®¹è€Œä¸æ˜¯åŠ è½½æ–‡ä»¶æ—¶ï¼Œæ‰èƒ½ä½¿ç”¨\\[ç£ç›˜é©±åŠ¨å™¨å·\\] \\[èµ·å§‹æ‰‡åŒº\\] \\[æ‰‡åŒºæ•°\\]å‚æ•°ã€‚  \nä¾‹å¦‚ï¼šè¦å°†Cç›˜ç¬¬ä¸€æ‰‡åŒºè¯»å–åˆ°å†…å­˜DS:300çš„ä½ç½®ï¼Œç›¸åº”çš„DEBUGå‘½ä»¤ä¸ºL DS:300 2 1 1ã€‚ä½†æ˜¯ç”±äºWindowsæ“ä½œç³»ç»Ÿå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿æŠ¤ï¼Œè¿™æ¡å‘½ä»¤å¯èƒ½ä¼šè¢«æ“ä½œç³»ç»Ÿç¦æ­¢è¿è¡Œã€‚\n\n## Tå‘½ä»¤\n\nTå‘½ä»¤ä½œç”¨ï¼šæ‰§è¡Œæ±‡ç¼–ç¨‹åºï¼Œå•æ­¥è·Ÿè¸ªã€‚  \nTå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼æ˜¯T \\[=åœ°å€\\] \\[æŒ‡ä»¤æ•°\\]ã€‚å¦‚æœå¿½ç•¥â€œåœ°å€â€çš„è¯ï¼ŒTå‘½ä»¤ä»CS:IPå¤„å¼€å§‹è¿è¡Œã€‚â€œæŒ‡ä»¤æ•°â€æ˜¯è¦å•æ­¥æ‰§è¡Œçš„æŒ‡ä»¤çš„æ•°é‡ã€‚  \nä»¥ä¸‹ç¤ºä¾‹å¯¹E:\\\\FIRST.COMè¿›è¡Œå•æ­¥è·Ÿè¸ªã€‚  \nN E:\\\\FIRST.COM  \nL  \nU100 10B  \nR  \nT=100  \nT\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-19.png)\n\nç¬¬ä¸€ã€äºŒæ¡å‘½ä»¤æ˜¯è£…å…¥æ–‡ä»¶ï¼Œç¬¬ä¸‰æ¡å‘½ä»¤æ˜¯åˆ—å‡ºç¨‹åºåæ±‡ç¼–ä»£ç ï¼Œç¬¬å››æ¡å‘½ä»¤æ˜¯æ˜¾ç¤ºå½“å‰å¯„å­˜å™¨å€¼ï¼Œç¬¬äº”æ¡å‘½ä»¤æ˜¯ä»CS:100å¤„å¼€å§‹å•æ­¥è·Ÿè¸ªï¼Œç¬¬å…­æ¡å‘½ä»¤æ˜¯ç»§ç»­è·Ÿè¸ªåç»­çš„æŒ‡ä»¤ã€‚\n\n## På‘½ä»¤\n\nPå‘½ä»¤ä½œç”¨ï¼šæ‰§è¡Œæ±‡ç¼–ç¨‹åºï¼Œå•æ­¥è·Ÿè¸ªã€‚ä¸Tå‘½ä»¤ä¸åŒçš„æ˜¯ï¼šPå‘½ä»¤ä¸ä¼šè·Ÿè¸ªè¿›å…¥å­ç¨‹åºæˆ–è½¯ä¸­æ–­ã€‚  \nPå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸Tå‘½ä»¤çš„ä½¿ç”¨æ–¹å¼å®Œå…¨ç›¸åŒã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wordpress/image-20.png)\n\npå‘½ä»¤è¿˜å¯ä»¥ç”¨äºç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚\n\n## Iå‘½ä»¤çš„ä½¿ç”¨\n\nIå‘½ä»¤ä½œç”¨ï¼šä»è®¡ç®—æœºè¾“å…¥ç«¯å£è¯»å–æ•°æ®å¹¶æ˜¾ç¤ºã€‚  \nIå‘½ä»¤çš„ç”¨æ³•æ˜¯I \\[ç«¯å£åœ°å€\\]ã€‚ä¾‹å¦‚ä»3F8å·ç«¯å£è¯»å–æ•°æ®å¹¶æ˜¾ç¤ºçš„å‘½ä»¤ä¸ºï¼šI 3F8ã€‚è¿™é‡Œä¸å¯¹è¯¥å‘½ä»¤åšè§£é‡Šã€‚\n\n## Oå‘½ä»¤çš„ä½¿ç”¨\n\nOå‘½ä»¤ä½œç”¨ï¼šå‘è®¡ç®—æœºè¾“å‡ºç«¯å£é€å‡ºæ•°æ®ã€‚  \nOå‘½ä»¤çš„ç”¨æ³•æ˜¯O \\[ç«¯å£åœ°å€\\] \\[å­—èŠ‚å€¼\\]ã€‚ä¾‹å¦‚å‘278å·ç«¯å£å‘å‡ºæ•°æ®20Hçš„å‘½ä»¤ä¸ºï¼šI 278 20ã€‚è¿™é‡Œä¸å¯¹è¯¥å‘½ä»¤åšè§£é‡Šã€‚\n\n## Qå‘½ä»¤çš„ä½¿ç”¨\n\nQå‘½ä»¤çš„ä½œç”¨æ˜¯é€€å‡ºDEBUGï¼Œå›åˆ°DOSçŠ¶æ€ã€‚\n","tags":["æ±‡ç¼–"],"categories":["å…¶ä»–"]},{"title":"Ubuntuå¸¸è§é—®é¢˜","url":"/2022/09/07/ubuntuå¸¸è§é—®é¢˜/","content":"\nubuntuç‰ˆæœ¬ 21.10\n\n## 1ã€æ— æ³•æ›´æ–°aptæºï¼ŒæŠ¥ä»¥ä¸‹é”™è¯¯\n\næ— æ³•å®‰å…¨çš„ç”¨è¯¥æºæ›´æ–°ï¼Œæ‰€ä»¥ç¦ç”¨è¯¥æº\n\nåé¢æœ‰ NO\\_PUBKEY \\[è¿™é‡Œå°±æ˜¯å¯†é’¥\\]\n\n> sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654\n> \n> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654å°±æ˜¯ä¸Šé¢å‡ºç°çš„å¯†é’¥\n\nç„¶åç»§ç»­æ‰§è¡Œ\n\n```\nsudo apt-get update   \nsudo apt-get upgrade\n```\n","tags":["ubuntu"],"categories":["è¿ç»´"]},{"title":"TypeScriptå¸¸ç”¨æ€»ç»“","url":"/2022/08/03/typescriptå¸¸ç”¨æ€»ç»“/","content":"\n## 1ã€TypeScriptç®€ä»‹\n\n1. TypeScriptæ˜¯JavaScriptçš„è¶…é›†ã€‚\n\n3. å®ƒå¯¹JSè¿›è¡Œäº†æ‰©å±•ï¼Œå‘JSä¸­å¼•å…¥äº†ç±»å‹çš„æ¦‚å¿µï¼Œå¹¶æ·»åŠ äº†è®¸å¤šæ–°çš„ç‰¹æ€§ã€‚\n\n5. TSä»£ç éœ€è¦é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘ä¸ºJSï¼Œç„¶åå†äº¤ç”±JSè§£æå™¨æ‰§è¡Œã€‚\n\n7. TSå®Œå…¨å…¼å®¹JSï¼Œæ¢è¨€ä¹‹ï¼Œä»»ä½•çš„JSä»£ç éƒ½å¯ä»¥ç›´æ¥å½“æˆJSä½¿ç”¨ã€‚\n\n9. ç›¸è¾ƒäºJSè€Œè¨€ï¼ŒTSæ‹¥æœ‰äº†é™æ€ç±»å‹ï¼Œæ›´åŠ ä¸¥æ ¼çš„è¯­æ³•ï¼Œæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼›TSå¯ä»¥åœ¨ä»£ç æ‰§è¡Œå‰å°±å®Œæˆä»£ç çš„æ£€æŸ¥ï¼Œå‡å°äº†è¿è¡Œæ—¶å¼‚å¸¸çš„å‡ºç°çš„å‡ ç‡ï¼›TSä»£ç å¯ä»¥ç¼–è¯‘ä¸ºä»»æ„ç‰ˆæœ¬çš„JSä»£ç ï¼Œå¯æœ‰æ•ˆè§£å†³ä¸åŒJSè¿è¡Œç¯å¢ƒçš„å…¼å®¹é—®é¢˜ï¼›åŒæ ·çš„åŠŸèƒ½ï¼ŒTSçš„ä»£ç é‡è¦å¤§äºJSï¼Œä½†ç”±äºTSçš„ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå˜é‡ç±»å‹æ›´åŠ æ˜ç¡®ï¼Œåœ¨åæœŸä»£ç çš„ç»´æŠ¤ä¸­TSå´è¿œè¿œèƒœäºJSã€‚\n\n## 2ã€åŸºæœ¬ç±»å‹\n\n| ç±»å‹ | ä¾‹å­ | æè¿° |\n| --- | --- | --- |\n| number | 1, -33, 2.5 | ä»»æ„æ•°å­— |\n| string | 'hi', \"hi\", `hi` | ä»»æ„å­—ç¬¦ä¸² |\n| boolean | trueã€false | å¸ƒå°”å€¼trueæˆ–false |\n| å­—é¢é‡ | å…¶æœ¬èº« | é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼ |\n| any | \\* | ä»»æ„ç±»å‹ |\n| unknown | \\* | ç±»å‹å®‰å…¨çš„any |\n| void | ç©ºå€¼ï¼ˆundefinedï¼‰ | æ²¡æœ‰å€¼ï¼ˆæˆ–undefinedï¼‰ |\n| never | æ²¡æœ‰å€¼ | ä¸èƒ½æ˜¯ä»»ä½•å€¼ |\n| object | {name:'å­™æ‚Ÿç©º'} | ä»»æ„çš„JSå¯¹è±¡ |\n| array | \\[1,2,3\\] | ä»»æ„JSæ•°ç»„ |\n| tuple | \\[4,5\\] | å…ƒç´ ï¼ŒTSæ–°å¢ç±»å‹ï¼Œå›ºå®šé•¿åº¦æ•°ç»„ |\n| enum | enum{A, B} | æšä¸¾ï¼ŒTSä¸­æ–°å¢ç±»å‹ |\n\n### è‡ªåŠ¨ç±»å‹åˆ¤æ–­\n\n- TSæ‹¥æœ‰è‡ªåŠ¨çš„ç±»å‹åˆ¤æ–­æœºåˆ¶\n\n- å½“å¯¹å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼ŒTSç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­å˜é‡çš„ç±»å‹\n\n- æ‰€ä»¥å¦‚æœä½ çš„å˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ—¶åŒæ—¶è¿›è¡Œçš„ï¼Œå¯ä»¥çœç•¥æ‰ç±»å‹å£°æ˜\n\n- ç±»å‹ï¼šç±»å‹ä¾‹å­æè¿°number1, -33, 2.5ä»»æ„æ•°å­—string'hi', \"hi\", `hi`ä»»æ„å­—ç¬¦ä¸²booleantrueã€falseå¸ƒå°”å€¼trueæˆ–falseå­—é¢é‡å…¶æœ¬èº«é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼any\\*ä»»æ„ç±»å‹unknown\\*ç±»å‹å®‰å…¨çš„anyvoidç©ºå€¼ï¼ˆundefinedï¼‰æ²¡æœ‰å€¼ï¼ˆæˆ–undefinedï¼‰neveræ²¡æœ‰å€¼ä¸èƒ½æ˜¯ä»»ä½•å€¼object{name:'å­™æ‚Ÿç©º'}ä»»æ„çš„JSå¯¹è±¡array\\[1,2,3\\]ä»»æ„JSæ•°ç»„tuple\\[4,5\\]å…ƒç´ ï¼ŒTSæ–°å¢ç±»å‹ï¼Œå›ºå®šé•¿åº¦æ•°ç»„enumenum{A, B}æšä¸¾ï¼ŒTSä¸­æ–°å¢ç±»å‹\n\n#### **number**\n\n```\nlet decimal: number = 6;\nlet hex: number = 0xf00d;\nlet binary: number = 0b1010;\nlet octal: number = 0o744;\nlet big: bigint = 100n;\n```\n\n#### boolean\n\n`let isDone: boolean = false;`\n\n#### **string**\n\n```\nlet color: string = \"blue\";\ncolor = 'red';\n\nlet fullName: string = `Bob Bobbington`;\nlet age: number = 37;\nlet sentence: string = `Hello, my name is ${fullName}.\nâ€‹\nI'll be ${age + 1} years old next month.`;\n```\n\n#### **å­—é¢é‡**\n\nä¹Ÿå¯ä»¥ä½¿ç”¨å­—é¢é‡å»æŒ‡å®šå˜é‡çš„ç±»å‹ï¼Œé€šè¿‡å­—é¢é‡å¯ä»¥ç¡®å®šå˜é‡çš„å–å€¼èŒƒå›´\n\n```\nlet color: 'red' | 'blue' | 'black';let num: 1 | 2 | 3 | 4 | 5;\n```\n\n#### **any**\n\n```\nlet d: any = 4;d = 'hello';d = true;\n```\n\n#### **unknown**\n\n`let notSure: unknown = 4;   notSure = 'hello';`\n\n#### **void**\n\n```\nlet unusable: void = undefined;\n```\n\n#### **never**\n\n```\nfunction error(message: string): never {Â throw new Error(message);}\n```\n\n#### **objectï¼ˆæ²¡å•¥ç”¨ï¼‰**\n\n```\nlet obj: object = {};\n```\n\n#### **array**\n\n`let list: number[] = [1, 2, 3];   let list: Array<number> = [1, 2, 3];`\n\n#### **tuple**\n\n```\nlet x: [string, number];\nx = [\"hello\", 10];\n```\n\n#### **enum**\n\n```\nenum Color {Â Red,Â Green,Â Blue,}let c: Color = Color.Green;â€‹enum Color {Â Red = 1,Â Green,Â Blue,}let c: Color = Color.Green;â€‹enum Color {Â Red = 1,Â Green = 2,Â Blue = 4,}let c: Color = Color.Green;\n```\n\nç±»å‹æ–­è¨€\n\næœ‰äº›æƒ…å†µä¸‹ï¼Œå˜é‡çš„ç±»å‹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯TSç¼–è¯‘å™¨å´å¹¶ä¸æ¸…æ¥šï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€æ¥å‘Šè¯‰ç¼–è¯‘å™¨å˜é‡çš„ç±»å‹ï¼Œæ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š\n\nç¬¬ä¸€ç§\n\n```\nlet someValue: unknown = \"this is a string\";let strLength: number = (someValue as string).length;\n```\n\nç¬¬äºŒç§\n\n```\nlet someValue: unknown = \"this is a string\";let strLength: number = (<string>someValue).length;\n```\n\n## 3ã€ç±»ï¼ˆclassï¼‰\n\nè¦æƒ³é¢å‘å¯¹è±¡ï¼Œæ“ä½œå¯¹è±¡ï¼Œé¦–å…ˆä¾¿è¦æ‹¥æœ‰å¯¹è±¡ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•åˆ›å»ºå¯¹è±¡ã€‚è¦åˆ›å»ºå¯¹è±¡ï¼Œå¿…é¡»è¦å…ˆå®šä¹‰ç±»ï¼Œæ‰€è°“çš„ç±»å¯ä»¥ç†è§£ä¸ºå¯¹è±¡çš„æ¨¡å‹ï¼Œç¨‹åºä¸­å¯ä»¥æ ¹æ®ç±»åˆ›å»ºæŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œä¸¾ä¾‹æ¥è¯´ï¼šå¯ä»¥é€šè¿‡Personç±»æ¥åˆ›å»ºäººçš„å¯¹è±¡ï¼Œé€šè¿‡Dogç±»åˆ›å»ºç‹—çš„å¯¹è±¡ï¼Œé€šè¿‡Carç±»æ¥åˆ›å»ºæ±½è½¦çš„å¯¹è±¡ï¼Œä¸åŒçš„ç±»å¯ä»¥ç”¨æ¥åˆ›å»ºä¸åŒçš„å¯¹è±¡ã€‚\n\n### å®šä¹‰ç±»\n\n```\nclass ç±»å {\n\tå±æ€§å: ç±»å‹;\n\t\n\tconstructor(å‚æ•°: ç±»å‹){\n\t\tthis.å±æ€§å = å‚æ•°;\n\t}\n\t\n\tæ–¹æ³•å(){\n\t\t....\n\t}\n\n}\n\n//å®ä¾‹\nclass Person{\n    name: string;\n    age: number;\n\n    constructor(name: string, age: number){\n        this.name = name;\n        this.age = age;\n    }\n\n    sayHello(){\n        console.log(`å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯${this.name}`);\n    }\n}\n\n//ä½¿ç”¨\nconst p = new Person('å­™æ‚Ÿç©º', 18);\np.sayHello();\n```\n","tags":["typescript"],"categories":["javaå…¨æ ˆ"]},{"title":"Vueå‘åç«¯è¯·æ±‚æ•°æ®","url":"/2022/08/01/vueå‘åç«¯è¯·æ±‚æ•°æ®/","content":"\n1ã€åœ¨configæ–‡ä»¶ä¸‹çš„index.jsæ–‡ä»¶çš„proxyTable:{ }ä¸­å†™å…¥\n\n```\n      '/api': {\n        target: 'http://localhost:8088/',//æ­¤å¤„å¯ä»¥æ¢æˆè‡ªå·±éœ€è¦çš„åœ°å€\n        changeOrigin: true,\n        pathRewrite: {\n          '^/api': '/'\n        }\n      }\n```\n\n2ã€åœ¨main.jsä¸­å†™å…¥\n\n```\nVue.prototype.HOST = \"/api\"\n```\n\n3ã€éœ€è¦è°ƒç”¨æ¥å£çš„æ–¹æ³•ï¼šå¦‚loginï¼ˆï¼‰æ–¹æ³•\n\n```\nthis.$axios({\n              url: this.HOST + 'è°ƒç”¨çš„æ¥å£',\n              method: 'æ–¹æ³•ï¼šå¦‚postã€get',\n              headers: {\n             //è¯·æ±‚å¤´ï¼Œå¯ä»¥å°†tokenæ”¾åœ¨è¿™é‡Œ\n                'key':value\n              },\n              params: {\n             //éœ€è¦ä¼ è¿‡å»çš„å‚æ•°\n                'key':value\n              }\n            }).then(res => {\n                //resä¸ºåç«¯ä¼ å›æ¥çš„æ•°æ®\n            })\n```\n","tags":["å‰ç«¯","vue"],"categories":["javaå…¨æ ˆ"]},{"title":"Dockeræ­å»ºå¸¸ç”¨åº”ç”¨","url":"/2022/06/09/dockeræ­å»ºwordpress/","content":"\n### æ›´æ¢æˆ‘çš„é˜¿é‡Œæº\n\n```\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://man823kr.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n### æ•°æ®åº“MYSQLå’Œwordpress\n\n```\ndockerÂ runÂ -dÂ --nameÂ db.wordpress -v /work/mysql:/var/lib/mysql -p 3306:3306Â -eÂ MYSQL_ROOT_PASSWORD=adminÂ mysql:8.0\n```\n\n\\-v /work/mysql:/var/lib/mysql\n\n`run`: å¯åŠ¨ä¸€ä¸ªå®¹å™¨  \n`-d`: å¯åŠ¨çš„å®¹å™¨åœ¨åå°è¿è¡Œ  \n`--name`: ç»™å¯åŠ¨çš„å®¹å™¨èµ·ä¸ªåå­—ï¼Œè¿™é‡Œå«åš db.wordpress  \n`-e MYSQL_ROOT_PASSWORD`: è¿™é‡Œæ˜¯è®¾ç½® MySQL çš„ root å¯†ç   \nmysql`:5.7`: æŒ‡å®š é•œåƒå’Œ ç‰ˆæœ¬\n\nå¯åŠ¨ MySQL å®¹å™¨åå¯æ‰§è¡ŒÂ `docker logs -f db.wordpress`Â æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—ã€‚\n\nä¹‹åï¼Œå¯åŠ¨ä¸€ä¸ª WordPress å®¹å™¨ï¼Œå°† db.wordpress å®¹å™¨è¿æ¥åˆ° WordPress å®¹å™¨å³å¯ï¼š\n\n```\ndockerÂ runÂ -dÂ -pÂ 8080:80Â --nameÂ wordpressÂ --linkÂ db.wordpress:mysqlÂ wordpress\n```\n\n\\-v /work/www/html:/var/www/htm\n\n`-p`: è¿™é‡Œæ˜¯æŒ‡å®š WordPress å®¹å™¨çš„è®¿é—®ç«¯å£ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€Â [http://localhost:8080/](http://localhost:8080/)Â å³å¯é¢„è§ˆ WordPress ç«™ç‚¹  \n`--link`: æ„æ€æ˜¯å°† db.wordpress å®¹å™¨æŒ‚è½½åˆ° mysqlï¼Œè¿™æ · WordPress å°±èƒ½é€šè¿‡ mysql è®¿é—®åˆ° db.wordpress æ•°æ®åº“äº†\n\n### å¯åŠ¨redis\n\n```\ndocker run --restart=always --log-opt max-size=100m --log-opt max-file=2 -p 6379:6379 --name myredis -v /home/redis/myredis/myredis.conf:/etc/redis/redis.conf -v /home/redis/myredis/data:/data -d redis redis-server /etc/redis/redis.conf  --appendonly yes  --requirepass 000415\n```\n\n1. `--restart=always`Â æ€»æ˜¯å¼€æœºå¯åŠ¨\n\n3. `--log`æ˜¯æ—¥å¿—æ–¹é¢çš„\n\n5. `-p 6379:6379`Â å°†6379ç«¯å£æŒ‚è½½å‡ºå»\n\n7. `--name`Â ç»™è¿™ä¸ªå®¹å™¨å–ä¸€ä¸ªåå­—\n\n9. `-v`Â æ•°æ®å·æŒ‚è½½  \n    `- /home/redis/myredis/myredis.conf:/etc/redis/redis.conf`Â è¿™é‡Œæ˜¯å°† liunx è·¯å¾„ä¸‹çš„myredis.conf å’Œredisä¸‹çš„redis.conf æŒ‚è½½åœ¨ä¸€èµ·ã€‚  \n    `- /home/redis/myredis/data:/data`Â è¿™ä¸ªåŒä¸Š\n\n11. `-d redis`Â è¡¨ç¤ºåå°å¯åŠ¨redis\n\n13. `redis-server /etc/redis/redis.conf`Â ä»¥é…ç½®æ–‡ä»¶å¯åŠ¨redisï¼ŒåŠ è½½å®¹å™¨å†…çš„confæ–‡ä»¶ï¼Œæœ€ç»ˆæ‰¾åˆ°çš„æ˜¯æŒ‚è½½çš„ç›®å½•Â `/etc/redis/redis.conf`Â ä¹Ÿ**å°±æ˜¯liunxä¸‹çš„/home/redis/myredis/myredis.conf**\n\n15. **â€“appendonly yes å¼€å¯redis æŒä¹…åŒ–**\n\n17. â€“requirepass 000415 è®¾ç½®å¯†ç \n","tags":["docker"],"categories":["è¿ç»´"]},{"title":"ResultMapåŠåˆ†é¡µ","url":"/2022/06/09/resultmapåŠåˆ†é¡µ/","content":"\n# ResultMap\n\n## æŸ¥è¯¢ä¸ºnullé—®é¢˜\n\n**è¦è§£å†³çš„é—®é¢˜ï¼šå±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´**\n\nç¯å¢ƒï¼šæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå°†ä¹‹å‰çš„é¡¹ç›®æ‹·è´è¿‡æ¥\n\n1ã€æŸ¥çœ‹ä¹‹å‰çš„æ•°æ®åº“çš„å­—æ®µå\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-22.png)\n\n2ã€Javaä¸­çš„å®ä½“ç±»è®¾è®¡\n\n```\npublicÂ classÂ UserÂ {\n\nÂ  Â privateÂ intÂ id; Â //id\nÂ  Â privateÂ StringÂ name; Â Â //å§“å\nÂ  Â privateÂ StringÂ password; Â Â //å¯†ç å’Œæ•°æ®åº“ä¸ä¸€æ ·ï¼\nÂ  Â \nÂ  Â //æ„é€ \nÂ  Â //set/get\nÂ  Â //toString()\n}\n```\n\n3ã€æ¥å£\n\n```\n//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·\nUserÂ selectUserById(intÂ id);\n```\n\n4ã€mapperæ˜ å°„æ–‡ä»¶\n\n```\n<selectÂ id=\"selectUserById\"Â resultType=\"user\">\nÂ  select * from user where id = #{id}\n</select>\n```\n\n5ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ testSelectUserById() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession(); Â //è·å–SqlSessionè¿æ¥\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â UserÂ userÂ =Â mapper.selectUserById(1);\nÂ  Â System.out.println(user);\nÂ  Â session.close();\n}\n```\n\n**ç»“æœ:**\n\n- User{id=1, name='ç‹‚ç¥', password='null'}\n- æŸ¥è¯¢å‡ºæ¥å‘ç° password ä¸ºç©º . è¯´æ˜å‡ºç°äº†é—®é¢˜ï¼\n\n**åˆ†æï¼š**\n\n- select \\* from user where id = #{id} å¯ä»¥çœ‹åšselect Â id,name,pwd Â from user where id = #{id}\n- mybatisä¼šæ ¹æ®è¿™äº›æŸ¥è¯¢çš„åˆ—å(ä¼šå°†åˆ—åè½¬åŒ–ä¸ºå°å†™,æ•°æ®åº“ä¸åŒºåˆ†å¤§å°å†™) , å»å¯¹åº”çš„å®ä½“ç±»ä¸­æŸ¥æ‰¾ç›¸åº”åˆ—åçš„setæ–¹æ³•è®¾å€¼ , ç”±äºæ‰¾ä¸åˆ°setPwd() , æ‰€ä»¥passwordè¿”å›null ; ã€è‡ªåŠ¨æ˜ å°„ã€‘\n\n## è§£å†³æ–¹æ¡ˆ\n\næ–¹æ¡ˆä¸€ï¼šä¸ºåˆ—åæŒ‡å®šåˆ«å , åˆ«åå’Œjavaå®ä½“ç±»çš„å±æ€§åä¸€è‡´ .\n\n```\n<selectÂ id=\"selectUserById\"Â resultType=\"User\">\nÂ  select id , name , pwd as password from user where id = #{id}\n</select>\n```\n\n**æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ç»“æœé›†æ˜ å°„->ResultMap** ã€æ¨èã€‘\n\n```\n<resultMapÂ id=\"UserMap\"Â type=\"User\">\nÂ  Â <!-- idä¸ºä¸»é”® -->\nÂ  Â <idÂ column=\"id\"Â property=\"id\"/>\nÂ  Â <!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å -->\nÂ  Â <resultÂ column=\"name\"Â property=\"name\"/>\nÂ  Â <resultÂ column=\"pwd\"Â property=\"password\"/>\n</resultMap>\n\n<selectÂ id=\"selectUserById\"Â resultMap=\"UserMap\">\nÂ  select id , name , pwd from user where id = #{id}\n</select>\n```\n\n## ResultMap\n\n**è‡ªåŠ¨æ˜ å°„**\n\n- `resultMap` å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚å®ƒå¯ä»¥è®©ä½ ä» 90% çš„ JDBC `ResultSets` æ•°æ®æå–ä»£ç ä¸­è§£æ”¾å‡ºæ¥ã€‚\n- å®é™…ä¸Šï¼Œåœ¨ä¸ºä¸€äº›æ¯”å¦‚è¿æ¥çš„å¤æ‚è¯­å¥ç¼–å†™æ˜ å°„ä»£ç çš„æ—¶å€™ï¼Œä¸€ä»½ `resultMap` èƒ½å¤Ÿä»£æ›¿å®ç°åŒç­‰åŠŸèƒ½çš„é•¿è¾¾æ•°åƒè¡Œçš„ä»£ç ã€‚\n- ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚\n\nä½ å·²ç»è§è¿‡ç®€å•æ˜ å°„è¯­å¥çš„ç¤ºä¾‹äº†ï¼Œä½†å¹¶æ²¡æœ‰æ˜¾å¼æŒ‡å®š `resultMap`ã€‚æ¯”å¦‚ï¼š\n\n```\n<selectÂ id=\"selectUserById\"Â resultType=\"map\">\nselect id , name , pwd\nÂ  from user\nÂ  where id = #{id}\n</select>\n```\n\nä¸Šè¿°è¯­å¥åªæ˜¯ç®€å•åœ°å°†æ‰€æœ‰çš„åˆ—æ˜ å°„åˆ° `HashMap` çš„é”®ä¸Šï¼Œè¿™ç”± `resultType` å±æ€§æŒ‡å®šã€‚è™½ç„¶åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¤Ÿç”¨ï¼Œä½†æ˜¯ HashMap ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ¨¡å‹ã€‚ä½ çš„ç¨‹åºæ›´å¯èƒ½ä¼šä½¿ç”¨ JavaBean æˆ– POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä½œä¸ºæ¨¡å‹ã€‚\n\n`ResultMap` æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬ã€‚\n\n**æ‰‹åŠ¨æ˜ å°„**\n\n1ã€è¿”å›å€¼ç±»å‹ä¸ºresultMap\n\n```\n<selectÂ id=\"selectUserById\"Â resultMap=\"UserMap\">\nÂ  select id , name , pwd from user where id = #{id}\n</select>\n```\n\n2ã€ç¼–å†™resultMapï¼Œå®ç°æ‰‹åŠ¨æ˜ å°„ï¼\n\n```\n<resultMapÂ id=\"UserMap\"Â type=\"User\">\nÂ  Â <!-- idä¸ºä¸»é”® -->\nÂ  Â <idÂ column=\"id\"Â property=\"id\"/>\nÂ  Â <!-- columnæ˜¯æ•°æ®åº“è¡¨çš„åˆ—å , propertyæ˜¯å¯¹åº”å®ä½“ç±»çš„å±æ€§å -->\nÂ  Â <resultÂ column=\"name\"Â property=\"name\"/>\nÂ  Â <resultÂ column=\"pwd\"Â property=\"password\"/>\n</resultMap>\n```\n\nå¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚ä½†æ˜¯è‚¯å®šä¸æ˜¯çš„ï¼Œæ•°æ®åº“ä¸­ï¼Œå­˜åœ¨ä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¹‹åä¼šä½¿ç”¨åˆ°ä¸€äº›é«˜çº§çš„ç»“æœé›†æ˜ å°„ï¼Œassociationï¼Œcollectionè¿™äº›ï¼Œæˆ‘ä»¬å°†åœ¨ä¹‹åè®²è§£ï¼Œä»Šå¤©ä½ ä»¬éœ€è¦æŠŠè¿™äº›çŸ¥è¯†éƒ½æ¶ˆåŒ–æ‰æ‰æ˜¯æœ€é‡è¦çš„ï¼ç†è§£ç»“æœé›†æ˜ å°„çš„è¿™ä¸ªæ¦‚å¿µï¼\n\n# åˆ†é¡µçš„å‡ ç§æ–¹å¼\n\n## æ—¥å¿—å·¥å‚\n\næ€è€ƒï¼šæˆ‘ä»¬åœ¨æµ‹è¯•SQLçš„æ—¶å€™ï¼Œè¦æ˜¯èƒ½å¤Ÿåœ¨æ§åˆ¶å°è¾“å‡º SQL çš„è¯ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½å¤Ÿæœ‰æ›´å¿«çš„æ’é”™æ•ˆç‡ï¼Ÿ\n\nå¦‚æœä¸€ä¸ª æ•°æ®åº“ç›¸å…³çš„æ“ä½œå‡ºç°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¾“å‡ºçš„SQLè¯­å¥å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚\n\nå¯¹äºä»¥å¾€çš„å¼€å‘è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨åˆ°debugæ¨¡å¼æ¥è°ƒèŠ‚ï¼Œè·Ÿè¸ªæˆ‘ä»¬çš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚ä½†æ˜¯ç°åœ¨ä½¿ç”¨Mybatisæ˜¯åŸºäºæ¥å£ï¼Œé…ç½®æ–‡ä»¶çš„æºä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©æ—¥å¿—å·¥å…·æ¥ä½œä¸ºæˆ‘ä»¬å¼€å‘ï¼Œè°ƒèŠ‚ç¨‹åºçš„å·¥å…·ã€‚\n\nMybatiså†…ç½®çš„æ—¥å¿—å·¥å‚æä¾›æ—¥å¿—åŠŸèƒ½ï¼Œå…·ä½“çš„æ—¥å¿—å®ç°æœ‰ä»¥ä¸‹å‡ ç§å·¥å…·ï¼š\n\n- SLF4J\n- Apache Commons Logging\n- Log4j 2\n- Log4j\n- JDK logging\n\nå…·ä½“é€‰æ‹©å“ªä¸ªæ—¥å¿—å®ç°å·¥å…·ç”±MyBatisçš„å†…ç½®æ—¥å¿—å·¥å‚ç¡®å®šã€‚å®ƒä¼šä½¿ç”¨æœ€å…ˆæ‰¾åˆ°çš„ï¼ˆæŒ‰ä¸Šæ–‡åˆ—ä¸¾çš„é¡ºåºæŸ¥æ‰¾ï¼‰ã€‚å¦‚æœä¸€ä¸ªéƒ½æœªæ‰¾åˆ°ï¼Œæ—¥å¿—åŠŸèƒ½å°±ä¼šè¢«ç¦ç”¨ã€‚\n\n**æ ‡å‡†æ—¥å¿—å®ç°**\n\næŒ‡å®š MyBatis åº”è¯¥ä½¿ç”¨å“ªä¸ªæ—¥å¿—è®°å½•å®ç°ã€‚å¦‚æœæ­¤è®¾ç½®ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ç°æ—¥å¿—è®°å½•å®ç°ã€‚\n\n```\n<settings>\nÂ  Â  Â  Â <settingÂ name=\"logImpl\"Â value=\"STDOUT_LOGGING\"/>\n</settings>\n```\n\næµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æœ‰å¤§é‡çš„è¾“å‡ºï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›è¾“å‡ºæ¥åˆ¤æ–­ç¨‹åºåˆ°åº•å“ªé‡Œå‡ºäº†Bug\n\n## Log4j\n\n**ç®€ä»‹ï¼š**\n\n- Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®\n- é€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ï¼šæ§åˆ¶å°ï¼Œæ–‡æœ¬ï¼ŒGUIç»„ä»¶....\n- æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›\n- é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚æœ€ä»¤äººæ„Ÿå…´è¶£çš„å°±æ˜¯ï¼Œè¿™äº›å¯ä»¥é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚\n\n**ä½¿ç”¨æ­¥éª¤ï¼š**\n\n1ã€å¯¼å…¥log4jçš„åŒ…\n\n```\n<dependency>\nÂ  Â <groupId>log4j</groupId>\nÂ  Â <artifactId>log4j</artifactId>\nÂ  Â <version>1.2.17</version>\n</dependency>\n```\n\n2ã€é…ç½®æ–‡ä»¶ç¼–å†™\n\n```\n#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç \nlog4j.rootLogger=DEBUG,console,file\n\n#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®\nlog4j.appender.consoleÂ =Â org.apache.log4j.ConsoleAppender\nlog4j.appender.console.TargetÂ =Â System.out\nlog4j.appender.console.Threshold=DEBUG\nlog4j.appender.console.layoutÂ =Â org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.ConversionPattern=[%c]-%m%n\n\n#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®\nlog4j.appender.fileÂ =Â org.apache.log4j.RollingFileAppender\nlog4j.appender.file.File=./log/kuang.log\nlog4j.appender.file.MaxFileSize=10mb\nlog4j.appender.file.Threshold=DEBUG\nlog4j.appender.file.layout=org.apache.log4j.PatternLayout\nlog4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n\n\n#æ—¥å¿—è¾“å‡ºçº§åˆ«\nlog4j.logger.org.mybatis=DEBUG\nlog4j.logger.java.sql=DEBUG\nlog4j.logger.java.sql.Statement=DEBUG\nlog4j.logger.java.sql.ResultSet=DEBUG\nlog4j.logger.java.sql.PreparedStatement=DEBUG\n```\n\n3ã€settingè®¾ç½®æ—¥å¿—å®ç°\n\n```\n<settings>\nÂ  Â <settingÂ name=\"logImpl\"Â value=\"LOG4J\"/>\n</settings>\n```\n\n4ã€åœ¨ç¨‹åºä¸­ä½¿ç”¨Log4jè¿›è¡Œè¾“å‡ºï¼\n\n```\n//æ³¨æ„å¯¼åŒ…ï¼šorg.apache.log4j.Logger\nstaticÂ LoggerÂ loggerÂ =Â Logger.getLogger(MyTest.class);\n\n@Test\npublicÂ voidÂ selectUser() {\nÂ  Â logger.info(\"infoï¼šè¿›å…¥selectUseræ–¹æ³•\");\nÂ  Â logger.debug(\"debugï¼šè¿›å…¥selectUseræ–¹æ³•\");\nÂ  Â logger.error(\"error: è¿›å…¥selectUseræ–¹æ³•\");\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â List<User>Â usersÂ =Â mapper.selectUser();\nÂ  Â forÂ (UserÂ user:Â users){\nÂ  Â  Â  Â System.out.println(user);\nÂ  }\nÂ  Â session.close();\n}\n```\n\n5ã€æµ‹è¯•ï¼Œçœ‹æ§åˆ¶å°è¾“å‡ºï¼\n\n- ä½¿ç”¨Log4j è¾“å‡ºæ—¥å¿—\n- å¯ä»¥çœ‹åˆ°è¿˜ç”Ÿæˆäº†ä¸€ä¸ªæ—¥å¿—çš„æ–‡ä»¶ ã€éœ€è¦ä¿®æ”¹fileçš„æ—¥å¿—çº§åˆ«ã€‘\n\n## limitå®ç°åˆ†é¡µ\n\n**æ€è€ƒï¼šä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ**\n\nåœ¨å­¦ä¹ mybatisç­‰æŒä¹…å±‚æ¡†æ¶çš„æ—¶å€™ï¼Œä¼šç»å¸¸å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¦‚æœæŸ¥è¯¢å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨åˆ†é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å¤„ç†å°éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ ·å¯¹æ•°æ®åº“å‹åŠ›å°±åœ¨å¯æ§èŒƒå›´å†…ã€‚\n\n**ä½¿ç”¨Limitå®ç°åˆ†é¡µ**\n\n```\n#è¯­æ³•\nSELECTÂ *Â FROMÂ tableÂ LIMITÂ stratIndexï¼ŒpageSize\n\nSELECTÂ *Â FROMÂ tableÂ LIMITÂ 5,10; // æ£€ç´¢è®°å½•è¡ŒÂ 6-15Â Â \n\n#ä¸ºäº†æ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸º -1ï¼šÂ  Â \nSELECTÂ *Â FROMÂ tableÂ LIMITÂ 95,-1; // æ£€ç´¢è®°å½•è¡ŒÂ 96-last. Â \n\n#å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼šÂ  Â \nSELECTÂ *Â FROMÂ tableÂ LIMITÂ 5; //æ£€ç´¢å‰Â 5Â ä¸ªè®°å½•è¡Œ Â \n\n#æ¢å¥è¯è¯´ï¼ŒLIMIT n ç­‰ä»·äºÂ LIMITÂ 0,nã€‚Â \n```\n\n**æ­¥éª¤ï¼š**\n\n1ã€ä¿®æ”¹Mapperæ–‡ä»¶\n\n```\n<selectÂ id=\"selectUser\"Â parameterType=\"map\"Â resultType=\"user\">\nÂ  select * from user limit #{startIndex},#{pageSize}\n</select>\n```\n\n2ã€Mapperæ¥å£ï¼Œå‚æ•°ä¸ºmap\n\n```\n//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·å®ç°åˆ†é¡µ\nList<User>Â selectUser(Map<String,Integer>Â map);\n```\n\n3ã€åœ¨æµ‹è¯•ç±»ä¸­ä¼ å…¥å‚æ•°æµ‹è¯•\n\n- æ¨æ–­ï¼šèµ·å§‹ä½ç½® = Â ï¼ˆå½“å‰é¡µé¢ - 1 ï¼‰ \\* é¡µé¢å¤§å°\n\n```\n\n//åˆ†é¡µæŸ¥è¯¢ , ä¸¤ä¸ªå‚æ•°startIndex , pageSize\n@Test\npublicÂ voidÂ testSelectUser() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\n\nÂ  Â intÂ currentPageÂ =Â 1; Â //ç¬¬å‡ é¡µ\nÂ  Â intÂ pageSizeÂ =Â 2; Â //æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª\nÂ  Â Map<String,Integer>Â mapÂ =Â newÂ HashMap<String,Integer>();\nÂ  Â map.put(\"startIndex\",(currentPage-1)*pageSize);\nÂ  Â map.put(\"pageSize\",pageSize);\n\nÂ  Â List<User>Â usersÂ =Â mapper.selectUser(map);\n\nÂ  Â forÂ (UserÂ user:Â users){\nÂ  Â  Â  Â System.out.println(user);\nÂ  }\n\nÂ  Â session.close();\n}\n```\n\n## RowBoundsåˆ†é¡µ\n\næˆ‘ä»¬é™¤äº†ä½¿ç”¨Limitåœ¨SQLå±‚é¢å®ç°åˆ†é¡µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RowBoundsåœ¨Javaä»£ç å±‚é¢å®ç°åˆ†é¡µï¼Œå½“ç„¶æ­¤ç§æ–¹å¼ä½œä¸ºäº†è§£å³å¯ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•å®ç°çš„ï¼\n\n**æ­¥éª¤ï¼š**\n\n1ã€mapperæ¥å£\n\n```\n//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·RowBoundså®ç°åˆ†é¡µ\nList<User>Â getUserByRowBounds();\n```\n\n2ã€mapperæ–‡ä»¶\n\n```\n<selectÂ id=\"getUserByRowBounds\"Â resultType=\"user\">\nselect * from user\n</select>\n```\n\n3ã€æµ‹è¯•ç±»\n\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨RowBoundsç±»\n\n```\n\n@Test\npublicÂ voidÂ testUserByRowBounds() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\n\nÂ  Â intÂ currentPageÂ =Â 2; Â //ç¬¬å‡ é¡µ\nÂ  Â intÂ pageSizeÂ =Â 2; Â //æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª\nÂ  Â RowBoundsÂ rowBoundsÂ =Â newÂ RowBounds((currentPage-1)*pageSize,pageSize);\n\nÂ  Â //é€šè¿‡session.**æ–¹æ³•è¿›è¡Œä¼ é€’rowBoundsï¼Œ[æ­¤ç§æ–¹å¼ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†]\nÂ  Â List<User>Â usersÂ =Â session.selectList(\"com.kuang.mapper.UserMapper.getUserByRowBounds\",Â null,Â rowBounds);\n\nÂ  Â forÂ (UserÂ user:Â users){\nÂ  Â  Â  Â System.out.println(user);\nÂ  }\nÂ  Â session.close();\n}\n```\n\n## PageHelper\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-23.png)\n\näº†è§£å³å¯ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä½¿ç”¨\n\nå®˜æ–¹æ–‡æ¡£ï¼š[https://pagehelper.github.io/](https://pagehelper.github.io/)\n\n> åœ¨MyBatisPlusä¸­ï¼Œæˆ‘ä»¬ä¹Ÿè®²è§£åˆ°äº†åˆ†é¡µå®ç°ï¼Œæ‰€ä»¥å®ç°æ–¹å¼å¾ˆå¤šï¼Œçœ‹è‡ªå·±çš„ç†è§£å’Œç†Ÿç»ƒç¨‹åº¦è¿›è¡ŒæŒæ¡å³å¯ï¼\n\nä¼šäº†ç®€å•çš„ç»“æœé›†æ˜ å°„ï¼Œåé¢æˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€æ“ä½œ\n","tags":["mybatis"],"categories":["javaå…¨æ ˆ"]},{"title":"CRUDæ“ä½œåŠé…ç½®è§£æ","url":"/2022/06/08/crudæ“ä½œ/","content":"\n## namespace\n\n1. å°†ä¸Šé¢æ¡ˆä¾‹ä¸­çš„UserMapperæ¥å£æ”¹åä¸º UserDaoï¼›\n2. å°†UserMapper.xmlä¸­çš„namespaceæ”¹ä¸ºä¸ºUserDaoçš„è·¯å¾„ .\n3. å†æ¬¡æµ‹è¯•\n\n**ç»“è®ºï¼š**\n\né…ç½®æ–‡ä»¶ä¸­namespaceä¸­çš„åç§°ä¸ºå¯¹åº”Mapperæ¥å£æˆ–è€…Daoæ¥å£çš„å®Œæ•´åŒ…å,å¿…é¡»ä¸€è‡´ï¼\n\n## select\n\n- selectæ ‡ç­¾æ˜¯mybatisä¸­æœ€å¸¸ç”¨çš„æ ‡ç­¾ä¹‹ä¸€\n- selectè¯­å¥æœ‰å¾ˆå¤šå±æ€§å¯ä»¥è¯¦ç»†é…ç½®æ¯ä¸€æ¡SQLè¯­å¥\n    - SQLè¯­å¥è¿”å›å€¼ç±»å‹ã€‚ã€å®Œæ•´çš„ç±»åæˆ–è€…åˆ«åã€‘\n    - ä¼ å…¥SQLè¯­å¥çš„å‚æ•°ç±»å‹ ã€‚ã€ä¸‡èƒ½çš„Mapï¼Œå¯ä»¥å¤šå°è¯•ä½¿ç”¨ã€‘\n    - å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦\n    - æ¥å£ä¸­çš„æ–¹æ³•åä¸æ˜ å°„æ–‡ä»¶ä¸­çš„SQLè¯­å¥ID ä¸€ä¸€å¯¹åº”\n    - id\n    - parameterType\n    - resultType\n\n**éœ€æ±‚ï¼šæ ¹æ®idæŸ¥è¯¢ç”¨æˆ·**\n\n1ã€åœ¨UserMapperä¸­æ·»åŠ å¯¹åº”æ–¹æ³•\n\n```\npublicÂ interfaceÂ UserMapperÂ {\nÂ  Â //æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·\nÂ  Â List<User>Â selectUser();\nÂ  Â //æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·\nÂ  Â UserÂ selectUserById(intÂ id);\n}\n```\n\n2ã€åœ¨UserMapper.xmlä¸­æ·»åŠ Selectè¯­å¥\n\n```\n<selectÂ id=\"selectUserById\"Â resultType=\"com.kuang.pojo.User\">\nselect * from user where id = #{id}\n</select>\n```\n\n3ã€æµ‹è¯•ç±»ä¸­æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ tsetSelectUserById() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession(); Â //è·å–SqlSessionè¿æ¥\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â UserÂ userÂ =Â mapper.selectUserById(1);\nÂ  Â System.out.println(user);\nÂ  Â session.close();\n}\n```\n\n**è¯¾å ‚ç»ƒä¹ **ï¼šæ ¹æ® å¯†ç  å’Œ åå­— æŸ¥è¯¢ç”¨æˆ·\n\næ€è·¯ä¸€ï¼šç›´æ¥åœ¨æ–¹æ³•ä¸­ä¼ é€’å‚æ•°\n\n1ã€åœ¨æ¥å£æ–¹æ³•çš„å‚æ•°å‰åŠ  @Paramå±æ€§\n\n2ã€Sqlè¯­å¥ç¼–å†™çš„æ—¶å€™ï¼Œç›´æ¥å–@Paramä¸­è®¾ç½®çš„å€¼å³å¯ï¼Œä¸éœ€è¦å•ç‹¬è®¾ç½®å‚æ•°ç±»å‹\n\n```\n//é€šè¿‡å¯†ç å’Œåå­—æŸ¥è¯¢ç”¨æˆ·\nUserÂ selectUserByNP(@Param(\"username\")Â StringÂ username,@Param(\"pwd\")Â StringÂ pwd);\n\n/*\nÂ  Â <select id=\"selectUserByNP\" resultType=\"com.kuang.pojo.User\">\nÂ  Â  Â select * from user where name = #{username} and pwd = #{pwd}\nÂ  Â </select>\n*/\n```\n\næ€è·¯äºŒï¼šä½¿ç”¨ä¸‡èƒ½çš„Map\n\n1ã€åœ¨æ¥å£æ–¹æ³•ä¸­ï¼Œå‚æ•°ç›´æ¥ä¼ é€’Mapï¼›\n\n```\nUserÂ selectUserByNP2(Map<String,Object>Â map);\n```\n\n2ã€ç¼–å†™sqlè¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦ä¼ é€’å‚æ•°ç±»å‹ï¼Œå‚æ•°ç±»å‹ä¸ºmap\n\n```\n<selectÂ id=\"selectUserByNP2\"Â parameterType=\"map\"Â resultType=\"com.kuang.pojo.User\">\nselect * from user where name = #{username} and pwd = #{pwd}\n</select>\n```\n\n3ã€åœ¨ä½¿ç”¨æ–¹æ³•çš„æ—¶å€™ï¼ŒMapçš„ key ä¸º sqlä¸­å–çš„å€¼å³å¯ï¼Œæ²¡æœ‰é¡ºåºè¦æ±‚ï¼\n\n```\nMap<String,Â Object>Â mapÂ =Â newÂ HashMap<String,Â Object>();\nmap.put(\"username\",\"å°æ˜\");\nmap.put(\"pwd\",\"123456\");\nUserÂ userÂ =Â mapper.selectUserByNP2(map);\n```\n\næ€»ç»“ï¼šå¦‚æœå‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ç›´æ¥ä½¿ç”¨Mapå®ç°ï¼Œå¦‚æœå‚æ•°æ¯”è¾ƒå°‘ï¼Œç›´æ¥ä¼ é€’å‚æ•°å³å¯\n\n## insert\n\næˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨insertæ ‡ç­¾è¿›è¡Œæ’å…¥æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼\n\n**éœ€æ±‚ï¼šç»™æ•°æ®åº“å¢åŠ ä¸€ä¸ªç”¨æˆ·**\n\n1ã€åœ¨UserMapperæ¥å£ä¸­æ·»åŠ å¯¹åº”çš„æ–¹æ³•\n\n```\n//æ·»åŠ ä¸€ä¸ªç”¨æˆ·\nintÂ addUser(UserÂ user);\n```\n\n2ã€åœ¨UserMapper.xmlä¸­æ·»åŠ insertè¯­å¥\n\n```\n<insertÂ id=\"addUser\"Â parameterType=\"com.kuang.pojo.User\">\nÂ  Â  insert into user (id,name,pwd) values (#{id},#{name},#{pwd})\n</insert>\n```\n\n3ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ testAddUser() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â UserÂ userÂ =Â newÂ User(5,\"ç‹äº”\",\"zxcvbn\");\nÂ  Â intÂ iÂ =Â mapper.addUser(user);\nÂ  Â System.out.println(i);\nÂ  Â session.commit();Â //æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“\nÂ  Â session.close();\n}\n```\n\n**æ³¨æ„ç‚¹ï¼šå¢ã€åˆ ã€æ”¹æ“ä½œéœ€è¦æäº¤äº‹åŠ¡ï¼**\n\n## update\n\næˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨updateæ ‡ç­¾è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼\n\n**éœ€æ±‚ï¼šä¿®æ”¹ç”¨æˆ·çš„ä¿¡æ¯**\n\n1ã€åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•\n\n```\n//ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·\nintÂ updateUser(UserÂ user);\n```\n\n2ã€ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL\n\n```\n<updateÂ id=\"updateUser\"Â parameterType=\"com.kuang.pojo.User\">\nÂ  update user set name=#{name},pwd=#{pwd} where id = #{id}\n</update>\n```\n\n3ã€æµ‹è¯•\n\n```\n\n@Test\npublicÂ voidÂ testUpdateUser() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â UserÂ userÂ =Â mapper.selectUserById(1);\nÂ  Â user.setPwd(\"asdfgh\");\nÂ  Â intÂ iÂ =Â mapper.updateUser(user);\nÂ  Â System.out.println(i);\nÂ  Â session.commit();Â //æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“\nÂ  Â session.close();\n}\n```\n\n## delete\n\næˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨deleteæ ‡ç­¾è¿›è¡Œåˆ é™¤æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼\n\n**éœ€æ±‚ï¼šæ ¹æ®idåˆ é™¤ä¸€ä¸ªç”¨æˆ·**\n\n1ã€åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•\n\n```\n//æ ¹æ®idåˆ é™¤ç”¨æˆ·\nintÂ deleteUser(intÂ id);\n```\n\n2ã€ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL\n\n```\n<deleteÂ id=\"deleteUser\"Â parameterType=\"int\">\nÂ  delete from user where id = #{id}\n</delete>\n```\n\n3ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ testDeleteUser() {\nÂ  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â intÂ iÂ =Â mapper.deleteUser(5);\nÂ  Â System.out.println(i);\nÂ  Â session.commit();Â //æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“\nÂ  Â session.close();\n}\n```\n\n**å°ç»“ï¼š**\n\n- æ‰€æœ‰çš„å¢åˆ æ”¹æ“ä½œéƒ½éœ€è¦æäº¤äº‹åŠ¡ï¼\n- æ¥å£æ‰€æœ‰çš„æ™®é€šå‚æ•°ï¼Œå°½é‡éƒ½å†™ä¸Š@Paramå‚æ•°ï¼Œå°¤å…¶æ˜¯å¤šä¸ªå‚æ•°æ—¶ï¼Œå¿…é¡»å†™ä¸Šï¼\n- æœ‰æ—¶å€™æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mapä¼ é€’å‚æ•°ï¼\n- ä¸ºäº†è§„èŒƒæ“ä½œï¼Œåœ¨SQLçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°½é‡å°†Parameterå‚æ•°å’ŒresultTypeéƒ½å†™ä¸Šï¼\n\n## æ€è€ƒé¢˜\n\nç¬¬1ç§ï¼šåœ¨Javaä»£ç ä¸­æ·»åŠ sqlé€šé…ç¬¦ã€‚\n\n```\nstring wildcardname = â€œ%smi%â€;\nlist<name>Â names = mapper.selectlike(wildcardname);\n\n<selectÂ id=â€selectlikeâ€>\nselect * from foo where bar like #{value}\n</select>\n```\n\nç¬¬2ç§ï¼šåœ¨sqlè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦ï¼Œä¼šå¼•èµ·sqlæ³¨å…¥\n\n```\nstring wildcardname = â€œsmiâ€;\nlist<name>Â names = mapper.selectlike(wildcardname);\n\n<selectÂ id=â€selectlikeâ€>\nÂ  Â  select * from foo where bar like \"%\"#{value}\"%\"\n</select>\n```\n\n# é…ç½®è§£æ\n\n## æ ¸å¿ƒé…ç½®æ–‡ä»¶\n\n- mybatis-config.xml ç³»ç»Ÿæ ¸å¿ƒé…ç½®æ–‡ä»¶\n- MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚\n- èƒ½é…ç½®çš„å†…å®¹å¦‚ä¸‹ï¼š\n\n```\nconfigurationï¼ˆé…ç½®ï¼‰\npropertiesï¼ˆå±æ€§ï¼‰\nsettingsï¼ˆè®¾ç½®ï¼‰\ntypeAliasesï¼ˆç±»å‹åˆ«åï¼‰\ntypeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰\nobjectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰\npluginsï¼ˆæ’ä»¶ï¼‰\nenvironmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰\nenvironmentï¼ˆç¯å¢ƒå˜é‡ï¼‰\ntransactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰\ndataSourceï¼ˆæ•°æ®æºï¼‰\ndatabaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰\nmappersï¼ˆæ˜ å°„å™¨ï¼‰\n<!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ -->\n```\n\næˆ‘ä»¬å¯ä»¥é˜…è¯» mybatis-config.xml ä¸Šé¢çš„dtdçš„å¤´æ–‡ä»¶ï¼\n\n## environmentså…ƒç´ \n\n```\n<environmentsÂ default=\"development\">\nÂ <environmentÂ id=\"development\">\nÂ  Â <transactionManagerÂ type=\"JDBC\">\nÂ  Â  Â <propertyÂ name=\"...\"Â value=\"...\"/>\nÂ  Â </transactionManager>\nÂ  Â <dataSourceÂ type=\"POOLED\">\nÂ  Â  Â <propertyÂ name=\"driver\"Â value=\"${driver}\"/>\nÂ  Â  Â <propertyÂ name=\"url\"Â value=\"${url}\"/>\nÂ  Â  Â <propertyÂ name=\"username\"Â value=\"${username}\"/>\nÂ  Â  Â <propertyÂ name=\"password\"Â value=\"${password}\"/>\nÂ  Â </dataSource>\nÂ </environment>\n</environments>\n```\n\n- é…ç½®MyBatisçš„å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œå°†SQLæ˜ å°„åˆ°å¤šä¸ªä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¿…é¡»æŒ‡å®šå…¶ä¸­ä¸€ä¸ªä¸ºé»˜è®¤è¿è¡Œç¯å¢ƒï¼ˆé€šè¿‡defaultæŒ‡å®šï¼‰\n- å­å…ƒç´ èŠ‚ç‚¹ï¼š**environment**\n    - dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚\n    - æ•°æ®æºæ˜¯å¿…é¡»é…ç½®çš„ã€‚\n    - æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹type=\"\\[UNPOOLED|POOLED|JNDI\\]\"ï¼‰\n    - unpooledï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚\n    - **pooled**ï¼šè¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ , è¿™æ˜¯ä¸€ç§ä½¿å¾—å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„æµè¡Œå¤„ç†æ–¹å¼ã€‚\n    - jndiï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ Spring æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„å¼•ç”¨ã€‚\n    - æ•°æ®æºä¹Ÿæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„å®ç°ï¼Œæ¯”å¦‚dbcpï¼Œc3p0ï¼Œdruidç­‰ç­‰....\n    - è¯¦æƒ…ï¼šç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£\n    - è¿™ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ç±»å‹éƒ½ä¸éœ€è¦è®¾ç½®ä»»ä½•å±æ€§ã€‚\n    - å…·ä½“çš„ä¸€å¥—ç¯å¢ƒï¼Œé€šè¿‡è®¾ç½®idè¿›è¡ŒåŒºåˆ«ï¼Œidä¿è¯å”¯ä¸€ï¼\n    - å­å…ƒç´ èŠ‚ç‚¹ï¼štransactionManager - \\[ äº‹åŠ¡ç®¡ç†å™¨ \\]<!-- è¯­æ³• -->  \n        <transactionManagerÂ type=\"\\[ JDBC | MANAGED \\]\"/>\n    - å­å…ƒç´ èŠ‚ç‚¹ï¼š**æ•°æ®æºï¼ˆdataSourceï¼‰**\n\n## mapperså…ƒç´ \n\n**mappers**\n\n- æ˜ å°„å™¨ : å®šä¹‰æ˜ å°„SQLè¯­å¥æ–‡ä»¶\n- æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå…¶ä»–å…ƒç´ å·²ç»é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ä½†æ˜¯é¦–å…ˆæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚Java åœ¨è‡ªåŠ¨æŸ¥æ‰¾è¿™æ–¹é¢æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ€ä½³çš„æ–¹å¼æ˜¯å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œ æˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ `file:///` çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚æ˜ å°„å™¨æ˜¯MyBatisä¸­æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ï¼Œåœ¨MyBatis 3ä¹‹å‰ï¼Œåªæ”¯æŒxmlæ˜ å°„å™¨ï¼Œå³ï¼šæ‰€æœ‰çš„SQLè¯­å¥éƒ½å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ã€‚è€Œä»MyBatis 3å¼€å§‹ï¼Œè¿˜æ”¯æŒæ¥å£æ˜ å°„å™¨ï¼Œè¿™ç§æ˜ å°„å™¨æ–¹å¼å…è®¸ä»¥Javaä»£ç çš„æ–¹å¼æ³¨è§£å®šä¹‰SQLè¯­å¥ï¼Œéå¸¸ç®€æ´ã€‚\n\n**å¼•å…¥èµ„æºæ–¹å¼**\n\n```\n<!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ -->\n<mappers>\nÂ <mapperÂ resource=\"org/mybatis/builder/PostMapper.xml\"/>\n</mappers>\n```\n\n```\n<!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ -->\n<mappers>\nÂ <mapperÂ url=\"file:///var/mappers/AuthorMapper.xml\"/>\n</mappers>\n```\n\n```\n<!--\nä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å\néœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹\n-->\n<mappers>\nÂ <mapperÂ class=\"org.mybatis.builder.AuthorMapper\"/>\n</mappers>\n```\n\n```\n<!--\nå°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨\nä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹\n-->\n<mappers>\nÂ <packageÂ name=\"org.mybatis.builder\"/>\n</mappers>\n```\n\n**Mapperæ–‡ä»¶**\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\nÂ  Â  Â  Â PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\nÂ  Â  Â  Â \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapperÂ namespace=\"com.kuang.mapper.UserMapper\">\nÂ  Â \n</mapper>\n```\n\n- namespaceä¸­æ–‡æ„æ€ï¼šå‘½åç©ºé—´ï¼Œä½œç”¨å¦‚ä¸‹ï¼š\n  \n    - namespaceçš„å‘½åå¿…é¡»è·ŸæŸä¸ªæ¥å£åŒå\n    - æ¥å£ä¸­çš„æ–¹æ³•ä¸æ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥idåº”è¯¥ä¸€ä¸€å¯¹åº”\n    \n    1. namespaceå’Œå­å…ƒç´ çš„idè”åˆä¿è¯å”¯ä¸€ Â , åŒºåˆ«ä¸åŒçš„mapper\n    2. ç»‘å®šDAOæ¥å£\n    3. namespaceå‘½åè§„åˆ™ : åŒ…å+ç±»å\n\nMyBatis çš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„æ˜ å°„è¯­å¥ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„ XML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis ä¸ºèšç„¦äº SQL è€Œæ„å»ºï¼Œä»¥å°½å¯èƒ½åœ°ä¸ºä½ å‡å°‘éº»çƒ¦ã€‚\n\n## Propertiesä¼˜åŒ–\n\næ•°æ®åº“è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚å…·ä½“çš„å®˜æ–¹æ–‡æ¡£\n\næˆ‘ä»¬æ¥ä¼˜åŒ–æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶\n\nç¬¬ä¸€æ­¥ ; åœ¨èµ„æºç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªdb.properties\n\n```\ndriver=com.mysql.jdbc.Driver\nurl=jdbc:mysql://localhost:3306/mybatis?useSSL=true&useUnicode=true&characterEncoding=utf8\nusername=root\npassword=123456\n```\n\nç¬¬äºŒæ­¥ : å°†æ–‡ä»¶å¯¼å…¥properties é…ç½®æ–‡ä»¶\n\n```\n<configuration>\nÂ  Â <!--å¯¼å…¥propertiesæ–‡ä»¶-->\nÂ  Â <propertiesÂ resource=\"db.properties\"/>\n\nÂ  Â <environmentsÂ default=\"development\">\nÂ  Â  Â  Â <environmentÂ id=\"development\">\nÂ  Â  Â  Â  Â  Â <transactionManagerÂ type=\"JDBC\"/>\nÂ  Â  Â  Â  Â  Â <dataSourceÂ type=\"POOLED\">\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"driver\"Â value=\"${driver}\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"url\"Â value=\"${url}\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"username\"Â value=\"${username}\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"password\"Â value=\"${password}\"/>\nÂ  Â  Â  Â  Â  Â </dataSource>\nÂ  Â  Â  Â </environment>\nÂ  Â </environments>\nÂ  Â <mappers>\nÂ  Â  Â  Â <mapperÂ resource=\"mapper/UserMapper.xml\"/>\nÂ  Â </mappers>\n</configuration>\n```\n\næ›´å¤šæ“ä½œï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼ã€æ¼”ç¤ºå¸¦é¢†å­¦ä¹ ã€‘\n\n- é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é—®é¢˜\n- æ–°ç‰¹æ€§ï¼šä½¿ç”¨å ä½ç¬¦\n\n## typeAliasesä¼˜åŒ–\n\nç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³ï¼Œå­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚\n\n```\n<!--é…ç½®åˆ«å,æ³¨æ„é¡ºåº-->\n<typeAliases>\nÂ  Â <typeAliasÂ type=\"com.kuang.pojo.User\"Â alias=\"User\"/>\n</typeAliases>\n```\n\nå½“è¿™æ ·é…ç½®æ—¶ï¼Œ`User`å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨`com.kuang.pojo.User`çš„åœ°æ–¹ã€‚\n\nä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚:\n\n```\n<typeAliases>\nÂ  Â <packageÂ name=\"com.kuang.pojo\"/>\n</typeAliases>\n```\n\næ¯ä¸€ä¸ªåœ¨åŒ… `com.kuang.pojo` ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚\n\nè‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```\n@Alias(\"user\")\npublicÂ classÂ UserÂ {\nÂ  ...\n}\n```\n\nå»å®˜ç½‘æŸ¥çœ‹ä¸€ä¸‹Mybatisé»˜è®¤çš„ä¸€äº›ç±»å‹åˆ«åï¼\n\n## å…¶ä»–é…ç½®æµè§ˆ\n\n**è®¾ç½®**\n\n- è®¾ç½®ï¼ˆsettingsï¼‰ç›¸å…³ => æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£\n    - æ‡’åŠ è½½\n    - æ—¥å¿—å®ç°\n    - ç¼“å­˜å¼€å¯å…³é—­\n- ä¸€ä¸ªé…ç½®å®Œæ•´çš„ settings å…ƒç´ çš„ç¤ºä¾‹å¦‚\n\n```\n<settings>\n <setting name=\"cacheEnabled\" value=\"true\"/>\n <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n <setting name=\"multipleResultSetsEnabled\" value=\"true\"/>\n <setting name=\"useColumnLabel\" value=\"true\"/>\n <setting name=\"useGeneratedKeys\" value=\"false\"/>\n <setting name=\"autoMappingBehavior\" value=\"PARTIAL\"/>\n <setting name=\"autoMappingUnknownColumnBehavior\" value=\"WARNING\"/>\n <setting name=\"defaultExecutorType\" value=\"SIMPLE\"/>\n <setting name=\"defaultStatementTimeout\" value=\"25\"/>\n <setting name=\"defaultFetchSize\" value=\"100\"/>\n <setting name=\"safeRowBoundsEnabled\" value=\"false\"/>\n <setting name=\"mapUnderscoreToCamelCase\" value=\"false\"/>\n <setting name=\"localCacheScope\" value=\"SESSION\"/>\n <setting name=\"jdbcTypeForNull\" value=\"OTHER\"/>\n <setting name=\"lazyLoadTriggerMethods\" value=\"equals,clone,hashCode,toString\"/>\n</settings>\n```\n\n**ç±»å‹å¤„ç†å™¨**\n\n- æ— è®ºæ˜¯ MyBatis åœ¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿˜æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œ éƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚\n- ä½ å¯ä»¥é‡å†™ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºä½ è‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚ã€äº†è§£å³å¯ã€‘\n\n**å¯¹è±¡å·¥å‚**\n\n- MyBatis æ¯æ¬¡åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼ˆObjectFactoryï¼‰å®ä¾‹æ¥å®Œæˆã€‚\n- é»˜è®¤çš„å¯¹è±¡å·¥å‚éœ€è¦åšçš„ä»…ä»…æ˜¯å®ä¾‹åŒ–ç›®æ ‡ç±»ï¼Œè¦ä¹ˆé€šè¿‡é»˜è®¤æ„é€ æ–¹æ³•ï¼Œè¦ä¹ˆåœ¨å‚æ•°æ˜ å°„å­˜åœ¨çš„æ—¶å€™é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–ã€‚\n- å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚ã€äº†è§£å³å¯ã€‘\n\n## ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ\n\n**ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ**\n\nç†è§£æˆ‘ä»¬ç›®å‰å·²ç»è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚\n\næˆ‘ä»¬å¯ä»¥å…ˆç”»ä¸€ä¸ªæµç¨‹å›¾ï¼Œåˆ†æä¸€ä¸‹Mybatisçš„æ‰§è¡Œè¿‡ç¨‹ï¼\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-20.png)\n\n**ä½œç”¨åŸŸç†è§£**\n\n- SqlSessionFactoryBuilder çš„ä½œç”¨åœ¨äºåˆ›å»º SqlSessionFactoryï¼Œåˆ›å»ºæˆåŠŸåï¼ŒSqlSessionFactoryBuilder å°±å¤±å»äº†ä½œç”¨ï¼Œæ‰€ä»¥å®ƒåªèƒ½å­˜åœ¨äºåˆ›å»º SqlSessionFactory çš„æ–¹æ³•ä¸­ï¼Œè€Œä¸è¦è®©å…¶é•¿æœŸå­˜åœ¨ã€‚å› æ­¤ **SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸ**ï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚\n- SqlSessionFactory å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒçš„ä½œç”¨æ˜¯åˆ›å»º SqlSession æ¥å£å¯¹è±¡ã€‚å› ä¸º MyBatis çš„æœ¬è´¨å°±æ˜¯ Java å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥ SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå­˜åœ¨äºæ•´ä¸ª MyBatis çš„åº”ç”¨ä¹‹ä¸­ï¼Œæ‰€ä»¥ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±è¦é•¿æœŸä¿å­˜å®ƒï¼Œç›´è‡³ä¸å†ä½¿ç”¨ MyBatis åº”ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå°±ç­‰åŒäº MyBatis çš„åº”ç”¨å‘¨æœŸã€‚\n- ç”±äº SqlSessionFactory æ˜¯ä¸€ä¸ªå¯¹æ•°æ®åº“çš„è¿æ¥æ± ï¼Œæ‰€ä»¥å®ƒå æ®ç€æ•°æ®åº“çš„è¿æ¥èµ„æºã€‚å¦‚æœåˆ›å»ºå¤šä¸ª SqlSessionFactoryï¼Œé‚£ä¹ˆå°±å­˜åœ¨å¤šä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œè¿™æ ·ä¸åˆ©äºå¯¹æ•°æ®åº“èµ„æºçš„æ§åˆ¶ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥èµ„æºè¢«æ¶ˆè€—å…‰ï¼Œå‡ºç°ç³»ç»Ÿå®•æœºç­‰æƒ…å†µï¼Œæ‰€ä»¥å°½é‡é¿å…å‘ç”Ÿè¿™æ ·çš„æƒ…å†µã€‚\n- å› æ­¤åœ¨ä¸€èˆ¬çš„åº”ç”¨ä¸­æˆ‘ä»¬å¾€å¾€å¸Œæœ› SqlSessionFactory ä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œè®©å®ƒåœ¨åº”ç”¨ä¸­è¢«å…±äº«ã€‚æ‰€ä»¥è¯´ **SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚**\n- å¦‚æœè¯´ SqlSessionFactory ç›¸å½“äºæ•°æ®åº“è¿æ¥æ± ï¼Œé‚£ä¹ˆ SqlSession å°±ç›¸å½“äºä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆConnection å¯¹è±¡ï¼‰ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ‰§è¡Œå¤šæ¡ SQLï¼Œç„¶åé€šè¿‡å®ƒçš„ commitã€rollback ç­‰æ–¹æ³•ï¼Œæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚æ‰€ä»¥å®ƒåº”è¯¥å­˜æ´»åœ¨ä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ä¸­ï¼Œå¤„ç†å®Œæ•´ä¸ªè¯·æ±‚åï¼Œåº”è¯¥å…³é—­è¿™æ¡è¿æ¥ï¼Œè®©å®ƒå½’è¿˜ç»™ SqlSessionFactoryï¼Œå¦åˆ™æ•°æ®åº“èµ„æºå°±å¾ˆå¿«è¢«è€—è´¹ç²¾å…‰ï¼Œç³»ç»Ÿå°±ä¼šç˜«ç—ªï¼Œæ‰€ä»¥ç”¨ try...catch...finally... è¯­å¥æ¥ä¿è¯å…¶æ­£ç¡®å…³é—­ã€‚\n- **æ‰€ä»¥ SqlSession çš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚**\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-21.png)\n\nå­¦ä¼šäº†Crudï¼Œå’ŒåŸºæœ¬çš„é…ç½®åŠåŸç†ï¼Œåé¢å°±å¯ä»¥å­¦ä¹ äº›ä¸šåŠ¡å¼€å‘\n","tags":["mybatis"],"categories":["javaå…¨æ ˆ"]},{"title":"MyBatisç¬¬ä¸€ä¸ªç¨‹åº","url":"/2022/06/08/mybatisç®€ä»‹/","content":"\n## ç¯å¢ƒè¯´æ˜ï¼š\n\n- jdk 8 +\n- MySQL 5.7.19\n- maven-3.6.1\n- IDEA\n\nå­¦ä¹ å‰éœ€è¦æŒæ¡ï¼š\n\n- JDBC\n- MySQL\n- Java åŸºç¡€\n- Maven\n- Junit\n\n## ä»€ä¹ˆæ˜¯MyBatis\n\n- MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„**æŒä¹…å±‚æ¡†æ¶**\n- MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†çš„è¿‡ç¨‹\n- MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ å®ä½“ç±» ã€Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡ã€‘æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚\n- MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ibatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚\n- 2013å¹´11æœˆè¿ç§»åˆ°**Github** .\n- Mybatiså®˜æ–¹æ–‡æ¡£ : http://www.mybatis.org/mybatis-3/zh/index.html\n- ä¸­æ–‡æ–‡æ¡£ï¼š[MyBatisä¸­æ–‡ç½‘](https://mybatis.net.cn/)\n- GitHub : https://github.com/mybatis/mybatis-3\n\n## æŒä¹…åŒ–\n\n**æŒä¹…åŒ–æ˜¯å°†ç¨‹åºæ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€é—´è½¬æ¢çš„æœºåˆ¶ã€‚**\n\n- å³æŠŠæ•°æ®ï¼ˆå¦‚å†…å­˜ä¸­çš„å¯¹è±¡ï¼‰ä¿å­˜åˆ°å¯æ°¸ä¹…ä¿å­˜çš„å­˜å‚¨è®¾å¤‡ä¸­ï¼ˆå¦‚ç£ç›˜ï¼‰ã€‚æŒä¹…åŒ–çš„ä¸»è¦åº”ç”¨æ˜¯å°†å†…å­˜ä¸­çš„å¯¹è±¡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæˆ–è€…å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­ã€XMLæ•°æ®æ–‡ä»¶ä¸­ç­‰ç­‰ã€‚\n- JDBCå°±æ˜¯ä¸€ç§æŒä¹…åŒ–æœºåˆ¶ã€‚æ–‡ä»¶IOä¹Ÿæ˜¯ä¸€ç§æŒä¹…åŒ–æœºåˆ¶ã€‚\n- åœ¨ç”Ÿæ´»ä¸­ : å°†é²œè‚‰å†·è—ï¼Œåƒçš„æ—¶å€™å†è§£å†»çš„æ–¹æ³•ä¹Ÿæ˜¯ã€‚å°†æ°´æœåšæˆç½å¤´çš„æ–¹æ³•ä¹Ÿæ˜¯ã€‚\n\n**ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–æœåŠ¡å‘¢ï¼Ÿé‚£æ˜¯ç”±äºå†…å­˜æœ¬èº«çš„ç¼ºé™·å¼•èµ·çš„**\n\n- å†…å­˜æ–­ç”µåæ•°æ®ä¼šä¸¢å¤±ï¼Œä½†æœ‰ä¸€äº›å¯¹è±¡æ˜¯æ— è®ºå¦‚ä½•éƒ½ä¸èƒ½ä¸¢å¤±çš„ï¼Œæ¯”å¦‚é“¶è¡Œè´¦å·ç­‰ï¼Œé—æ†¾çš„æ˜¯ï¼Œäººä»¬è¿˜æ— æ³•ä¿è¯å†…å­˜æ°¸ä¸æ‰ç”µã€‚\n- å†…å­˜è¿‡äºæ˜‚è´µï¼Œä¸ç¡¬ç›˜ã€å…‰ç›˜ç­‰å¤–å­˜ç›¸æ¯”ï¼Œå†…å­˜çš„ä»·æ ¼è¦é«˜2~3ä¸ªæ•°é‡çº§ï¼Œè€Œä¸”ç»´æŒæˆæœ¬ä¹Ÿé«˜ï¼Œè‡³å°‘éœ€è¦ä¸€ç›´ä¾›ç”µå§ã€‚æ‰€ä»¥å³ä½¿å¯¹è±¡ä¸éœ€è¦æ°¸ä¹…ä¿å­˜ï¼Œä¹Ÿä¼šå› ä¸ºå†…å­˜çš„å®¹é‡é™åˆ¶ä¸èƒ½ä¸€ç›´å‘†åœ¨å†…å­˜ä¸­ï¼Œéœ€è¦æŒä¹…åŒ–æ¥ç¼“å­˜åˆ°å¤–å­˜ã€‚\n\n## æŒä¹…å±‚\n\n**ä»€ä¹ˆæ˜¯æŒä¹…å±‚ï¼Ÿ**\n\n- å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å— . Â ----> Â daoå±‚ ã€DAO (Data Access Object) Â æ•°æ®è®¿é—®å¯¹è±¡ã€‘\n- å¤§å¤šæ•°æƒ…å†µä¸‹ç‰¹åˆ«æ˜¯ä¼ä¸šçº§åº”ç”¨ï¼Œæ•°æ®æŒä¹…åŒ–å¾€å¾€ä¹Ÿå°±æ„å‘³ç€å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸ŠåŠ ä»¥å›ºåŒ–ï¼Œè€ŒæŒä¹…åŒ–çš„å®ç°è¿‡ç¨‹åˆ™å¤§å¤šé€šè¿‡å„ç§**å…³ç³»æ•°æ®åº“**æ¥å®Œæˆã€‚\n- ä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªå­—éœ€è¦ç‰¹åˆ«å¼ºè°ƒï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œå±‚â€ã€‚å¯¹äºåº”ç”¨ç³»ç»Ÿè€Œè¨€ï¼Œæ•°æ®æŒä¹…åŠŸèƒ½å¤§å¤šæ˜¯å¿…ä¸å¯å°‘çš„ç»„æˆéƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œå·²ç»å¤©ç„¶çš„å…·å¤‡äº†â€œæŒä¹…å±‚â€æ¦‚å¿µï¼Ÿä¹Ÿè®¸æ˜¯ï¼Œä½†ä¹Ÿè®¸å®é™…æƒ…å†µå¹¶éå¦‚æ­¤ã€‚ä¹‹æ‰€ä»¥è¦ç‹¬ç«‹å‡ºä¸€ä¸ªâ€œæŒä¹…å±‚â€çš„æ¦‚å¿µ,è€Œä¸æ˜¯â€œæŒä¹…æ¨¡å—â€ï¼Œâ€œæŒä¹…å•å…ƒâ€ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿæ¶æ„ä¸­ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„é€»è¾‘å±‚é¢ï¼Œä¸“æ³¨äºæ•°æ®æŒä¹…åŒ–é€»è¾‘çš„å®ç°.\n- ä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†ç›¸å¯¹è€Œè¨€ï¼Œè¿™ä¸ªå±‚é¢åº”è¯¥å…·æœ‰ä¸€ä¸ªè¾ƒä¸ºæ¸…æ™°å’Œä¸¥æ ¼çš„é€»è¾‘è¾¹ç•Œã€‚ã€è¯´ç™½äº†å°±æ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“å­˜åœ¨çš„ï¼ã€‘\n\n## ä¸ºä»€ä¹ˆéœ€è¦Mybatis\n\n- Mybatiså°±æ˜¯å¸®åŠ©ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥æ•°æ®åº“ä¸­ , å’Œä»æ•°æ®åº“ä¸­å–æ•°æ® .\n- ä¼ ç»Ÿçš„jdbcæ“ä½œ , æœ‰å¾ˆå¤šé‡å¤ä»£ç å— .æ¯”å¦‚ : æ•°æ®å–å‡ºæ—¶çš„å°è£… , æ•°æ®åº“çš„å»ºç«‹è¿æ¥ç­‰ç­‰... , é€šè¿‡æ¡†æ¶å¯ä»¥å‡å°‘é‡å¤ä»£ç ,æé«˜å¼€å‘æ•ˆç‡ .\n- MyBatis æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨åŒ–çš„**ORMæ¡†æ¶ (Object Relationship Mapping) -->å¯¹è±¡å…³ç³»æ˜ å°„**\n- æ‰€æœ‰çš„äº‹æƒ…ï¼Œä¸ç”¨Mybatisä¾æ—§å¯ä»¥åšåˆ°ï¼Œåªæ˜¯ç”¨äº†å®ƒï¼Œæ‰€æœ‰å®ç°ä¼šæ›´åŠ ç®€å•ï¼**æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†ï¼Œåªæœ‰ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯çš„äººæœ‰é«˜ä½ä¹‹åˆ«**\n- MyBatisçš„ä¼˜ç‚¹\n    - ç®€å•æ˜“å­¦ï¼šæœ¬èº«å°±å¾ˆå°ä¸”ç®€å•ã€‚æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæœ€ç®€å•å®‰è£…åªè¦ä¸¤ä¸ªjaræ–‡ä»¶+é…ç½®å‡ ä¸ªsqlæ˜ å°„æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œæ˜“äºå­¦ä¹ ï¼Œæ˜“äºä½¿ç”¨ï¼Œé€šè¿‡æ–‡æ¡£å’Œæºä»£ç ï¼Œå¯ä»¥æ¯”è¾ƒå®Œå…¨çš„æŒæ¡å®ƒçš„è®¾è®¡æ€è·¯å’Œå®ç°ã€‚\n    - çµæ´»ï¼šmybatisä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºåŠ ä»»ä½•å½±å“ã€‚sqlå†™åœ¨xmlé‡Œï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚é€šè¿‡sqlè¯­å¥å¯ä»¥æ»¡è¶³æ“ä½œæ•°æ®åº“çš„æ‰€æœ‰éœ€æ±‚ã€‚\n    - è§£é™¤sqlä¸ç¨‹åºä»£ç çš„è€¦åˆï¼šé€šè¿‡æä¾›DAOå±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚\n    - æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚\n    - .......\n- æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œä½¿ç”¨çš„äººå¤šï¼å…¬å¸éœ€è¦ï¼\n\n# MyBatisç¬¬ä¸€ä¸ªç¨‹åº\n\n**æ€è·¯æµç¨‹ï¼šæ­å»ºç¯å¢ƒ-->å¯¼å…¥Mybatis--->ç¼–å†™ä»£ç --->æµ‹è¯•**\n\n## ä»£ç æ¼”ç¤º\n\n1ã€æ­å»ºå®éªŒæ•°æ®åº“\n\n```\nCREATEÂ DATABASE `mybatis`;\n\nUSE `mybatis`;\n\nDROPÂ TABLEÂ IF EXISTS `user`;\n\nCREATEÂ TABLEÂ `user` (\n`id`Â int(20)Â NOTÂ NULL,\n`name`Â varchar(30) DEFAULTÂ NULL,\n`pwd`Â varchar(30) DEFAULTÂ NULL,\nPRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\ninsertÂ Â intoÂ `user`(`id`,`name`,`pwd`)Â valuesÂ (1,'ç‹‚ç¥','123456'),(2,'å¼ ä¸‰','abcdef'),(3,'æå››','987654');\n```\n\n2ã€å¯¼å…¥MyBatisç›¸å…³ jar åŒ…\n\n- GitHubä¸Šæ‰¾\n\n```\n<dependency>\nÂ  Â <groupId>org.mybatis</groupId>\nÂ  Â <artifactId>mybatis</artifactId>\nÂ  Â <version>3.5.2</version>\n</dependency>\n<dependency>\nÂ  Â <groupId>mysql</groupId>\nÂ  Â <artifactId>mysql-connector-java</artifactId>\nÂ  Â <version>5.1.47</version>\n</dependency>\n```\n\n3ã€ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶\n\n- æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\nÂ  Â  Â  Â PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\nÂ  Â  Â  Â \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\nÂ  Â <environmentsÂ default=\"development\">\nÂ  Â  Â  Â <environmentÂ id=\"development\">\nÂ  Â  Â  Â  Â  Â <transactionManagerÂ type=\"JDBC\"/>\nÂ  Â  Â  Â  Â  Â <dataSourceÂ type=\"POOLED\">\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"driver\"Â value=\"com.mysql.jdbc.Driver\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"url\"Â value=\"jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf8\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"username\"Â value=\"root\"/>\nÂ  Â  Â  Â  Â  Â  Â  Â <propertyÂ name=\"password\"Â value=\"123456\"/>\nÂ  Â  Â  Â  Â  Â </dataSource>\nÂ  Â  Â  Â </environment>\nÂ  Â </environments>\nÂ  Â <mappers>\nÂ  Â  Â  Â <mapperÂ resource=\"com/kuang/dao/userMapper.xml\"/>\nÂ  Â </mappers>\n</configuration>\n```\n\n4ã€ç¼–å†™MyBatiså·¥å…·ç±»\n\n- æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£\n\n```\nimportÂ org.apache.ibatis.io.Resources;\nimportÂ org.apache.ibatis.session.SqlSession;\nimportÂ org.apache.ibatis.session.SqlSessionFactory;\nimportÂ org.apache.ibatis.session.SqlSessionFactoryBuilder;\nimportÂ java.io.IOException;\nimportÂ java.io.InputStream;\n\npublicÂ classÂ MybatisUtilsÂ {\n\nÂ  Â privateÂ staticÂ SqlSessionFactoryÂ sqlSessionFactory;\n\nÂ  Â staticÂ {\nÂ  Â  Â  Â tryÂ {\nÂ  Â  Â  Â  Â  Â StringÂ resourceÂ =Â \"mybatis-config.xml\";\nÂ  Â  Â  Â  Â  Â InputStreamÂ inputStreamÂ =Â Resources.getResourceAsStream(resource);\nÂ  Â  Â  Â  Â  Â sqlSessionFactoryÂ =Â newÂ SqlSessionFactoryBuilder().build(inputStream);\nÂ  Â  Â  }Â catchÂ (IOExceptionÂ e) {\nÂ  Â  Â  Â  Â  Â e.printStackTrace();\nÂ  Â  Â  }\nÂ  }\n\nÂ  Â //è·å–SqlSessionè¿æ¥\nÂ  Â publicÂ staticÂ SqlSessionÂ getSession(){\nÂ  Â  Â  Â returnÂ sqlSessionFactory.openSession();\nÂ  }\n\n}\n```\n\n5ã€åˆ›å»ºå®ä½“ç±»\n\n```\npublicÂ classÂ UserÂ {\nÂ  Â \nÂ  Â privateÂ intÂ id; Â //id\nÂ  Â privateÂ StringÂ name; Â Â //å§“å\nÂ  Â privateÂ StringÂ pwd; Â Â //å¯†ç \nÂ  Â \nÂ  Â //æ„é€ ,æœ‰å‚,æ— å‚\nÂ  Â //set/get\nÂ  Â //toString()\nÂ  Â \n}\n```\n\n6ã€ç¼–å†™Mapperæ¥å£ç±»\n\n```\nimportÂ com.kuang.pojo.User;\nimportÂ java.util.List;\n\npublicÂ interfaceÂ UserMapperÂ {\nÂ  Â List<User>Â selectUser();\n}\n```\n\n7ã€ç¼–å†™Mapper.xmlé…ç½®æ–‡ä»¶\n\n- namespace ååˆ†é‡è¦ï¼Œä¸èƒ½å†™é”™ï¼\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\nÂ  Â  Â  Â PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\nÂ  Â  Â  Â \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapperÂ namespace=\"com.kuang.dao.UserMapper\">\nÂ <selectÂ id=\"selectUser\"Â resultType=\"com.kuang.pojo.User\">\nÂ  select * from user\nÂ </select>\n</mapper>\n```\n\n8ã€ç¼–å†™æµ‹è¯•ç±»\n\n- Junit åŒ…æµ‹è¯•\n\n```\npublicÂ classÂ MyTestÂ {\nÂ  Â @Test\nÂ  Â publicÂ voidÂ selectUser() {\nÂ  Â  Â  Â SqlSessionÂ sessionÂ =Â MybatisUtils.getSession();\nÂ  Â  Â  Â //æ–¹æ³•ä¸€:\nÂ  Â  Â  Â //List<User> users = session.selectList(\"com.kuang.mapper.UserMapper.selectUser\");\nÂ  Â  Â  Â //æ–¹æ³•äºŒ:\nÂ  Â  Â  Â UserMapperÂ mapperÂ =Â session.getMapper(UserMapper.class);\nÂ  Â  Â  Â List<User>Â usersÂ =Â mapper.selectUser();\n\nÂ  Â  Â  Â forÂ (UserÂ user:Â users){\nÂ  Â  Â  Â  Â  Â System.out.println(user);\nÂ  Â  Â  }\nÂ  Â  Â  Â session.close();\nÂ  }\n}\n```\n\n9ã€è¿è¡Œæµ‹è¯•ï¼ŒæˆåŠŸçš„æŸ¥è¯¢å‡ºæ¥çš„æˆ‘ä»¬çš„æ•°æ®ï¼Œokï¼\n\n> é—®é¢˜è¯´æ˜\n\n**å¯èƒ½å‡ºç°é—®é¢˜è¯´æ˜ï¼šMavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜**\n\n```\n<resources>\nÂ  Â <resource>\nÂ  Â  Â  Â <directory>src/main/java</directory>\nÂ  Â  Â  Â <includes>\nÂ  Â  Â  Â  Â  Â <include>**/*.properties</include>\nÂ  Â  Â  Â  Â  Â <include>**/*.xml</include>\nÂ  Â  Â  Â </includes>\nÂ  Â  Â  Â <filtering>false</filtering>\nÂ  Â </resource>\nÂ  Â <resource>\nÂ  Â  Â  Â <directory>src/main/resources</directory>\nÂ  Â  Â  Â <includes>\nÂ  Â  Â  Â  Â  Â <include>**/*.properties</include>\nÂ  Â  Â  Â  Â  Â <include>**/*.xml</include>\nÂ  Â  Â  Â </includes>\nÂ  Â  Â  Â <filtering>false</filtering>\nÂ  Â </resource>\n</resources>\n```\n\næœ‰äº†MyBatisä»¥åå†ä¹Ÿä¸ç”¨å†™åŸç”Ÿçš„JDBCä»£ç äº†ã€‚\n","tags":["mybatis"],"categories":["javaå…¨æ ˆ"]},{"title":"MySQLçš„engine","url":"/2022/06/08/mysqlçš„engine/","content":"\n**Engineï¼šå­˜å‚¨å¼•æ“**\n\nå­˜å‚¨å¼•æ“æ˜¯MySQLä¸­å…·ä½“çš„ä¸æ–‡ä»¶æ‰“äº¤é“çš„å­ç³»ç»Ÿã€‚ä¹Ÿæ˜¯MySQLæœ€å…·æœ‰ç‰¹è‰²çš„ä¸€ä¸ªåœ°æ–¹ã€‚\n\nMySQLçš„å­˜å‚¨å¼•æ“æ˜¯æ’ä»¶å¼çš„ã€‚å®ƒæ ¹æ®MySQL ABå…¬å¸æä¾›çš„æ–‡ä»¶è®¿é—®å±‚çš„ä¸€ä¸ªæŠ½è±¡æ¥å£æ¥å®šåˆ¶ä¸€ç§æ–‡ä»¶è®¿é—®æœºåˆ¶(è¿™ç§è®¿é—®æœºåˆ¶å°±å«å­˜å‚¨å¼•æ“)ã€‚\n\nç°åœ¨æœ‰å¾ˆå¤šç§å­˜å‚¨å¼•æ“ï¼Œå„ä¸ªå­˜å‚¨å¼•æ“çš„ä¼˜åŠ¿å„ä¸ä¸€æ ·ï¼Œæœ€å¸¸ç”¨çš„MyISAM,InnoDB,BDBã€‚\n\n- **é»˜è®¤ä¸‹MySQLæ˜¯ä½¿ç”¨MyISAMå¼•æ“ï¼Œå®ƒæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œæœ‰è¾ƒå¥½çš„ç´¢å¼•ä¼˜åŒ–å’Œæ•°æ®å‹ç¼©æŠ€æœ¯ã€‚ä½†æ˜¯å®ƒä¸æ”¯æŒäº‹åŠ¡ã€‚**\n- **InnoDBæ”¯æŒäº‹åŠ¡ï¼Œå¹¶ä¸”æä¾›è¡Œçº§çš„é”å®šï¼Œåº”ç”¨ä¹Ÿç›¸å½“å¹¿æ³›**ã€‚\n\nMySQLä¹Ÿæ”¯æŒè‡ªå·±å®šåˆ¶å­˜å‚¨å¼•æ“ï¼Œç”šè‡³ä¸€ä¸ªåº“ä¸­ä¸åŒçš„è¡¨ä½¿ç”¨ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œè¿™äº›éƒ½æ˜¯å…è®¸çš„ã€‚\n","tags":["mysql"],"categories":["æ•°æ®åº“"]},{"title":"AOP","url":"/2022/06/07/aop/","content":"\n## ä»€ä¹ˆæ˜¯AOP\n\nAOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-17.png)\n\n## Aopåœ¨Springä¸­çš„ä½œç”¨\n\næä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢\n\nä»¥ä¸‹åè¯éœ€è¦äº†è§£ä¸‹ï¼š\n\n- æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ ....\n- åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ– çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚\n- é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚\n- ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚\n- ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚\n- åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚\n- è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-18.png)\n\nSpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Advice:\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-19.png)\n\nå³ Aop åœ¨ ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ , å»å¢åŠ æ–°çš„åŠŸèƒ½ .\n\n## ä½¿ç”¨Springå®ç°Aop\n\nã€é‡ç‚¹ã€‘ä½¿ç”¨AOPç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼\n\n```\n<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->\n<dependency>\nÂ  Â <groupId>org.aspectj</groupId>\nÂ  Â <artifactId>aspectjweaver</artifactId>\nÂ  Â <version>1.9.4</version>\n</dependency>\n```\n\n**ç¬¬ä¸€ç§æ–¹å¼**\n\n**é€šè¿‡ Spring API å®ç°**\n\né¦–å…ˆç¼–å†™æˆ‘ä»¬çš„ä¸šåŠ¡æ¥å£å’Œå®ç°ç±»\n\n```\npublicÂ interfaceÂ UserServiceÂ {\n\nÂ  Â publicÂ voidÂ add();\n\nÂ  Â publicÂ voidÂ delete();\n\nÂ  Â publicÂ voidÂ update();\n\nÂ  Â publicÂ voidÂ search();\n\n}\n```\n\n```\npublicÂ classÂ UserServiceImplÂ implementsÂ UserService{\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ add() {\nÂ  Â  Â  Â System.out.println(\"å¢åŠ ç”¨æˆ·\");\nÂ  }\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ delete() {\nÂ  Â  Â  Â System.out.println(\"åˆ é™¤ç”¨æˆ·\");\nÂ  }\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ update() {\nÂ  Â  Â  Â System.out.println(\"æ›´æ–°ç”¨æˆ·\");\nÂ  }\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ search() {\nÂ  Â  Â  Â System.out.println(\"æŸ¥è¯¢ç”¨æˆ·\");\nÂ  }\n}\n```\n\nç„¶åå»å†™æˆ‘ä»¬çš„å¢å¼ºç±» , æˆ‘ä»¬ç¼–å†™ä¸¤ä¸ª , ä¸€ä¸ªå‰ç½®å¢å¼º ä¸€ä¸ªåç½®å¢å¼º\n\n```\npublicÂ classÂ LogÂ implementsÂ MethodBeforeAdviceÂ {\n\nÂ  Â //method : è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•\nÂ  Â //objects : è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°\nÂ  Â //Object : ç›®æ ‡å¯¹è±¡\nÂ  Â @Override\nÂ  Â publicÂ voidÂ before(MethodÂ method,Â Object[]Â objects,Â ObjectÂ o)Â throwsÂ ThrowableÂ {\nÂ  Â  Â  Â System.out.println(Â o.getClass().getName()Â +Â \"çš„\"Â +Â method.getName()Â +Â \"æ–¹æ³•è¢«æ‰§è¡Œäº†\");\nÂ  }\n}\n```\n\n```\npublicÂ classÂ AfterLogÂ implementsÂ AfterReturningAdviceÂ {\nÂ  Â //returnValue è¿”å›å€¼\nÂ  Â //methodè¢«è°ƒç”¨çš„æ–¹æ³•\nÂ  Â //args è¢«è°ƒç”¨çš„æ–¹æ³•çš„å¯¹è±¡çš„å‚æ•°\nÂ  Â //target è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡\nÂ  Â @Override\nÂ  Â publicÂ voidÂ afterReturning(ObjectÂ returnValue,Â MethodÂ method,Â Object[]Â args,Â ObjectÂ target)Â throwsÂ ThrowableÂ {\nÂ  Â  Â  Â System.out.println(\"æ‰§è¡Œäº†\"Â +Â target.getClass().getName()\nÂ  Â  Â  Â +\"çš„\"+method.getName()+\"æ–¹æ³•,\"\nÂ  Â  Â  Â +\"è¿”å›å€¼ï¼š\"+returnValue);\nÂ  }\n}\n```\n\næœ€åå»springçš„æ–‡ä»¶ä¸­æ³¨å†Œ , å¹¶å®ç°aopåˆ‡å…¥å®ç° , æ³¨æ„å¯¼å…¥çº¦æŸ .\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xmlns:aop=\"http://www.springframework.org/schema/aop\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\nÂ  Â  Â  Â http://www.springframework.org/schema/aop\nÂ  Â  Â  Â http://www.springframework.org/schema/aop/spring-aop.xsd\">\n\nÂ  Â <!--æ³¨å†Œbean-->\nÂ  Â <beanÂ id=\"userService\"Â class=\"com.kuang.service.UserServiceImpl\"/>\nÂ  Â <beanÂ id=\"log\"Â class=\"com.kuang.log.Log\"/>\nÂ  Â <beanÂ id=\"afterLog\"Â class=\"com.kuang.log.AfterLog\"/>\n\nÂ  Â <!--aopçš„é…ç½®-->\nÂ  Â <aop:config>\nÂ  Â  Â  Â <!--åˆ‡å…¥ç‚¹ expression:è¡¨è¾¾å¼åŒ¹é…è¦æ‰§è¡Œçš„æ–¹æ³•-->\nÂ  Â  Â  Â <aop:pointcutÂ id=\"pointcut\"Â expression=\"execution(* com.kuang.service.UserServiceImpl.*(..))\"/>\nÂ  Â  Â  Â <!--æ‰§è¡Œç¯ç»•; advice-refæ‰§è¡Œæ–¹æ³• . pointcut-refåˆ‡å…¥ç‚¹-->\nÂ  Â  Â  Â <aop:advisorÂ advice-ref=\"log\"Â pointcut-ref=\"pointcut\"/>\nÂ  Â  Â  Â <aop:advisorÂ advice-ref=\"afterLog\"Â pointcut-ref=\"pointcut\"/>\nÂ  Â </aop:config>\n\n</beans>\n```\n\næµ‹è¯•\n\n```\npublicÂ classÂ MyTestÂ {\nÂ  Â @Test\nÂ  Â publicÂ voidÂ test(){\nÂ  Â  Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â  Â  Â UserServiceÂ userServiceÂ =Â (UserService)Â context.getBean(\"userService\");\nÂ  Â  Â  Â userService.search();\nÂ  }\n}\n```\n\nAopçš„é‡è¦æ€§ : å¾ˆé‡è¦ . ä¸€å®šè¦ç†è§£å…¶ä¸­çš„æ€è·¯ , ä¸»è¦æ˜¯æ€æƒ³çš„ç†è§£è¿™ä¸€å— .\n\nSpringçš„Aopå°±æ˜¯å°†å…¬å…±çš„ä¸šåŠ¡ (æ—¥å¿— , å®‰å…¨ç­‰) å’Œé¢†åŸŸä¸šåŠ¡ç»“åˆèµ·æ¥ , å½“æ‰§è¡Œé¢†åŸŸä¸šåŠ¡æ—¶ , å°†ä¼šæŠŠå…¬å…±ä¸šåŠ¡åŠ è¿›æ¥ . å®ç°å…¬å…±ä¸šåŠ¡çš„é‡å¤åˆ©ç”¨ . é¢†åŸŸä¸šåŠ¡æ›´çº¯ç²¹ , ç¨‹åºçŒ¿ä¸“æ³¨é¢†åŸŸä¸šåŠ¡ , å…¶æœ¬è´¨è¿˜æ˜¯åŠ¨æ€ä»£ç† .\n\n**ç¬¬äºŒç§æ–¹å¼**\n\n**è‡ªå®šä¹‰ç±»æ¥å®ç°Aop**\n\nç›®æ ‡ä¸šåŠ¡ç±»ä¸å˜ä¾æ—§æ˜¯userServiceImpl\n\nç¬¬ä¸€æ­¥ : å†™æˆ‘ä»¬è‡ªå·±çš„ä¸€ä¸ªåˆ‡å…¥ç±»\n\n```\npublicÂ classÂ DiyPointcutÂ {\n\nÂ  Â publicÂ voidÂ before(){\nÂ  Â  Â  Â System.out.println(\"---------æ–¹æ³•æ‰§è¡Œå‰---------\");\nÂ  }\nÂ  Â publicÂ voidÂ after(){\nÂ  Â  Â  Â System.out.println(\"---------æ–¹æ³•æ‰§è¡Œå---------\");\nÂ  }\nÂ  Â \n}\n\n```\n\nå»springä¸­é…ç½®\n\n```\n<!--ç¬¬äºŒç§æ–¹å¼è‡ªå®šä¹‰å®ç°-->\n<!--æ³¨å†Œbean-->\n<beanÂ id=\"diy\"Â class=\"com.kuang.config.DiyPointcut\"/>\n\n<!--aopçš„é…ç½®-->\n<aop:config>\nÂ  Â <!--ç¬¬äºŒç§æ–¹å¼ï¼šä½¿ç”¨AOPçš„æ ‡ç­¾å®ç°-->\nÂ  Â <aop:aspectÂ ref=\"diy\">\nÂ  Â  Â  Â <aop:pointcutÂ id=\"diyPonitcut\"Â expression=\"execution(* com.kuang.service.UserServiceImpl.*(..))\"/>\nÂ  Â  Â  Â <aop:beforeÂ pointcut-ref=\"diyPonitcut\"Â method=\"before\"/>\nÂ  Â  Â  Â <aop:afterÂ pointcut-ref=\"diyPonitcut\"Â method=\"after\"/>\nÂ  Â </aop:aspect>\n</aop:config>\n```\n\næµ‹è¯•ï¼š\n\n```\npublicÂ classÂ MyTestÂ {\nÂ  Â @Test\nÂ  Â publicÂ voidÂ test(){\nÂ  Â  Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â  Â  Â UserServiceÂ userServiceÂ =Â (UserService)Â context.getBean(\"userService\");\nÂ  Â  Â  Â userService.add();\nÂ  }\n}\n```\n\n**ç¬¬ä¸‰ç§æ–¹å¼**\n\n**ä½¿ç”¨æ³¨è§£å®ç°**\n\nç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªæ³¨è§£å®ç°çš„å¢å¼ºç±»\n\n```\npackageÂ com.kuang.config;\n\nimportÂ org.aspectj.lang.ProceedingJoinPoint;\nimportÂ org.aspectj.lang.annotation.After;\nimportÂ org.aspectj.lang.annotation.Around;\nimportÂ org.aspectj.lang.annotation.Aspect;\nimportÂ org.aspectj.lang.annotation.Before;\n\n@Aspect\npublicÂ classÂ AnnotationPointcutÂ {\nÂ  Â @Before(\"execution(* com.kuang.service.UserServiceImpl.*(..))\")\nÂ  Â publicÂ voidÂ before(){\nÂ  Â  Â  Â System.out.println(\"---------æ–¹æ³•æ‰§è¡Œå‰---------\");\nÂ  }\n\nÂ  Â @After(\"execution(* com.kuang.service.UserServiceImpl.*(..))\")\nÂ  Â publicÂ voidÂ after(){\nÂ  Â  Â  Â System.out.println(\"---------æ–¹æ³•æ‰§è¡Œå---------\");\nÂ  }\n\nÂ  Â @Around(\"execution(* com.kuang.service.UserServiceImpl.*(..))\")\nÂ  Â publicÂ voidÂ around(ProceedingJoinPointÂ jp)Â throwsÂ ThrowableÂ {\nÂ  Â  Â  Â System.out.println(\"ç¯ç»•å‰\");\nÂ  Â  Â  Â System.out.println(\"ç­¾å:\"+jp.getSignature());\nÂ  Â  Â  Â //æ‰§è¡Œç›®æ ‡æ–¹æ³•proceed\nÂ  Â  Â  Â ObjectÂ proceedÂ =Â jp.proceed();\nÂ  Â  Â  Â System.out.println(\"ç¯ç»•å\");\nÂ  Â  Â  Â System.out.println(proceed);\nÂ  }\n}\n```\n\nç¬¬äºŒæ­¥ï¼šåœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œbeanï¼Œå¹¶å¢åŠ æ”¯æŒæ³¨è§£çš„é…ç½®\n\n```\n<!--ç¬¬ä¸‰ç§æ–¹å¼:æ³¨è§£å®ç°-->\n<beanÂ id=\"annotationPointcut\"Â class=\"com.kuang.config.AnnotationPointcut\"/>\n<aop:aspectj-autoproxy/>\n```\n\naop:aspectj-autoproxyï¼šè¯´æ˜\n\n```\né€šè¿‡aopå‘½åç©ºé—´çš„<aop:aspectj-autoproxyÂ />å£°æ˜è‡ªåŠ¨ä¸ºspringå®¹å™¨ä¸­é‚£äº›é…ç½®@aspectJåˆ‡é¢çš„beanåˆ›å»ºä»£ç†ï¼Œç»‡å…¥åˆ‡é¢ã€‚å½“ç„¶ï¼Œspring åœ¨å†…éƒ¨ä¾æ—§é‡‡ç”¨AnnotationAwareAspectJAutoProxyCreatorè¿›è¡Œè‡ªåŠ¨ä»£ç†çš„åˆ›å»ºå·¥ä½œï¼Œä½†å…·ä½“å®ç°çš„ç»†èŠ‚å·²ç»è¢«<aop:aspectj-autoproxyÂ />éšè—èµ·æ¥äº†\n\n<aop:aspectj-autoproxyÂ />æœ‰ä¸€ä¸ªproxy-target-classå±æ€§ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºä½¿ç”¨jdkåŠ¨æ€ä»£ç†ç»‡å…¥å¢å¼ºï¼Œå½“é…ä¸º<aop:aspectj-autoproxyÂ Â poxy-target-class=\"true\"/>æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨CGLibåŠ¨æ€ä»£ç†æŠ€æœ¯ç»‡å…¥å¢å¼ºã€‚ä¸è¿‡å³ä½¿proxy-target-classè®¾ç½®ä¸ºfalseï¼Œå¦‚æœç›®æ ‡ç±»æ²¡æœ‰å£°æ˜æ¥å£ï¼Œåˆ™springå°†è‡ªåŠ¨ä½¿ç”¨CGLibåŠ¨æ€ä»£ç†ã€‚\n```\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"ä»£ç†æ¨¡å¼","url":"/2022/06/07/ä»£ç†æ¨¡å¼/","content":"\nä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Œå› ä¸ºAOPçš„åº•å±‚æœºåˆ¶å°±æ˜¯åŠ¨æ€ä»£ç†ï¼\n\nä»£ç†æ¨¡å¼ï¼š\n\n- é™æ€ä»£ç†\n- åŠ¨æ€ä»£ç†\n\nå­¦ä¹ aopä¹‹å‰ , æˆ‘ä»¬è¦å…ˆäº†è§£ä¸€ä¸‹ä»£ç†æ¨¡å¼ï¼\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-11.png)\n\n## é™æ€ä»£ç†\n\n**é™æ€ä»£ç†è§’è‰²åˆ†æ**\n\n- æŠ½è±¡è§’è‰² : ä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°\n- çœŸå®è§’è‰² : è¢«ä»£ç†çš„è§’è‰²\n- ä»£ç†è§’è‰² : ä»£ç†çœŸå®è§’è‰² ; ä»£ç†çœŸå®è§’è‰²å , ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œ .\n- å®¢æˆ· Â : Â ä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ .\n\n**ä»£ç å®ç°**\n\nRent . java å³æŠ½è±¡è§’è‰²\n\n```\n//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿\npublicÂ interfaceÂ RentÂ {\nÂ  Â publicÂ voidÂ rent();\n}\n```\n\nHost . java å³çœŸå®è§’è‰²\n\n```\n//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­\npublicÂ classÂ HostÂ implementsÂ Rent{\nÂ  Â publicÂ voidÂ rent() {\nÂ  Â  Â  Â System.out.println(\"æˆ¿å±‹å‡ºç§Ÿ\");\nÂ  }\n}\n```\n\nProxy . java å³ä»£ç†è§’è‰²\n\n```\n//ä»£ç†è§’è‰²ï¼šä¸­ä»‹\npublicÂ classÂ ProxyÂ implementsÂ RentÂ {\n\nÂ  Â privateÂ HostÂ host;\nÂ  Â publicÂ Proxy() { }\nÂ  Â publicÂ Proxy(HostÂ host) {\nÂ  Â  Â  Â this.hostÂ =Â host;\nÂ  }\n\nÂ  Â //ç§Ÿæˆ¿\nÂ  Â publicÂ voidÂ rent(){\nÂ  Â  Â  Â seeHouse();\nÂ  Â  Â  Â host.rent();\nÂ  Â  Â  Â fare();\nÂ  }\nÂ  Â //çœ‹æˆ¿\nÂ  Â publicÂ voidÂ seeHouse(){\nÂ  Â  Â  Â System.out.println(\"å¸¦æˆ¿å®¢çœ‹æˆ¿\");\nÂ  }\nÂ  Â //æ”¶ä¸­ä»‹è´¹\nÂ  Â publicÂ voidÂ fare(){\nÂ  Â  Â  Â System.out.println(\"æ”¶ä¸­ä»‹è´¹\");\nÂ  }\n}\n```\n\nClient . java å³å®¢æˆ·\n\n```\n//å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼\npublicÂ classÂ ClientÂ {\nÂ  Â publicÂ staticÂ voidÂ main(String[]Â args) {\nÂ  Â  Â  Â //æˆ¿ä¸œè¦ç§Ÿæˆ¿\nÂ  Â  Â  Â HostÂ hostÂ =Â newÂ Host();\nÂ  Â  Â  Â //ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ\nÂ  Â  Â  Â ProxyÂ proxyÂ =Â newÂ Proxy(host);\n\nÂ  Â  Â  Â //ä½ å»æ‰¾ä¸­ä»‹ï¼\nÂ  Â  Â  Â proxy.rent();\nÂ  }\n}\n```\n\nåˆ†æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­é€šè¿‡ä»£ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼ï¼Œç¨‹åºæºè‡ªäºç”Ÿæ´»ï¼Œæ‰€ä»¥å­¦ç¼–ç¨‹çš„äººï¼Œä¸€èˆ¬èƒ½å¤Ÿæ›´åŠ æŠ½è±¡çš„çœ‹å¾…ç”Ÿæ´»ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€‚\n\n**é™æ€ä»£ç†çš„å¥½å¤„:**\n\n- å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .\n- å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,\n- å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .\n\nç¼ºç‚¹ :\n\n- ç±»å¤šäº† , å¤šäº†ä»£ç†ç±» , å·¥ä½œé‡å˜å¤§äº† . å¼€å‘æ•ˆç‡é™ä½ .\n\næˆ‘ä»¬æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥ , å°±æœ‰äº†åŠ¨æ€ä»£ç† !\n\n## é™æ€ä»£ç†å†ç†è§£\n\nç»ƒä¹ æ­¥éª¤ï¼š\n\n1ã€åˆ›å»ºä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œæ¯”å¦‚å’‹ä»¬å¹³æ—¶åšçš„ç”¨æˆ·ä¸šåŠ¡ï¼ŒæŠ½è±¡èµ·æ¥å°±æ˜¯å¢åˆ æ”¹æŸ¥ï¼\n\n```\n//æŠ½è±¡è§’è‰²ï¼šå¢åˆ æ”¹æŸ¥ä¸šåŠ¡\npublicÂ interfaceÂ UserServiceÂ {\nÂ  Â voidÂ add();\nÂ  Â voidÂ delete();\nÂ  Â voidÂ update();\nÂ  Â voidÂ query();\n}\n```\n\n2ã€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçœŸå®å¯¹è±¡æ¥å®Œæˆè¿™äº›å¢åˆ æ”¹æŸ¥æ“ä½œ\n\n```\n//çœŸå®å¯¹è±¡ï¼Œå®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œçš„äºº\npublicÂ classÂ UserServiceImplÂ implementsÂ UserServiceÂ {\n\nÂ  Â publicÂ voidÂ add() {\nÂ  Â  Â  Â System.out.println(\"å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·\");\nÂ  }\n\nÂ  Â publicÂ voidÂ delete() {\nÂ  Â  Â  Â System.out.println(\"åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·\");\nÂ  }\n\nÂ  Â publicÂ voidÂ update() {\nÂ  Â  Â  Â System.out.println(\"æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·\");\nÂ  }\n\nÂ  Â publicÂ voidÂ query() {\nÂ  Â  Â  Â System.out.println(\"æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·\");\nÂ  }\n}\n```\n\n3ã€éœ€æ±‚æ¥äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½ï¼Œæ€ä¹ˆå®ç°ï¼\n\n- æ€è·¯1 ï¼šåœ¨å®ç°ç±»ä¸Šå¢åŠ ä»£ç  ã€éº»çƒ¦ï¼ã€‘\n- æ€è·¯2ï¼šä½¿ç”¨ä»£ç†æ¥åšï¼Œèƒ½å¤Ÿä¸æ”¹å˜åŸæ¥çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œå®ç°æ­¤åŠŸèƒ½å°±æ˜¯æœ€å¥½çš„äº†ï¼\n\n4ã€è®¾ç½®ä¸€ä¸ªä»£ç†ç±»æ¥å¤„ç†æ—¥å¿—ï¼ä»£ç†è§’è‰²\n\n```\n//ä»£ç†è§’è‰²ï¼Œåœ¨è¿™é‡Œé¢å¢åŠ æ—¥å¿—çš„å®ç°\npublicÂ classÂ UserServiceProxyÂ implementsÂ UserServiceÂ {\nÂ  Â privateÂ UserServiceImplÂ userService;\n\nÂ  Â publicÂ voidÂ setUserService(UserServiceImplÂ userService) {\nÂ  Â  Â  Â this.userServiceÂ =Â userService;\nÂ  }\n\nÂ  Â publicÂ voidÂ add() {\nÂ  Â  Â  Â log(\"add\");\nÂ  Â  Â  Â userService.add();\nÂ  }\n\nÂ  Â publicÂ voidÂ delete() {\nÂ  Â  Â  Â log(\"delete\");\nÂ  Â  Â  Â userService.delete();\nÂ  }\n\nÂ  Â publicÂ voidÂ update() {\nÂ  Â  Â  Â log(\"update\");\nÂ  Â  Â  Â userService.update();\nÂ  }\n\nÂ  Â publicÂ voidÂ query() {\nÂ  Â  Â  Â log(\"query\");\nÂ  Â  Â  Â userService.query();\nÂ  }\n\nÂ  Â publicÂ voidÂ log(StringÂ msg){\nÂ  Â  Â  Â System.out.println(\"æ‰§è¡Œäº†\"+msg+\"æ–¹æ³•\");\nÂ  }\n\n}\n```\n\n5ã€æµ‹è¯•è®¿é—®ç±»ï¼š\n\n```\npublicÂ classÂ ClientÂ {\nÂ  Â publicÂ staticÂ voidÂ main(String[]Â args) {\nÂ  Â  Â  Â //çœŸå®ä¸šåŠ¡\nÂ  Â  Â  Â UserServiceImplÂ userServiceÂ =Â newÂ UserServiceImpl();\nÂ  Â  Â  Â //ä»£ç†ç±»\nÂ  Â  Â  Â UserServiceProxyÂ proxyÂ =Â newÂ UserServiceProxy();\nÂ  Â  Â  Â //ä½¿ç”¨ä»£ç†ç±»å®ç°æ—¥å¿—åŠŸèƒ½ï¼\nÂ  Â  Â  Â proxy.setUserService(userService);\n\nÂ  Â  Â  Â proxy.add();\nÂ  }\n}\n```\n\nOKï¼Œåˆ°äº†ç°åœ¨ä»£ç†æ¨¡å¼å¤§å®¶åº”è¯¥éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜äº†ï¼Œé‡ç‚¹å¤§å®¶éœ€è¦ç†è§£å…¶ä¸­çš„æ€æƒ³ï¼›\n\næˆ‘ä»¬åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°äº†å¯¹åŸæœ‰åŠŸèƒ½çš„å¢å¼ºï¼Œè¿™æ˜¯AOPä¸­æœ€æ ¸å¿ƒçš„æ€æƒ³\n\nèŠèŠAOPï¼šçºµå‘å¼€å‘ï¼Œæ¨ªå‘å¼€å‘\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-12.png)\n\n## åŠ¨æ€ä»£ç†\n\n- åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†çš„ä¸€æ · .\n- åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ . é™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„\n- åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±» : ä¸€ç±»æ˜¯åŸºäºæ¥å£åŠ¨æ€ä»£ç† , ä¸€ç±»æ˜¯åŸºäºç±»çš„åŠ¨æ€ä»£ç†\n    - åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†----JDKåŠ¨æ€ä»£ç†\n    - åŸºäºç±»çš„åŠ¨æ€ä»£ç†--cglib\n    - ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ javasist æ¥ç”ŸæˆåŠ¨æ€ä»£ç† . ç™¾åº¦ä¸€ä¸‹javasist\n    - æˆ‘ä»¬è¿™é‡Œä½¿ç”¨JDKçš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ã€\n\n**JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»**\n\næ ¸å¿ƒ : InvocationHandler Â  Â  å’Œ Â  Â  Proxy Â  ï¼Œ æ‰“å¼€JDKå¸®åŠ©æ–‡æ¡£çœ‹çœ‹\n\nã€InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‘\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-13.png)\n\n```\nObjectÂ invoke(ObjectÂ proxy,Â æ–¹æ³•Â method,Â Object[]Â args)ï¼›\n//å‚æ•°\n//proxy - è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹\n//method -æ‰€è¿°æ–¹æ³•å¯¹åº”äºè°ƒç”¨ä»£ç†å®ä¾‹ä¸Šçš„æ¥å£æ–¹æ³•çš„å®ä¾‹ã€‚æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯è¯¥æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯ä»£ç†ç±»ç»§æ‰¿è¯¥æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…çº§æ¥å£ã€‚\n//args -åŒ…å«çš„æ–¹æ³•è°ƒç”¨ä¼ é€’ä»£ç†å®ä¾‹çš„å‚æ•°å€¼çš„å¯¹è±¡çš„é˜µåˆ—ï¼Œæˆ–nullå¦‚æœæ¥å£æ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…å™¨ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean ã€‚\n```\n\nã€Proxy Â : ä»£ç†ã€‘\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-14.png)\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-15.png)\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-16.png)\n\n```\n//ç”Ÿæˆä»£ç†ç±»\npublicÂ ObjectÂ getProxy(){\nÂ  Â returnÂ Proxy.newProxyInstance(this.getClass().getClassLoader(),\nÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â rent.getClass().getInterfaces(),this);\n}\n```\n\n**ä»£ç å®ç°**\n\næŠ½è±¡è§’è‰²å’ŒçœŸå®è§’è‰²å’Œä¹‹å‰çš„ä¸€æ ·ï¼\n\nRent . java å³æŠ½è±¡è§’è‰²\n\n```\n//æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿\npublicÂ interfaceÂ RentÂ {\nÂ  Â publicÂ voidÂ rent();\n}\n```\n\nHost . java å³çœŸå®è§’è‰²\n\n```\n//çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­\npublicÂ classÂ HostÂ implementsÂ Rent{\nÂ  Â publicÂ voidÂ rent() {\nÂ  Â  Â  Â System.out.println(\"æˆ¿å±‹å‡ºç§Ÿ\");\nÂ  }\n}\n```\n\nProxyInvocationHandler. java å³ä»£ç†è§’è‰²\n\n```\npublicÂ classÂ ProxyInvocationHandlerÂ implementsÂ InvocationHandlerÂ {\nÂ  Â privateÂ RentÂ rent;\n\nÂ  Â publicÂ voidÂ setRent(RentÂ rent) {\nÂ  Â  Â  Â this.rentÂ =Â rent;\nÂ  }\n\nÂ  Â //ç”Ÿæˆä»£ç†ç±»ï¼Œé‡ç‚¹æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·å–è¦ä»£ç†çš„æŠ½è±¡è§’è‰²ï¼ä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªè§’è‰²ï¼Œç°åœ¨å¯ä»¥ä»£ç†ä¸€ç±»è§’è‰²\nÂ  Â publicÂ ObjectÂ getProxy(){\nÂ  Â  Â  Â returnÂ Proxy.newProxyInstance(this.getClass().getClassLoader(),\nÂ  Â  Â  Â  Â  Â  Â  Â rent.getClass().getInterfaces(),this);\nÂ  }\n\nÂ  Â // proxy : ä»£ç†ç±» method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡.\nÂ  Â // å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœ\nÂ  Â @Override\nÂ  Â publicÂ ObjectÂ invoke(ObjectÂ proxy,Â MethodÂ method,Â Object[]Â args)Â throwsÂ ThrowableÂ {\nÂ  Â  Â  Â seeHouse();\nÂ  Â  Â  Â //æ ¸å¿ƒï¼šæœ¬è´¨åˆ©ç”¨åå°„å®ç°ï¼\nÂ  Â  Â  Â ObjectÂ resultÂ =Â method.invoke(rent,Â args);\nÂ  Â  Â  Â fare();\nÂ  Â  Â  Â returnÂ result;\nÂ  }\n\nÂ  Â //çœ‹æˆ¿\nÂ  Â publicÂ voidÂ seeHouse(){\nÂ  Â  Â  Â System.out.println(\"å¸¦æˆ¿å®¢çœ‹æˆ¿\");\nÂ  }\nÂ  Â //æ”¶ä¸­ä»‹è´¹\nÂ  Â publicÂ voidÂ fare(){\nÂ  Â  Â  Â System.out.println(\"æ”¶ä¸­ä»‹è´¹\");\nÂ  }\n\n}\n```\n\nClient . java\n\n```\n//ç§Ÿå®¢\npublicÂ classÂ ClientÂ {\n\nÂ  Â publicÂ staticÂ voidÂ main(String[]Â args) {\nÂ  Â  Â  Â //çœŸå®è§’è‰²\nÂ  Â  Â  Â HostÂ hostÂ =Â newÂ Host();\nÂ  Â  Â  Â //ä»£ç†å®ä¾‹çš„è°ƒç”¨å¤„ç†ç¨‹åº\nÂ  Â  Â  Â ProxyInvocationHandlerÂ pihÂ =Â newÂ ProxyInvocationHandler();\nÂ  Â  Â  Â pih.setRent(host);Â //å°†çœŸå®è§’è‰²æ”¾ç½®è¿›å»ï¼\nÂ  Â  Â  Â RentÂ proxyÂ =Â (Rent)pih.getProxy();Â //åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„ä»£ç†ç±»ï¼\nÂ  Â  Â  Â proxy.rent();\nÂ  }\n\n}\n```\n\næ ¸å¿ƒï¼š**ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡ , ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼ã€**\n\n## æ·±åŒ–ç†è§£\n\næˆ‘ä»¬æ¥ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°ä»£ç†æˆ‘ä»¬åé¢å†™çš„UserServiceï¼\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ä¸€ä¸ªé€šç”¨çš„åŠ¨æ€ä»£ç†å®ç°çš„ç±»ï¼æ‰€æœ‰çš„ä»£ç†å¯¹è±¡è®¾ç½®ä¸ºObjectå³å¯ï¼\n\n```\npublicÂ classÂ ProxyInvocationHandlerÂ implementsÂ InvocationHandlerÂ {\nÂ  Â privateÂ ObjectÂ target;\n\nÂ  Â publicÂ voidÂ setTarget(ObjectÂ target) {\nÂ  Â  Â  Â this.targetÂ =Â target;\nÂ  }\n\nÂ  Â //ç”Ÿæˆä»£ç†ç±»\nÂ  Â publicÂ ObjectÂ getProxy(){\nÂ  Â  Â  Â returnÂ Proxy.newProxyInstance(this.getClass().getClassLoader(),\nÂ  Â  Â  Â  Â  Â  Â  Â target.getClass().getInterfaces(),this);\nÂ  }\n\nÂ  Â // proxy : ä»£ç†ç±»\nÂ  Â // method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡.\nÂ  Â publicÂ ObjectÂ invoke(ObjectÂ proxy,Â MethodÂ method,Â Object[]Â args)Â throwsÂ ThrowableÂ {\nÂ  Â  Â  Â log(method.getName());\nÂ  Â  Â  Â ObjectÂ resultÂ =Â method.invoke(target,Â args);\nÂ  Â  Â  Â returnÂ result;\nÂ  }\n\nÂ  Â publicÂ voidÂ log(StringÂ methodName){\nÂ  Â  Â  Â System.out.println(\"æ‰§è¡Œäº†\"+methodName+\"æ–¹æ³•\");\nÂ  }\n\n}\n```\n\næµ‹è¯•ï¼\n\n```\npublicÂ classÂ TestÂ {\nÂ  Â publicÂ staticÂ voidÂ main(String[]Â args) {\nÂ  Â  Â  Â //çœŸå®å¯¹è±¡\nÂ  Â  Â  Â UserServiceImplÂ userServiceÂ =Â newÂ UserServiceImpl();\nÂ  Â  Â  Â //ä»£ç†å¯¹è±¡çš„è°ƒç”¨å¤„ç†ç¨‹åº\nÂ  Â  Â  Â ProxyInvocationHandlerÂ pihÂ =Â newÂ ProxyInvocationHandler();\nÂ  Â  Â  Â pih.setTarget(userService);Â //è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡\nÂ  Â  Â  Â UserServiceÂ proxyÂ =Â (UserService)pih.getProxy();Â //åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼\nÂ  Â  Â  Â proxy.delete();\nÂ  }\n}\n```\n\næµ‹è¯•ï¼Œå¢åˆ æ”¹æŸ¥ï¼ŒæŸ¥çœ‹ç»“æœï¼\n\n##### åŠ¨æ€ä»£ç†çš„å¥½å¤„\n\né™æ€ä»£ç†æœ‰çš„å®ƒéƒ½æœ‰ï¼Œé™æ€ä»£ç†æ²¡æœ‰çš„ï¼Œå®ƒä¹Ÿæœ‰ï¼\n\n- å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ . ä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ… .\n- å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆ . å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ ,\n- å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ .\n- ä¸€ä¸ªåŠ¨æ€ä»£ç† , ä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡\n- ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£ï¼\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"Beançš„è‡ªåŠ¨è£…é…","url":"/2022/06/06/beançš„è‡ªåŠ¨è£…é…/","content":"\n## è‡ªåŠ¨è£…é…è¯´æ˜\n\n- è‡ªåŠ¨è£…é…æ˜¯ä½¿ç”¨springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹æ³•\n- springä¼šåœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸ºæŸä¸ªbeanå¯»æ‰¾å…¶ä¾èµ–çš„beanã€‚\n\nSpringä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n1. åœ¨xmlä¸­æ˜¾å¼é…ç½®ï¼›\n2. åœ¨javaä¸­æ˜¾å¼é…ç½®ï¼›\n3. éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…ã€‚\n\nè¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²ç¬¬ä¸‰ç§ï¼šè‡ªåŠ¨åŒ–çš„è£…é…beanã€‚\n\nSpringçš„è‡ªåŠ¨è£…é…éœ€è¦ä»ä¸¤ä¸ªè§’åº¦æ¥å®ç°ï¼Œæˆ–è€…è¯´æ˜¯ä¸¤ä¸ªæ“ä½œï¼š\n\n1. ç»„ä»¶æ‰«æ(component scanning)ï¼šspringä¼šè‡ªåŠ¨å‘ç°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰€åˆ›å»ºçš„beanï¼›\n2. è‡ªåŠ¨è£…é…(autowiring)ï¼šspringè‡ªåŠ¨æ»¡è¶³beanä¹‹é—´çš„ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„IoC/DIï¼›\n\nç»„ä»¶æ‰«æå’Œè‡ªåŠ¨è£…é…ç»„åˆå‘æŒ¥å·¨å¤§å¨åŠ›ï¼Œä½¿å¾—æ˜¾ç¤ºçš„é…ç½®é™ä½åˆ°æœ€å°‘ã€‚\n\n**æ¨èä¸ä½¿ç”¨è‡ªåŠ¨è£…é…xmlé…ç½® , è€Œä½¿ç”¨æ³¨è§£ .**\n\n## æµ‹è¯•ç¯å¢ƒæ­å»º\n\n1ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®\n\n2ã€æ–°å»ºä¸¤ä¸ªå®ä½“ç±»ï¼ŒCat Â  Dog Â éƒ½æœ‰ä¸€ä¸ªå«çš„æ–¹æ³•\n\n```\npublicÂ classÂ CatÂ {\nÂ  Â publicÂ voidÂ shout() {\nÂ  Â  Â  Â System.out.println(\"miao~\");\nÂ  }\n}\n```\n\n```\npublicÂ classÂ DogÂ {\nÂ  Â publicÂ voidÂ shout() {\nÂ  Â  Â  Â System.out.println(\"wang~\");\nÂ  }\n}\n```\n\n3ã€æ–°å»ºä¸€ä¸ªç”¨æˆ·ç±» User\n\n```\npublicÂ classÂ UserÂ {\nÂ  Â privateÂ CatÂ cat;\nÂ  Â privateÂ DogÂ dog;\nÂ  Â privateÂ StringÂ str;\n}\n```\n\n4ã€ç¼–å†™Springé…ç½®æ–‡ä»¶\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\nÂ  Â <beanÂ id=\"dog\"Â class=\"com.kuang.pojo.Dog\"/>\nÂ  Â <beanÂ id=\"cat\"Â class=\"com.kuang.pojo.Cat\"/>\n\nÂ  Â <beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\">\nÂ  Â  Â  Â <propertyÂ name=\"cat\"Â ref=\"cat\"/>\nÂ  Â  Â  Â <propertyÂ name=\"dog\"Â ref=\"dog\"/>\nÂ  Â  Â  Â <propertyÂ name=\"str\"Â value=\"qinjiang\"/>\nÂ  Â </bean>\n</beans>\n```\n\n5ã€æµ‹è¯•\n\n```\npublicÂ classÂ MyTestÂ {\nÂ  Â @Test\nÂ  Â publicÂ voidÂ testMethodAutowire() {\nÂ  Â  Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â  Â  Â UserÂ userÂ =Â (User)Â context.getBean(\"user\");\nÂ  Â  Â  Â user.getCat().shout();\nÂ  Â  Â  Â user.getDog().shout();\nÂ  }\n}\n```\n\nç»“æœæ­£å¸¸è¾“å‡ºï¼Œç¯å¢ƒOK\n\n## byName\n\n**autowire byName (æŒ‰åç§°è‡ªåŠ¨è£…é…)**\n\nç”±äºåœ¨æ‰‹åŠ¨é…ç½®xmlè¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸å‘ç”Ÿå­—æ¯ç¼ºæ¼å’Œå¤§å°å†™ç­‰é”™è¯¯ï¼Œè€Œæ— æ³•å¯¹å…¶è¿›è¡Œæ£€æŸ¥ï¼Œä½¿å¾—å¼€å‘æ•ˆç‡é™ä½ã€‚\n\né‡‡ç”¨è‡ªåŠ¨è£…é…å°†é¿å…è¿™äº›é”™è¯¯ï¼Œå¹¶ä¸”ä½¿é…ç½®ç®€å•åŒ–ã€‚\n\næµ‹è¯•ï¼š\n\n1ã€ä¿®æ”¹beané…ç½®ï¼Œå¢åŠ ä¸€ä¸ªå±æ€§ Â autowire=\"byName\"\n\n```\n<beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"Â autowire=\"byName\">\nÂ  Â <propertyÂ name=\"str\"Â value=\"qinjiang\"/>\n</bean>\n```\n\n2ã€å†æ¬¡æµ‹è¯•ï¼Œç»“æœä¾æ—§æˆåŠŸè¾“å‡ºï¼\n\n3ã€æˆ‘ä»¬å°† cat çš„bean idä¿®æ”¹ä¸º catXXX\n\n4ã€å†æ¬¡æµ‹è¯•ï¼Œ æ‰§è¡Œæ—¶æŠ¥ç©ºæŒ‡é’ˆjava.lang.NullPointerExceptionã€‚å› ä¸ºæŒ‰byNameè§„åˆ™æ‰¾ä¸å¯¹åº”setæ–¹æ³•ï¼ŒçœŸæ­£çš„setCatå°±æ²¡æ‰§è¡Œï¼Œå¯¹è±¡å°±æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶å°±ä¼šæŠ¥ç©ºæŒ‡é’ˆé”™è¯¯ã€‚\n\n**å°ç»“ï¼š**\n\nå½“ä¸€ä¸ªbeanèŠ‚ç‚¹å¸¦æœ‰ autowire byNameçš„å±æ€§æ—¶ã€‚\n\n1. å°†æŸ¥æ‰¾å…¶ç±»ä¸­æ‰€æœ‰çš„setæ–¹æ³•åï¼Œä¾‹å¦‚setCatï¼Œè·å¾—å°†setå»æ‰å¹¶ä¸”é¦–å­—æ¯å°å†™çš„å­—ç¬¦ä¸²ï¼Œå³catã€‚\n2. å»springå®¹å™¨ä¸­å¯»æ‰¾æ˜¯å¦æœ‰æ­¤å­—ç¬¦ä¸²åç§°idçš„å¯¹è±¡ã€‚\n3. å¦‚æœæœ‰ï¼Œå°±å–å‡ºæ³¨å…¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚\n\n## byType\n\n**autowire byType (æŒ‰ç±»å‹è‡ªåŠ¨è£…é…)**\n\nä½¿ç”¨autowire byTypeé¦–å…ˆéœ€è¦ä¿è¯ï¼šåŒä¸€ç±»å‹çš„å¯¹è±¡ï¼Œåœ¨springå®¹å™¨ä¸­å”¯ä¸€ã€‚å¦‚æœä¸å”¯ä¸€ï¼Œä¼šæŠ¥ä¸å”¯ä¸€çš„å¼‚å¸¸ã€‚\n\n```\nNoUniqueBeanDefinitionException\n```\n\næµ‹è¯•ï¼š\n\n1ã€å°†userçš„beané…ç½®ä¿®æ”¹ä¸€ä¸‹ ï¼šÂ autowire=\"byType\"\n\n2ã€æµ‹è¯•ï¼Œæ­£å¸¸è¾“å‡º\n\n3ã€åœ¨æ³¨å†Œä¸€ä¸ªcat çš„beanå¯¹è±¡ï¼\n\n```\n<beanÂ id=\"dog\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"cat\"Â class=\"com.kuang.pojo.Cat\"/>\n<beanÂ id=\"cat2\"Â class=\"com.kuang.pojo.Cat\"/>\n\n<beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"Â autowire=\"byType\">\nÂ  Â <propertyÂ name=\"str\"Â value=\"qinjiang\"/>\n</bean>\n```\n\n4ã€æµ‹è¯•ï¼ŒæŠ¥é”™ï¼šNoUniqueBeanDefinitionException\n\n5ã€åˆ æ‰cat2ï¼Œå°†catçš„beanåç§°æ”¹æ‰ï¼æµ‹è¯•ï¼å› ä¸ºæ˜¯æŒ‰ç±»å‹è£…é…ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šæŠ¥å¼‚å¸¸ï¼Œä¹Ÿä¸å½±å“æœ€åçš„ç»“æœã€‚ç”šè‡³å°†idå±æ€§å»æ‰ï¼Œä¹Ÿä¸å½±å“ç»“æœã€‚\n\nè¿™å°±æ˜¯æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…ï¼\n\n# ä½¿ç”¨æ³¨è§£\n\n## ä½¿ç”¨æ³¨è§£\n\njdk1.5å¼€å§‹æ”¯æŒæ³¨è§£ï¼Œspring2.5å¼€å§‹å…¨é¢æ”¯æŒæ³¨è§£ã€‚\n\nå‡†å¤‡å·¥ä½œï¼šåˆ©ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å…¥å±æ€§ã€‚\n\n1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥contextæ–‡ä»¶å¤´\n\n```\nxmlns:context=\"http://www.springframework.org/schema/context\"\n\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context.xsd\n```\n\n2ã€å¼€å¯å±æ€§æ³¨è§£æ”¯æŒï¼\n\n```\n<context:annotation-config/>\n```\n\n### @Autowired\n\n- @Autowiredæ˜¯æŒ‰ç±»å‹è‡ªåŠ¨è½¬é…çš„ï¼Œä¸æ”¯æŒidåŒ¹é…ã€‚\n- éœ€è¦å¯¼å…¥ spring-aopçš„åŒ…ï¼\n\næµ‹è¯•ï¼š\n\n1ã€å°†Userç±»ä¸­çš„setæ–¹æ³•å»æ‰ï¼Œä½¿ç”¨@Autowiredæ³¨è§£\n\n```\npublicÂ classÂ UserÂ {\nÂ  Â @Autowired\nÂ  Â privateÂ CatÂ cat;\nÂ  Â @Autowired\nÂ  Â privateÂ DogÂ dog;\nÂ  Â privateÂ StringÂ str;\n\nÂ  Â publicÂ CatÂ getCat() {\nÂ  Â  Â  Â returnÂ cat;\nÂ  }\nÂ  Â publicÂ DogÂ getDog() {\nÂ  Â  Â  Â returnÂ dog;\nÂ  }\nÂ  Â publicÂ StringÂ getStr() {\nÂ  Â  Â  Â returnÂ str;\nÂ  }\n}\n```\n\n2ã€æ­¤æ—¶é…ç½®æ–‡ä»¶å†…å®¹\n\n```\n<context:annotation-config/>\n\n<beanÂ id=\"dog\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"cat\"Â class=\"com.kuang.pojo.Cat\"/>\n<beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"/>\n```\n\n3ã€æµ‹è¯•ï¼ŒæˆåŠŸè¾“å‡ºç»“æœï¼\n\n**ç§‘æ™®**\n\n@Autowired(required=false) Â è¯´æ˜ï¼šfalseï¼Œå¯¹è±¡å¯ä»¥ä¸ºnullï¼›trueï¼Œå¯¹è±¡å¿…é¡»å­˜å¯¹è±¡ï¼Œä¸èƒ½ä¸ºnullã€‚\n\n```\n//å¦‚æœå…è®¸å¯¹è±¡ä¸ºnullï¼Œè®¾ç½®required = false,é»˜è®¤ä¸ºtrue\n@Autowired(requiredÂ =Â false)\nprivateÂ CatÂ cat;\n```\n\n### @Qualifier\n\n- @Autowiredæ˜¯æ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…çš„ï¼ŒåŠ ä¸Š@Qualifieråˆ™å¯ä»¥æ ¹æ®byNameçš„æ–¹å¼è‡ªåŠ¨è£…é…\n- @Qualifierä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚\n\næµ‹è¯•å®éªŒæ­¥éª¤ï¼š\n\n1ã€é…ç½®æ–‡ä»¶ä¿®æ”¹å†…å®¹ï¼Œä¿è¯ç±»å‹å­˜åœ¨å¯¹è±¡ã€‚ä¸”åå­—ä¸ä¸ºç±»çš„é»˜è®¤åå­—ï¼\n\n```\n<beanÂ id=\"dog1\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"dog2\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"cat1\"Â class=\"com.kuang.pojo.Cat\"/>\n<beanÂ id=\"cat2\"Â class=\"com.kuang.pojo.Cat\"/>\n```\n\n2ã€æ²¡æœ‰åŠ Qualifieræµ‹è¯•ï¼Œç›´æ¥æŠ¥é”™\n\n3ã€åœ¨å±æ€§ä¸Šæ·»åŠ Qualifieræ³¨è§£\n\n```\n@Autowired\n@Qualifier(valueÂ =Â \"cat2\")\nprivateÂ CatÂ cat;\n@Autowired\n@Qualifier(valueÂ =Â \"dog2\")\nprivateÂ DogÂ dog;\n```\n\næµ‹è¯•ï¼ŒæˆåŠŸè¾“å‡ºï¼\n\n### @Resource\n\n- @Resourceå¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ï¼›\n- å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›\n- å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚\n- éƒ½ä¸æˆåŠŸï¼Œåˆ™æŠ¥å¼‚å¸¸ã€‚\n\nå®ä½“ç±»ï¼š\n\n```\npublicÂ classÂ UserÂ {\nÂ  Â //å¦‚æœå…è®¸å¯¹è±¡ä¸ºnullï¼Œè®¾ç½®required = false,é»˜è®¤ä¸ºtrue\nÂ  Â @Resource(nameÂ =Â \"cat2\")\nÂ  Â privateÂ CatÂ cat;\nÂ  Â @Resource\nÂ  Â privateÂ DogÂ dog;\nÂ  Â privateÂ StringÂ str;\n}\n```\n\nbeans.xml\n\n```\n<beanÂ id=\"dog\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"cat1\"Â class=\"com.kuang.pojo.Cat\"/>\n<beanÂ id=\"cat2\"Â class=\"com.kuang.pojo.Cat\"/>\n\n<beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"/>\n```\n\næµ‹è¯•ï¼šç»“æœOK\n\né…ç½®æ–‡ä»¶2ï¼šbeans.xml ï¼Œ åˆ æ‰cat2\n\n```\n<beanÂ id=\"dog\"Â class=\"com.kuang.pojo.Dog\"/>\n<beanÂ id=\"cat1\"Â class=\"com.kuang.pojo.Cat\"/>\n```\n\nå®ä½“ç±»ä¸Šåªä¿ç•™æ³¨è§£\n\n```\n@Resource\nprivateÂ CatÂ cat;\n@Resource\nprivateÂ DogÂ dog;\n```\n\nç»“æœï¼šOK\n\nç»“è®ºï¼šå…ˆè¿›è¡ŒbyNameæŸ¥æ‰¾ï¼Œå¤±è´¥ï¼›å†è¿›è¡ŒbyTypeæŸ¥æ‰¾ï¼ŒæˆåŠŸã€‚\n\n## å°ç»“\n\n@Autowiredä¸@Resourceå¼‚åŒï¼š\n\n1ã€@Autowiredä¸@Resourceéƒ½å¯ä»¥ç”¨æ¥è£…é…beanã€‚éƒ½å¯ä»¥å†™åœ¨å­—æ®µä¸Šï¼Œæˆ–å†™åœ¨setteræ–¹æ³•ä¸Šã€‚\n\n2ã€@Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ˆå±äºspringè§„èŒƒï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸null å€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseï¼Œå¦‚ï¼š@Autowired(required=false) ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨åç§°è£…é…å¯ä»¥ç»“åˆ@Qualifieræ³¨è§£è¿›è¡Œä½¿ç”¨\n\n3ã€@Resourceï¼ˆå±äºJ2EEå¤è¿”ï¼‰ï¼Œé»˜è®¤æŒ‰ç…§åç§°è¿›è¡Œè£…é…ï¼Œåç§°å¯ä»¥é€šè¿‡nameå±æ€§è¿›è¡ŒæŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šnameå±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåè¿›è¡ŒæŒ‰ç…§åç§°æŸ¥æ‰¾ï¼Œå¦‚æœæ³¨è§£å†™åœ¨setteræ–¹æ³•ä¸Šé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœnameå±æ€§ä¸€æ—¦æŒ‡å®šï¼Œå°±åªä¼šæŒ‰ç…§åç§°è¿›è¡Œè£…é…ã€‚\n\nå®ƒä»¬çš„ä½œç”¨ç›¸åŒéƒ½æ˜¯ç”¨æ³¨è§£æ–¹å¼æ³¨å…¥å¯¹è±¡ï¼Œä½†æ‰§è¡Œé¡ºåºä¸åŒã€‚@Autowiredå…ˆbyTypeï¼Œ@Resourceå…ˆbyNameã€‚\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"ä½¿ç”¨æ³¨è§£å¼€å‘","url":"/2022/06/06/ä½¿ç”¨æ³¨è§£å¼€å‘/","content":"\n## è¯´æ˜\n\nåœ¨spring4ä¹‹åï¼Œæƒ³è¦ä½¿ç”¨æ³¨è§£å½¢å¼ï¼Œå¿…é¡»å¾—è¦å¼•å…¥aopçš„åŒ…\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-10.png)\n\nåœ¨é…ç½®æ–‡ä»¶å½“ä¸­ï¼Œè¿˜å¾—è¦å¼•å…¥ä¸€ä¸ªcontextçº¦æŸ\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xmlns:context=\"http://www.springframework.org/schema/context\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\nÂ  Â  Â  Â http://www.springframework.org/schema/context\nÂ  Â  Â  Â http://www.springframework.org/schema/context/spring-context.xsd\">\n\n</beans>\n```\n\n## Beançš„å®ç°\n\næˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨ bean çš„æ ‡ç­¾è¿›è¡Œbeanæ³¨å…¥ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³¨è§£ï¼\n\n1ã€é…ç½®æ‰«æå“ªäº›åŒ…ä¸‹çš„æ³¨è§£\n\n```\n<!--æŒ‡å®šæ³¨è§£æ‰«æåŒ…-->\n<context:component-scanÂ base-package=\"com.kuang.pojo\"/>\n```\n\n2ã€åœ¨æŒ‡å®šåŒ…ä¸‹ç¼–å†™ç±»ï¼Œå¢åŠ æ³¨è§£\n\n```\n@Component(\"user\")\n// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ <bean id=\"user\" class=\"å½“å‰æ³¨è§£çš„ç±»\"/>\npublicÂ classÂ UserÂ {\nÂ  Â publicÂ StringÂ nameÂ =Â \"ç§¦ç–†\";\n}\n```\n\n3ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ test(){\nÂ  Â ApplicationContextÂ applicationContextÂ =\nÂ  Â  Â  Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â UserÂ userÂ =Â (User)Â applicationContext.getBean(\"user\");\nÂ  Â System.out.println(user.name);\n}\n```\n\n## å±æ€§æ³¨å…¥\n\nä½¿ç”¨æ³¨è§£æ³¨å…¥å±æ€§\n\n1ã€å¯ä»¥ä¸ç”¨æä¾›setæ–¹æ³•ï¼Œç›´æ¥åœ¨ç›´æ¥åä¸Šæ·»åŠ @value(\"å€¼\")\n\n```\n@Component(\"user\")\n// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ <bean id=\"user\" class=\"å½“å‰æ³¨è§£çš„ç±»\"/>\npublicÂ classÂ UserÂ {\nÂ  Â @Value(\"ç§¦ç–†\")\nÂ  Â // ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ <property name=\"name\" value=\"ç§¦ç–†\"/>\nÂ  Â publicÂ StringÂ name;\n}\n```\n\n2ã€å¦‚æœæä¾›äº†setæ–¹æ³•ï¼Œåœ¨setæ–¹æ³•ä¸Šæ·»åŠ @value(\"å€¼\");\n\n```\n@Component(\"user\")\npublicÂ classÂ UserÂ {\n\nÂ  Â publicÂ StringÂ name;\n\nÂ  Â @Value(\"ç§¦ç–†\")\nÂ  Â publicÂ voidÂ setName(StringÂ name) {\nÂ  Â  Â  Â this.nameÂ =Â name;\nÂ  }\n}\n```\n\n## è¡ç”Ÿæ³¨è§£\n\næˆ‘ä»¬è¿™äº›æ³¨è§£ï¼Œå°±æ˜¯æ›¿ä»£äº†åœ¨é…ç½®æ–‡ä»¶å½“ä¸­é…ç½®æ­¥éª¤è€Œå·²ï¼æ›´åŠ çš„æ–¹ä¾¿å¿«æ·ï¼\n\n**@Componentä¸‰ä¸ªè¡ç”Ÿæ³¨è§£**\n\nä¸ºäº†æ›´å¥½çš„è¿›è¡Œåˆ†å±‚ï¼ŒSpringå¯ä»¥ä½¿ç”¨å…¶å®ƒä¸‰ä¸ªæ³¨è§£ï¼ŒåŠŸèƒ½ä¸€æ ·ï¼Œç›®å‰ä½¿ç”¨å“ªä¸€ä¸ªåŠŸèƒ½éƒ½ä¸€æ ·ã€‚\n\n- @Controllerï¼šwebå±‚\n- @Serviceï¼šserviceå±‚\n- @Repositoryï¼šdaoå±‚\n\nå†™ä¸Šè¿™äº›æ³¨è§£ï¼Œå°±ç›¸å½“äºå°†è¿™ä¸ªç±»äº¤ç»™Springç®¡ç†è£…é…äº†ï¼\n\n## è‡ªåŠ¨è£…é…æ³¨è§£\n\nåœ¨Beançš„è‡ªåŠ¨è£…é…å·²ç»è®²è¿‡äº†ï¼Œå¯ä»¥å›é¡¾ï¼\n\n## ä½œç”¨åŸŸ\n\n@scope\n\n- singletonï¼šé»˜è®¤çš„ï¼ŒSpringä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚å…³é—­å·¥å‚ ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šé”€æ¯ã€‚\n- prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚å…³é—­å·¥å‚ ï¼Œæ‰€æœ‰çš„å¯¹è±¡ä¸ä¼šé”€æ¯ã€‚å†…éƒ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå›æ”¶\n\n```\n@Controller(\"user\")\n@Scope(\"prototype\")\npublicÂ classÂ UserÂ {\nÂ  Â @Value(\"ç§¦ç–†\")\nÂ  Â publicÂ StringÂ name;\n}\n```\n\n## å°ç»“\n\n**XMLä¸æ³¨è§£æ¯”è¾ƒ**\n\n- XMLå¯ä»¥é€‚ç”¨ä»»ä½•åœºæ™¯ ï¼Œç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æ–¹ä¾¿\n- æ³¨è§£ä¸æ˜¯è‡ªå·±æä¾›çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œå¼€å‘ç®€å•æ–¹ä¾¿\n\n**xmlä¸æ³¨è§£æ•´åˆå¼€å‘** ï¼šæ¨èæœ€ä½³å®è·µ\n\n- xmlç®¡ç†Bean\n- æ³¨è§£å®Œæˆå±æ€§æ³¨å…¥\n- ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ å¯ä»¥ä¸ç”¨æ‰«æï¼Œæ‰«ææ˜¯ä¸ºäº†ç±»ä¸Šçš„æ³¨è§£\n\n```\n<context:annotation-config/>Â Â \n```\n\nä½œç”¨ï¼š\n\n- è¿›è¡Œæ³¨è§£é©±åŠ¨æ³¨å†Œï¼Œä»è€Œä½¿æ³¨è§£ç”Ÿæ•ˆ\n- ç”¨äºæ¿€æ´»é‚£äº›å·²ç»åœ¨springå®¹å™¨é‡Œæ³¨å†Œè¿‡çš„beanä¸Šé¢çš„æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºçš„å‘Springæ³¨å†Œ\n- å¦‚æœä¸æ‰«æåŒ…ï¼Œå°±éœ€è¦æ‰‹åŠ¨é…ç½®bean\n- å¦‚æœä¸åŠ æ³¨è§£é©±åŠ¨ï¼Œåˆ™æ³¨å…¥çš„å€¼ä¸ºnullï¼\n\n## åŸºäºJavaç±»è¿›è¡Œé…ç½®\n\nJavaConfig åŸæ¥æ˜¯ Spring çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒé€šè¿‡ Java ç±»çš„æ–¹å¼æä¾› Bean çš„å®šä¹‰ä¿¡æ¯ï¼Œåœ¨ Spring4 çš„ç‰ˆæœ¬ï¼Œ JavaConfig å·²æ­£å¼æˆä¸º Spring4 çš„æ ¸å¿ƒåŠŸèƒ½ ã€‚\n\næµ‹è¯•ï¼š\n\n1ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±»ï¼ŒDog\n\n```\n@ComponentÂ Â //å°†è¿™ä¸ªç±»æ ‡æ³¨ä¸ºSpringçš„ä¸€ä¸ªç»„ä»¶ï¼Œæ”¾åˆ°å®¹å™¨ä¸­ï¼\npublicÂ classÂ DogÂ {\nÂ  Â publicÂ StringÂ nameÂ =Â \"dog\";\n}\n```\n\n2ã€æ–°å»ºä¸€ä¸ªconfigé…ç½®åŒ…ï¼Œç¼–å†™ä¸€ä¸ªMyConfigé…ç½®ç±»\n\n```\n@ConfigurationÂ Â //ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»\npublicÂ classÂ MyConfigÂ {\n\nÂ  Â @BeanÂ //é€šè¿‡æ–¹æ³•æ³¨å†Œä¸€ä¸ªbeanï¼Œè¿™é‡Œçš„è¿”å›å€¼å°±Beançš„ç±»å‹ï¼Œæ–¹æ³•åå°±æ˜¯beançš„idï¼\nÂ  Â publicÂ DogÂ dog(){\nÂ  Â  Â  Â returnÂ newÂ Dog();\nÂ  }\n\n}\n```\n\n3ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ test2(){\nÂ  Â ApplicationContextÂ applicationContextÂ =\nÂ  Â  Â  Â  Â  Â newÂ AnnotationConfigApplicationContext(MyConfig.class);\nÂ  Â DogÂ dogÂ =Â (Dog)Â applicationContext.getBean(\"dog\");\nÂ  Â System.out.println(dog.name);\n}\n```\n\n4ã€æˆåŠŸè¾“å‡ºç»“æœï¼\n\n**å¯¼å…¥å…¶ä»–é…ç½®å¦‚ä½•åšå‘¢ï¼Ÿ**\n\n1ã€æˆ‘ä»¬å†ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼\n\n```\n@ConfigurationÂ Â //ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»\npublicÂ classÂ MyConfig2Â {\n}\n```\n\n2ã€åœ¨ä¹‹å‰çš„é…ç½®ç±»ä¸­æˆ‘ä»¬æ¥é€‰æ‹©å¯¼å…¥è¿™ä¸ªé…ç½®ç±»\n\n```\n@Configuration\n@Import(MyConfig2.class) Â //å¯¼å…¥åˆå¹¶å…¶ä»–é…ç½®ç±»ï¼Œç±»ä¼¼äºé…ç½®æ–‡ä»¶ä¸­çš„ inculde æ ‡ç­¾\npublicÂ classÂ MyConfigÂ {\n\nÂ  Â @Bean\nÂ  Â publicÂ DogÂ dog(){\nÂ  Â  Â  Â returnÂ newÂ Dog();\nÂ  }\n\n}\n```\n\nå…³äºè¿™ç§Javaç±»çš„é…ç½®æ–¹å¼ï¼Œæˆ‘ä»¬åœ¨ä¹‹åçš„SpringBoot å’Œ SpringCloudä¸­è¿˜ä¼šå¤§é‡çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™äº›æ³¨è§£çš„ä½œç”¨å³å¯ï¼\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"Spring:ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰","url":"/2022/06/05/springä¾èµ–æ³¨å…¥ï¼ˆdiï¼‰/","content":"\n- ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚\n- ä¾èµ– : æŒ‡Beanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ . Beanå¯¹è±¡çš„ä¾èµ–èµ„æº .\n- æ³¨å…¥ : æŒ‡Beanå¯¹è±¡æ‰€ä¾èµ–çš„èµ„æº , ç”±å®¹å™¨æ¥è®¾ç½®å’Œè£…é…\n\n## æ„é€ å™¨æ³¨å…¥\n\næˆ‘ä»¬åœ¨ä¹‹å‰çš„æ¡ˆä¾‹å·²ç»è®²è¿‡äº†\n\n## Set æ³¨å…¥ ï¼ˆé‡ç‚¹ï¼‰\n\nè¦æ±‚è¢«æ³¨å…¥çš„å±æ€§ , å¿…é¡»æœ‰setæ–¹æ³• , setæ–¹æ³•çš„æ–¹æ³•åç”±set + å±æ€§é¦–å­—æ¯å¤§å†™ , å¦‚æœå±æ€§æ˜¯booleanç±»å‹ , æ²¡æœ‰setæ–¹æ³• , æ˜¯ is .\n\næµ‹è¯•pojoç±» :\n\nAddress.java\n\n```\nÂ publicÂ classÂ AddressÂ {\nÂ \nÂ Â Â  Â privateÂ StringÂ address;\nÂ \nÂ Â Â  Â publicÂ StringÂ getAddress() {\nÂ Â Â  Â  Â  Â returnÂ address;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setAddress(StringÂ address) {\nÂ Â Â  Â  Â  Â this.addressÂ =Â address;\nÂ Â Â  }\nÂ }\n```\n\nStudent.java\n\n```\n\nÂ publicÂ classÂ StudentÂ {\nÂ \nÂ Â Â  Â privateÂ StringÂ name;\nÂ Â Â  Â privateÂ AddressÂ address;\nÂ Â Â  Â privateÂ String[]Â books;\nÂ Â Â  Â privateÂ List<String>Â hobbys;\nÂ Â Â  Â privateÂ Map<String,String>Â card;\nÂ Â Â  Â privateÂ Set<String>Â games;\nÂ Â Â  Â privateÂ StringÂ wife;\nÂ Â Â  Â privateÂ PropertiesÂ info;\nÂ \nÂ Â Â  Â publicÂ voidÂ setName(StringÂ name) {\nÂ Â Â  Â  Â  Â this.nameÂ =Â name;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setAddress(AddressÂ address) {\nÂ Â Â  Â  Â  Â this.addressÂ =Â address;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setBooks(String[]Â books) {\nÂ Â Â  Â  Â  Â this.booksÂ =Â books;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setHobbys(List<String>Â hobbys) {\nÂ Â Â  Â  Â  Â this.hobbysÂ =Â hobbys;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setCard(Map<String,Â String>Â card) {\nÂ Â Â  Â  Â  Â this.cardÂ =Â card;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setGames(Set<String>Â games) {\nÂ Â Â  Â  Â  Â this.gamesÂ =Â games;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setWife(StringÂ wife) {\nÂ Â Â  Â  Â  Â this.wifeÂ =Â wife;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setInfo(PropertiesÂ info) {\nÂ Â Â  Â  Â  Â this.infoÂ =Â info;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ show(){\nÂ Â Â  Â  Â  Â System.out.println(\"name=\"+Â name\nÂ Â Â  Â  Â  Â  Â  Â  Â  Â +Â \",address=\"+Â address.getAddress()\nÂ Â Â  Â  Â  Â  Â  Â  Â  Â +Â \",books=\"\nÂ Â Â  Â  Â  );\nÂ Â Â  Â  Â  Â forÂ (StringÂ book:books){\nÂ Â Â  Â  Â  Â  Â  Â System.out.print(\"<<\"+book+\">>\\t\");\nÂ Â Â  Â  Â  }\nÂ Â Â  Â  Â  Â System.out.println(\"\\nçˆ±å¥½:\"+hobbys);\nÂ \nÂ Â Â  Â  Â  Â System.out.println(\"card:\"+card);\nÂ \nÂ Â Â  Â  Â  Â System.out.println(\"games:\"+games);\nÂ \nÂ Â Â  Â  Â  Â System.out.println(\"wife:\"+wife);\nÂ \nÂ Â Â  Â  Â  Â System.out.println(\"info:\"+info);\nÂ \nÂ Â Â  }\nÂ }\n```\n\n### 1ã€**å¸¸é‡æ³¨å…¥**\n\n```\nÂ <beanÂ id=\"student\"Â class=\"com.kuang.pojo.Student\">\nÂ Â Â  Â <propertyÂ name=\"name\"Â value=\"å°æ˜\"/>\nÂ </bean>\n```\n\næµ‹è¯•ï¼š\n\n```\nÂ @Test\nÂ publicÂ voidÂ test01(){\nÂ Â Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"applicationContext.xml\");\nÂ \nÂ Â Â  Â StudentÂ studentÂ =Â (Student)Â context.getBean(\"student\");\nÂ \nÂ Â Â  Â System.out.println(student.getName());\nÂ \nÂ }\n```\n\n### 2ã€**Beanæ³¨å…¥**\n\næ³¨æ„ç‚¹ï¼šè¿™é‡Œçš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œref\n\n```\nÂ <beanÂ id=\"addr\"Â class=\"com.kuang.pojo.Address\">\nÂ Â Â  Â <propertyÂ name=\"address\"Â value=\"é‡åº†\"/>\nÂ </bean>\nÂ \nÂ <beanÂ id=\"student\"Â class=\"com.kuang.pojo.Student\">\nÂ Â Â  Â <propertyÂ name=\"name\"Â value=\"å°æ˜\"/>\nÂ Â Â  Â <propertyÂ name=\"address\"Â ref=\"addr\"/>\nÂ </bean>\n```\n\n### 3ã€æ•°ç»„æ³¨å…¥\n\n```\nÂ <beanÂ id=\"student\"Â class=\"com.kuang.pojo.Student\">\nÂ Â Â  Â <propertyÂ name=\"name\"Â value=\"å°æ˜\"/>\nÂ Â Â  Â <propertyÂ name=\"address\"Â ref=\"addr\"/>\nÂ Â Â  Â <propertyÂ name=\"books\">\nÂ Â Â  Â  Â  Â <array>\nÂ Â Â  Â  Â  Â  Â  Â <value>è¥¿æ¸¸è®°</value>\nÂ Â Â  Â  Â  Â  Â  Â <value>çº¢æ¥¼æ¢¦</value>\nÂ Â Â  Â  Â  Â  Â  Â <value>æ°´æµ’ä¼ </value>\nÂ Â Â  Â  Â  Â </array>\nÂ Â Â  Â </property>\nÂ </bean>\n```\n\n### 4ã€**Listæ³¨å…¥**\n\n```\nÂ <propertyÂ name=\"hobbys\">\nÂ Â Â  Â <list>\nÂ Â Â  Â  Â  Â <value>å¬æ­Œ</value>\nÂ Â Â  Â  Â  Â <value>çœ‹ç”µå½±</value>\nÂ Â Â  Â  Â  Â <value>çˆ¬å±±</value>\nÂ Â Â  Â </list>\nÂ </property>\n```\n\n### 5ã€**Mapæ³¨å…¥**\n\n```\nÂ <propertyÂ name=\"card\">\nÂ Â Â  Â <map>\nÂ Â Â  Â  Â  Â <entryÂ key=\"ä¸­å›½é‚®æ”¿\"Â value=\"456456456465456\"/>\nÂ Â Â  Â  Â  Â <entryÂ key=\"å»ºè®¾\"Â value=\"1456682255511\"/>\nÂ Â Â  Â </map>\nÂ </property>\n```\n\n### 6ã€**setæ³¨å…¥**\n\n```\nÂ <propertyÂ name=\"games\">\nÂ Â Â  Â <set>\nÂ Â Â  Â  Â  Â <value>LOL</value>\nÂ Â Â  Â  Â  Â <value>BOB</value>\nÂ Â Â  Â  Â  Â <value>COC</value>\nÂ Â Â  Â </set>\nÂ </property>\n```\n\n### 7ã€**Nullæ³¨å…¥**\n\n```\nÂ <propertyÂ name=\"wife\"><null/></property>\n```\n\n### 8ã€**Propertiesæ³¨å…¥**\n\n```\nÂ <propertyÂ name=\"info\">\nÂ Â Â  Â <props>\nÂ Â Â  Â  Â  Â <propÂ key=\"å­¦å·\">20190604</prop>\nÂ Â Â  Â  Â  Â <propÂ key=\"æ€§åˆ«\">ç”·</prop>\nÂ Â Â  Â  Â  Â <propÂ key=\"å§“å\">å°æ˜</prop>\nÂ Â Â  Â </props>\nÂ </property>\n```\n\næµ‹è¯•ç»“æœï¼š\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-8.png)\n\n## på‘½åå’Œcå‘½åæ³¨å…¥\n\nUser.java ï¼šã€æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æœ‰å‚æ„é€ å™¨ï¼ã€‘\n\n```\nÂ publicÂ classÂ UserÂ {\nÂ Â Â  Â privateÂ StringÂ name;\nÂ Â Â  Â privateÂ intÂ age;\nÂ \nÂ Â Â  Â publicÂ voidÂ setName(StringÂ name) {\nÂ Â Â  Â  Â  Â this.nameÂ =Â name;\nÂ Â Â  }\nÂ \nÂ Â Â  Â publicÂ voidÂ setAge(intÂ age) {\nÂ Â Â  Â  Â  Â this.ageÂ =Â age;\nÂ Â Â  }\nÂ \nÂ Â Â  Â @Override\nÂ Â Â  Â publicÂ StringÂ toString() {\nÂ Â Â  Â  Â  Â returnÂ \"User{\"Â +\nÂ Â Â  Â  Â  Â  Â  Â  Â  Â \"name='\"Â +Â nameÂ +Â '\\''Â +\nÂ Â Â  Â  Â  Â  Â  Â  Â  Â \", age=\"Â +Â ageÂ +\nÂ Â Â  Â  Â  Â  Â  Â  Â  Â '}';\nÂ Â Â  }\nÂ }\n```\n\n1ã€På‘½åç©ºé—´æ³¨å…¥ : éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸæ–‡ä»¶\n\n```\nÂ å¯¼å…¥çº¦æŸ : xmlns:p=\"http://www.springframework.org/schema/p\"\nÂ \nÂ <!--P(å±æ€§: properties)å‘½åç©ºé—´ , å±æ€§ä¾ç„¶è¦è®¾ç½®setæ–¹æ³•-->\nÂ <beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"Â p:name=\"ç‹‚ç¥\"Â p:age=\"18\"/>\n```\n\n2ã€c å‘½åç©ºé—´æ³¨å…¥ : éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­åŠ å…¥çº¦æŸæ–‡ä»¶\n\n```\nÂ å¯¼å…¥çº¦æŸ : xmlns:c=\"http://www.springframework.org/schema/c\"\nÂ <!--C(æ„é€ : Constructor)å‘½åç©ºé—´ , å±æ€§ä¾ç„¶è¦è®¾ç½®setæ–¹æ³•-->\nÂ <beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\"Â c:name=\"ç‹‚ç¥\"Â c:age=\"18\"/>\n```\n\nå‘ç°é—®é¢˜ï¼šçˆ†çº¢äº†ï¼Œåˆšæ‰æˆ‘ä»¬æ²¡æœ‰å†™æœ‰å‚æ„é€ ï¼\n\nè§£å†³ï¼šæŠŠæœ‰å‚æ„é€ å™¨åŠ ä¸Šï¼Œè¿™é‡Œä¹Ÿèƒ½çŸ¥é“ï¼Œc å°±æ˜¯æ‰€è°“çš„æ„é€ å™¨æ³¨å…¥ï¼\n\næµ‹è¯•ä»£ç ï¼š\n\n```\nÂ @Test\nÂ publicÂ voidÂ test02(){\nÂ Â Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"applicationContext.xml\");\nÂ Â Â  Â UserÂ userÂ =Â (User)Â context.getBean(\"user\");\nÂ Â Â  Â System.out.println(user);\nÂ }\n```\n\n## Beançš„ä½œç”¨åŸŸ\n\nåœ¨Springä¸­ï¼Œé‚£äº›ç»„æˆåº”ç”¨ç¨‹åºçš„ä¸»ä½“åŠç”±Spring IoCå®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ï¼Œè¢«ç§°ä¹‹ä¸ºbeanã€‚ç®€å•åœ°è®²ï¼Œbeanå°±æ˜¯ç”±IoCå®¹å™¨åˆå§‹åŒ–ã€è£…é…åŠç®¡ç†çš„å¯¹è±¡ .\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-9.png)\n\nå‡ ç§ä½œç”¨åŸŸä¸­ï¼Œrequestã€sessionä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„åº”ç”¨ä¸­ä½¿ç”¨ï¼ˆä¸å¿…å…³å¿ƒä½ æ‰€é‡‡ç”¨çš„æ˜¯ä»€ä¹ˆwebåº”ç”¨æ¡†æ¶ï¼‰ï¼Œåªèƒ½ç”¨åœ¨åŸºäºwebçš„Spring ApplicationContextç¯å¢ƒã€‚\n\n#### Singleton\n\nå½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºSingletonï¼Œé‚£ä¹ˆSpring IoCå®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„beanå®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹beançš„è¯·æ±‚ï¼Œåªè¦idä¸è¯¥beanå®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å›beançš„åŒä¸€å®ä¾‹ã€‚Singletonæ˜¯å•ä¾‹ç±»å‹ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªbeançš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä»–éƒ½å­˜åœ¨äº†ï¼Œæ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„ï¼ŒSingletonä½œç”¨åŸŸæ˜¯Springä¸­çš„ç¼ºçœä½œç”¨åŸŸã€‚è¦åœ¨XMLä¸­å°†beanå®šä¹‰æˆsingletonï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š\n\n```\nÂ <beanÂ id=\"ServiceImpl\"Â class=\"cn.csdn.service.ServiceImpl\"Â scope=\"singleton\">\n```\n\næµ‹è¯•ï¼š\n\n```\nÂ @Test\nÂ publicÂ voidÂ test03(){\nÂ Â Â  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"applicationContext.xml\");\nÂ Â Â  Â UserÂ userÂ =Â (User)Â context.getBean(\"user\");\nÂ Â Â  Â UserÂ user2Â =Â (User)Â context.getBean(\"user\");\nÂ Â Â  Â System.out.println(user==user2);\nÂ }\n```\n\n#### Prototype\n\nå½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºPrototypeï¼Œè¡¨ç¤ºä¸€ä¸ªbeanå®šä¹‰å¯¹åº”å¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚Prototypeä½œç”¨åŸŸçš„beanä¼šå¯¼è‡´åœ¨æ¯æ¬¡å¯¹è¯¥beanè¯·æ±‚ï¼ˆå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ªbeanä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„getBean()æ–¹æ³•ï¼‰æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ã€‚Prototypeæ˜¯åŸå‹ç±»å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨çš„æ—¶å€™å¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è·å–beançš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„beanåº”è¯¥ä½¿ç”¨prototypeä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„beanåˆ™åº”è¯¥ä½¿ç”¨singletonä½œç”¨åŸŸã€‚åœ¨XMLä¸­å°†beanå®šä¹‰æˆprototypeï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š\n\n```\nÂ <beanÂ id=\"account\"Â class=\"com.foo.DefaultAccount\"Â scope=\"prototype\"/>Â Â \nÂ Â æˆ–è€…\nÂ <beanÂ id=\"account\"Â class=\"com.foo.DefaultAccount\"Â singleton=\"false\"/>\n```\n\n#### Request\n\nå½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºRequestï¼Œè¡¨ç¤ºåœ¨ä¸€æ¬¡HTTPè¯·æ±‚ä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼›å³æ¯ä¸ªHTTPè¯·æ±‚éƒ½ä¼šæœ‰å„è‡ªçš„beanå®ä¾‹ï¼Œå®ƒä»¬ä¾æ®æŸä¸ªbeanå®šä¹‰åˆ›å»ºè€Œæˆã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚è€ƒè™‘ä¸‹é¢beanå®šä¹‰ï¼š\n\n```\nÂ <beanÂ id=\"loginAction\"Â class=cn.csdn.LoginAction\" scope=\"request\"/>\n```\n\né’ˆå¯¹æ¯æ¬¡HTTPè¯·æ±‚ï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®loginAction beançš„å®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„LoginAction beanå®ä¾‹ï¼Œä¸”è¯¥loginAction beanå®ä¾‹ä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆï¼Œå› æ­¤å¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œå…¶ä»–è¯·æ±‚ä¸­æ ¹æ®loginAction beanå®šä¹‰åˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªè¯·æ±‚çš„çŠ¶æ€å˜åŒ–ã€‚å½“å¤„ç†è¯·æ±‚ç»“æŸï¼Œrequestä½œç”¨åŸŸçš„beanå®ä¾‹å°†è¢«é”€æ¯ã€‚\n\n#### Session\n\nå½“ä¸€ä¸ªbeançš„ä½œç”¨åŸŸä¸ºSessionï¼Œè¡¨ç¤ºåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚è€ƒè™‘ä¸‹é¢beanå®šä¹‰ï¼š\n\n```\nÂ <beanÂ id=\"userPreferences\"Â class=\"com.foo.UserPreferences\"Â scope=\"session\"/>\n```\n\né’ˆå¯¹æŸä¸ªHTTP Sessionï¼ŒSpringå®¹å™¨ä¼šæ ¹æ®userPreferences beanå®šä¹‰åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„userPreferences beanå®ä¾‹ï¼Œä¸”è¯¥userPreferences beanä»…åœ¨å½“å‰HTTP Sessionå†…æœ‰æ•ˆã€‚ä¸requestä½œç”¨åŸŸä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ”¾å¿ƒçš„æ›´æ”¹æ‰€åˆ›å»ºå®ä¾‹çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œåˆ«çš„HTTP Sessionä¸­æ ¹æ®userPreferencesåˆ›å»ºçš„å®ä¾‹ï¼Œå°†ä¸ä¼šçœ‹åˆ°è¿™äº›ç‰¹å®šäºæŸä¸ªHTTP Sessionçš„çŠ¶æ€å˜åŒ–ã€‚å½“HTTP Sessionæœ€ç»ˆè¢«åºŸå¼ƒçš„æ—¶å€™ï¼Œåœ¨è¯¥HTTP Sessionä½œç”¨åŸŸå†…çš„beanä¹Ÿä¼šè¢«åºŸå¼ƒæ‰ã€‚\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"Spring:å¿«é€Ÿä¸Šæ‰‹Spring","url":"/2022/06/05/springå¿«é€Ÿä¸Šæ‰‹spring/","content":"\n## HelloSpring\n\n> å¯¼å…¥JaråŒ…\n\næ³¨ : spring éœ€è¦å¯¼å…¥commons-loggingè¿›è¡Œæ—¥å¿—è®°å½• . æˆ‘ä»¬åˆ©ç”¨maven , ä»–ä¼šè‡ªåŠ¨ä¸‹è½½å¯¹åº”çš„ä¾èµ–é¡¹ .\n\n```\n<dependency>\nÂ  Â <groupId>org.springframework</groupId>\nÂ  Â <artifactId>spring-webmvc</artifactId>\nÂ  Â <version>5.1.10.RELEASE</version>\n</dependency>\n```\n\n> ç¼–å†™ä»£ç \n\n1ã€ç¼–å†™ä¸€ä¸ªHelloå®ä½“ç±»\n\n```\npublicÂ classÂ HelloÂ {\nÂ  Â privateÂ StringÂ name;\nÂ  Â publicÂ StringÂ getName() {\nÂ  Â  Â  Â returnÂ name;\nÂ  }\nÂ  Â publicÂ voidÂ setName(StringÂ name) {\nÂ  Â  Â  Â this.nameÂ =Â name;\nÂ  }\nÂ  Â publicÂ voidÂ show(){\nÂ  Â  Â  Â System.out.println(\"Hello,\"+Â nameÂ );\nÂ  }\n}\n```\n\n2ã€ç¼–å†™æˆ‘ä»¬çš„springæ–‡ä»¶ , è¿™é‡Œæˆ‘ä»¬å‘½åä¸ºbeans.xml\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\">\nÂ  Â <!--beanå°±æ˜¯javaå¯¹è±¡ , ç”±Springåˆ›å»ºå’Œç®¡ç†-->\nÂ  Â <beanÂ id=\"hello\"Â class=\"com.kuang.pojo.Hello\">\nÂ  Â  Â  Â <propertyÂ name=\"name\"Â value=\"Spring\"/>\nÂ  Â </bean>\n\n</beans>\n```\n\n3ã€æˆ‘ä»¬å¯ä»¥å»è¿›è¡Œæµ‹è¯•äº† .\n\n```\n@Test\npublicÂ voidÂ test(){\nÂ  Â //è§£æbeans.xmlæ–‡ä»¶ , ç”Ÿæˆç®¡ç†ç›¸åº”çš„Beanå¯¹è±¡\nÂ  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â //getBean : å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id .\nÂ  Â HelloÂ helloÂ =Â (Hello)Â context.getBean(\"hello\");\nÂ  Â hello.show();\n}\n```\n\n> æ€è€ƒ\n\n- Hello å¯¹è±¡æ˜¯è°åˆ›å»ºçš„ ? Â ã€hello å¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„\n- Hello å¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ ? Â hello å¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„\n\nè¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ :\n\n- æ§åˆ¶ : è°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»º , ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ , ä½¿ç”¨Springå , å¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„\n- åè½¬ : ç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ , è€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ .\n\nä¾èµ–æ³¨å…¥ : å°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„.\n\nIOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶\n\nå¯ä»¥é€šè¿‡newClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç  .\n\n> ä¿®æ”¹æ¡ˆä¾‹ä¸€\n\næˆ‘ä»¬åœ¨æ¡ˆä¾‹ä¸€ä¸­ï¼Œ æ–°å¢ä¸€ä¸ªSpringé…ç½®æ–‡ä»¶beans.xml\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\">\nÂ  Â <beanÂ id=\"MysqlImpl\"Â class=\"com.kuang.dao.impl.UserDaoMySqlImpl\"/>\nÂ  Â <beanÂ id=\"OracleImpl\"Â class=\"com.kuang.dao.impl.UserDaoOracleImpl\"/>\n\nÂ  Â <beanÂ id=\"ServiceImpl\"Â class=\"com.kuang.service.impl.UserServiceImpl\">\nÂ  Â  Â  Â <!--æ³¨æ„: è¿™é‡Œçš„nameå¹¶ä¸æ˜¯å±æ€§ , è€Œæ˜¯setæ–¹æ³•åé¢çš„é‚£éƒ¨åˆ† , é¦–å­—æ¯å°å†™-->\nÂ  Â  Â  Â <!--å¼•ç”¨å¦å¤–ä¸€ä¸ªbean , ä¸æ˜¯ç”¨value è€Œæ˜¯ç”¨ ref-->\nÂ  Â  Â  Â <propertyÂ name=\"userDao\"Â ref=\"OracleImpl\"/>\nÂ  Â </bean>\n\n</beans>\n```\n\næµ‹è¯•ï¼\n\n```\n@Test\npublicÂ voidÂ test2(){\nÂ  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â UserServiceImplÂ serviceImplÂ =Â (UserServiceImpl)Â context.getBean(\"ServiceImpl\");\nÂ  Â serviceImpl.getUser();\n}\n```\n\nOK , åˆ°äº†ç°åœ¨ , æˆ‘ä»¬å½»åº•ä¸ç”¨å†ç¨‹åºä¸­å»æ”¹åŠ¨äº† , è¦å®ç°ä¸åŒçš„æ“ä½œ , åªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ , æ‰€è°“çš„IoC,ä¸€å¥è¯æå®š : å¯¹è±¡ç”±Spring æ¥åˆ›å»º , ç®¡ç† , è£…é… !\n\n## IOCåˆ›å»ºå¯¹è±¡æ–¹å¼\n\n> é€šè¿‡æ— å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º\n\n1ã€User.java\n\n```\npublicÂ classÂ UserÂ {\nÂ  Â privateÂ StringÂ name;\nÂ  Â publicÂ User() {\nÂ  Â  Â  Â System.out.println(\"useræ— å‚æ„é€ æ–¹æ³•\");\nÂ  }\nÂ  Â publicÂ voidÂ setName(StringÂ name) {\nÂ  Â  Â  Â this.nameÂ =Â name;\nÂ  }\nÂ  Â publicÂ voidÂ show(){\nÂ  Â  Â  Â System.out.println(\"name=\"+Â nameÂ );\nÂ  }\n}\n```\n\n2ã€beans.xml\n\n```\n<?xmlÂ version=\"1.0\" encoding=\"UTF-8\"?>\n<beansÂ xmlns=\"http://www.springframework.org/schema/beans\"\nÂ  Â  Â Â xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nÂ  Â  Â Â xsi:schemaLocation=\"http://www.springframework.org/schema/beans\nÂ  Â  Â  Â http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\nÂ  Â <beanÂ id=\"user\"Â class=\"com.kuang.pojo.User\">\nÂ  Â  Â  Â <propertyÂ name=\"name\"Â value=\"kuangshen\"/>\nÂ  Â </bean>\n</beans>\n```\n\n3ã€æµ‹è¯•ç±»\n\n```\n@Test\npublicÂ voidÂ test(){\nÂ  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â //åœ¨æ‰§è¡ŒgetBeançš„æ—¶å€™, userå·²ç»åˆ›å»ºå¥½äº† , é€šè¿‡æ— å‚æ„é€ \nÂ  Â UserÂ userÂ =Â (User)Â context.getBean(\"user\");\nÂ  Â //è°ƒç”¨å¯¹è±¡çš„æ–¹æ³• .\nÂ  Â user.show();\n}\n```\n\nç»“æœå¯ä»¥å‘ç°ï¼Œåœ¨è°ƒç”¨showæ–¹æ³•ä¹‹å‰ï¼ŒUserå¯¹è±¡å·²ç»é€šè¿‡æ— å‚æ„é€ åˆå§‹åŒ–äº†ï¼\n\n> é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥åˆ›å»º\n\n1ã€UserT . java\n\n```\npublicÂ classÂ UserTÂ {\n\nÂ  Â privateÂ StringÂ name;\nÂ  Â publicÂ UserT(StringÂ name) {\nÂ  Â  Â  Â this.nameÂ =Â name;\nÂ  }\n\nÂ  Â publicÂ voidÂ setName(StringÂ name) {\nÂ  Â  Â  Â this.nameÂ =Â name;\nÂ  }\n\nÂ  Â publicÂ voidÂ show(){\nÂ  Â  Â  Â System.out.println(\"name=\"+Â nameÂ );\nÂ  }\n\n}\n```\n\n2ã€beans.xml æœ‰ä¸‰ç§æ–¹å¼ç¼–å†™\n\n```\n<!-- ç¬¬ä¸€ç§æ ¹æ®indexå‚æ•°ä¸‹æ ‡è®¾ç½® -->\n<beanÂ id=\"userT\"Â class=\"com.kuang.pojo.UserT\">\nÂ  Â <!-- indexæŒ‡æ„é€ æ–¹æ³• , ä¸‹æ ‡ä»0å¼€å§‹ -->\nÂ  Â <constructor-argÂ index=\"0\"Â value=\"kuangshen2\"/>\n</bean>\n```\n\n```\n<!-- ç¬¬äºŒç§æ ¹æ®å‚æ•°åå­—è®¾ç½® -->\n<beanÂ id=\"userT\"Â class=\"com.kuang.pojo.UserT\">\nÂ  Â <!-- nameæŒ‡å‚æ•°å -->\nÂ  Â <constructor-argÂ name=\"name\"Â value=\"kuangshen2\"/>\n</bean>\n```\n\n```\n<!-- ç¬¬ä¸‰ç§æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® -->\n<beanÂ id=\"userT\"Â class=\"com.kuang.pojo.UserT\">\nÂ  Â <constructor-argÂ type=\"java.lang.String\"Â value=\"kuangshen2\"/>\n</bean>\n```\n\n3ã€æµ‹è¯•\n\n```\n@Test\npublicÂ voidÂ testT(){\nÂ  Â ApplicationContextÂ contextÂ =Â newÂ ClassPathXmlApplicationContext(\"beans.xml\");\nÂ  Â UserTÂ userÂ =Â (UserT)Â context.getBean(\"userT\");\nÂ  Â user.show();\n}\n```\n\nç»“è®ºï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ã€‚å…¶ä¸­ç®¡ç†çš„å¯¹è±¡éƒ½å·²ç»åˆå§‹åŒ–äº†ï¼\n\n## Springé…ç½®\n\n> åˆ«å\n\nalias è®¾ç½®åˆ«å , ä¸ºbeanè®¾ç½®åˆ«å , å¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å\n\n```\n<!--è®¾ç½®åˆ«åï¼šåœ¨è·å–Beançš„æ—¶å€™å¯ä»¥ä½¿ç”¨åˆ«åè·å–-->\n<aliasÂ name=\"userT\"Â alias=\"userNew\"/>\n```\n\n> Beançš„é…ç½®\n\n```\n<!--beanå°±æ˜¯javaå¯¹è±¡,ç”±Springåˆ›å»ºå’Œç®¡ç†-->\n\n<!--\nÂ  Â id æ˜¯beançš„æ ‡è¯†ç¬¦,è¦å”¯ä¸€,å¦‚æœæ²¡æœ‰é…ç½®id,nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦\nÂ  Â å¦‚æœé…ç½®id,åˆé…ç½®äº†name,é‚£ä¹ˆnameæ˜¯åˆ«å\nÂ  Â nameå¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å,å¯ä»¥ç”¨é€—å·,åˆ†å·,ç©ºæ ¼éš”å¼€\nÂ  Â å¦‚æœä¸é…ç½®idå’Œname,å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·å–å¯¹è±¡;\n\nclassæ˜¯beançš„å…¨é™å®šå=åŒ…å+ç±»å\n-->\n<beanÂ id=\"hello\"Â name=\"hello2 h2,h3;h4\"Â class=\"com.kuang.pojo.Hello\">\nÂ  Â <propertyÂ name=\"name\"Â value=\"Spring\"/>\n</bean>\n```\n\n> import\n\nå›¢é˜Ÿçš„åˆä½œé€šè¿‡importæ¥å®ç° .\n\n```\n<importÂ resource=\"{path}/beans.xml\"/>\n```\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"Spring:æ¦‚è¿°åŠIOCç†è®ºæ¨å¯¼","url":"/2022/06/05/springæ¦‚è¿°åŠiocç†è®ºæ¨å¯¼/","content":"\n## ç®€ä»‹\n\nSpring : æ˜¥å¤© --->ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©\n\n2002å¹´ï¼ŒRod Jahnsoné¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶é›å½¢interface21æ¡†æ¶ã€‚\n\n2004å¹´3æœˆ24æ—¥ï¼ŒSpringæ¡†æ¶ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚\n\nå¾ˆéš¾æƒ³è±¡Rod Johnsonçš„å­¦å† , ä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚\n\nSpringç†å¿µ : ä½¿ç°æœ‰æŠ€æœ¯æ›´åŠ å®ç”¨ . æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ© , æ•´åˆç°æœ‰çš„æ¡†æ¶æŠ€æœ¯\n\nå®˜ç½‘ : [http://spring.io/](http://spring.io/)\n\nå®˜æ–¹ä¸‹è½½åœ°å€ : [https://repo.spring.io/libs-release-local/org/springframework/spring/](https://repo.spring.io/libs-release-local/org/springframework/spring/)\n\nä¸­æ–‡æ–‡æ¡£ï¼š[Spring Framework ä¸­æ–‡æ–‡æ¡£ - Spring Framework 5.1.3.RELEASE Reference | Docs4dev](https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/)\n\nGitHub : [https://github.com/spring-project](https://github.com/spring-projects)\n\n## ä¼˜ç‚¹\n\n1ã€Springæ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ , å®¹å™¨ Â .\n\n2ã€Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ , éä¾µå…¥å¼çš„ .\n\n**3ã€æ§åˆ¶åè½¬ IoC Â , é¢å‘åˆ‡é¢ Aop**\n\n4ã€å¯¹äº‹ç‰©çš„æ”¯æŒ , å¯¹æ¡†æ¶çš„æ”¯æŒ\n\n.......\n\nä¸€å¥è¯æ¦‚æ‹¬ï¼š\n\n**Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚**\n\n## ç»„æˆ\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-3.png)\n\nSpring æ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œç”± 7 ä¸ªå®šä¹‰è‰¯å¥½çš„æ¨¡å—ç»„æˆã€‚Spring æ¨¡å—æ„å»ºåœ¨æ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šï¼Œæ ¸å¿ƒå®¹å™¨å®šä¹‰äº†åˆ›å»ºã€é…ç½®å’Œç®¡ç† bean çš„æ–¹å¼ .\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-4.png)\n\nç»„æˆ Spring æ¡†æ¶çš„æ¯ä¸ªæ¨¡å—ï¼ˆæˆ–ç»„ä»¶ï¼‰éƒ½å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…ä¸å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—è”åˆå®ç°ã€‚æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å¦‚ä¸‹ï¼š\n\n- **æ ¸å¿ƒå®¹å™¨**ï¼šæ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯Â BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨_æ§åˆ¶åè½¬_ï¼ˆIOCï¼‰ æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚\n- **Spring ä¸Šä¸‹æ–‡**ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚\n- **Spring AOP**ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½ , é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†ä»»ä½•æ”¯æŒ AOPçš„å¯¹è±¡ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ–ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚\n- **Spring DAO**ï¼šJDBC DAO æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘ JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚\n- **Spring ORM**ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº† ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ JDOã€Hibernate å’Œ iBatis SQL Mapã€‚æ‰€æœ‰è¿™äº›éƒ½éµä» Spring çš„é€šç”¨äº‹åŠ¡å’Œ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚\n- **Spring Web æ¨¡å—**ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼ŒSpring æ¡†æ¶æ”¯æŒä¸ Jakarta Struts çš„é›†æˆã€‚Web æ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚\n- **Spring MVC æ¡†æ¶**ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚\n\n## æ‹“å±•\n\n**Spring Bootä¸Spring Cloud**\n\n- Spring Boot æ˜¯ Spring çš„ä¸€å¥—å¿«é€Ÿé…ç½®è„šæ‰‹æ¶ï¼Œå¯ä»¥åŸºäºSpring Boot å¿«é€Ÿå¼€å‘å•ä¸ªå¾®æœåŠ¡;\n- Spring Cloudæ˜¯åŸºäºSpring Bootå®ç°çš„ï¼›\n- Spring Bootä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿é›†æˆçš„å•ä¸ªå¾®æœåŠ¡ä¸ªä½“ï¼ŒSpring Cloudå…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼›\n- Spring Bootä½¿ç”¨äº†çº¦æŸä¼˜äºé…ç½®çš„ç†å¿µï¼Œå¾ˆå¤šé›†æˆæ–¹æ¡ˆå·²ç»å¸®ä½ é€‰æ‹©å¥½äº†ï¼Œèƒ½ä¸é…ç½®å°±ä¸é…ç½® , Spring Cloudå¾ˆå¤§çš„ä¸€éƒ¨åˆ†æ˜¯åŸºäºSpring Bootæ¥å®ç°ï¼ŒSpring Bootå¯ä»¥ç¦»å¼€Spring Cloudç‹¬ç«‹ä½¿ç”¨å¼€å‘é¡¹ç›®ï¼Œä½†æ˜¯Spring Cloudç¦»ä¸å¼€Spring Bootï¼Œå±äºä¾èµ–çš„å…³ç³»ã€‚\n- SpringBootåœ¨SpringCloundä¸­èµ·åˆ°äº†æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼Œå¦‚æœä½ è¦å­¦ä¹ SpringCloudå¿…é¡»è¦å­¦ä¹ SpringBootã€‚\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-5.png)\n\n## IOCåŸºç¡€\n\næ–°å»ºä¸€ä¸ªç©ºç™½çš„mavené¡¹ç›®\n\n> åˆ†æå®ç°\n\næˆ‘ä»¬å…ˆç”¨æˆ‘ä»¬åŸæ¥çš„æ–¹å¼å†™ä¸€æ®µä»£ç  .\n\n1ã€å…ˆå†™ä¸€ä¸ªUserDaoæ¥å£\n\n```\npublicÂ interfaceÂ UserDaoÂ {\nÂ  Â publicÂ voidÂ getUser();\n}\n```\n\n2ã€å†å»å†™Daoçš„å®ç°ç±»\n\n```\npublicÂ classÂ UserDaoImplÂ implementsÂ UserDaoÂ {\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â System.out.println(\"è·å–ç”¨æˆ·æ•°æ®\");\nÂ  }\n}\n```\n\n3ã€ç„¶åå»å†™UserServiceçš„æ¥å£\n\n```\npublicÂ interfaceÂ UserServiceÂ {\nÂ  Â publicÂ voidÂ getUser();\n}\n```\n\n4ã€æœ€åå†™Serviceçš„å®ç°ç±»\n\n```\npublicÂ classÂ UserServiceImplÂ implementsÂ UserServiceÂ {\nÂ  Â privateÂ UserDaoÂ userDaoÂ =Â newÂ UserDaoImpl();\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â userDao.getUser();\nÂ  }\n}\n```\n\n5ã€æµ‹è¯•ä¸€ä¸‹\n\n```\n@Test\npublicÂ voidÂ test(){\nÂ  Â UserServiceÂ serviceÂ =Â newÂ UserServiceImpl();\nÂ  Â service.getUser();\n}\n```\n\nè¿™æ˜¯æˆ‘ä»¬åŸæ¥çš„æ–¹å¼ , å¼€å§‹å¤§å®¶ä¹Ÿéƒ½æ˜¯è¿™ä¹ˆå»å†™çš„å¯¹å§ . é‚£æˆ‘ä»¬ç°åœ¨ä¿®æ”¹ä¸€ä¸‹ .\n\næŠŠUserdaoçš„å®ç°ç±»å¢åŠ ä¸€ä¸ª .\n\n```\npublicÂ classÂ UserDaoMySqlImplÂ implementsÂ UserDaoÂ {\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â System.out.println(\"MySqlè·å–ç”¨æˆ·æ•°æ®\");\nÂ  }\n}\n```\n\nç´§æ¥ç€æˆ‘ä»¬è¦å»ä½¿ç”¨MySqlçš„è¯ , æˆ‘ä»¬å°±éœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç°\n\n```\npublicÂ classÂ UserServiceImplÂ implementsÂ UserServiceÂ {\nÂ  Â privateÂ UserDaoÂ userDaoÂ =Â newÂ UserDaoMySqlImpl();\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â userDao.getUser();\nÂ  }\n}\n```\n\nåœ¨å‡è®¾, æˆ‘ä»¬å†å¢åŠ ä¸€ä¸ªUserdaoçš„å®ç°ç±» .\n\n```\npublicÂ classÂ UserDaoOracleImplÂ implementsÂ UserDaoÂ {\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â System.out.println(\"Oracleè·å–ç”¨æˆ·æ•°æ®\");\nÂ  }\n}\n```\n\né‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨Oracle , åˆéœ€è¦å»serviceå®ç°ç±»é‡Œé¢ä¿®æ”¹å¯¹åº”çš„å®ç° . å‡è®¾æˆ‘ä»¬çš„è¿™ç§éœ€æ±‚éå¸¸å¤§ , è¿™ç§æ–¹å¼å°±æ ¹æœ¬ä¸é€‚ç”¨äº†, ç”šè‡³åäººç±»å¯¹å§ , æ¯æ¬¡å˜åŠ¨ , éƒ½éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç  . è¿™ç§è®¾è®¡çš„è€¦åˆæ€§å¤ªé«˜äº†, ç‰µä¸€å‘è€ŒåŠ¨å…¨èº« .\n\n**é‚£æˆ‘ä»¬å¦‚ä½•å»è§£å†³å‘¢ ?**\n\næˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ç”¨åˆ°ä»–çš„åœ°æ–¹ , ä¸å»å®ç°å®ƒ , è€Œæ˜¯ç•™å‡ºä¸€ä¸ªæ¥å£ , åˆ©ç”¨set , æˆ‘ä»¬å»ä»£ç é‡Œä¿®æ”¹ä¸‹ .\n\n```\npublicÂ classÂ UserServiceImplÂ implementsÂ UserServiceÂ {\nÂ  Â privateÂ UserDaoÂ userDao;\n// åˆ©ç”¨setå®ç°\nÂ  Â publicÂ voidÂ setUserDao(UserDaoÂ userDao) {\nÂ  Â  Â  Â this.userDaoÂ =Â userDao;\nÂ  }\n\nÂ  Â @Override\nÂ  Â publicÂ voidÂ getUser() {\nÂ  Â  Â  Â userDao.getUser();\nÂ  }\n}\n```\n\nç°åœ¨å»æˆ‘ä»¬çš„æµ‹è¯•ç±»é‡Œ , è¿›è¡Œæµ‹è¯• ;\n\n```\n@Test\npublicÂ voidÂ test(){\nÂ  Â UserServiceImplÂ serviceÂ =Â newÂ UserServiceImpl();\nÂ  Â service.setUserDao(Â newÂ UserDaoMySqlImpl() );\nÂ  Â service.getUser();\nÂ  Â //é‚£æˆ‘ä»¬ç°åœ¨åˆæƒ³ç”¨Oracleå»å®ç°å‘¢\nÂ  Â service.setUserDao(Â newÂ UserDaoOracleImpl() );\nÂ  Â service.getUser();\n}\n```\n\nå¤§å®¶å‘ç°äº†åŒºåˆ«æ²¡æœ‰ ? å¯èƒ½å¾ˆå¤šäººè¯´æ²¡å•¥åŒºåˆ« . ä½†æ˜¯åŒå­¦ä»¬ , ä»–ä»¬å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜åŒ– , å¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¸€æ ·äº† . ä»”ç»†å»æ€è€ƒä¸€ä¸‹ , ä»¥å‰æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç”±ç¨‹åºå»è¿›è¡Œæ§åˆ¶åˆ›å»º , è€Œç°åœ¨æ˜¯ç”±æˆ‘ä»¬è‡ªè¡Œæ§åˆ¶åˆ›å»ºå¯¹è±¡ , æŠŠä¸»åŠ¨æƒäº¤ç»™äº†è°ƒç”¨è€… . ç¨‹åºä¸ç”¨å»ç®¡æ€ä¹ˆåˆ›å»º,æ€ä¹ˆå®ç°äº† . å®ƒåªè´Ÿè´£æä¾›ä¸€ä¸ªæ¥å£ .\n\nè¿™ç§æ€æƒ³ , ä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ , æˆ‘ä»¬ç¨‹åºå‘˜ä¸å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº† , æ›´å¤šçš„å»å…³æ³¨ä¸šåŠ¡çš„å®ç° . è€¦åˆæ€§å¤§å¤§é™ä½ . è¿™ä¹Ÿå°±æ˜¯IOCçš„åŸå‹ !\n\n## IOCæœ¬è´¨\n\n**æ§åˆ¶åè½¬IoC(Inversion of Control)ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI(ä¾èµ–æ³¨å…¥)æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•**ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ , æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ , å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-6.png)\n\n**IoCæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹**ï¼Œä½¿ç”¨å¤šç§æ–¹å¼å®Œç¾çš„å®ç°äº†IoCï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œæ–°ç‰ˆæœ¬çš„Springä¹Ÿå¯ä»¥é›¶é…ç½®å®ç°IoCã€‚\n\nSpringå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®åˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶å†ä»Iocå®¹å™¨ä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡ã€‚\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-7.png)\n\né‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚\n\n**æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚**\n","tags":["spring"],"categories":["javaå…¨æ ˆ"]},{"title":"SpringBoot-HelloWorld!","url":"/2022/06/03/springboot-helloworld/","content":"\n## ä»€ä¹ˆæ˜¯Spring\n\nSpringæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œ2003å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Javaå¼€å‘æ¡†æ¶ï¼Œä½œè€…ï¼šRod Johnsonã€‚\n\n**Springæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼Œç®€åŒ–å¼€å‘ã€‚**\n\n## Springæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„\n\nä¸ºäº†é™ä½Javaå¼€å‘çš„å¤æ‚æ€§ï¼ŒSpringé‡‡ç”¨äº†ä»¥ä¸‹4ç§å…³é”®ç­–ç•¥ï¼š\n\n1. åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹ï¼›\n2. é€šè¿‡IOCï¼Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œé¢å‘æ¥å£å®ç°è½»æ¾è€¦åˆï¼›\n3. åŸºäºåˆ‡é¢ï¼ˆAOPï¼‰å’Œæƒ¯ä¾‹è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹ï¼›\n4. é€šè¿‡åˆ‡é¢å’Œæ¨¡æ¿å‡å°‘æ ·å¼ä»£ç ï¼›\n\n## ä»€ä¹ˆæ˜¯SpringBoot\n\nå­¦è¿‡javawebçš„åŒå­¦å°±çŸ¥é“ï¼Œå¼€å‘ä¸€ä¸ªwebåº”ç”¨ï¼Œä»æœ€åˆå¼€å§‹æ¥è§¦Servletç»“åˆTomcat, è·‘å‡ºä¸€ä¸ªHello Wolrldç¨‹åºï¼Œæ˜¯è¦ç»å†ç‰¹åˆ«å¤šçš„æ­¥éª¤ï¼›åæ¥å°±ç”¨äº†æ¡†æ¶Strutsï¼Œå†åæ¥æ˜¯SpringMVCï¼Œåˆ°äº†ç°åœ¨çš„SpringBootï¼Œè¿‡ä¸€ä¸¤å¹´åˆä¼šæœ‰å…¶ä»–webæ¡†æ¶å‡ºç°ï¼›ä½ ä»¬æœ‰ç»å†è¿‡æ¡†æ¶ä¸æ–­çš„æ¼”è¿›ï¼Œç„¶åè‡ªå·±å¼€å‘é¡¹ç›®æ‰€æœ‰çš„æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­çš„å˜åŒ–ã€æ”¹é€ å—ï¼Ÿå»ºè®®éƒ½å¯ä»¥å»ç»å†ä¸€éï¼›è¨€å½’æ­£ä¼ ï¼Œä»€ä¹ˆæ˜¯SpringBootå‘¢ï¼Œå°±æ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼Œå®˜æ–¹è¯´æ˜¯ç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œ Â you can \"just run\"ï¼Œèƒ½è¿…é€Ÿçš„å¼€å‘webåº”ç”¨ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªhttpæ¥å£ã€‚\n\næ‰€æœ‰çš„æŠ€æœ¯æ¡†æ¶çš„å‘å±•ä¼¼ä¹éƒ½éµå¾ªäº†ä¸€æ¡ä¸»çº¿è§„å¾‹ï¼šä»ä¸€ä¸ªå¤æ‚åº”ç”¨åœºæ™¯ è¡ç”Ÿ ä¸€ç§è§„èŒƒæ¡†æ¶ï¼Œäººä»¬åªéœ€è¦è¿›è¡Œå„ç§é…ç½®è€Œä¸éœ€è¦è‡ªå·±å»å®ç°å®ƒï¼Œè¿™æ—¶å€™å¼ºå¤§çš„é…ç½®åŠŸèƒ½æˆäº†ä¼˜ç‚¹ï¼›å‘å±•åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œäººä»¬æ ¹æ®å®é™…ç”Ÿäº§åº”ç”¨æƒ…å†µï¼Œé€‰å–å…¶ä¸­å®ç”¨åŠŸèƒ½å’Œè®¾è®¡ç²¾åï¼Œé‡æ„å‡ºä¸€äº›è½»é‡çº§çš„æ¡†æ¶ï¼›ä¹‹åä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œå«Œå¼ƒåŸå…ˆçš„å„ç±»é…ç½®è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å¼€å§‹æå€¡â€œçº¦å®šå¤§äºé…ç½®â€ï¼Œè¿›è€Œè¡ç”Ÿå‡ºä¸€äº›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚\n\næ˜¯çš„è¿™å°±æ˜¯Javaä¼ä¸šçº§åº”ç”¨->J2EE->spring->springbootçš„è¿‡ç¨‹ã€‚\n\néšç€ Spring ä¸æ–­çš„å‘å±•ï¼Œæ¶‰åŠçš„é¢†åŸŸè¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®æ•´åˆå¼€å‘éœ€è¦é…åˆå„ç§å„æ ·çš„æ–‡ä»¶ï¼Œæ…¢æ…¢å˜å¾—ä¸é‚£ä¹ˆæ˜“ç”¨ç®€å•ï¼Œè¿èƒŒäº†æœ€åˆçš„ç†å¿µï¼Œç”šè‡³äººç§°é…ç½®åœ°ç‹±ã€‚Spring Boot æ­£æ˜¯åœ¨è¿™æ ·çš„ä¸€ä¸ªèƒŒæ™¯ä¸‹è¢«æŠ½è±¡å‡ºæ¥çš„å¼€å‘æ¡†æ¶ï¼Œç›®çš„ä¸ºäº†è®©å¤§å®¶æ›´å®¹æ˜“çš„ä½¿ç”¨ Spring ã€æ›´å®¹æ˜“çš„é›†æˆå„ç§å¸¸ç”¨çš„ä¸­é—´ä»¶ã€å¼€æºè½¯ä»¶ï¼›\n\nSpring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚Spring Boot ä»¥**çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³**ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼ŒSpring Boot åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„å¼€ç®±å³ç”¨ã€‚\n\nç®€å•æ¥è¯´å°±æ˜¯SpringBootå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ ã€‚\n\nSpring Boot å‡ºç”Ÿåé—¨ï¼Œä»ä¸€å¼€å§‹å°±ç«™åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„èµ·ç‚¹ï¼Œåˆç»è¿‡è¿™å‡ å¹´çš„å‘å±•ï¼Œç”Ÿæ€è¶³å¤Ÿå®Œå–„ï¼ŒSpring Boot å·²ç»å½“ä¹‹æ— æ„§æˆä¸º Java é¢†åŸŸæœ€çƒ­é—¨çš„æŠ€æœ¯ã€‚\n\n**Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š**\n\n- ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨\n- **å¼€ç®±å³ç”¨**ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®\n- å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›®\n- æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚\n\nçœŸçš„å¾ˆçˆ½ï¼Œæˆ‘ä»¬å¿«é€Ÿå»ä½“éªŒå¼€å‘ä¸ªæ¥å£çš„æ„Ÿè§‰å§ï¼\n\n## å¾®æœåŠ¡\n\n### ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ\n\nå¾®æœåŠ¡æ˜¯ä¸€ç§å•ä½“æ¶æ„é£æ ¼ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªåº”ç”¨å¿…é¡»æ„å»ºæˆä¸€ç³»åˆ—å°æœåŠ¡çš„ç»„åˆï¼›å¯ä»¥é€šè¿‡httpçš„æ–¹å¼è¿›è¡Œäº’é€šã€‚è¦è¯´å¾®æœåŠ¡æ¶æ„ï¼Œå…ˆå¾—è¯´è¯´æˆ‘ä»¬çš„å•ä½“åº”ç”¨æ¶æ„ã€‚\n\n### å•ä½“åº”ç”¨æ¶æ„\n\nåœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å°†éœ€æ±‚åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ•°æ®åº“ã€æœåŠ¡å™¨å¤„ç†ã€å‰ç«¯å±•ç¤ºã€‚å¦‚æœè¿™äº›éœ€æ±‚éƒ½å®ç°åœ¨äº†åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®å°±æ˜¯å•ä½“æ¶æ„çš„ã€‚åœ¨é¡¹ç›®å‘å±•åˆæœŸï¼Œç”±äºæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘å†™åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å˜å¾—ç®€å•é«˜æ•ˆã€‚ä½†æ˜¯ï¼Œéšç€ä¸šåŠ¡ä¸æ–­æ‰©å¤§ã€éœ€æ±‚ä¸æ–­å¢å¤šï¼Œä»£ç ä¼šè¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œç³»ç»Ÿå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚è¯•æƒ³ï¼Œå½“åªéœ€è¦ä¿®æ”¹ä¸€ä¸ªå¾ˆå°çš„åŠŸèƒ½æ—¶ï¼Œç”±äºæ‰€ä»¥åŠŸèƒ½æ¨¡å—éƒ½å†™åœ¨åŒä¸€ä¸ªåº”ç”¨ï¼Œé‡æ–°éƒ¨ç½²ä¼šå½±å“å…¶ä»–åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚å¦å¤–ï¼Œå½“é¡¹ç›®å¤ªè¿‡åºå¤§è‡ƒè‚¿æ—¶ï¼Œç³»ç»Ÿä¼˜åŒ–ä¹Ÿæ˜¯ä¸€é“éš¾é¢˜ã€‚æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„å¹¶å‘é‡ã€ä½¿ç”¨åœºæ™¯ã€æ¶ˆè€—çš„èµ„æºç±»å‹éƒ½ä¸åŒï¼Œä½†æ˜¯å®ƒä»¬éƒ½åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬å¯¹å„ä¸ªåŠŸèƒ½æ¨¡å—çš„å®¹é‡å¾ˆéš¾åšå‡ºè¯„ä¼°ï¼Œéš¾ä»¥å¯¹ä¸ªåˆ«æ¨¡å—è¿›è¡Œä¼˜åŒ–ã€‚\n\n### å¾®æœåŠ¡æ¶æ„\n\nå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€é¡¹åœ¨äº‘ä¸­éƒ¨ç½²åº”ç”¨å’ŒæœåŠ¡çš„æ–°æŠ€æœ¯ã€‚å¤§éƒ¨åˆ†å›´ç»•å¾®æœåŠ¡çš„äº‰è®ºéƒ½é›†ä¸­åœ¨å®¹å™¨æˆ–å…¶ä»–æŠ€æœ¯æ˜¯å¦èƒ½å¾ˆå¥½çš„å®æ–½å¾®æœåŠ¡ï¼Œè€Œçº¢å¸½è¯´APIåº”è¯¥æ˜¯é‡ç‚¹ã€‚\n\nå¾®æœåŠ¡å¯ä»¥åœ¨â€œè‡ªå·±çš„ç¨‹åºâ€ä¸­è¿è¡Œï¼Œå¹¶é€šè¿‡â€œè½»é‡çº§è®¾å¤‡ä¸HTTPå‹APIè¿›è¡Œæ²Ÿé€šâ€ã€‚å…³é”®åœ¨äºè¯¥æœåŠ¡å¯ä»¥åœ¨è‡ªå·±çš„ç¨‹åºä¸­è¿è¡Œã€‚é€šè¿‡è¿™ä¸€ç‚¹æˆ‘ä»¬å°±å¯ä»¥å°†æœåŠ¡å…¬å¼€ä¸å¾®æœåŠ¡æ¶æ„ï¼ˆåœ¨ç°æœ‰ç³»ç»Ÿä¸­åˆ†å¸ƒä¸€ä¸ªAPIï¼‰åŒºåˆ†å¼€æ¥ã€‚åœ¨æœåŠ¡å…¬å¼€ä¸­ï¼Œè®¸å¤šæœåŠ¡éƒ½å¯ä»¥è¢«å†…éƒ¨ç‹¬ç«‹è¿›ç¨‹æ‰€é™åˆ¶ã€‚å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªæœåŠ¡éœ€è¦å¢åŠ æŸç§åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±å¿…é¡»ç¼©å°è¿›ç¨‹èŒƒå›´ã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œåªéœ€è¦åœ¨ç‰¹å®šçš„æŸç§æœåŠ¡ä¸­å¢åŠ æ‰€éœ€åŠŸèƒ½ï¼Œè€Œä¸å½±å“æ•´ä½“è¿›ç¨‹çš„æ¶æ„ã€‚\n\n## Hello World\n\n### å‡†å¤‡å·¥ä½œ\n\næˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¿«é€Ÿçš„åˆ›å»ºä¸€ä¸ªSpring Bootåº”ç”¨ï¼Œå¹¶ä¸”å®ç°ä¸€ä¸ªç®€å•çš„Httpè¯·æ±‚å¤„ç†ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­å¯¹Spring Bootæœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼Œå¹¶ä½“éªŒå…¶ç»“æ„ç®€å•ã€å¼€å‘å¿«é€Ÿçš„ç‰¹æ€§ã€‚\n\næˆ‘çš„ç¯å¢ƒå‡†å¤‡ï¼š\n\n- java version \"1.8.0\\_181\"\n- Maven-3.6.1\n- SpringBoot 2.x æœ€æ–°ç‰ˆ\n\nå¼€å‘å·¥å…·ï¼š\n\n- IDEA\n\n### åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜\n\nSpringå®˜æ–¹æä¾›äº†éå¸¸æ–¹ä¾¿çš„å·¥å…·è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºåº”ç”¨\n\nSpring Initializrï¼š[https://start.spring.io/](https://start.spring.io/)\n\n**é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€ï¼š**ä½¿ç”¨Spring Initializr çš„ Webé¡µé¢åˆ›å»ºé¡¹ç›®\n\n1ã€æ‰“å¼€ Â [https://start.spring.io/](https://start.spring.io/)\n\n2ã€å¡«å†™é¡¹ç›®ä¿¡æ¯\n\n3ã€ç‚¹å‡»â€Generate Projectâ€œæŒ‰é’®ç”Ÿæˆé¡¹ç›®ï¼›ä¸‹è½½æ­¤é¡¹ç›®\n\n4ã€è§£å‹é¡¹ç›®åŒ…ï¼Œå¹¶ç”¨IDEAä»¥Mavené¡¹ç›®å¯¼å…¥ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œç›´åˆ°é¡¹ç›®å¯¼å…¥å®Œæ¯•ã€‚\n\n5ã€å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼ŒåŒ…æ¯”è¾ƒå¤šã€éœ€è¦è€å¿ƒç­‰å¾…ä¸€åˆ‡å°±ç»ªã€‚\n\n**é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒï¼š**ä½¿ç”¨ IDEA ç›´æ¥åˆ›å»ºé¡¹ç›®\n\n1ã€åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®\n\n2ã€é€‰æ‹©spring initalizr ï¼Œ å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯å»å®˜ç½‘çš„å¿«é€Ÿæ„å»ºå·¥å…·é‚£é‡Œå®ç°\n\n3ã€å¡«å†™é¡¹ç›®ä¿¡æ¯\n\n4ã€é€‰æ‹©åˆå§‹åŒ–çš„ç»„ä»¶ï¼ˆåˆå­¦å‹¾é€‰ Web å³å¯ï¼‰\n\n5ã€å¡«å†™é¡¹ç›®è·¯å¾„\n\n6ã€ç­‰å¾…é¡¹ç›®æ„å»ºæˆåŠŸ\n\n**é¡¹ç›®ç»“æ„åˆ†æï¼š**\n\né€šè¿‡ä¸Šé¢æ­¥éª¤å®Œæˆäº†åŸºç¡€é¡¹ç›®çš„åˆ›å»ºã€‚å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ã€‚\n\n1ã€ç¨‹åºçš„ä¸»å¯åŠ¨ç±»\n\n2ã€ä¸€ä¸ª application.properties é…ç½®æ–‡ä»¶\n\n3ã€ä¸€ä¸ª æµ‹è¯•ç±»\n\n4ã€ä¸€ä¸ª pom.xml\n\n### pom.xmlåˆ†æ\n\næ‰“å¼€pom.xmlï¼Œçœ‹çœ‹Spring Booté¡¹ç›®çš„ä¾èµ–ï¼š\n\n```\n\n<!-- çˆ¶ä¾èµ– -->\n<parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-parent</artifactId>\n    <version>2.2.5.RELEASE</version>\n    <relativePath/>\n</parent>\n\n<dependencies>\n    <!-- webåœºæ™¯å¯åŠ¨å™¨ -->\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    <!-- springbootå•å…ƒæµ‹è¯• -->\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-test</artifactId>\n        <scope>test</scope>\n        <!-- å‰”é™¤ä¾èµ– -->\n        <exclusions>\n            <exclusion>\n                <groupId>org.junit.vintage</groupId>\n                <artifactId>junit-vintage-engine</artifactId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n</dependencies>\n\n<build>\n    <plugins>\n        <!-- æ‰“åŒ…æ’ä»¶ -->\n        <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n        </plugin>\n    </plugins>\n</build>\n```\n\n### ç¼–å†™ä¸€ä¸ªhttpæ¥å£\n\n1ã€åœ¨ä¸»ç¨‹åºçš„åŒçº§ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªcontrolleråŒ…ï¼Œä¸€å®šè¦åœ¨åŒçº§ç›®å½•ä¸‹ï¼Œå¦åˆ™è¯†åˆ«ä¸åˆ°\n\n2ã€åœ¨åŒ…ä¸­æ–°å»ºä¸€ä¸ªHelloControllerç±»\n\n```\n\n@RestController\npublic class HelloController {\n\n    @RequestMapping(\"/hello\")\n    public String hello() {\n        return \"Hello World\";\n    }\n    \n}\n```\n\n`3ã€ç¼–å†™å®Œæ¯•åï¼Œä»ä¸»ç¨‹åºå¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œçœ‹é¡µé¢è¿”å›ï¼›æ§åˆ¶å°è¾“å‡ºäº† Tomcat è®¿é—®çš„ç«¯å£å·ï¼`\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-1024x191.png)\n\nç®€å•å‡ æ­¥ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªwebæ¥å£çš„å¼€å‘ï¼ŒSpringBootå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬å¸¸ç”¨å®ƒæ¥å»ºç«‹æˆ‘ä»¬çš„å¾®æœåŠ¡é¡¹ç›®ï¼\n\n### å°†é¡¹ç›®æ‰“æˆjaråŒ…ï¼Œç‚¹å‡» mavençš„ package\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-1-1024x619.png)\n\nå¦‚æœé‡åˆ°ä»¥ä¸Šé”™è¯¯ï¼Œå¯ä»¥é…ç½®æ‰“åŒ…æ—¶ è·³è¿‡é¡¹ç›®è¿è¡Œæµ‹è¯•ç”¨ä¾‹\n\n```\n<!-- åœ¨å·¥ä½œä¸­,å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬æ‰“åŒ…æ˜¯ä¸æƒ³æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„    å¯èƒ½æ˜¯æµ‹è¯•ç”¨ä¾‹ä¸å®Œäº‹,æˆ–æ˜¯æµ‹è¯•ç”¨ä¾‹ä¼šå½±å“æ•°æ®åº“æ•°æ®    è·³è¿‡æµ‹è¯•ç”¨ä¾‹æ‰§    --><plugin>    <groupId>org.apache.maven.plugins</groupId>    <artifactId>maven-surefire-plugin</artifactId>    <configuration>        <!--è·³è¿‡é¡¹ç›®è¿è¡Œæµ‹è¯•ç”¨ä¾‹-->        <skipTests>true</skipTests>    </configuration></plugin>\n```\n\nå¦‚æœæ‰“åŒ…æˆåŠŸï¼Œåˆ™ä¼šåœ¨targetç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª jar åŒ…\n\n![](http://192.168.5.54:8001/wp-content/uploads/2022/06/image-2-1024x590.png)\n\næ‰“æˆäº†jaråŒ…åï¼Œå°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œäº†ï¼O\n\n### å½©è›‹\n\nå¦‚ä½•æ›´æ”¹å¯åŠ¨æ—¶æ˜¾ç¤ºçš„å­—ç¬¦æ‹¼æˆçš„å­—æ¯ï¼ŒSpringBootå‘¢ï¼Ÿä¹Ÿå°±æ˜¯ banner å›¾æ¡ˆï¼›\n\nåªéœ€ä¸€æ­¥ï¼šåˆ°é¡¹ç›®ä¸‹çš„ resources ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªbanner.txt å³å¯ã€‚\n\nå›¾æ¡ˆå¯ä»¥åˆ°ï¼šhttps://www.bootschool.net/ascii è¿™ä¸ªç½‘ç«™ç”Ÿæˆï¼Œç„¶åæ‹·è´åˆ°æ–‡ä»¶ä¸­å³å¯ï¼\n","tags":["springboot"],"categories":["javaå…¨æ ˆ"]},{"title":"Androidä½¿ç”¨SQLiteåŸºç¡€","url":"/2022/06/02/androidä½¿ç”¨sqliteåŸºç¡€/","content":"\n**SQLite æ˜¯ä¸€ä¸ªè½¯ä»¶åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æºä»£ç ä¸å—ç‰ˆæƒé™åˆ¶ã€‚**\n\n### SQLiteæ•°æ®åº“åˆ›å»º\n\nAndroidæä¾›äº†ä¸€ä¸ªSQLiteOpenHelperå¸®åŠ©ç±»ï¼Œç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œåˆ›å»ºå’Œå‡çº§  \nSQLiteOpenHelperæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½¿ç”¨æ—¶éœ€è¦åˆ›å»ºè‡ªå·±çš„ç±»å»ç»§æ‰¿å®ƒã€‚  \nSQLiteOpenHelperæœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•onCreate()å’ŒonUpgrade()ï¼Œå¿…é¡»åœ¨è‡ªå·±çš„ç±»ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œç„¶ååˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­å®ç°åˆ›å»ºå’Œå‡çº§æ•°æ®åº“çš„é€»è¾‘ã€‚\n\n```\npublic class MySQLiteOpenHelper extends SQLiteOpenHelper {\n\n    //ä½¿ç”¨é™æ€æ•°æ®å®šä¹‰æ•°æ®åº“\n    private static final String SQL_NAME = \"mySQL.db\";\n    private static final String TABLE_NAME = \"myAccount\";\n    private static final String CREATE_TABLE_SQL = \"create table \"+TABLE_NAME+\" (id Integer primary key autoincrement, account text, password text); \\n\" ;\n\n    public MySQLiteOpenHelper(Context context){\n        super(context,SQL_NAME,null,1);\n    }\n//    public MySQLiteOpenHelper(@Nullable Context context, @Nullable String name, @Nullable SQLiteDatabase.CursorFactory factory, int version) {\n//        super(context, name, factory, version);\n//    }\n\n\n    //onCreateæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡\n    @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n        sqLiteDatabase.execSQL(CREATE_TABLE_SQL);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\n\n    }\n    //è‡ªå·±å†™çš„æ’å…¥æ•°æ®æ–¹æ³•\n    public long insertData(MyAccount myAccount){\n\n        final SQLiteDatabase db = getWritableDatabase();\n        //ContentValuesä¸“é—¨å­˜å‚¨åˆ—åå’Œæ•°æ®ï¼Œæ˜¯é”®å€¼å¯¹ã€‚\n        ContentValues values = new ContentValues();\n\n        values.put(\"account\",myAccount.getAccount_name());\n        values.put(\"password\",myAccount.getPassword());\n\n        return db.insert(TABLE_NAME,null,values);\n    }\n}\n```\n\næˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªæ³¨å†Œé¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```\npublic class RegisterActivity extends AppCompatActivity {\n\n\n    private MySQLiteOpenHelper mySQLiteOpenHelper;\n\n    private TextView login;\n    private Button commit;\n    private EditText account;\n    private EditText password;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_register);\n        mySQLiteOpenHelper = new MySQLiteOpenHelper(this);\n        initView();\n\n        login.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                myStartActivity();\n                finish();\n            }\n        });\n\n\n        commit.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Handler handler = new Handler();\n                if (isValid(account,password)){\n                    String acc = account.getText().toString().trim();\n                    String pass = password.getText().toString().trim();\n                    MyAccount myAccount = new MyAccount();\n                    myAccount.setAccount_name(acc);\n                    myAccount.setPassword(pass);\n\n                    long rId = mySQLiteOpenHelper.insertData(myAccount);\n\n                    if (rId!=-1){\n                        Toast.makeText(getApplicationContext(),\"æ³¨å†ŒæˆåŠŸï¼ï¼ï¼\",Toast.LENGTH_SHORT).show();\n                    }else {\n                        Toast.makeText(getApplicationContext(),\"æ³¨å†Œå¤±è´¥,æ•°æ®åº“æ’å…¥å¤±è´¥\",Toast.LENGTH_SHORT).show();\n                    }\n\n//                    Toast.makeText(getApplicationContext(),\"æ³¨å†ŒæˆåŠŸï¼ï¼ï¼\",Toast.LENGTH_SHORT).show();\n                    handler.postDelayed(new Runnable() {\n                        @Override\n                        public void run() {\n                            myStartActivity();\n                            handler.removeCallbacksAndMessages(null);\n                            finish();\n                        }\n                    },2000);\n\n\n\n                }else{\n                    Toast.makeText(getApplicationContext(),\"æ³¨å†Œå¤±è´¥ï¼Œè´¦å·é•¿åº¦å¤§äº4å°äº16ï¼Œå¯†ç é•¿åº¦å¤§äº3å°äº16\",Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n    }\n\n    private boolean isValid(EditText account, EditText password) {\n        int acc_len =account.getText().toString().length();\n        int pass_len = password.getText().toString().length();\n        if (acc_len<16&&acc_len>4&&pass_len>3&&pass_len<16){\n            return true;\n        }\n        return false;\n    }\n\n    private void myStartActivity() {\n        Intent intent = new Intent(RegisterActivity.this,LoginActivity.class);\n        startActivity(intent);\n    }\n\n\n    private void initView() {\n        login = findViewById(R.id.login_login);\n        commit = findViewById(R.id.login_commit);\n        account = findViewById(R.id.login_account);\n        password = findViewById(R.id.login_password);\n    }\n}\n```\n\nandroid studioæŸ¥çœ‹æ•°æ®åº“ï¼š\n\n![image-20220430234915901](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220430234915901.png)\n\nåœ¨data/data/com.ä½ çš„é¡¹ç›®ä½ç½®/databases é‡Œé¢\n","tags":["android"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"Androidå°†å›¾ç‰‡æ’å…¥æ•°æ®åº“","url":"/2022/06/02/androidå°†å›¾ç‰‡æ’å…¥æ•°æ®åº“/","content":"\n### æ–¹æ³•\n\næ–¹æ³•ä¸€ï¼šå°†å›¾ç‰‡è§£æä¸ºäºŒè¿›åˆ¶çš„æ•°æ®ï¼Œç„¶åæ”¾å…¥åˆ°æ•°æ®åº“ä¸­çš„ä¸€ç§BLODç±»å‹ä¸­\n\næ–¹æ³•äºŒï¼šä¿å­˜å›¾ç‰‡çš„URLè·¯å¾„\n\næ–¹æ³•ä¸‰ï¼šå…¶å®è¿˜å¯ä»¥å°†å›¾ç‰‡å­˜æ”¾åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä»¥åç›´æ¥ä»æœ¬åœ°æ–‡ä»¶è¿›è¡Œè·å–å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¿™å°±æ˜¯éœ€è¦æ³¨æ„ä¸‹ï¼Œå°±æ˜¯è¦ä¿è¯è·¯å¾„éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè¿™é‡Œå¯ä»¥ç”¨æ—¶é—´æˆ³è¿›è¡Œäº§ç”Ÿï¼Œæˆ–è€…ç”¨æˆ‘ä¸Šä¸€ç¯‡çš„ç¬¬18ç‚¹ä¸­è®²åˆ°çš„ä¸€äº›äº§ç”ŸTokençš„æ–¹æ³•ã€‚\n\nè¿™é‡Œè®²æ–¹æ³•ä¸€ï¼š\n\n### ä¸€ï¼šåˆ›å»ºæ•°æ®åº“\n\n```\n//è¡¨åfriendï¼Œå›¾åƒç”¨blobå­˜å‚¨ï¼Œblobå®é™…ä¹Ÿæ˜¯äºŒè¿›åˆ¶å­˜å‚¨\n\nprivate static final String CREATE_TABLE_FRIEND = \"create table friend ( id Integer primary key autoincrement, img blob, name text ); \\n\" ;\n\n\n @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n        //sqLiteDatabase.execSQL(createTable(TABLE_NAME));\n        //sqLiteDatabase.execSQL(CREATE_TABLE_SQL);\n\n\n        sqLiteDatabase.execSQL(CREATE_TABLE_FRIEND);\n\n    }\n\n\n//æ’å…¥æ•°æ®åº“æ–¹æ³•ï¼Œè¿™é‡Œä¸ºäº†æµ‹è¯•æ˜¯å¦æ’å…¥æˆåŠŸæ‰€ä»¥è¿”å›äº†longå‹ã€‚    \npublic long insertFriend(Friend friend){\n\n        final SQLiteDatabase db = getWritableDatabase();\n\n        ContentValues values = new ContentValues();\n\n        values.put(\"img\",friend.getHeadImg());\n        values.put(\"name\",friend.getName());\n\n        return db.insert(\"friend\",null,values);\n    }\n\n    //å°†å›¾ç‰‡è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°ç»„ï¼Œå¹¶ä¸”è¿”å›ã€‚\n    private byte[] getPicture(Drawable drawable) {\n        if(drawable == null) {\n            return null;\n        }\n        BitmapDrawable bd = (BitmapDrawable) drawable;\n        Bitmap bitmap = bd.getBitmap();\n        ByteArrayOutputStream os = new ByteArrayOutputStream();\n        bitmap.compress(Bitmap.CompressFormat.PNG, 100, os);\n        return os.toByteArray();\n    }\n\n\n        String[] columns = {\"img\", \"name\"};\n        Cursor cursor = sqLiteDatabase.query(\"friend\", columns, null, null, null, null, null);\n    //ç»‘å®šViewholder\n    @Override\n    public void onBindViewHolder(@NonNull MyViewHoder holder, int position) {\n        Friend friend = friends.get(position);\n        //å°†äºŒè¿›åˆ¶é‡æ–°åŠ è½½ä¸ºå›¾ç‰‡\n        Bitmap b = BitmapFactory.decodeByteArray(friend.getHeadImg(), 0, friend.getHeadImg().length);\n        //è®¾ç½®ç»„ä»¶çš„å›¾ç‰‡\n        holder.img.setImageBitmap(b);\n        holder.name.setText(friend.name);\n    }\n    //ç»™addç»„ä»¶è®¾ç½®ç›‘å¬äº‹ä»¶ï¼Œé‡Œé¢å®Œæˆç›¸å…³æ“ä½œ\n    add.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                friend = new Friend();\n                //è·å–éœ€è¦å­˜è¿›æ•°æ®åº“çš„å›¾ç‰‡\n                Drawable drawable = getContext().getResources().getDrawable(R.drawable.login_header_img);\n                //å°†å…¶è½¬æ¢ä¸ºbyteå‹ã€‚\n                byte[] a = getPicture(drawable);\n                //æ”¾è¿›friendå¯¹è±¡\n                friend.setHeadImg(a);\n                friend.setName(\"seawdawdaw\");\n                mySQLiteOpenHelper = new MySQLiteOpenHelper(getContext());\n                mySQLiteOpenHelper.insertFriend(friend);\n                //mMyAdapter.notifyDataSetChanged();\n            }\n        });\n```\n\n### æ–¹æ³•äºŒ\n\nä»æœåŠ¡å™¨ä¸Šå–åˆ°å›¾ç‰‡åœ°å€ï¼Œæ¯”å¦‚image/XXX/1233455.JPG ç„¶åè‡ªå·±å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²baseUrl = 10.0.2.2:8080/Demo/ ,å’Œå–åˆ°çš„åœ°å€æ‹¼èµ·æ¥ã€‚ æ€»ä¹‹æ„æ€å°±æ˜¯ä½ ä¸æ˜¯ç›´æ¥å¾—åˆ°å›¾ç‰‡ï¼Œè€Œæ˜¯å¾—åˆ°å›¾ç‰‡çš„åœ°å€ï¼Œç„¶åæ ¹æ®åœ°å€å–å‡ºæ¥å›¾ç‰‡ã€‚æ¯”å¦‚ï¼š\n\n```\n    // ä¼ è¾“ç½‘ç»œå›¾ç‰‡\n    public Bitmap getPic(String uriPic) {\n        URL imageUrl = null;\n        Bitmap bitmap = null;\n        try {\n            imageUrl = new URL(uriPic);\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        }\n        try {\n            HttpURLConnection conn = (HttpURLConnection) imageUrl\n                    .openConnection();\n            conn.connect();\n            InputStream is = conn.getInputStream();\n            bitmap = BitmapFactory.decodeStream(is);\n            is.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return bitmap;\n    }\n```\n\nå–åˆ°åç›¸å¯¹å›¾ç‰‡å†åšå¤„ç†çš„è¯å°± bmp = Bitmap.createScaledBitmap(bmp, é•¿,å®½, true);\n","tags":["android"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"Androidçš„Fragmentå®ç°å¯¼èˆªæ ","url":"/2022/06/02/androidçš„fragmentå®ç°å¯¼èˆªæ /","content":"\nè¿™é‡Œåªç²˜è´´å…³é”®ä»£ç ï¼Œç•™ä½œè‡ªå·±é—å¿˜æŸ¥çœ‹\n\né¦–å…ˆactivity\\_main.xml\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    tools:context=\".MainActivity\"\n    android:background=\"@color/white\">\n\n    <FrameLayout\n        android:background=\"@color/background\"\n        android:id=\"@+id/main_frame\"\n        android:layout_weight=\"1\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"/>\n\n\n    <RadioGroup\n        android:id=\"@+id/rg_main\"\n        android:background=\"@color/white\"\n        android:padding=\"5dp\"\n        android:orientation=\"horizontal\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        >\n        <RadioButton\n            style=\"@style/Bottom_tab_style\"\n            android:id=\"@+id/rb_index\"\n            android:drawableTop=\"@drawable/main_nav_index\"\n            android:text=\"é¦–é¡µ\" />\n        <!--@drawable/main_nav_indexï¼šé¦–é¡µå¯¹åº”çš„å›¾æ ‡å›¾ç‰‡-->\n        <RadioButton\n            style=\"@style/Bottom_tab_style\"\n            android:id=\"@+id/rb_message\"\n            android:drawableTop=\"@drawable/main_nav_message\"\n            android:text=\"æ¶ˆæ¯\" />\n        <RadioButton\n            style=\"@style/Bottom_tab_style\"\n            android:id=\"@+id/rb_friend\"\n            android:drawableTop=\"@drawable/main_nav_friend\"\n            android:text=\"å¥½å‹\" />\n        <RadioButton\n            style=\"@style/Bottom_tab_style\"\n            android:id=\"@+id/rb_friend_circle\"\n            android:drawableTop=\"@drawable/main_nav_friend_circle\"\n            android:text=\"ç”Ÿæ´»åœˆ\" />\n    </RadioGroup>\n\n</LinearLayout>\n```\n\nä¸Šè¿°xmlæ–‡ä»¶ä¸­çš„style.xmlï¼š\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <style name=\"Bottom_tab_style\" >\n        <item name=\"android:layout_width\">wrap_content</item>\n        <item name=\"android:layout_height\">wrap_content</item>\n        <item name=\"android:layout_weight\">1</item>\n        <item name=\"android:textColor\">@drawable/main_nav_text_color</item>\n        <item name=\"android:gravity\">center</item>\n        <item name=\"android:button\">@null</item>\n        <item name=\"android:textSize\">14sp</item>\n    </style>\n</resources>\n```\n\nmain\\_nav\\_text\\_color.xml:\n\nå…¶ä»–ä¸‰ä¸ªä¹Ÿæ˜¯åŒæ ·çš„å†™æ³•\n\n```\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item\n        android:state_checked=\"false\"\n        android:color=\"@color/black\"\n        />\n    <item\n        android:state_checked=\"true\"\n        android:color=\"#ff8fdf\" />\n</selector>\n```\n\nIndexFragmentï¼š\n\n```\npublic class IndexFragment extends Fragment {\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_index,null);\n        return view;\n//        return super.onCreateView(inflater, container, savedInstanceState);\n    }\n}\n```\n\nMainActivity.javaæ–‡ä»¶ï¼š\n\n```\npublic class MainActivity extends FragmentActivity {\n\n    private FragmentManager mFragmentManager;\n    //è¿™å››ä¸ªåˆ†åˆ«æ˜¯åº•éƒ¨å¯¼èˆªæ çš„å››ä¸ªåˆ†ç±»ï¼Œæºæ–‡ä»¶åœ¨ä¸Šæ–¹\n    private IndexFragment indexFragment;\n    private MessageFragment messageFragment;\n    private FriendCircleFragment friendCircleFragment;\n    private FriendFragment friendfragment;\n\n    private FragmentTransaction mTransaction;\n\n    private FrameLayout main_frame;\n    private RadioGroup rg_main;\n    private RadioButton rb_index;\n    private RadioButton rb_message;\n    private RadioButton rb_friend;\n    private RadioButton rb_friend_circle;\n\n    private int position;\n\n    private List<Fragment> fragments = new ArrayList<>();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        main_frame = findViewById(R.id.main_frame);\n        rg_main = findViewById(R.id.rg_main);\n        rb_index = findViewById(R.id.rb_index);\n        rb_message = findViewById(R.id.rb_message);\n        rb_friend = findViewById(R.id.rb_friend);\n        rb_friend_circle = findViewById(R.id.rb_friend_circle);\n\n        initView();\n    }\n\n\n    //è®¾ç½®è¿”å›æŒ‰é’®ä¸æ˜¯é€€å‡ºè½¯ä»¶ï¼Œè€Œæ˜¯è¿”å›ä¸»é¡µã€‚\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\n        if(keyCode == event.KEYCODE_BACK){\n            moveTaskToBack(false);\n            return true;\n        }\n        return super.onKeyDown(keyCode, event);\n    }\n    //åˆå§‹åŒ–æ¯ä¸ªFragment\n    private void initView(){\n        mFragmentManager = getSupportFragmentManager();\n        mTransaction = mFragmentManager.beginTransaction();\n        rg_main.check(R.id.rb_index);\n        indexFragment = new IndexFragment();\n        fragments.add(indexFragment);\n        hideOtherFragment(indexFragment,true);\n        rg_main.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(RadioGroup radioGroup, int i) {\n                switch (i){\n                    case R.id.rb_index:\n                        position = 0;\n                        hideOtherFragment(indexFragment,false);\n                        System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        break;\n                    case R.id.rb_message:\n                        position = 1;\n                        if (messageFragment==null){\n                            messageFragment = new MessageFragment();\n                            fragments.add(messageFragment);\n                            hideOtherFragment(messageFragment,true);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }else{\n                            hideOtherFragment(messageFragment,false);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }\n                        break;\n                    case R.id.rb_friend:\n                        position = 2;\n                        if (friendfragment==null){\n                            friendfragment = new FriendFragment();\n                            fragments.add(friendfragment);\n                            hideOtherFragment(friendfragment,true);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }else{\n                            hideOtherFragment(friendfragment,false);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }\n                        break;\n                    case R.id.rb_friend_circle:\n                        position = 3;\n                        if(friendCircleFragment == null){\n                            friendCircleFragment = new FriendCircleFragment();\n                            fragments.add(friendCircleFragment);\n                            hideOtherFragment(friendCircleFragment,true);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }else{\n                            hideOtherFragment(friendCircleFragment,false);\n                            System.out.println(\"åˆ‡æ¢æˆåŠŸï¼ï¼\");\n                        }\n                        break;\n                }\n            }\n        });\n\n    }\n\n    private void hideOtherFragment(Fragment showFragment, boolean add) {\n        mTransaction = mFragmentManager.beginTransaction();\n        if (add){\n            mTransaction.add(R.id.main_frame,showFragment);\n        }\n        for (Fragment fragment:fragments){\n\n            if (showFragment.equals(fragment)){\n                mTransaction.show(fragment);\n                //æ‰“å°å½“å‰fragment\n                System.out.println(showFragment);\n            }else{\n                mTransaction.hide(fragment);\n            }\n        }\n        mTransaction.commit();\n    }\n}\n```\n\nå±•ç¤ºå›¾ç‰‡ï¼š\n\n![image-20220428223342959](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220428223342959.png)\n\n![image-20220428223356012](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220428223356012.png)\n","tags":["android"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"batæ‰¹å¤„ç†","url":"/2022/06/02/batæ‰¹å¤„ç†/","content":"\n### åŸºæœ¬ç”¨æ³•\n\n> **_pause_** :ä½¿è„šæœ¬ç¨‹åºæš‚åœï¼Œå³ä¼šè¾“å‡ºâ€œè¯·æŒ‰ä»»æ„é”®è¾“å‡ºçš„å­—æ ·â€ï¼Œä¸»è¦ç”¨äºéœ€è¦æ‰“å°ä¸€äº›æ•°æ®ï¼Œå¦‚æœä¸åŠ pauseï¼Œè„šæœ¬è¿è¡Œç»“æŸç›´æ¥å…³é—­ï¼Œå°†æ— æ³•çœ‹åˆ°ç»“æœã€‚å¯ä»¥åŠ  >nulæŠŠè¿™ä¸ªä¿¡æ¯éšè—ã€‚\n> \n> **@**ï¼šå®ƒçš„ä½œç”¨æ˜¯éšè—å®ƒåé¢è¿™ä¸€è¡Œçš„å‘½ä»¤æœ¬èº«ï¼ˆåªèƒ½å½±å“å½“å‰è¡Œï¼‰ã€‚\n> \n> **%** : %0è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶æœ¬èº«ï¼Œ%1ï¼Œ%2ï¼ˆ%\\[0-9\\]ï¼‰åˆ†åˆ«æ˜¯åé¢çš„å‚æ•°\n\n**ä¸€ã€forå¾ªç¯**\n\n```\n#1.\n#è¾“å‡ºABC\n@echo off\nfor  %%I in (ABC) do echo %%I\npause\n#ç»“æœ\n#ABC\n\n#2.\n@echo off\nfor  %%I in (A,B,C) do echo %%I\npause\n#ç»“æœ\n#A\n#B\n#C\n```\n\n**é«˜çº§ç”¨æ³•ï¼š**\n\n```\n#æœç´¢å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶\n\n@echo off\nfor %%i in (*.*) do echo \"%%i\"\npause\n\n#æœç´¢å½“å‰ç›®å½•çš„æ–‡æœ¬æ–‡ä»¶\n\n@echo off\nfor %%i in (*.txt) echo \"%%i\"\npause\n```\n\n### æ‰¹é‡å¤„ç†æ–‡ä»¶\n\n**å®ä¾‹**\n\n```\n#æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åç§°\n\n@echo off\n\nset a=1\n\nsetlocal EnableDelayedExpansion\n\nfor %%n in (*.jpg) do (\n\nset /A a+=1\n\nren \"%%n\" \"åŠ¨æ¼«!a!.jpg\"\n\n)\n```\n","tags":["bat"],"categories":["è¿ç»´"]},{"title":"CentOSå‘½ä»¤","url":"/2022/06/02/centoså‘½ä»¤/","content":"\n# centos\n\n## ç«¯å£\n\nCentoså‡çº§åˆ°7ä¹‹åï¼Œå†…ç½®çš„é˜²ç«å¢™å·²ç»ä»iptableså˜æˆäº†firewalldã€‚æ‰€ä»¥ï¼Œç«¯å£çš„å¼€å¯è¿˜æ˜¯è¦ä»ä¸¤ç§æƒ…å†µæ¥è¯´æ˜çš„ï¼Œå³iptableså’Œfirewalldã€‚æ›´å¤šå…³äºCentOsé˜²ç«å¢™çš„æœ€æ–°å†…å®¹ï¼Œè¯·å‚è€ƒRedhatå®˜ç½‘\\[[4.5 ä½¿ç”¨é˜²ç«å¢™](https://access.redhat.com/documentation/zh-CN/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Using_Firewalls.html)\\]ã€‚\n\n### ä¸€ã€iptables(centos 6åŠä»¥å‰)\n\n1.æ‰“å¼€/å…³é—­/é‡å¯é˜²ç«å¢™\n\n```\nå¼€å¯é˜²ç«å¢™(é‡å¯åæ°¸ä¹…ç”Ÿæ•ˆ)ï¼šchkconfig iptables on\n\nå…³é—­é˜²ç«å¢™(é‡å¯åæ°¸ä¹…ç”Ÿæ•ˆ)ï¼šchkconfig iptables off\n\nå¼€å¯é˜²ç«å¢™(å³æ—¶ç”Ÿæ•ˆï¼Œé‡å¯åå¤±æ•ˆ)ï¼šservice iptables start\n\nå…³é—­é˜²ç«å¢™(å³æ—¶ç”Ÿæ•ˆï¼Œé‡å¯åå¤±æ•ˆ)ï¼šservice iptables stop\n\né‡å¯é˜²ç«å¢™:service iptables restartd\n```\n\n2.æŸ¥çœ‹æ‰“å¼€çš„ç«¯å£\n\n```\n/etc/init.d/iptables status\n```\n\n3.æ‰“å¼€æŸä¸ªç«¯å£(ä»¥8080ä¸ºä¾‹)\n\nï¼ˆ1ï¼‰å¼€å¯ç«¯å£\n\n```\niptables -A INPUT -p tcp --dport 8080 -j ACCEPT \n```\n\nï¼ˆ2ï¼‰ä¿å­˜å¹¶é‡å¯é˜²ç«å¢™\n\n```\n/etc/rc.d/init.d/iptables save\n/etc/init.d/iptables restart\n```\n\n4.æ‰“å¼€49152~65534ä¹‹é—´çš„ç«¯å£\n\n```\niptables -A INPUT -p tcp --dport 49152:65534 -j ACCEPT  \n```\n\nåŒæ ·ï¼Œè¿™é‡Œéœ€è¦å¯¹è®¾ç½®è¿›è¡Œä¿å­˜ï¼Œå¹¶é‡å¯é˜²ç«å¢™ã€‚\n\n5.å…¶ä»–æ‰“å¼€æ–¹å¼\n\næˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹/etc/sysconfig/iptablesæ–‡ä»¶çš„æ–¹å¼å¼€å¯ç«¯å£ï¼Œå¦‚ä¸‹\n\n```\nvi /etc/sysconfig/iptables\n```\n\nç„¶ååœ¨æ–‡ä»¶ä¸­å¢åŠ ä¸€è¡Œ\n\n```\n-A RH-Firewall-1-INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 8080 -j ACCEPT\n```\n\nå‚æ•°è¯´æ˜:\n\n- â€“A å‚æ•°å°±çœ‹æˆæ˜¯æ·»åŠ ä¸€æ¡è§„åˆ™\n- â€“p æŒ‡å®šæ˜¯ä»€ä¹ˆåè®®ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„tcp åè®®ï¼Œå½“ç„¶ä¹Ÿæœ‰udpï¼Œä¾‹å¦‚53ç«¯å£çš„DNS\n- â€“dport å°±æ˜¯ç›®æ ‡ç«¯å£ï¼Œå½“æ•°æ®ä»å¤–éƒ¨è¿›å…¥æœåŠ¡å™¨ä¸ºç›®æ ‡ç«¯å£\n- â€“sport æ•°æ®ä»æœåŠ¡å™¨å‡ºå»ï¼Œåˆ™ä¸ºæ•°æ®æºç«¯å£ä½¿ç”¨\n- â€“j å°±æ˜¯æŒ‡å®šæ˜¯ ACCEPT -æ¥æ”¶ æˆ–è€… DROP ä¸æ¥æ”¶\n\n### äºŒã€firewalld(centos7)\n\n1ã€å¼€æ”¾ç«¯å£\n\n**firewall-cmd --zone=public --add-port=5672/tcp --permanent** # å¼€æ”¾5672ç«¯å£\n\n**firewall-cmd --zone=public --remove-port=5672/tcp --permanent** #å…³é—­5672ç«¯å£\n\n**firewall-cmd --reload** # é…ç½®ç«‹å³ç”Ÿæ•ˆ\n\næ‰¹é‡å¼€å¯ç«¯å£\n\n\\*\\*firewall-cmd --permanent --zone=public --add-port=100-500/tcp \\*\\*\n\n**firewall-cmd --permanent --zone=public --add-port=100-500/udp**\n\n2ã€æŸ¥çœ‹é˜²ç«å¢™æ‰€æœ‰å¼€æ”¾çš„ç«¯å£\n\n**firewall-cmd --zone=public --list-ports**\n\n3.ã€å…³é—­é˜²ç«å¢™\n\nå¦‚æœè¦å¼€æ”¾çš„ç«¯å£å¤ªå¤šï¼Œå«Œéº»çƒ¦ï¼Œå¯ä»¥å…³é—­é˜²ç«å¢™ï¼Œå®‰å…¨æ€§è‡ªè¡Œè¯„ä¼°\n\n**systemctl stop firewalld.service**\n\n4ã€æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€\n\n**firewall-cmd --state**\n\nCentos7é»˜è®¤å®‰è£…äº†firewalldï¼Œå¦‚æœæ²¡æœ‰å®‰è£…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `yum install firewalld firewalld-config`è¿›è¡Œå®‰è£…ã€‚\n\n1.å¯åŠ¨é˜²ç«å¢™\n\n```\nsystemctl start firewalld \n```\n\n2.ç¦ç”¨é˜²ç«å¢™\n\n```\nsystemctl stop firewalld\n```\n\n3.è®¾ç½®å¼€æœºå¯åŠ¨\n\n```\nsystemctl enable firewalld\n```\n\n4.åœæ­¢å¹¶ç¦ç”¨å¼€æœºå¯åŠ¨\n\n```\nsytemctl disable firewalld\n```\n\n5.é‡å¯é˜²ç«å¢™\n\n```\nfirewall-cmd --reload\n```\n\n6.æŸ¥çœ‹çŠ¶æ€\n\n```\nsystemctl status firewalldæˆ–è€… firewall-cmd --state\n```\n\n7.æŸ¥çœ‹ç‰ˆæœ¬\n\n```\nfirewall-cmd --version\n```\n\n8.æŸ¥çœ‹å¸®åŠ©\n\n```\nfirewall-cmd --help\n```\n\n9.æŸ¥çœ‹åŒºåŸŸä¿¡æ¯\n\n```\nfirewall-cmd --get-active-zones\n```\n\n10.æŸ¥çœ‹æŒ‡å®šæ¥å£æ‰€å±åŒºåŸŸä¿¡æ¯\n\n```\nfirewall-cmd --get-zone-of-interface=eth0\n```\n\n11.æ‹’ç»æ‰€æœ‰åŒ…\n\n```\nfirewall-cmd --panic-on\n```\n\n12.å–æ¶ˆæ‹’ç»çŠ¶æ€\n\n```\nfirewall-cmd --panic-off\n```\n\n13.æŸ¥çœ‹æ˜¯å¦æ‹’ç»\n\n```\nfirewall-cmd --query-panic\n```\n\n14.å°†æ¥å£æ·»åŠ åˆ°åŒºåŸŸ(é»˜è®¤æ¥å£éƒ½åœ¨public)\n\n```\nfirewall-cmd --zone=public --add-interface=eth0(æ°¸ä¹…ç”Ÿæ•ˆå†åŠ ä¸Š --permanent ç„¶åreloadé˜²ç«å¢™)\n```\n\n15.è®¾ç½®é»˜è®¤æ¥å£åŒºåŸŸ\n\n```\nfirewall-cmd --set-default-zone=public(ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯)\n```\n\n16.æ›´æ–°é˜²ç«å¢™è§„åˆ™\n\n```\nfirewall-cmd --reloadæˆ–firewall-cmd --complete-reload(ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸€ä¸ªæ— éœ€æ–­å¼€è¿æ¥ï¼Œå°±æ˜¯firewalldç‰¹æ€§ä¹‹ä¸€åŠ¨æ€\næ·»åŠ è§„åˆ™ï¼Œç¬¬äºŒä¸ªéœ€è¦æ–­å¼€è¿æ¥ï¼Œç±»ä¼¼é‡å¯æœåŠ¡)\n```\n\n17.æŸ¥çœ‹æŒ‡å®šåŒºåŸŸæ‰€æœ‰æ‰“å¼€çš„ç«¯å£\n\n```\nfirewall-cmd --zone=public --list-ports\n```\n\n18.åœ¨æŒ‡å®šåŒºåŸŸæ‰“å¼€(å…³é—­)ç«¯å£ï¼ˆè®°å¾—é‡å¯é˜²ç«å¢™ï¼‰\n\n```\nfirewall-cmd --zone=public --add-port=80/tcp(æ°¸ä¹…ç”Ÿæ•ˆå†åŠ ä¸Š --permanent)\nfirewall-cmd --zone=public --remove-port=80/tcp\n```\n\n> è¯´æ˜ï¼š  \n> â€“zone ä½œç”¨åŸŸ  \n> â€“add-port=8080/tcp æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®  \n> â€“permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ\n\n## æœåŠ¡\n\n### CentOS6\n\n```\nchkconfig / chkconfig --listæ˜¾ç¤ºå¼€æœºå¯åŠ¨æœåŠ¡åˆ—è¡¨\n\nchkconfig --level 3 æœåŠ¡å on/off\n\nchkconfig æœåŠ¡å on/off\n\nchkconfig --del æœåŠ¡å åˆ é™¤ï¼ˆå…³é—­ï¼‰æœåŠ¡\n\nchkconfig --add æœåŠ¡å æ·»åŠ ï¼ˆå¼€å¯ï¼‰æœåŠ¡\n\n/var/log/messagesæ ¸å¿ƒç³»ç»Ÿæ—¥å¿—æ–‡ä»¶\n\netc/logrotate.conf\n\nmessagesç”±syslogdè¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹äº§ç”Ÿçš„ï¼Œå¦‚æœåœæ‰è¿™ä¸ªæœåŠ¡åˆ™ç³»ç»Ÿä¸ä¼šäº§ç”Ÿ/var/log/messages\n\n/var/log/wtmp æŸ¥çœ‹ç”¨æˆ·ç™»å½•å†å² last\n\nlastlog æ‰€æœ‰çš„ç”¨æˆ·ç™»é™†ä¿¡æ¯\n\n/var/log/btmp lastb æŸ¥çœ‹æ— æ•ˆç™»å½•å†å²\n\n\n/var/log/maillog\n\n/var/log/secure\n\ndmesg\n\n/var/log/dmesg ç³»ç»Ÿå¯åŠ¨äº§ç”Ÿçš„ç¡¬ä»¶ä¿¡æ¯\n\nscreen\n\nctrl a d é€€å‡ºscreenç•Œé¢\n\nscreen -r è¿”å›screenç•Œé¢\n\nscreen -ls æŸ¥çœ‹screen åˆ—è¡¨\n\nscreen -r screenID è¿”å›é€‰æ‹©çš„screenç•Œé¢\n```\n\n### centos7+\n\n```\n2ã€å¦‚ä½•å¯åŠ¨/å…³é—­ã€å¯ç”¨/ç¦ç”¨æœåŠ¡ï¼Ÿ\n\nå¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl start postfix.service\n\nå…³é—­ä¸€ä¸ªæœåŠ¡ï¼šsystemctl stop postfix.service\n\né‡å¯ä¸€ä¸ªæœåŠ¡ï¼šsystemctl restart postfix.service\n\næ˜¾ç¤ºä¸€ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼šsystemctl status postfix.service\n\nåœ¨å¼€æœºæ—¶å¯ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl enable postfix.service\n\nåœ¨å¼€æœºæ—¶ç¦ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl disable postfix.service\n\næŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ï¼šsystemctl is-enabled postfix.service;echo $?\n\næŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl list-unit-files|grep enabled\n```\n\n- æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—\n\n```\n journalctl -u docker.service\n```\n","tags":["centos"],"categories":["è¿ç»´"]},{"title":"CentOSå®‰è£…é…ç½®node","url":"/2022/06/02/centoså®‰è£…é…ç½®node/","content":"\n#### ä¸€ã€æ‰¾å¥½å®‰è£…ä½ç½®ï¼Œæˆ‘è¿™é‡Œæ˜¯ï¼š/home/node\n\näºŒã€å»[node](https://so.csdn.net/so/search?q=node&spm=1001.2101.3001.7020)å®˜ç½‘ä¸‹è½½Linuxé•œåƒæˆ–è€…é€šè¿‡å‘½ä»¤ç›´æ¥ä¸‹è½½\n\n```\nwget https://npm.taobao.org/mirrors/node/v12.16.1/node-v12.16.1-linux-x64.tar.gz\n```\n\nä¸‰ã€è§£å‹\n\n```\ntar -xvf node-v12.16.1-linux-x64.tar.gz\n```\n\nå››ã€è¿›å…¥è§£å‹åçš„æ–‡ä»¶æ‰§è¡Œå‘½ä»¤\n\n```\n#åˆ‡æ¢è·¯å¾„ï¼š\ncd node-v12.16.1-linux-x64.tar.gz\n\n#æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š\nyum install gcc gcc-c++\n```\n\näº”ã€é‡å‘½åæ–‡ä»¶å\n\n```\nmv node-v12.16.1-linux-x64.tar.gz Node\n```\n\nå…­ã€lnæŒ‡ä»¤åˆ›å»ºå…³è”\n\n```\nln -s /home/node/node/bin/node /usr/bin/node\n\nln -s /home/node/node/bin/npm /usr/bin/npm\n\nln -s /home/node/node/bin/npx /usr/bin/npx\n```\n\nå…«ã€å®‰è£…nodeå®ˆæŠ¤è¿›ç¨‹ forever\n\n```\n// å…¨å±€å®‰è£…forever\nnpm i -g forever\n// é€šè¿‡foreverå¯åŠ¨åº”ç”¨\nforever start app.js\n// å…³é—­åº”ç”¨\nforever stop app.js\n// å…³é—­æ‰€æœ‰åº”ç”¨\nforever stopall\n// é‡å¯æ‰€æœ‰åº”ç”¨\nforever restartall\n// æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œçš„æœåŠ¡\nforever list\n```\n\n```\nnpm i forever -g \n\nln -s /usr/local/temp/Node.js/bin/forever /usr/local/bin/forever\n```\n","tags":["centos"],"categories":["è¿ç»´"]},{"title":"CentOSå¸¸ç”¨å‘½ä»¤ï¼ˆæ›´å…¨ï¼‰","url":"/2022/06/02/centoså¸¸ç”¨å‘½ä»¤ï¼ˆæ›´å…¨ï¼‰/","content":"\n## ç³»ç»ŸæœåŠ¡ç®¡ç†\n\n### systemctl\n\n> `systemctl`å‘½ä»¤æ˜¯`service`å’Œ`chkconfig`å‘½ä»¤çš„ç»„åˆä½“ï¼Œå¯ç”¨äºç®¡ç†ç³»ç»Ÿã€‚\n\n- è¾“å‡ºç³»ç»Ÿä¸­å„ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼š\n\n```\nsystemctl list-units --type=service\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_01.png)\n\n- æŸ¥çœ‹æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼š\n\n```\nsystemctl status firewalld\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_02.png)\n\n- å…³é—­æœåŠ¡ï¼š\n\n```\nsystemctl stop firewalld\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_03.png)\n\n- å¯åŠ¨æœåŠ¡ï¼š\n\n```\nsystemctl start firewalld\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_04.png)\n\n- é‡æ–°å¯åŠ¨æœåŠ¡ï¼ˆä¸ç®¡å½“å‰æœåŠ¡æ˜¯å¯åŠ¨è¿˜æ˜¯å…³é—­ï¼‰ï¼š\n\n```\nsystemctl restart firewalld\n```\n\n- é‡æ–°è½½å…¥é…ç½®ä¿¡æ¯è€Œä¸ä¸­æ–­æœåŠ¡ï¼š\n\n```\nsystemctl reload firewalld\n```\n\n- ç¦æ­¢æœåŠ¡å¼€æœºè‡ªå¯åŠ¨ï¼š\n\n```\nsystemctl disable firewalld\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_05.png)\n\n- è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨ï¼š\n\n```\nsystemctl enable firewalld\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_06.png)\n\n## æ–‡ä»¶ç®¡ç†\n\n### ls\n\nåˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ—å‡º`/`ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š\n\n```\nls -l /\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_07.png)\n\n### pwd\n\nè·å–ç›®å‰æ‰€åœ¨å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_08.png)\n\n### cd\n\næ”¹å˜å½“å‰å·¥ä½œç›®å½•ï¼š\n\n```\ncd /usr/local\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_09.png)\n\n### date\n\næ˜¾ç¤ºæˆ–ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸æ—¥æœŸï¼›\n\n```\ndate '+%Y-%m-%d %H:%M:%S'\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_10.png)\n\n### passwd\n\nç”¨äºè®¾ç½®ç”¨æˆ·å¯†ç ï¼š\n\n```\npasswd root\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_11.png)\n\n### su\n\næ”¹å˜ç”¨æˆ·èº«ä»½ï¼ˆåˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·ï¼‰ï¼š\n\n```\nsu -\n```\n\n### clear\n\nç”¨äºæ¸…é™¤å±å¹•ä¿¡æ¯\n\n### man\n\næ˜¾ç¤ºæŒ‡å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼š\n\n```\nman ls\n```\n\n### who\n\n- æŸ¥è¯¢ç³»ç»Ÿå¤„äºä»€ä¹ˆè¿è¡Œçº§åˆ«ï¼š\n\n```\nwho -r\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_12.png)\n\n- æ˜¾ç¤ºç›®å‰ç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ·ï¼š\n\n```\nwho -buT\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_13.png)\n\n### free\n\næ˜¾ç¤ºç³»ç»Ÿå†…å­˜çŠ¶æ€ï¼ˆå•ä½MBï¼‰ï¼š\n\n```\nfree -m\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_14.png)\n\n### ps\n\n- æ˜¾ç¤ºç³»ç»Ÿè¿›ç¨‹è¿è¡ŒåŠ¨æ€ï¼š\n\n```\nps -ef\n```\n\n- æŸ¥çœ‹`sshd`è¿›ç¨‹çš„è¿è¡ŒåŠ¨æ€ï¼š\n\n```\nps -ef | grep sshd\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_15.png)\n\n### top\n\næŸ¥çœ‹å³æ—¶æ´»è·ƒçš„è¿›ç¨‹ï¼Œç±»ä¼¼Windowsçš„ä»»åŠ¡ç®¡ç†å™¨ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_16.png)\n\n### mkdir\n\nåˆ›å»ºç›®å½•ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_17.png)\n\n### more\n\nç”¨äºåˆ†é¡µæŸ¥çœ‹æ–‡ä»¶ï¼Œä¾‹å¦‚æ¯é¡µ10è¡ŒæŸ¥çœ‹`boot.log`æ–‡ä»¶ï¼š\n\n```\nmore -c -10 /var/log/boot.log\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_18.png)\n\n### cat\n\nç”¨äºæŸ¥çœ‹æ–‡ä»¶ï¼Œä¾‹å¦‚æŸ¥çœ‹Linuxå¯åŠ¨æ—¥å¿—æ–‡ä»¶æ–‡ä»¶ï¼Œå¹¶æ ‡æ˜è¡Œå·ï¼š\n\n```\ncat -Ab /var/log/boot.log\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_19.png)\n\n### touch\n\nç”¨äºåˆ›å»ºæ–‡ä»¶ï¼Œä¾‹å¦‚åˆ›å»º`text.txt`æ–‡ä»¶ï¼š\n\n```\ntouch text.txt\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_20.png)\n\n### rm\n\n- åˆ é™¤æ–‡ä»¶ï¼š\n\n```\nrm text.txt\n```\n\n- å¼ºåˆ¶åˆ é™¤æŸä¸ªç›®å½•åŠå…¶å­ç›®å½•ï¼š\n\n```\nrm -rf testdir/\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_21.png)\n\n### cp\n\nç”¨äºæ‹·è´æ–‡ä»¶ï¼Œä¾‹å¦‚å°†`test1`ç›®å½•å¤åˆ¶åˆ°`test2`ç›®å½•\n\n```\ncp -r /mydata/tes1 /mydata/test2\n```\n\n### mv\n\nç”¨äºç§»åŠ¨æˆ–è¦†ç›–æ–‡ä»¶ï¼š\n\n```\nmv text.txt text2.txt\n```\n\n## å‹ç¼©ä¸è§£å‹\n\n### tar\n\n- å°†`/etc`æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å½’æ¡£åˆ°æ–‡ä»¶`etc.tar`ï¼ˆå¹¶ä¸ä¼šè¿›è¡Œå‹ç¼©ï¼‰ï¼š\n\n```\ntar -cvf /mydata/etc.tar /etc\n```\n\n- ç”¨`gzip`å‹ç¼©æ–‡ä»¶å¤¹`/etc`ä¸­çš„æ–‡ä»¶åˆ°æ–‡ä»¶`etc.tar.gz`ï¼š\n\n```\ntar -zcvf /mydata/etc.tar.gz /etc\n```\n\n- ç”¨`bzip2`å‹ç¼©æ–‡ä»¶å¤¹`/etc`åˆ°æ–‡ä»¶`/etc.tar.bz2`ï¼š\n\n```\ntar -jcvf /mydata/etc.tar.bz2 /etc\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_22.png)\n\n- åˆ†é¡µæŸ¥çœ‹å‹ç¼©åŒ…ä¸­å†…å®¹ï¼ˆgzipï¼‰ï¼š\n\n```\ntar -ztvf /mydata/etc.tar.gz |more -c -10\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_24.png)\n\n- è§£å‹æ–‡ä»¶åˆ°å½“å‰ç›®å½•ï¼ˆgzipï¼‰ï¼š\n\n```\ntar -zxvf /mydata/etc.tar.gz\n```\n\n- è§£å‹æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ï¼ˆgzipï¼‰ï¼š\n\n```\ntar -zxvf /mydata/etc.tar.gz -C /mydata/etc\n```\n\n## ç£ç›˜å’Œç½‘ç»œç®¡ç†\n\n### df\n\næŸ¥çœ‹ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µï¼š\n\n```\ndf -hT\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_25.png)\n\n### dh\n\næŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹æ‰€å å¤§å°ï¼š\n\n```\ndu -h --max-depth=1 ./*\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_26.png)\n\n### ifconfig\n\næ˜¾ç¤ºå½“å‰ç½‘ç»œæ¥å£çŠ¶æ€ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_27.png)\n\n### netstat\n\n- æŸ¥çœ‹å½“å‰è·¯ç”±ä¿¡æ¯ï¼š\n\n```\nnetstat -rn\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_28.png)\n\n- æŸ¥çœ‹æ‰€æœ‰æœ‰æ•ˆTCPè¿æ¥ï¼š\n\n```\nnetstat -an\n```\n\n- æŸ¥çœ‹ç³»ç»Ÿä¸­å¯åŠ¨çš„ç›‘å¬æœåŠ¡ï¼š\n\n```\nnetstat -tulnp\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_29.png)\n\n- æŸ¥çœ‹å¤„äºè¿æ¥çŠ¶æ€çš„ç³»ç»Ÿèµ„æºä¿¡æ¯ï¼š\n\n```\nnetstat -atunp\n```\n\n### wget\n\nä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/linux_command_30.png)\n\n## æ–‡ä»¶ä¸Šä¼ ä¸‹è½½\n\n- å®‰è£…ä¸Šä¼ ä¸‹è½½å·¥å…·`lrzsz`ï¼›\n\n```\nyum install -y lrzsz\n```\n\n- ä¸Šä¼ æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤`XShell`ä¼šå¼¹å‡ºæ–‡ä»¶ä¸Šä¼ æ¡†ï¼›\n\n```\nrz\n```\n\n- ä¸‹è½½æ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤`XShell`ä¼šå¼¹å‡ºæ–‡ä»¶ä¿å­˜æ¡†ï¼›\n\n```\nsz fileName\n```\n\n## è½¯ä»¶çš„å®‰è£…ä¸ç®¡ç†\n\n### rpm\n\n> RPMæ˜¯`Red-Hat Package Manager`çš„ç¼©å†™ï¼Œä¸€ç§Linuxä¸‹é€šç”¨çš„è½¯ä»¶åŒ…ç®¡ç†æ–¹å¼ï¼Œå¯ç”¨äºå®‰è£…å’Œç®¡ç†`.rpm`ç»“å°¾çš„è½¯ä»¶åŒ…ã€‚\n\n- å®‰è£…è½¯ä»¶åŒ…ï¼š\n\n```\nrpm -ivh nginx-1.12.2-2.el7.x86_64.rpm\n```\n\n- æ¨¡ç³Šæœç´¢è½¯ä»¶åŒ…ï¼š\n\n```\nrpm -qa | grep nginx\n```\n\n- ç²¾ç¡®æŸ¥æ‰¾è½¯ä»¶åŒ…ï¼š\n\n```\nrpm -qa nginx\n```\n\n- æŸ¥è¯¢è½¯ä»¶åŒ…çš„å®‰è£…è·¯å¾„ï¼š\n\n```\nrpm -ql nginx-1.12.2-2.el7.x86_64\n```\n\n- æŸ¥çœ‹è½¯ä»¶åŒ…çš„æ¦‚è¦ä¿¡æ¯ï¼š\n\n```\nrpm -qi nginx-1.12.2-2.el7.x86_64\n```\n\n- éªŒè¯è½¯ä»¶åŒ…å†…å®¹å’Œå®‰è£…æ–‡ä»¶æ˜¯å¦ä¸€è‡´ï¼š\n\n```\nrpm -V nginx-1.12.2-2.el7.x86_64\n```\n\n- æ›´æ–°è½¯ä»¶åŒ…ï¼š\n\n```\nrpm -Uvh nginx-1.12.2-2.el7.x86_64\n```\n\n- åˆ é™¤è½¯ä»¶åŒ…ï¼š\n\n```\nrpm -e nginx-1.12.2-2.el7.x86_64\n```\n\n### yum\n\n> Yumæ˜¯`Yellow dog Updater, Modified`çš„ç¼©å†™ï¼Œèƒ½å¤Ÿåœ¨çº¿è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œéå¸¸æ–¹ä¾¿ï¼\n\n- å®‰è£…è½¯ä»¶åŒ…ï¼š\n\n```\nyum install nginx\n```\n\n- æ£€æŸ¥å¯ä»¥æ›´æ–°çš„è½¯ä»¶åŒ…ï¼š\n\n```\nyum check-update\n```\n\n- æ›´æ–°æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼š\n\n```\nyum update nginx\n```\n\n- åœ¨èµ„æºåº“ä¸­æŸ¥æ‰¾è½¯ä»¶åŒ…ä¿¡æ¯ï¼š\n\n```\nyum info nginx*\n```\n\n- åˆ—å‡ºå·²ç»å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…ï¼š\n\n```\nyum info installed\n```\n\n- åˆ—å‡ºè½¯ä»¶åŒ…åç§°ï¼š\n\n```\nyum list nginx*\n```\n\n- æ¨¡ç³Šæœç´¢è½¯ä»¶åŒ…ï¼š\n\n```\nyum search nginx\n```\n\n## ç”¨æˆ·ç®¡ç†\n\n### ç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹\n\n- æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼š\n\n```\ncat /etc/passwd\n```\n\n- ç”¨æˆ·ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼ˆå¯†ç å·²è¿‡æ»¤ï¼‰ï¼š\n\n```\n# ç”¨æˆ·å:å¯†ç :ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:ç»„æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:é»˜è®¤shell\nroot:x:0:0:root:/root:/bin/bash\nmacro:x:1000:982:macro:/home/macro:/bin/bash\n```\n\n- æŸ¥çœ‹ç”¨æˆ·ç»„ä¿¡æ¯ï¼š\n\n```\ncat /etc/group\n```\n\n- ç”¨æˆ·ç»„ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼š\n\n```\n# ç»„å:å¯†ç :ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨\nroot:x:0:\ndocker:x:982:macro,andy\n```\n\n### passwd\n\nç”¨äºè®¾ç½®ç”¨æˆ·å¯†ç ï¼š\n\n```\npasswd root\n```\n\n### su\n\næ”¹å˜ç”¨æˆ·èº«ä»½ï¼ˆåˆ‡æ¢åˆ°è¶…çº§ç”¨æˆ·ï¼‰ï¼š\n\n```\n# åˆ‡æ¢åˆ°rootç”¨æˆ·\nsu -\n# åˆ‡æ¢åˆ°macroç”¨æˆ·\nsu macro\n```\n\n### groupadd\n\næ·»åŠ ç”¨æˆ·ç»„ï¼Œä½¿ç”¨`-g`å¯ä»¥è®¾ç½®ç”¨æˆ·ç»„çš„æ ‡å¿—å·ï¼š\n\n```\ngroupadd -g 1024 macrozheng\n```\n\n### groupdel\n\nåˆ é™¤ç”¨æˆ·ç»„ï¼š\n\n```\ngroupdel macrozheng\n```\n\n### useradd\n\næ·»åŠ ç”¨æˆ·ï¼Œ`-u`è®¾ç½®æ ‡å¿—å·ï¼Œ`-g`è®¾ç½®ä¸»ç”¨æˆ·ç»„ï¼š\n\n```\nuseradd -u 1024 -g macrozheng macro\n```\n\n### usermod\n\nä¿®æ”¹ç”¨æˆ·æ‰€å±ç”¨æˆ·ç»„ï¼š\n\n```\nusermod -g docker macro\n```\n\n### userdel\n\nåˆ é™¤ç”¨æˆ·ï¼Œä½¿ç”¨`-r`å¯ä»¥åˆ é™¤ç”¨æˆ·ä¸»ç›®å½•ï¼š\n\n```\nuserdel macro -r\n```\n","tags":["centos"],"categories":["è¿ç»´"]},{"title":"CentOSæ­å»ºæœ¬åœ°æœåŠ¡å™¨","url":"/2022/06/02/centosæ­å»ºæœ¬åœ°æœåŠ¡å™¨/","content":"\n### ç¬¬ä¸€æ­¥\n\n#### æ›´æ¢å›½å†…yumæº\n\nå›½å†…é€Ÿåº¦å¤ªæ…¢ï¼Œç›®å‰å›½å†…çš„å¤§å…¬å¸æœ‰è®¸å¤šå¼€æºé•œåƒç«™ï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ã€ç½‘æ˜“ã€æ¸…åå¤§å­¦ã€åä¸ºç­‰ç­‰ï¼Œè¿™é‡Œä½¿ç”¨é˜¿é‡Œäº‘çš„yumæºã€‚\n\nå‚è€ƒå®˜æ–¹æ–‡æ¡£https://developer.aliyun.com/mirror/centos?spm=a2c6h.13651102.0.0.3e221b11bXrW8Aï¼Œä¾æ¬¡æ‰§è¡Œ\n\n```\n#å¤‡ä»½åŸæ¥çš„æºæ–‡ä»¶\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup \n#ä¿®æ”¹\ncurl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\nyum clean all\nyum makecache\n```\n\n#### å®‰è£…ssh\n\n```\nsudo yum install openssh -y\n```\n\nå¯åŠ¨sshçš„æœåŠ¡ï¼š\n\n```\nsystemctl start sshd.service\n```\n\nè®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨sshæœåŠ¡\n\n```\nsystemctl enable sshd.service\n```\n\né…ç½®æ–‡ä»¶åœ¨`/etc/ssh/sshd_config`ï¼Œä¸€èˆ¬ä¸ç”¨ä¿®æ”¹ã€‚\n\n#### å®‰è£…ftp\n\n```\nsudo yum install ftp -y\n```\n\n### å®‰è£…å®å¡”é¢æ¿\n\nå®å¡”é¢æ¿å¯ä»¥æ›´ç®€å•æ˜äº†çš„è¿›è¡Œç½‘ç«™çš„éƒ¨ç½²å’ŒæœåŠ¡å™¨çš„ç›‘æ§ï¼Œéå¸¸å€¼å¾—æ¨èã€‚å‚è€ƒå®˜æ–¹ç½‘ç«™https://www.bt.cn/bbs/thread-19376-1-1.html\n\n#### ä¸€é”®å®‰è£…å‘½ä»¤\n\n```\nsudo yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh\n```\n\nè€å¿ƒç­‰å¾…å…¶å®‰è£…å®Œæˆï¼Œä¹‹åä¼šå¾—åˆ°ä¸€ä¸ªè®¿é—®åœ°å€å’Œè´¦æˆ·å¯†ç ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨å†…ç½‘è®¿é—®åœ°å€è¿›è¡Œæ“ä½œã€‚\n\n![image-20220504224253823](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220504224253823.png)\n\nå¦‚æœå‘ç°ç™»å½•ä¸ä¸Šã€‚å…ˆè¿›å…¥CentosæŸ¥çœ‹ip\n\n```\nip addr\n```\n\n![image-20220504224404341](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220504224404341.png)\n\nä½¿ç”¨è¿™ä¸ªå°±èƒ½æˆåŠŸç™»å½•\n\nç¬¬ä¸€æ¬¡è¿›å…¥å®å¡”é¢æ¿å¯ä»¥è¿›å…¥è®¾ç½®ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç \n\n![image-20220504224502759](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220504224502759.png)\n","tags":["centos"],"categories":["è¿ç»´"]},{"title":"dockerå…¥é—¨","url":"/2022/06/02/dockerå…¥é—¨/","content":"\n### å®˜æ–¹æ–‡æ¡£ä½ç½®[#](https://docs.docker.com/engine/install/centos/)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220518190929849.png)\n\n#### 1ã€å¸è½½æ—§çš„ç‰ˆæœ¬\n\n```bash\n sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n```\n\n#### 2ã€éœ€è¦çš„å®‰è£…åŒ…\n\n```bash\nyum install -y yum-utils\n```\n\n#### 3ã€è®¾ç½®é•œåƒä»“åº“\n\n```bash\n sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo #é»˜è®¤æ˜¯å›½å¤–çš„é•œåƒæº\n\n sudo yum-config-manager \\\n    --add-repo \\\n    https://registry.docker-cn.com      #å›½å†…å®˜æ–¹æº\n\nyum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo  #å›½å¤–çš„åœ°å€\n\n    # è®¾ç½®é˜¿é‡Œäº‘çš„Dockeré•œåƒä»“åº“\nyum-config-manager \\\n    --add-repo \\\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo  #å›½å†…çš„åœ°å€\n```\n\n#### 4ã€æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•\n\n```bash\n yum makecache fast\n```\n\n#### 5ã€å®‰è£…dockerç›¸å…³çš„é…ç½®\n\ndocker-ce æ˜¯ç¤¾åŒºç‰ˆï¼Œdocker-ee ä¼ä¸šç‰ˆ\n\n```bash\n yum install docker-ce docker-ce-cli containerd.io\n```\n\nå‡ºç°äº†completedå³å®‰è£…æˆåŠŸã€‚\n\n#### 6ã€å¯åŠ¨Docker\n\n```bash\n#å¯åŠ¨dockeræœåŠ¡\nsystemctl start docker\n# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·ï¼Œæ˜¯å¦å¯åŠ¨æˆåŠŸ\ndocker version\n# è®¾ç½®å¼€æœºè‡ªå¯åŠ¨\nsystemctl enable docker\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220518193126040.png)\n\næŸ¥çœ‹ä¸‹è½½çš„hello worldé•œåƒ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220518193455731.png)\n\n### Dockerçš„å¸è½½\n\n```bash\n# 1. å¸è½½ä¾èµ–\nyum remove docker-ce docker-ce-cli containerd.io\n# 2. åˆ é™¤èµ„æº  . /var/lib/dockeræ˜¯dockerçš„é»˜è®¤å·¥ä½œè·¯å¾„\nrm -rf /var/lib/docker\n```\n\n### é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ\n\n**ï¼ˆ1ï¼‰è¿›å…¥é˜¿é‡Œäº‘å®˜ç½‘ï¼Œæœç´¢å®¹å™¨é•œåƒæœåŠ¡**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220519104612346.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220519110815790.png)\n\n**ï¼ˆ2ï¼‰ä¾æ¬¡æ‰§è¡Œå®˜æ–¹çš„è¿™å››æ¡å‘½ä»¤**\n\n```bash\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://man823kr.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n### Dockerå®¹å™¨è¿è¡Œæµç¨‹\n\nå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒDockerçš„è¿è¡Œæµç¨‹å¦‚ä¸‹å›¾ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220519112112840.png)\n\n### åº•å±‚åŸç†\n\nDockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œé€šè¿‡Sockerä»å®¢æˆ·ç«¯è®¿é—®ï¼Docker Serveræ¥æ”¶åˆ°Docker-Clientçš„æŒ‡ä»¤ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤ï¼\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220519131002639.png)\n\nDockerä¸ºä»€ä¹ˆæ¯”VM Wareå¿«ï¼Ÿ\n\n1ã€Dockeræ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚\n\n2ã€dockeråˆ©ç”¨å®¿ä¸»æœºçš„å†…æ ¸ï¼ŒVMéœ€è¦çš„æ˜¯Guest OS\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20200112215511607.png)\n\nDockeræ–°å»ºä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œè€Œè™šæ‹Ÿæœºæ˜¯éœ€è¦åŠ è½½Guest OSã€‚Dockerå’ŒVMçš„å¯¹æ¯”å¦‚ä¸‹ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220519131632278.png)\n\n### Dockerå¸¸ç”¨å‘½ä»¤\n\n#### åŸºç¡€å‘½ä»¤\n\n```bash\ndocker version          #æŸ¥çœ‹dockerçš„ç‰ˆæœ¬ä¿¡æ¯\ndocker info             #æŸ¥çœ‹dockerçš„ç³»ç»Ÿä¿¡æ¯,åŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡\ndocker å‘½ä»¤ --help       #å¸®åŠ©å‘½ä»¤(å¯æŸ¥çœ‹å¯é€‰çš„å‚æ•°)\ndocker COMMAND --help\n```\n\nå‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£åœ°å€:[#](https://docs.docker.com/engine/reference/commandline/docker/)\n\n#### é•œåƒå‘½ä»¤\n\n1.**docker images** æŸ¥çœ‹æœ¬åœ°ä¸»æœºçš„æ‰€æœ‰é•œåƒ\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    bf756fb1ae65   11 months ago   13.3kB\n\n#è§£é‡Š:\n1.REPOSITORY  é•œåƒçš„ä»“åº“æº\n\n2.TAG  é•œåƒçš„æ ‡ç­¾\n\n3.IMAGE ID é•œåƒçš„id\n\n4.CREATED é•œåƒçš„åˆ›å»ºæ—¶é—´\n\n5.SIZE é•œåƒçš„å¤§å°\n\n\n# å¯é€‰å‚æ•°\n\n-a/--all åˆ—å‡ºæ‰€æœ‰é•œåƒ\n\n-q/--quiet åªæ˜¾ç¤ºé•œåƒçš„id\n```\n\n2.**docker search** æœç´¢é•œåƒ\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker search mysql\nNAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql                             MySQL is a widely used, open-source relationâ€¦   10308     [OK]\nmariadb                           MariaDB is a community-developed fork of MySâ€¦   3819      [OK]\nmysql/mysql-server                Optimized MySQL Server Docker images. Createâ€¦   754                  [OK]\npercona                           Percona Server is a fork of the MySQL relatiâ€¦   517       [OK]\ncentos/mysql-57-centos7           MySQL 5.7 SQL database server                   86\nmysql/mysql-cluster               Experimental MySQL Cluster Docker images. Crâ€¦   79\ncenturylink/mysql                 Image containing mysql. Optimized to be linkâ€¦   60                   [OK]\n\n\n#å¯é€‰å‚æ•°\n\nSearch the Docker Hub for images\n\nOptions:\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print search using a Go template\n      --limit int       Max number of search results (default 25)\n      --no-trunc        Don't truncate output\n\n\n#æœç´¢æ”¶è—æ•°å¤§äº3000çš„é•œåƒ\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker search mysql --filter=STARS=3000\nNAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nmysql     MySQL is a widely used, open-source relationâ€¦   10308     [OK]\nmariadb   MariaDB is a community-developed fordockerk of MySâ€¦   3819      [OK]\n```\n\n3.**docker pull é•œåƒå\\[:tag\\]** ä¸‹è½½é•œåƒ\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker pull mysql\nUsing default tag: latest            #å¦‚æœä¸å†™tagé»˜è®¤å°±æ˜¯latest\nlatest: Pulling from library/mysql\n6ec7b7d162b2: Pull complete          #åˆ†å±‚ä¸‹è½½,docker imageçš„æ ¸å¿ƒ-è”åˆæ–‡ä»¶ç³»ç»Ÿ\nfedd960d3481: Pull complete\n7ab947313861: Pull complete\n64f92f19e638: Pull complete\n3e80b17bff96: Pull complete\n014e976799f9: Pull complete\n59ae84fee1b3: Pull complete\nffe10de703ea: Pull complete\n657af6d90c83: Pull complete\n98bfb480322c: Pull complete\n6aa3859c4789: Pull complete\n1ed875d851ef: Pull complete\nDigest: sha256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873 #ç­¾å\nStatus: Downloaded newer image for mysql:latest\ndocker.io/library/mysql:latest  #ä¸‹è½½æ¥æºçš„çœŸå®åœ°å€  #docker pull mysqlç­‰ä»·äºdocker pull docker.io/library/mysql:latest\n123456789101112131415161718\n```\n\næŒ‡å®šç‰ˆæœ¬ä¸‹è½½\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker pull mysql:5.7\n5.7: Pulling from library/mysql\n6ec7b7d162b2: Already exists\nfedd960d3481: Already exists\n7ab947313861: Already exists\n64f92f19e638: Already exists\n3e80b17bff96: Already exists\n014e976799f9: Already exists\n59ae84fee1b3: Already exists\n7d1da2a18e2e: Pull complete\n301a28b700b9: Pull complete\n529dc8dbeaf3: Pull complete\nbc9d021dc13f: Pull complete\nDigest: sha256:c3a567d3e3ad8b05dfce401ed08f0f6bf3f3b64cc17694979d5f2e5d78e10173\nStatus: Downloaded newer image for mysql:5.7\ndocker.io/library/mysql:5.7\n12345678910111213141516\n```\n\n4.**docker rmi** åˆ é™¤é•œåƒ\n\n```bash\n#1.åˆ é™¤æŒ‡å®šçš„é•œåƒid\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker rmi -f  é•œåƒid\n#2.åˆ é™¤å¤šä¸ªé•œåƒid\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker rmi -f  é•œåƒid é•œåƒid é•œåƒid\n#3.åˆ é™¤å…¨éƒ¨çš„é•œåƒid\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker rmi -f  $(docker images -aq)\n\n\n#  -f æ˜¯ä¸è¯¢é—®çš„æ„æ€\n```\n\n#### å®¹å™¨å‘½ä»¤\n\nå¦‚æ‹‰å–ä¸€ä¸ªcentosé•œåƒ\n\n```bash\ndocker pull centos \n```\n\nè¿è¡Œå®¹å™¨çš„å‘½ä»¤è¯´æ˜ï¼š\n\n```bash\ndocker run [å¯é€‰å‚æ•°] image\n\n#å‚æ•°è¯´æ˜\n--name=\"åå­—\"           æŒ‡å®šå®¹å™¨åå­—\n-d                     åå°æ–¹å¼è¿è¡Œ\n-it                    ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œ,è¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹\n-p                     æŒ‡å®šå®¹å™¨çš„ç«¯å£\n(\n-p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£  é…ç½®ä¸»æœºç«¯å£æ˜ å°„åˆ°å®¹å™¨ç«¯å£\n-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£\n-p å®¹å™¨ç«¯å£\n)\n-P                     éšæœºæŒ‡å®šç«¯å£(å¤§å†™çš„P)\n12345678910111213\n```\n\nè¿è¡Œå¹¶è¿›å…¥å®¹å™¨centos\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker run -it centos /bin/bash\n[root@bd1b8900c547 /]# ls      \nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n123\n```\n\né€€å‡ºå®¹å™¨å‘½ä»¤ï¼š\n\n```bash\n#exit åœæ­¢å¹¶é€€å‡ºå®¹å™¨ï¼ˆåå°æ–¹å¼è¿è¡Œåˆ™ä»…é€€å‡ºï¼‰\n#Ctrl+P+Q  ä¸åœæ­¢å®¹å™¨é€€å‡º\n[root@bd1b8900c547 /]# exit\nexit\n[root@iZwz99sm8v95sckz8bd2c4Z ~]#\n12345\n\ndocker attach å®¹å™¨ID  #è¿›å…¥å®¹å™¨\n```\n\nåˆ—å‡ºè¿è¡Œè¿‡çš„å®¹å™¨å‘½ä»¤ï¼š\n\n```bash\n#docker ps \n     # åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨\n-a   # åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„è¿è¡Œè®°å½•\n-n=? # æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨\n-q   # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·\n\n\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps -a\nCONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES\nbca129320bb5   centos         \"/bin/bash\"   4 minutes ago   Exited (0) 3 minutes ago             optimistic_shtern\nbd1b8900c547   centos         \"/bin/bash\"   6 minutes ago   Exited (0) 5 minutes ago             cool_tesla\ncf6adbf1b506   bf756fb1ae65   \"/hello\"      5 hours ago     Exited (0) 5 hours ago               optimistic_darwin\n1234567891011121314\n```\n\nåˆ é™¤å®¹å™¨å‘½ä»¤ï¼š\n\n```bash\ndocker rm å®¹å™¨id                 #åˆ é™¤æŒ‡å®šçš„å®¹å™¨,ä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨,å¼ºåˆ¶åˆ é™¤ä½¿ç”¨ rm -f\ndocker rm -f $(docker ps -aq)   #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨\ndocker ps -a -q|xargs docker rm #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨\n123\n```\n\nå¯åŠ¨å’Œåœæ­¢å®¹å™¨å‘½ä»¤ï¼š\n\n```bash\ndocker start å®¹å™¨id          #å¯åŠ¨å®¹å™¨\ndocker restart å®¹å™¨id        #é‡å¯å®¹å™¨\ndocker stop å®¹å™¨id           #åœæ­¢å½“å‰è¿è¡Œçš„å®¹å™¨\ndocker kill å®¹å™¨id           #å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨\n```\n\n#### å…¶ä»–å¸¸ç”¨å‘½ä»¤\n\n##### åå°å¯åŠ¨å®¹å™¨\n\n![image-20220520090621272](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220520090621272.png)\n\n##### æ—¥å¿—çš„æŸ¥çœ‹\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker logs --help\n\nUsage:  docker logs [OPTIONS] CONTAINER\n\nFetch the logs of a container\n\nOptions:\n      --details        Show extra details provided to logs\n  -f, --follow         Follow log output\n      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)\n  -n, --tail string    Number of lines to show from the end of the logs (default \"all\")\n  -t, --timestamps     Show timestamps\n      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)\n\nå¸¸ç”¨ï¼š\ndocker logs -tf å®¹å™¨id\ndocker logs --tail number å®¹å™¨id #numä¸ºè¦æ˜¾ç¤ºçš„æ—¥å¿—æ¡æ•°\n\n#dockerå®¹å™¨åå°è¿è¡Œï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°çš„è¿›ç¨‹ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨åœæ­¢\n#ç¼–å†™shellè„šæœ¬å¾ªç¯æ‰§è¡Œï¼Œä½¿å¾—centoså®¹å™¨ä¿æŒè¿è¡ŒçŠ¶æ€\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker run -d centos /bin/sh -c \"while true;do echo hi;sleep 5;done\"\nc703b5b1911ff84d584390263a35707b6024816e1f46542b61918a6327a570dc\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES\nc703b5b1911f   centos    \"/bin/sh -c 'while tâ€¦\"   13 seconds ago   Up 10 seconds             pedantic_banach\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker logs -tf --tail 10 c703b5b1911f\n2020-12-27T03:34:07.255599560Z hi\n2020-12-27T03:34:12.257641517Z hi\n2020-12-27T03:34:17.259706294Z hi\n2020-12-27T03:34:22.261693707Z hi\n2020-12-27T03:34:27.262609289Z hi\n2020-12-27T03:34:32.267862677Z hi\n2020-12-27T03:34:37.270382873Z hi\n2020-12-27T03:34:42.272414182Z hi\n2020-12-27T03:34:47.274823243Z hi\n2020-12-27T03:34:52.277419274Z hi\n12345678910111213141516171819202122232425262728293031323334353637\n```\n\n##### æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker top c703b5b1911f\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                11156               11135               0                   11:31               ?                   00:00:00            /bin/sh -c while true;do echo hi;sleep 5;done\nroot                11886               11156               0                   11:43               ?                   00:00:00            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 5\n1234\n```\n\n##### æŸ¥çœ‹å®¹å™¨çš„å…ƒæ•°æ®\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker inspect å®¹å™¨id\n[\n    {\n        \"Id\": \"853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905\",\n        \"Created\": \"2022-05-20T01:24:00.224710227Z\",\n        \"Path\": \"/bin/bash\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"exited\",\n            \"Running\": false,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 0,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2022-05-20T01:24:00.536472886Z\",\n            \"FinishedAt\": \"2022-05-20T01:24:00.544100162Z\"\n        },\n        \"Image\": \"sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905/853796e7728edb36d14e852365192328092f1be16ed411f4fc6c1105d745d905-json.log\",\n        \"Name\": \"/elegant_noyce\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"KernelMemory\": 0,\n            \"KernelMemoryTCP\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/d87402427d9ae960a5fbe249daad05bec1e3ac0843f60ed81aaea60984e36253-init/diff:/var/lib/docker/overlay2/b884d6313036de0e4750cbcea8281ef0fffa98ab829a87a6502d1e9f5ef805f8/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/d87402427d9ae960a5fbe249daad05bec1e3ac0843f60ed81aaea60984e36253/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/d87402427d9ae960a5fbe249daad05bec1e3ac0843f60ed81aaea60984e36253/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/d87402427d9ae960a5fbe249daad05bec1e3ac0843f60ed81aaea60984e36253/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"853796e7728e\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": [\n                \"/bin/bash\"\n            ],\n            \"Image\": \"centos\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"org.label-schema.build-date\": \"20210915\",\n                \"org.label-schema.license\": \"GPLv2\",\n                \"org.label-schema.name\": \"CentOS Base Image\",\n                \"org.label-schema.schema-version\": \"1.0\",\n                \"org.label-schema.vendor\": \"CentOS\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"fbdf128c04c0b0083efeb728b1a73f031b8ecb16767b9af5ab952b2bcbcf0bf2\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {},\n            \"SandboxKey\": \"/var/run/docker/netns/fbdf128c04c0\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"\",\n            \"Gateway\": \"\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"\",\n            \"IPPrefixLen\": 0,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"30963c06b94849260983a1dd752bf2feb0329daf0306959f4e6991b1f1460ce9\",\n                    \"EndpointID\": \"\",\n                    \"Gateway\": \"\",\n                    \"IPAddress\": \"\",\n                    \"IPPrefixLen\": 0,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n```\n\n##### è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨\n\nå› ä¸ºé€šå¸¸æˆ‘ä»¬çš„å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°æ–¹å¼æ¥è¿è¡Œçš„ï¼Œæœ‰æ—¶éœ€è¦è¿›å…¥å®¹å™¨ä¿®æ”¹é…ç½®\n\næ–¹å¼ä¸€ï¼š\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker exec -it c703b5b1911f /bin/bash\n[root@c703b5b1911f /]# ls\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n[root@c703b5b1911f /]# ps -ef      \nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 03:31 ?        00:00:00 /bin/sh -c while true;do echo hi;sleep 5;done\nroot       279     0  0 03:54 pts/0    00:00:00 /bin/bash\nroot       315     1  0 03:56 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 5\nroot       316   279  0 03:56 pts/0    00:00:00 ps -ef\n123456789\n```\n\næ–¹å¼äºŒï¼š\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker attach c703b5b1911f\n1\n```\n\n**docker exec è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œ**\n\n**docker attach è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹**\n\n##### æ‹·è´æ“ä½œ\n\næ‹·è´æ“ä½œçš„å‘½ä»¤å¦‚ä¸‹ï¼š\n\n```bash\n#æ‹·è´å®¹å™¨çš„æ–‡ä»¶åˆ°ä¸»æœºä¸­\ndocker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„  ç›®çš„ä¸»æœºè·¯å¾„\n\n#æ‹·è´å®¿ä¸»æœºçš„æ–‡ä»¶åˆ°å®¹å™¨ä¸­\ndocker cp ç›®çš„ä¸»æœºè·¯å¾„ å®¹å™¨id:å®¹å™¨å†…è·¯å¾„\n12345\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker exec -it c703b5b1911f /bin/bash\n[root@c703b5b1911f /]# cd home\n[root@c703b5b1911f home]# ls\n#touch æ–°å»ºæ–‡ä»¶\n[root@c703b5b1911f home]# touch test.java\n[root@c703b5b1911f home]# ls\ntest.java\n[root@c703b5b1911f home]# exit\nexit\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES\nc703b5b1911f   centos    \"/bin/sh -c 'while tâ€¦\"   35 minutes ago   Up 35 minutes             pedantic_banach\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker cp c703b5b1911f:/home/test.java /home\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# ls /home\nhai  pan  test.java\n```\n\nå‘½ä»¤å°ç»“å›¾è§£å¦‚ä¸‹ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220522213729343.png)\n\n#### å®æ“\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220522215834755.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220522220224437.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220522215918823.png)\n\nå®‰è£…tomcatï¼š\n\n```bash\n#å®˜æ–¹çš„ä½¿ç”¨\ndocker run -it --rm tomcat:9.0\n# --rmå°±æ˜¯åˆ é™¤å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨åœ¨åœæ­¢æ—¶å°±ä¼šè¢«åˆ é™¤ï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•ã€‚\n\n#è¿è¡Œå®¹å™¨\ndocker run -d -p 3355:8080 --name tomcat01 tomcat\n\n#è¿›å…¥å®¹å™¨\ndocker exec -it tomcat01 /bin/bash\n\n#å‘ç°é—®é¢˜ï¼š1.linuxå‘½ä»¤å°‘äº† 2.æ²¡æœ‰webappsã€‚é˜¿é‡Œäº‘çš„åŸå› ï¼Œé»˜è®¤æ˜¯æœ€å°çš„é•œåƒï¼Œæ‰€ä»¥ä¸å¿…è¦çš„éƒ½å‰”é™¤æ‰ã€‚\n#ä¿è¯æœ€å°å¯è¿è¡Œçš„ç¯å¢ƒ\n#åœ¨å®¹å™¨å†…å‘ç°æœ‰ä¸ªwebapps.dist.å¯ä»¥å°†é‡Œé¢çš„å†…å®¹cpåˆ°webappsé‡Œé¢å°±å¯ä»¥è®¿é—®äº†ã€‚\nroot@3ae89d3fa3c1:/usr/local/tomcat# ls\nBUILDING.txt     LICENSE  README.md      RUNNING.txt  conf  logs            temp     webapps.dist\nCONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin          lib   native-jni-lib  webapps  work\n\n#å¤åˆ¶å‘½ä»¤\n\ncp -r webapps.dist/* webapps\n```\n\néƒ¨ç½²ES+kibana\n\n```bash\n# esæš´éœ²çš„ç«¯å£å¾ˆå¤š\n# esååˆ†è€—å†…å­˜\n# esçš„æ•°æ®ä¸€èˆ¬éœ€è¦æ”¾ç½®åœ¨å®‰å…¨ç›®å½•ï¼æŒ‚è½½\n# --net somenetwork ï¼Ÿ ç½‘ç»œé…ç½®\n\n#å¯åŠ¨elasticsearch \ndocker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" elasticsearch:7.6.2\n\n# é…ç½®è¾ƒä½çš„è®¾å¤‡è°¨æ…å¯åŠ¨ï¼Œå¯åŠ¨åèµ¶ç´§å…³æ‰ï¼Œè¿›è¡Œå†…å­˜é™åˆ¶\ndocker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" -e ES_JAVA_OPTS=\"-Xms64m -Xmx512m\" elasticsearch:7.6.2\n```\n\ndockerçš„ç½‘ç»œç®¡ç†\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523110158590.png)\n\n### å¯è§†åŒ–\n\n- protaninerï¼ˆå…ˆç”¨è¿™ä¸ªï¼‰\n\n```bash\ndocker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer\n```\n\n- Rancher(CI/CDå†ç”¨)\n\nPortanineræ˜¯Dockerçš„å›¾å½¢åŒ–ç®¡ç†å·¥å…·ï¼Œæä¾›ä¸€ä¸ªåå°é¢æ¿ä¾›æˆ‘ä»¬æ“ä½œï¼\n\nä¸‹è½½è¿è¡ŒPortanineré•œåƒå¹¶è¿è¡Œï¼Œè®¾ç½®æœ¬æœºæ˜ å°„ç«¯å£ä¸º8088\n\n```bash\n[root@localhost conf]# docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer\nUnable to find image 'portainer/portainer:latest' locally\nlatest: Pulling from portainer/portainer\n94cfa856b2b1: Pull complete\n49d59ee0881a: Pull complete\na2300fd28637: Pull complete\nDigest: sha256:fb45b43738646048a0a0cc74fcee2865b69efde857e710126084ee5de9be0f3f\nStatus: Downloaded newer image for portainer/portainer:latest\n8c525a0137be22965bd1e3944da622a2c4248f8ad20883f4b3ea4f8a6b11e163\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES\n7789d4505a00   portainer/portainer   \"/portainer\"   6 seconds ago   Up 5 seconds   0.0.0.0:8088->9000/tcp   quirky_sinoussi\n123456789101112\n```\n\nç¬¬ä¸€æ¬¡ç™»å½•è®¾ç½®adminç”¨æˆ·çš„å¯†ç \n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20210718000547236.png)\n\nè¿™é‡Œé€‰æ‹©æœ¬åœ°çš„å°±è¡Œ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523125717097.png)\n\nå¦‚æœæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨è®°å¾—è®¾ç½®å®‰å…¨ç»„ï¼Œé€‰æ‹©è¿æ¥æœ¬åœ°çš„Docker,æ•´ä½“ç•Œé¢é¢„è§ˆå¦‚ä¸‹å›¾ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523125839720.png)\n\n### Dockeré•œåƒè¯¦è§£\n\n#### ä»€ä¹ˆæ˜¯é•œåƒ\n\né•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ï¼Œè¿è¡Œæ—¶ï¼ˆä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œæˆ–è€…åœ¨è¢«æ‰§è¡Œçš„ä¾èµ–ï¼‰ã€åº“ï¼Œç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚\n\n#### Dockeré•œåƒåŠ è½½åŸç†\n\nDockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯UnionFSè”åˆæ–‡ä»¶ç³»ç»Ÿã€‚\n\n> UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰\n\næˆ‘ä»¬ä¸‹è½½çš„æ—¶å€™çœ‹åˆ°çš„ä¸€å±‚å±‚å°±æ˜¯è¿™ä¸ªï¼  \nUnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ)ï¼šUnionæ–‡ä»¶ç³»ç»Ÿ(UnionFS)æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual filesystem)ã€‚Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚\n\nç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•\n\n> dockeré•œåƒåŠ è½½åŸç†\n\ndockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚\n\nbootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernel,,bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernel,Linuxlåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfs.æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯oootfsã€‚.è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfs:è½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚\n\nrootfs(root file system),åœ¨bootfs,ä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„/dey,/proc,/bin,/etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Jbuntu,Centosç­‰ç­‰ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523131409142.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523131456922.png)\n\n#### åˆ†å±‚ç†è§£\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20210718123512798.png)\n\n```bash\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker image inspect nginx:latest\n[\n    {\n        \"Id\": \"sha256:ae2feff98a0cc5095d97c6c283dcd33090770c76d63877caa99aefbbe4343bdd\",\n        \"RepoTags\": [\n            \"nginx:latest\"\n        ],\n        \"RepoDigests\": [\n            \"nginx@sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9\"\n        ],\n        \"Parent\": \"\",\n        \"Comment\": \"\",\n        \"Created\": \"2020-12-15T20:21:00.007674532Z\",\n        \"Container\": \"4cc5da85f27ca0d200407f0593422676a3bab482227daee044d797d1798c96c9\",\n        \"ContainerConfig\": {\n            \"Hostname\": \"4cc5da85f27c\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"80/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"NGINX_VERSION=1.19.6\",\n                \"NJS_VERSION=0.5.0\",\n                \"PKG_RELEASE=1~buster\"\n            ],\n            \"Cmd\": [\n                \"/bin/sh\",\n                \"-c\",\n                \"#(nop) \",\n                \"CMD [\\\"nginx\\\" \\\"-g\\\" \\\"daemon off;\\\"]\"\n            ],\n            \"Image\": \"sha256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/docker-entrypoint.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"maintainer\": \"NGINX Docker Maintainers <docker-maint@nginx.com>\"\n            },\n            \"StopSignal\": \"SIGQUIT\"\n        },\n        \"DockerVersion\": \"19.03.12\",\n        \"Author\": \"\",\n        \"Config\": {\n            \"Hostname\": \"\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"80/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"NGINX_VERSION=1.19.6\",\n                \"NJS_VERSION=0.5.0\",\n                \"PKG_RELEASE=1~buster\"\n            ],\n            \"Cmd\": [\n                \"nginx\",\n                \"-g\",\n                \"daemon off;\"\n            ],\n            \"Image\": \"sha256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/docker-entrypoint.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"maintainer\": \"NGINX Docker Maintainers <docker-maint@nginx.com>\"\n            },\n            \"StopSignal\": \"SIGQUIT\"\n        },\n        \"Architecture\": \"amd64\",\n        \"Os\": \"linux\",\n        \"Size\": 132935043,\n        \"VirtualSize\": 132935043,\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/cb791e78a08db7091bf2ce1d78603f1758f52199e57f1805156fe30e39067aae/diff:/var/lib/docker/overlay2/1e73a72b25af68ee9abf4eb443f778d31226e12e9af428fcc14c7b044c83b258/diff:/var/lib/docker/overlay2/88c9c01762f2af8327db65d0b0d4a64785e87c9c2ab76c62e7d03619db03a985/diff:/var/lib/docker/overlay2/7304ab112ac4a9cb91fc6f74730be28fecbe19f042e92d321aa9181424cc4b2e/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"RootFS\": {\n            \"Type\": \"layers\",\n            \"Layers\": [\n                \"sha256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9\",\n                \"sha256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa\",\n                \"sha256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d\",\n                \"sha256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2\",\n                \"sha256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4\"\n            ]\n        },\n        \"Metadata\": {\n            \"LastTagTime\": \"0001-01-01T00:00:00Z\"\n        }\n    }\n]\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117\n```\n\nè¿™é‡ŒæŒ‡ç¤ºäº†åˆ†å±‚ä¿¡æ¯ï¼š\n\n```bash\n        \"RootFS\": {\n            \"Type\": \"layers\",\n            \"Layers\": [\n                \"sha256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9\",\n                \"sha256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa\",\n                \"sha256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d\",\n                \"sha256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2\",\n                \"sha256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4\"\n            ]\n        },\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20210718123636415.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/2021071812372978.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/2021071812374035.png)\n\n#### æäº¤é•œåƒ\n\n```bash\nä½¿ç”¨docker commit å‘½ä»¤æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬\n\ndocker commit -m=â€œæäº¤çš„æè¿°ä¿¡æ¯â€  -a=\"ä½œè€…\" å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG] \n```\n\nç”±äºé»˜è®¤çš„Tomcaté•œåƒçš„webappsæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œéœ€è¦ä»webapps.distä¸­æ‹·è´æ–‡ä»¶åˆ°webappsæ–‡ä»¶å¤¹ã€‚ä¸‹é¢è‡ªè¡Œåˆ¶ä½œé•œåƒï¼šå°±æ˜¯ä»webapps.distä¸­æ‹·è´æ–‡ä»¶åˆ°webappsæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶æäº¤è¯¥é•œåƒä½œä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚ä½¿å¾—è¯¥é•œåƒé»˜è®¤çš„webappsæ–‡ä»¶å¤¹ä¸‹å°±æœ‰æ–‡ä»¶ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š\n\n```bash\n#1.å¤åˆ¶æ–‡ä»¶å¤¹\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker run -it tomcat /bin/bash\nroot@2a3bf3eaa2e4:/usr/local/tomcat# cd webapps\nroot@2a3bf3eaa2e4:/usr/local/tomcat/webapps# ls\nroot@2a3bf3eaa2e4:/usr/local/tomcat/webapps# cd ../\nroot@2a3bf3eaa2e4:/usr/local/tomcat# cp -r webapps.dist/* webapps\nroot@2a3bf3eaa2e4:/usr/local/tomcat# cd webapps\nroot@2a3bf3eaa2e4:/usr/local/tomcat/webapps# ls\nROOT  docs  examples  host-manager  manager\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES\n2a3bf3eaa2e4   tomcat                \"/bin/bash\"    4 minutes ago   Up 4 minutes   8080/tcp                 competent_torvalds\n7789d4505a00   portainer/portainer   \"/portainer\"   24 hours ago    Up 24 hours    0.0.0.0:8088->9000/tcp   quirky_sinoussi\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker exec -it 2a3bf3eaa2e4 /bin/bash\nroot@2a3bf3eaa2e4:/usr/local/tomcat# cd webapps\nroot@2a3bf3eaa2e4:/usr/local/tomcat/webapps# ls\nROOT  docs  examples  host-manager  manager\nroot@2a3bf3eaa2e4:/usr/local/tomcat/webapps# cd ../\nroot@2a3bf3eaa2e4:/usr/local/tomcat# read escape sequence\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker ps\nCONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES\n2a3bf3eaa2e4   tomcat                \"/bin/bash\"    8 minutes ago   Up 8 minutes   8080/tcp                 competent_torvalds\n7789d4505a00   portainer/portainer   \"/portainer\"   24 hours ago    Up 24 hours    0.0.0.0:8088->9000/tcp   quirky_sinoussi\n#2.æäº¤é•œåƒä½œä¸ºä¸€ä¸ªæ–°çš„é•œåƒ\n\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker commit -m=\"add webapps\" -a=\"Ethan\" 2a3bf3eaa2e4 mytomcat:1.0\nsha256:f189aac861de51087af5bc88a5f1de02d9574e7ee2d163c647dd7503a2d3982b\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker images\nREPOSITORY            TAG       IMAGE ID       CREATED         SIZE\nmytomcat              1.0       f189aac861de   7 seconds ago   653MB\nmysql                 5.7       f07dfa83b528   6 days ago      448MB\ntomcat                latest    feba8d001e3f   10 days ago     649MB\nnginx                 latest    ae2feff98a0c   12 days ago     133MB\ncentos                latest    300e315adb2f   2 weeks ago     209MB\nportainer/portainer   latest    62771b0b9b09   5 months ago    79.1MB\nelasticsearch         7.6.2     f29a1ee41030   9 months ago    791MB\n\n#3.è¿è¡Œå®¹å™¨\n\n[root@iZwz99sm8v95sckz8bd2c4Z ~]# docker run -it mytomcat:1.0 /bin/bash\nroot@1645774d4605:/usr/local/tomcat# cd webapps\nroot@1645774d4605:/usr/local/tomcat/webapps# ls\nROOT  docs  examples  host-manager  manager\nwz99sm8v95sckz8bd2c4Z ~]# docker images\nREPOSITORY            TAG       IMAGE ID       CREATED         SIZE\nmytomcat              1.0       f189aac861de   7 seconds ago   653MB\nmysql                 5.7       f07dfa83b528   6 days ago      448MB\ntomcat                latest    feba8d001e3f   10 days ago     649MB\nnginx                 latest    ae2feff98a0c   12 days ago     133MB\ncentos                latest    300e315adb2f   2 weeks ago     209MB\nportainer/portainer   latest    62771b0b9b09   5 months ago    79.1MB\nelasticsearch         7.6.2     f29a1ee41030   9 months ago    791MB\n```\n\nä¾‹å¦‚æäº¤ä¸€ä¸ªtomcat\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523133550877.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523133609284.png)\n\n```bash\n#å¦‚æœä½ æƒ³ä¿å­˜å½“å‰å®¹å™¨çš„çŠ¶æ€ï¼Œå°±å¯ä»¥é€šè¿‡commitæ¥æäº¤ï¼Œè·å¾—ä¸€ä¸ªé•œåƒï¼Œå°±å¥½æ¯”VMé‡Œé¢çš„å¿«ç…§\n```\n\n### å®‰è£…docker-compose\n\n### 1.ä»githubä¸Šä¸‹è½½docker-composeäºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…\n\n- ä¸‹è½½æœ€æ–°ç‰ˆçš„docker-composeæ–‡ä»¶\n\n  ä¸‹è½½åœ°å€ï¼šhttps://github.com/docker/compose/releases\n\nè‹¥æ˜¯githubè®¿é—®å¤ªæ…¢ï¼Œå¯ä»¥ç”¨daocloudä¸‹è½½\n\n```bash\nsudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n```\n\n- æ·»åŠ å¯æ‰§è¡Œæƒé™\n\n  sudo chmod +x /usr/local/bin/docker-compose\n\n- æµ‹è¯•å®‰è£…ç»“æœ\n\n  $ docker-compose --version\n\n  docker-compose version 1.16.1, build 1719ceb\n","tags":["docker"],"categories":["è¿ç»´"]},{"title":"dockerç§»åŠ¨æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„å‘½ä»¤","url":"/2022/06/02/dockerç§»åŠ¨æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„å‘½ä»¤/","content":"\n### dockerä¸å®¿ä¸»æœºäº’ç›¸ç§»åŠ¨æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹\n\nä»å®¿ä¸»æœºåˆ°å®¹å™¨ï¼š\n\nå…ˆåˆ©ç”¨ï¼š\n\n```\ndocker ps -a\n#æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„ä¿¡æ¯\n```\n\n![æˆ‘ç”µè„‘é‡Œçš„å®¹å™¨](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220517170746571.png)\n\nç„¶åï¼š\n\n```\n#ç§»åŠ¨wordpressæ•´ä¸ªæ–‡ä»¶å¤¹åˆ°wordpresså®¹å™¨çš„htmlç›®å½•ä¸‹ï¼ˆè¿™é‡Œè¦ç”¨å®¹å™¨IDï¼‰\ndocker cp C:\\Users\\Administrator\\Desktop\\wordpress-5.9.3-zh_CN\\wordpress\\. b011b15fd82c:\\var\\www\\html\n#å°†æŸä¸ªæ–‡ä»¶ç§»åŠ¨åˆ°å®¹å™¨\ndocker cp C:\\Users\\Administrator\\Desktop\\wordpress-5.9.3-zh_CN\\wordpress\\license.txt b011b15fd82c:\\var\\www\\html\n#å°†å®¹å™¨çš„æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºä¸­\ndocker cp b011b15fd82c:\\var\\www\\html\\. C:\\Users\\Administrator\\Desktop\\wordpress-5.9.3-zh_CN\\wordpress\\\n```\n","tags":["docker"],"categories":["è¿ç»´"]},{"title":"dockerè¿›é˜¶","url":"/2022/06/02/dockerè¿›é˜¶/","content":"\n## å®¹å™¨æ•°æ®å·\n\n### ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·\n\n**dockerçš„ç†å¿µå›é¡¾**\n\nå°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼\n\næ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ–\n\nMySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼\n\nå®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼\n\nè¿™å°±æ˜¯å·æŠ€æœ¯ï¼ç›®å½•çš„æŒ‚è½½ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523194605947.png)\n\n**æ€»ç»“ä¸€å¥è¯ï¼šå®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œï¼å®¹å™¨é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ï¼**\n\n### ä½¿ç”¨æ•°æ®å·\n\n> æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤æ¥æŒ‚è½½ -v\n\n```\ndocker run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•\n#ä¾‹å¦‚ä¸‹é¢è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶ä¸”è¿›è¡ŒæŒ‚è½½\ndocker run -it -v /home/centos01:/home --name=\"centos01\" centos /bin/bash\n#åœ¨ä½¿ç”¨inspectå‘½ä»¤æŸ¥çœ‹å®¹å™¨\ndocker inspect centos01\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523195947438.png)\n\nä»¥åä¿®æ”¹æ•°æ®åªéœ€è¦åœ¨æœ¬åœ°ä¿®æ”¹å³å¯ï¼Œdockerä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŒæ­¥åˆ°å®¹å™¨å†…\n\n### å®æˆ˜ï¼šå®‰è£…MySQL\n\n```\n#è·å–mysql5.7çš„é•œåƒ\ndocker pull mysql:5.7\n\n#è¿è¡Œå®¹å™¨ï¼Œéœ€è¦æ•°æ®æŒ‚è½½ #å®‰è£…å¯åŠ¨mysqléœ€è¦é…ç½®å¯†ç \n#å®˜æ–¹æµ‹è¯•ï¼š \ndocker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag\n#æˆ‘çš„ï¼š\ndocker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql/ -e MYSQL_ROOT_PASSWORD=123456 --name=\"mysql_test\" mysql:5.7\n#å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æœ¬åœ°ä½¿ç”¨Navicatæµ‹è¯•è¿æ¥\n\n\n# è¿›å…¥æ•°æ®åº“å®¹å™¨\ndocker exec -it mysql_first bash\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523232334775.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220523232645959.png)\n\n```\n#åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ•°æ®åº“æµ‹è¯•æ˜¯å¦åŒæ­¥æˆåŠŸ\n```\n\n### å…·åå’ŒåŒ¿åæŒ‚è½½\n\n```\n#åŒ¿åæŒ‚è½½\n-v å®¹å™¨å†…è·¯å¾„ï¼\ndocker run -d -P --name nginx01 -v /etc/nginx nginx\n#å‚çœ‹æ‰€æœ‰çš„å·çš„æƒ…å†µ\ndocker volume ls\n\n#è¿™é‡Œå‘ç°ï¼Œè¿™ç§å°±æ˜¯åŒ¿åæŒ‚è½½ï¼Œæˆ‘ä»¬åœ¨-våªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„ï¼\nDRIVER    VOLUME NAME\nlocal     2d5438e11233a296bc9d097a9f7854278fecbd7be7e7d4a701e7191ede1c1c3b\nlocal     56b9ea9722cddab11ef4c91beef28ed6188bff1f98fc2139f15396137531a0be\n\n#å…·åæŒ‚è½½\ndocker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx\n#å†æ¬¡æŸ¥çœ‹å·çš„æƒ…å†µ\nDRIVER    VOLUME NAME\nlocal     2d5438e11233a296bc9d097a9f7854278fecbd7be7e7d4a701e7191ede1c1c3b\nlocal     56b9ea9722cddab11ef4c91beef28ed6188bff1f98fc2139f15396137531a0be\nlocal     juming-nginx\n\n#é€šè¿‡ -v å·åï¼šå®¹å™¨å†…è·¯å¾„\n#æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå·\ndocker volume inspect juming-nginx\n\n[\n    {\n        \"CreatedAt\": \"2022-05-20T13:56:57+08:00\",\n        \"Driver\": \"local\",\n        \"Labels\": null,\n        \"Mountpoint\": \"ar/lib/docker/volumes/juming-nginx/_data\",\n        \"Name\": \"juming-nginx\",\n        \"Options\": null,\n        \"Scope\": \"local\"\n    }\n]\n\n#æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨/var/lib/docker/volumes/****/_data\n\n#æˆ‘ä»¬é€šè¿‡å…·åæŒ‚è½½å¯ä»¥æ–¹ä¾¿æ‰¾åˆ°æˆ‘ä»¬çš„ä¸€ä¸ªå·ï¼Œå¤§å¤šæ•°æƒ…å†µåœ¨ä½¿ç”¨å±…æ°‘æŒ‚è½½\n\n#å¦‚ä½•ç¡®å®šæ˜¯å…·åæŒ‚è½½è¿˜æ˜¯æŒ‡å®šè·¯å¾„æŒ‚è½½ï¼\n-v å®¹å™¨å†…è·¯å¾„    #åŒ¿åæŒ‚è½½\n-v å·å:å®¹å™¨å†…è·¯å¾„   #å…·åæŒ‚è½½\n-v /å®¿ä¸»æœºè·¯å¾„::å®¹å™¨å†…è·¯å¾„  #æŒ‡å®šè·¯å¾„æŒ‚è½½\n```\n\n**æ‹“å±•**\n\n```\n#é€šè¿‡ -vå®¹å™¨å†…è·¯å¾„ï¼šro rwæ”¹å˜è¯»å†™æƒé™\n\n#ro    readonly åªè¯»\n#rw    readwrite å¯è¯»å¯å†™\n\n#ä¸€æ—¦è®¾ç½®äº†æƒé™ å®¹å™¨å¯¹æˆ‘ä»¬æŒ‚åœ¨å‡ºæ¥çš„å†…å®¹å°±æœ‰äº†é™å®š\ndocker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginx\ndocker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx\n\n# ro åªè¦çœ‹åˆ°roå°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ½æ˜¯æ— æ³•æ“ä½œï¼\n```\n\n### åˆè¯†DockerFile\n\nDockerFileå°±æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶ï¼\n\né€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè„šæœ¬ä¸€ä¸ªä¸ªçš„å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€å±‚\n\n```\n#åˆ›å»ºä¸€ä¸ªDockerFileæ–‡ä»¶ï¼›åå­—å¯ä»¥éšæœº å»ºè®® DockerFile\n#æ–‡ä»¶ä¸­çš„å†…å®¹ æŒ‡ä»¤ï¼ˆå¤§å†™ï¼‰ å‚æ•°\n\nFROM centos\n\nVOLUME [\"volume01\",\"volume02\"]\n\nCMD echo \"----end-----\"\n\nCMD /bin/bash\n\n#è¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤éƒ½æ˜¯é•œåƒçš„ä¸€å±‚ï¼\n\n#æ„å»ºDockerFile\ndocker build -f /home/docker-test-volume/dockerfile1 -t ilpvc/centos:1.0 .\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220524095022493.png)\n\n```\n#å¯åŠ¨è‡ªå·±å†™çš„å®¹å™¨\ndocker run -it 7925f3fefaf6 /bin/bash\n#ä¸‹é¢çš„ä¸¤ä¸ªç›®å½•å°±æ˜¯æˆ‘ä»¬ç”Ÿæˆé•œåƒè‡ªåŠ¨æŒ‚è½½çš„ï¼Œæ•°æ®å·ç›®å½•\n#è¿™ä¸ªå·å’Œå¤–éƒ¨ä¸€å®šæœ‰ä¸€ä¸ªåŒæ­¥çš„ç›®å½•ï¼\n#ä¸Šé¢ä½¿ç”¨çš„æ˜¯åŒ¿åæŒ‚è½½\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220524095710091.png)\n\n```\n#å¯ä»¥é€šè¿‡docker inspect å®¹å™¨å æŸ¥çœ‹æŒ‚è½½è·¯å¾„\n#åœ¨mountsé‡Œé¢\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220524100155562.png)\n\n> è¿™ç§æ–¹å¼æˆ‘ä»¬æœªæ¥ä½¿ç”¨çš„ååˆ†å¤šï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šæ„å»ºè‡ªå·±çš„é•œåƒï¼\n> \n> å‡è®¾æ„å»ºé•œåƒæ—¶æ²¡æœ‰æŒ‚è½½å·ï¼Œè¦æ‰‹åŠ¨é•œåƒæŒ‚è½½ -v å·åï¼šå®¹å™¨å†…è·¯å¾„ï¼\n\n### æ•°æ®å·å®¹å™¨\n\nå¤šä¸ªmysqlåŒæ­¥æ•°æ®\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220524101020136.png)\n\n```\n# å¯åŠ¨ä¸‰ä¸ªå®¹å™¨ï¼Œé€šè¿‡æˆ‘ä»¬è‡ªå·±å†™çš„é•œåƒå¯åŠ¨\n# å¯åŠ¨ç¬¬ä¸€ä¸ª\ndocker run -it --name docker01 ilpvc/centos:1.0\n# å¯åŠ¨ç¬¬äºŒä¸ª\ndocker run -it --name docker02 --volumes-from docker01 ilpvc/centos:1.0\n```\n\næ­¤æ—¶è¿™ä¸¤ä¸ªå®¹å™¨çš„volumeå°±ä¼šè‡ªåŠ¨ç»‘å®š\n\n> docker01->volume01==docker02->volume01\n> \n> docker01->volume02==docker02->volume02\n\n```\n#æµ‹è¯•ï¼šåˆ é™¤docker01ï¼Œdocker02çš„æ•°æ®è¿˜åœ¨\n```\n\n> ç»‘å®šçš„å¤šä¸ªå®¹å™¨ä¹‹é—´çš„æ•°æ®å·æ˜¯æ‹·è´çš„æ¦‚å¿µã€‚\n\n**å¤šä¸ªmysqlå®ç°æ•°æ®å…±äº«**\n\n```\n#ç¬¬ä¸€ä¸ªmysql\n\ndocker run -d -p 3310:3306 -v /etc/mysql/conf.d -v /var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name=\"mysql01\" mysql:5.7\n\n#ç¬¬äºŒä¸ªmysql\ndocker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD=123456 --name=\"mysql02\" --volumes-from mysql01 mysql:5.7\n\n#è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥å®ç°ä¸¤ä¸ªå®¹å™¨æ•°æ®åŒæ­¥ï¼\n```\n\n**ç»“è®ºï¼š**\n\nå®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢ã€‚\n\nä½†æ˜¯ä¸€æ—¦ä½ æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œé‚£ä¹ˆæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šè¢«åˆ é™¤çš„ã€‚\n\n## DockerFile\n\n### DockerFileä»‹ç»\n\ndockerfileæ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ï¼\n\næ„å»ºæ­¥éª¤ï¼š\n\n1ã€ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶\n\n2ã€docker buildæ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ\n\n3ã€docker run è¿è¡Œé•œåƒ\n\n4ã€docker push å‘å¸ƒé•œåƒï¼ˆDocker Hubã€é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼ï¼‰\n\næŸ¥çœ‹ä¸€ä¸‹å®˜æ–¹æ€ä¹ˆåšï¼Ÿ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525161509459.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525161604817.png)\n\nå¾ˆå¤šå®˜æ–¹é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè‡ªå·±æ­å»ºè‡ªå·±çš„é•œåƒï¼\n\nå®˜æ–¹æ—¢ç„¶å¯ä»¥åˆ¶ä½œé•œåƒï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ï¼\n\n### DockerFileçš„æ„å»ºè¿‡ç¨‹\n\n**åŸºç¡€çŸ¥è¯†ï¼š**\n\n1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—ï¼ˆæŒ‡ä»¤ï¼‰éƒ½æ˜¯å¿…é¡»å¤§å†™å­—æ¯\n\n2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ\n\n3ã€#è¡¨ç¤ºæ³¨é‡Š\n\n4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚ï¼Œå¹¶æäº¤ï¼\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525162541376.png)\n\ndockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™dockerfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€å•ï¼\n\nDockeré•œåƒé€æ¸æˆä¸ºäº†ä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼\n\nDockerFIleï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡æ­¥éª¤ï¼Œæºä»£ç \n\nDockerImagesï¼šé€šè¿‡DockerFileæ„ä»¶ç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“ï¼\n\nDocker å®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡å™¨\n\n### DockerFileæŒ‡ä»¤\n\n```\nFROM     #åŸºç¡€é•œåƒï¼Œä¸€åˆ‡éƒ½ä»è¿™é‡Œå¼€å§‹æ„å»º\n\nMAINTAINER    #é•œåƒæ˜¯è°å†™çš„ï¼Œå§“å+é‚®ç®±\n\nADD      #æ·»åŠ é•œåƒï¼ŒåŠ å±‚\n\nWORKDIR    #é•œåƒçš„å·¥ä½œç›®å½•  \n\nVOLUME    #æŒ‚è½½çš„ç›®å½•\n\nEXPOSE     #æš´éœ²ç«¯å£\n\nRUN      #é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤\n\nCMD             #æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£\n\nENTRYPOINT         #æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥è¿½åŠ å‘½ä»¤\n\nONBUILD      #å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿çš„DockerFileè¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡ŒONBUILDçš„æŒ‡ä»¤ï¼Œè§¦å‘æŒ‡ä»¤\n\nCOPY       #ç±»ä¼¼ADDå‘½ä»¤ï¼Œå°†æˆ‘ä»¬çš„æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­\n\nENV        #æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525162218682.png)\n\n#### å®æˆ˜æµ‹è¯•\n\nDocker Hubä¸­99%çš„é•œåƒéƒ½æ˜¯ä»è¿™ä¸ªåŸºç¡€é•œåƒè¿‡æ¥çš„ FROM scartchï¼Œç„¶åé…ç½®éœ€è¦çš„è½¯ä»¶å’Œé…ç½®æ¥è¿›è¡Œçš„æ„å»º\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525161604817.png)\n\n> åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„CentOS\n\n```\nFROM centos:7\nMAINTAINER ilpvc<2693285351@qq.com>\n\nENV MYPATH /usr/local\nWORKDIR $MYPATH\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPOSE 80\n\nCMD echo $MYPATH\nCMD echo \"-----end-----\"\nCMD /bin/bash\n```\n\n```\n#è¿›è¡Œæ„å»º\ndocker build -f mydockerfile -t mycentos:1.0 .\n\n#è¿è¡ŒæˆåŠŸä¼šå‡ºç°\nSuccessfully built 1f9ae9bee6dd\nSuccessfully tagged mycentos:1.0\n\n#ä¸‹é¢æ‰“å°çš„ç›®å½•å°±æ˜¯æˆ‘ä»¬è®¾ç½®çš„ç›®å½•\n#viå‘½ä»¤ä¹Ÿèƒ½ä½¿ç”¨\n# ifconfigå‘½ä»¤ä¹Ÿèƒ½æŸ¥çœ‹ipäº†\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525225439932.png)\n\næˆ‘ä»¬å¯ä»¥åˆ—å‡ºæœ¬åœ°çš„å†\n\n```\ndocker history é•œåƒå\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525225919565.png)\n\næ¥çœ‹çœ‹mysqlçš„å†å²\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525230011724.png)\n\n##### CMDå’ŒENTRYPOINTçš„åŒºåˆ«\n\n```\nCMD             #æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£\n\nENTRYPOINT         #æŒ‡å®šå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥è¿½åŠ å‘½ä»¤\n```\n\nåˆ›å»ºä¸€ä¸ªç®€å•çš„dockerfileç”¨äºæµ‹è¯•\n\n```\n#centosä¸­è¿è¡Œä¸€ä¸ª ls -aå‘½ä»¤\n\nFROM centos       \nCMD [\"ls\",\"-a\"]\n\n# æ„å»ºè¿™ä¸ªDockerFileåï¼Œè¿è¡Œå¾—åˆ°ä¸€ä¸‹ç»“æœ\n# å‘ç°ls -aç”Ÿæ•ˆ\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525230913777.png)\n\næˆ‘æƒ³åœ¨ç›´æ¥åœ¨ls -aåé¢è¿½åŠ  -lå‘ç°æŠ¥é”™\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525231216098.png)\n\nä½†æ˜¯ç”¨ENTRYPOINTå°±å¯ä»¥\n\n```\nFROM centos\n\nENTRYPOINT [\"ls\",\"-a\"]\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220525231554036.png)\n\n**å‘ç°è¿è¡Œç»“æœå¯ä»¥ç›´æ¥è¿½åŠ å‘½ä»¤**\n\n##### Tomcaté•œåƒ\n\n1ã€å‡†å¤‡é•œåƒæ–‡ä»¶tomcatå‹ç¼©åŒ…ï¼Œjdkçš„å‹ç¼©åŒ…ï¼\n\n2ã€ç¼–å†™DockerFileæ–‡ä»¶ï¼Œå®˜æ–¹å‘½å ==Dockerfile==,buildä¼šè‡ªåŠ¨å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¸éœ€è¦-fæŒ‡å®šäº†ã€‚\n\n```\nFROM centos\nMAINTAINER ilpvc<2693285351@qq.com>\n\nCOPY readme.md /usr/local/readme.md\n\nADD jdk-8ull-linux-x64.tar.gz /usr/local/\nADD apache-tomcat-9.0.22.tar.gz /usr/local/\n\nRUN yum -y install vim\n\nENV MYPATH /usr/local\n\nWORKDIR $MYPATH\n\nENV JAVA_HOME /usr/local/jdk.1.8.0_11\nENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n\nENV CATALINA_HOME /usr/local/apach-tomcat-9.0.22\nENV CATALINA_BASH /usr/local/apach-tomcat-9.0.22\nENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin\n\nEXPOSE 8080\n\nCMD /usr/local/apach-tomcat-9.0.22/bin/startup.sh && tail -F /usr/local/apach-tomcat-9.0.22/bin/logs/catalina.out\n```\n\næ„å»ºé•œåƒ\n\n```\n#docker build -t diytomcat .\n```\n\n##### å‘å¸ƒè‡ªå·±çš„é•œåƒ\n\n> docker Hub\n\n1ã€åœ¨dockerhubä¸Šæ³¨å†Œè‡ªå·±çš„è´¦å·\n\n2ã€åœ¨æœåŠ¡å™¨ä¸Šé¢æäº¤è‡ªå·±çš„é•œåƒ\n\n```\n[root@localhost ~]# docker login --help\n\nUsage:  docker login [OPTIONS] [SERVER]\n\nLog in to a Docker registry.\nIf no server is specified, the default is defined by the daemon.\n\nOptions:\n  -p, --password string   Password\n      --password-stdin    Take the password from stdin\n  -u, --username string   Username\n```\n\n3ã€ç™»å½•æˆåŠŸåå°±å¯ä»¥æäº¤äº†\n\n## Dockerç½‘ç»œ\n\n### ç†è§£ç½‘ç»œ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526104319133.png)\n\næœ‰ä¸‰ä¸ªç½‘ç»œ\n\n```\n# é—®é¢˜ï¼š dockeræ˜¯å¦‚ä½•å¤„ç†å®¹å™¨çš„ç½‘ç»œè®¿é—®çš„ï¼Ÿ\n```\n\næµ‹è¯•ï¼š\n\n```\n#å¯åŠ¨ä¸€ä¸ªå®¹å™¨\n[root@localhost /]# docker run -d -P --name tomcat01 tomcat:7.0\n\n#æŸ¥çœ‹å®¹å™¨å†…çš„ipï¼Œå‘ç°å®¹å™¨å¯åŠ¨åä¼šå¾—åˆ° eth0@if94 ipåœ°å€ dockeråˆ†é…çš„\n[root@localhost /]# docker exec -it tomcat01 ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n93: eth0@if94: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default\n    link/ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 172.17.0.3/16 brd 172.17.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n\n# æ€è€ƒ. å®¿ä¸»æœºèƒ½ä¸èƒ½pingé€šå®¹å™¨å†…\n[root@localhost /]# ping 172.17.0.3\n# èƒ½å¤Ÿpingé€š\n```\n\n> åŸç†\n\n1ã€æˆ‘ä»¬æ²¡å®‰è£…ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™dockerå®¹å™¨åˆ†é…ä¸€ä¸ªipï¼Œåªè¦æˆ‘ä»¬å®‰è£…äº†dockerï¼Œå°±ä¼šæœ‰ä¸€ä¸ªç½‘å¡docker0\n\næ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯å°±æ˜¯evth-pairæŠ€æœ¯\n\n```\n# å†æ¬¡æµ‹è¯•ip addr\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526120627462.png)\n\nå‘ç°å¤šäº†å‡ ä¸ªï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯æˆ‘åˆšæ‰å¯åŠ¨çš„ä¸¤ä¸ªtomcat\n\n**è¿™é‡Œçš„ç½‘å¡æ˜¯ç›´æ¥å¤šäº†ä¸€å¯¹**ï¼Œä¾‹å¦‚ä¸Šé¢çš„91ï¼Œ92æ˜¯ä¸€å¯¹ï¼Œ93ï¼Œ94æ˜¯ä¸€å¯¹\n\nevth-pair å°±æ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä»–ä»¬éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸€æ®µè¿ç€åè®®ï¼Œä¸€æ®µå½¼æ­¤ç›¸è¿\n\næ­£å› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œevth-pairå……å½“ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡\n\n> å†æ¥æµ‹è¯•ä¸¤ä¸ªå®¹å™¨æ˜¯å¦èƒ½pingé€š\n\nå®é™…æ˜¯èƒ½å¤Ÿpingé€šçš„\n\n**æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œtomcat01æ˜¯å…ˆç»è¿‡è·¯ç”±è¡¨å»å¯»æ‰¾tomcat02**\n\nç½‘ç»œå›¾\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526121855548.png)\n\n**ç»“è®ºï¼štomcat01å’Œtomcat02æ˜¯å…¬ç”¨çš„ä¸€ä¸ªè·¯ç”±å™¨ï¼Œdocker0ã€‚**\n\n**æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯docker0è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨IP**\n\ndockerä½¿ç”¨çš„æ˜¯Linuxçš„æ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºä¸­æ˜¯ä¸€ä¸ªdockerå®¹å™¨çš„ç½‘æ¡¥docker0ã€‚\n\n**\\--link**\n\n> æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url=ipï¼Œé¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®åº“ipæ¢æ‰äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åå­—æ¥è¿›è¡Œè®¿é—®å®¹å™¨ï¼Ÿ\n\n```\n# åˆ›å»ºä¸‰ä¸ªå®¹å™¨ï¼Œå…¶ä¸­ç¬¬ä¸‰ä¸ªå¯¹ç¬¬äºŒä¸ªè¿›è¡Œäº†è¿æ¥\n[root@localhost /]# docker run  -d -P --name tomcat01 tomcat:7.0\n13e2b10cb0b6db36bbfecfe8204435660b133f0218b12ab3a2abd5560370414b\n[root@localhost /]# docker run  -d -P --name tomcat02 tomcat:7.0\ne55f02391c0532aaf23b6d8e6d0f2406452182e57d6939b17b73bd8934ac365a\n[root@localhost /]# docker run  -d -P --name tomcat03 --link tomcat02 tomcat:7.0\n288bcac1c4aa5d0cdb26033453205b5e8b7ab5815bcc7740dd5fc5982761bd2e\n\n# ç°åœ¨æ¥å°è¯•æ²¡æœ‰è¿æ¥çš„å®¹å™¨ä¹‹é—´pingï¼Œçœ‹æ˜¯å¦èƒ½pingé€š\n[root@localhost /]# docker exec -it tomcat02 ping tomcat01\nping: tomcat01: Name or service not known\n[root@localhost /]# docker exec -it tomcat01 ping tomcat02\nping: tomcat02: Name or service not known\n\n#ç°åœ¨æ¥çœ‹è¿æ¥çš„å®¹å™¨ä¹‹é—´æ˜¯å¦èƒ½pingé€š\n[root@localhost /]# docker exec -it tomcat03 ping tomcat02\nPING tomcat02 (172.17.0.3) 56(84) bytes of data.\n64 bytes from tomcat02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.262 ms\n64 bytes from tomcat02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.095 ms\n^C\n--- tomcat02 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 999ms\nrtt min/avg/max/mdev = 0.095/0.178/0.262/0.084 ms\n[root@localhost /]# docker exec -it tomcat02 ping tomcat03\nping: tomcat03: Name or service not known\n# å‘ç°èƒ½å¤Ÿæ­£å‘pingé€šä½†æ˜¯ä¸èƒ½åå‘pingé€š\n\n# ç”¨network inspectæŸ¥çœ‹è¯¦ç»†å†…å®¹\n# å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å®¹å™¨åœ¨docker0é‡Œçš„ç½‘ç»œé…ç½®\n[root@localhost /]# docker network inspect 30963c06b948\n[\n    {\n        \"Name\": \"bridge\",\n        \"Id\": \"30963c06b94849260983a1dd752bf2feb0329daf0306959f4e6991b1f1460ce9\",\n        \"Created\": \"2022-05-20T09:08:35.322002067+08:00\",\n        \"Scope\": \"local\",\n        \"Driver\": \"bridge\",\n        \"EnableIPv6\": false,\n        \"IPAM\": {\n            \"Driver\": \"default\",\n            \"Options\": null,\n            \"Config\": [\n                {\n                    \"Subnet\": \"172.17.0.0/16\",\n                    \"Gateway\": \"172.17.0.1\"\n                }\n            ]\n        },\n        \"Internal\": false,\n        \"Attachable\": false,\n        \"Ingress\": false,\n        \"ConfigFrom\": {\n            \"Network\": \"\"\n        },\n        \"ConfigOnly\": false,\n        \"Containers\": {\n            \"13e2b10cb0b6db36bbfecfe8204435660b133f0218b12ab3a2abd5560370414b\": {\n                \"Name\": \"tomcat01\",\n                \"EndpointID\": \"21344fe98dc1329594b13cdefcd63cdf5cf8626f44de4c31acb4f29c69b8e27d\",\n                \"MacAddress\": \"02:42:ac:11:00:02\",\n                \"IPv4Address\": \"172.17.0.2/16\",\n                \"IPv6Address\": \"\"\n            },\n            \"288bcac1c4aa5d0cdb26033453205b5e8b7ab5815bcc7740dd5fc5982761bd2e\": {\n                \"Name\": \"tomcat03\",\n                \"EndpointID\": \"45be7c38149eadba1a61d660d9ad31c4fc0a24a2ed67029738056244328e1b9b\",\n                \"MacAddress\": \"02:42:ac:11:00:04\",\n                \"IPv4Address\": \"172.17.0.4/16\",\n                \"IPv6Address\": \"\"\n            },\n            \"e55f02391c0532aaf23b6d8e6d0f2406452182e57d6939b17b73bd8934ac365a\": {\n                \"Name\": \"tomcat02\",\n                \"EndpointID\": \"4ba9e3d864da24c4c53276c3948d7576559d6ef9c0afa94cca112a6119ead089\",\n                \"MacAddress\": \"02:42:ac:11:00:03\",\n                \"IPv4Address\": \"172.17.0.3/16\",\n                \"IPv6Address\": \"\"\n            }\n        },\n        \"Options\": {\n            \"com.docker.network.bridge.default_bridge\": \"true\",\n            \"com.docker.network.bridge.enable_icc\": \"true\",\n            \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\n            \"com.docker.network.bridge.host_binding_ipv4\": \"0.0.0.0\",\n            \"com.docker.network.bridge.name\": \"docker0\",\n            \"com.docker.network.driver.mtu\": \"1500\"\n        },\n        \"Labels\": {}\n    }\n]\n# æŸ¥çœ‹docker03çš„hostsçš„é…ç½®ï¼Œå‘ç°ï¼Œtomcatçš„hosté…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†tomcat02çš„ip\n[root@localhost /]# docker exec -it tomcat03 cat /etc/hosts\n127.0.0.1       localhost\n::1     localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.3      tomcat02 e55f02391c05\n172.17.0.4      288bcac1c4aa\n```\n\n**æœ¬è´¨æ¢ç©¶ï¼š--linkå°±æ˜¯åœ¨æˆ‘ä»¬hostsé…ç½®ä¸­å¢åŠ äº†ä¸€ä¸ª172.17.0.3 tomcat02 e55f02391c05**\n\nç°åœ¨å·²ç»ä¸å»ºè®®ä½¿ç”¨ --linkï¼\n\n**æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ç½‘ç»œï¼Œdocker0çš„å±€é™æ€§å¤ªé«˜ä¾‹å¦‚ï¼šä¸æ”¯æŒå®¹å™¨åè¿æ¥è®¿é—®**\n\n### è‡ªå®šä¹‰ç½‘ç»œ\n\n> æŸ¥çœ‹æ‰€æœ‰çš„dockerç½‘ç»œ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526125915636.png)\n\n**ç½‘ç»œæ¨¡å¼**\n\nbridge ï¼šæ¡¥æ¥ dockerï¼ˆé»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿæ˜¯ç”¨bridgeæ¨¡å¼ï¼‰\n\nnone ï¼šä¸é…ç½®ç½‘ç»œ\n\nhost ï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ\n\ncontainer ï¼šå®¹å™¨å†…ç½‘ç»œè¿é€šï¼ï¼ˆç”¨å¾—å°‘ï¼å±€é™å¾ˆå¤§ï¼‰\n\n**æµ‹è¯•**\n\n```\n# æˆ‘ä»¬ç›´æ¥å¯åŠ¨çš„å‘½ä»¤ --net bridgeï¼Œè€Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„docker01\n# --net bridge,ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯è¿™ä¸ª\ndocker run -d -P --name tomcat01 --net bridge tomcat\n\n# æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ\n# ä½¿ç”¨docker network --help\nCommands:\n  connect     Connect a container to a network\n  create      Create a network\n  disconnect  Disconnect a container from a network\n  inspect     Display detailed information on one or more networks\n  ls          List networks\n  prune       Remove all unused networks\n  rm          Remove one or more networks\n\n# åœ¨ä½¿ç”¨docker network create --help\nOptions:\n      --attachable           Enable manual container attachment\n      --aux-address map      Auxiliary IPv4 or IPv6 addresses used by Network driver (default map[])\n      --config-from string   The network from which to copy the configuration\n      --config-only          Create a configuration only network\n  -d, --driver string        Driver to manage the Network (default \"bridge\")\n      --gateway strings      IPv4 or IPv6 Gateway for the master subnet\n      --ingress              Create swarm routing-mesh network\n      --internal             Restrict external access to the network\n      --ip-range strings     Allocate container ip from a sub-range\n      --ipam-driver string   IP Address Management Driver (default \"default\")\n      --ipam-opt map         Set IPAM driver specific options (default map[])\n      --ipv6                 Enable IPv6 networking\n      --label list           Set metadata on a network\n  -o, --opt map              Set driver specific options (default map[])\n      --scope string         Control the network's scope\n      --subnet strings       Subnet in CIDR format that represents a network segment\n```\n\n**æˆ‘ä»¬ç°åœ¨è¯•ç€æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œ**\n\n```\n# --driver bridge   æ¡¥æ¥æ¨¡å¼\n# --subnet 192.168.0.0/16  ç½‘æ®µ\n# --gateway 192.168.0.1   ç½‘å…³\ndocker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet\n# ç„¶åå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œ\n[root@localhost /]# docker network ls\nNETWORK ID     NAME      DRIVER    SCOPE\n30963c06b948   bridge    bridge    local\nd34fd26d662e   host      host      local\n9c81d9980296   mynet     bridge    local\n55d10d595808   none      null      local\n```\n\nè‡ªå®šä¹‰çš„ç½‘ç»œå‘ç°æ˜¯èƒ½å¤Ÿpingé€šçš„\n\n```\n[root@localhost /]# docker run -d -P --name tomcat02 --net mynet tomcat:7.0\n34d2b8b547c9bb41e65a2da07f611311d9061f75a38e4fcec8cfc819c27ca2e3\n[root@localhost /]# docker exec -it tomcat01 ping tomcat02\nPING tomcat02 (192.168.0.3) 56(84) bytes of data.\n64 bytes from tomcat02.mynet (192.168.0.3): icmp_seq=1 ttl=64 time=0.155 ms\n64 bytes from tomcat02.mynet (192.168.0.3): icmp_seq=2 ttl=64 time=0.095 ms\n^C\n--- tomcat02 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 5ms\nrtt min/avg/max/mdev = 0.095/0.125/0.155/0.030 ms\n```\n\næˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œdockeréƒ½å·²ç»å¸®æˆ‘ä»¬ç»´æŠ¤å¥½äº†å¯¹åº”å…³ç³»ï¼Œæ¨èæˆ‘ä»¬å¹³æ—¶éƒ½è¿™æ ·ä½¿ç”¨ç½‘ç»œï¼\n\nå¥½å¤„ï¼š\n\nredis-ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„\n\nmysql-ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„\n\n### ç½‘ç»œè¿é€š\n\nå‡å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œé…ç½®çš„å®¹å™¨\n\ntomcat03ä½¿ç”¨çš„æ˜¯docker0\n\ntomcat01ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰\n\nè¿™ä¸¤ä¸ªtomcatå¤„åœ¨ä¸åŒçš„ç½‘æ®µä¸­ï¼Œè¿˜èƒ½è”é€šå˜›ï¼Ÿ\n\n```\n[root@localhost /]# docker run -d -P --name tomcat03 tomcat:7.0\nfcf802fc4dd78d6d4c088c17c3574030c6c62d9514fe2156f1899afea958676f\n[root@localhost /]# docker run -d -P --name tomcat04 tomcat:7.0\ndc77cfd0e70aed481d42dd9164c3ecd681d9fb4966d7a24f129621f7d6bdaf9a\n```\n\nç°åœ¨æˆ‘ä»¬éœ€è¦æ‰“é€šä¸¤ä¸ªç½‘ç»œ\n\n```\n# è¿™é‡Œä½¿ç”¨docker network connect \n\n# æµ‹è¯•æ‰“é€štomcat03åˆ°mynet\n\ndocker network connect mynet tomcat03\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526132557525.png)\n\n**è¿™é‡Œå‘ç°èƒ½å¤Ÿpingçš„é€šäº†**\n\n```\n# å†æ¥çœ‹çœ‹docker network inspect mynet\n# å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€æ¡\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220526132746507.png)\n\n```\n# å†çœ‹çœ‹tomcat03çš„ip\n[root@localhost /]# docker exec -it tomcat03 ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n112: eth0@if113: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default\n    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n116: eth1@if117: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default\n    link/ether 02:42:c0:a8:00:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 192.168.0.4/16 brd 192.168.255.255 scope global eth1\n       valid_lft forever preferred_lft forever\n# å‘ç°å¤šäº†ä¸€ä¸ªevth -pairï¼Œå¤šäº†ä¸€ä¸ªç½‘å¡\n```\n\n### å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤\n","tags":["docker"],"categories":["è¿ç»´"]},{"title":"GitåŸºç¡€","url":"/2022/06/02/gitåŸºç¡€/","content":"\n# gitåŸºç¡€\n\n\\==åœ¨windowså®‰è£…å¥½gitä¹‹åï¼Œä¼šåœ¨å³é”®èœå•å‡ºç°ä¸€ä¸ªgit bash hereï¼Œç‚¹å‡»è¿™ä¸ªå°±èƒ½è¿›å…¥å‘½ä»¤è¡Œçª—å£ã€‚==\n\n## 1.ç”¨æˆ·ä¿¡æ¯é…ç½®\n\n![image-20210418091827503](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418091827.png)\n\n### å¸¸ç”¨å‘½ä»¤\n\n```\ngit branch -a      //æŸ¥çœ‹å½“å‰é¡¹ç›®çš„åˆ†æ”¯\ngit checkout [branch]   //ä¿®æ”¹åˆ†æ”¯\n```\n\n### æ–‡æœ¬ç¼–è¾‘å™¨\n\nè®¾ç½®Gité»˜è®¤ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨, ä¸€èˆ¬å¯èƒ½ä¼šæ˜¯ Vi æˆ–è€… Vimã€‚å¦‚æœä½ æœ‰å…¶ä»–åå¥½ï¼Œæ¯”å¦‚ Emacs çš„è¯ï¼Œå¯ä»¥é‡æ–°è®¾ç½®ï¼š:\n\n```\n$ git config --global core.editor emacs\n```\n\n### æŸ¥çœ‹é…ç½®ä¿¡æ¯\n\nè¦æ£€æŸ¥å·²æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ git config --list å‘½ä»¤ï¼š\n\n```\n$ git config --list\nhttp.postbuffer=2M\nuser.name=runoob\nuser.email=test@runoob.com\n```\n\n## 2.åˆ›å»ºä»“åº“\n\n### ä½¿ç”¨æ–¹æ³•\n\n```\ngit init\n// ä½¿ç”¨å½“å‰ç›®å½•ä½œä¸ºGitä»“åº“ï¼Œæˆ‘ä»¬åªéœ€ä½¿å®ƒåˆå§‹åŒ–ã€‚\ngit init newpro\n//åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªnewproæ–‡ä»¶ä½œä¸ºä»“åº“\n```\n\n## git clone\n\næˆ‘ä»¬ä½¿ç”¨ **git clone** ä»ç°æœ‰ Git ä»“åº“ä¸­æ‹·è´é¡¹ç›®ï¼ˆç±»ä¼¼ **svn checkout**ï¼‰ã€‚\n\nå…‹éš†ä»“åº“çš„å‘½ä»¤æ ¼å¼ä¸ºï¼š\n\n```\ngit clone <repo>\n```\n\nå¦‚æœæˆ‘ä»¬éœ€è¦å…‹éš†åˆ°æŒ‡å®šçš„ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ ¼å¼ï¼š\n\n```\ngit clone <repo> <directory>\n```\n\n### é…ç½®\n\ngit çš„è®¾ç½®ä½¿ç”¨ **git config** å‘½ä»¤ã€‚\n\næ˜¾ç¤ºå½“å‰çš„ git é…ç½®ä¿¡æ¯ï¼š\n\n```\n$ git config --list\ncredential.helper=osxkeychain\ncore.repositoryformatversion=0\ncore.filemode=true\ncore.bare=false\ncore.logallrefupdates=true\ncore.ignorecase=true\ncore.precomposeunicode=true\n```\n\nç¼–è¾‘ git é…ç½®æ–‡ä»¶:\n\n```\n$ git config -e    # é’ˆå¯¹å½“å‰ä»“åº“ \n```\n\næˆ–è€…ï¼š\n\n```\n$ git config -e --global   # é’ˆå¯¹ç³»ç»Ÿä¸Šæ‰€æœ‰ä»“åº“\n```\n\nè®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ï¼š\n\n```\n$ git config --global user.name \"runoob\"\n$ git config --global user.email test@runoob.com\n```\n\nå¦‚æœå»æ‰ **\\--global** å‚æ•°åªå¯¹å½“å‰ä»“åº“æœ‰æ•ˆã€‚\n\n## 3.Git è¿œç¨‹ä»“åº“(Github)\n\n### æ·»åŠ è¿œç¨‹åº“\n\nè¦æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç®€å•çš„åå­—ï¼Œä»¥ä¾¿å°†æ¥å¼•ç”¨,å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š\n\n```\ngit remote add [shortname] [url]\n```\n\næœ¬ä¾‹ä»¥ Github ä¸ºä¾‹ä½œä¸ºè¿œç¨‹ä»“åº“ï¼Œå¦‚æœä½ æ²¡æœ‰ Github å¯ä»¥åœ¨å®˜ç½‘ https://github.com/æ³¨å†Œã€‚\n\nç”±äºä½ çš„æœ¬åœ° Git ä»“åº“å’Œ GitHub ä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡SSHåŠ å¯†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®éªŒè¯ä¿¡æ¯ï¼š\n\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ SSH Keyï¼š\n\n```\n$ ssh-keygen -t rsa -C \"githubä¸Šæ³¨å†Œçš„é‚®ç®±\"\n```\n\nä¾‹å¦‚ï¼š\n\n```\n$ ssh-keygen -t rsa -C \"429240967@qq.com\"\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/Users/tianqixin/.ssh/id_rsa): \nEnter passphrase (empty for no passphrase):    # ç›´æ¥å›è½¦\nEnter same passphrase again:                   # ç›´æ¥å›è½¦\nYour identification has been saved in /Users/tianqixin/.ssh/id_rsa.\nYour public key has been saved in /Users/tianqixin/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:MDKVidPTDXIQoJwoqUmI4LBAsg5XByBlrOEzkxrwARI 429240967@qq.com\nThe key's randomart image is:\n+---[RSA 3072]----+\n|E*+.+=**oo       |\n|%Oo+oo=o. .      |\n|%**.o.o.         |\n|OO.  o o         |\n|+o+     S        |\n|.                |\n|                 |\n|                 |\n|                 |\n+----[SHA256]-----+\n```\n\nç„¶ååœ¨ä¸Šé¢ç¬¬7æ’çš„æ‰€æ˜¾ç¤ºçš„ç›®å½•ä¸‹æ‰¾åˆ°id\\_rsa.pub,ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢æ‰€æœ‰çš„ä¿¡æ¯ã€‚\n\nå›åˆ° github ä¸Šï¼Œè¿›å…¥ Account => Settingsï¼ˆè´¦æˆ·é…ç½®ï¼‰ã€‚\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418100925.jpeg)\n\nå·¦è¾¹é€‰æ‹© **SSH and GPG keys**ï¼Œç„¶åç‚¹å‡» **New SSH key** æŒ‰é’®,title è®¾ç½®æ ‡é¢˜ï¼Œå¯ä»¥éšä¾¿å¡«ï¼Œç²˜è´´åœ¨ä½ ç”µè„‘ä¸Šç”Ÿæˆçš„ keyã€‚\n\n![img](https://www.runoob.com/wp-content/uploads/2015/03/B0589847-A498-4415-8700-252BDE1B20C0.jpg)\n\n![img](https://www.runoob.com/wp-content/uploads/2015/03/106AD534-A38A-47F3-88A3-B7BE3F2FEEF1.jpg)\n\nå°†å¤åˆ¶çš„keyç²˜è´´è¿›å»\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101218.jpeg)\n\nä¸ºäº†éªŒè¯æ˜¯å¦æˆåŠŸï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n\n```\n$ ssh -T git@github.com\nThe authenticity of host 'github.com (52.74.223.119)' can't be established.\nRSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes                   # è¾“å…¥ yes\nWarning: Permanently added 'github.com,52.74.223.119' (RSA) to the list of known hosts.\nHi tianqixin! You've successfully authenticated, but GitHub does not provide shell access. # æˆåŠŸä¿¡æ¯\n```\n\nä¹‹åç™»å½•åç‚¹å‡»\" New repository \" ,å°±æ˜¯æ–°å»ºä¸€ä¸ªé¡¹ç›®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101349.jpeg)\n\nä¹‹ååœ¨åœ¨Repository name å¡«å…¥ runoob-git-test(è¿œç¨‹ä»“åº“å) ï¼Œå…¶ä»–ä¿æŒé»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»\"Create repository\"æŒ‰é’®ï¼Œå°±æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Gitä»“åº“ï¼š![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101442.jpeg)\n\nåˆ›å»ºæˆåŠŸåï¼Œæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101453.jpeg)\n\nå³é”®æ‰“å¼€git bash hereï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤\n\n```\n$ mkdir runoob-git-test                     # åˆ›å»ºæµ‹è¯•ç›®å½•\n$ cd runoob-git-test/                       # è¿›å…¥æµ‹è¯•ç›®å½•\n$ echo \"# èœé¸Ÿæ•™ç¨‹ Git æµ‹è¯•\" >> README.md     # åˆ›å»º README.md æ–‡ä»¶å¹¶å†™å…¥å†…å®¹\n$ ls                                        # æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶\nREADME\n$ git init                                  # åˆå§‹åŒ–\n$ git add README.md                         # æ·»åŠ æ–‡ä»¶\n$ git commit -m \"æ·»åŠ  README.md æ–‡ä»¶\"        # æäº¤å¹¶å¤‡æ³¨ä¿¡æ¯\n[master (root-commit) 0205aab] æ·»åŠ  README.md æ–‡ä»¶\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n\n# æäº¤åˆ° Github\n$ git remote add origin git@github.com:tianqixin/runoob-git-test.git\n$ git push -u origin master\n```\n\nè¿™å°±å¯ä»¥åœ¨githubä¸Šé¢çœ‹åˆ°æˆ‘ä»¬åˆšæ‰ä¸Šä¼ çš„çš„å†…å®¹\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101658.jpeg)\n\n## æŸ¥çœ‹å½“å‰çš„è¿œç¨‹åº“\n\nè¦æŸ¥çœ‹å½“å‰é…ç½®æœ‰å“ªäº›è¿œç¨‹ä»“åº“ï¼Œå¯ä»¥ç”¨å‘½ä»¤ï¼š\n\n```\ngit remote\n```\n\n### å®ä¾‹\n\n```\n$ git remote\norigin\n$ git remote -v\norigin    git@github.com:tianqixin/runoob-git-test.git (fetch)\norigin    git@github.com:tianqixin/runoob-git-test.git (push)\n```\n\næ‰§è¡Œæ—¶åŠ ä¸Š -v å‚æ•°ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ«åçš„å®é™…é“¾æ¥åœ°å€ã€‚\n\n* * *\n\n## æå–è¿œç¨‹ä»“åº“\n\nGit æœ‰ä¸¤ä¸ªå‘½ä»¤ç”¨æ¥æå–è¿œç¨‹ä»“åº“çš„æ›´æ–°ã€‚\n\n1ã€ä»è¿œç¨‹ä»“åº“ä¸‹è½½æ–°åˆ†æ”¯ä¸æ•°æ®ï¼š\n\n```\ngit fetch\n```\n\nè¯¥å‘½ä»¤æ‰§è¡Œå®Œåéœ€è¦æ‰§è¡Œ git merge è¿œç¨‹åˆ†æ”¯åˆ°ä½ æ‰€åœ¨çš„åˆ†æ”¯ã€‚\n\n2ã€ä»è¿œç«¯ä»“åº“æå–æ•°æ®å¹¶å°è¯•åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼š\n\n```\ngit merge\n```\n\nè¯¥å‘½ä»¤å°±æ˜¯åœ¨æ‰§è¡Œ git fetch ä¹‹åç´§æ¥ç€æ‰§è¡Œ git merge è¿œç¨‹åˆ†æ”¯åˆ°ä½ æ‰€åœ¨çš„ä»»æ„åˆ†æ”¯ã€‚\n\nå‡è®¾ä½ é…ç½®å¥½äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå¹¶ä¸”ä½ æƒ³è¦æå–æ›´æ–°çš„æ•°æ®ï¼Œä½ å¯ä»¥é¦–å…ˆæ‰§è¡Œ **git fetch \\[alias\\]** å‘Šè¯‰ Git å»è·å–å®ƒæœ‰ä½ æ²¡æœ‰çš„æ•°æ®ï¼Œç„¶åä½ å¯ä»¥æ‰§è¡Œ **git merge \\[alias\\]/\\[branch\\]** ä»¥å°†æœåŠ¡å™¨ä¸Šçš„ä»»ä½•æ›´æ–°ï¼ˆå‡è®¾æœ‰äººè¿™æ—¶å€™æ¨é€åˆ°æœåŠ¡å™¨äº†ï¼‰åˆå¹¶åˆ°ä½ çš„å½“å‰åˆ†æ”¯ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ Github ä¸Šç‚¹å‡»\" README.md\" å¹¶åœ¨çº¿ä¿®æ”¹å®ƒ:\n\n![img](https://www.runoob.com/wp-content/uploads/2015/03/C5A6670F-202D-4F2C-8A63-07CEA37BB67A.jpg)\n\nç„¶åæˆ‘ä»¬åœ¨æœ¬åœ°æ›´æ–°ä¿®æ”¹ã€‚\n\n```\n$ git fetch origin\nremote: Counting objects: 3, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0\nUnpacking objects: 100% (3/3), done.\nFrom github.com:tianqixin/runoob-git-test\n   0205aab..febd8ed  master     -> origin/master\n```\n\nä»¥ä¸Šä¿¡æ¯\"0205aab..febd8ed master -> origin/master\" è¯´æ˜ master åˆ†æ”¯å·²è¢«æ›´æ–°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æ›´æ–°åŒæ­¥åˆ°æœ¬åœ°ï¼š\n\n```\n$ git merge origin/master\nUpdating 0205aab..febd8ed\nFast-forward\n README.md | 1 +\n 1 file changed, 1 insertion(+)\n```\n\næŸ¥çœ‹ README.md æ–‡ä»¶å†…å®¹ï¼š\n\n```\n$ cat README.md \n# èœé¸Ÿæ•™ç¨‹ Git æµ‹è¯•\n## ç¬¬ä¸€æ¬¡ä¿®æ”¹å†…å®¹\n```\n\n* * *\n\n## æ¨é€åˆ°è¿œç¨‹ä»“åº“\n\næ¨é€ä½ çš„æ–°åˆ†æ”¯ä¸æ•°æ®åˆ°æŸä¸ªè¿œç«¯ä»“åº“å‘½ä»¤:\n\n```\ngit push [alias] [branch]\n```\n\nä»¥ä¸Šå‘½ä»¤å°†ä½ çš„ \\[branch\\] åˆ†æ”¯æ¨é€æˆä¸º \\[alias\\] è¿œç¨‹ä»“åº“ä¸Šçš„ \\[branch\\] åˆ†æ”¯ï¼Œå®ä¾‹å¦‚ä¸‹ã€‚\n\n```\n$ touch runoob-test.txt      # æ·»åŠ æ–‡ä»¶\n$ git add runoob-test.txt \n$ git commit -m \"æ·»åŠ åˆ°è¿œç¨‹\"\nmaster 69e702d] æ·»åŠ åˆ°è¿œç¨‹\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 runoob-test.txt\n\n$ git push origin master    # æ¨é€åˆ° Github\n```\n\né‡æ–°å›åˆ°æˆ‘ä»¬çš„ Github ä»“åº“ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶å·²ç»æäº¤ä¸Šæ¥äº†ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210418101854.jpeg)\n\n* * *\n\n## åˆ é™¤è¿œç¨‹ä»“åº“\n\nåˆ é™¤è¿œç¨‹ä»“åº“ä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š\n\n```\ngit remote rm [åˆ«å]\n```\n\n### å®ä¾‹\n\n```\n$ git remote -v\norigin    git@github.com:tianqixin/runoob-git-test.git (fetch)\norigin    git@github.com:tianqixin/runoob-git-test.git (push)\n\n# æ·»åŠ ä»“åº“ origin2\n$ git remote add origin2 git@github.com:tianqixin/runoob-git-test.git\n\n$ git remote -v\norigin    git@github.com:tianqixin/runoob-git-test.git (fetch)\norigin    git@github.com:tianqixin/runoob-git-test.git (push)\norigin2    git@github.com:tianqixin/runoob-git-test.git (fetch)\norigin2    git@github.com:tianqixin/runoob-git-test.git (push)\n\n# åˆ é™¤ä»“åº“ origin2\n$ git remote rm origin2\n$ git remote -v\norigin    git@github.com:tianqixin/runoob-git-test.git (fetch)\norigin    git@github.com:tianqixin/runoob-git-test.git (push)\n```\n","tags":["git"],"categories":["è¿ç»´"]},{"title":"IDEAå¸¸ç”¨è®¾ç½®åŠæ’ä»¶","url":"/2022/06/02/ideaå¸¸ç”¨è®¾ç½®åŠæ’ä»¶/","content":"\n## åŸºæœ¬è®¾ç½®\n\n### è®¾ç½®ç•Œé¢é£æ ¼åŠä¿®æ”¹å¤–éƒ¨UIå°ºå¯¸å¤§å°\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_1.png)\n\n### æ‰“å¼€IDEAæ—¶è®¾ç½®ä¸é‡æ–°æ‰“å¼€æœ€è¿‘çš„é¡¹ç›®\n\n> IDEAé»˜è®¤ä¼šæ‰“å¼€æœ€è¿‘çš„é¡¹ç›®ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è‡ªå·±é€‰æ‹©è¦æ‰“å¼€çš„é¡¹ç›®ï¼Œä¸å‹¾é€‰è¯¥é€‰é¡¹å¯ä»¥å®ç°ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_2.png)\n\n### è®¾ç½®IDEAçš„å¿«æ·é”®\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_3.png)\n\n### è®¾ç½®ä»£ç å­—ä½“å¤§å°\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_4.png)\n\n### è®¾ç½®é¡¹ç›®æ–‡ä»¶ç¼–ç æ ¼å¼\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_5.png)\n\n### è®¾ç½®ä»£ç æç¤ºçš„åŒ¹é…æ¨¡å¼\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_6.png)\n\n### è®¾ç½®æ–°å»ºç±»æ–‡ä»¶çš„ç±»æ³¨é‡Šæ¨¡ç‰ˆ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_7.png)\n\n## IDEAå’ŒEclipseå¸¸ç”¨å¿«æ·é”®å¯¹æ¯”\n\n> å‹æƒ…æç¤ºï¼šIDEAå¯ä»¥è®¾ç½®ä¸ºEclipseé£æ ¼çš„å¿«æ·é”®ï¼Œåœ¨File->Settings->Keymapå¤„ï¼Œå¦‚éœ€æ›´æ”¹éƒ¨åˆ†å¿«æ·é”®å¯æŒ‰å¦‚ä¸‹è¡¨æ ¼ä¸­çš„è‹±æ–‡æè¿°è¿›è¡Œæœç´¢ï¼Œå¹¶æ”¹ä¸ºç›¸åº”å¿«æ·é”®ã€‚\n\n| Eclipse | IDEA | è‹±æ–‡æè¿° | ä¸­æ–‡æè¿° |\n| --- | --- | --- | --- |\n| ctrl+shift+r | ctrl+shift+n | Navigate->File | æ‰¾å·¥ä½œç©ºé—´çš„æ–‡ä»¶ |\n| ctrl+shift+t | ctrl+n | Navigate->Class | æ‰¾ç±»å®šä¹‰ |\n| ctrl+shift+g | alt+f7 | Edit->Find->Find Usages | æŸ¥æ‰¾æ–¹æ³•åœ¨å“ªé‡Œè°ƒç”¨.å˜é‡åœ¨å“ªé‡Œè¢«ä½¿ç”¨ |\n| ctrl+t | ctrl+t | Other->Hierarchy Class | çœ‹ç±»ç»§æ‰¿ç»“æ„ |\n| ctrl+o | ctrl+f12 | Navigate->File Structure | æœç´¢ä¸€ä¸ªç±»é‡Œé¢çš„æ–¹æ³• |\n| shift+alt+z | ctrl+alt+t | Code->Surround With | ç”Ÿæˆå¸¸è§çš„ä»£ç å— |\n| shift+alt+l | ctrl+alt+v | Refactor->Extract->Variable | æŠ½å–å˜é‡ |\n| shift+alt+m | ctrl+alt+m | Refactor->Extract->Method | æŠ½å–æ–¹æ³• |\n| alt+å·¦ç®­å¤´ | ctrl+alt+å·¦ç®­å¤´ | Navigate->Back | å›é€€ä¸Šä¸€ä¸ªæ“ä½œä½ç½® |\n| alt+å³ç®­å¤´ | ctrl+alt+å³é”®å¤´ | Navigate->Forward | å‰è¿›ä¸Šä¸€ä¸ªæ“ä½œä½ç½® |\n| ctrl+home | ctrl+home | Move Caret to Text Start | å›åˆ°ç±»æœ€å‰é¢ |\n| ctrl+end | ctrl+end | Move Caret to Text End | å›åˆ°ç±»æœ€åé¢ |\n| ctrl+e | ctrl+e | View->Recent Files | æœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶ |\n| alt+/ | ctrl+space | Code->Completion->Basic | æç¤ºå˜é‡ç”Ÿæˆ |\n| ctrl+1 | alt+enter | Other->Show Intention Actions | æç¤ºå¯èƒ½çš„æ“ä½œ |\n| ctrl+h | ctrl+shift+f | Find in Path | å…¨å±€æœç´¢ |\n| alt+ä¸Š/ä¸‹ç®­å¤´ | alt+shift+ä¸Š/ä¸‹ç®­å¤´ | Code->Move Line Up/Down | ç§»åŠ¨ä¸€è¡Œä»£ç  |\n| ctrl+/ | ctrl+/ | Other->Fix doc comment | æ–¹æ³•æ³¨é‡Š |\n| ctrl+alt+s | alt+insert | Generate | ç”Ÿæˆgetter,setter,tostringç­‰ |\n\n## æ¨èæ’ä»¶\n\n> ç”±äºIDEAæœ¬èº«å°±è‡ªå¸¦å¾ˆå¤šæ’ä»¶ï¼Œå¯ä»¥å®Œæˆå¤§éƒ¨åˆ†éœ€æ±‚ï¼Œè¿™é‡Œå°±æ¨èä¸¤ä¸ªæœ¬äººå¸¸ç”¨çš„æ’ä»¶ã€‚\n\n### Free MyBatis plugin\n\n> éå¸¸å¥½ç”¨çš„MyBatisæ’ä»¶ï¼Œå¯¹MyBatisçš„xmlå…·æœ‰å¼ºå¤§çš„æç¤ºåŠŸèƒ½ï¼ŒåŒæ—¶å¯ä»¥å…³è”mapperæ¥å£å’Œmapper.xmlä¸­çš„sqlå®ç°ã€‚\n\n#### å¯ä»¥ä»mapperæ¥å£å’Œmapper.xmlæ–‡ä»¶ä¸­ç›¸äº’è·³è½¬\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_8.png)\n\n#### mapper.xmlä¸­çš„å„ç§æç¤º\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_9.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_10.png)\n\n### Lombok plugin\n\n> Lombokä¸ºJavaè¯­è¨€æ·»åŠ äº†éå¸¸æœ‰è¶£çš„é™„åŠ åŠŸèƒ½ï¼Œä½ å¯ä»¥ä¸ç”¨å†ä¸ºå®ä½“ç±»æ‰‹å†™getter,setterç­‰æ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªæ³¨è§£å³å¯æ‹¥æœ‰ã€‚\n\nä¸€ä¸ªæ²¡æœ‰getter,setteræ–¹æ³•çš„ç±»é€šè¿‡æ·»åŠ @Getterå’Œ@Setteræ³¨è§£æ‹¥æœ‰äº†getter,setteræ–¹æ³•ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/idea_screen_11.png)\n","tags":["idea"],"categories":["å·¥å…·"]},{"title":"Gitå‘½ä»¤","url":"/2022/06/02/gitå‘½ä»¤/","content":"\n## ä¸€ã€Gitå¸¸ç”¨å‘½ä»¤\n\n**1ã€å¸¸ç”¨**\n\n```\ngit remote add origin git@github.com:yeszao/dofiler.git     # é…ç½®è¿œç¨‹gitç‰ˆæœ¬åº“\ngit pull origin master                     # ä¸‹è½½ä»£ç åŠå¿«é€Ÿåˆå¹¶\ngit push origin master                     # ä¸Šä¼ ä»£ç åŠå¿«é€Ÿåˆå¹¶\ngit fetch origin                        # ä»è¿œç¨‹åº“è·å–ä»£ç \ngit branch                           # æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯\ngit checkout master                       # åˆ‡æ¢åˆ°masteråˆ†æ”¯\ngit checkout -b dev                       # åˆ›å»ºå¹¶åˆ‡æ¢åˆ°devåˆ†æ”¯\ngit commit -m \"first version\"                  # æäº¤\ngit status                           # æŸ¥çœ‹çŠ¶æ€\ngit log                             # æŸ¥çœ‹æäº¤å†å²\ngit config --global core.editor vim               # è®¾ç½®é»˜è®¤ç¼–è¾‘å™¨ä¸ºvimï¼ˆgité»˜è®¤ç”¨nanoï¼‰\ngit config core.ignorecase false                # è®¾ç½®å¤§å°å†™æ•æ„Ÿ\ngit config --global user.name \"YOUR NAME\"            # è®¾ç½®ç”¨æˆ·å\ngit config --global user.email \"YOUR EMAIL ADDRESS\"       # è®¾ç½®é‚®ç®±\n```\n\n**2ã€åˆ«åalias**\n\n```\ngit config --global alias.br=\"branch\"         # åˆ›å»º/æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯\ngit config --global alias.co=\"checkout\"        # åˆ‡æ¢åˆ†æ”¯\ngit config --global alias.cb=\"checkout -b\"      # åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯\ngit config --global alias.cm=\"commit -m\"       # æäº¤\ngit config --global alias.st=\"status\"         # æŸ¥çœ‹çŠ¶æ€\ngit config --global alias.pullm=\"pull origin master\" # æ‹‰å–åˆ†æ”¯\ngit config --global alias.pushm=\"push origin master\" # æäº¤åˆ†æ”¯\ngit config --global alias.log=\"git log --oneline --graph --decorate --color=always\" # å•è¡Œã€åˆ†é¢œè‰²æ˜¾ç¤ºè®°å½•\ngit config --global alias.logg=\"git log --graph --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(bold white)â€” %an%C(reset)%C(bold yellow)%d%C(reset)' --abbrev-commit --date=relative\" # å¤æ‚æ˜¾ç¤º\n```\n\n3.åˆ›å»ºç‰ˆæœ¬åº“\n\n```\ngit clone         # å…‹éš†è¿œç¨‹ç‰ˆæœ¬åº“\ngit init            # åˆå§‹åŒ–æœ¬åœ°ç‰ˆæœ¬åº“\n```\n\n4.ä¿®æ”¹å’Œæäº¤\n\n```\ngit status           # æŸ¥çœ‹çŠ¶æ€\ngit diff            # æŸ¥çœ‹å˜æ›´å†…å®¹\ngit add .            # è·Ÿè¸ªæ‰€æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶\ngit add          # è·Ÿè¸ªæŒ‡å®šçš„æ–‡ä»¶\ngit mv        # æ–‡ä»¶æ”¹å\ngit rm          # åˆ é™¤æ–‡ä»¶\ngit rm --cached      # åœæ­¢è·Ÿè¸ªæ–‡ä»¶ä½†ä¸åˆ é™¤\ngit commit -m â€œcommit messageâ€ # æäº¤æ‰€æœ‰æ›´æ–°è¿‡çš„æ–‡ä»¶\ngit commit --amend       # ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤\n```\n\n5.æŸ¥çœ‹å†å²\n\n```\ngit log             # æŸ¥çœ‹æäº¤å†å²\ngit log -p        # æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å²\ngit blame         # ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å²\n```\n\n6.æ’¤é”€\n\n```\ngit reset --hard HEAD      # æ’¤æ¶ˆå·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹\ngit reset --hard    # æ’¤é”€åˆ°æŸä¸ªç‰¹å®šç‰ˆæœ¬\ngit checkout HEAD     # æ’¤æ¶ˆæŒ‡å®šçš„æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹\ngit checkout -- # åŒä¸Šä¸€ä¸ªå‘½ä»¤\ngit revert       # æ’¤æ¶ˆæŒ‡å®šçš„æäº¤åˆ†æ”¯ä¸æ ‡ç­¾\n```\n\n7.åˆ†æ”¯ä¸æ ‡ç­¾\n\n```\ngit branch           # æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯\ngit checkout    # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯æˆ–æ ‡ç­¾\ngit branch     # åˆ›å»ºæ–°åˆ†æ”¯\ngit branch -d      # åˆ é™¤æœ¬åœ°åˆ†æ”¯\ngit tag             # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°æ ‡ç­¾\ngit tag        # åŸºäºæœ€æ–°æäº¤åˆ›å»ºæ ‡ç­¾\ngit tag -a \"v1.0\" -m \"ä¸€äº›è¯´æ˜\" # -aæŒ‡å®šæ ‡ç­¾åç§°ï¼Œ-mæŒ‡å®šæ ‡ç­¾è¯´æ˜\ngit tag -d       # åˆ é™¤æ ‡ç­¾\ngit checkout dev        # åˆå¹¶ç‰¹å®šçš„commitåˆ°devåˆ†æ”¯ä¸Š\ngit cherry-pick 62ecb3\n```\n\n8.åˆå¹¶ä¸è¡åˆ\n\n```\ngit merge        # åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯\ngit merge --abort        # å–æ¶ˆå½“å‰åˆå¹¶ï¼Œé‡å»ºåˆå¹¶å‰çŠ¶æ€\ngit merge dev -Xtheirs     # ä»¥åˆå¹¶devåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼Œæœ‰å†²çªåˆ™ä»¥devåˆ†æ”¯ä¸ºå‡†\ngit rebase       # è¡åˆæŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯\n```\n\n9.è¿œç¨‹æ“ä½œ\n\n```\ngit remote -v          # æŸ¥çœ‹è¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯\ngit remote show     # æŸ¥çœ‹æŒ‡å®šè¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯\ngit remote add  # æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“\ngit remote remove    # åˆ é™¤æŒ‡å®šçš„è¿œç¨‹ç‰ˆæœ¬åº“\ngit fetch        # ä»è¿œç¨‹åº“è·å–ä»£ç \ngit pull    # ä¸‹è½½ä»£ç åŠå¿«é€Ÿåˆå¹¶\ngit push    # ä¸Šä¼ ä»£ç åŠå¿«é€Ÿåˆå¹¶\ngit push : # åˆ é™¤è¿œç¨‹åˆ†æ”¯æˆ–æ ‡ç­¾\ngit push --tags         # ä¸Šä¼ æ‰€æœ‰æ ‡ç­¾\n```\n\n10.æ‰“åŒ…\n\n```\ngit archive --format=zip --output ../file.zip master  # å°†masteråˆ†æ”¯æ‰“åŒ…æˆfile.zipæ–‡ä»¶ï¼Œä¿å­˜åœ¨ä¸Šä¸€çº§ç›®å½•\ngit archive --format=zip --output ../v1.2.zip v1.2   # æ‰“åŒ…v1.2æ ‡ç­¾çš„æ–‡ä»¶ï¼Œä¿å­˜åœ¨ä¸Šä¸€çº§ç›®å½•v1.2.zipæ–‡ä»¶ä¸­\ngit archive --format=zip v1.2 > ../v1.2.zip       # ä½œç”¨åŒä¸Šä¸€æ¡å‘½ä»¤\n```\n\n11.å…¨å’Œå±€éƒ¨é…ç½®\n\n```\nå…¨å±€é…ç½®ä¿å­˜åœ¨ï¼š$Home/.gitconfig\næœ¬åœ°ä»“åº“é…ç½®ä¿å­˜åœ¨ï¼š.git/config\n```\n\n12.è¿œç¨‹ä¸æœ¬åœ°åˆå¹¶\n\n```\ngit init               # åˆå§‹åŒ–æœ¬åœ°ä»£ç ä»“\ngit add .               # æ·»åŠ æœ¬åœ°ä»£ç \ngit commit -m \"add local source\"   # æäº¤æœ¬åœ°ä»£ç \ngit pull origin master        # ä¸‹è½½è¿œç¨‹ä»£ç \ngit merge master           # åˆå¹¶masteråˆ†æ”¯\ngit push -u origin master       # ä¸Šä¼ ä»£ç \n```\n","tags":["git"],"categories":["è¿ç»´"]},{"title":"javaæ³›å‹ Tä¸Tçš„ç”¨æ³•","url":"/2022/06/02/javaæ³›å‹-tä¸tçš„ç”¨æ³•/","content":"\n# [Javaä¹‹æ³›å‹ Tä¸Tçš„ç”¨æ³•](https://www.cnblogs.com/jpfss/p/9929108.html)\n\n`<T> T`è¡¨ç¤ºè¿”å›å€¼æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œä¼ é€’å•¥ï¼Œå°±è¿”å›å•¥ç±»å‹çš„æ•°æ®ï¼Œè€Œå•ç‹¬çš„`T`å°±æ˜¯è¡¨ç¤ºé™åˆ¶ä½ ä¼ é€’çš„å‚æ•°ç±»å‹ï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªæ³›å‹çš„è¿”å›æ–¹å¼ï¼Œè·å–æ¯ä¸€ä¸ªé›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®ï¼Œ é€šè¿‡è¿”å›å€¼`<T> T` å’Œ`T`çš„ä¸¤ç§æ–¹æ³•å®ç°\n\n## `<T> T` ç”¨æ³•\n\nè¿™ä¸ª`<T> T` è¡¨ç¤ºçš„æ˜¯è¿”å›å€¼Tæ˜¯æ³›å‹ï¼ŒTæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªä¸œè¥¿å…ˆç»™æˆ‘ç•™ç€ï¼Œç­‰æˆ‘ç¼–è¯‘çš„æ—¶å€™ï¼Œå‘Šè¯‰ä½ ã€‚\n\n```\npublic class Demo {\n\n    public static void main(String[] args) {\n\n        Demo demo = new Demo();\n\n        //è·å–stringç±»å‹\n        List<String> array = new ArrayList<String>();\n        array.add(\"test\");\n        array.add(\"doub\");\n        String str = demo.getListFisrt(array);\n        System.out.println(str);\n\n        //è·å–numsç±»å‹\n        List<Integer> nums = new ArrayList<Integer>();\n        nums.add(12);\n        nums.add(13);\n\n        Integer num = demo.getListFisrt(nums);\n        System.out.println(num);\n    }\n\n    /**\n     * è¿™ä¸ª<T> T å¯ä»¥ä¼ å…¥ä»»ä½•ç±»å‹çš„List\n     * å‚æ•°T\n     *     ç¬¬ä¸€ä¸ª è¡¨ç¤ºæ˜¯æ³›å‹\n     *     ç¬¬äºŒä¸ª è¡¨ç¤ºè¿”å›çš„æ˜¯Tç±»å‹çš„æ•°æ®\n     *     ç¬¬ä¸‰ä¸ª é™åˆ¶å‚æ•°ç±»å‹ä¸ºT\n     * @param data\n     * @return\n     */\n    private <T> T getListFisrt(List<T> data) {\n        if (data == null || data.size() == 0) {\n            return null;\n        }\n        return data.get(0);\n    }\n\n}\n```\n\n## T ç”¨æ³•\n\nè¿”å›å€¼ï¼Œç›´æ¥å†™`T`è¡¨ç¤ºé™åˆ¶å‚æ•°çš„ç±»å‹ï¼Œè¿™ç§æ–¹æ³•ä¸€èˆ¬å¤šç”¨äºå…±åŒæ“ä½œä¸€ä¸ªç±»å¯¹è±¡ï¼Œç„¶åè·å–é‡Œé¢çš„é›†åˆä¿¡æ¯å•¥çš„ã€‚\n\n```\npublic class Demo2<T> {\n\n    public static void main(String[] args) {\n\n        //é™åˆ¶T ä¸ºString ç±»å‹\n        Demo2<String> demo = new Demo2<String>();\n\n        //è·å–stringç±»å‹\n        List<String> array = new ArrayList<String>();\n        array.add(\"test\");\n        array.add(\"doub\");\n        String str = demo.getListFisrt(array);\n        System.out.println(str);\n\n        //è·å–Integerç±»å‹ T ä¸ºIntegerç±»å‹\n        Demo2<Integer> demo2 = new Demo2<Integer>();\n        List<Integer> nums = new ArrayList<Integer>();\n        nums.add(12);\n        nums.add(13);\n        Integer num = demo2.getListFisrt(nums);\n        System.out.println(num);\n    }\n\n    /**\n     * è¿™ä¸ªåªèƒ½ä¼ é€’Tç±»å‹çš„æ•°æ®\n     * è¿”å›å€¼ å°±æ˜¯Demo<T> å®ä¾‹åŒ–ä¼ é€’çš„å¯¹è±¡ç±»å‹\n     * @param data\n     * @return\n     */\n    private T getListFisrt(List<T> data) {\n        if (data == null || data.size() == 0) {\n            return null;\n        }\n        return data.get(0);\n    }\n}\n```\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"JQuery","url":"/2022/06/02/jquery/","content":"\n# åŸºç¡€\n\n## JQueryä»‹ç»\n\n**æ˜¯ä»€ä¹ˆï¼š**JQueryæ˜¯è¾…åŠ©JavaScriptå¼€å‘çš„ä¸€ä¸ªjsçš„ç±»åº“ã€‚â€œJâ€å°±æ˜¯javascriptï¼Œâ€˜Queryâ€™å°±æ˜¯æŸ¥è¯¢çš„æ„æ€\n\n**ç›®å‰JQueryæ˜¯æœ€æµè¡Œçš„javascriptåº“**\n\n**ä»å®˜ç½‘ä¸‹è½½çš„JQueryå®é™…æ˜¯æ˜¯ä¸€ä¸ª.jsçš„æ–‡æœ¬**\n\n## JQueryçš„ä½¿ç”¨\n\nå®ä¾‹ï¼š\n\n```\n<!-- è¿™é‡Œçš„srcå°±æ˜¯å¼•ç”¨JQueryåº“ï¼Œç›´æ¥ä»å®˜ç½‘å°†æ•´ä¸ªjsä»£ç å¤åˆ¶ä¸‹æ¥ä¿å­˜å°±è¡Œ-->\n<script type=\"text/javascript\" src=\"../ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\"> \n<!-- $ç¬¦å·å°±æ˜¯JQueryä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼ŒJQueryçš„åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹-->\n<!-- è·å–çš„æŸä¸ªæ ‡ç­¾çš„å±æ€§.click(function(){})è¿™æ ·çš„å½¢å¼-->\n$(function(){\n    var $but=$('#item');\n    $but.click(function(){\n        alert(\"danji\")\n    })\n})\n</script>\n```\n\n## JQueryçš„æ ¸å¿ƒå‡½æ•°\n\n**â€˜$â€™ç¬¦å·**ï¼šæ˜¯JQueryçš„æ ¸å¿ƒå‡½æ•°èƒ½å¤Ÿå®ŒæˆJQueryçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œ\\\\$()å°±æ˜¯è°ƒç”¨$è¿™ä¸ªå‡½æ•°\n\n**1ã€å½“ä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°æ—¶'$(function)'**:\n\nè¡¨ç¤ºé¡µé¢åŠ è½½å®Œæˆåï¼Œç›¸å½“äºwindow.onload=function(){}\n\n```\n<script type=\"text/javascript\" src=\"../AJAX/ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\" >\n    $(function(){\n        alert('é¡µé¢åŠ è½½å®Œæ¯•ï¼ï¼ï¼')\n    })\n</script>\n```\n\n**2ã€å½“ä¼ å…¥çš„çš„å‚æ•°ä¸ºã€htmlå­—ç¬¦ä¸²ã€‘æ—¶ï¼š**\n\nä¼šç›´æ¥ä¸ºæˆ‘ä»¬åˆ›å»ºè¿™ä¸ªhtmlæ ‡ç­¾å¯¹è±¡\n\n```\n<script type=\"text/javascript\" src=\"../AJAX/ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\" >\n    $(function(){\n        alert('é¡µé¢åŠ è½½å®Œæ¯•ï¼ï¼ï¼')\n        $('<div>'+\n        '<span>wenjian1</span>'+\n        '<span>wenjian2</span>'+\n        '</div>').appendTo(\"body\")\n    })    \n</script>\n```\n\n**3ã€å½“ä¼ å…¥å‚æ•°ä¸ºé€‰æ‹©å™¨å‚æ•°æ—¶ï¼š**\n\n**$(\"#id\")ï¼š**æŒ‰ç…§idæŸ¥è¯¢æ ‡ç­¾å¯¹è±¡\n\n**$(\"æ ‡ç­¾å\")ï¼š**æŒ‰ç…§æ ‡ç­¾åæŸ¥è¯¢æ ‡ç­¾å¯¹è±¡\n\n**$(\".classå±æ€§å€¼\")ï¼š**æŒ‰ç…§classå±æ€§æŸ¥è¯¢æ ‡ç­¾\n\n```\n$(\"#sp1\"))\n$(\".class sp\"))\n$(\"span\").length\n```\n\n**4ã€å½“ä¼ å…¥çš„å‚æ•°ä¸ºDOM'å¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºJQueryå¯¹è±¡ï¼š**\n\nç¬¬ä¸‰ç‚¹é‡Œé¢çš„æŸ¥å‡ºæ¥çš„å€¼å…¨éƒ¨éƒ½è½¬æ¢ä¸ºäº†JQueryå¯¹è±¡\n\n## JQueryå¯¹è±¡çš„æœ¬è´¨\n\n**JQueryå¯¹è±¡æœ¬è´¨æ˜¯DOMå¯¹è±¡æ•°ç»„+JQueryæä¾›çš„ä¸€ç³»åˆ—åŠŸèƒ½å‡½æ•°**\n\n## JQueryå¯¹è±¡å’ŒDOMå¯¹è±¡çš„åŒºåˆ«\n\n**JQueryå¯¹è±¡ä¸èƒ½ä½¿ç”¨DOMå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒDOMå¯¹è±¡ä¹Ÿä¸èƒ½ä½¿ç”¨JQueryå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•**\n\n\\==ä½†æ˜¯JQueryå’ŒDOMå¯ä»¥äº’ç›¸è½¬æ¢ï¼Œä¹Ÿå°±å¯ä»¥å®ç°ä¸¤ç§å¯¹è±¡çš„æ–¹æ³•éƒ½èƒ½ä½¿ç”¨==\n\nDOMè½¬æ¢ä¸ºJQueryç›´æ¥ç”¨$()å°±è¡Œï¼Œè€ŒJQueryè½¬DOMåˆ™æ ¹æ®JQueryæ˜¯æ•°ç»„ï¼Œå–ä¸‹æ ‡å°±èƒ½è¿›è¡Œè½¬æ¢ã€‚\n\n# JQueryé€‰æ‹©å™¨\n\n## åŸºæœ¬é€‰æ‹©å™¨\n\n[é€‰æ‹©å™¨APIæ–‡æ¡£ä¸‹è½½](https://presenter.oss-cn-shanghai.aliyuncs.com/jQueryAPI_1.7.1_CN.chm)\n\n$(\"#id\")\n\n$(\"\")\n\n# JQueryå±æ€§æ“ä½œ\n\n## jqueryå±æ€§æ“ä½œ\n\n**html()** å¯ä»¥è®¾ç½®å’Œè·å–èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾çš„å†…å®¹ï¼Œå’ŒDOMä¸­çš„innerHTML()ä¸€æ ·\n\n\\*\\*text() \\*\\* å¯ä»¥è®¾ç½®å’Œè·å–èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾çš„å†…å®¹ï¼Œå’ŒDOMä¸­çš„innerTEXT()ä¸€æ ·\n\n**val()** å¯ä»¥è®¾ç½®å’Œè·å–è¡¨å•é¡¹çš„valueå±æ€§å€¼\n\n**åœ¨è¿™é‡Œé¢ä¸ä¼ å‚æ˜¯è·å–ï¼Œä¼ å‚æ˜¯è®¾ç½®ã€‚**\n\nå®ä¾‹ï¼š\n\n```\n<script type=\"text/javascript\" src=\"../AJAX/ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\">\n    $(function(){\n        alert($('div').html())\n        $('div').eq(1).html('è¿™ä¸æ˜¯ç¬¬äºŒä¸ªdivæ ‡ç­¾')\n        $('div').first().html('è¿™ä¸æ˜¯ç¬¬ä¸€ä¸ªdivæ ‡ç­¾')\n        $(\"button\").click(function(){\n        $(\"#usename\").val(\"niupida\")\n})\n    })\n</script>\n\n<body>\n    <div>ç¬¬ä¸€ä¸ªdivæ ‡ç­¾</div>\n    <div>ç¬¬äºŒä¸ªdivæ ‡ç­¾</div>\n    <div>ç¬¬ä¸‰ä¸ªdivæ ‡ç­¾</div>\n    <input type=\"text\" id=\"usename\">\n    <button>æäº¤</button>\n</body>\n```\n\n**æ³¨ï¼šåœ¨html()ä¸­ä¼ è¿›å»çš„å‚æ•°ä¼šå°†åŒ…å«çš„æ ‡ç­¾è¿›è¡Œè½¬æ¢ï¼Œè€Œåœ¨text()ä¸­ï¼Œä¸€åˆ‡éƒ½å½“æ–‡æœ¬å¤„ç†ã€‚**\n\n**ä¾‹å¦‚ï¼štext(â€œ\\\\**\n\n# **è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜\\\\**\n\nâ€)ï¼Œé‚£ä¹ˆä¼šå°†è¿™ä¸ªæ–‡æœ¬ç›´æ¥è¯»å–å‡ºæ¥ï¼Œä¸ä¼šè¯†åˆ«æ ‡ç­¾ã€‚\\\\\n\n# è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜\\\\\n\nè¿˜æœ‰ä¸€äº›é‡è¦çš„å±æ€§å€¼æ“ä½œæ–¹æ³•\n\n**attr()** è·å–æŸä¸ªç‰¹å®šçš„å±æ€§å€¼ï¼Œåœ¨è¿›è¡Œæ”¹å˜ï¼Œä¸€ä¸ªå‚æ•°æ˜¯è·å–ï¼Œä¸¤ä¸ªå‚æ•°æ˜¯æ”¹å˜ï¼Œä¸æ¨èæ“æ§checkedï¼Œreadonlyï¼Œselectedï¼Œdisabledç­‰ç­‰ã€‚\n\n**prop()** åŒä¸Šï¼Œä½†æ˜¯åªæ¨èæ“ä½œcheckedï¼Œreadonlyï¼Œselectedï¼Œdisabledç­‰ç­‰\n\n```\n<script type=\"text/javascript\" src=\"../AJAX/ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\">\n    $(function(){\n        alert($(\"[name='dv']:first\").attr('name','ddiic'))\n    })\n</script>\n```\n\n## JQueryæ’å…¥\n\n### å†…éƒ¨æ’å…¥\n\n**appendTo()** a.appendTo(b) å°†aæ’å…¥åˆ°bä¸­ï¼Œä¸”æˆä¸ºæœ€åä¸€ä¸ªå…ƒç´ \n\n**prependTo()** a.prependTo(b) æŠŠaæ’åˆ°bæ‰€æœ‰å­å…ƒç´ å‰é¢ï¼Œå¹¶æˆä¸ºç¬¬ä¸€ä¸ªå­å…ƒç´ \n\n### å¤–éƒ¨æ’å…¥\n\n**insertAfter()** a.insertAfter(b) å¾—åˆ°ba\n\n**bainsertBefore()** a.insertBefore(b) å¾—åˆ°ab\n\n### æ›¿æ¢\n\n**replaceWith()** a.replaceWith(b) ç”¨ b æ›¿æ¢æ‰ a\n\n**areplaceAll()** a.replaceAll(b) ç”¨ a æ›¿æ¢æ‰æ‰€æœ‰ b\n\n### åˆ é™¤\n\n**remove()** a.remove() åˆ é™¤ a æ ‡ç­¾\n\n**empty()** a.empty() æ¸…ç©º a æ ‡ç­¾é‡Œçš„\n\n## CSS æ ·å¼æ“ä½œ\n\n**addClass()** æ·»åŠ æ ·å¼\n\n**removeClass()** åˆ é™¤æ ·å¼\n\n**toggleClass()** æœ‰å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ æ ·å¼ã€‚\n\n**offset()** è·å–å’Œè®¾ç½®å…ƒç´ çš„åæ ‡ã€‚\n\nä¾‹å­ï¼š\n\n```\n<style>\n    div.bagaq{\n        background-color: aqua;\n    }\n    div.bagbr{\n        background-color: brown;\n    }\n    div.sty{\n        background-color: chartreuse;\n        font-size: large;\n    }\n</style>\n<script type=\"text/javascript\" src=\"../AJAX/ä»£ç /JQuery.js\"></script>\n<script type=\"text/javascript\">\n    $(function(){\n        $('div:first').addClass('bagaq')\n        $('div:eq(1)').removeClass()\n        $('div:last').toggleClass('sty')\n        $('div:eq(1)').offset({\n            top:100,\n            left:100\n        }\n        )\n    })\n</script>\n<body>\n    <table>\n        <tr>\n            <td><div>å‰å®³å•Š</div></td>\n            <td><div class=\"bagbr\">ä¸å‰å®³</div></td>\n            <td><div>å°±è¿™å˜›</div></td>\n        </tr>\n    </table>\n\n</body>\n```\n\n## jQuery åŠ¨ç”»\n\n### åŸºæœ¬åŠ¨ç”»\n\n**show()** å°†éšè—çš„å…ƒç´ æ˜¾ç¤º\n\n**hide()** å°†å¯è§çš„å…ƒç´ éšè—ã€‚\n\n**toggle()** å¯è§å°±éšè—ï¼Œä¸å¯è§å°±æ˜¾ç¤ºã€‚\n\n**ä»¥ä¸ŠåŠ¨ç”»æ–¹æ³•éƒ½å¯ä»¥æ·»åŠ å‚æ•°ã€‚**\n\n **1ã€ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŠ¨ç”» æ‰§è¡Œçš„æ—¶é•¿ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½**\n\n **2ã€ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŠ¨ç”»çš„å›è°ƒå‡½æ•° (åŠ¨ç”»å®Œæˆåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°)**\n\n### æ·¡å…¥æ·¡å‡ºåŠ¨ç”»\n\n**fadeIn()** æ·¡å…¥ï¼ˆæ…¢æ…¢å¯è§ï¼‰\n\n**fadeOut()** æ·¡å‡ºï¼ˆæ…¢æ…¢æ¶ˆå¤±ï¼‰\n\n**fadeTo()** åœ¨æŒ‡å®šæ—¶é•¿å†…æ…¢æ…¢çš„å°†é€æ˜åº¦ä¿®æ”¹åˆ°æŒ‡å®šçš„å€¼ã€‚0 é€æ˜ï¼Œ1 å®Œæˆå¯è§ï¼Œ0.5 åŠé€æ˜\n\n**fadeToggle()** æ·¡å…¥/æ·¡å‡º\n\n### ä»£ç \n\n```\n<script type=\"text/javascript\">\n    /*  \n        åŸºæœ¬\n        show([speed,[easing],[fn]]) \n        hide([speed,[easing],[fn]]) \n        toggle([speed],[easing],[fn]) \n        æ»‘åŠ¨\n        slideDown([spe],[eas],[fn]) \n        slideUp([speed,[easing],[fn]]) \n        slideToggle([speed],[easing],[fn]) \n        æ·¡å…¥æ·¡å‡º\n        fadeIn([speed],[eas],[fn]) \n        fadeOut([speed],[eas],[fn]) \n        fadeTo([[spe],opa,[eas],[fn]]) \n        fadeToggle([speed,[eas],[fn]])\n        */\n        $(function(){\n            //æ˜¾ç¤º   show()\n            $(\"#btn1\").click(function(){\n                $(\"#div1\").show(2000,function () {\n                    alert(\"showåŠ¨ç”»å®Œæˆ \")\n                });\n            });     \n            //éšè—  hide()\n            $(\"#btn2\").click(function(){\n                $(\"#div1\").hide(1000,function () {\n                    alert(\"hideåŠ¨ç”» æ‰§è¡Œå®Œæˆ \")\n                });\n            }); \n            //åˆ‡æ¢   toggle()\n            $(\"#btn3\").click(function(){\n                $(\"#div1\").toggle(1000,function () {\n                    alert(\"toggleåŠ¨ç”» å®Œæˆ \")\n                });\n            });\n\n            // var abc = function(){\n            //  $(\"#div1\").toggle(1000,abc);\n            // }\n            // abc();\n\n            //æ·¡å…¥   fadeIn()\n            $(\"#btn4\").click(function(){\n                $(\"#div1\").fadeIn(2000,function () {\n                    alert(\"fadeInå®Œæˆ \")\n                });\n            }); \n            //æ·¡å‡º  fadeOut()\n            $(\"#btn5\").click(function(){\n                $(\"#div1\").fadeOut(2000,function () {\n                    alert(\"fadeOutå®Œæˆ \")\n                });\n            }); \n\n            //æ·¡åŒ–åˆ°  fadeTo()\n            $(\"#btn6\").click(function(){\n                $(\"#div1\").fadeTo(2000,0.5,function () {\n                    alert('fadeToå®Œæˆ ')\n                });\n            }); \n            //æ·¡åŒ–åˆ‡æ¢  fadeToggle()\n            $(\"#btn7\").click(function(){\n                $(\"#div1\").fadeToggle(1000,function () {\n                    alert(\"fadeToggleå®Œæˆ \")\n                });\n            }); \n        })\n</script>\n\n    </head>\n    <body>\n        <table style=\"float: left;\">\n            <tr>\n                <td><button id=\"btn1\">æ˜¾ç¤ºshow()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn2\">éšè—hide()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn3\">æ˜¾ç¤º/éšè—åˆ‡æ¢ toggle()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn4\">æ·¡å…¥fadeIn()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn5\">æ·¡å‡ºfadeOut()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn6\">æ·¡åŒ–åˆ°fadeTo()</button></td>\n            </tr>\n            <tr>\n                <td><button id=\"btn7\">æ·¡åŒ–åˆ‡æ¢fadeToggle()</button></td>\n            </tr>\n        </table>\n\n        <div id=\"div1\" style=\"float:left;border: 1px solid;background-color: blue;width: 300px;height: 200px;\">\n            jqueryåŠ¨ç”»å®šä¹‰äº†å¾ˆå¤šç§åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨è¿™äº›åŠ¨ç”»æ•ˆæœ\n        </div>\n    </body>\n```\n\n## JQuery äº‹ä»¶\n\n### åŸºæœ¬\n\n\\*\\*$( function(){} ) å’Œ window.onload = function(){} çš„åŒºåˆ«ï¼Ÿ \\*\\*\n\n**ä»–ä»¬åˆ†åˆ«æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Ÿ**\n\n1ã€jQuery çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åæ˜¯æµè§ˆå™¨çš„å†…æ ¸è§£æå®Œé¡µé¢çš„æ ‡ç­¾åˆ›å»ºå¥½ DOM å¯¹è±¡ä¹‹åå°±ä¼šé©¬ä¸Šæ‰§è¡Œã€‚\n\n2ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œé™¤äº†è¦ç­‰æµè§ˆå™¨å†…æ ¸è§£æå®Œæ ‡ç­¾åˆ›å»ºå¥½ DOM å¯¹è±¡ï¼Œè¿˜è¦ç­‰æ ‡ç­¾æ˜¾ç¤ºæ—¶éœ€è¦çš„å†…å®¹åŠ è½½å®Œæˆã€‚\n\n**ä»–ä»¬è§¦å‘çš„é¡ºåºï¼Ÿ**\n\n1ã€jQuery é¡µé¢åŠ è½½å®Œæˆä¹‹åå…ˆæ‰§è¡Œ\n\n2ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹å\n\n**ä»–ä»¬æ‰§è¡Œçš„æ¬¡æ•°ï¼Ÿ**\n\n1ã€åŸç”Ÿ js çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åï¼Œåªä¼šæ‰§è¡Œæœ€åä¸€æ¬¡çš„èµ‹å€¼å‡½æ•°ã€‚\n\n2ã€jQuery çš„é¡µé¢åŠ è½½å®Œæˆä¹‹åæ˜¯å…¨éƒ¨æŠŠæ³¨å†Œçš„ function å‡½æ•°ï¼Œä¾æ¬¡é¡ºåºå…¨éƒ¨æ‰§è¡Œã€‚\n\n**jQuery ä¸­å…¶ä»–çš„äº‹ä»¶å¤„ç†æ–¹æ³•ï¼š**\n\n> **click()** å®ƒå¯ä»¥ç»‘å®šå•å‡»äº‹ä»¶ï¼Œä»¥åŠè§¦å‘å•å‡»äº‹ä»¶\n> \n> **mouseover()** é¼ æ ‡ç§»å…¥äº‹ä»¶\n> \n> \\*\\*mouseout() \\*\\* é¼ æ ‡ç§»å‡ºäº‹ä»¶\n> \n> **bind()** å¯ä»¥ç»™å…ƒç´ ä¸€æ¬¡æ€§ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶ã€‚\n> \n> \\*\\*one() \\*\\* ä½¿ç”¨ä¸Šè·Ÿ bind ä¸€æ ·ã€‚ä½†æ˜¯ one æ–¹æ³•ç»‘å®šçš„äº‹ä»¶åªä¼šå“åº”ä¸€æ¬¡\n> \n> **unbind()** è·Ÿ bind æ–¹æ³•ç›¸åçš„æ“ä½œï¼Œè§£é™¤äº‹ä»¶çš„ç»‘å®š\n> \n> **live()** ä¹Ÿæ˜¯ç”¨æ¥ç»‘å®šäº‹ä»¶ã€‚å®ƒå¯ä»¥ç”¨æ¥ç»‘å®šé€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰å…ƒç´ çš„äº‹ä»¶ã€‚å“ªæ€•è¿™ä¸ªå…ƒç´ æ˜¯åé¢åŠ¨æ€åˆ›å»ºå‡ºæ¥çš„ä¹Ÿ\n\n### äº‹ä»¶çš„å†’æ³¡\n\n**ä»€ä¹ˆæ˜¯äº‹ä»¶çš„å†’æ³¡ï¼Ÿ**\n\n äº‹ä»¶çš„å†’æ³¡æ˜¯æŒ‡ï¼Œçˆ¶å­å…ƒç´ åŒæ—¶ç›‘å¬åŒä¸€ä¸ªäº‹ä»¶ã€‚å½“è§¦å‘å­å…ƒç´ çš„äº‹ä»¶çš„æ—¶å€™ï¼ŒåŒä¸€ä¸ªäº‹ä»¶ä¹Ÿè¢«ä¼ é€’åˆ°äº†çˆ¶å…ƒç´ çš„äº‹ä»¶é‡Œå»å“åº”ã€‚\n\n**é‚£ä¹ˆå¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å‘¢ï¼Ÿ**\n\n ==åœ¨å­å…ƒç´ äº‹ä»¶å‡½æ•°ä½“å†…ï¼Œreturn false; å¯ä»¥é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ä¼ ==\n","tags":["jquery"],"categories":["javaå…¨æ ˆ"]},{"title":"kaliå®‰è£….debçš„å®‰è£…åŒ…","url":"/2022/06/02/kaliå®‰è£…-debçš„å®‰è£…åŒ…/","content":"\n### åœ¨kaliä¸­å®‰è£…ä¸€äº›ä¸‹è½½å¥½çš„debå®‰è£…åŒ…æ—¶\n\n#### ä¸€ï¼Œæ‰¾åˆ°å®‰è£…åŒ…ä½ç½®\n\n![image-20220318155623220](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220318155623220.png)\n\n\\==è¿™é‡ŒåŸæœ¬æœ‰ä¸ªutools==\n\n#### äºŒï¼Œæ‰“å¼€ç»ˆç«¯\n\n![image-20220318155937843](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220318155937843.png)\n\nå‘½ä»¤ï¼š\n\n```\nsudo su\n#è¶…çº§ç”¨æˆ·\ncd /tmp/mozilla_kali0\n#æ‰“å¼€éœ€è¦å®‰è£…æ–‡ä»¶æ‰€åœ¨ç›®å½•\nls\n#æ˜¾ç¤ºå½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹\ndpkg -i [éœ€è¦å®‰è£…æ–‡ä»¶çš„å…¨åç§°]\n#å®‰è£…\n```\n\nç­‰å¾…å®‰è£…å³å¯\n","tags":["kali"],"categories":["è¿ç»´"]},{"title":"leetcode-942","url":"/2022/06/02/leetcode-942/","content":"\n### é¢˜ç›®æè¿°\n\nç”±èŒƒå›´ \\[0,n\\] å†…æ‰€æœ‰æ•´æ•°ç»„æˆçš„ n + 1 ä¸ªæ•´æ•°çš„æ’åˆ—åºåˆ—å¯ä»¥è¡¨ç¤ºä¸ºé•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² s ï¼Œå…¶ä¸­:\n\nå¦‚æœ perm\\[i\\] < perm\\[i + 1\\] ï¼Œé‚£ä¹ˆ s\\[i\\] == 'I' å¦‚æœ perm\\[i\\] > perm\\[i + 1\\] ï¼Œé‚£ä¹ˆ s\\[i\\] == 'D'  \nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œé‡æ„æ’åˆ— perm å¹¶è¿”å›å®ƒã€‚å¦‚æœæœ‰å¤šä¸ªæœ‰æ•ˆæ’åˆ—permï¼Œåˆ™è¿”å›å…¶ä¸­ ä»»ä½•ä¸€ä¸ª ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"IDID\"\nè¾“å‡ºï¼š[0,4,1,3,2]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"III\"\nè¾“å‡ºï¼š[0,1,2,3]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"DDI\"\nè¾“å‡ºï¼š[3,2,0,1]\n```\n\n### æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ\n\nè€ƒè™‘ perm\\[0\\] çš„å€¼ï¼Œæ ¹æ®é¢˜æ„ï¼š\n\nå¦‚æœ s\\[0\\]=â€˜Iâ€™ï¼Œé‚£ä¹ˆä»¤ perm\\[0\\]=0ï¼Œåˆ™æ— è®ºperm\\[1\\] ä¸ºä½•å€¼éƒ½æ»¡è¶³perm\\[0\\]perm\\[1\\]ï¼›  \nç¡®å®šå¥½perm\\[0\\] åï¼Œå‰©ä½™çš„ nâˆ’1 ä¸ªå­—ç¬¦å’Œ n ä¸ªå¾…ç¡®å®šçš„æ•°å°±å˜æˆäº†ä¸€ä¸ªå’ŒåŸé—®é¢˜ç›¸åŒï¼Œä½†è§„æ¨¡ä¸º nâˆ’1 çš„é—®é¢˜ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç»§ç»­æŒ‰ç…§ä¸Šè¿°æ–¹æ³•ç¡®å®šperm\\[1\\]ï¼šå¦‚æœ s\\[1\\]=â€˜Iâ€™ï¼Œé‚£ä¹ˆä»¤ perm\\[1\\] ä¸ºå‰©ä½™æ•°å­—ä¸­çš„æœ€å°æ•°ï¼›å¦‚æœ s\\[1\\]=â€˜Dâ€™ï¼Œé‚£ä¹ˆä»¤perm\\[1\\] ä¸ºå‰©ä½™æ•°å­—ä¸­çš„æœ€å¤§æ•°ã€‚å¦‚æ­¤å¾ªç¯ç›´è‡³å‰©ä¸‹ä¸€ä¸ªæ•°ï¼Œå¡«å…¥perm\\[n\\] ä¸­ã€‚\n\nä»£ç å®ç°æ—¶ï¼Œç”±äºæ¯æ¬¡éƒ½é€‰æ‹©çš„æ˜¯æœ€å°æ•°å’Œæœ€å¤§æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªå˜é‡lo å’Œ hi è¡¨ç¤ºå½“å‰å‰©ä½™æ•°å­—ä¸­çš„æœ€å°æ•°å’Œæœ€å¤§æ•°ã€‚\n\nä»£ç ï¼š\n\n```\nclass Solution {\n    public int[] diStringMatch(String s) {\n        int n = s.length(), lo = 0, hi = n;\n        int[] perm = new int[n + 1];\n        for (int i = 0; i < n; ++i) {\n            perm[i] = s.charAt(i) == 'I' ? lo++ : hi--;\n        }\n        perm[n] = lo; // æœ€åå‰©ä¸‹ä¸€ä¸ªæ•°ï¼Œæ­¤æ—¶ lo == hi\n        return perm;\n    }\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)_O_(_n_)ï¼Œå…¶ä¸­ n_n_ æ˜¯å­—ç¬¦ä¸² s_s_ çš„é•¿åº¦ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)_O_(1)ï¼Œè¿”å›å€¼ä¸è®¡å…¥ç©ºé—´å¤æ‚åº¦ã€‚\n","tags":["leetcode"],"categories":["ç®—æ³•"]},{"title":"leetcode-442","url":"/2022/06/02/leetcode-442/","content":"\n### é¢˜ç›®æè¿°\n\nç»™ä½ ä¸€ä¸ª**é•¿åº¦ä¸º n** çš„æ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­ nums çš„æ‰€æœ‰æ•´æ•°éƒ½åœ¨**èŒƒå›´ \\[1, n\\]** å†…ï¼Œä¸”æ¯ä¸ªæ•´æ•°**å‡ºç° ä¸€æ¬¡ æˆ– ä¸¤æ¬¡** ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰å‡ºç° ä¸¤æ¬¡ çš„æ•´æ•°ï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›ã€‚\n\nä½ å¿…é¡»è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(n) ä¸”ä»…ä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚\n\n### æ–¹æ³•ä¸€ï¼šå–å\n\nä»èµ·å§‹ä½ç½®è¿›è¡Œéå†ï¼Œæ¯æ¬¡å°†ä¸‹æ ‡ä¸º nums\\[i\\] - 1nums\\[i\\]âˆ’1çš„æ•°å­—å–åï¼›  \nå½“éå†åˆ° nums\\[i\\]nums\\[i\\]ä¸ºè´Ÿæ•°ï¼Œéœ€è¦å¿½ç•¥å…¶è´Ÿå·ã€‚  \nè‹¥å‘ç°ä¸‹æ ‡ä¸º nums\\[i\\] - 1nums\\[i\\]âˆ’1çš„æ•°å­—å·²ç»æ˜¯è´Ÿæ•°ï¼Œè¯´æ˜ä¹‹å‰å‡ºç°è¿‡åŒæ ·çš„æ•°å­— nums\\[i\\]nums\\[i\\]ï¼Œå³æ‰¾åˆ°äº†é‡å¤æ•°å­—ï¼›\n\nåŠ¨ç”»å›¾è§£å¦‚ä¸‹ï¼š\n\n![442. æ•°ç»„ä¸­é‡å¤çš„æ•°æ®.gif](https://pic.leetcode-cn.com/1651978075-VevYmq-442.%20%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E6%8D%AE.gif)\n\njavaä»£ç å®ç°ï¼š\n\n```\nclass Solution {\n    public List<Integer> findDuplicates(int[] nums) {\n        List<Integer> res = new ArrayList<>();\n        for (int num : nums) {\n            if (nums[Math.abs(num) - 1] < 0) {\n                res.add(Math.abs(num));\n            } else {\n                nums[Math.abs(num) - 1] *= -1;\n            }\n        }\n        return res;\n    }\n}\n```\n\n[åŸæ–‡å‡ºå¤„](https://leetcode-cn.com/problems/find-all-duplicates-in-an-array/solution/by-fuxuemingzhu-dko5/)\n","tags":["leetcode"],"categories":["ç®—æ³•"]},{"title":"lexè¯æ³•åˆ†æå™¨è¯­æ³•+å®éªŒ","url":"/2022/06/02/lexè¯æ³•åˆ†æå™¨è¯­æ³•å®éªŒ/","content":"\n### lexè¯æ³•åˆ†æå™¨\n\nLexæ˜¯LEXical compilerçš„ç¼©å†™ï¼Œæ˜¯Unixç¯å¢ƒä¸‹éå¸¸è‘—åçš„å·¥å…·,ä¸»è¦åŠŸèƒ½æ˜¯ç”Ÿæˆä¸€ä¸ªè¯æ³•åˆ†æå™¨(scanner)çš„Cæºç ,æè¿°è§„åˆ™é‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼(regular expression)ã€‚æè¿°è¯æ³•åˆ†æå™¨çš„æ–‡ä»¶\\*.lï¼Œç»è¿‡lexç¼–è¯‘åï¼Œç”Ÿæˆä¸€ä¸ªlex.yy.c çš„æ–‡ä»¶ï¼Œç„¶åç”±Cç¼–è¯‘å™¨ç¼–è¯‘ç”Ÿæˆä¸€ä¸ªè¯æ³•åˆ†æå™¨ã€‚è¯æ³•åˆ†æå™¨ï¼Œç®€å•æ¥è¯´ï¼Œå…¶ä»»åŠ¡å°±æ˜¯å°†è¾“å…¥çš„å„ç§ç¬¦å·ï¼Œè½¬åŒ–æˆç›¸åº”çš„æ ‡è¯†ç¬¦(token)ï¼Œè½¬åŒ–åçš„æ ‡è¯†ç¬¦ å¾ˆå®¹æ˜“è¢«åç»­é˜¶æ®µå¤„ç†ã€‚ â€”â€” \\[ [ç™¾åº¦ç™¾ç§‘ \\]](https://link.segmentfault.com/?enc=DKF%2BjPXr%2FIrO38QOqzaDew%3D%3D.YXj5UoakqwCBY404TA0%2Fuw3J2B6Khy7T9K5AzuhOw9ouSgDDUZFRI38JcPO%2FDd9m)\n\n### Lexè¯­æ³•æ ¼å¼\n\nflexçš„è¯­æ³•è¢«åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\n```\n{definitions} //å£°æ˜éƒ¨åˆ†\n%%\n{rules} //è½¬æ¢è§„åˆ™\n%%\n{user subroutines}//è¾…åŠ©å‡½æ•°\n```\n\nå£°æ˜éƒ¨åˆ†\n\nå£°æ˜éƒ¨åˆ†é€šå¸¸åŒ…æ‹¬å˜é‡ï¼Œæ˜ç¤ºå¸¸é‡å’Œæ­£åˆ™è¡¨è¾¾å¼çš„å®šä¹‰ï¼Œæ˜ç¤ºå¸¸é‡æ˜¯ä¸€ä¸ªå€¼ä¸ºæ•°å­—çš„æ ‡è¯†ç¬¦ï¼Œç”¨æ¥è¡¨ç¤ºè¯æ³•å•å…ƒçš„ç±»å‹ã€‚\n\nè½¬æ¢è§„åˆ™\n\nè½¬æ¢è§„åˆ™å…·æœ‰å¦‚ä¸‹çš„å½¢å¼: æ¨¡å¼ { åŠ¨ä½œ }ã€‚æ¯ä¸ªæ¨¡å¼æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨å£°æ˜éƒ¨åˆ†ç»™å‡ºçš„æ­£åˆ™å®šä¹‰ã€‚åŠ¨ä½œéƒ¨åˆ†æ˜¯ä»£ç ç‰‡æ®µï¼Œé€šå¸¸ç”¨ C è¯­è¨€ç¼–å†™ã€‚\n\nè¾…åŠ©å‡½æ•°\n\nè¿™ä¸ªéƒ¨åˆ†ä¸­å®šä¹‰äº†å„ä¸ªåŠ¨ä½œæ‰€éœ€è¦çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åŒ…å« main å‡½æ•°ï¼Œè¿™éƒ¨åˆ†çš„ä»£ç å°†ä¼šæ”¾åˆ°è¾“å‡ºçš„ C ä»£ç ä¸­ã€‚\n\n**å®ä¾‹ï¼š**\n\n1. ä¸ºæ–‡æœ¬æ–‡ä»¶æ·»åŠ è¡Œå·\n\nä»£ç ï¼š\n\n```\n %{\n#include <stdio.h>\nint lineno=1;\n%}\n\n%%\n[^\\n]     {yymore();}\n\\n     {printf(\"%1d %s\",lineno++,yytext);}\n%%\n\nint yywrap(void)\n{\n  return 1;\n}\nmain()\n{\n  yylex();\n}\n```\n\nå¾…æµ‹è¯•æ–‡ä»¶ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wps2.jpg)\n\nç»“æœï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wps3.jpg)\n\n2. ç¼–å†™LEXæºç¨‹åºï¼Œå…¶åŠŸèƒ½æ˜¯å°†æ–‡æœ¬ä¸­çš„åè¿›åˆ¶æ•°æ›¿æ¢æˆåå…­è¿›åˆ¶ï¼Œå¹¶æ‰“å°è¢«æ›¿æ¢çš„æ¬¡æ•°\n\n```\n%{\n    #include<stdio.h>\n    #include <stdlib.h>\n    int count=0;\n    int n=0;\n    int i=0;\n    int j =0;\n    char hex[16];\n    char arr[] = \"0123456789ABCDEF\";\n%}\n%%\n\n[0][x][0-9A-F]* {printf(\"\\nCONFIRM IS hexadecimal!!!\");} \n\n[1-9][0-9]* {\n  n = atoi(yytext);\n  while (n)\n    {\n        hex[i++] = arr[n%16];  \n        n = n / 16;\n    }\n    for (j = i - 1; j >= 0; --j)\n        printf(\"%c\", hex[j]);\n    printf(\"\\nNumber of conversion: %d\",++count);\n    for (j = i - 1; j >= 0; --j){\n        hex[j]=\" \";\n        i=0;\n    }\n}\n[0-9]+ {printf(\"\\nerror number!!\");}\n%%\nint yywrap(void)\n{\n  return 1;\n}\nmain()\n{\n  int n=yylex();\n  return n;\n}\n```\n\nå¾…æµ‹è¯•æ–‡ä»¶ï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wps4.jpg)\n\næµ‹è¯•ç»“æœï¼š\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/wps5.jpg)\n","tags":["lex"],"categories":["å…¶ä»–è¯­è¨€"]},{"title":"Linuxå‘½ä»¤","url":"/2022/06/02/linuxå‘½ä»¤/","content":"\n### 1\\. ls â€” List\n\nlsä¼šåˆ—ä¸¾å‡ºå½“å‰å·¥ä½œç›®å½•çš„å†…å®¹ï¼ˆæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼‰ã€‚\n\nlså‘½ä»¤æ¼”ç¤º\n\n![image-20211110165533037](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165533037.png)\n\n### 2.mkdir â€” Make Directory\n\nmkdir ç”¨äºæ–°å»ºä¸€ä¸ªæ–°ç›®å½•\n\næ‰§è¡Œmkdirå‘½ä»¤åˆ›å»ºç›¸åº”çš„æ–‡ä»¶å¤¹\n\n### 3.pwd â€” Print Working Directory\n\næ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•\n\n![image-20211110165732581](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165732581.png)\n\næ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•\n\n### 4.cd â€” Change Directory\n\nåˆ‡æ¢æ–‡ä»¶è·¯å¾„ï¼Œcd å°†ç»™å®šçš„æ–‡ä»¶å¤¹ï¼ˆæˆ–ç›®å½•ï¼‰è®¾ç½®æˆå½“å‰å·¥ä½œç›®å½•ã€‚\n\n![image-20211110165802063](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165802063.png)\n\nåˆ‡æ¢è·¯å¾„åˆ°æ¡Œé¢\n\n### 5.rmdirâ€” Remove Directory\n\nåˆ é™¤ç»™å®šçš„ç›®å½•ã€‚\n\n![image-20211110165820229](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165820443.png)\n\nåˆ›å»ºçš„æ–‡ä»¶å¤¹ä¼šè¢«åˆ é™¤\n\n### 6\\. rmâ€” Remove\n\nrm ä¼šåˆ é™¤ç»™å®šçš„æ–‡ä»¶\n\n![image-20211110165846775](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165846775.png)\n\nåˆ é™¤æŸä¸ªæ–‡ä»¶\n\n### 7\\. cpâ€” Copy\n\ncp å‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶\n\n![image-20211110165910526](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165910526.png)\n\næ–‡ä»¶çš„å¤åˆ¶\n\n### 8\\. mvâ€” Move\n\nmv å‘½ä»¤å¯¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¿›è¡Œç§»åŠ¨ï¼Œå¦‚æœæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å­˜åœ¨äºå½“å‰å·¥ä½œç›®å½•ï¼Œè¿˜å¯ä»¥å¯¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¿›è¡Œé‡å‘½åã€‚\n\n![image-20211110165943030](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110165943030.png)\n\nç§»åŠ¨æ–‡ä»¶\n\n### 9\\. catâ€” concatenate and print files\n\ncat ç”¨äºåœ¨æ ‡å‡†è¾“å‡ºï¼ˆç›‘æ§å™¨æˆ–å±å¹•ï¼‰ä¸ŠæŸ¥çœ‹æ–‡ä»¶å†…å®¹\n\n![image-20211110170004319](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170004319.png)\n\næŸ¥çœ‹æŸä¸ªæ–‡ä»¶å†…å®¹\n\n### 10\\. tail â€” print TAIL(from last)\n\nail é»˜è®¤åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºç»™å®šæ–‡ä»¶çš„æœ€å10è¡Œå†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨tail -n N æŒ‡å®šåœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºæ–‡ä»¶çš„æœ€åNè¡Œå†…å®¹ã€‚\n\n![image-20211110170027384](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170027384.png)\n\næ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n\n### 11.less â€” print LESS\n\nless æŒ‰é¡µæˆ–æŒ‰çª—å£æ‰“å°æ–‡ä»¶å†…å®¹ã€‚åœ¨æŸ¥çœ‹åŒ…å«å¤§é‡æ–‡æœ¬æ•°æ®çš„å¤§æ–‡ä»¶æ—¶æ˜¯éå¸¸æœ‰ç”¨å’Œé«˜æ•ˆçš„ã€‚ä½ å¯ä»¥ä½¿ç”¨Ctrl+Få‘å‰ç¿»é¡µï¼ŒCtrl+Bå‘åç¿»é¡µã€‚\n\n![image-20211110170053313](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170053313.png)\n\næ‰“å°æ–‡ä»¶å†…å®¹\n\n### 12.grep\n\ngrep åœ¨ç»™å®šçš„æ–‡ä»¶ä¸­æœå¯»æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚grep -i â€œâ€ åœ¨æœå¯»æ—¶ä¼šå¿½ç•¥å­—ç¬¦ä¸²çš„å¤§å°å†™ï¼Œè€Œgrep -r â€œâ€ åˆ™ä¼šåœ¨å½“å‰å·¥ä½œç›®å½•çš„æ–‡ä»¶ä¸­é€’å½’æœå¯»æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚\n\n![image-20211110170114877](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170114877.png)\n\næŸ¥æ‰¾ç›¸å…³å†…å®¹\n\n### 13.find\n\nè¿™ä¸ªå‘½ä»¤ä¼šåœ¨ç»™å®šä½ç½®æœå¯»ä¸æ¡ä»¶åŒ¹é…çš„æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨find -name çš„-nameé€‰é¡¹æ¥è¿›è¡ŒåŒºåˆ†å¤§å°å†™çš„æœå¯»ï¼Œfind -iname æ¥è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™çš„æœå¯»ã€‚\n\n![image-20211110170134533](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170134533.png)\n\nä¸‰ç§ä½¿ç”¨ç¤ºä¾‹\n\n### 14.tar\n\ntarå‘½ä»¤èƒ½åˆ›å»ºã€æŸ¥çœ‹å’Œæå–tarå‹ç¼©æ–‡ä»¶ã€‚tar -cvf æ˜¯åˆ›å»ºå¯¹åº”å‹ç¼©æ–‡ä»¶ï¼Œtar -tvf æ¥æŸ¥çœ‹å¯¹åº”å‹ç¼©æ–‡ä»¶ï¼Œtar -xvf æ¥æå–å¯¹åº”å‹ç¼©æ–‡ä»¶ã€‚\n\n![image-20211110170149686](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170149686.png)\n\nåˆ›å»ºå‹ç¼©æ–‡ä»¶\n\n![image-20211110170208173](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170208173.png)\n\næŸ¥çœ‹å‹ç¼©æ–‡ä»¶\n\n### 15\\. gzip\n\ngzip å‘½ä»¤åˆ›å»ºå’Œæå–gzipå‹ç¼©æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ç”¨gzip -d æ¥æå–å‹ç¼©æ–‡ä»¶ã€‚\n\n![image-20211110170224085](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170224085.png)\n\nç”Ÿæˆgzipæ–‡ä»¶\n\n### 16\\. unzip\n\nunzip å¯¹gzipæ–‡æ¡£è¿›è¡Œè§£å‹ã€‚åœ¨è§£å‹ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨unzip -l å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚\n\n![image-20211110170235645](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170235645.png)\n\nè§£å‹ç¼©æ–‡ä»¶\n\n### 17.help\n\nhelpä¼šåœ¨ç»ˆç«¯åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤,å¯ä»¥ä½¿ç”¨ä»»ä½•å‘½ä»¤çš„-hæˆ–-helpé€‰é¡¹æ¥æŸ¥çœ‹è¯¥å‘½ä»¤çš„å…·ä½“ç”¨æ³•ã€‚å›¾å°±çœç•¥å•¦ï¼Œä¼šæœ‰è¯¦ç»†åˆ—è¡¨æ˜¾ç¤ºå‡ºæ¥çš„ã€‚\n\n### 18.whatis â€” What is this command\n\nwhatis ä¼šç”¨å•è¡Œæ¥æè¿°ç»™å®šçš„å‘½ä»¤ï¼Œå°±æ˜¯è§£é‡Šå½“å‰å‘½ä»¤ã€‚\n\n![image-20211110170251248](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170251248.png)\n\ncdçš„æè¿°\n\n### 19.exit\n\nexitç”¨äºç»“æŸå½“å‰çš„ç»ˆç«¯ä¼šè¯ã€‚\n\n![image-20211110170318511](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170318511.png)\n\nç»“æŸå½“å‰ç»ˆç«¯ä¼šè¯\n\n### 20.ping\n\nping é€šè¿‡å‘é€æ•°æ®åŒ…pingè¿œç¨‹ä¸»æœº(æœåŠ¡å™¨)ï¼Œå¸¸ç”¨ä¸æ£€æµ‹ç½‘ç»œè¿æ¥å’ŒæœåŠ¡å™¨çŠ¶æ€ã€‚\n\n![image-20211110170332359](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170332359.png)\n\npingç™¾åº¦æ¼”ç¤º\n\n### 21.who â€” Who Is logged in\n\nwhoèƒ½åˆ—å‡ºå½“å‰ç™»å½•çš„ç”¨æˆ·åã€‚\n\n![image-20211110170347878](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170347878.png)\n\nå½“å‰ç”¨æˆ·åˆ—è¡¨\n\n### 22.su â€” Switch User\n\nsu ç”¨äºåˆ‡æ¢ä¸åŒçš„ç”¨æˆ·ã€‚å³ä½¿æ²¡æœ‰ä½¿ç”¨å¯†ç ï¼Œè¶…çº§ç”¨æˆ·ä¹Ÿèƒ½åˆ‡æ¢åˆ°å…¶å®ƒç”¨æˆ·ã€‚\n\n![image-20211110170416878](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170416878.png)\n\nåˆ‡æ¢å½“å‰ç”¨æˆ·\n\n### 23.uname\n\nunameä¼šæ˜¾ç¤ºå‡ºå…³äºç³»ç»Ÿçš„é‡è¦ä¿¡æ¯ï¼Œå¦‚å†…æ ¸åç§°ã€ä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬ã€å¤„ç†æœºç±»å‹ç­‰ç­‰ï¼Œä½¿ç”¨uname -aå¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä¿¡æ¯ã€‚\n\n![image-20211110170431901](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170431901.png)\n\nç³»ç»Ÿä¿¡æ¯\n\n### 24.df â€” Disk space Free\n\ndfæŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿä¸­ç£ç›˜çš„ä½¿ç”¨æƒ…å†µâ€“ç¡¬ç›˜å·²ç”¨å’Œå¯ç”¨çš„å­˜å‚¨ç©ºé—´ä»¥åŠå…¶å®ƒå­˜å‚¨è®¾å¤‡ã€‚ä½ å¯ä»¥ä½¿ç”¨df -hå°†ç»“æœä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºã€‚\n\n![image-20211110170454512](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170454512.png)\n\nç£ç›˜ä½¿ç”¨æƒ…å†µ\n\n### 25.ps â€” ProcesseS\n\npsæ˜¾ç¤ºç³»ç»Ÿçš„è¿è¡Œè¿›ç¨‹ã€‚\n\n![image-20211110170507036](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170507036.png)\n\nç³»ç»Ÿè¿›ç¨‹\n\n### 26.top â€” Top processes\n\ntopå‘½ä»¤ä¼šé»˜è®¤æŒ‰ç…§CPUçš„å ç”¨æƒ…å†µï¼Œæ˜¾ç¤ºå ç”¨é‡è¾ƒå¤§çš„è¿›ç¨‹,å¯ä»¥ä½¿ç”¨top -u æŸ¥çœ‹æŸä¸ªç”¨æˆ·çš„CPUä½¿ç”¨æ’åæƒ…å†µã€‚\n\n![image-20211110170550416](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211110170550416.png)\n\ncpuå ç”¨æƒ…å†µ\n\n### 27\\. shutdown\n\nshutdownç”¨äºå…³é—­è®¡ç®—æœºï¼Œè€Œshutdown -rç”¨äºé‡å¯è®¡ç®—æœºã€‚è¿™ä¸ªæˆ‘å°±ä¸è¯•äº†â€¦â€¦\n\nå‡ºè‡ªï¼šhttps://www.jianshu.com/p/0056d671ea6d\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"LinuxåŸºç¡€","url":"/2022/06/02/linuxåŸºç¡€/","content":"\n## Linuxç³»ç»Ÿç›®å½•ç»“æ„\n\nç™»å½•ç³»ç»Ÿåï¼Œåœ¨å½“å‰å‘½ä»¤çª—å£ä¸‹è¾“å…¥å‘½ä»¤ï¼š\n\n```\n ls / \n```\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210422192703.png)\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210422192721.jpeg)\n\nä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Šï¼š\n\n- **/bin**ï¼š  \n    bin æ˜¯ Binaries (äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚\n- **/bootï¼š**  \n    è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨ Linux æ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚\n- **/dev ï¼š**  \n    dev æ˜¯ Device(è®¾å¤‡) çš„ç¼©å†™, è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯ Linux çš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨ Linux ä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚\n- **/etcï¼š**  \n    etc æ˜¯ Etcetera(ç­‰ç­‰) çš„ç¼©å†™,è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚\n- **/home**ï¼š  \n    ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨ Linux ä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ aliceã€bob å’Œ eveã€‚\n- **/lib**ï¼š  \n    lib æ˜¯ Library(åº“) çš„ç¼©å†™è¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Windows é‡Œçš„ DLL æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚\n- **/lost+found**ï¼š  \n    è¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚\n- **/media**ï¼š  \n    linux ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼ŒLinux ä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚\n- **/mnt**ï¼š  \n    ç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨ /mnt/ ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚\n- **/opt**ï¼š  \n    opt æ˜¯ optional(å¯é€‰) çš„ç¼©å†™ï¼Œè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚\n- **/proc**ï¼š  \n    proc æ˜¯ Processes(è¿›ç¨‹) çš„ç¼©å†™ï¼Œ/proc æ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚  \n    è¿™ä¸ªç›®å½•çš„å†…å®¹ä¸åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯åœ¨å†…å­˜é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹é‡Œé¢çš„æŸäº›æ–‡ä»¶ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥å±è”½ä¸»æœºçš„pingå‘½ä»¤ï¼Œä½¿åˆ«äººæ— æ³•pingä½ çš„æœºå™¨ï¼š\n\n```\n  echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all\n```\n\n- **/root**ï¼š  \n    è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚\n- **/sbin**ï¼š  \n    s å°±æ˜¯ Super User çš„æ„æ€ï¼Œæ˜¯ Superuser Binaries (è¶…çº§ç”¨æˆ·çš„äºŒè¿›åˆ¶æ–‡ä»¶) çš„ç¼©å†™ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚\n- **/selinux**ï¼š  \n    è¿™ä¸ªç›®å½•æ˜¯ Redhat/CentOS æ‰€ç‰¹æœ‰çš„ç›®å½•ï¼ŒSelinux æ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ï¼Œç±»ä¼¼äº windows çš„é˜²ç«å¢™ï¼Œä½†æ˜¯è¿™å¥—æœºåˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯å­˜æ”¾selinuxç›¸å…³çš„æ–‡ä»¶çš„ã€‚\n- **/srv**ï¼š  \n    è¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚\n- **/sys**ï¼š è¿™æ˜¯ Linux2.6 å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº† 2.6 å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚ sysfs æ–‡ä»¶ç³»ç»Ÿé›†æˆäº†ä¸‹é¢3ç§æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼šé’ˆå¯¹è¿›ç¨‹ä¿¡æ¯çš„ proc æ–‡ä»¶ç³»ç»Ÿã€é’ˆå¯¹è®¾å¤‡çš„ devfs æ–‡ä»¶ç³»ç»Ÿä»¥åŠé’ˆå¯¹ä¼ªç»ˆç«¯çš„ devpts æ–‡ä»¶ç³»ç»Ÿã€‚ è¯¥æ–‡ä»¶ç³»ç»Ÿæ˜¯å†…æ ¸è®¾å¤‡æ ‘çš„ä¸€ä¸ªç›´è§‚åæ˜ ã€‚ å½“ä¸€ä¸ªå†…æ ¸å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•ä¹Ÿåœ¨å†…æ ¸å¯¹è±¡å­ç³»ç»Ÿä¸­è¢«åˆ›å»ºã€‚\n- **/tmp**ï¼š  \n    tmp æ˜¯ temporary(ä¸´æ—¶) çš„ç¼©å†™è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚\n- **/usr**ï¼š  \n    usr æ˜¯ unix shared resources(å…±äº«èµ„æº) çš„ç¼©å†™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äº windows ä¸‹çš„ program files ç›®å½•ã€‚\n- **/usr/binï¼š**  \n    ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚\n- **/usr/sbinï¼š**  \n    è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚\n- **/usr/srcï¼š**  \n    å†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚\n- **/var**ï¼š  \n    var æ˜¯ variable(å˜é‡) çš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚\n- **/run**ï¼š  \n    æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæœ‰ /var/run ç›®å½•ï¼Œåº”è¯¥è®©å®ƒæŒ‡å‘ runã€‚\n\nåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰å‡ ä¸ªç›®å½•æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå¹³æ—¶éœ€è¦æ³¨æ„ä¸è¦è¯¯åˆ é™¤æˆ–è€…éšæ„æ›´æ”¹å†…éƒ¨æ–‡ä»¶ã€‚\n\n**/etc**ï¼š ä¸Šè¾¹ä¹Ÿæåˆ°äº†ï¼Œè¿™ä¸ªæ˜¯ç³»ç»Ÿä¸­çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœä½ æ›´æ”¹äº†è¯¥ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸èƒ½å¯åŠ¨ã€‚\n\n**/bin, /sbin, /usr/bin, /usr/sbin**: è¿™æ˜¯ç³»ç»Ÿé¢„è®¾çš„æ‰§è¡Œæ–‡ä»¶çš„æ”¾ç½®ç›®å½•ï¼Œæ¯”å¦‚ ls å°±æ˜¯åœ¨ /bin/ls ç›®å½•ä¸‹çš„ã€‚\n\nå€¼å¾—æå‡ºçš„æ˜¯ï¼Œ/bin, /usr/bin æ˜¯ç»™ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„æŒ‡ä»¤ï¼ˆé™¤rootå¤–çš„é€šç”¨æˆ·ï¼‰ï¼Œè€Œ/sbin, /usr/sbin åˆ™æ˜¯ç»™ root ä½¿ç”¨çš„æŒ‡ä»¤ã€‚\n\n**/var**ï¼š è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç³»ç»Ÿä¸Šè·‘äº†å¾ˆå¤šç¨‹åºï¼Œé‚£ä¹ˆæ¯ä¸ªç¨‹åºéƒ½ä¼šæœ‰ç›¸åº”çš„æ—¥å¿—äº§ç”Ÿï¼Œè€Œè¿™äº›æ—¥å¿—å°±è¢«è®°å½•åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå…·ä½“åœ¨ /var/log ç›®å½•ä¸‹ï¼Œå¦å¤– mail çš„é¢„è®¾æ”¾ç½®ä¹Ÿæ˜¯åœ¨è¿™é‡Œã€‚\n\n## Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†\n\næˆ‘ä»¬çŸ¥é“Linuxçš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½• /ã€‚\n\nå…¶ä»–ç›®å½•é€šè¿‡æŒ‚è½½å¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°æ ‘ä¸­ï¼Œé€šè¿‡è§£é™¤æŒ‚è½½å¯ä»¥ç§»é™¤å®ƒä»¬ã€‚\n\nåœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“ä»€ä¹ˆæ˜¯ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ã€‚\n\n- **ç»å¯¹è·¯å¾„ï¼š**  \n    è·¯å¾„çš„å†™æ³•ï¼Œç”±æ ¹ç›®å½• **/** å†™èµ·ï¼Œä¾‹å¦‚ï¼š /usr/share/doc è¿™ä¸ªç›®å½•ã€‚\n- **ç›¸å¯¹è·¯å¾„ï¼š**  \n    è·¯å¾„çš„å†™æ³•ï¼Œä¸æ˜¯ç”± **/** å†™èµ·ï¼Œä¾‹å¦‚ç”± /usr/share/doc è¦åˆ° /usr/share/man åº•ä¸‹æ—¶ï¼Œå¯ä»¥å†™æˆï¼š **cd ../man** è¿™å°±æ˜¯ç›¸å¯¹è·¯å¾„çš„å†™æ³•ã€‚\n\n* * *\n\n## å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹å‡ ä¸ªå¸¸è§çš„å¤„ç†ç›®å½•çš„å‘½ä»¤å§ï¼š\n\n- lsï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šlist filesï¼‰: åˆ—å‡ºç›®å½•åŠæ–‡ä»¶å\n- cdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šchange directoryï¼‰ï¼šåˆ‡æ¢ç›®å½•\n- pwdï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šprint work directoryï¼‰ï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•\n- mkdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmake directoryï¼‰ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•\n- rmdirï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremove directoryï¼‰ï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•\n- cpï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šcopy fileï¼‰: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•\n- rmï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šremoveï¼‰: åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•\n- mvï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šmove fileï¼‰: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°\n\nä½ å¯ä»¥ä½¿ç”¨ _man \\[å‘½ä»¤\\]_ æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚\n\næ³¨ï¼šè¯¦ç»†ç”¨æ³•åœ¨[è¿™é‡Œ](https://www.runoob.com/linux/linux-file-content-manage.html)\n","tags":["linux"],"categories":["è¿ç»´"]},{"title":"mysqlåŸºç¡€è¯­å¥","url":"/2022/06/02/mysqlåŸºç¡€è¯­å¥/","content":"\n### mySqlåŸºç¡€è¯­å¥\n\n##### 1ã€ç™»å½• `mysql -uroot -p` å›è½¦åè¾“å…¥ å¯†ç \n\n##### 2ã€æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ `show databases;`\n\n##### 3ã€æ–°å»ºæ•°æ®åº“ `create database <æ•°æ®åº“å>;`\n\n##### 4ã€ä½¿ç”¨æŸä¸ªæ•°æ®åº“ `use <æ•°æ®åº“å>;`\n\n##### 5ã€åˆ é™¤æ•°æ®åº“`drop database <æ•°æ®åº“å>;`\n\n##### 6ã€æŸ¥è¯¢æŸä¸ªæ•°æ®åº“é‡Œæ‰€æœ‰è¡¨`show tables;`\n\n##### 7ã€æ–°å»ºä¸€å¼ è¡¨`CREATE TABLE table_name (column_name column_type);`\n\n##### 8ã€åˆ é™¤ä¸€å¼ è¡¨`DROP TABLE table_name ;`\n\n##### 9ã€æ’å…¥æ•°æ® `INSERT INTO è¡¨çš„åå­—(åˆ—åa,åˆ—åb,åˆ—åc) VALUES(å€¼1,å€¼2,å€¼3);`\n\n##### 10ã€`and`ã€`or`ã€`between`\n\n##### 11ã€`IN`ã€`NOT IN`ï¼Œç”¨äºç­›é€‰â€œåœ¨â€æˆ–â€œä¸åœ¨â€æŸä¸ªèŒƒå›´å†…çš„ç»“æœï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¦æŸ¥è¯¢åœ¨ dpt3 æˆ– dpt4 çš„äºº:\n\n##### 12ã€`LIKE` ç”¨äºå®ç°æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¸¸è§äºæœç´¢åŠŸèƒ½ä¸­ã€‚\n\nå’Œ LIKE è”ç”¨çš„é€šå¸¸è¿˜æœ‰é€šé…ç¬¦ï¼Œä»£è¡¨æœªçŸ¥å­—ç¬¦ã€‚SQLä¸­çš„é€šé…ç¬¦æ˜¯ \\_ å’Œ % ã€‚å…¶ä¸­ \\_ ä»£è¡¨ä¸€ä¸ªæœªæŒ‡å®šå­—ç¬¦ï¼Œ% ä»£è¡¨ä¸å®šä¸ªæœªæŒ‡å®šå­—ç¬¦  \næ¯”å¦‚ï¼Œè¦åªè®°å¾—ç”µè¯å·ç å‰å››ä½æ•°ä¸º1101ï¼Œè€Œåä¸¤ä½å¿˜è®°äº†ï¼Œåˆ™å¯ä»¥ç”¨ä¸¤ä¸ª \\_ é€šé…ç¬¦ä»£æ›¿ï¼š  \nå¦ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚åªè®°åå­—çš„é¦–å­—æ¯ï¼Œåˆä¸çŸ¥é“åå­—é•¿åº¦ï¼Œåˆ™ç”¨ % é€šé…ç¬¦ä»£æ›¿ä¸å®šä¸ªå­—ç¬¦ï¼š\n\n##### 13ã€`ORDER BY` æ’åºä½¿ç”¨ ï¼Œè¿˜ä¼šé…åˆ `ASC`å’Œ`DESC`å³å‡åºå’Œé™åºã€‚æŸ¥è¯¢ç»“æœé»˜è®¤å‡åºæ’åº\n\n##### 14ã€å†…ç½®å‡½æ•°å’Œè®¡ç®—\n\n##### 15ã€å­æŸ¥è¯¢\n\n```\nSELECT of_dpt,COUNT(proj_name) AS count_project FROM project GROUP BY of_dpt\nHAVING of_dpt IN\n(SELECT in_dpt FROM employee WHERE name='Tom');\n```\n\n##### 16ã€ä¿®æ”¹è¡¨åå­—\n\n```\nRENAME TABLE åŸå TO æ–°åå­—;\n\nALTER TABLE åŸå RENAME æ–°å;\n\nALTER TABLE åŸå RENAME TO æ–°å;\n```\n\n##### 17ã€å¯¹åˆ—çš„ä¿®æ”¹\n\n###### 17.1ã€å¢åŠ ä¸€åˆ—\n\n```\nALTER TABLE è¡¨åå­— ADD COLUMN åˆ—åå­— æ•°æ®ç±»å‹ çº¦æŸ;\næˆ–ï¼š\nALTER TABLE è¡¨åå­— ADD åˆ—åå­— æ•°æ®ç±»å‹ çº¦æŸ;\n\nALTER TABLE employee ADD height INT(4) DEFAULT 170;\n```\n\næ–°å¢åˆ—é»˜è®¤æ”¾åœ¨æœ€å³è¾¹ï¼Œå¦‚æœè¦æŠŠå¢åŠ çš„åˆ—æ’å…¥åœ¨æŒ‡å®šä½ç½®ï¼Œåˆ™éœ€è¦åœ¨è¯­å¥çš„æœ€åä½¿ç”¨`AFTER`å…³é”®è¯(â€œAFTER åˆ—1â€ è¡¨ç¤ºæ–°å¢çš„åˆ—è¢«æ”¾ç½®åœ¨ â€œåˆ—1â€ çš„åé¢)ã€‚\n\n```\nALTER TABLE employee ADD weight INT(4) DEFAULT 120 AFTER age;\n```\n\nå¦‚æœæƒ³æ”¾åœ¨ç¬¬ä¸€åˆ—çš„ä½ç½®ï¼Œåˆ™ä½¿ç”¨`FIRST`å…³é”®è¯ï¼Œå¦‚è¯­å¥ï¼š\n\n```\nALTER TABLE employee ADD test INT(10) DEFAULT 11 FIRST;\n```\n\n##### 17.2 åˆ é™¤ä¸€åˆ—\n\n```\nALTER TABLE è¡¨åå­— DROP COLUMN åˆ—åå­—;\n\næˆ–ï¼š ALTER TABLE è¡¨åå­— DROP åˆ—åå­—;\n```\n\n##### 17.3 é‡å‘½åä¸€åˆ—\n\n```\nALTER TABLE è¡¨åå­— CHANGE åŸåˆ—å æ–°åˆ—å æ•°æ®ç±»å‹ çº¦æŸ;\nALTER TABLE employee CHANGE height shengao INT(4) DEFAULT 170;\n```\n\n#### 18ã€ å¯¹è¡¨çš„å†…å®¹è¿›è¡Œä¿®æ”¹\n\n##### 18.1ã€ä¿®æ”¹è¡¨ä¸­æŸä¸ªå€¼æˆ–æŸåˆ—æŸä¸ªå­—æ®µå€¼\n\n```\nUPDATE è¡¨åå­— SET åˆ—1=å€¼1,åˆ—2=å€¼2 WHERE æ¡ä»¶;\n```\n\næ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æŠŠ Tom çš„ age æ”¹ä¸º 21ï¼Œsalary æ”¹ä¸º 3000ï¼š\n\n```\nUPDATE employee SET age=21,salary=3000 WHERE name='Tom';\n```\n\n##### 18.2ã€åˆ é™¤ä¸€è¡Œè®°å½•\n\n```\nDELETE FROM è¡¨åå­— WHERE æ¡ä»¶;\n```\n","tags":["mysql"],"categories":["æ•°æ®åº“"]},{"title":"officeæ¿€æ´»","url":"/2022/06/02/officeæ¿€æ´»/","content":"\n1.æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£\n\n2.å¤åˆ¶ä¸‹é¢çš„æ–‡æœ¬ï¼Œç²˜è´´ã€‚\n\n```\n@echooff\n(cd /d \"%~dp0\")&&(NET FILE||(powershell start-process -FilePath '%0' -verb runas)&&(exit /B)) >NUL 2>&1\ntitle Office 2019 Activator r/Piracy\necho Converting... & mode 40,25\n(if exist \"%ProgramFiles%\\Microsoft Office\\Office16\\ospp.vbs\" cd /d \"%ProgramFiles%\\Microsoft Office\\Office16\")&(if exist \"%ProgramFiles(x86)%\\Microsoft Office\\Office16\\ospp.vbs\" cd /d \"%ProgramFiles(x86)%\\Microsoft Office\\Office16\")&(for /f %%x in ('dir /b ..\\root\\Licenses16\\ProPlus2019VL*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul)&(for /f %%x in ('dir /b ..\\root\\Licenses16\\ProPlus2019VL*.xrm-ms') do cscript ospp.vbs /inslic:\"..\\root\\Licenses16\\%%x\" >nul)\ncscript //nologo ospp.vbs /unpkey:6MWKP >nul&cscript //nologo ospp.vbs /inpkey:NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP >nul&set i=1\n:server\nif %i%==1 set KMS_Sev=kms7.MSGuides.com\nif %i%==2 set KMS_Sev=kms8.MSGuides.com\nif %i%==3 set KMS_Sev=kms9.MSGuides.com\ncscript //nologo ospp.vbs /sethst:%KMS_Sev% >nul\necho %KMS_Sev% & echo Activating...\ncscript //nologo ospp.vbs /act | find /i \"successful\" && (echo Complete) || (echo Trying another KMS Server & set /a i+=1 & goto server)\npause >nul\nexit\n```\n\n3.å°†æ–‡ä»¶åç¼€æ”¹ä¸º.bat\n\n4.ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œç­‰å¾…æ•°åˆ†é’Ÿå¦‚æœæç¤ºsuccessï¼Œè¡¨ç¤ºæˆåŠŸ\n","tags":["office"],"categories":["å·¥å…·"]},{"title":"äºŒå‰æ ‘éå†","url":"/2022/06/02/äºŒå‰æ ‘éå†/","content":"\n**äºŒå‰æ ‘æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œå¾ˆå¤šå…¶å®ƒæ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºäºŒå‰æ ‘çš„åŸºç¡€æ¼”å˜è€Œæ¥çš„ã€‚å¯¹äºäºŒå‰æ ‘ï¼Œæœ‰æ·±åº¦éå†å’Œå¹¿åº¦éå†ï¼Œæ·±åº¦éå†æœ‰å‰åºã€ä¸­åºä»¥åŠååºä¸‰ç§éå†æ–¹æ³•ï¼Œå¹¿åº¦éå†å³æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„å±‚æ¬¡éå†ã€‚å› ä¸ºæ ‘çš„å®šä¹‰æœ¬èº«å°±æ˜¯é€’å½’å®šä¹‰ï¼Œå› æ­¤é‡‡ç”¨é€’å½’çš„æ–¹æ³•å»å®ç°æ ‘çš„ä¸‰ç§éå†ä¸ä»…å®¹æ˜“ç†è§£è€Œä¸”ä»£ç å¾ˆç®€æ´ï¼Œè€Œå¯¹äºå¹¿åº¦éå†æ¥è¯´ï¼Œéœ€è¦å…¶ä»–æ•°æ®ç»“æ„çš„æ”¯æ’‘ï¼Œæ¯”å¦‚å †äº†ã€‚æ‰€ä»¥ï¼Œå¯¹äºä¸€æ®µä»£ç æ¥è¯´ï¼Œå¯è¯»æ€§æœ‰æ—¶å€™è¦æ¯”ä»£ç æœ¬èº«çš„æ•ˆç‡è¦é‡è¦çš„å¤šã€‚**\n\nå››ç§ä¸»è¦çš„éå†æ€æƒ³ä¸ºï¼š\n\nå‰åºéå†ï¼šæ ¹ç»“ç‚¹ ---> å·¦å­æ ‘ ---> å³å­æ ‘\n\nä¸­åºéå†ï¼šå·¦å­æ ‘---> æ ¹ç»“ç‚¹ ---> å³å­æ ‘\n\nååºéå†ï¼šå·¦å­æ ‘ ---> å³å­æ ‘ ---> æ ¹ç»“ç‚¹\n\nå±‚æ¬¡éå†ï¼šåªéœ€æŒ‰å±‚æ¬¡éå†å³å¯\n\nä¾‹å¦‚ï¼Œæ±‚ä¸‹é¢äºŒå‰æ ‘çš„å„ç§éå†\n\n![20150204101904649](https://presenter.oss-cn-shanghai.aliyuncs.com/20150204101904649.png)\n\n- å‰åºéå†ï¼š1 2 4 5 7 8 3 6\n- ä¸­åºéå†ï¼š4 2 7 5 8 1 3 6\n- ååºéå†ï¼š4 7 8 5 2 6 3 1\n- å±‚æ¬¡éå†ï¼š1 2 3 4 5 6 7 8\n\n```\n//å‰åºéå†\npublic void preOrderTraverse1(TreeNode root) {\n        if (root != null) {\n            System.out.print(root.val+\"  \");\n            preOrderTraverse1(root.left);\n            preOrderTraverse1(root.right);\n        }\n    }\n```\n\n```\n//ä¸­åºéå†\npublic void inOrderTraverse1(TreeNode root) {\n        if (root != null) {\n            inOrderTraverse1(root.left);\n            System.out.print(root.val+\"  \");\n            inOrderTraverse1(root.right);\n        }\n    }\n```\n\n```\n//ååºéå†\npublic void postOrderTraverse1(TreeNode root) {\n        if (root != null) {\n            postOrderTraverse1(root.left);\n            postOrderTraverse1(root.right);\n            System.out.print(root.val+\"  \");\n        }\n    }\n```\n","tags":["æ•°æ®ç»“æ„"],"categories":["æ•°æ®ç»“æ„"]},{"title":"åˆ›å»º Docker å®¹å™¨åä¿®æ”¹æŒ‚è½½ç›®å½•çš„æ–¹æ³•","url":"/2022/06/02/åˆ›å»º-docker-å®¹å™¨åä¿®æ”¹æŒ‚è½½ç›®å½•çš„æ–¹æ³•/","content":"\n**1ã€ä¸»è¦æ–¹æ³•**\n\nä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\nï¼ˆ1ï¼‰é‡å¯å®¹å™¨ï¼Œé‡æ–°æŒ‚è½½ï¼›\n\nï¼ˆ2ï¼‰åŸå§‹å®¹å™¨ï¼Œä¿®æ”¹é…ç½®ã€‚\n\n**2ã€æ–¹æ³•ä¸€ï¼šé‡å¯å®¹å™¨ï¼Œé‡æ–°æŒ‚è½½**\n\nè¿™ä¸ªæ–¹æ³•æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯ docker commit new\\_imageï¼Œç„¶å docker run new\\_container å°±å¥½äº†ã€‚\n\n**3ã€æ–¹æ³•äºŒï¼šåŸå§‹å®¹å™¨ï¼Œä¿®æ”¹é…ç½®**\n\nè¿™ä¸ªæ–¹æ³•ä»”ç»†ä»‹ç»ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘è§‰å¾—æ¯”è¾ƒæ–¹ä¾¿ã€‚\n\né¦–å…ˆçœ‹ä¸€çœ‹ä½ å®¹å™¨ç°åœ¨çš„æŒ‚è½½è·¯å¾„\n\n```\ndocker inspect -f \"{{.Mounts}}\" container_name\n```\n\nç„¶åç”¨ docker ps -a çœ‹çœ‹ä½ çš„å®¹å™¨ ID\n\n```\ndocker ps -a\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘çš„å®¹å™¨çš„ ID ä¸º 2f18dce34e92ã€‚\n\nç„¶åæˆ‘ä»¬å¼€å§‹æ“ä½œä¸€æ³¢ã€‚\n\næŠŠ docker æœåŠ¡åœæ­¢äº†ï¼š\n\n```\nsystemctl stop docker.service\n```\n\nåœ¨ /var/lib/docker/containers/container-ID/config.v2.json ä¸­æ‰¾åˆ° MountPointsï¼Œå¹¶ä¿®æ”¹æŒ‚è½½è·¯å¾„\n\n```\nvim /var/lib/docker/containers/container-ID/config.v2.json\n\"MountPoints\":{\"/home\":{\"Source\":\"/path/to/your/host\",\"Destination\":\"/home\",\"RW\":true,\"Name\":\"\",\"Driver\":\"\",\"Type\":\"bind\",\"Propagation\":\"rprivate\",\"Spec\":{\"Type\":\"bind\",\"Source\":\"/path/to/your/host\",\"Target\":\"/home\"}}}\n```\n\né‡å¯ docker æœåŠ¡\n\n```\nsystemctl start docker.service\n```\n\né‡å¯ docker å®¹å™¨\n\n```\ndocker start <container-name/ID>\ndocker attach <container-name/ID>\n```\n","tags":["docker"],"categories":["è¿ç»´"]},{"title":"åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ç±»å‹","url":"/2022/06/02/åŸºæœ¬ç±»å‹å’Œå¯¹è±¡ç±»å‹/","content":"\n### **Javaä¸­æ•°æ®ç±»å‹åˆ†ä¸¤ç§**\n\n> 1.åŸºæœ¬ç±»å‹ï¼šlong,int,byte,float,double  \n> 2.å¯¹è±¡ç±»å‹ï¼šLong,Integer,Byte,Float,Doubleå…¶å®ƒä¸€åˆ‡javaæä¾›çš„ï¼Œæˆ–è€…ä½ è‡ªå·±åˆ›å»ºçš„ç±»ã€‚\n> \n> å…¶ä¸­Longå« longçš„åŒ…è£…ç±»ã€‚Integerã€Byteå’ŒFloatä¹Ÿç±»ä¼¼ï¼Œä¸€èˆ¬åŒ…è£…ç±»çš„åå­—é¦–å†™æ˜¯æ•°å€¼åçš„å¤§å†™å¼€å¤´ã€‚\n\n**ä»€ä¹ˆæ˜¯åŒ…è£…ç±»ï¼Ÿ**\n\nåœ¨javaä¸­æœ‰æ—¶å€™çš„è¿ç®—å¿…é¡»æ˜¯ä¸¤ä¸ªç±»å¯¹è±¡ä¹‹é—´è¿›è¡Œçš„ï¼Œä¸å……è®¸å¯¹è±¡ä¸æ•°å­—ä¹‹é—´è¿›è¡Œè¿ç®—ã€‚æ‰€ä»¥éœ€è¦æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æŠŠæ•°å­—è¿›è¡Œäº†ä¸€ä¸‹åŒ…è£…ï¼Œè¿™æ ·è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥å’Œå¦ä¸€ä¸ªå¯¹è±¡è¿›è¡Œè¿ç®—äº†ã€‚\n\næ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»ï¼š\n\n```\npublic class Long {  \n    int i=0;  \n    public Long (int i){  \n        this.i=i;  \n    }  \n}  \n```\n\nè¿™ä¸ªLong å°±æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå®ƒåŒ…è£…äº†ä¸€ä¸ªæ•´æ•°å€¼ï¼Œç„¶åå¯ä»¥åœ¨é‡Œé¢å†™ä¸€äº›è¿ç®—ç¬¦é‡è½½çš„æ–¹æ³•ä½¿å®ƒæ”¯æŒæŸäº›è¿ç®—ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥èµ‹å€¼ï¼š  \nLong l = new Long(10);  \nç°åœ¨å˜é‡ l å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯ä¸€ä¸ªæ•°å­—ã€‚\n\nlongæ˜¯åŸå§‹æ•°æ®ç±»å‹,æ²¡æœ‰å±æ€§æ–¹æ³•,åªèƒ½è¿›è¡Œæ•°å­¦è¿ç®—ï¼ŒLongæ˜¯longç›¸å¯¹åº”çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå®ƒæœ‰æ–¹æ³•å’Œå±æ€§ï¼Œä¸€ä¸ªæ²¡æ–¹æ³•å±æ€§ï¼Œä¸€ä¸ªæœ‰æ–¹æ³•å±æ€§,è¿™å°±æ˜¯å®ƒä»¬çš„åŒºåˆ«ã€‚\n\nçœ‹ä¸‹é¢çš„å°ç¨‹åºï¼š\n\n```\nlong l = 1;  \nLong l1 = new Long(1);   \nLong l2 = new Long(1);   \n\nif (l == l1){   \n    System.out.println(\"=====lä¸l1ç›¸ç­‰=====\");  \n }   \n\nif(l == l2){   \n    System.out.println(\"=====lä¸l2ç›¸ç­‰=====\");  \n}  \n\nif(l1 == l2){  \n    System.out.println(\"=====l1ä¸l2ç›¸ç­‰=====\");  \n }     \n```\n\nè¾“å‡ºï¼š\n\n```\n=====lä¸l1ç›¸ç­‰=====  \n=====lä¸l2ç›¸ç­‰===== \n```\n\nå¦‚æœå°†ç¬¬ä¸‰ä¸ªifè¯­å¥çš„æ¡ä»¶æ¢æˆ\"l1.equals(l2)\"ï¼Œé‚£ä¹ˆè¾“å‡ºç»“æœå°±ä¼šå˜æˆï¼š\n\n```\n=====lä¸l1ç›¸ç­‰=====  \n=====lä¸l2ç›¸ç­‰=====  \n=====l1ä¸l2ç›¸ç­‰=====  \n```\n\nç”±æ­¤ä¹Ÿèƒ½çœ‹å‡ºï¼ŒLongå®šä¹‰çš„å˜é‡ä¸ºä¸€ä¸ªLongç±»å‹çš„å¯¹è±¡ï¼›è€Œlongå®šä¹‰çš„å˜é‡ä¸ºä¸€ä¸ªé•¿æ•´å½¢æ•°å€¼çš„æ•°å€¼å˜é‡ã€‚\n\n**IDç”¨longè¿˜æ˜¯Longï¼Ÿ**\n\nhibernateã€elè¡¨è¾¾å¼ç­‰éƒ½æ˜¯åŒ…è£…ç±»å‹ï¼Œç”¨Longç±»å‹å¯ä»¥å‡å°‘è£…ç®±/æ‹†ç®±ï¼›\n\nåœ¨hibernateä¸­çš„è‡ªå¢çš„hidåœ¨å®ä½“ä¸­çš„ç±»å‹è¦ç”¨Long æ¥å®šä¹‰è€Œä¸æ˜¯longã€‚å¦åˆ™åœ¨DWRçš„åŒ¹é…è¿‡ç¨‹ä¸­ä¼šå‡ºç°Marshallingerror:nullçš„é”™è¯¯æç¤ºã€‚\n\nåˆ°åº•æ˜¯é€‰æ‹©Long è¿˜æ˜¯longè¿™ä¸ªè¿˜å¾—çœ‹å…·ä½“ç¯å¢ƒï¼Œå¦‚æœä½ è®¤ä¸ºè¿™ä¸ªå±æ€§ä¸èƒ½ä¸ºnull,é‚£ä¹ˆå°±ç”¨longï¼Œå› ä¸ºå®ƒé»˜è®¤åˆå€¼ä¸º0ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnullï¼Œé‚£ä¹ˆå°±åº”è¯¥é€‰æ‹©Longã€‚\n\n**æ³¨æ„äº‹é¡¹**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20180521104209734.png)\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"å®å¡”é¢æ¿+wordpressæ­å»ºåšå®¢","url":"/2022/06/02/å®å¡”é¢æ¿+wordpressæ­å»ºåšå®¢/","content":"\nåœ¨è¿™ä¹‹å‰é»˜è®¤å·²ç»è£…å¥½äº†å®å¡”é¢æ¿ã€‚\n\n# **5.2 å®‰è£… WordPress**\n\nåœ¨ä¸»é¢æ¿ï¼Œè½¯ä»¶ä¸­é€‰æ‹© â€œä¸€é”®éƒ¨ç½²æºç â€ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±åœ¨è½¯ä»¶å•†åº—è¿›è¡Œä¸‹è½½\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506151731695.png)](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506151731695.png)\n\nå¦‚æœä¸»é¢æ¿æ²¡æœ‰ï¼Œå‹¾ä¸Šé¢æ¿æ˜¾ç¤º\n\nä¸€é”®éƒ¨ç½² WordPressã€‚\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-126ddbc167827fa2c4c149cef9a6b8de_720w.jpg)](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-126ddbc167827fa2c4c149cef9a6b8de_720w.jpg)\n\nåœ¨åŸŸåè¾“å…¥æ¡†ä¸­å¡«å†™è‡ªå·±çš„åŸŸåï¼Œå…¶ä»–é»˜è®¤ï¼Œç‚¹å‡» â€œæäº¤â€ã€‚ï¼ˆåŸŸåæˆ‘å¡«çš„æœ¬åœ°å±€åŸŸç½‘ipï¼‰\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506151934690.png)](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506151934690.png)\n\næäº¤ä¹‹åå¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªipåœ°å€å°±å¯ä»¥\n\nå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯\n\n**centos 6 7 æ£€æµ‹é…ç½®æ–‡ä»¶ /usr/local/nginx/sbin/nginx -t  \nå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š**  \n**/usr/local/nginx/sbin/nginx: error while loading shared libraries: libluajit-5.1.so.2: cannot open shared object file: No such file or directory**  \nè§£å†³æ–¹æ¡ˆï¼š\n\n<table><tbody><tr><td>1</td><td>yum -y install lua*</td></tr></tbody></table>\n\nÂ å¤åˆ¶Â å¤åˆ¶\n\næ¥ä¸‹æ¥è®¿é—®-ã€‹ç‚¹å‡»ç°åœ¨å¼€å§‹\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506152135208.png)](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220506152135208.png)\n\nå¡«å†™ä¸Šé¢è®°å½•ä¸‹çš„æ•°æ®åº“ä¿¡æ¯ï¼Œæäº¤ã€‚ï¼ˆè¿™é‡Œæ˜¯ä¹‹å‰å¾—åˆ°çš„è´¦å·å¯†ç ï¼‰\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-a61f146678390151326ef1bae08d0a64_720w.jpg)](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-a61f146678390151326ef1bae08d0a64_720w.jpg)\n\nå¡«å†™ç½‘ç«™ä¿¡æ¯ï¼Œå®‰è£…WordPressã€‚\n\n[![](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-6604cd5e86c0b03e9e6e48b91205a5f2_r.jpg)](https://presenter.oss-cn-shanghai.aliyuncs.com/v2-6604cd5e86c0b03e9e6e48b91205a5f2_r.jpg)\n\nå®‰è£…å®Œæˆåï¼Œç™»é™†ç½‘ç«™åå°ï¼Œå¼€å§‹åˆ›ä½œä¹‹æ—…ï¼è®¿é—®åŸŸåï¼Œå³å¯è¿›å…¥è‡ªå·±çš„ç½‘ç«™ã€‚\n\nç°åœ¨å°±å®Œæˆäº†ã€‚ï¼ˆåé¢å¯ä»¥å‘å¸ƒæ–‡ç« ï¼Œä¿®æ”¹ä¸»é¢˜ï¼Œä¸‹è½½æ’ä»¶ï¼‰\n","tags":["wordpress"],"categories":["è¿ç»´"]},{"title":"å¼€å‘è€…å¿…å¤‡Mysqlå‘½ä»¤","url":"/2022/06/02/å¼€å‘è€…å¿…å¤‡mysqlå‘½ä»¤/","content":"\n### å¼€å‘è€…å¿…å¤‡Mtsqlå‘½ä»¤\n\n> å¼€å‘è€…å¿…å¤‡Mysqlå¸¸ç”¨å‘½ä»¤ï¼Œæ¶µç›–äº†æ•°æ®å®šä¹‰è¯­å¥ã€æ•°æ®æ“çºµè¯­å¥åŠæ•°æ®æ§åˆ¶è¯­å¥ï¼ŒåŸºäºMysql5.7ã€‚\n\n## æ•°æ®å®šä¹‰è¯­å¥(DDL)\n\n### æ•°æ®åº“æ“ä½œ\n\n- ç™»å½•æ•°æ®åº“ï¼š\n\n```\nmysql -uroot -proot\n```\n\n- åˆ›å»ºæ•°æ®åº“ï¼š\n\n```\ncreate database test\n```\n\n- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š\n\n```\nshow databases\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_41.png)\n\n- é€‰æ‹©æ•°æ®åº“å¹¶ä½¿ç”¨ï¼š\n\n```\nuse test\n```\n\n- æŸ¥çœ‹æ‰€æœ‰æ•°æ®è¡¨ï¼š\n\n```\nshow tables\n```\n\n- åˆ é™¤æ•°æ®åº“ï¼š\n\n```\ndrop database test\n```\n\n### è¡¨æ“ä½œ\n\n- åˆ›å»ºè¡¨ï¼š\n\n```\ncreate table emp(ename varchar(10),hiredate date,sal decimal(10,2),deptno int(2))  \n```\n\n```\ncreate table dept(deptno int(2),deptname varchar(10))\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_42.png)\n\n- æŸ¥çœ‹è¡¨çš„å®šä¹‰ï¼š\n\n```\ndesc emp\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_43.png)\n\n- æŸ¥çœ‹è¡¨å®šä¹‰ï¼ˆè¯¦ç»†ï¼‰ï¼š\n\n```\nshow create table emp \\G\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_44.png)\n\n- åˆ é™¤è¡¨ï¼š\n\n```\ndrop table emp\n```\n\n- ä¿®æ”¹è¡¨å­—æ®µï¼š\n\n```\nalter table emp modify ename varchar(20)\n```\n\n- æ·»åŠ è¡¨å­—æ®µï¼š\n\n```\nalter table emp add column age int(3)\n```\n\n- åˆ é™¤è¡¨å­—æ®µï¼š\n\n```\nalter table emp drop column age\n```\n\n- å­—æ®µæ”¹åï¼›\n\n```\nalter table emp change age age1 int(4)\n```\n\n- ä¿®æ”¹è¡¨åï¼š\n\n```\nalter table emp rename emp1\n```\n\n## æ•°æ®æ“çºµè¯­å¥(DML)\n\n### æ’å…¥è®°å½•\n\n- æŒ‡å®šåç§°æ’å…¥ï¼š\n\n```\ninsert into emp (ename,hiredate,sal,deptno) values ('zhangsan','2018-01-01','2000',1)\n```\n\n- ä¸æŒ‡å®šåç§°æ’å…¥ï¼š\n\n```\ninsert into emp values ('lisi','2018-01-01','2000',1)\n```\n\n- æ‰¹é‡æ’å…¥æ•°æ®ï¼š\n\n```\ninsert into dept values(1,'dept1'),(2,'dept2')\n```\n\n### ä¿®æ”¹è®°å½•\n\n```\nupdate emp set sal='4000',deptno=2 where ename='zhangsan'\n```\n\n### åˆ é™¤è®°å½•\n\n```\ndelete from emp where ename='zhangsan'\n```\n\n### æŸ¥è¯¢è®°å½•\n\n- æŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼š\n\n```\nselect * from emp\n```\n\n- æŸ¥è¯¢ä¸é‡å¤çš„è®°å½•ï¼š\n\n```\nselect distinct deptno from emp\n```\n\n- æ¡ä»¶æŸ¥è¯¢ï¼š\n\n```\nselect * from emp where deptno=1 and sal<3000\n```\n\n- æ’åºå’Œé™åˆ¶ï¼š\n\n```\nselect * from emp order by deptno desc limit 2\n```\n\n- åˆ†é¡µæŸ¥è¯¢(æŸ¥è¯¢ä»ç¬¬0æ¡è®°å½•å¼€å§‹10æ¡)ï¼š\n\n```\nselect * from emp order by deptno desc limit 0,10\n```\n\n- èšåˆ(æŸ¥è¯¢éƒ¨é—¨äººæ•°å¤§äº1çš„éƒ¨é—¨ç¼–å·)ï¼š\n\n```\nselect deptno,count(1) from emp group by deptno having count(1) > 1\n```\n\n- è¿æ¥æŸ¥è¯¢ï¼š\n\n```\nselect * from emp e left join dept d on e.deptno=d.deptno\n```\n\n- å­æŸ¥è¯¢ï¼š\n\n```\nselect * from emp where deptno in (select deptno from dept)\n```\n\n- è®°å½•è”åˆï¼š\n\n```\nselect deptno from emp union select deptno from dept\n```\n\n## æ•°æ®æ§åˆ¶è¯­å¥(DCL)\n\n### æƒé™ç›¸å…³\n\n- æˆäºˆæ“ä½œæƒé™(å°†testæ•°æ®åº“ä¸­æ‰€æœ‰è¡¨çš„selectå’Œinsertæƒé™æˆäºˆtestç”¨æˆ·)ï¼š\n\n```\ngrant select,insert on test.* to 'test'@'localhost' identified by '123'\n```\n\n- æŸ¥çœ‹è´¦å·æƒé™ï¼š\n\n```\nshow grants for 'test'@'localhost'\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_45.png)\n\n- æ”¶å›æ“ä½œæƒé™ï¼š\n\n```\nrevoke insert on test.* from 'test'@'localhost'\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_46.png)\n\n- æˆäºˆæ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰æƒé™ï¼š\n\n```\ngrant all privileges on *.* to 'test'@'localhost'\n```\n\n- æˆäºˆæ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰æƒé™(åŒ…æ‹¬grant)ï¼š\n\n```\ngrant all privileges on *.* to 'test'@'localhost' with grant option\n```\n\n- æˆäºˆSUPER PROCESS FILEæƒé™ï¼ˆç³»ç»Ÿæƒé™ä¸èƒ½æŒ‡å®šæ•°æ®åº“ï¼‰ï¼š\n\n```\ngrant super,process,file on *.* to 'test'@'localhost'\n```\n\n- åªæˆäºˆç™»å½•æƒé™ï¼š\n\n```\ngrant usage on *.* to 'test'@'localhost'\n```\n\n### å¸å·ç›¸å…³\n\n- åˆ é™¤è´¦å·ï¼š\n\n```\ndrop user 'test'@'localhost'\n```\n\n- ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼š\n\n```\nset password = password('123')\n```\n\n- ç®¡ç†å‘˜ä¿®æ”¹ä»–äººå¯†ç ï¼š\n\n```\nset password for 'test'@'localhost' = password('123')\n```\n\n## å…¶ä»–\n\n### å­—ç¬¦é›†ç›¸å…³\n\n- æŸ¥çœ‹å­—ç¬¦é›†ï¼š\n\n```\nshow variables like 'character%'\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_47.png)\n\n- åˆ›å»ºæ•°æ®åº“æ—¶æŒ‡å®šå­—ç¬¦é›†ï¼š\n\n```\ncreate database test2 character set utf8\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_48.png)\n\n### æ—¶åŒºç›¸å…³\n\n- æŸ¥çœ‹å½“å‰æ—¶åŒºï¼ˆUTCä¸ºä¸–ç•Œç»Ÿä¸€æ—¶é—´ï¼Œä¸­å›½ä¸ºUTC+8ï¼‰ï¼š\n\n```\nshow variables like \"%time_zone%\"\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_49.png)\n\n- ä¿®æ”¹mysqlå…¨å±€æ—¶åŒºä¸ºåŒ—äº¬æ—¶é—´ï¼Œå³æˆ‘ä»¬æ‰€åœ¨çš„ä¸œ8åŒºï¼š\n\n```\nset global time_zone = '+8:00';\n```\n\n- ä¿®æ”¹å½“å‰ä¼šè¯æ—¶åŒºï¼š\n\n```\nset time_zone = '+8:00'\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/refer_screen_50.png)\n\n- ç«‹å³ç”Ÿæ•ˆï¼š\n\n```\nflush privileges\n```\n","tags":["mysql"],"categories":["æ•°æ®åº“"]},{"title":"æ‹“æ‰‘æ’åº","url":"/2022/06/02/æ‹“æ‰‘æ’åº/","content":"\n### ä¸€ã€ä»€ä¹ˆæ˜¯[æ‹“æ‰‘æ’åº](https://so.csdn.net/so/search?q=æ‹“æ‰‘æ’åº&spm=1001.2101.3001.7020)\n\nåœ¨å›¾è®ºä¸­ï¼Œæ‹“æ‰‘æ’åºï¼ˆTopological Sortingï¼‰æ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAG, Directed Acyclic Graphï¼‰çš„æ‰€æœ‰é¡¶ç‚¹çš„çº¿æ€§åºåˆ—ã€‚ä¸”è¯¥åºåˆ—å¿…é¡»æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š\n\næ¯ä¸ªé¡¶ç‚¹å‡ºç°ä¸”åªå‡ºç°ä¸€æ¬¡ã€‚  \nè‹¥å­˜åœ¨ä¸€æ¡ä»é¡¶ç‚¹ A åˆ°é¡¶ç‚¹ B çš„è·¯å¾„ï¼Œé‚£ä¹ˆåœ¨åºåˆ—ä¸­é¡¶ç‚¹ A å‡ºç°åœ¨é¡¶ç‚¹ B çš„å‰é¢ã€‚  \næœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰æ‰æœ‰æ‹“æ‰‘æ’åºï¼ŒéDAGå›¾æ²¡æœ‰æ‹“æ‰‘æ’åºä¸€è¯´ã€‚\n\nä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªå›¾ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220510081352708.png)\n\nå®ƒæ˜¯ä¸€ä¸ª DAG å›¾ï¼Œé‚£ä¹ˆå¦‚ä½•å†™å‡ºå®ƒçš„æ‹“æ‰‘æ’åºå‘¢ï¼Ÿè¿™é‡Œè¯´ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼š\n\nä» DAG å›¾ä¸­é€‰æ‹©ä¸€ä¸ª **æ²¡æœ‰å‰é©±ï¼ˆå³å…¥åº¦ä¸º0ï¼‰**çš„é¡¶ç‚¹å¹¶è¾“å‡ºã€‚  \nä»å›¾ä¸­åˆ é™¤è¯¥é¡¶ç‚¹å’Œæ‰€æœ‰ä»¥å®ƒä¸ºèµ·ç‚¹çš„æœ‰å‘è¾¹ã€‚  \né‡å¤ 1 å’Œ 2 ç›´åˆ°å½“å‰çš„ DAG å›¾ä¸ºç©ºæˆ–å½“å‰å›¾ä¸­ä¸å­˜åœ¨æ— å‰é©±çš„é¡¶ç‚¹ä¸ºæ­¢ã€‚åä¸€ç§æƒ…å†µè¯´æ˜æœ‰å‘å›¾ä¸­å¿…ç„¶å­˜åœ¨ç¯ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220510081428471.png)\n\näºæ˜¯ï¼Œå¾—åˆ°æ‹“æ‰‘æ’åºåçš„ç»“æœæ˜¯ { 1, 2, 4, 3, 5 }ã€‚\n\né€šå¸¸ï¼Œä¸€ä¸ªæœ‰å‘æ— ç¯å›¾å¯ä»¥æœ‰**ä¸€ä¸ªæˆ–å¤šä¸ª**æ‹“æ‰‘æ’åºåºåˆ—ã€‚\n\näºŒã€æ‹“æ‰‘æ’åºçš„åº”ç”¨  \næ‹“æ‰‘æ’åºé€šå¸¸ç”¨æ¥â€œæ’åºâ€å…·æœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡ã€‚\n\næ¯”å¦‚ï¼Œå¦‚æœç”¨ä¸€ä¸ªDAGå›¾æ¥è¡¨ç¤ºä¸€ä¸ªå·¥ç¨‹ï¼Œå…¶ä¸­æ¯ä¸ªé¡¶ç‚¹è¡¨ç¤ºå·¥ç¨‹ä¸­çš„ä¸€ä¸ªä»»åŠ¡ï¼Œç”¨æœ‰å‘è¾¹è¡¨ç¤ºåœ¨åšä»»åŠ¡ B ä¹‹å‰å¿…é¡»å…ˆå®Œæˆä»»åŠ¡ Aã€‚æ•…åœ¨è¿™ä¸ªå·¥ç¨‹ä¸­ï¼Œä»»æ„ä¸¤ä¸ªä»»åŠ¡è¦ä¹ˆå…·æœ‰ç¡®å®šçš„å…ˆåå…³ç³»ï¼Œè¦ä¹ˆæ˜¯æ²¡æœ‰å…³ç³»ï¼Œç»å¯¹ä¸å­˜åœ¨äº’ç›¸çŸ›ç›¾çš„å…³ç³»ï¼ˆå³ç¯è·¯ï¼‰ã€‚\n\n## ä¸‰ã€æ‹“æ‰‘æ’åºçš„å®ç°\n\næ ¹æ®ä¸Šé¢è®²çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å…³é”®æ˜¯è¦**ç»´æŠ¤ä¸€ä¸ªå…¥åº¦ä¸º0çš„é¡¶ç‚¹çš„é›†åˆ**ã€‚\n\nå›¾çš„å­˜å‚¨æ–¹å¼æœ‰ä¸¤ç§ï¼š[é‚»æ¥çŸ©é˜µ](https://baike.baidu.com/item/é‚»æ¥çŸ©é˜µ/9796080#:~:text=SnippetTab)å’Œ[é‚»æ¥è¡¨](https://baike.baidu.com/item/é‚»æ¥è¡¨/9796152)ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨**é‚»æ¥è¡¨**æ¥å­˜å‚¨å›¾ï¼ŒC++ä»£ç å¦‚ä¸‹ï¼š\n\n```\n#include<iostream>\n#include <list>\n#include <queue>\nusing namespace std;\n\n/************************ç±»å£°æ˜************************/\nclass Graph\n{\n    int V;             // é¡¶ç‚¹ä¸ªæ•°\n    list<int> *adj;    // é‚»æ¥è¡¨\n    queue<int> q;      // ç»´æŠ¤ä¸€ä¸ªå…¥åº¦ä¸º0çš„é¡¶ç‚¹çš„é›†åˆ\n    int* indegree;     // è®°å½•æ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦\npublic:\n    Graph(int V);                   // æ„é€ å‡½æ•°\n    ~Graph();                       // ææ„å‡½æ•°\n    void addEdge(int v, int w);     // æ·»åŠ è¾¹\n    bool topological_sort();        // æ‹“æ‰‘æ’åº\n};\n\n/************************ç±»å®šä¹‰************************/\nGraph::Graph(int V)\n{\n    this->V = V;\n    adj = new list<int>[V];\n\n    indegree = new int[V];  // å…¥åº¦å…¨éƒ¨åˆå§‹åŒ–ä¸º0\n    for(int i=0; i<V; ++i)\n        indegree[i] = 0;\n}\n\nGraph::~Graph()\n{\n    delete [] adj;\n    delete [] indegree;\n}\n\nvoid Graph::addEdge(int v, int w)\n{\n    adj[v].push_back(w); \n    ++indegree[w];\n}\n\nbool Graph::topological_sort()\n{\n    for(int i=0; i<V; ++i)\n        if(indegree[i] == 0)\n            q.push(i);         // å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„é¡¶ç‚¹å…¥é˜Ÿ\n\n    int count = 0;             // è®¡æ•°ï¼Œè®°å½•å½“å‰å·²ç»è¾“å‡ºçš„é¡¶ç‚¹æ•° \n    while(!q.empty())\n    {\n        int v = q.front();      // ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªé¡¶ç‚¹\n        q.pop();\n\n        cout << v << \" \";      // è¾“å‡ºè¯¥é¡¶ç‚¹\n        ++count;\n        // å°†æ‰€æœ‰væŒ‡å‘çš„é¡¶ç‚¹çš„å…¥åº¦å‡1ï¼Œå¹¶å°†å…¥åº¦å‡ä¸º0çš„é¡¶ç‚¹å…¥æ ˆ\n        list<int>::iterator beg = adj[v].begin();\n        for( ; beg!=adj[v].end(); ++beg)\n            if(!(--indegree[*beg]))\n                q.push(*beg);   // è‹¥å…¥åº¦ä¸º0ï¼Œåˆ™å…¥æ ˆ\n    }\n\n    if(count < V)\n        return false;           // æ²¡æœ‰è¾“å‡ºå…¨éƒ¨é¡¶ç‚¹ï¼Œæœ‰å‘å›¾ä¸­æœ‰å›è·¯\n    else\n        return true;            // æ‹“æ‰‘æ’åºæˆåŠŸ\n}\n```\n\næµ‹è¯•å¦‚ä¸‹DAGå›¾ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220510081730199.png)\n\n```\nint main()\n{\n    Graph g(6);   // åˆ›å»ºå›¾\n    g.addEdge(5, 2);\n    g.addEdge(5, 0);\n    g.addEdge(4, 0);\n    g.addEdge(4, 1);\n    g.addEdge(2, 3);\n    g.addEdge(3, 1);\n\n    g.topological_sort();\n    return 0;\n}\n```\n\nè¾“å‡ºç»“æœæ˜¯ 4, 5, 2, 0, 3, 1ã€‚è¿™æ˜¯è¯¥å›¾çš„æ‹“æ‰‘æ’åºåºåˆ—ä¹‹ä¸€ã€‚\n\næ¯æ¬¡åœ¨å…¥åº¦ä¸º0çš„é›†åˆä¸­å–é¡¶ç‚¹ï¼Œå¹¶æ²¡æœ‰ç‰¹æ®Šçš„å–å‡ºè§„åˆ™ï¼Œéšæœºå–å‡ºä¹Ÿè¡Œï¼Œè¿™é‡Œä½¿ç”¨çš„queueã€‚å–é¡¶ç‚¹çš„é¡ºåºä¸åŒä¼šå¾—åˆ°ä¸åŒçš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œå½“ç„¶å‰ææ˜¯è¯¥å›¾å­˜åœ¨å¤šä¸ªæ‹“æ‰‘æ’åºåºåˆ—ã€‚\n\nç”±äºè¾“å‡ºæ¯ä¸ªé¡¶ç‚¹çš„åŒæ—¶è¿˜è¦åˆ é™¤ä»¥å®ƒä¸ºèµ·ç‚¹çš„è¾¹ï¼Œæ•…ä¸Šè¿°æ‹“æ‰‘æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(V+E)O(V+E)ã€‚\n","tags":["æ•°æ®ç»“æ„"],"categories":["æ•°æ®ç»“æ„"]},{"title":"çº¿æ€§è§„åˆ’é—®é¢˜","url":"/2022/06/02/çº¿æ€§è§„åˆ’é—®é¢˜/","content":"\n### 1.çº¿æ€§è§„åˆ’çš„æ¦‚å¿µ\n\nçº¿æ€§è§„åˆ’(Linear Programming ç®€è®° LP)æ˜¯äº†è¿ç­¹å­¦ä¸­æ•°å­¦è§„åˆ’çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ã€‚è‡ªä» 1947 å¹´ G. B. Dantzig æå‡º æ±‚è§£çº¿æ€§è§„åˆ’çš„å•çº¯å½¢æ³•ä»¥æ¥ï¼Œçº¿æ€§è§„åˆ’åœ¨ç†è®ºä¸Šè¶‹å‘æˆç†Ÿï¼Œåœ¨å®ç”¨ä¸­ç”±äºè®¡ç®—æœºèƒ½å¤„ç†æˆåƒä¸Šä¸‡ä¸ªçº¦æŸæ¡ä»¶å’Œå†³ç­–å˜é‡çš„çº¿æ€§è§„åˆ’é—®é¢˜ä¹‹åï¼Œçº¿æ€§è§„åˆ’ç°ä»£ç®¡ç†ä¸­ç»å¸¸é‡‡ç”¨çš„åŸºæœ¬æ–¹æ³•ä¹‹ä¸€ã€‚ åœ¨è§£å†³å®é™…é—®é¢˜æ—¶ï¼Œéœ€è¦æŠŠé—®é¢˜å½’ç»“æˆä¸€ä¸ªçº¿æ€§è§„åˆ’æ•°å­¦æ¨¡å‹ï¼Œå…³é”®åŠéš¾ç‚¹åœ¨äºé€‰é€‚å½“çš„å†³ç­–å˜é‡å»ºç«‹æ°å½“çš„æ¨¡å‹ï¼Œè¿™ç›´æ¥å½±å“åˆ°é—®é¢˜çš„æ±‚è§£ã€‚\n\nçº¿æ€§è§„åˆ’é—®é¢˜çš„ç›®æ ‡å‡½æ•°åŠçº¦æŸæ¡ä»¶å‡ä¸ºçº¿æ€§å‡½æ•°ï¼›çº¦æŸæ¡ä»¶è®°ä¸º s.t.(å³ subject to)ã€‚ç›®æ ‡å‡½æ•°å¯ä»¥æ˜¯æ±‚æœ€å¤§å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æ±‚æœ€å°å€¼ï¼Œçº¦æŸæ¡ä»¶çš„ä¸ç­‰å·å¯ä»¥ æ˜¯å°äºå·ä¹Ÿå¯ä»¥æ˜¯å¤§äºå·ã€‚\n\nä¸€èˆ¬çº¿æ€§è§„åˆ’é—®é¢˜çš„ï¼ˆæ•°å­¦ï¼‰æ ‡å‡†å‹ä¸º\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190329151240157.png)\n\n **å®ä¾‹ï¼š**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190424195022627.png)\n\n### 2.çº¿æ€§è§„åˆ’é—®é¢˜çš„è§£çš„æ¦‚å¿µ ï¼šå¯è¡Œè§£ã€å¯è¡ŒåŸŸã€å›¾è§£æ³•\n\nå¯è¡Œè§£ æ»¡è¶³çº¦æŸæ¡ä»¶ï¼ˆ4ï¼‰çš„è§£ ç§°ä¸ºçº¿æ€§è§„åˆ’é—®é¢˜çš„å¯è¡Œè§£ï¼Œ è€Œä½¿ç›®æ ‡å‡½æ•°ï¼ˆ3ï¼‰è¾¾åˆ°æœ€å¤§å€¼çš„å¯è¡Œè§£å«æœ€ä¼˜è§£ã€‚\n\nå¯è¡ŒåŸŸ æ‰€æœ‰å¯è¡Œè§£æ„æˆçš„é›†åˆç§°ä¸ºé—®é¢˜çš„å¯è¡ŒåŸŸï¼Œè®°ä¸ºR ã€‚\n\nå›¾è§£æ³• ç®€å•ç›´è§‚ï¼Œé€‚ç”¨äºäºŒç»´å†³ç­–å˜é‡ï¼Œå®ƒæœ‰åŠ©äºäº†è§£çº¿æ€§è§„åˆ’é—®é¢˜æ±‚è§£çš„åŸºæœ¬åŸç†ã€‚ã€‚å¯¹äºæ¯ä¸€å›ºå®šçš„å€¼zï¼Œä½¿ç›®æ ‡å‡½æ•°å€¼ç­‰äºzçš„ç‚¹æ„æˆçš„ç›´çº¿ç§°ä¸ºç›®æ ‡å‡½æ•°ç­‰ä½çº¿ï¼Œå½“zå˜åŠ¨æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€æ—å¹³è¡Œç›´çº¿ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190424195312914.png)\n\n### 2.1. æ¨å¹¿åˆ°å¤šç»´ç©ºé—´çš„çº¿æ€§è§„åˆ’ï¼šè¶…å¹³é¢ã€å¤šèƒå½¢ã€å¤šé¢ä½“\n\nä»¥ä¸‹ç»“è®ºå¯ä»¥æ¨å¹¿åˆ°ä¸€èˆ¬çš„çº¿æ€§è§„åˆ’é—®é¢˜ï¼ŒåŒºåˆ«åªåœ¨äºç©ºé—´çš„ç»´æ•°ï¼š\n\nï¼ˆ1ï¼‰å¯è¡ŒåŸŸR å¯èƒ½ä¼šå‡ºç°å¤šç§æƒ…å†µã€‚R å¯èƒ½æ˜¯ç©ºé›†ä¹Ÿå¯èƒ½æ˜¯éç©ºé›†åˆï¼Œå½“R éç©º æ—¶ï¼Œå®ƒå¿…å®šæ˜¯è‹¥å¹²ä¸ªåŠå¹³é¢çš„äº¤é›†ï¼ˆé™¤éé‡åˆ°ç©ºé—´ç»´æ•°çš„é€€åŒ–ï¼‰ ã€‚R æ—¢å¯èƒ½æ˜¯æœ‰ç•ŒåŒºåŸŸï¼Œ ä¹Ÿå¯èƒ½æ˜¯æ— ç•ŒåŒºåŸŸã€‚\n\nï¼ˆ2ï¼‰åœ¨R éç©ºæ—¶ï¼Œçº¿æ€§è§„åˆ’æ—¢å¯ä»¥å­˜åœ¨æœ‰é™æœ€ä¼˜è§£ï¼Œä¹Ÿå¯ä»¥ä¸å­˜åœ¨æœ‰é™æœ€ä¼˜è§£ï¼ˆå…¶ ç›®æ ‡å‡½æ•°å€¼æ— ç•Œï¼‰ã€‚\n\nï¼ˆ3ï¼‰è‹¥çº¿æ€§è§„åˆ’å­˜åœ¨æœ‰é™æœ€ä¼˜è§£ï¼Œåˆ™å¿…å¯æ‰¾åˆ°å…·æœ‰æœ€ä¼˜ç›®æ ‡å‡½æ•°å€¼çš„å¯è¡ŒåŸŸR çš„ â€œé¡¶ç‚¹â€ ã€‚\n\nåœ¨ä¸€èˆ¬çš„nç»´ ç©ºé—´ä¸­ï¼Œæ»¡è¶³çº¿æ€§ç­‰å¼ ![](https://presenter.oss-cn-shanghai.aliyuncs.com/gif.gif)çš„ç‚¹é›†è¢«ç§°ä¸ºä¸€ä¸ª**è¶…å¹³é¢ï¼›**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/gif.gif)æˆ–![](https://presenter.oss-cn-shanghai.aliyuncs.com/gif.gif)çš„ç‚¹é›†è¢«ç§°ä¸ºä¸€ä¸ªåŠç©ºé—´ï¼Œå…¶ä¸­![](https://presenter.oss-cn-shanghai.aliyuncs.com/gif%20(1).gif)ä¸ºä¸€ä¸ªnç»´è¡Œå‘é‡ï¼Œbä¸ºä¸€ä¸ªå®æ•°ã€‚\n\nè‹¥å¹²ä¸ªåŠç©ºé—´çš„äº¤é›†è¢«ç§°ä¸ºå¤šèƒå½¢ï¼Œæœ‰ç•Œçš„å¤šèƒå½¢åˆè¢«ç§°ä¸ºå¤šé¢ä½“ã€‚æ˜“è§ï¼Œçº¿æ€§è§„åˆ’çš„å¯è¡ŒåŸŸå¿…ä¸ºå¤šèƒå½¢ï¼ˆä¸ºç»Ÿä¸€èµ·è§ï¼Œç©ºé›†Î¦ä¹Ÿè¢«è§†ä¸ºå¤šèƒå½¢ï¼‰ã€‚ åœ¨ä¸€èˆ¬nç»´ç©ºé—´ä¸­ï¼Œè¦ç›´æ¥å¾—å‡ºå¤šèƒå½¢â€œé¡¶ç‚¹â€æ¦‚å¿µè¿˜æœ‰ä¸€äº›å›°éš¾ã€‚äºŒç»´ç©ºé—´ä¸­çš„é¡¶ç‚¹å¯ä»¥çœ‹æˆä¸ºè¾¹ç•Œç›´çº¿çš„äº¤ç‚¹ï¼Œä½†è¿™ä¸€å‡ ä½•æ¦‚å¿µçš„æ¨å¹¿åœ¨ä¸€èˆ¬nç»´ç©ºé—´ä¸­çš„å‡ ä½•æ„ä¹‰å¹¶ä¸ååˆ†ç›´è§‚ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨å¦ä¸€é€”å¾„æ¥å®šä¹‰å®ƒã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190329152724917.png)\n\nå•çº¯å½¢æ³•æ˜¯æ±‚è§£çº¿æ€§è§„åˆ’é—®é¢˜çš„æœ€å¸¸ç”¨ã€æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ ï¼Œæ­¤å¤„ä¸ä½œä»‹ç»ã€‚è¿™é‡Œæˆ‘ä»¬å°±ä¸ä»‹ç» å•çº¯å½¢æ³•ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å‚çœ‹å…¶å®ƒçº¿æ€§è§„åˆ’ä¹¦ç±ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»çº¿æ€§è§„åˆ’çš„ Matlab è§£æ³•ã€‚\n\n### 3.æ±‚è§£çº¿æ€§è§„åˆ’çš„ Matlab è§£æ³•\n\nMatlab ä¸­è§„å®šçº¿æ€§è§„åˆ’çš„æ ‡å‡†å½¢å¼ä¸º\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/2019032915072569.png)\n\nå…¶ä¸­cå’Œ xä¸ºn ç»´åˆ—å‘é‡ï¼Œ Aã€ Aeq ä¸ºé€‚å½“ç»´æ•°çš„çŸ©é˜µï¼Œb ã€beqä¸ºé€‚å½“ç»´æ•°çš„åˆ—å‘é‡ã€‚ ï¼ˆ**Aeq** å¯¹åº”çº¦æŸæ¡ä»¶ä¸­**ç­‰å¼çº¦æŸ**çš„ç³»æ•°çŸ©é˜µï¼ŒAä¸ºçº¦**ä¸ç­‰å¼çº¦æŸ**çš„ç³»æ•°çŸ©é˜µï¼‰ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190329153446939.png)\n\nåŸºæœ¬å‡½æ•°å½¢å¼ä¸º linprog(c,A,b)ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯å‘é‡ xçš„å€¼ã€‚è¿˜æœ‰å…¶å®ƒçš„ä¸€äº›å‡½æ•°è°ƒç”¨å½¢ å¼ï¼ˆåœ¨ Matlab æŒ‡ä»¤çª—è¿è¡Œ help linprog å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨å½¢å¼ï¼‰ï¼Œå¦‚ï¼š\n\n```\n[x,fval]=linprog(c,A,b,Aeq,beq,LB,UB,X0,OPTIONS) \n```\n\nè¿™é‡Œ **fval è¿”å›ç›®æ ‡å‡½æ•°çš„å€¼ï¼ŒLB å’Œ UB åˆ†åˆ«æ˜¯å˜é‡ xçš„ä¸‹ç•Œå’Œä¸Šç•Œï¼Œ 0 x æ˜¯xçš„åˆå§‹å€¼ï¼Œ OPTIONS æ˜¯æ§åˆ¶å‚æ•°**ã€‚\n\n### ä¾‹é¢˜\n\nä¾‹å¦‚æ±‚è§£ä¸‹åˆ—çº¿æ€§è§„åˆ’é—®é¢˜\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190329153141919.png)\n\nè§£ ï¼ˆiï¼‰ç¼–å†™ M æ–‡ä»¶\n\n```\nc=[2;3;-5]; \na=[-2,5,-1;1,3,1]; \nb=[-10;12]; \naeq=[1,1,1]; \nbeq=7; \nx=linprog(-c,a,b,aeq,beq,zeros(3,1)) \nvalue=c'*x\n```\n\nï¼ˆiiï¼‰å°†Mæ–‡ä»¶å­˜ç›˜ï¼Œå¹¶å‘½åä¸ºexample1.mã€‚\n\nï¼ˆiiiï¼‰åœ¨MatlabæŒ‡ä»¤çª—è¿è¡Œexample1å³å¯å¾—æ‰€æ±‚ç»“æœã€‚\n\nä¾‹3 æ±‚è§£çº¿æ€§è§„åˆ’é—®é¢˜\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/20190424195629342.png)\n\nè§£ ç¼–å†™Matlabç¨‹åºå¦‚ä¸‹ï¼š\n\n```\nc=[2;3;1]; \na=[1,4,2;3,2,0]; \nb=[8;6]; \n[x,y]=linprog(c,-a,-b,[],[],zeros(3,1)) \n```\n","tags":["æœ€ä¼˜åŒ–"],"categories":["ç®—æ³•"]},{"title":"è¿œç¨‹æ§åˆ¶+Sakurafrpå®ç°éå±€åŸŸç½‘è¿œç¨‹æ§åˆ¶","url":"/2022/06/02/è¿œç¨‹æ§åˆ¶sakurafrpå®ç°éå±€åŸŸç½‘è¿œç¨‹æ§åˆ¶/","content":"\n## ä¸€ã€ä¸‹è½½RD Client\n\n- å®‰å“ç«¯ç½‘é¡µä¸‹è½½æˆ–è€…[RDClient](https://presenter.oss-cn-shanghai.aliyuncs.com/base.apk)\n- iosç«¯åœ¨App Storeæœç´¢RDClient\n\n## äºŒã€è®¾ç½®PCå…è®¸è¿œç¨‹è¿æ¥\n\n- **win11**ï¼šè¿™é‡Œæ‰“å¼€ç”µè„‘è®¾ç½®-> ç³»ç»Ÿ->è¿œç¨‹æ¡Œé¢\n\n![QQå›¾ç‰‡20211109094906](https://presenter.oss-cn-shanghai.aliyuncs.com/QQ%E5%9B%BE%E7%89%8720211109094906.png)\n\n\\==è¿™é‡Œçš„æ‰“å¼€åä½ èƒ½è¿æ¥ä½ çš„ç”¨æˆ·å°±æ˜¯ä½ ç”µè„‘å¼€æœºæ—¶çš„ç”¨æˆ·ï¼Œä¾‹å¦‚administratorï¼Œwin10ä¹Ÿæ˜¯ä¸€æ ·çš„==\n\n- **win10**ï¼š è¿›å…¥æ§åˆ¶é¢æ¿->ç³»ç»Ÿå’Œå®‰å…¨->ç³»ç»Ÿ->è¿œç¨‹è®¾ç½®  \n    æŒ‰ç…§ä¸‹å›¾æ–¹å¼å‹¾é€‰  \n    ![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20170215163223342?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzA0NjU2NTc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n## ä¸‰ã€æ³¨å†Œsakura frpï¼ˆéœ€è¦å®åè®¤è¯ï¼Œæ”¯ä»˜å®æˆæƒå°±è¡Œï¼‰\n\n![image-20211109101421526](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109101421526.png)\n\n![image-20211109101508848](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109101508848.png)\n\nåœ¨å¯¼èˆªæ ä¸Š\n\nç”¨æˆ·->å®åè®¤è¯\n\næ ¹æ®æç¤ºå®Œæˆè®¤è¯\n\n![image-20211109101620430](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109101620430.png)\n\nç‚¹å‡»ç©¿é€->éš§é“åˆ—è¡¨\n\n![image-20211109101742287](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109101742287.png)\n\n![image-20211109102002178](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109102002178.png)\n\n![image-20211109102044910](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109102044910.png)\n\nç‚¹å‡»è½¯ä»¶ä¸‹è½½\n\n![image-20211109102209378](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109102209378.png)\n\nç„¶åè§£å‹å®‰è£…\n\nå†æ‰“å¼€frpc.inié…ç½®æ–‡ä»¶ï¼ˆå¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼‰\n\n![image-20211109103125704](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103125704.png)\n\nå†å»sakura frpç½‘ç«™ç‚¹å‡»**éš§é“åˆ—è¡¨**ï¼Œæ‰¾åˆ°ä½ åˆšæ‰æ–°å»ºçš„éš§é“\n\n![image-20211109103347791](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103347791.png)\n\n![image-20211109103506496](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103506496.png)\n\n![image-20211109103555304](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103555304.png)\n\nç„¶åç›´æ¥å»åˆšæ‰æ‰“å¼€çš„frpc.iniç²˜è´´å³å¯ã€‚\n\næœ€åç›´æ¥æ‰“å¼€exe\n\n![image-20211109103722486](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103722486.png)\n\nè¿è¡Œç»“æœï¼šç„¶åç¼©å°ï¼Œå»å¹³æ¿æˆ–è€…æ‰‹æœºæˆ–è€…pcè¿æ¥ç”µè„‘\n\n![image-20211109103802090](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109103802090.png)\n\n## å››ã€è¿æ¥ç”µè„‘\n\nç‚¹å‡»Desktop\n\n![image-20211109104240443](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109104240443.png)\n\nç„¶åadd MANUALLY\n\n![image-20211109104948381](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211109104948381.png)\n\nç„¶åç‚¹å‡»saveå°±è¡Œ\n\næœ€åç›´æ¥è¿æ¥\n","tags":["è¿œç¨‹è¿æ¥"],"categories":["å·¥å…·"]},{"title":"openwrtå®‰è£…ä¸»é¢˜","url":"/2022/06/01/openwrtå®‰è£…ä¸»é¢˜/","content":"\n### OpenWrtå®‰è£…ä¸»é¢˜\n\n**Argonâ€”â€”è¶…æ¼‚äº®çš„OpenWrtä¸»é¢˜**\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/3877976271.png)\n\n## å®‰è£…æ¡ä»¶\n\n> OpenwrtåŠå…¶è¡ç”Ÿç³»ç»Ÿï¼ŒåŒ…æ‹¬Ledeï¼ŒPandoraBox,DD-Wrt  \n> ç³»ç»Ÿç‰ˆæœ¬é«˜äº18.0ï¼Œä¸”èƒ½è”ç½‘ä¸‹è½½ï¼ˆè¿™ä¸åºŸè¯ï¼‰  \n> æœ‰Opkgç¯å¢ƒï¼Œç©ºé—²ç©ºé—´>1Mï¼Œæˆ–è€…æœ‰å†…å­˜å¡/Uç›˜\n\n## å®‰è£…æ–¹æ³•\n\n### ä¸‹è½½å®‰è£…\n\n```\nopkg update\nopkg install wget\nopkg install ca-certificates\n#æ³¨æ„è¿™é‡Œç‰ˆæœ¬å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œæ‰“å¼€https://github.com/jerrykuku/luci-theme-argon/releases/å¯ä»¥çœ‹åˆ°æœ€æ–°é“¾æ¥\nwget --no-check-certificate https://github.com/jerrykuku/luci-theme-argon/releases/download/v1.7.3/luci-theme-argon-18.06_1.7.3-20220421_all.ipk\nopkg install luci-theme-argon_2.01-20200203_all.ipk\n```\n\n### æ‰‹åŠ¨å®‰è£…\n\n[**ä¸‹è½½æ–‡ä»¶luci-theme-argon\\_1.5.1.zip**](https://code.52pika.cn/usr/uploads/2020/04/2634254018.zip)  \nè§£å‹äº†å°†ipké€šè¿‡WinSCPä¸Šä¼ åˆ°è·¯ç”±å™¨/tmpæ–‡ä»¶å¤¹ï¼Œç„¶åï¼š\n\n```\nopkg install luci-theme-argon_1.5.1.ipk\n```\n\n### æ‰‹åŠ¨æ„å»º\n\n```\ncd openwrt/package\ngit clone https://github.com/jerrykuku/luci-theme-argon.git  \nmake menuconfig #choose LUCI->Theme->Luci-theme-argon  \nmake -j1 V=s \n```\n\nç°åœ¨å°±å·²ç»å¯ä»¥äº†\n\nå¦‚æœæƒ³æ¢å›ä»¥å‰åœ°ä¸»é¢˜ã€‚\n\nå¦‚æœå‡ºç°é”™è¯¯å¯ä»¥å°è¯•è¿™ä¸ª\n\n```\nwget --no-check-certificate https://github.com/jerrykuku/luci-theme-argon/releases/download/v2.1/luci-theme-argon_2.1-20200206_all.ipk\nopkg install luci-theme-argon_2.1-20200206_all.ipk\n```\n\n\\### ä¿®æ”¹ä¸»é¢˜\n\n```\nä¸»é¢˜é…ç½®æ˜¯åœ¨ï¼š/etc/config/luci\n```\n\nç¬¬ä¸€ä¸ªçº¢æ¡†é‡Œé¢çš„å°±æ˜¯å½“å‰ä¸»é¢˜ï¼Œæ”¹æ‰å°±èƒ½ä¿®æ”¹ä¸»é¢˜ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/1614698-20200618162007275-421635754.png)\n","tags":["openwrt"],"categories":["è¿ç»´"]},{"title":"openwrtå¼€å¯passwall","url":"/2022/06/01/openwrtå¼€å¯passwall/","content":"\n### ç§‘å­¦ä¸Šç½‘\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220515100457474.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220515100516090.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220515100552968.png)\n\nè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥å¯¼å…¥å‰ªåˆ‡æ¿\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220515100617845.png)\n\næœ€åä¿å­˜å°±è¡Œã€‚\n","tags":["openwrt"],"categories":["è¿ç»´"]},{"title":"Openwrtä¸‹ipkåŒ…çš„å®‰è£…ã€å¸è½½ä¸æ›´æ–°","url":"/2022/06/01/openwrtä¸‹ipkåŒ…çš„å®‰è£…ã€å¸è½½ä¸æ›´æ–°/","content":"\n### Openwrtä¸‹ipkåŒ…çš„å®‰è£…ã€å¸è½½ä¸æ›´æ–°\n\n#### ä¸€ã€ç¯å¢ƒè¯´æ˜\n\nOpenwrt\\_version:17.01.4  \nLinux\\_version:4.4.92\n\n#### äºŒã€å®‰è£…ipk\n\nå°†ç¼–è¯‘å¥½çš„.ipkä¼ åˆ°å¼€å‘æ¿ä¸Šï¼Œä½¿ç”¨å‘½ä»¤ï¼š\n\n```\nopkg install xxxxx.ipkå®‰è£…æˆåŠŸçš„ç•Œé¢å¦‚ä¸‹ï¼š\n```\n\nå†è¿›å…¥/lib/modules/4.4.92ï¼ˆåœ¨/lib/modulesæ–‡ä»¶å¤¹ä¸‹ï¼Œä¸åŒçš„æœºå­å¯èƒ½æœ‰ä¸åŒçš„æ–‡ä»¶å¤¹ï¼‰ï¼Œæ‰¾åˆ°xxxx.koæ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤ï¼šinsmod xxxx.koï¼Œå‘½ä»¤lsmodå°±èƒ½çœ‹åˆ°æ’å…¥å†…æ ¸çš„.koæ–‡ä»¶\n\n#### ä¸‰ã€å¸è½½ipk\n\nè¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯ç›´æ¥æ‰§è¡Œ  \nopkg remove xxxx.ipkæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºå®‰è£…å¥½ä»¥åçš„æ–‡ä»¶åæ˜¯å’ŒåŸæ¥çš„.ipkæ–‡ä»¶åä¸ä¸€æ ·çš„  \næ­¥éª¤ï¼š  \n1ã€æ‰§è¡Œ opkg list\\_installed,æ‰¾åˆ°æƒ³å¸è½½çš„æ–‡ä»¶åç§°  \n2ã€æ‰§è¡Œopkg remove æ–‡ä»¶åï¼ˆå°±æ˜¯ä¸Šä¸€æ­¥æ‰¾åˆ°çš„åç§°ï¼‰  \nå¸è½½æˆåŠŸçš„ç•Œé¢ï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508232159227.png)\n\n#### å››ã€æ›´æ–°\n\nç»è¿‡å¸è½½è¿™ä¸€æ­¥ï¼Œåœ¨é‡æ–°æ‰§è¡Œå®‰è£…æ­¥éª¤å³å¯\n","tags":["openwrt"],"categories":["è¿ç»´"]},{"title":"pså¿«æ·é”®","url":"/2022/06/01/pså¿«æ·é”®/","content":"\n| æ–°å»ºæ–‡ä»¶ | ã€Ctrlã€‘+ã€Nã€‘ | æ‰“å¼€æ–‡ä»¶ | ã€Ctrlã€‘+ã€Oã€‘ |\n| --- | --- | --- | --- |\n| å…³é—­æ–‡ä»¶ | ã€Ctrlã€‘+ã€Wã€‘ | å›¾åƒå¤§å° | ã€Ctrlã€‘+ã€Altã€‘+ã€Iã€‘ |\n| ç”»å¸ƒå¤§å° | ã€Ctrlã€‘+ã€Altã€‘+ã€Cã€‘ | ä¿å­˜æ–‡ä»¶ | ã€Ctrlã€‘+ã€Sã€‘ |\n| åˆå¹¶å¯è§å›¾å±‚ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Eã€‘ | å¤åˆ¶å›¾å±‚ | ã€Ctrlã€‘+ã€Jã€‘ |\n| åˆ›å»ºå‰ªåˆ‡è’™ç‰ˆ | ã€Ctrlã€‘+ã€Altã€‘+ã€Gã€‘ | ç›–å°å›¾å±‚ | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€Eã€‘ |\n| ä¸Šä¸‹ç§»åŠ¨å›¾å±‚ | ã€Ctrlã€‘+ã€\\[ã€‘æˆ–ã€\\]ã€‘ | å›¾å±‚ç½®é¡¶æˆ–ç§»åˆ°åº•éƒ¨ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€\\[ã€‘æˆ–ã€\\]ã€‘ |\n| è°ƒæ•´è¾¹ç¼˜ | ã€Ctrlã€‘+ã€Altã€‘+ã€Rã€‘ | æ”¹å˜ç”»ç¬”å¤§å° | ã€\\[ã€‘æˆ–ã€\\]ã€‘ |\n| å…¨é€‰ | ã€Ctrlã€‘+ã€Aã€‘ | è½½å…¥é«˜å…‰é€‰åŒº | ã€Ctrlã€‘+ã€Altã€‘+ã€2ã€‘ |\n| æ”¹å˜å›¾å±‚ä¸é€æ˜åº¦ | ç›´æ¥æŒ‰é”®ç›˜ä¸Šçš„æ•°å­—ï¼Œå¦‚15%ï¼ŒæŒ‰ã€1ã€‘å’Œã€5ã€‘ | é‡å¤ä¸Šæ¬¡æ»¤é•œ | ã€Ctrlã€‘+ã€Fã€‘ |\n| ç¾½åŒ– | ã€Shiftã€‘+ã€F6ã€‘ | å–æ¶ˆé€‰åŒº | ã€Ctrlã€‘+ã€Dã€‘ |\n\n| **äºŒã€å·¥å…·ç®±å·¥å…·** |  |  |\n| --- | --- | --- |\n| ç§»åŠ¨å·¥å…· | ã€Vã€‘ | ![img](https://presenter.oss-cn-shanghai.aliyuncs.com/kj_2a.jpg) |\n| çŸ©å½¢ã€æ¤­åœ†é€‰æ¡†å·¥å…· | ã€Mã€‘ |  |\n| å¥—ç´¢ã€å¤šè¾¹å½¢å¥—ç´¢ã€ç£æ€§å¥—ç´¢ | ã€Lã€‘ |  |\n| å¿«é€Ÿé€‰æ‹©å·¥å…·ã€é­”æ£’å·¥å…· | ã€Wã€‘ |  |\n| è£å‰ªã€é€è§†è£å‰ªã€åˆ‡ç‰‡ã€åˆ‡ç‰‡é€‰æ‹©å·¥å…· | ã€Cã€‘ |  |\n| å¸ç®¡ã€é¢œè‰²å–æ ·å™¨ã€æ ‡å°ºã€æ³¨é‡Šã€123è®¡æ•°å·¥å…· | ã€Iã€‘ |  |\n| æ±¡ç‚¹ä¿®å¤ç”»ç¬”ã€ä¿®å¤ç”»ç¬”ã€ä¿®è¡¥ã€å†…å®¹æ„ŸçŸ¥ç§»åŠ¨ã€çº¢çœ¼å·¥å…· | ã€Jã€‘ |  |\n| ç”»ç¬”ã€é“…ç¬”ã€é¢œè‰²æ›¿æ¢ã€æ··åˆå™¨ç”»ç¬”å·¥å…· | ã€Bã€‘ |  |\n| ä»¿åˆ¶å›¾ç« ã€å›¾æ¡ˆå›¾ç« å·¥å…· | ã€Sã€‘ |  |\n| å†å²è®°å½•ç”»ç¬”å·¥å…·ã€å†å²è®°å½•è‰ºæœ¯ç”»ç¬”å·¥å…· | ã€Yã€‘ |  |\n| åƒçš®æ“¦ã€èƒŒæ™¯æ©¡çš®æ“¦ã€é­”æœ¯æ©¡çš®æ“¦å·¥å…· | ã€Eã€‘ |  |\n| æ¸å˜ã€æ²¹æ¼†æ¡¶å·¥å…· | ã€Gã€‘ |  |\n| å‡æ·¡ã€åŠ æ·±ã€æµ·æ£‰å·¥å…· | ã€Oã€‘ |  |\n| é’¢ç¬”ã€è‡ªç”±é’¢ç¬”ã€æ·»åŠ é”šç‚¹ã€åˆ é™¤é”šç‚¹ã€è½¬æ¢ç‚¹å·¥å…· | ã€Pã€‘ |  |\n| æ¨ªæ’æ–‡å­—ã€ç›´æ’æ–‡å­—ã€æ¨ªæ’æ–‡å­—è’™æ¿ã€ç›´æ’æ–‡å­—è’™æ¿ | ã€Tã€‘ |  |\n| è·¯å¾„é€‰æ‹©ã€ç›´æ¥é€‰æ‹©å·¥å…· | ã€Aã€‘ |  |\n| çŸ©å½¢ã€åœ†è§’çŸ©å½¢ã€æ¤­åœ†ã€å¤šè¾¹å½¢ã€ç›´çº¿ã€è‡ªå®šä¹‰å½¢çŠ¶å·¥å…· | ã€Uã€‘ |  |\n| æŠ“æ‰‹å·¥å…· | ã€Hã€‘ |  |\n| æ—‹è½¬è§†å›¾å·¥å…· | ã€Rã€‘ |  |\n| ç¼©æ”¾å·¥å…· | ã€Zã€‘ |  |\n| æ·»åŠ é”šç‚¹å·¥å…· | ã€+ã€‘ |  |\n| åˆ é™¤é”šç‚¹å·¥å…· | ã€-ã€‘ |  |\n| é»˜è®¤å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰² | ã€Dã€‘ |  |\n| åˆ‡æ¢å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰² | ã€Xã€‘ |  |\n| åˆ‡æ¢æ ‡å‡†æ¨¡å¼å’Œå¿«é€Ÿè’™æ¿æ¨¡å¼ | ã€Qã€‘ |  |\n| æ ‡å‡†å±å¹•æ¨¡å¼ã€å¸¦æœ‰èœå•æ çš„å…¨å±æ¨¡å¼ã€å…¨å±æ¨¡å¼ | ã€Fã€‘ |  |\n| ä¸´æ—¶ä½¿ç”¨ç§»åŠ¨å·¥å…· | ã€Ctrlã€‘ |  |\n| ä¸´æ—¶ä½¿ç”¨å¸è‰²å·¥å…· | ã€Altã€‘ |  |\n| ä¸´æ—¶ä½¿ç”¨æŠ“æ‰‹å·¥å…· | ã€ç©ºæ ¼ã€‘ |  |\n| æ‰“å¼€å·¥å…·é€‰é¡¹é¢æ¿ | ã€Enterã€‘ |  |\n| å¿«é€Ÿè¾“å…¥å·¥å…·é€‰é¡¹(å½“å‰å·¥å…·é€‰é¡¹é¢æ¿ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå¯è°ƒèŠ‚æ•°å­—) | ã€0ã€‘è‡³ã€9ã€‘ |  |\n| å¾ªç¯é€‰æ‹©ç”»ç¬” | ã€,ã€‘æˆ–ã€.ã€‘ |  |\n| é€‰æ‹©ç¬¬ä¸€ä¸ªç”»ç¬” | ã€Shiftã€‘+ã€,ã€‘ |  |\n| é€‰æ‹©æœ€åä¸€ä¸ªç”»ç¬” | ã€Shiftã€‘+ã€.ã€‘ |  |\n| æ”¹å˜ç”»ç¬”å¤§å° | ã€\\[ã€‘æˆ–ã€\\]ã€‘ |  |\n\n| **ä¸‰ã€ç”»ç¬”å·¥å…·å¿«æ·é”®å¤§å…¨** |  |\n| --- | --- |\n| ç”»ç¬”å·¥å…·ã€Bã€‘ | æ™®é€šæ¨¡å¼å’Œç²¾ç¡®å…‰æ ‡æ¨¡å¼åˆ‡æ¢ã€Caps Lockã€‘ |\n| ä½¿ç”¨ç”»ç¬”å·¥å…·æ—¶æŒ‰ä½ã€Ctrlã€‘å°±ä¼šå˜æˆç§»åŠ¨å·¥å…· | ä½¿ç”¨ç”»ç¬”å·¥å…·æ—¶æŒ‰ä½ã€Altã€‘å°±ä¼šå˜æˆå¸ç®¡å·¥å…· |\n| æ”¹å˜ç”»ç¬”å¤§å°ã€\\[ã€‘æˆ–ã€\\]ã€‘ | æ”¹å˜ç”»ç¬”è½¯ç¡¬åº¦**ã€Shiftã€‘+**ã€\\[ã€‘æˆ–ã€\\]ã€‘ |\n| ç”»ç¬”ä¸é€æ˜åº¦ã€æ•°å­—ã€‘ï¼Œå¦‚5%ï¼ŒæŒ‰ã€0ã€‘å’Œã€5ã€‘ | ç”»ç¬”æµé‡è°ƒèŠ‚ã€Shiftã€‘+ã€æ•°å­—ã€‘ |\n| å¾ªç¯é€‰æ‹©ç”»ç¬”é¢„è®¾ä¸­çš„ç”»ç¬”ã€,ã€‘æˆ–ã€.ã€‘ | æ˜¾ç¤º/éšè—â€œç”»ç¬”é¢„è®¾â€é¢æ¿ã€F5ã€‘ |\n| é€‰æ‹©ç¬¬ä¸€æ¬¾ç”»ç¬”**ã€Shiftã€‘+**ã€,ã€‘ | é€‰æ‹©æœ€åä¸€æ¬¾ç”»ç¬”**ã€Shiftã€‘+**ã€.ã€‘ |\n| **ä½¿ç”¨ç”»ç¬”å·¥å…·æ—¶æŒ‰ä½ã€Altã€‘+ã€Shiftã€‘+ã€é¼ æ ‡å³é”®ä¸æ”¾ã€‘å°±å¯ä»¥æ˜¾ç¤ºè‰²è½®** |  |\n| æŒ‰**ã€Altã€‘**+**ã€é¼ æ ‡å³é”®ä¸æ”¾ã€‘**ï¼Œå·¦å³æ‹–åŠ¨æ˜¯è°ƒèŠ‚ç¬”åˆ·å¤§å°ï¼Œä¸Šä¸‹æ‹–åŠ¨æ˜¯è°ƒèŠ‚ç”»ç¬”ä¸é€æ˜åº¦ |  |\n\n| **å››ã€æ–‡ä»¶æ“ä½œ** |  |\n| --- | --- |\n| æ–°å»ºå›¾å½¢æ–‡ä»¶ | ã€Ctrlã€‘+ã€Nã€‘ |\n| ç”¨é»˜è®¤è®¾ç½®åˆ›å»ºæ–°æ–‡ä»¶ | ã€Ctrlã€‘+ã€Altã€‘+ã€Nã€‘ |\n| æ‰“å¼€å·²æœ‰çš„å›¾åƒ | ã€Ctrlã€‘+ã€Oã€‘ |\n| æ‰“å¼€ä¸ºâ€¦ | ã€Ctrlã€‘+ã€Altã€‘+ã€Oã€‘ |\n| å…³é—­å½“å‰å›¾åƒ | ã€Ctrlã€‘+ã€Wã€‘ |\n| ä¿å­˜å½“å‰å›¾åƒ | ã€Ctrlã€‘+ã€Sã€‘ |\n| å¦å­˜ä¸ºâ€¦ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Sã€‘ |\n| å­˜å‚¨ä¸ºWebæ‰€ç”¨æ ¼å¼ | ã€Ctrlã€‘+ã€Altã€‘+ ã€Shiftã€‘+ã€Sã€‘ |\n| é¡µé¢è®¾ç½® | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Pã€‘ |\n| æ‰“å° | ã€Ctrlã€‘+ã€Pã€‘ |\n| æ‰“å¼€â€œé¢„ç½®â€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Kã€‘ |\n\n| **äº”ã€ç¼–è¾‘æ“ä½œ** |  |\n| --- | --- |\n| è¿˜åŸ/é‡åšå‰ä¸€æ­¥æ“ä½œ | ã€Ctrlã€‘+ã€Zã€‘ |\n| ä¸€æ­¥ä¸€æ­¥å‘å‰è¿˜åŸ | ã€Ctrlã€‘+ã€Altã€‘+ã€Zã€‘ |\n| ä¸€æ­¥ä¸€æ­¥å‘åé‡åš | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Zã€‘ |\n| æ·¡å…¥/æ·¡å‡º | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Fã€‘ |\n| å‰ªåˆ‡é€‰å–çš„å›¾åƒæˆ–è·¯å¾„ | ã€Ctrlã€‘+ã€Xã€‘æˆ–ã€F2ã€‘ |\n| æ‹·è´é€‰å–çš„å›¾åƒæˆ–è·¯å¾„ | ã€Ctrlã€‘+ã€Cã€‘ |\n| åˆå¹¶æ‹·è´ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Cã€‘ |\n| å°†å‰ªè´´æ¿çš„å†…å®¹ç²˜åˆ°å½“å‰å›¾å½¢ä¸­ | ã€Ctrlã€‘+ã€Vã€‘æˆ–ã€F4ã€‘ |\n| å°†å‰ªè´´æ¿çš„å†…å®¹ç²˜åˆ°é€‰æ¡†ä¸­ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Vã€‘ |\n| è‡ªç”±å˜æ¢ | ã€Ctrlã€‘+ã€Tã€‘ |\n| åº”ç”¨è‡ªç”±å˜æ¢(åœ¨è‡ªç”±å˜æ¢æ¨¡å¼ä¸‹) | ã€Enterã€‘ |\n| ä»ä¸­å¿ƒæˆ–å¯¹ç§°ç‚¹å¼€å§‹å˜æ¢ (åœ¨è‡ªç”±å˜æ¢æ¨¡å¼ä¸‹) | ã€Altã€‘ |\n| é™åˆ¶(åœ¨è‡ªç”±å˜æ¢æ¨¡å¼ä¸‹) | ã€Shiftã€‘ |\n| æ‰­æ›²(åœ¨è‡ªç”±å˜æ¢æ¨¡å¼ä¸‹) | ã€Ctrlã€‘ |\n| å–æ¶ˆå˜å½¢(åœ¨è‡ªç”±å˜æ¢æ¨¡å¼ä¸‹) | ã€Escã€‘ |\n| è‡ªç”±å˜æ¢å¤åˆ¶çš„è±¡ç´ æ•°æ® | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Tã€‘ |\n| å†æ¬¡å˜æ¢å¤åˆ¶çš„è±¡ç´ æ•°æ®å¹¶å»ºç«‹ä¸€ä¸ªå‰¯æœ¬ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Altã€‘+ã€Tã€‘ |\n| åˆ é™¤é€‰æ¡†ä¸­çš„å›¾æ¡ˆæˆ–é€‰å–çš„è·¯å¾„ | ã€DELã€‘ |\n| ç”¨èƒŒæ™¯è‰²å¡«å……æ‰€é€‰åŒºåŸŸæˆ–æ•´ä¸ªå›¾å±‚ | ã€Ctrlã€‘+ã€BackSpaceã€‘æˆ–ã€Ctrlã€‘+ã€Delã€‘ |\n| ç”¨å‰æ™¯è‰²å¡«å……æ‰€é€‰åŒºåŸŸæˆ–æ•´ä¸ªå›¾å±‚ | ã€Altã€‘+ã€BackSpaceã€‘æˆ–ã€Altã€‘+ã€Delã€‘ |\n| å¼¹å‡ºâ€œå¡«å……â€å¯¹è¯æ¡† | ã€Shiftã€‘+ã€BackSpaceã€‘ |\n| ä»å†å²è®°å½•ä¸­å¡«å…… | ã€Altã€‘+ã€Ctrlã€‘+ã€Backspaceã€‘ |\n| æ‰“å¼€â€œé¢œè‰²è®¾ç½®â€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Kã€‘ |\n| æ‰“å¼€â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡† | ã€Altã€‘+ã€Eã€‘æ”¾å¼€åæŒ‰ã€Mã€‘ |\n| é¢„è®¾ç”»ç¬”ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€1ã€‘ |\n| é¢„è®¾é¢œè‰²æ ·å¼ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€2ã€‘ |\n| é¢„è®¾æ¸å˜å¡«å……ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€3ã€‘ |\n| é¢„è®¾å›¾å±‚æ•ˆæœï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€4ã€‘ |\n| é¢„è®¾å›¾æ¡ˆå¡«å……ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€5ã€‘ |\n| é¢„è®¾è½®å»“çº¿ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€6ã€‘ |\n| é¢„è®¾å®šåˆ¶çŸ¢é‡å›¾å½¢ï¼ˆåœ¨â€œé¢„å…ˆè°ƒæ•´ç®¡ç†å™¨â€å¯¹è¯æ¡†ä¸­ï¼‰ | ã€Ctrlã€‘+ã€7ã€‘ |\n| æ‰“å¼€â€œé¢„ç½®â€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Kã€‘ |\n| æ˜¾ç¤ºæœ€åä¸€æ¬¡æ˜¾ç¤ºçš„â€œé¢„ç½®â€å¯¹è¯æ¡† | ã€Altã€‘+ã€Ctrlã€‘+ã€Kã€‘ |\n| è®¾ç½®â€œå¸¸è§„â€é€‰é¡¹(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€1ã€‘ |\n| è®¾ç½®â€œå­˜å‚¨æ–‡ä»¶â€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€2ã€‘ |\n| è®¾ç½®â€œæ˜¾ç¤ºå’Œå…‰æ ‡â€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€3ã€‘ |\n| è®¾ç½®â€œé€æ˜åŒºåŸŸä¸è‰²åŸŸâ€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€4ã€‘ |\n| è®¾ç½®â€œå•ä½ä¸æ ‡å°ºâ€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€5ã€‘ |\n| è®¾ç½®â€œå‚è€ƒçº¿ä¸ç½‘æ ¼â€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€6ã€‘ |\n| è®¾ç½®â€œå¢æ•ˆå·¥å…·ä¸æš‚å­˜ç›˜â€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€7ã€‘ |\n| è®¾ç½®â€œå†…å­˜ä¸å›¾åƒé«˜é€Ÿç¼“å­˜â€(åœ¨é¢„ç½®å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€8ã€‘ |\n\n| **å…­ã€å›¾å±‚æ“ä½œ** |  |\n| --- | --- |\n| ä»å¯¹è¯æ¡†æ–°å»ºä¸€ä¸ªå›¾å±‚ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Nã€‘ |\n| ä»¥é»˜è®¤é€‰é¡¹å»ºç«‹ä¸€ä¸ªæ–°çš„å›¾å±‚ | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€Nã€‘ |\n| é€šè¿‡æ‹·è´å»ºç«‹ä¸€ä¸ªå›¾å±‚ï¼ˆæ— å¯¹è¯æ¡†ï¼‰ | ã€Ctrlã€‘+ã€Jã€‘ |\n| ä»å¯¹è¯æ¡†å»ºç«‹ä¸€ä¸ªé€šè¿‡æ‹·è´çš„å›¾å±‚ | ã€Ctrlã€‘+ã€Altã€‘+ã€Jã€‘ |\n| é€šè¿‡å‰ªåˆ‡å»ºç«‹ä¸€ä¸ªå›¾å±‚ï¼ˆæ— å¯¹è¯æ¡†ï¼‰ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Jã€‘ |\n| ä»å¯¹è¯æ¡†å»ºç«‹ä¸€ä¸ªé€šè¿‡å‰ªåˆ‡çš„å›¾å±‚ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Altã€‘+ã€Jã€‘ |\n| ä¸å‰ä¸€å›¾å±‚ç¼–ç»„ | ã€Ctrlã€‘+ã€Gã€‘ |\n| å–æ¶ˆç¼–ç»„ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Gã€‘ |\n| å°†å½“å‰å±‚ä¸‹ç§»ä¸€å±‚ | ã€Ctrlã€‘+ã€\\[ã€‘ |\n| å°†å½“å‰å±‚ä¸Šç§»ä¸€å±‚ | ã€Ctrlã€‘+ã€\\]ã€‘ |\n| å°†å½“å‰å±‚ç§»åˆ°æœ€ä¸‹é¢ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€\\[ã€‘ |\n| å°†å½“å‰å±‚ç§»åˆ°æœ€ä¸Šé¢ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€\\]ã€‘ |\n| æ¿€æ´»ä¸‹ä¸€ä¸ªå›¾å±‚ | ã€Altã€‘+ã€\\[ã€‘ |\n| æ¿€æ´»ä¸Šä¸€ä¸ªå›¾å±‚ | ã€Altã€‘+ã€\\]ã€‘ |\n| æ¿€æ´»åº•éƒ¨å›¾å±‚ | ã€Shiftã€‘+ã€Altã€‘+ã€\\[ã€‘ |\n| æ¿€æ´»é¡¶éƒ¨å›¾å±‚ | ã€Shiftã€‘+ã€Altã€‘+ã€\\]ã€‘ |\n| å‘ä¸‹åˆå¹¶æˆ–åˆå¹¶è”æ¥å›¾å±‚ | ã€Ctrlã€‘+ã€Eã€‘ |\n| åˆå¹¶å¯è§å›¾å±‚ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Eã€‘ |\n| ç›–å°æˆ–ç›–å°è”æ¥å›¾å±‚ | ã€Ctrlã€‘+ã€Altã€‘+ã€Eã€‘ |\n| ç›–å°å¯è§å›¾å±‚ | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€Eã€‘ |\n| è°ƒæ•´å½“å‰å›¾å±‚çš„é€æ˜åº¦(å½“å‰å·¥å…·ä¸ºæ— æ•°å­—å‚æ•°çš„,å¦‚ç§»åŠ¨å·¥å…·) | ã€0ã€‘è‡³ã€9ã€‘ |\n| ä¿ç•™å½“å‰å›¾å±‚çš„é€æ˜åŒºåŸŸ(å¼€å…³) | ã€/ã€‘ |\n| ä½¿ç”¨é¢„å®šä¹‰æ•ˆæœ(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€1ã€‘ |\n| æ··åˆé€‰é¡¹(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€2ã€‘ |\n| æŠ•å½±(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€3ã€‘ |\n| å†…é˜´å½±(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€4ã€‘ |\n| å¤–å‘å…‰(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€5ã€‘ |\n| å†…å‘å…‰(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€6ã€‘ |\n| æ–œé¢å’Œæµ®é›•(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€7ã€‘ |\n| æè¾¹(åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€8ã€‘ |\n| å›¾æ¡ˆå åŠ (åœ¨â€œæ•ˆæœâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€9ã€‘ |\n\n| **ä¸ƒã€å›¾åƒè°ƒæ•´** |  |\n| --- | --- |\n| è°ƒæ•´è‰²é˜¶ | ã€Ctrlã€‘+ã€Lã€‘ |\n| è‡ªåŠ¨è°ƒæ•´è‰²é˜¶ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Lã€‘ |\n| è‡ªåŠ¨è°ƒæ•´å¯¹æ¯”åº¦ | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€Lã€‘ |\n| æ‰“å¼€æ›²çº¿è°ƒæ•´å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Mã€‘ |\n| åœ¨æ‰€é€‰é€šé“çš„æ›²çº¿ä¸Šæ·»åŠ æ–°çš„ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | åœ¨å›¾è±¡ä¸­ã€Ctrlã€‘åŠ ç‚¹æŒ‰ |\n| åœ¨å¤åˆæ›²çº¿ä»¥å¤–çš„æ‰€æœ‰æ›²çº¿ä¸Šæ·»åŠ æ–°çš„ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€Shiftã€‘åŠ ç‚¹æŒ‰ |\n| ç§»åŠ¨æ‰€é€‰ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€â†‘ã€‘/ã€â†“ã€‘/ã€â†ã€‘/ã€â†’ã€‘ |\n| ä»¥10ç‚¹ä¸ºå¢å¹…ç§»åŠ¨æ‰€é€‰ç‚¹ä»¥10ç‚¹ä¸ºå¢å¹…(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Shiftã€‘+ã€ç®­å¤´ã€‘ |\n| é€‰æ‹©å¤šä¸ªæ§åˆ¶ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Shiftã€‘åŠ ç‚¹æŒ‰ |\n| å‰ç§»æ§åˆ¶ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€Tabã€‘ |\n| åç§»æ§åˆ¶ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Tabã€‘ |\n| æ·»åŠ æ–°çš„ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ç‚¹æŒ‰ç½‘æ ¼ |\n| åˆ é™¤ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘åŠ ç‚¹æŒ‰ç‚¹ |\n| å–æ¶ˆé€‰æ‹©æ‰€é€‰é€šé“ä¸Šçš„æ‰€æœ‰ç‚¹(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€Dã€‘ |\n| ä½¿æ›²çº¿ç½‘æ ¼æ›´ç²¾ç»†æˆ–æ›´ç²—ç³™(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Altã€‘åŠ ç‚¹æŒ‰ç½‘æ ¼ |\n| é€‰æ‹©å½©è‰²é€šé“(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€~ã€‘ |\n| é€‰æ‹©å•è‰²é€šé“(â€˜æ›²çº¿â€™å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€æ•°å­—ã€‘ |\n| æ‰“å¼€â€œè‰²å½©å¹³è¡¡â€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Bã€‘ |\n| æ‰“å¼€â€œè‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Uã€‘ |\n| å…¨å›¾è°ƒæ•´(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€~ã€‘ |\n| åªè°ƒæ•´çº¢è‰²(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€1ã€‘ |\n| åªè°ƒæ•´é»„è‰²(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€2ã€‘ |\n| åªè°ƒæ•´ç»¿è‰²(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€3ã€‘ |\n| åªè°ƒæ•´é’è‰²(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€4ã€‘ |\n| åªè°ƒæ•´è“è‰²(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€5ã€‘ |\n| åªè°ƒæ•´æ´‹çº¢(åœ¨è‰²ç›¸/é¥±å’Œåº¦â€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€6ã€‘ |\n| å»è‰² | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Uã€‘ |\n| åç›¸ | ã€Ctrlã€‘+ã€Iã€‘ |\n| æ‰“å¼€â€œæŠ½å‡ºæ»¤é•œâ€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Altã€‘+ã€Xã€‘ |\n| è¾¹ç¼˜å¢äº®å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Bã€‘ |\n| å¡«å……å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Gã€‘ |\n| æ“¦é™¤å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Eã€‘ |\n| æ¸…é™¤å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Cã€‘ |\n| è¾¹ç¼˜ä¿®é¥°å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Tã€‘ |\n| ç¼©æ”¾å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Zã€‘ |\n| æŠ“æ‰‹å·¥å…·(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Hã€‘ |\n| æ”¹å˜æ˜¾ç¤ºæ¨¡å¼(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Fã€‘ |\n| åŠ å¤§ç”»ç¬”å¤§å°(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€\\]ã€‘ |\n| å‡å°ç”»ç¬”å¤§å°(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€\\[ã€‘ |\n| å®Œå…¨åˆ é™¤å¢äº®çº¿(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Altã€‘+ã€BackSpaceã€‘ |\n| å¢äº®æ•´ä¸ªæŠ½å–å¯¹åƒ(åœ¨â€œæŠ½å‡ºâ€å¯¹è¯æ¡†ä¸­) | ã€Ctrlã€‘+ã€BackSpaceã€‘ |\n| æ‰“å¼€â€œæ¶²åŒ–æ»¤é•œâ€å¯¹è¯æ¡† | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Xã€‘ |\n| æ‰­æ›²å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Wã€‘ |\n| é¡ºæ—¶é’ˆè½¬åŠ¨å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Rã€‘ |\n| é€†æ—¶é’ˆè½¬åŠ¨å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Lã€‘ |\n| ç¼©æ‹¢å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Pã€‘ |\n| æ‰©å¼ å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Bã€‘ |\n| åå°„å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Mã€‘ |\n| é‡æ„å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Eã€‘ |\n| å†»ç»“å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Fã€‘ |\n| è§£å†»å·¥å…·(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Tã€‘ |\n| åº”ç”¨â€œæ¶²åŒ–â€æ•ˆæœå¹¶é€€å›Photoshopä¸»ç•Œé¢(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€Enterã€‘ |\n| æ”¾å¼ƒâ€œæ¶²åŒ–â€æ•ˆæœå¹¶é€€å›Photoshopä¸»ç•Œé¢(åœ¨â€œæ¶²åŒ–â€å¯¹è¯æ¡†ä¸­) | ã€ESCã€‘ |\n\n| **å…«ã€é€‰æ‹©åŠŸèƒ½** |  |\n| --- | --- |\n| å…¨éƒ¨é€‰å– | ã€Ctrlã€‘+ã€Aã€‘ |\n| å–æ¶ˆé€‰åŒº | ã€Ctrlã€‘+ã€Dã€‘ |\n| é‡æ–°é€‰åŒº | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Dã€‘ |\n| ç¾½åŒ–é€‰åŒº | ã€Ctrlã€‘+ã€Altã€‘+ã€Dã€‘ |\n| é€‰åŒºåå‘ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Iã€‘ |\n| è½½å…¥é€‰åŒº | ã€Ctrlã€‘+ç‚¹æŒ‰å›¾å±‚ã€è·¯å¾„ã€é€šé“é¢æ¿ä¸­çš„ç¼©çº¦å›¾ |\n| æŒ‰ä¸Šæ¬¡çš„å‚æ•°å†åšä¸€æ¬¡ä¸Šæ¬¡çš„æ»¤é•œ | ã€Ctrlã€‘+ã€Fã€‘ |\n| æ¸éšä¸Šæ¬¡æ‰€åšæ»¤é•œçš„æ•ˆæœ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Fã€‘ |\n| é‡å¤ä¸Šæ¬¡æ‰€åšçš„æ»¤é•œ(å¯è°ƒå‚æ•°) | ã€Ctrlã€‘+ã€Altã€‘+ã€Fã€‘ |\n| é€‰æ‹©å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Vã€‘ |\n| ç›´æ¥é€‰æ‹©å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Aã€‘ |\n| ç«‹æ–¹ä½“å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Mã€‘ |\n| çƒä½“å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Nã€‘ |\n| æŸ±ä½“å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Cã€‘ |\n| æ·»åŠ é”šç‚¹å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€+ã€‘ |\n| å‡å°‘é”šç‚¹å·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€-ã€‘ |\n| è½¨è¿¹çƒ(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Rã€‘ |\n| å…¨æ™¯ç›¸æœºå·¥å…·(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Eã€‘ |\n| ç§»åŠ¨è§†å›¾(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Hã€‘ |\n| ç¼©æ”¾è§†å›¾(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Zã€‘ |\n| åº”ç”¨ä¸‰ç»´å˜å½¢å¹¶é€€å›åˆ°Photoshopä¸»ç•Œé¢(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Enterã€‘ |\n| æ”¾å¼ƒä¸‰ç»´å˜å½¢å¹¶é€€å›åˆ°Photoshopä¸»ç•Œé¢(åœ¨â€œ3Då˜åŒ–â€æ»¤é•œä¸­) | ã€Escã€‘ |\n\n| **ä¹ã€è§†å›¾æ“ä½œ** |  |\n| --- | --- |\n| é€‰æ‹©å½©è‰²é€šé“ | ã€Ctrlã€‘+ã€2ã€‘ |\n| é€‰æ‹©å•è‰²é€šé“ | ã€Ctrlã€‘+ã€æ•°å­—ã€‘ |\n| é€‰æ‹©å¿«é€Ÿè’™æ¿ | ã€Ctrlã€‘+ã€\\\\ã€‘ |\n| å§‹ç»ˆåœ¨è§†çª—æ˜¾ç¤ºå¤åˆé€šé“ | ã€~ã€‘ |\n| ä»¥CMYKæ–¹å¼é¢„è§ˆ(å¼€å…³) | ã€Ctrlã€‘+ã€Yã€‘ |\n| æ‰“å¼€/å…³é—­è‰²åŸŸè­¦å‘Š | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Yã€‘ |\n| æ”¾å¤§è§†å›¾ | ã€Ctrlã€‘+ã€+ã€‘ |\n| ç¼©å°è§†å›¾ | ã€Ctrlã€‘+ã€-ã€‘ |\n| æ»¡ç”»å¸ƒæ˜¾ç¤º | ã€Ctrlã€‘+ã€0ã€‘ |\n| å®é™…è±¡ç´ æ˜¾ç¤º | ã€Ctrlã€‘+ã€Altã€‘+ã€0ã€‘ |\n| å‘ä¸Šå·åŠ¨ä¸€å± | ã€PageUpã€‘ |\n| å‘ä¸‹å·åŠ¨ä¸€å± | ã€PageDownã€‘ |\n| å‘å·¦å·åŠ¨ä¸€å± | ã€Ctrlã€‘+ã€PageUpã€‘ |\n| å‘å³å·åŠ¨ä¸€å± | ã€Ctrlã€‘+ã€PageDownã€‘ |\n| å‘ä¸Šå·åŠ¨10 ä¸ªå•ä½ | ã€Shiftã€‘+ã€PageUpã€‘ |\n| å‘ä¸‹å·åŠ¨10 ä¸ªå•ä½ | ã€Shiftã€‘+ã€PageDownã€‘ |\n| å‘å·¦å·åŠ¨10 ä¸ªå•ä½ | ã€Shiftã€‘+ã€Ctrlã€‘+ã€PageUpã€‘ |\n| å‘å³å·åŠ¨10 ä¸ªå•ä½ | ã€Shiftã€‘+ã€Ctrlã€‘+ã€PageDownã€‘ |\n| å°†è§†å›¾ç§»åˆ°å·¦ä¸Šè§’ | ã€Homeã€‘ |\n| å°†è§†å›¾ç§»åˆ°å³ä¸‹è§’ | ã€Endã€‘ |\n| æ˜¾ç¤º/éšè—é€‰æ‹©åŒºåŸŸ | ã€Ctrlã€‘+ã€Hã€‘ |\n| æ˜¾ç¤º/éšè—è·¯å¾„ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Hã€‘ |\n| æ˜¾ç¤º/éšè—æ ‡å°º | ã€Ctrlã€‘+ã€Rã€‘ |\n| æ•æ‰ | ã€Ctrlã€‘+ã€;ã€‘ |\n| é”å®šå‚è€ƒçº¿ | ã€Ctrlã€‘+ã€Altã€‘+ã€;ã€‘ |\n| æ˜¾ç¤º/éšè—â€œé¢œè‰²â€é¢æ¿ | ã€F6ã€‘ |\n| æ˜¾ç¤º/éšè—â€œå›¾å±‚â€é¢æ¿ | ã€F7ã€‘ |\n| æ˜¾ç¤º/éšè—â€œä¿¡æ¯â€é¢æ¿ | ã€F8ã€‘ |\n| æ˜¾ç¤º/éšè—â€œåŠ¨ä½œâ€é¢æ¿ | ã€F9ã€‘ |\n| æ˜¾ç¤º/éšè—æ‰€æœ‰å‘½ä»¤é¢æ¿ | ã€TABã€‘ |\n| æ˜¾ç¤ºæˆ–éšè—å·¥å…·ç®±ä»¥å¤–çš„æ‰€æœ‰è°ƒæ¿ | ã€Shiftã€‘+ã€TABã€‘ |\n| æ–‡å­—å¤„ç†(åœ¨å­—ä½“ç¼–è¾‘æ¨¡å¼ä¸­) |  |\n| æ˜¾ç¤º/éšè—â€œå­—ç¬¦â€é¢æ¿ | ã€Ctrlã€‘+ã€Tã€‘ |\n| æ˜¾ç¤º/éšè—â€œæ®µè½â€é¢æ¿ | ã€Ctrlã€‘+ã€Mã€‘ |\n| å·¦å¯¹é½æˆ–é¡¶å¯¹é½ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Lã€‘ |\n| ä¸­å¯¹é½ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Cã€‘ |\n| å³å¯¹é½æˆ–åº•å¯¹é½ | ã€Ctrlã€‘+ã€Shiftã€‘+ã€Rã€‘ |\n| å·¦ï¼å³é€‰æ‹© 1 ä¸ªå­—ç¬¦ | ã€Shiftã€‘+ã€â†ã€‘/ã€â†’ã€‘ |\n| ä¸‹ï¼ä¸Šé€‰æ‹© 1 è¡Œ | ã€Shiftã€‘+ã€â†‘ã€‘/ã€â†“ã€‘ |\n| é€‰æ‹©æ‰€æœ‰å­—ç¬¦ | ã€Ctrlã€‘+ã€Aã€‘ |\n| æ˜¾ç¤º/éšè—å­—ä½“é€‰å–åº•çº¹ | ã€Ctrlã€‘+ã€Hã€‘ |\n| é€‰æ‹©ä»æ’å…¥ç‚¹åˆ°é¼ æ ‡ç‚¹æŒ‰ç‚¹çš„å­—ç¬¦ | ã€Shiftã€‘åŠ ç‚¹æŒ‰ |\n| å·¦ï¼å³ç§»åŠ¨ 1 ä¸ªå­—ç¬¦ | ã€â†ã€‘/ã€â†’ã€‘ |\n| ä¸‹ï¼ä¸Šç§»åŠ¨ 1 è¡Œ | ã€â†‘ã€‘/ã€â†“ã€‘ |\n| å·¦ï¼å³ç§»åŠ¨1ä¸ªå­— | ã€Ctrlã€‘+ã€â†ã€‘/ã€â†’ã€‘ |\n| å°†æ‰€é€‰æ–‡æœ¬çš„æ–‡å­—å¤§å°å‡å°2 ç‚¹è±¡ç´  | ã€Ctrlã€‘+ã€Shiftã€‘+ã€<ã€‘ |\n| å°†æ‰€é€‰æ–‡æœ¬çš„æ–‡å­—å¤§å°å¢å¤§2 ç‚¹è±¡ç´  | ã€Ctrlã€‘+ã€Shiftã€‘+ã€>ã€‘ |\n| å°†æ‰€é€‰æ–‡æœ¬çš„æ–‡å­—å¤§å°å‡å°10 ç‚¹è±¡ç´  | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€<ã€‘ |\n| å°†æ‰€é€‰æ–‡æœ¬çš„æ–‡å­—å¤§å°å¢å¤§10 ç‚¹è±¡ç´  | ã€Ctrlã€‘+ã€Altã€‘+ã€Shiftã€‘+ã€>ã€‘ |\n| å°†è¡Œè·å‡å°2ç‚¹è±¡ç´  | ã€Altã€‘+ã€â†“ã€‘ |\n| å°†è¡Œè·å¢å¤§2ç‚¹è±¡ç´  | ã€Altã€‘+ã€â†‘ã€‘ |\n| å°†åŸºçº¿ä½ç§»å‡å°2ç‚¹è±¡ç´  | ã€Shiftã€‘+ã€Altã€‘+ã€â†“ã€‘ |\n| å°†åŸºçº¿ä½ç§»å¢åŠ 2ç‚¹è±¡ç´  | ã€Shiftã€‘+ã€Altã€‘+ã€â†‘ã€‘ |\n| å°†å­—è·å¾®è°ƒæˆ–å­—è·è°ƒæ•´å‡å°20/1000ems | ã€Altã€‘+ã€â†ã€‘ |\n| å°†å­—è·å¾®è°ƒæˆ–å­—è·è°ƒæ•´å¢åŠ 20/1000ems | ã€Altã€‘+ã€â†’ã€‘ |\n| å°†å­—è·å¾®è°ƒæˆ–å­—è·è°ƒæ•´å‡å°100/1000ems | ã€Ctrlã€‘+ã€Altã€‘+ã€â†ã€‘ |\n| å°†å­—è·å¾®è°ƒæˆ–å­—è·è°ƒæ•´å¢åŠ 100/1000ems | ã€Ctrlã€‘+ã€Altã€‘+ã€â†’ã€‘ |\n\naa\n\n| **åã€å›¾å±‚æ··åˆæ¨¡å¼** |  |\n| --- | --- |\n| å¾ªç¯é€‰æ‹©æ··åˆæ¨¡å¼ | ã€Shiftã€‘+ã€-ã€‘æˆ–ã€+ã€‘ |\n| æ­£å¸¸ | ã€Shiftã€‘+ã€Altã€‘+ã€Nã€‘ |\n| æº¶è§£ | ã€Shiftã€‘+ã€Altã€‘+ã€Iã€‘ |\n| å˜æš— | ã€Shiftã€‘+ã€Altã€‘+ã€Kã€‘ |\n| æ­£ç‰‡å åº• | ã€Shiftã€‘+ã€Altã€‘+ã€Mã€‘ |\n| é¢œè‰²åŠ æ·± | ã€Shiftã€‘+ã€Altã€‘+ã€Bã€‘ |\n| çº¿æ€§åŠ æ·± | ã€Shiftã€‘+ã€Altã€‘+ã€Aã€‘ |\n| å˜äº® | ã€Shiftã€‘+ã€Altã€‘+ã€Gã€‘ |\n| æ»¤è‰² | ã€Shiftã€‘+ã€Altã€‘+ã€Sã€‘ |\n| é¢œè‰²å‡æ·¡ | ã€Shiftã€‘+ã€Altã€‘+ã€Dã€‘ |\n| çº¿æ€§å‡æ·¡ | ã€Shiftã€‘+ã€Altã€‘+ã€Wã€‘ |\n| å åŠ  | ã€Shiftã€‘+ã€Altã€‘+ã€Oã€‘ |\n| æŸ”å…‰ | ã€Shiftã€‘+ã€Altã€‘+ã€Fã€‘ |\n| å¼ºå…‰ | ã€Shiftã€‘+ã€Altã€‘+ã€Hã€‘ |\n| äº®å…‰ | ã€Shiftã€‘+ã€Altã€‘+ã€Vã€‘ |\n| çº¿æ€§å…‰ | ã€Shiftã€‘+ã€Altã€‘+ã€Jã€‘ |\n| ç‚¹å…‰ | ã€Shiftã€‘+ã€Altã€‘+ã€Zã€‘ |\n| å®è‰²æ··åˆ | ã€Shiftã€‘+ã€Altã€‘+ã€Lã€‘ |\n| å·®å€¼ | ã€Shiftã€‘+ã€Altã€‘+ã€Eã€‘ |\n| æ’é™¤ | ã€Shiftã€‘+ã€Altã€‘+ã€Xã€‘ |\n| è‰²ç›¸ | ã€Shiftã€‘+ã€Altã€‘+ã€Uã€‘ |\n| é¥±å’Œåº¦ | ã€Shiftã€‘+ã€Altã€‘+ã€Tã€‘ |\n| é¢œè‰² | ã€Shiftã€‘+ã€Altã€‘+ã€Cã€‘ |\n| æ˜åº¦ | ã€Shiftã€‘+ã€Altã€‘+ã€Yã€‘ |\n\nå‚è€ƒç½‘ç«™ï¼š[PSæ–°æ‰‹è‡ªå­¦è§†é¢‘æ•™ç¨‹ï¼ŒPSè‡ªå­¦è§†é¢‘æ•™ç¨‹](http://www.240ps.com/jc/xinshouzixue.asp)\n","tags":["ps"],"categories":["å…¶ä»–"]},{"title":"postman:APIæ¥å£è°ƒè¯•å™¨","url":"/2022/06/01/postmanapiæ¥å£è°ƒè¯•å™¨/","content":"\n## å®‰è£…\n\n- ä¸‹è½½åœ°å€ï¼šhttps://www.getpostman.com/downloads/\n- ä¸‹è½½å®Œå®‰è£…åŒ…åç›´æ¥åŒå‡»å®‰è£…å³å¯ã€‚\n\n## è®¾ç½®\n\n### ä¸»é¢˜è®¾ç½®\n\nè¿™é‡Œä¸å¾—ä¸è¯´ï¼ŒPostmançš„ç•Œé¢è¿˜æ˜¯åšçš„å¾ˆå¥½çš„ï¼Œæ¯”èµ·Swaggeræ¥è¯´å¥½å¤šäº†ï¼ŒPostmané»˜è®¤æä¾›äº†ä¸¤ç§ä¸»é¢˜ï¼Œä¸€ç§äº®è‰²å’Œä¸€ç§æš—è‰²ï¼Œå¯ä»¥é€šè¿‡å·¦ä¸Šè§’çš„File->SettingsæŒ‰é’®æ‰“å¼€ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_01.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_02.png)\n\n### è°ƒæ•´å­—ä½“å¤§å°\n\nå¯èƒ½ç•Œé¢é»˜è®¤çš„å­—ä½“å¤§å°å¹¶ä¸é€‚åˆä½ ï¼Œå°¤å…¶æ˜¯å¤§å±å¹•çš„ç”µè„‘ï¼Œå¯ä»¥åœ¨Viewä¸‹çš„Zoom Inå’ŒZoom OutæŒ‰é’®è¿›è¡Œæ”¾å¤§å’Œç¼©å°ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_03.png)\n\n## è¿›è¡Œæ¥å£è°ƒè¯•\n\n> æµ‹è¯•æ¥å£å‡æ¥è‡ªmall-adminåå°ï¼Œå¯åŠ¨åå¯ä»¥ç›´æ¥æµ‹è¯•ã€‚\n\n### è°ƒç”¨GETè¯·æ±‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_04.png)\n\n### è°ƒç”¨POSTè¯·æ±‚æäº¤JSONæ ¼å¼æ•°æ®\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_05.png)\n\n### è°ƒç”¨POSTè¯·æ±‚æäº¤è¡¨å•\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_06.png)\n\n### è°ƒç”¨æ–‡ä»¶ä¸Šä¼ æ¥å£\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_07.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_08.png)\n\n### è°ƒç”¨éœ€è¦ç™»å½•çš„æ¥å£\n\n### è°ƒç”¨ç™»å½•æ¥å£è·å–ä»¤ç‰Œ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_09.png)\n\n### è®¾ç½®ä»¤ç‰Œå¤´å¹¶è°ƒç”¨éœ€è¦ç™»å½•çš„æ¥å£\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_10.png)\n\n## è°ƒè¯•æ–‡ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º\n\n### å°†è°ƒè¯•æ¥å£ä¿¡æ¯è¿›è¡Œä¿å­˜\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_12.png)\n\n### å¯¼å‡ºCollectionä¸­çš„è°ƒè¯•ä¿¡æ¯\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_17.png)\n\n### å¯¼å…¥Collectionä¸­çš„è°ƒè¯•ä¿¡æ¯\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_18.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_19.png)\n\n## ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›æŠ€å·§\n\n### è®¾ç½®ä¸åŒçš„ç¯å¢ƒ\n\næˆ‘ä»¬å¼€å‘æ—¶ï¼Œéƒ½ä¼šåˆ†æœ¬åœ°ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒï¼Œæœ¬åœ°ç¯å¢ƒç”¨äºæœ¬æœºè°ƒè¯•æ¥å£ï¼Œæµ‹è¯•ç¯å¢ƒç”¨äºå‰åç«¯è”è°ƒæ¥å£ã€‚ä¸Šé¢æˆ‘ä»¬æŠŠ[http://localhost:8080](http://localhost:8080)è¿™ä¸ªipç«¯å£ç›´æ¥å†™åœ¨è¯·æ±‚è·¯å¾„ä¹‹ä¸­ï¼Œå½“æˆ‘ä»¬è¦è°ƒè¯•æµ‹è¯•ç¯å¢ƒæ¥å£æ—¶ï¼Œå°±ä¼šäº§ç”Ÿéº»çƒ¦ã€‚å®šä¹‰å¤šä¸ªç¯å¢ƒå˜é‡ï¼Œåœ¨æ¥å£åœ°å€ä¸­è¿›è¡Œå¼•ç”¨ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n#### æ·»åŠ æœ¬åœ°ç¯å¢ƒ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_13.png)\n\n#### æ·»åŠ æµ‹è¯•ç¯å¢ƒ\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_14.png)\n\n#### å¼•ç”¨ç¯å¢ƒå˜é‡\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_15.png)\n\n#### ç¯å¢ƒå˜é‡çš„åˆ‡æ¢\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_16.png)\n\n### è®¾ç½®é€šç”¨çš„ç™»å½•ä»¤ç‰Œ\n\nå½“æˆ‘ä»¬æœ‰å¾ˆå¤šæ¥å£éœ€è¦ç™»å½•ä»¤ç‰Œå¤´æ—¶ï¼Œå¦‚æœä»¥å‰ä½¿ç”¨çš„ä»¤ç‰Œå¤±æ•ˆäº†ï¼Œé‚£æ‰€æœ‰æ¥å£çš„ä»¤ç‰Œå¤´éƒ½ä¼šéœ€è¦ä¿®æ”¹ï¼Œè¿™é‡Œå¯ä»¥æŠŠç™»å½•ä»¤ç‰Œå®šä¹‰å¥½ï¼Œå†å¼•ç”¨ï¼Œè¿™æ ·ä»¤ç‰Œå¤±æ•ˆäº†ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€å¤„å³å¯ã€‚\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_20.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/postman_screen_21.png)\n","tags":["api"],"categories":["å·¥å…·"]},{"title":"Serializableå¯¹è±¡åºåˆ—åŒ–","url":"/2022/06/01/serializableå¯¹è±¡åºåˆ—åŒ–/","content":"\n### [åºåˆ—åŒ–](https://so.csdn.net/so/search?q=åºåˆ—åŒ–&spm=1001.2101.3001.7020)\n\næŸ¥çœ‹ [å®˜æ–¹æ–‡æ¡£](http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html) å°±ä¼šå‘ç° [Serializable](https://so.csdn.net/so/search?q=Serializable&spm=1001.2101.3001.7020)æ¥å£ä¸­ä¸€ä¸ªæˆå‘˜å‡½æ•°æˆ–è€…æˆå‘˜å˜é‡ä¹Ÿæ²¡æœ‰ã€‚é‚£ä¹ˆè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ã€‚ç½‘ä¸Šæ‰¾äº†ä¸€äº›åšå®¢çœ‹è¿‡ä¹‹åï¼ŒçŸ¥é“è¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å®ç°åºåˆ—åŒ–ã€‚\n\nåºåˆ—åŒ–ï¼šå¯¹è±¡çš„å¯¿å‘½é€šå¸¸éšç€ç”Ÿæˆè¯¥å¯¹è±¡çš„ç¨‹åºçš„ç»ˆæ­¢è€Œç»ˆæ­¢ï¼Œæœ‰æ—¶å€™éœ€è¦æŠŠåœ¨å†…å­˜ä¸­çš„å„ç§å¯¹è±¡çš„çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹å˜é‡ï¼Œä¸æ˜¯æ–¹æ³•ï¼‰ä¿å­˜ä¸‹æ¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨éœ€è¦æ—¶å†å°†å¯¹è±¡æ¢å¤ã€‚è™½ç„¶ä½ å¯ä»¥ç”¨ä½ è‡ªå·±çš„å„ç§å„æ ·çš„æ–¹æ³•æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä½†æ˜¯Javaç»™ä½ æä¾›ä¸€ç§åº”è¯¥æ¯”ä½ è‡ªå·±çš„å¥½çš„ä¿å­˜å¯¹è±¡çŠ¶æ€çš„æœºåˆ¶ï¼Œé‚£å°±æ˜¯åºåˆ—åŒ–ã€‚\n\næ€»ç»“ï¼šJava åºåˆ—åŒ–æŠ€æœ¯å¯ä»¥ä½¿ä½ å°†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å†™å…¥ä¸€ä¸ªByte æµé‡Œï¼ˆç³»åˆ—åŒ–ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥ä»å…¶å®ƒåœ°æ–¹æŠŠè¯¥Byte æµé‡Œçš„æ•°æ®è¯»å‡ºæ¥ï¼ˆååºåˆ—åŒ–ï¼‰ã€‚\n\n## ç³»åˆ—åŒ–çš„ç”¨é€”\n\n- æƒ³æŠŠçš„å†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–è€…æ•°æ®åº“ä¸­æ—¶å€™\n- æƒ³æŠŠå¯¹è±¡é€šè¿‡ç½‘ç»œè¿›è¡Œä¼ æ’­çš„æ—¶å€™\n\n## å¦‚ä½•åºåˆ—åŒ–\n\nåªè¦ä¸€ä¸ªç±»å®ç°Serializableæ¥å£ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±å¯ä»¥åºåˆ—åŒ–äº†ã€‚\n\nä¾‹å¦‚æœ‰ä¸€ä¸ª Personç±»ï¼Œå®ç°äº†Serializableæ¥å£ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±å¯ä»¥è¢«åºåˆ—åŒ–äº†ã€‚\n\n```\nclass Person implements Serializable{   \n    private static final long serialVersionUID = 1L; //ä¸€ä¼šå°±è¯´è¿™ä¸ªæ˜¯åšä»€ä¹ˆçš„\n    String name;\n    int age;\n    public Person(String name,int age){\n        this.name = name;\n        this.age = age;\n    }   \n    public String toString(){\n        return \"name:\"+name+\"\\tage:\"+age;\n    }\n}\n```\n\né€šè¿‡ObjectOutputStream çš„writeObject()æ–¹æ³•æŠŠè¿™ä¸ªç±»çš„å¯¹è±¡å†™åˆ°ä¸€ä¸ªåœ°æ–¹ï¼ˆæ–‡ä»¶ï¼‰ï¼Œå†é€šè¿‡ObjectInputStream çš„readObject()æ–¹æ³•æŠŠè¿™ä¸ªå¯¹è±¡è¯»å‡ºæ¥ã€‚\n\n```\n    File file = new File(\"file\"+File.separator+\"out.txt\");\n\n    FileOutputStream fos = null;\n\n    try {\n        fos = new FileOutputStream(file);\n        ObjectOutputStream oos = null;\n        try {\n            oos = new ObjectOutputStream(fos);\n            Person person = new Person(\"tom\", 22);\n            System.out.println(person);\n            oos.writeObject(person);            //å†™å…¥å¯¹è±¡\n            oos.flush();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }finally{\n            try {\n                oos.close();\n            } catch (IOException e) {\n                System.out.println(\"ooså…³é—­å¤±è´¥ï¼š\"+e.getMessage());\n            }\n        }\n    } catch (FileNotFoundException e) {\n        System.out.println(\"æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š\"+e.getMessage());\n    } finally{\n        try {\n            fos.close();\n        } catch (IOException e) {\n            System.out.println(\"foså…³é—­å¤±è´¥ï¼š\"+e.getMessage());\n        }\n    }\n\n    FileInputStream fis = null;\n    try {\n        fis = new FileInputStream(file);\n        ObjectInputStream ois = null;\n        try {\n            ois = new ObjectInputStream(fis);\n            try {\n                Person person = (Person)ois.readObject();   //è¯»å‡ºå¯¹è±¡\n                System.out.println(person);\n            } catch (ClassNotFoundException e) {\n                e.printStackTrace();\n            } \n        } catch (IOException e) {\n            e.printStackTrace();\n        }finally{\n            try {\n                ois.close();\n            } catch (IOException e) {\n                System.out.println(\"oiså…³é—­å¤±è´¥ï¼š\"+e.getMessage());\n            }\n        }\n    } catch (FileNotFoundException e) {\n        System.out.println(\"æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š\"+e.getMessage());\n    } finally{\n        try {\n            fis.close();\n        } catch (IOException e) {\n            System.out.println(\"fiså…³é—­å¤±è´¥ï¼š\"+e.getMessage());\n        }\n    }\n```\n\nè¾“å‡ºç»“æœä¸ºï¼š\n\n```\nname:tom    age:22\nname:tom    age:22\n```\n\nç»“æœå®Œå…¨ä¸€æ ·ã€‚å¦‚æœæˆ‘æŠŠPersonç±»ä¸­çš„implements Serializable å»æ‰ï¼ŒPersonç±»å°±ä¸èƒ½åºåˆ—åŒ–äº†ã€‚æ­¤æ—¶å†è¿è¡Œä¸Šè¿°ç¨‹åºï¼Œå°±ä¼šæŠ¥java.io.NotSerializableExceptionå¼‚å¸¸ã€‚\n\n### serialVersionUID\n\næ³¨æ„åˆ°ä¸Šé¢ç¨‹åºä¸­æœ‰ä¸€ä¸ª serialVersionUID ï¼Œå®ç°äº†Serializableæ¥å£ä¹‹åï¼ŒEclipseå°±ä¼šæç¤ºä½ å¢åŠ ä¸€ä¸ª serialVersionUIDï¼Œè™½ç„¶ä¸åŠ çš„è¯ä¸Šè¿°ç¨‹åºä¾ç„¶èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚\n\nåºåˆ—åŒ– ID åœ¨ Eclipse ä¸‹æä¾›äº†ä¸¤ç§ç”Ÿæˆç­–ç•¥\n\n- ä¸€ä¸ªæ˜¯å›ºå®šçš„ 1L\n- ä¸€ä¸ªæ˜¯éšæœºç”Ÿæˆä¸€ä¸ªä¸é‡å¤çš„ long ç±»å‹æ•°æ®ï¼ˆå®é™…ä¸Šæ˜¯ä½¿ç”¨ JDK å·¥å…·ï¼Œæ ¹æ®ç±»åã€æ¥å£åã€æˆå‘˜æ–¹æ³•åŠå±æ€§ç­‰æ¥ç”Ÿæˆï¼‰\n\nä¸Šé¢ç¨‹åºä¸­ï¼Œè¾“å‡ºå¯¹è±¡å’Œè¯»å…¥å¯¹è±¡ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªPersonç±»ã€‚\n\nå¦‚æœæ˜¯é€šè¿‡ç½‘ç»œä¼ è¾“çš„è¯ï¼Œå¦‚æœPersonç±»çš„serialVersionUIDä¸ä¸€è‡´ï¼Œé‚£ä¹ˆååºåˆ—åŒ–å°±ä¸èƒ½æ­£å¸¸è¿›è¡Œã€‚ä¾‹å¦‚åœ¨å®¢æˆ·ç«¯Aä¸­Personç±»çš„serialVersionUID=1Lï¼Œè€Œåœ¨å®¢æˆ·ç«¯Bä¸­Personç±»çš„serialVersionUID=2L é‚£ä¹ˆå°±ä¸èƒ½é‡æ„è¿™ä¸ªPersonå¯¹è±¡ã€‚\n\nå®¢æˆ·ç«¯Aä¸­çš„Personç±»ï¼š\n\n```\nclass Person implements Serializable{   \n\n    private static final long serialVersionUID = 1L;\n\n    String name;\n    int age;\n\n    public Person(String name,int age){\n        this.name = name;\n        this.age = age;\n    }   \n    public String toString(){\n        return \"name:\"+name+\"\\tage:\"+age;\n    }\n}\n```\n\nå®¢æˆ·ç«¯Bä¸­çš„Personç±»ï¼š\n\n```\nclass Person implements Serializable{   \n\n    private static final long serialVersionUID = 2L;\n\n    String name;\n    int age;\n\n    public Person(String name,int age){\n        this.name = name;\n        this.age = age;\n    }   \n    public String toString(){\n        return \"name:\"+name+\"\\tage:\"+age;\n    }\n}\n```\n\nè¯•å›¾é‡æ„å°±ä¼šæŠ¥java.io.InvalidClassExceptionå¼‚å¸¸ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç±»çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œlocal class incompatibleï¼Œé‡æ„å°±ä¼šå‡ºç°é”™è¯¯ã€‚\n\nå¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„è¯ï¼Œä½¿ç”¨ç”¨é»˜è®¤çš„ 1L å°±å¯ä»¥ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä»£ç ä¸€è‡´æ—¶ååºåˆ—åŒ–æˆåŠŸã€‚é‚£ä¹ˆéšæœºç”Ÿæˆçš„åºåˆ—åŒ– ID æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Œæœ‰äº›æ—¶å€™ï¼Œé€šè¿‡æ”¹å˜åºåˆ—åŒ– ID å¯ä»¥ç”¨æ¥é™åˆ¶æŸäº›ç”¨æˆ·çš„ä½¿ç”¨ã€‚\n\n### é™æ€å˜é‡åºåˆ—åŒ–\n\nä¸²è¡ŒåŒ–åªèƒ½ä¿å­˜å¯¹è±¡çš„éé™æ€æˆå‘˜äº¤é‡ï¼Œä¸èƒ½ä¿å­˜ä»»ä½•çš„æˆå‘˜æ–¹æ³•å’Œé™æ€çš„æˆå‘˜å˜é‡ï¼Œè€Œä¸”ä¸²è¡ŒåŒ–ä¿å­˜çš„åªæ˜¯å˜é‡çš„å€¼ï¼Œå¯¹äºå˜é‡çš„ä»»ä½•ä¿®é¥°ç¬¦éƒ½ä¸èƒ½ä¿å­˜ã€‚\n\nå¦‚æœæŠŠPersonç±»ä¸­çš„nameå®šä¹‰ä¸ºstaticç±»å‹çš„è¯ï¼Œè¯•å›¾é‡æ„ï¼Œå°±ä¸èƒ½å¾—åˆ°åŸæ¥çš„å€¼ï¼Œåªèƒ½å¾—åˆ°nullã€‚è¯´æ˜å¯¹é™æ€æˆå‘˜å˜é‡å€¼æ˜¯ä¸ä¿å­˜çš„ã€‚è¿™å…¶å®æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œ**åºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çš„çŠ¶æ€ï¼Œé™æ€å˜é‡å±äºç±»çš„çŠ¶æ€**ï¼Œå› æ­¤ åºåˆ—åŒ–å¹¶ä¸ä¿å­˜é™æ€å˜é‡ã€‚\n\n### transientå…³é”®å­—\n\nç»å¸¸åœ¨å®ç°äº† Serializableæ¥å£çš„ç±»ä¸­èƒ½çœ‹è§transientå…³é”®å­—ã€‚è¿™ä¸ªå…³é”®å­—å¹¶ä¸å¸¸è§ã€‚ transientå…³é”®å­—çš„ä½œç”¨æ˜¯ï¼šé˜»æ­¢å®ä¾‹ä¸­é‚£äº›ç”¨æ­¤å…³é”®å­—å£°æ˜çš„å˜é‡æŒä¹…åŒ–ï¼›å½“å¯¹è±¡è¢«ååºåˆ—åŒ–æ—¶ï¼ˆä»æºæ–‡ä»¶è¯»å–å­—èŠ‚åºåˆ—è¿›è¡Œé‡æ„ï¼‰ï¼Œè¿™æ ·çš„å®ä¾‹å˜é‡å€¼ä¸ä¼šè¢«æŒä¹…åŒ–å’Œæ¢å¤ã€‚\n\nå½“æŸäº›å˜é‡ä¸æƒ³è¢«åºåˆ—åŒ–ï¼ŒåŒæ˜¯åˆä¸é€‚åˆä½¿ç”¨staticå…³é”®å­—å£°æ˜ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦ç”¨transientå…³é”®å­—æ¥å£°æ˜è¯¥å˜é‡ã€‚\n\nä¾‹å¦‚ç”¨ transientå…³é”®å­— ä¿®é¥°nameå˜é‡\n\n```\nclass Person implements Serializable{   \n\n    private static final long serialVersionUID = 1L;\n\n    transient String name;\n    int age;\n\n    public Person(String name,int age){\n        this.name = name;\n        this.age = age;\n    }   \n    public String toString(){\n        return \"name:\"+name+\"\\tage:\"+age;\n    }\n}\n```\n\nåœ¨ååºåˆ—åŒ–è§†å›¾é‡æ„å¯¹è±¡çš„æ—¶å€™ï¼Œä½œç”¨ä¸staticå˜é‡ä¸€æ ·ï¼š è¾“å‡ºç»“æœä¸ºï¼š\n\n```\nname:null   age:22\n```\n\n**åœ¨è¢«ååºåˆ—åŒ–åï¼Œtransient å˜é‡çš„å€¼è¢«è®¾ä¸ºåˆå§‹å€¼ï¼Œå¦‚ int å‹çš„æ˜¯ 0ï¼Œå¯¹è±¡å‹çš„æ˜¯ nullã€‚**\n\næ³¨ï¼šå¯¹äºæŸäº›ç±»å‹çš„å±æ€§ï¼Œå…¶çŠ¶æ€æ˜¯ç¬æ—¶çš„ï¼Œè¿™æ ·çš„å±æ€§æ˜¯æ— æ³•ä¿å­˜å…¶çŠ¶æ€çš„ã€‚ä¾‹å¦‚ä¸€ä¸ªçº¿ç¨‹å±æ€§æˆ–éœ€è¦è®¿é—®IOã€æœ¬åœ°èµ„æºã€ç½‘ç»œèµ„æºç­‰çš„å±æ€§ï¼Œå¯¹äºè¿™äº›å­—æ®µï¼Œæˆ‘ä»¬å¿…é¡»ç”¨transientå…³é”®å­—æ ‡æ˜ï¼Œå¦åˆ™ç¼–è¯‘å™¨å°†æŠ¥æªã€‚\n\n### åºåˆ—åŒ–ä¸­çš„ç»§æ‰¿é—®é¢˜\n\n- **å½“ä¸€ä¸ªçˆ¶ç±»å®ç°åºåˆ—åŒ–ï¼Œå­ç±»è‡ªåŠ¨å®ç°åºåˆ—åŒ–ï¼Œä¸éœ€è¦æ˜¾å¼å®ç°Serializableæ¥å£ã€‚**\n- ä¸€ä¸ªå­ç±»å®ç°äº† Serializable æ¥å£ï¼Œå®ƒçš„çˆ¶ç±»éƒ½æ²¡æœ‰å®ç° Serializable æ¥å£ï¼Œè¦æƒ³å°†çˆ¶ç±»å¯¹è±¡ä¹Ÿåºåˆ—åŒ–ï¼Œå°±éœ€è¦è®©çˆ¶ç±»ä¹Ÿå®ç°Serializable æ¥å£ã€‚\n\nç¬¬äºŒç§æƒ…å†µä¸­ï¼šå¦‚æœçˆ¶ç±»ä¸å®ç° Serializableæ¥å£çš„è¯ï¼Œå°±éœ€è¦æœ‰é»˜è®¤çš„æ— å‚çš„æ„é€ å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºä¸€ä¸ª Java å¯¹è±¡çš„æ„é€ å¿…é¡»å…ˆæœ‰çˆ¶å¯¹è±¡ï¼Œæ‰æœ‰å­å¯¹è±¡ï¼Œååºåˆ—åŒ–ä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨ååºåˆ—åŒ–æ—¶ï¼Œä¸ºäº†æ„é€ çˆ¶å¯¹è±¡ï¼Œåªèƒ½è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•°ä½œä¸ºé»˜è®¤çš„çˆ¶å¯¹è±¡ã€‚å› æ­¤å½“æˆ‘ä»¬å–çˆ¶å¯¹è±¡çš„å˜é‡å€¼æ—¶ï¼Œå®ƒçš„å€¼æ˜¯è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°åçš„å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨åºåˆ—åŒ–æ—¶æ ¹æ®éœ€è¦åœ¨çˆ¶ç±»æ— å‚æ„é€ å‡½æ•°ä¸­å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™çš„è¯ï¼Œçˆ¶ç±»å˜é‡å€¼éƒ½æ˜¯é»˜è®¤å£°æ˜çš„å€¼ï¼Œå¦‚ int å‹çš„é»˜è®¤æ˜¯ 0ï¼Œstring å‹çš„é»˜è®¤æ˜¯ nullã€‚\n\nä¾‹å¦‚ï¼š\n\n```\nclass People{\n    int num;\n    public People(){}           //é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–\n    public People(int num){     //æœ‰å‚æ„é€ å‡½æ•°\n        this.num = num;\n    }\n    public String toString(){\n        return \"num:\"+num;\n    }\n}\nclass Person extends People implements Serializable{    \n\n    private static final long serialVersionUID = 1L;\n\n    String name;\n    int age;\n\n    public Person(int num,String name,int age){\n        super(num);             //è°ƒç”¨çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°\n        this.name = name;\n        this.age = age;\n    }\n    public String toString(){\n        return super.toString()+\"\\tname:\"+name+\"\\tage:\"+age;\n    }\n}\n```\n\nåœ¨ä¸€ç«¯å†™å‡ºå¯¹è±¡çš„æ—¶å€™\n\n```\n    Person person = new Person(10,\"tom\", 22); //è°ƒç”¨å¸¦å‚æ•°çš„æ„é€ å‡½æ•°num=10,name = \"tim\",age =22\n    System.out.println(person);\n    oos.writeObject(person);                  //å†™å‡ºå¯¹è±¡\n```\n\nåœ¨å¦ä¸€ç«¯è¯»å‡ºå¯¹è±¡çš„æ—¶å€™\n\n```\n    Person person = (Person)ois.readObject(); //ååºåˆ—åŒ–ï¼Œè°ƒç”¨çˆ¶ç±»ä¸­çš„æ— å‚æ„å‡½æ•°ã€‚\n    System.out.println(person);\n```\n\nè¾“å‡ºä¸º\n\n```\n    num:0   name:tom    age:22\n```\n\nå‘ç°ç”±äºçˆ¶ç±»ä¸­æ— å‚æ„é€ å‡½æ•°å¹¶æ²¡æœ‰å¯¹numåˆå§‹åŒ–ï¼Œæ‰€ä»¥numä½¿ç”¨é»˜è®¤å€¼ä¸º0ã€‚\n\n## æ€»ç»“\n\nåºåˆ—åŒ–ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æŠ€æœ¯ï¼Œç”¨äºä¿å­˜å¯¹è±¡çš„å˜é‡ã€‚ä»¥ä¾¿äºä¼ è¾“ã€‚è™½ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„ä¸€äº›æ–¹æ³•å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯javaç»™æˆ‘ä»¬æä¾›çš„æ–¹æ³•ä½¿ç”¨èµ·æ¥æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚\n","tags":["java"],"categories":["javaå…¨æ ˆ"]},{"title":"SpringBootå­¦ä¹ ","url":"/2022/06/01/springbootå­¦ä¹ /","content":"\n### SpringBootæ˜¯ä»€ä¹ˆï¼Ÿ[#](http://c.biancheng.net/spring_boot/)\n\nä¸Šé¢å¼•ç”¨äº†å…¶ä»–çš„æ•™ç¨‹\n\n**è¿™æ˜¯æˆ‘çš„SpringBootçš„å­¦ä¹ æ€è€ƒ**\n\nåˆšå¼€å§‹å­¦ä¹ SpringBootå…ˆå¼€å¯ä¸€ä¸ªMavené¡¹ç›®å¸®åŠ©ç†è§£\n\nè¿™æ˜¯Helloworldçš„ç›®å½•ç»“æ„\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220509152524282.png)\n\nç°åœ¨å…ˆå¼€å§‹ä¸€ä¸ªHelloworld\n\n```\n@SpringBootApplication\npublic class MainApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MainApplication.class,args);\n    }\n}\n```\n\nController\n\n```\n@RestController\npublic class HelloController {\n    @RequestMapping(\"/hello\")\n    public String handle01(){\n        return \"Hello, Spring Boot 2!\";\n    }\n\n}\n```\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>org.example</groupId>\n    <artifactId>springboot</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <maven.compiler.source>8</maven.compiler.source>\n        <maven.compiler.target>8</maven.compiler.target>\n        <!--ä¾‹å¦‚-->\n        <mysql.version>5.1</mysql.version>\n    </properties>\n\n    <!--çˆ¶é¡¹ç›®åšä¾èµ–ç®¡ç†ï¼Œåé¢çš„ä¾èµ–éƒ½ä¸éœ€è¦å†™ç‰ˆæœ¬å·ï¼Œå› ä¸ºå·²ç»è‡ªåŠ¨é…ç½®-->\n    <!--æƒ³è¦è‡ªå®šä¹‰ç‰ˆæœ¬å·ï¼Œåªéœ€è¦åœ¨porpertiesé‡Œé‡æ–°æ·»åŠ ï¼Œä¸Šé¢æœ‰ä¾‹å­-->\n    <parent>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <groupId>org.springframework.boot</groupId>\n        <version>2.5.8</version>\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n    </dependencies>\n\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n```\n\nç°åœ¨æ˜¯å¯ä»¥è¿è¡Œçš„äº†ï¼Œç«¯å£å·8080.\n\nç°åœ¨æ¼”ç¤ºå¦‚ä½•è¿›è¡Œæ‰“åŒ…packageå‘½ä»¤  \n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220509152906773.png)\n\nç›´æ¥æ‰§è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªjaråŒ…\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220509153010400.png)\n\nç›´æ¥åœ¨cmdä¸­å°±å¯ä»¥ç›´æ¥è¿è¡Œè¿™ä¸ªjaråŒ…\n\n```\njava -jar springboot-1.0-SNAPSHOT.jar\n```\n\nè¿™å°±æ˜¯ç®€åŒ–éƒ¨ç½²ï¼Œç›´æ¥åœ¨ç›®æ ‡æœåŠ¡å™¨æ‰§è¡Œå°±è¡Œã€‚\n","tags":["springboot"],"categories":["javaå…¨æ ˆ"]},{"title":"SpringBooté¡¹ç›®å®æˆ˜","url":"/2022/06/01/springbooté¡¹ç›®å®æˆ˜/","content":"\n### mallæ•´åˆSpringBoot+MyBatisæ­å»ºåŸºæœ¬éª¨æ¶\n\næœ¬æ–‡ä¸»è¦è®²è§£mallæ•´åˆSpringBoot+MyBatisæ­å»ºåŸºæœ¬éª¨æ¶ï¼Œä»¥å•†å“å“ç‰Œä¸ºä¾‹å®ç°åŸºæœ¬çš„CRUDæ“ä½œåŠé€šè¿‡PageHelperå®ç°åˆ†é¡µæŸ¥è¯¢ã€‚\n\n## [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#mysqlæ•°æ®åº“ç¯å¢ƒæ­å»º)mysqlæ•°æ®åº“ç¯å¢ƒæ­å»º\n\n- ä¸‹è½½å¹¶å®‰è£…mysql5.7ç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/installer/\n- è®¾ç½®æ•°æ®åº“å¸å·å¯†ç ï¼šroot root\n- ä¸‹è½½å¹¶å®‰è£…å®¢æˆ·ç«¯è¿æ¥å·¥å…·Navicat,ä¸‹è½½åœ°å€ï¼šhttp://www.formysql.com/xiazai.html\n- åˆ›å»ºæ•°æ®åº“mall\n- å¯¼å…¥mallçš„æ•°æ®åº“è„šæœ¬ï¼Œè„šæœ¬åœ°å€ï¼šhttps://github.com/macrozheng/mall-learning/blob/master/document/sql/mall.sql\n\n## [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#é¡¹ç›®ä½¿ç”¨æ¡†æ¶ä»‹ç»)é¡¹ç›®ä½¿ç”¨æ¡†æ¶ä»‹ç»\n\n### [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#springboot)SpringBoot\n\n> SpringBootå¯ä»¥è®©ä½ å¿«é€Ÿæ„å»ºåŸºäºSpringçš„Webåº”ç”¨ç¨‹åºï¼Œå†…ç½®å¤šç§Webå®¹å™¨(å¦‚Tomcat)ï¼Œé€šè¿‡å¯åŠ¨å…¥å£ç¨‹åºçš„mainå‡½æ•°å³å¯è¿è¡Œã€‚\n\n### [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#pagerhelper)PagerHelper\n\n> MyBatisåˆ†é¡µæ’ä»¶ï¼Œç®€å•çš„å‡ è¡Œä»£ç å°±èƒ½å®ç°åˆ†é¡µï¼Œåœ¨ä¸SpringBootæ•´åˆæ—¶ï¼Œåªè¦æ•´åˆäº†PagerHelperå°±è‡ªåŠ¨æ•´åˆäº†MyBatisã€‚\n\n```\nPageHelper.startPage(pageNum, pageSize);\n//ä¹‹åè¿›è¡ŒæŸ¥è¯¢æ“ä½œå°†è‡ªåŠ¨è¿›è¡Œåˆ†é¡µ\nList<PmsBrand> brandList = brandMapper.selectByExample(new PmsBrandExample());\n//é€šè¿‡æ„é€ PageInfoå¯¹è±¡è·å–åˆ†é¡µä¿¡æ¯ï¼Œå¦‚å½“å‰é¡µç ï¼Œæ€»é¡µæ•°ï¼Œæ€»æ¡æ•°\nPageInfo<PmsBrand> pageInfo = new PageInfo<PmsBrand>(list);\n```\n\n### Druid\n\n> alibabaå¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œå·ç§°Javaè¯­è¨€ä¸­æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ã€‚\n\n### Mybatis generator\n\n> MyBatisçš„ä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥æ ¹æ®æ•°æ®åº“ç”Ÿæˆmodelã€mapper.xmlã€mapperæ¥å£å’ŒExampleï¼Œé€šå¸¸æƒ…å†µä¸‹çš„å•è¡¨æŸ¥è¯¢ä¸ç”¨å†æ‰‹å†™mapperã€‚\n\n## [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#é¡¹ç›®æ­å»º)é¡¹ç›®æ­å»º\n\n### [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#ä½¿ç”¨ideaåˆå§‹åŒ–ä¸€ä¸ªspringbooté¡¹ç›®)ä½¿ç”¨IDEAåˆå§‹åŒ–ä¸€ä¸ªSpringBooté¡¹ç›®\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/arch_screen_01.ab5f2485.png)\n\n### [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#æ·»åŠ é¡¹ç›®ä¾èµ–)æ·»åŠ é¡¹ç›®ä¾èµ–\n\n> åœ¨pom.xmlä¸­æ·»åŠ ç›¸å…³ä¾èµ–ã€‚\n\n```\n<parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.1.3.RELEASE</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n    <dependencies>\n        <!--SpringBooté€šç”¨ä¾èµ–æ¨¡å—-->\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-actuator</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-aop</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        <!--MyBatisåˆ†é¡µæ’ä»¶-->\n        <dependency>\n            <groupId>com.github.pagehelper</groupId>\n            <artifactId>pagehelper-spring-boot-starter</artifactId>\n            <version>1.2.10</version>\n        </dependency>\n        <!--é›†æˆdruidè¿æ¥æ± -->\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid-spring-boot-starter</artifactId>\n            <version>1.1.10</version>\n        </dependency>\n        <!-- MyBatis ç”Ÿæˆå™¨ -->\n        <dependency>\n            <groupId>org.mybatis.generator</groupId>\n            <artifactId>mybatis-generator-core</artifactId>\n            <version>1.3.3</version>\n        </dependency>\n        <!--Mysqlæ•°æ®åº“é©±åŠ¨-->\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>8.0.15</version>\n        </dependency>\n    </dependencies>\n```\n\n### [#](https://www.macrozheng.com/mall/architect/mall_arch_01.html#ä¿®æ”¹springbooté…ç½®æ–‡ä»¶)ä¿®æ”¹SpringBooté…ç½®æ–‡ä»¶\n\n> åœ¨application.ymlä¸­æ·»åŠ æ•°æ®æºé…ç½®å’ŒMyBatisçš„mapper.xmlçš„è·¯å¾„é…ç½®ã€‚\n\n```\nserver:\n  port: 8080\n\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/mall?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai\n    username: root\n    password: root\n\n#mybatisçš„è·¯å¾„é…ç½®\nmybatis:\n  mapper-locations:\n    - classpath:mapper/*.xml\n    - classpath*:com/**/mapper/*.xml\n```\n\n### é¡¹ç›®ç»“æ„è¯´æ˜\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/arch_screen_02.151cd8d3.png)\n\n### Mybatis generator é…ç½®æ–‡ä»¶\n\n> é…ç½®æ•°æ®åº“è¿æ¥ï¼ŒMybatis generatorç”Ÿæˆmodelã€mapperæ¥å£åŠmapper.xmlçš„è·¯å¾„\n","tags":["springboot"],"categories":["javaå…¨æ ˆ"]},{"title":"å›¾åºŠæ­å»º","url":"/2022/06/01/å›¾åºŠæ­å»º/","content":"\n# picgo+é˜¿é‡Œäº‘oss+typoraå›¾åºŠæ­å»º\n\n## 1.è´­ä¹°é˜¿é‡Œäº‘çš„osså¯¹è±¡å‚¨å­˜\n\n## 2.å»ºç«‹ bucket\n\n![image-20210416171724270](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416171724.png)\n\n![image-20210416172033033](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172033.png)\n\n![image-20210416172125379](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172125.png)\n\n![image-20210416172219107](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172219.png)\n\n![image-20210416172312448](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172312.png)\n\n### ç„¶åè®°ä¸‹æ¥æ˜¾ç¤ºçš„AccessKeyå’ŒAccessKey Serectã€‚åˆ†åˆ«æ˜¯ç”¨æˆ·å·å’Œå¯†ç \n\n![image-20210416172507376](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172507.png)\n\n![image-20210416172540595](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172540.png)\n\nå†åˆ°picgo\n\n![image-20210416172627340](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172627.png)\n\n![image-20210416172754089](https://presenter.oss-cn-shanghai.aliyuncs.com/image/20210416172754.png)\n\nç„¶åå°±å¯ä»¥äº†ã€‚\n","tags":["å›¾åºŠ"],"categories":["å·¥å…·"]},{"title":"npmå¸¸ç”¨å‘½ä»¤","url":"/2022/05/31/npmå¸¸ç”¨å‘½ä»¤/","content":"\n## ç®€ä»‹\n\nnpm æ˜¯è·Ÿéš node ä¸€èµ·å®‰è£…çš„åŒ…ï¼ˆæ¨¡å—ï¼‰ç®¡ç†å™¨ã€‚å¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\n- å…è®¸ç”¨æˆ·ä» npm æœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚\n- å…è®¸ç”¨æˆ·ä» npm æœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚\n- å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ° npm æœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚\n\n## å¸¸ç”¨å‘½ä»¤\n\n#### æ£€æµ‹æ˜¯å¦å®‰è£…åŠç‰ˆæœ¬\n\n```shell\nnpm -v # æ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜å·²ç»å®‰è£…ç›¸åº”çš„ç‰ˆæœ¬\n```\n\n#### ç”Ÿæˆ package.json æ–‡ä»¶\n\n```shell\nnpm init\n```\n\n> package.json ç”¨æ¥æè¿°é¡¹ç›®ä¸­ç”¨åˆ°çš„æ¨¡å—å’Œå…¶ä»–ä¿¡æ¯\n\n#### å®‰è£…æ¨¡å—\n\n```shell\nnpm install # å®‰è£…package.jsonå®šä¹‰å¥½çš„æ¨¡å—ï¼Œç®€å†™ npm i\n \n# å®‰è£…åŒ…æŒ‡å®šæ¨¡å—\nnpm i <ModuleName>\n \n# å…¨å±€å®‰è£…\nnpm i <ModuleName> -g \n \n# å®‰è£…åŒ…çš„åŒæ—¶ï¼Œå°†ä¿¡æ¯å†™å…¥åˆ°package.jsonä¸­çš„ dependencies é…ç½®ä¸­\nnpm i <ModuleName> --save\n \n# å®‰è£…åŒ…çš„åŒæ—¶ï¼Œå°†ä¿¡æ¯å†™å…¥åˆ°package.jsonä¸­çš„ devDependencies é…ç½®ä¸­\nnpm i <ModuleName> --save-dev\n \n# å®‰è£…å¤šæ¨¡å—\nnpm i <ModuleName1> <ModuleName2>\n \n# å®‰è£…æ–¹å¼å‚æ•°ï¼š\n-save # ç®€å†™-Sï¼ŒåŠ å…¥åˆ°ç”Ÿäº§ä¾èµ–ä¸­\n-save-dev # ç®€å†™-Dï¼ŒåŠ å…¥åˆ°å¼€å‘ä¾èµ–ä¸­\n-g # å…¨å±€å®‰è£… å°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•\n```\n\n#### æŸ¥çœ‹\n\n```shell\n# æŸ¥çœ‹æ‰€æœ‰å…¨å±€å®‰è£…çš„åŒ…\nnpm ls -g\n \n# æŸ¥çœ‹æœ¬åœ°é¡¹ç›®ä¸­å®‰è£…çš„åŒ…\nnpm ls\n \n# æŸ¥çœ‹åŒ…çš„ package.jsonæ–‡ä»¶\nnpm view <ModuleName>\n \n# æŸ¥çœ‹åŒ…çš„ä¾èµ–å…³ç³»\nnpm view <ModuleName> dependencies\n \n# æŸ¥çœ‹åŒ…çš„æºæ–‡ä»¶åœ°å€\nnpm view <ModuleName> repository.url\n \n# æŸ¥çœ‹åŒ…æ‰€ä¾èµ–çš„nodeç‰ˆæœ¬\nnpm view <ModuleName> engines\n \n# æŸ¥çœ‹å¸®åŠ©\nnpm help\n```\n\n#### æ›´æ–°æ¨¡å—\n\n```shell\n# æ›´æ–°æœ¬åœ°æ¨¡å—\nnpm update <ModuleName>\n \n# æ›´æ–°å…¨å±€æ¨¡å—\nnpm update -g <ModuleName> # æ›´æ–°å…¨å±€è½¯ä»¶åŒ…ã€‚\nnpm update -g # æ›´æ–°æ‰€æœ‰çš„å…¨å±€è½¯ä»¶åŒ…ã€‚\nnpm outdated -g --depth=0 # æ‰¾å‡ºéœ€è¦æ›´æ–°çš„åŒ…ã€‚\n```\n\n#### å¸è½½æ¨¡å—\n\n```shell\n# å¸è½½æœ¬åœ°æ¨¡å—\nnpm uninstall <ModuleName>\n \n# å¸è½½å…¨å±€æ¨¡å—\nnpm uninstall -g <ModuleName> # å¸è½½å…¨å±€è½¯ä»¶åŒ…ã€‚\n```\n\n#### æ¸…ç©ºç¼“å­˜\n\n```shell\n# æ¸…ç©ºnpmç¼“å­˜\nnpm cache clear\n```\n\n#### ä½¿ç”¨æ·˜å®é•œåƒ\n\n```shell\n# ä½¿ç”¨æ·˜å®é•œåƒ\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n```\n\n#### å…¶ä»–\n\n```shell\n# æ›´æ”¹åŒ…å†…å®¹åè¿›è¡Œé‡å»º\nnpm rebuild <ModuleName>\n \n# æ£€æŸ¥åŒ…æ˜¯å¦å·²ç»è¿‡æ—¶ï¼Œæ­¤å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰å·²ç»è¿‡æ—¶çš„åŒ…ï¼Œå¯ä»¥åŠæ—¶è¿›è¡ŒåŒ…çš„æ›´æ–°\nnpm outdated\n \n# è®¿é—®npmçš„jsonæ–‡ä»¶ï¼Œæ­¤å‘½ä»¤å°†ä¼šæ‰“å¼€ä¸€ä¸ªç½‘é¡µ\nnpm help json\n \n# å‘å¸ƒä¸€ä¸ªåŒ…çš„æ—¶å€™ï¼Œéœ€è¦æ£€éªŒæŸä¸ªåŒ…åæ˜¯å¦å­˜åœ¨\nnpm search <ModuleName>\n \n# æ’¤é”€è‡ªå·±å‘å¸ƒè¿‡çš„æŸä¸ªç‰ˆæœ¬ä»£ç \nnpm unpublish <package> <version>\n```\n\n## ä½¿ç”¨æŠ€å·§\n\n#### å¤šæ¬¡å®‰è£…ä¸æˆåŠŸå°è¯•å…ˆæ¸…é™¤ç¼“å­˜\n\n```shell\nnpm cache clean -f\n```\n\n#### æŸ¥çœ‹å·²å®‰è£…çš„ä¾èµ–åŒ…ç‰ˆæœ¬å·\n\n```shell\nnpm ls <ModuleName>\n```\n\n> æ³¨æ„ï¼šç”¨æ­¤æ–¹æ³•æ‰èƒ½å‡†ç¡®çš„çŸ¥é“é¡¹ç›®ä½¿ç”¨çš„ç‰ˆæœ¬å·ï¼ŒæŸ¥çœ‹ package.json æ—¶ï¼Œæœ‰ â€œ^â€ ç¬¦å·è¡¨ç¤ºå¤§äºæ­¤ç‰ˆæœ¬\n\n## nrm çš„ä½œç”¨ä¸ä½¿ç”¨\n\n#### nrm æ˜¯ä»€ä¹ˆï¼Ÿ\n\nnrm (npm registry manager) æ˜¯ npm çš„é•œåƒæºç®¡ç†å·¥å…·ï¼Œæœ‰æ—¶å€™å›½å¤–èµ„æºå¤ªæ…¢ï¼Œä½¿ç”¨è¿™ä¸ªå°±å¯ä»¥å¿«é€Ÿåœ°åœ¨ npm æºé—´åˆ‡æ¢\n\n#### nrm çš„å®‰è£…\n\n```shell\nnpm install -g nrm\n```\n\n#### nrm å‘½ä»¤\n\n```shell\nnrm lsã€€#æŸ¥çœ‹å¯ç”¨çš„æºï¼ˆæœ‰*å·çš„è¡¨ç¤ºå½“å‰æ‰€ä½¿ç”¨çš„æº,ä»¥ä¸‹<registry>è¡¨ç¤ºæºçš„åç§°ï¼‰\nnrm use <registry> # å°†npmä¸‹è½½æºåˆ‡æ¢æˆæŒ‡å®šçš„æº\nnrm add <registry> <url> # æ·»åŠ æºï¼Œurlä¸ºæºçš„è·¯å¾„\nnrm del <registry> # åˆ é™¤æº\nnrm test <registry> # æµ‹è¯•æºçš„å“åº”æ—¶é—´ï¼Œå¯ä»¥ä½œä¸ºä½¿ç”¨å“ªä¸ªæºçš„å‚è€ƒ\n \nnrm helpã€€# æŸ¥çœ‹nrmå¸®åŠ©\nnrm home <registry>ã€€# è·³è½¬åˆ°æŒ‡å®šæºçš„å®˜ç½‘\n```\n\n#### nrm ä½¿ç”¨\n\nå¦‚æœåœ¨ä½ çš„ç½‘ç»œä¸å¤ªç†æƒ³æˆ–è€…å—åˆ°å…¶ä»–ç½‘ç»œé™åˆ¶å¯¼è‡´ä¸èƒ½ä½¿ç”¨ npm åŸæœ¬çš„æºè¿›è¡Œä¸‹è½½æ—¶ï¼Œnrm å°±éå¸¸æœ‰ç”¨äº†ï¼Œä½ åªéœ€è¦ï¼š\n\n```shell\nnrm ls # æŸ¥çœ‹å¯ç”¨çš„æº\nnrm use <registry>ã€€# åˆ‡æ¢åˆ°æŒ‡å®šæº\n```\n","tags":["å·¥å…·"],"categories":["javaå…¨æ ˆ"]},{"title":"starumlç ´è§£","url":"/2022/05/31/starumlç ´è§£/","content":"\n# starUMLç ´è§£æ­¥éª¤\n\n## 1ä¸‹è½½starUML\n\nåœ¨å®˜ç½‘ä¸‹è½½ï¼šhttp://staruml.io/download\n\n## 2å®‰è£…\n\n## 3ç ´è§£\n\n### 3.1å®‰è£…nodejsï¼Œé…ç½®ç¯å¢ƒ\n\n### 3.2ã€åç¼–è¯‘Star UML\n\nä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€cmd,ä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n\n```\nnpm install -g asar\ncd C:\\Program Files\\StarUML\\resources  //è¿›å…¥åˆ°StarUMLçš„é»˜è®¤å®‰è£…ç›®å½•ä¸‹é¢\nasar extract app.asar app  //åç¼–è¯‘è½¯ä»¶\n```\n\nåç¼–è¯‘å®Œæˆåä¼šå‘ç°è¿™é‡Œæœ‰ä¸€ä¸ªappæ–‡ä»¶å¤¹\n\n![image-20211117141008058](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211117141008058.png)\n\næ‰“å¼€app\\\\src\\\\engine\\\\license-manager.jsæ–‡ä»¶ï¼ŒæŠŠåŸæ¥çš„æ³¨é‡Šæ‰ï¼Œç„¶ååŠ ä¸Šä¸€å¥setStatus(this,true)\n\n**ä¿®æ”¹å‰**\n\n![image-20211117141247967](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211117141247967.png)\n\n**ä¿®æ”¹å**\n\n![image-20211117142645167](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20211117142645167.png)\n\n**3.3 å†æŠŠä»£ç ç¼–è¯‘æˆè½¯ä»¶å°±å¯ä»¥äº†**\n\n```\ncd C:\\Program Files\\StarUML\\resources  //è¿›å…¥åˆ°StarUMLçš„é»˜è®¤å®‰è£…ç›®å½•ä¸‹é¢\nasar pack app app.asar\n```\n","tags":["ç ´è§£"],"categories":["å·¥å…·"]},{"title":"VMwareå®‰è£…openwrt","url":"/2022/05/31/vmwareå®‰è£…openwrt/","content":"\n### ç°åœ¨é»˜è®¤å·²ç»å®‰è£…VMware\n\nå‡†å¤‡å¥½openwrtçš„é•œåƒæ–‡ä»¶\n\n[ç‚¹å‡»ä¸‹è½½](https://downloads.openwrt.org/)\n\nä¸‹è½½è·¯å¾„ç±»ä¼¼ä¸‹æ–¹\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224407205.png)\n\n**æˆ‘åœ¨é˜¿é‡Œäº‘ç›˜å’Œå­¦ä¹ é€šåˆå¤‡ä»½**\n\nç”±äºvmwareä¸æ”¯æŒimgï¼Œéœ€è¦è½¬æ¢\n\nä½¿ç”¨StarWindV2VConverterå°† img è½¬æ¢ä¸º vmdk\n\næ‰“å¼€\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224522831.png)\n\né€‰æ‹©local fileå°†åˆšæ‰ä¸‹è½½çš„openwrté€‰æ‹©\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224553958.png)\n\nç„¶åè¿˜æ˜¯é€‰æ‹©local fileï¼Œåœ¨é€‰æ‹©å¦‚ä¸‹\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224657061.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224712728.png)\n\nç„¶åå°±å¯ä»¥è½¬æ¢äº†ã€‚\n\n### åœ¨VMwareä¸­é…ç½®è™šæ‹Ÿæœº\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224822164.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224835772.png)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224848661.png)\n\nç„¶ååé¢éƒ½ç›´æ¥ä¸‹ä¸€æ­¥ã€‚ä½†æ˜¯è¿™é‡Œè¦é€‰æ‹©\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508224944494.png)\n\nç„¶åå°†è½¬æ¢å¥½çš„æ–‡ä»¶é€‰æ‹©\n\nåé¢åŸºæœ¬éƒ½ç›´æ¥ä¸‹ä¸€æ­¥\n\nç„¶åå¼€æœºä¹‹åå¡ä½ä¸åŠ¨è®°å¾—æŒ‰å›è½¦\n\n### æ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹ip\n\n```\n vi /etc/config/network\n```\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/image-20220508225253432.png)\n\næ¥ä¸‹æ¥å¯ä»¥ç›´æ¥æµè§ˆå™¨è¾“å…¥ipå°±èƒ½è¿›å…¥ç•Œé¢äº†ã€‚\n\nä¸­æ–‡åŒ…çš„åç§°\n\nluci-i18n-base-zh-cn\n\n[VMwareå®‰è£…OpenWrt - å§šå¤ - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/bwcxyk/p/13672461.html)\n","tags":["ç³»ç»Ÿ","è™šæ‹Ÿæœº"],"categories":["è¿ç»´"]},{"title":"VMwareè™šæ‹Ÿæœºä¸­é…ç½®é™æ€IPçš„æ–¹æ³•","url":"/2022/05/31/vmwareè™šæ‹Ÿæœºä¸­é…ç½®é™æ€ipçš„æ–¹æ³•/","content":"\n* * *\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315154409190-813762847.png)VMnet0ï¼šç”¨äºè™šæ‹Ÿæ¡¥æ¥ç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœº\n\næ¡¥æ¥ç½‘ç»œæ˜¯æŒ‡æœ¬åœ°ç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡é€šè¿‡VMnet0è™šæ‹Ÿäº¤æ¢æœºè¿›è¡Œæ¡¥æ¥ï¼Œç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡åœ¨æ‹“æ‰‘å›¾ä¸Šå¤„äºåŒç­‰åœ°ä½ã€‚\n\nVMnet1ï¼šç”¨äºè™šæ‹ŸHost-Onlyç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœºï¼ˆä»…ä¸»æœºï¼‰\n\nåœ¨Host-Onlyæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿç½‘ç»œæ˜¯ä¸€ä¸ªå…¨å°é—­çš„ç½‘ç»œï¼Œå®ƒå”¯ä¸€èƒ½å¤Ÿè®¿é—®çš„å°±æ˜¯ä¸»æœºã€‚\n\nVMnet8ï¼šç”¨äºè™šæ‹ŸNATç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœº\n\nåœ¨NATç½‘ç»œä¸­ï¼Œä¼šç”¨åˆ°VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡ï¼Œä¸»æœºä¸Šçš„VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡è¢«ç›´æ¥è¿æ¥åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœºä¸Šä¸è™šæ‹Ÿç½‘å¡è¿›è¡Œé€šä¿¡ã€‚\n\nVMware Network Adepter VMnet1ï¼šHostç”¨äºä¸Host-Onlyè™šæ‹Ÿç½‘ç»œè¿›è¡Œé€šä¿¡çš„è™šæ‹Ÿç½‘å¡\n\nVMware Network Adepter VMnet8ï¼šHostç”¨äºä¸NATè™šæ‹Ÿç½‘ç»œè¿›è¡Œé€šä¿¡çš„è™šæ‹Ÿç½‘å¡\n\n**ç»¼ä¸Šæ‰€è¯‰ï¼šåœ¨è¿™ä¸‰ç§ç½‘ç»œæ¨¡å¼ä¸­NATæ¨¡å¼æ˜¯æœ€ç®€å•çš„ï¼ŒåŸºæœ¬ä¸éœ€è¦æ‰‹åŠ¨é…ç½®IPåœ°å€ç›¸å…³å‚æ•°ã€‚æ¡¥æ¥æ¨¡éœ€è¦é…ç½®é¢å¤–çš„IPåœ°å€ã€‚**\n\n#### 1ã€æŸ¥çœ‹ç½‘å…³ï¼Œä»¥åŠç½‘æ®µ\n\nã€ç¼–è¾‘ã€‘â€”â€”ã€‰ã€è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ã€‘\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315154409190-813762847.png)\n\n**æˆ‘ä»¬ä½¿ç”¨NATæ¨¡å¼ï¼Œæ‰€ä»¥é€‰æ‹©VMnet8.å–æ¶ˆã€ä½¿ç”¨æœ¬åœ°DHCPã€‘è¿™ä¸ªé€‰é¡¹ä¸æ‰“å‹¾ï¼Œè¿™æ˜¯åˆ†é…åŠ¨æ€IPçš„ã€‚**\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315160047395-767075949.png)\n\nç½‘å…³IPéœ€è¦è®°ä½ï¼Œé€šè¿‡è¿™ä¸ªæˆ‘ä»¬å¾—çŸ¥\n\næˆ‘ä»¬çš„ç½‘å…³192.168.228.2ï¼Œå­ç½‘æ©ç æ˜¯255.255.255.0ã€‚å­ç½‘IPçš„192.168.228.0çš„æ„æ€æ˜¯å¦‚æœä½ è¦å¾€è¿™ä¸ªç½‘æ®µå†…æ·»åŠ æœºå™¨ï¼Œä½ çš„æœºå™¨ipåªèƒ½æ˜¯192.168.228.0~192.168.228.255è¿™ä¸ªèŒƒå›´å†…çš„ã€‚å…¶å®ä½ ä¼šå‘ç°192.168.228.2æ˜¯ç½‘å…³IPäº†ã€‚\n\nä¸€èˆ¬è€Œè¨€192.168.228.255æ˜¯å¹¿æ’­IPæ‰€ä»¥ä¸ç”¨ï¼Œ192.168.228.0ä¸€èˆ¬æ˜¯ç½‘æ®µIPä¹Ÿä¸ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´é™¤äº†0 2 255è¿™ä¸‰ä¸ªï¼Œå…¶ä»–çš„æ•°å­—ä½ å¯ä»¥éšä¾¿è®¾ç½®ã€‚\n\n#### 2ã€è®¾ç½®è™šæ‹ŸæœºIP\n\nè¿™é‡Œæ¼”ç¤ºçš„æ˜¯centosç³»ç»Ÿ\n\n```\nvi /etc/sysconfig/network-scripts/ifcfg-ens33\n```\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315160108866-52349871.png)\n\n```\ncd /etc/sysconfig/network-scripts/**\nls\n```\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315160117499-1422848875.png)\n\n**ifcfg-ens33****ç¬¬ä¸€ä¸ªå°±æ˜¯ç½‘å¡åç§°**\n\nç¼–è¾‘\n\nè¾“å…¥iåç¼–è¾‘æ›´æ”¹æˆONBOOTï¼šyes\n\nBOOTPROTOï¼šstatic\n\næŠŠIPåœ°å€ã€ç½‘å…³ã€å­ç½‘æ©ç ã€DNSæ·»åŠ ä¸Š\n\nIPADDRï¼š192.168.228.119\n\nNETMASKï¼š255.255.255.0\n\nGETEWAYï¼š192.168.228.254\n\nDNS1ï¼š114.114.114.114\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315160204742-936507531.png)\n\nåŒæ ·éœ€è¦åœ¨windowsä¸‹ä¿®æ”¹vmware8çš„ip\n\n![img](https://presenter.oss-cn-shanghai.aliyuncs.com/1868057-20200315160305010-661807387.png)\n\nç‚¹å‡»internetåè®®ç‰ˆæœ¬4ï¼ˆTCP/IPv4ï¼‰\n\nç‚¹å‡»è¾“å…¥ä½¿ç”¨ä¸‹é¢çš„IPåœ°å€ï¼ˆSï¼‰\n\nè¾“å…¥IPåœ°å€ï¼š192.168.228.98\n\nå­ç½‘æ©ç ï¼š255.255.255.0\n\né»˜è®¤ç½‘å…³ï¼š192.168.228.254\n\né¦–é€‰DNSæœåŠ¡å™¨ï¼ˆPï¼‰ï¼š114.114.114.114\n\nç¡®å®šå†ç¡®å®šä¿å­˜\n\nç°åœ¨å°±é…ç½®å®Œæˆäº†ï¼Œå¯ä»¥å°è¯•pingä¸€ä¸‹è¯•è¯•èƒ½ä¸èƒ½pingé€š\n\n**windowsç½‘ç»œå’Œè™šæ‹Ÿæœºçš„ç½‘ç»œipä¸è¦ä¸€æ ·ï¼Œå¦åˆ™ä¼šè¿ä¸ä¸Š(é€ æˆIPå†²çª)**\n","tags":["è™šæ‹Ÿæœº","ç½‘ç»œ"],"categories":["è¿ç»´"]},{"title":"win11çš„èµ„æºç®¡ç†å™¨å¡é¡¿","url":"/2022/05/31/win11çš„èµ„æºç®¡ç†å™¨å¡é¡¿/","content":"\nè§£å†³åŠæ³•ï¼š\n\n> 1.æ‰“å¼€æ³¨å†Œè¡¨ win+r ï¼Œè¾“å…¥regeditã€‚å¤åˆ¶è¿™ä¸ªè·¯å¾„è¿›å»æœç´¢`è®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Shell Extensions`\n> \n> 2.åœ¨ `Shell Extensions` ä¸Šå³é”®æ–°å»º==é¡¹==ï¼Œå‘½åä¸º `Blocked`\n> \n> 3.å³é”® `Blocked` ï¼Œæ–°å»ºå­—ç¬¦ä¸²å€¼ï¼Œå‘½åä¸º `{e2bf9676-5f8f-435c-97eb-11607a5bedf7}`\n> \n> 4.æœ€åé‡å¯èµ„æºç®¡ç†å™¨\n> \n> \\==æ³¨ï¼šè‹¥æƒ³å›åˆ°win11ï¼Œåˆ é™¤Blockedå³å¯==\n","tags":["win11"],"categories":["è¿ç»´"]},{"title":"YACCæ¦‚è¿°","url":"/2022/05/31/yaccæ¦‚è¿°/","content":"\n* * *\n\nyacc(Yet Another Compiler Compiler)ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„ç”Ÿæˆè¯­æ³•åˆ†æå™¨çš„å·¥å…·ã€‚yaccç”Ÿæˆçš„ç¼–è¯‘å™¨ä¸»è¦æ˜¯ç”¨Cè¯­è¨€å†™æˆçš„è¯­æ³•è§£æå™¨ï¼ˆParserï¼‰ï¼Œéœ€è¦ä¸è¯æ³•è§£æå™¨Lexä¸€èµ·ä½¿ç”¨ï¼Œå†æŠŠä¸¤éƒ¨ä»½äº§ç”Ÿå‡ºæ¥çš„Cç¨‹åºä¸€å¹¶ç¼–è¯‘ã€‚\n\n### YACCè¯­æ³•è§„åˆ™\n\nyaccè¯­æ³•åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼šå®šä¹‰æ®µã€è§„åˆ™æ®µå’Œç”¨æˆ·å­ä¾‹ç¨‹æ®µ\n\n```\n...å®šä¹‰æ®µ...\n\n%%\n\n...è§„åˆ™æ®µ...\n\n%%\n\n...ç”¨æˆ·å­ä¾‹ç¨‹æ®µ...\n```\n\n**å®ä¾‹ï¼š**\n\nä¸€ä¸ªç®€å•çš„å››åˆ™è¿ç®—ï¼š\n\ntest.l\n\n```\n%{\n#include \"test.tab.h\"\nextern int yylval;\n%}\n\n%%\n[0-9]+  { yylval = atoi(yytext); return NUMBER; }\n[ \\t]   ;       /* ignore white space */\n\\n  return 0;   /* logical EOF */\n.   return yytext[0];\n%%\n```\n\ntest.y\n\n```\n%{\n#include <stdio.h>\n%}\n%token NAME NUMBER\n%%\nstatement:  NAME '=' expression\n    |   expression      { printf(\"= %d\\n\", $1); }\n    ;\n\nexpression: expression '+' NUMBER   { $$ = $1 + $3; }\n    |   expression '-' NUMBER   { $$ = $1 - $3; }\n    |   expression '*' NUMBER   { $$ = $1 * $3; }\n    |   expression '/' NUMBER   { $$ = $1 / $3; }\n    |   expression '%' NUMBER   { $$ = $1 % $3; }\n    |   NUMBER          { $$ = $1; }\n    ;\n%%\nint main()\n{\n    yyparse();\n    return 0;\n}\n\nint yyerror(char *s)\n{\n    printf(\"%s/n\",s);\n    return 0;\n}\n```\n\n```\nflex test.l\nbison -d test.y\ngcc -o test test.tab.c test.yy.c -lfl\n```\n\nç»“æœï¼š\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wps1.jpg)\n\n![](https://presenter.oss-cn-shanghai.aliyuncs.com/wps2.jpg)\n\n[å…¨æ–‡å‚è€ƒ](https://www.cnblogs.com/thl8664/p/6971244.html)\n","tags":["cè¯­è¨€"],"categories":["å…¶ä»–è¯­è¨€"]}]